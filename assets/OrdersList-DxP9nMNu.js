import{r,A as Q,j as e,M as Y,c as O,S as K,W as H,f as Z,L as ee}from"./index-W202FQ2h.js";import{c as te}from"./imageCompressor-D5vYYzIg.js";const se=({product:s,isOpen:l,onClose:f,onConfirm:u,showTagEditor:d=!0})=>{const{refreshData:i}=r.useContext(Q),[h,x]=r.useState(""),[m,p]=r.useState(window.innerWidth<768),[j,c]=r.useState(!1),[y,v]=r.useState(!1),[b,D]=r.useState(!1),[a,N]=r.useState(null),I=r.useRef(null);r.useEffect(()=>{const n=()=>p(window.innerWidth<768);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),r.useEffect(()=>{s&&l&&(x(s.Tags||""),N(s.ImageURL),v(!1))},[s,l]);const E=r.useMemo(()=>{if(!s)return!1;const n=a||s.ImageURL;return n&&!n.includes("placehold.co")&&!n.includes("text=N/A")},[s,a]),R=n=>{if(n.key==="Enter"){n.preventDefault();const t=h.trim();t&&!t.endsWith(",")&&x(t+", ")}},o=async()=>{if(s){D(!0);try{const n=h.split(",").map(t=>t.trim()).filter(t=>t!=="").join(", ");if(n!==(s.Tags||"")){if(!(await fetch(`${H}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:s.ProductName},newData:{Tags:n}})})).ok)throw new Error("Failed to update product tags");await i(),u(s.ProductName,n)}else u(s.ProductName,n)}catch(n){console.error(n),alert(`Save failed: ${n.message}`),u(s.ProductName,h)}finally{D(!1)}}},g=async n=>{var k;const t=(k=n.target.files)==null?void 0:k[0];if(!(!t||!s)){c(!0),v(!1);try{const C=await te(t,.7,1024),L=await Z(C),w=await fetch(`${H}/api/upload-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileData:L,fileName:t.name,mimeType:C.type})}),S=await w.json();if(!w.ok||S.status!=="success")throw new Error(S.message);const T=S.url;await fetch(`${H}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:s.ProductName},newData:{ImageURL:T}})}),N(T),v(!0),setTimeout(()=>v(!1),2500),await i()}catch(C){alert(`Update Error: ${C.message}`)}finally{c(!1),I.current&&(I.current.value="")}}};return s?e.jsx(Y,{isOpen:l,onClose:f,maxWidth:m?"max-w-[95vw]":"max-w-4xl",children:e.jsxs("div",{className:`
                bg-[#09090b] border border-white/10 overflow-hidden relative flex flex-col
                ${m?"h-[85vh] rounded-[2rem]":"h-[500px] rounded-[2rem] md:flex-row"}
                shadow-2xl transition-all duration-300
            `,children:[e.jsx("div",{className:`
                    relative group flex items-center justify-center bg-black/20
                    ${m?"h-[40%] w-full border-b border-white/5":"w-[40%] h-full border-r border-white/5"}
                `,children:e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center cursor-pointer p-6",onClick:()=>{var n;return!j&&((n=I.current)==null?void 0:n.click())},children:[E?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:O(a||s.ImageURL),className:`
                                        w-full h-full object-contain relative z-10 transition-all duration-500 rounded-xl
                                        ${j?"opacity-30 grayscale blur-sm":"group-hover:scale-105"}
                                    `,alt:s.ProductName}),!j&&!y&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/40 backdrop-blur-[2px] z-20",children:e.jsxs("div",{className:"bg-white/10 px-3 py-1.5 rounded-full border border-white/20 backdrop-blur-md flex items-center gap-2",children:[e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),e.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-wider",children:"Change"})]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 text-gray-600 group-hover:text-blue-400 transition-colors",children:[e.jsx("div",{className:"p-4 rounded-full border-2 border-dashed border-gray-700 group-hover:border-blue-500/50 transition-all",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Upload Image"})]}),j&&e.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center",children:[e.jsx(K,{size:"md"}),e.jsx("span",{className:"text-[9px] font-bold text-gray-400 mt-2 uppercase tracking-wider",children:"Uploading..."})]}),y&&e.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center shadow-lg mb-2 animate-scale-in",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"text-[9px] font-bold text-emerald-400 uppercase tracking-widest",children:"Success"})]})]})}),e.jsxs("div",{className:`
                    flex flex-col p-6 md:p-10 relative
                    ${m?"h-[60%] justify-between":"w-[60%] h-full justify-center gap-8"}
                `,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"px-2 py-1 bg-white/5 rounded text-[10px] font-mono text-gray-400 border border-white/5",children:["#",s.Barcode||"NO-CODE"]}),e.jsxs("span",{className:"px-2 py-1 bg-emerald-500/10 text-emerald-400 rounded text-[10px] font-bold border border-emerald-500/20",children:["$",s.Price.toFixed(2)]})]}),e.jsx("h2",{className:`font-black text-white leading-tight ${m?"text-2xl line-clamp-2":"text-4xl line-clamp-3"}`,children:s.ProductName}),d&&e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:"Operational Tags"}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",value:h,onChange:n=>x(n.target.value),onKeyDown:R,className:"w-full bg-transparent border-b border-gray-700 py-2 text-sm font-medium text-gray-200 focus:border-blue-500 outline-none transition-colors placeholder:text-gray-700",placeholder:"Add tags..."}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 text-[9px] font-bold text-gray-600 opacity-0 group-focus-within:opacity-100 transition-opacity",children:"ENTER"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{onClick:f,className:"px-6 py-4 rounded-xl border border-white/10 text-gray-400 font-bold text-xs uppercase tracking-wider hover:bg-white/5 hover:text-white transition-all active:scale-95",children:"Cancel"}),e.jsxs("button",{onClick:o,disabled:b,className:"flex-1 px-6 py-4 rounded-xl bg-blue-600 text-white font-bold text-xs uppercase tracking-wider hover:bg-blue-500 transition-all active:scale-95 shadow-lg shadow-blue-900/20 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[b?e.jsx(K,{size:"sm"}):"Confirm Selection",!b&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M5 12h14M12 5l7 7-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),e.jsx("input",{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:g}),e.jsx("style",{children:`
                    @keyframes scale-in {
                        0% { transform: scale(0); opacity: 0; }
                        60% { transform: scale(1.1); opacity: 1; }
                        100% { transform: scale(1); }
                    }
                    .animate-scale-in { animation: scale-in 0.3s ease-out forwards; }
                `})]})}):null},ae=(s,l)=>{if(!l||!s)return e.jsx("span",{children:s});const f=l.split(" ").filter(Boolean).map(d=>d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));if(f.length===0)return e.jsx("span",{children:s});const u=new RegExp(`(${f.join("|")})`,"gi");return e.jsx(e.Fragment,{children:s.split(u).map((d,i)=>u.test(d)&&d.trim()!==""?e.jsx("strong",{className:"text-yellow-300 bg-yellow-900/50 rounded-sm px-0.5",children:d},i):d)})},re=(s,l)=>{const f=(s.ProductName||"").toLowerCase(),u=(s.Barcode||"").toLowerCase(),d=`${f} ${u}`,i=l.toLowerCase().trim();if(!i)return 1;const h=i.split(" ").filter(Boolean);if(!h.every(p=>d.includes(p)))return 0;let m=10;return h.forEach(p=>{f.includes(p)&&(m+=20),u.includes(p)&&(m+=10)}),f.startsWith(i)&&(m+=500),m},ie=({products:s,selectedProductName:l,onSelect:f,showTagEditor:u=!0})=>{const[d,i]=r.useState(!1),[h,x]=r.useState(""),[m,p]=r.useState(0),[j,c]=r.useState(null),y=r.useRef(null),v=r.useRef(null);r.useEffect(()=>{x(l)},[l]),r.useEffect(()=>{const o=g=>{y.current&&!y.current.contains(g.target)&&(i(!1),x(l))};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[l]);const b=r.useMemo(()=>{const o=h||"";return o.trim()?s.map(g=>({product:g,score:re(g,o)})).filter(g=>g.score>0).sort((g,n)=>n.score-g.score||g.product.ProductName.localeCompare(n.product.ProductName)).map(g=>g.product):[]},[s,h]),D=r.useMemo(()=>{const o=h.trim();return o?!s.some(g=>g.ProductName.trim().toLowerCase()===o.toLowerCase()):!1},[h,s]),a=r.useMemo(()=>{const o=[...b];return D&&o.unshift({isAddNew:!0,ProductName:h.trim()}),o},[b,D,h]),N=r.useCallback((o,g)=>{var n;f(o,g),x(o),i(!1),c(null),p(0),(n=v.current)==null||n.blur()},[f]),I=o=>{o.isAddNew?N(o.ProductName):(c(o),i(!1))},E=r.useCallback(()=>{var o;f("",""),x(""),i(!0),p(0),(o=v.current)==null||o.focus()},[f]),R=o=>{var n;const g=a.length;if(g!==0)switch(o.key){case"ArrowDown":o.preventDefault(),d||i(!0),p(t=>(t+1)%g);break;case"ArrowUp":o.preventDefault(),d||i(!0),p(t=>(t-1+g)%g);break;case"Enter":if(o.preventDefault(),!d)return;m>-1&&a[m]&&I(a[m]);break;case"Escape":i(!1),x(l),(n=v.current)==null||n.blur();break}};return e.jsxs("div",{className:"relative",ref:y,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{ref:v,type:"text",className:"form-input !pr-16 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:"ស្វែងរកផលិតផល...",value:h,onChange:o=>{x(o.target.value),i(!0),p(0)},onFocus:()=>i(!0),onKeyDown:R}),e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[h&&e.jsx("button",{type:"button",onClick:E,className:"text-gray-500 hover:text-white text-2xl",children:"×"}),e.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),d&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden animate-fade-in-down max-h-80 overflow-y-auto custom-scrollbar",children:e.jsx("ul",{className:"p-2 space-y-1",children:a.length===0?e.jsx("li",{className:"p-4 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"រកមិនឃើញផលិតផលទេ"}):a.map((o,g)=>{if("isAddNew"in o&&o.isAddNew)return e.jsxs("li",{className:`p-3.5 rounded-2xl cursor-pointer flex items-center gap-4 transition-all ${m===g?"bg-blue-600 text-white":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>I(o),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center border border-blue-500/30",children:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"})})}),e.jsx("div",{className:"min-w-0",children:e.jsxs("p",{className:"font-black text-sm leading-tight",children:["បន្ថែមថ្មី៖ ",e.jsxs("span",{className:"text-yellow-400",children:['"',o.ProductName,'"']})]})})]},"add-new");const n=o;return e.jsxs("li",{className:`p-2.5 rounded-2xl cursor-pointer flex items-center gap-3 transition-all ${m===g?"bg-blue-600 text-white shadow-lg":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>I(n),children:[e.jsx("img",{src:O(n.ImageURL),className:"w-12 h-12 rounded-xl object-cover border border-white/10",alt:""}),e.jsxs("div",{className:"min-w-0 flex-grow",children:[e.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:ae(n.ProductName,h)}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:e.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-md border border-blue-500/10",children:["$",n.Price.toFixed(2)]})})]})]},n.ProductName)})})}),e.jsx(se,{product:j,isOpen:!!j,onClose:()=>c(null),onConfirm:N,showTagEditor:u})]})},oe=({methods:s,selectedMethodName:l,onSelect:f,placeholder:u="ជ្រើសរើសសេវាដឹកជញ្ជូន..."})=>{const[d,i]=r.useState(!1),[h,x]=r.useState(""),m=r.useRef(null);r.useEffect(()=>{const c=s.find(y=>y.MethodName===l);c&&x(c.MethodName)},[l,s]),r.useEffect(()=>{const c=y=>{if(m.current&&!m.current.contains(y.target)){i(!1);const v=s.find(b=>b.MethodName===l);x(v?v.MethodName:"")}};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[l,s]);const p=r.useMemo(()=>{if(!h.trim())return s;const c=h.toLowerCase();return s.filter(y=>y.MethodName.toLowerCase().includes(c))},[s,h]),j=s.find(c=>c.MethodName===l);return e.jsxs("div",{className:"relative w-full",ref:m,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",className:"form-input !pl-14 !pr-10 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:u,value:h,onChange:c=>{x(c.target.value),i(!0)},onFocus:()=>i(!0)}),e.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-8 h-8 rounded-xl bg-gray-800 overflow-hidden border border-white/5 flex items-center justify-center p-1 shadow-inner",children:j?e.jsx("img",{src:O(j.LogosURL),className:"w-full h-full object-contain",alt:""}):e.jsxs("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h8a1 1 0 001-1z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 16l4-4 4 4"})]})})}),e.jsx("div",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-gray-600 group-focus-within:text-blue-500 transition-colors",children:e.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${d?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 9l-7 7-7-7",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),d&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_60px_rgba(0,0,0,0.6)] overflow-hidden animate-fade-in-down",children:e.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar p-2.5 space-y-1.5",children:p.length>0?p.map(c=>e.jsxs("button",{type:"button",onClick:()=>{f(c),x(c.MethodName),i(!1)},className:`w-full flex items-center gap-3.5 p-3 rounded-2xl transition-all ${l===c.MethodName?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-300 hover:bg-white/5"}`,children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gray-900 border-2 border-white/10 p-1.5 shadow-sm flex-shrink-0 flex items-center justify-center",children:e.jsx("img",{src:O(c.LogosURL),className:"w-full h-full object-contain",alt:""})}),e.jsxs("div",{className:"text-left min-w-0 flex-grow",children:[e.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:c.MethodName}),e.jsx("div",{className:"flex items-center gap-1.5 mt-1",children:e.jsx("span",{className:`text-[8px] px-1.5 py-0.5 rounded-md font-black uppercase tracking-tighter ${l===c.MethodName?"bg-white/20 text-white":"bg-blue-500/10 text-blue-400"}`,children:c.RequireDriverSelection?"Driver Selection Req":"Standard Service"})})]})]},c.MethodName)):e.jsx("div",{className:"p-6 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"រកមិនឃើញសេវាដឹកជញ្ជូនទេ"})})})]})},ce=({provinces:s,selectedProvince:l,onSelect:f})=>{const[u,d]=r.useState(!1),[i,h]=r.useState(""),x=r.useRef(null);r.useEffect(()=>{h(l)},[l]),r.useEffect(()=>{const p=j=>{x.current&&!x.current.contains(j.target)&&(d(!1),h(l))};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[l]);const m=r.useMemo(()=>{const p=s.filter(b=>b.toLowerCase().includes(i.toLowerCase())),j=p.filter(b=>!b.includes("ភ្នំពេញ")&&!b.includes("កណ្ដាល")).sort((b,D)=>b.localeCompare(D,"km")),c=[],y=p.find(b=>b.includes("ភ្នំពេញ")),v=p.find(b=>b.includes("កណ្ដាល"));return y&&c.push(y),v&&c.push(v),[...c,...j]},[s,i]);return e.jsxs("div",{className:"relative w-full",ref:x,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",className:"form-input !pl-10 !py-3 rounded-xl border-gray-700 bg-gray-900 focus:border-blue-500/50 transition-all font-bold text-gray-200",placeholder:"ស្វែងរក ខេត្ត/រាជធានី...",value:i,onChange:p=>{h(p.target.value),d(!0)},onFocus:()=>d(!0)}),e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),u&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800 border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-down max-h-60 overflow-y-auto custom-scrollbar",children:m.length>0?m.map((p,j)=>e.jsx("button",{type:"button",onClick:()=>{f(p),h(p),d(!1)},className:`w-full text-left px-4 py-3 text-sm font-bold transition-colors border-b border-white/5 last:border-0 ${l===p?"bg-blue-600 text-white":"text-gray-300 hover:bg-white/5"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:p}),j<2&&i===""&&e.jsx("span",{className:"text-[8px] bg-white/10 px-1.5 py-0.5 rounded uppercase tracking-widest opacity-50",children:"Priority"})]})},p)):e.jsx("div",{className:"p-4 text-center text-xs text-gray-500",children:"រកមិនឃើញខេត្តនេះទេ"})})]})},de=({value:s,onChange:l,label:f="ចំនួន*",min:u=1,max:d=99})=>{var D;const i=r.useRef(null),[h,x]=r.useState(!1),m=()=>{const a=Math.min(d,s+1);l(a)},p=()=>{const a=Math.max(u,s-1);l(a)},j=a=>{const N=a.target.value;if(N===""){x(!0);return}const I=parseInt(N,10);isNaN(I)||(I<u||I>d?x(!0):(l(I),x(!1)))},c=()=>{if(h){const a=i.current;if(a&&a.value){let N=parseInt(a.value,10);isNaN(N)||N<u?N=u:N>d&&(N=d),l(N)}else l(u);x(!1)}},y=a=>{var N;a.key==="Enter"?(a.preventDefault(),c(),(N=i.current)==null||N.blur()):a.key==="ArrowUp"?(a.preventDefault(),m()):a.key==="ArrowDown"&&(a.preventDefault(),p())},v=()=>{x(!0)},b=h?((D=i.current)==null?void 0:D.value)||"":s;return e.jsxs("div",{className:"space-y-1.5 w-full",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:f}),e.jsxs("div",{className:"flex items-center bg-black/40 rounded-2xl border border-gray-700 h-12 w-full overflow-hidden focus-within:border-blue-500/50 transition-all focus-within:shadow-[0_0_20px_rgba(59,130,246,0.15)] ring-1 ring-white/5",children:[e.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${s<=u?"text-gray-600 cursor-not-allowed opacity-50":"text-gray-400 hover:text-white hover:bg-white/5 active:scale-90"}
                        transition-all border-r border-gray-700/50
                    `,onClick:p,disabled:s<=u,"aria-label":"ថយចំនួន",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M20 12H4"})})}),e.jsx("input",{ref:i,type:"number",inputMode:"numeric",value:b,onChange:j,onBlur:c,onFocus:v,onKeyDown:y,min:u,max:d,step:"1",className:"flex-1 h-full bg-transparent text-center text-white font-black text-base outline-none border-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:u.toString(),"aria-label":"ចំនួន"}),e.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${s>=d?"text-gray-600 cursor-not-allowed opacity-50":"text-blue-400 hover:text-white hover:bg-blue-600/10 active:scale-90"}
                        transition-all border-l border-gray-700/50
                    `,onClick:m,disabled:s>=d,"aria-label":"បន្ថែមចំនួន",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M12 4v16m8-8H4"})})})]}),e.jsxs("div",{className:"text-xs text-gray-500 px-1 flex justify-between",children:[e.jsxs("span",{children:["អប្បបរមា: ",u]}),e.jsxs("span",{children:["អតិបរមា: ",d]})]})]})},xe=({orders:s,onEdit:l,showActions:f,visibleColumns:u,selectedIds:d=new Set,onToggleSelect:i,onToggleSelectAll:h})=>{const{appData:x,refreshData:m,previewImage:p}=r.useContext(Q),[j,c]=r.useState(null),[y,v]=r.useState(new Set),[b,D]=r.useState(s);r.useEffect(()=>{D(s)},[s]);const a=t=>t==="actions"&&!f?!1:!u||u.has(t),N=s.length>0&&s.every(t=>d.has(t["Order ID"])),I=async(t,k)=>{const C=!k;D(L=>L.map(w=>w["Order ID"]===t?{...w,IsVerified:C}:w)),v(L=>new Set(L).add(t));try{if(!(await fetch(`${H}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"AllOrders",primaryKey:{"Order ID":t},newData:{IsVerified:C}})})).ok)throw new Error("Failed to save");m()}catch(L){console.error("Verification toggle failed:",L),D(w=>w.map(S=>S["Order ID"]===t?{...S,IsVerified:k}:S)),alert("រក្សាទុកស្ថានភាពមិនបានសម្រេច!")}finally{v(L=>{const w=new Set(L);return w.delete(t),w})}},E=t=>{let k=(t||"").replace(/[^0-9]/g,"");return k.length>0&&(k="0"+k.replace(/^0+/,"")),k},R=t=>{navigator.clipboard.writeText(t),c(t),setTimeout(()=>c(null),2e3)},o=t=>{if(!t)return;const k=E(t["Customer Phone"]),C=new URLSearchParams({id:t["Order ID"],name:t["Customer Name"]||"",phone:k,location:t.Location||"",address:t["Address Details"]||"",total:(t["Grand Total"]||0).toString(),payment:t["Payment Status"]||"Unpaid",shipping:t["Internal Shipping Method"]||"N/A",page:t.Page||"",user:t.User||""}),w=(t.Note||"").match(/https?:\/\/(www\.)?(google\.com\/maps|maps\.app\.goo\.gl)\/[^\s]+/);w&&C.set("map",w[0]),window.open(`${ee}?${C.toString()}`,"_blank")},g=t=>{if(!t||!x.phoneCarriers)return null;const C=t.replace(/\s/g,"").substring(0,3),L=x.phoneCarriers.find(w=>w.Prefixes.split(",").map(S=>S.trim()).includes(C));return L?O(L.CarrierLogoURL):null},n=t=>{if(!t||!x.shippingMethods)return null;const k=x.shippingMethods.find(C=>C.MethodName===t);return k?O(k.LogosURL):null};return e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsxs("div",{className:"flex-grow space-y-4",children:[e.jsx("div",{className:"hidden md:block page-card !p-0 shadow-2xl border-white/5 min-h-[1500px] overflow-visible bg-gray-900/60 backdrop-blur-3xl rounded-[2.5rem]",children:e.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800/80 border-b border-white/10",children:[h&&e.jsx("th",{className:"px-4 py-6 w-12 text-center",children:e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-600 bg-gray-900 text-blue-500 cursor-pointer focus:ring-blue-500/20",checked:N,onChange:()=>h(s.map(t=>t["Order ID"]))})}),a("index")&&e.jsx("th",{className:"px-4 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-center text-gray-500 w-12",children:"#"}),a("orderId")&&e.jsx("th",{className:"px-2 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-center text-gray-500 w-16",children:"Node ID"}),a("customerName")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-56",children:"Merchant/Client"}),a("productInfo")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-44",children:"Assets"}),a("location")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-52",children:"Geography"}),a("pageInfo")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-44",children:"Source Page"}),a("total")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32",children:"Valuation"}),a("shippingService")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-48",children:"Logistics"}),a("shippingCost")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-28",children:"Exp. Cost"}),a("status")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32",children:"Status"}),a("date")&&e.jsx("th",{className:"px-4 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-20",children:"Time"}),a("print")&&e.jsx("th",{className:"px-4 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-center text-gray-500 w-16",children:"P"}),a("actions")&&e.jsx("th",{className:"px-4 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-center text-gray-500 w-24",children:"Command"}),a("check")&&e.jsx("th",{className:"px-2 py-6 text-[9px] font-normal uppercase tracking-[0.15em] text-center text-emerald-500/80 w-14",children:"VERIFIED"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:b.map((t,k)=>{var V;const C=(V=x.pages)==null?void 0:V.find(P=>P.PageName===t.Page),L=C?O(C.PageLogoURL):"",w=E(t["Customer Phone"]),S=g(w),T=j===t["Order ID"],A=n(t["Internal Shipping Method"]),$=t["Order ID"],U=t.IsVerified===!0||String(t.IsVerified).toUpperCase()==="TRUE",B=y.has($),_=d.has($),M=k>b.length-3&&b.length>4,F=M?"bottom-full mb-3":"top-full mt-3",z=M?"-bottom-2 border-r border-b":"-top-2 border-t border-l";return e.jsxs("tr",{className:`${U?"bg-emerald-500/[0.03]":_?"bg-blue-500/10":"hover:bg-white/[0.02]"} transition-all group relative`,children:[i&&e.jsx("td",{className:"px-4 py-5 text-center",children:e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-700 bg-gray-950 text-blue-500 cursor-pointer transition-all",checked:_,onChange:()=>i($)})}),a("index")&&e.jsx("td",{className:"px-4 py-5 text-center text-[11px] font-bold text-gray-600",children:k+1}),a("orderId")&&e.jsx("td",{className:"px-2 py-5 text-center",children:e.jsx("button",{onClick:()=>R(t["Order ID"]),className:`p-2 rounded-xl transition-all border ${T?"bg-green-500/20 border-green-500/40 text-green-400":"bg-gray-800 border-white/5 text-gray-500 hover:text-blue-400 active:scale-90"}`,children:e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:T?"✓":"ID"})})}),a("customerName")&&e.jsxs("td",{className:"px-6 py-5",children:[e.jsx("div",{className:"text-[16px] font-black text-gray-100 truncate mb-1 leading-tight tracking-tight",children:t["Customer Name"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[S&&e.jsx("img",{src:S,className:"w-4 h-4 object-contain opacity-80",alt:"carrier"}),e.jsx("div",{className:"text-[13px] text-blue-400/80 font-mono font-black tracking-tighter",children:w})]})]}),a("productInfo")&&e.jsx("td",{className:"px-6 py-5 relative overflow-visible",children:e.jsxs("div",{className:"group/prod flex flex-col gap-1 cursor-help",children:[t.Products.slice(0,2).map((P,W)=>e.jsxs("div",{className:"text-[10px] bg-black/40 p-1.5 rounded-lg border border-white/5 flex flex-col",children:[e.jsx("span",{className:"font-bold text-gray-300 line-clamp-1",children:P.name}),e.jsxs("span",{className:"text-blue-400/80 font-black mt-0.5",children:["x",P.quantity]})]},W)),t.Products.length>2&&e.jsxs("p",{className:"text-[8px] text-gray-600 font-black ml-1 uppercase tracking-widest",children:["+ ",t.Products.length-2," items"]}),e.jsxs("div",{className:`invisible group-hover/prod:visible opacity-0 group-hover/prod:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${F} w-80 p-5 bg-[#1a2235] border border-white/10 rounded-[2.5rem] shadow-[0_40px_100px_rgba(0,0,0,0.8)] transition-all duration-300 pointer-events-none backdrop-blur-3xl`,children:[e.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-[0.3em] mb-4 border-b border-white/5 pb-3",children:"Operational Asset Data"}),e.jsx("div",{className:"space-y-3 max-h-[350px] overflow-y-auto custom-scrollbar pr-1",children:t.Products.map((P,W)=>{var J;const q=(J=x.products)==null?void 0:J.find(G=>G.ProductName===P.name),X=P.image||(q==null?void 0:q.ImageURL)||"";return e.jsxs("div",{className:"flex items-center gap-4 text-left p-2.5 bg-black/30 rounded-2xl border border-white/5",children:[e.jsx("div",{className:"w-14 h-14 flex-shrink-0 bg-gray-900 rounded-xl border border-gray-800 overflow-hidden shadow-inner",children:e.jsx("img",{src:O(X),className:"w-full h-full object-cover",alt:P.name,onError:G=>G.currentTarget.src="https://placehold.co/100x100/1f2937/4b5563?text=N/A"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[12px] font-black text-white leading-tight mb-1 line-clamp-2",children:P.name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2.5 py-0.5 rounded-lg border border-blue-500/10",children:["x",P.quantity]}),P.colorInfo&&e.jsxs("span",{className:"text-[9px] text-purple-400 font-bold uppercase",children:["Node: ",P.colorInfo]})]})]})]},W)})}),e.jsx("div",{className:`absolute ${z} left-1/2 -translate-x-1/2 w-5 h-5 bg-[#1a2235] border-white/10 rotate-45`})]})]})}),a("location")&&e.jsx("td",{className:"px-6 py-5 relative overflow-visible",children:e.jsxs("div",{className:"group/loc cursor-help",children:[e.jsx("div",{className:"text-[12px] font-black text-gray-200 leading-tight truncate",children:t.Location}),e.jsx("div",{className:"text-[10px] font-bold text-gray-600 mt-1 line-clamp-1",children:t["Address Details"]}),e.jsxs("div",{className:`invisible group-hover/loc:visible opacity-0 group-hover/loc:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${F} w-72 p-5 bg-[#1a2235] border border-white/10 rounded-[2.5rem] shadow-[0_40px_100px_rgba(0,0,0,0.8)] transition-all duration-300 pointer-events-none backdrop-blur-3xl`,children:[e.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-[0.3em] mb-3 border-b border-white/5 pb-2",children:"Geographic Assignment"}),e.jsxs("div",{className:"space-y-4 text-left",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[8px] font-black text-gray-600 uppercase tracking-widest",children:"Region Node"}),e.jsx("p",{className:"text-sm font-black text-white mt-0.5",children:t.Location})]}),e.jsxs("div",{className:"bg-black/30 p-3.5 rounded-2xl border border-white/5",children:[e.jsx("span",{className:"text-[8px] font-black text-gray-600 uppercase block mb-1.5 tracking-widest",children:"Local Matrix"}),e.jsx("p",{className:"text-[11px] text-gray-300 leading-relaxed font-bold",children:t["Address Details"]||"No precise location data"})]})]}),e.jsx("div",{className:`absolute ${z} left-1/2 -translate-x-1/2 w-5 h-5 bg-[#1a2235] border-white/10 rotate-45`})]})]})}),a("pageInfo")&&e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[L?e.jsx("img",{src:L,className:"w-8 h-8 rounded-full border border-white/10 shadow-sm object-cover",alt:"logo"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border border-white/5 flex items-center justify-center text-[7px] text-gray-600 font-bold uppercase",children:"Null"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-[12px] font-black text-gray-300 block truncate leading-none mb-1",children:t.Page}),e.jsx("span",{className:"text-[9px] text-gray-600 uppercase font-black tracking-widest",children:t.Team})]})]})}),a("total")&&e.jsxs("td",{className:"px-6 py-5 font-black text-blue-400 text-base tracking-tighter",children:["$",t["Grand Total"].toFixed(2)]}),a("shippingService")&&e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[A&&e.jsx("img",{src:A,className:"w-5 h-5 rounded-lg object-contain bg-gray-950 p-0.5 border border-white/5",alt:"shipping"}),e.jsx("span",{className:"text-[10px] text-orange-400/80 font-black uppercase truncate tracking-tight",children:t["Internal Shipping Method"]||"-"})]})}),a("shippingCost")&&e.jsxs("td",{className:"px-6 py-5 text-[11px] text-gray-500 font-mono font-black tracking-tighter",children:["$",(Number(t["Internal Cost"])||0).toFixed(2)]}),a("status")&&e.jsx("td",{className:"px-6 py-5",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border ${t["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:t["Payment Status"]})}),a("date")&&e.jsx("td",{className:"px-4 py-5 text-[10px] text-gray-500 font-bold italic opacity-60",children:new Date(t.Timestamp).toLocaleDateString("km-KH")}),a("print")&&e.jsx("td",{className:"px-4 py-5 text-center",children:e.jsx("button",{onClick:()=>o(t),className:"text-emerald-400/60 hover:text-white bg-emerald-400/5 hover:bg-emerald-600 p-2.5 rounded-xl transition-all border border-emerald-400/10 active:scale-90",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})}),a("actions")&&e.jsx("td",{className:"px-4 py-5 text-center",children:e.jsx("button",{onClick:()=>l&&l(t),className:"text-blue-400/80 hover:text-white bg-blue-400/5 hover:bg-blue-600 px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border border-blue-400/10 active:scale-95 shadow-md",children:"Edit"})}),a("check")&&e.jsx("td",{className:"px-2 py-5 text-center",children:e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("input",{type:"checkbox",checked:U,onChange:()=>I($,U),className:`h-6 w-6 rounded-lg border-gray-700 bg-gray-950 text-emerald-500 focus:ring-emerald-500/10 transition-all ${B?"opacity-20":"hover:scale-110 active:scale-150 cursor-pointer"}`}),B&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx(K,{size:"sm"})})]})})]},$)})})]})}),e.jsx("div",{className:"md:hidden space-y-4 min-h-[1200px] pb-64",children:b.map((t,k)=>{var _;const C=(_=x.pages)==null?void 0:_.find(M=>M.PageName===t.Page),L=C?O(C.PageLogoURL):"",w=E(t["Customer Phone"]),S=g(w),T=t.IsVerified===!0||String(t.IsVerified).toUpperCase()==="TRUE",A=y.has(t["Order ID"]),$=d.has(t["Order ID"]),U=n(t["Internal Shipping Method"]),B=j===t["Order ID"];return e.jsxs("div",{className:`bg-[#0f172a]/60 backdrop-blur-2xl border ${$?"border-blue-500 shadow-[0_15px_30px_rgba(59,130,246,0.2)]":T?"border-emerald-500/40 shadow-[0_10px_30px_rgba(16,185,129,0.1)]":"border-white/5"} rounded-[2.2rem] p-5 shadow-2xl space-y-5 animate-fade-in relative overflow-hidden group`,children:[i&&e.jsx("div",{className:"absolute top-5 left-5 z-10",children:e.jsx("input",{type:"checkbox",className:"h-6 w-6 rounded-xl border-gray-700 bg-gray-950 text-blue-500 focus:ring-blue-500/10 cursor-pointer",checked:$,onChange:()=>i(t["Order ID"])})}),e.jsxs("div",{className:`flex justify-between items-start ${i?"pl-10":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3.5",children:[e.jsx("div",{className:"w-12 h-12 rounded-[1.2rem] bg-gray-950 border border-white/5 flex items-center justify-center overflow-hidden shadow-inner p-1",children:L?e.jsx("img",{src:L,className:"w-full h-full object-cover rounded-lg",alt:"logo"}):e.jsx("span",{className:"text-[10px] font-black text-gray-600",children:"Null"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[15px] font-black text-white leading-none tracking-tight",children:t["Customer Name"]}),e.jsxs("p",{className:"text-[10px] text-gray-600 uppercase font-black tracking-widest mt-1.5",children:[t.Page," | ",t.Team]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2.5",children:[e.jsx("button",{onClick:()=>R(t["Order ID"]),className:`px-3 py-1.5 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all ${B?"bg-emerald-600 text-white border-emerald-500":"bg-gray-900/50 text-gray-500 border-white/5"}`,children:B?"COPIED":t["Order ID"].substring(0,8)}),e.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-wider border ${t["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:t["Payment Status"]})]})]}),a("productInfo")&&t.Products&&t.Products.length>0&&e.jsxs("div",{className:"bg-black/30 rounded-[1.8rem] p-4 border border-white/5 space-y-3 shadow-inner",children:[e.jsxs("p",{className:"text-[9px] font-black text-gray-600 uppercase tracking-[0.2em] mb-2 ml-1 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-blue-500/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"Operational Assets"]}),e.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto custom-scrollbar",children:t.Products.map((M,F)=>{var P;const z=(P=x.products)==null?void 0:P.find(W=>W.ProductName===M.name),V=M.image||(z==null?void 0:z.ImageURL)||"";return e.jsxs("div",{className:"flex items-center gap-4 bg-[#1a2235]/40 p-2.5 rounded-2xl border border-white/5 hover:border-blue-500/20 transition-all",children:[e.jsx("div",{className:"w-10 h-10 flex-shrink-0 bg-gray-950 rounded-xl border border-white/5 overflow-hidden shadow-sm",onClick:()=>p(O(V)),children:e.jsx("img",{src:O(V),className:"w-full h-full object-cover",alt:""})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start gap-3",children:[e.jsx("p",{className:"text-[12px] font-black text-gray-200 truncate leading-tight uppercase tracking-tight",children:M.name}),e.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/10 flex-shrink-0 shadow-sm",children:["x",M.quantity]})]}),M.colorInfo&&e.jsxs("p",{className:"text-[9px] text-gray-600 font-bold mt-1.5 uppercase tracking-widest opacity-60",children:["Node: ",M.colorInfo]})]})]},F)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 px-1",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"text-gray-600 font-black uppercase text-[8px] tracking-[0.2em]",children:"Contact Node"}),e.jsxs("div",{className:"flex items-center gap-2",children:[S&&e.jsx("img",{src:S,className:"w-3.5 h-3.5 object-contain opacity-70",alt:""}),e.jsx("span",{className:"text-white font-mono font-black text-xs tracking-tight",children:w})]})]}),e.jsxs("div",{className:"space-y-1.5 text-right",children:[e.jsx("p",{className:"text-gray-600 font-black uppercase text-[8px] tracking-[0.2em]",children:"Transaction Total"}),e.jsxs("p",{className:"text-blue-400 font-black text-lg tracking-tighter",children:["$",t["Grand Total"].toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"text-gray-600 font-black uppercase text-[8px] tracking-[0.2em]",children:"Geographic Hub"}),e.jsx("p",{className:"text-gray-300 font-black text-[12px] truncate uppercase tracking-tight",children:t.Location})]}),e.jsxs("div",{className:"space-y-1.5 text-right",children:[e.jsx("p",{className:"text-gray-600 font-black uppercase text-[8px] tracking-[0.2em]",children:"Logistic Flow"}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[U&&e.jsx("img",{src:U,className:"w-3.5 h-3.5 object-contain bg-gray-950 p-0.5 rounded-md border border-white/5",alt:""}),e.jsx("span",{className:"text-orange-400/80 font-black text-[11px] uppercase truncate tracking-tight",children:t["Internal Shipping Method"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-5 border-t border-white/5 relative",children:[e.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[a("actions")&&e.jsx("button",{onClick:()=>l&&l(t),className:"p-3.5 bg-blue-600/10 text-blue-400 rounded-2xl border border-blue-500/20 active:scale-90 transition-all shadow-lg",children:e.jsx("svg",{className:"w-4.5 h-4.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),a("print")&&e.jsx("button",{onClick:()=>o(t),className:"p-3.5 bg-emerald-600/10 text-emerald-400 rounded-2xl border border-emerald-500/20 active:scale-90 transition-all shadow-lg",children:e.jsx("svg",{className:"w-4.5 h-4.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v42 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})]}),e.jsxs("div",{className:"flex items-center gap-5 relative z-10",children:[e.jsx("span",{className:"text-[10px] text-gray-700 font-bold italic uppercase tracking-widest",children:new Date(t.Timestamp).toLocaleDateString("km-KH")}),a("check")&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:()=>I(t["Order ID"],T),className:`h-10 w-10 rounded-[1.2rem] border-gray-700 bg-gray-950 text-emerald-500 focus:ring-emerald-500/10 transition-all shadow-inner ${A?"opacity-20":"active:scale-110 cursor-pointer"}`}),A&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(K,{size:"sm"})})]})]}),e.jsx("div",{className:"absolute -right-10 -bottom-10 w-32 h-32 bg-blue-600/5 rounded-full blur-[40px] pointer-events-none"})]})]},t["Order ID"])})})]}),e.jsx("div",{className:"h-64 md:h-[400px] w-full pointer-events-none opacity-0 shrink-0","aria-hidden":"true"})]})};export{xe as O,ie as S,ce as a,de as b,oe as c};
