import{j as e,c as _,r as n,M as xe,S as le,A as ue,W as pe,u as Ce}from"./index-B0RSr39I.js";import{c as Pe,S as Me,b as Le,a as Te,O as Ie}from"./OrdersList-DIPOmZPu.js";import"./imageCompressor-D5vYYzIg.js";const $e=({pages:x,selectedPageName:b,onSelect:S})=>e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"flex overflow-x-auto gap-3.5 pb-6 pt-2 px-1 snap-x no-scrollbar",children:[x.map(c=>{const u=b===c.PageName;return e.jsxs("button",{type:"button",onClick:()=>S(c),className:`
                                relative flex-shrink-0 w-[115px] h-[135px] snap-center rounded-[2rem] 
                                border-2 transition-all duration-700 outline-none group
                                ${u?"bg-blue-600/20 border-blue-500 shadow-[0_15px_30px_rgba(59,130,246,0.3)] scale-105":"bg-gray-800/30 backdrop-blur-xl border-white/5 hover:border-blue-500/30"}
                            `,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-3 gap-2",children:[e.jsxs("div",{className:"relative",children:[u&&e.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full blur-lg opacity-50 animate-pulse"}),e.jsx("div",{className:`
                                        relative w-12 h-12 rounded-full overflow-hidden border-2 transition-all duration-700
                                        ${u?"border-white scale-110 shadow-2xl rotate-[360deg]":"border-gray-700 opacity-50 group-hover:opacity-100"}
                                    `,children:e.jsx("img",{src:_(c.PageLogoURL),className:"w-full h-full object-cover",alt:c.PageName})}),u&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center border-2 border-gray-900 shadow-lg animate-bounce-slow",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:4,children:e.jsx("path",{d:"M5 13l4 4L19 7"})})})]}),e.jsxs("div",{className:"text-center w-full px-1",children:[e.jsx("span",{className:`
                                        text-[10px] font-black uppercase tracking-tighter leading-tight block truncate transition-colors duration-500
                                        ${u?"text-white":"text-gray-500 group-hover:text-gray-300"}
                                    `,children:c.PageName}),c.TelegramValue&&u&&e.jsxs("span",{className:"text-[7px] font-bold text-blue-400/80 block mt-0.5 animate-fade-in truncate",children:["@",c.TelegramValue]})]})]}),e.jsx("div",{className:`
                                absolute bottom-3 left-1/2 -translate-x-1/2 h-1 rounded-full transition-all duration-700
                                ${u?"w-6 bg-blue-400 shadow-[0_0_8px_#60a5fa]":"w-0 bg-transparent"}
                            `})]},c.PageName)}),x.length===0&&e.jsxs("div",{className:"w-full py-10 flex flex-col items-center justify-center bg-gray-900/20 rounded-[2.5rem] border-2 border-dashed border-gray-800",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{className:"text-[9px] font-black text-gray-600 uppercase tracking-widest italic",children:"រកមិនឃើញ Page"})]})]}),e.jsx("style",{children:`
                .no-scrollbar::-webkit-scrollbar {
                    display: none;
                }
                .no-scrollbar {
                    -ms-overflow-style: none;
                    scrollbar-width: none;
                }
                @keyframes bounce-slow {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-3px); }
                }
                .animate-bounce-slow {
                    animation: bounce-slow 2s infinite ease-in-out;
                }
            `})]}),De=({pages:x,selectedPageName:b,onSelect:S,placeholder:c="ជ្រើសរើស Page..."})=>{const[u,M]=n.useState(!1),[P,m]=n.useState(""),y=n.useRef(null);n.useEffect(()=>{const f=x.find(t=>t.PageName===b);f&&m(f.PageName)},[b,x]),n.useEffect(()=>{const f=t=>{if(y.current&&!y.current.contains(t.target)){M(!1);const g=x.find(O=>O.PageName===b);m(g?g.PageName:"")}};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[b,x]);const F=n.useMemo(()=>{if(!P.trim())return x;const f=P.toLowerCase();return x.filter(t=>t.PageName.toLowerCase().includes(f))},[x,P]),L=x.find(f=>f.PageName===b);return e.jsxs("div",{className:"relative w-full",ref:y,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",className:"form-input !pl-14 !pr-10 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:c,value:P,onChange:f=>{m(f.target.value),M(!0)},onFocus:()=>M(!0)}),e.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 overflow-hidden border border-white/5 flex items-center justify-center",children:L?e.jsx("img",{src:_(L.PageLogoURL),className:"w-full h-full object-cover",alt:""}):e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 1.91-1.61 3.46-1.61s3.03.72 3.46 1.61C12.79 19.11 11.41 19.5 10 19.5s-2.79-.39-3.93-1.22zM15.6 17.03c-.78-1.13-2.56-1.86-4.6-1.86s-3.82.73-4.6 1.86c-.52-.51-.95-1.09-1.27-1.74.88-1.19 2.72-2.12 4.87-2.12s3.99.93 4.87 2.12c-.32.65-.75 1.23-1.27 1.74zM10 12.3c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})})})}),e.jsx("div",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-gray-600 group-focus-within:text-blue-500 transition-colors",children:e.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${u?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 9l-7 7-7-7",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),u&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_60px_rgba(0,0,0,0.6)] overflow-hidden animate-fade-in-down",children:e.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar p-2.5 space-y-1.5",children:F.length>0?F.map(f=>e.jsxs("button",{type:"button",onClick:()=>{S(f),m(f.PageName),M(!1)},className:`w-full flex items-center gap-3.5 p-3 rounded-2xl transition-all ${b===f.PageName?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-300 hover:bg-white/5"}`,children:[e.jsx("img",{src:_(f.PageLogoURL),className:"w-11 h-11 rounded-full object-cover border-2 border-white/10 shadow-sm flex-shrink-0",alt:""}),e.jsxs("div",{className:"text-left min-w-0",children:[e.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:f.PageName}),e.jsx("p",{className:`text-[10px] uppercase tracking-widest font-black mt-1 ${b===f.PageName?"text-blue-100":"text-gray-500"}`,children:f.Team})]})]},f.PageName)):e.jsx("div",{className:"p-6 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"រកមិនឃើញ Page ទេ"})})})]})},ze=({isOpen:x,onClose:b,url:S})=>{const[c,u]=n.useState(!0);return n.useEffect(()=>{x&&u(!0)},[x,S]),x?e.jsxs(xe,{isOpen:x,onClose:b,maxWidth:"max-w-4xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-2 text-white",children:"ស្វែងរកទីតាំង"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:'បន្ទាប់ពីរកឃើញទីតាំងត្រឹមត្រូវ សូមចម្លង (Copy) អាសយដ្ឋាន ឬ Link រួចបិទផ្ទាំងនេះ ហើយបិទភ្ជាប់ (Paste) ចូលទៅក្នុងប្រអប់ "ទីតាំងលម្អិត" វិញ។'}),e.jsxs("div",{className:"relative w-full h-[70vh] bg-gray-900 rounded-lg overflow-hidden border border-gray-700",children:[c&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[e.jsx(le,{size:"lg"}),e.jsx("span",{className:"ml-3 text-gray-300",children:"កំពុងដំណើរការផែនទី..."})]}),e.jsx("iframe",{src:S,width:"100%",height:"100%",style:{border:0},allowFullScreen:!1,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",onLoad:()=>u(!1),className:c?"opacity-0":"opacity-100 transition-opacity duration-500"})]})]}):null},_e=({onClose:x,onCodeScanned:b,scanMode:S,setScanMode:c,productsInOrder:u,masterProducts:M})=>{var te;const P=n.useRef(null),[m,y]=n.useState(null),[F,L]=n.useState(!0),[f,t]=n.useState(null),[g,O]=n.useState(1),[T,Q]=n.useState(null),[D,R]=n.useState(!1),[W,q]=n.useState(!1),[K,p]=n.useState(0),h=n.useRef(null),k=n.useRef(1),C=n.useRef(new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3")),j=n.useCallback(N=>{var E;if(!T)return;const z=Math.min(Math.max(N,T.min),T.max);O(z),(E=P.current)!=null&&E.isScanning&&P.current.applyVideoConstraints({advanced:[{zoom:z}]}).catch(Z=>console.error("Failed to apply zoom",Z))},[T]),I=n.useCallback(async()=>{var N;if((N=P.current)!=null&&N.isScanning&&W){const z=!D;try{await P.current.applyVideoConstraints({advanced:[{torch:z}]}),R(z)}catch(E){console.error("Failed to toggle torch",E)}}},[D,W]),B=N=>{if(N.touches.length===2){const z=Math.hypot(N.touches[0].pageX-N.touches[1].pageX,N.touches[0].pageY-N.touches[1].pageY);h.current=z,k.current=g}},V=N=>{if(N.touches.length===2&&h.current!==null&&T){const E=Math.hypot(N.touches[0].pageX-N.touches[1].pageX,N.touches[0].pageY-N.touches[1].pageY)/h.current,Z=T.max-T.min,H=(E-1)*Z*.5;j(k.current+H)}},X=()=>{h.current=null};return n.useEffect(()=>{const N=new window.Html5Qrcode("barcode-reader-container");P.current=N;let z=0;const E=($,Y)=>{const se=Date.now();if(se-z<1500)return;z=se,C.current.currentTime=0,C.current.play().catch(()=>{}),navigator.vibrate&&navigator.vibrate(200);const ee=M.find(A=>A.Barcode&&A.Barcode.trim()===$.trim());if(ee){const A=u.find(ae=>ae.name===ee.ProductName);S==="single"&&A?y({status:"warning",message:"មានក្នុងបញ្ជីរួចហើយ",product:ee}):(b($),p(ae=>ae+1),y({status:"success",message:"បានបន្ថែមជោគជ័យ",product:ee}))}else y({status:"error",message:`រកមិនឃើញ Barcode: ${$}`,product:void 0});setTimeout(()=>{y(null)},2500)},Z={fps:30,qrbox:{width:280,height:280},aspectRatio:1,experimentalFeatures:{useBarCodeDetectorIfSupported:!0}},H={facingMode:"environment",width:{min:640,ideal:1920,max:3840},height:{min:480,ideal:1080,max:2160},focusMode:"continuous"};return N.start(H,Z,E,()=>{}).then(()=>{const $=N.getRunningTrackCapabilities();$&&($.zoom&&(Q({min:$.zoom.min,max:$.zoom.max,step:$.zoom.step}),O($.zoom.min||1)),$.torch&&q(!0)),L(!1)}).catch($=>{console.error($),t("សូមអនុញ្ញាត Camera ដើម្បីប្រើប្រាស់មុខងារនេះ។"),L(!1)}),()=>{var $;($=P.current)!=null&&$.isScanning&&P.current.stop().catch(()=>{})}},[b,u,M,S]),e.jsxs("div",{className:"fixed inset-0 bg-black z-[100] flex flex-col animate-fade-in touch-none",onTouchStart:B,onTouchMove:V,onTouchEnd:X,children:[e.jsx("style",{children:`
              #barcode-reader-container { width: 100%; height: 100%; overflow: hidden; background: black; }
              #barcode-reader-container video { width: 100% !important; height: 100% !important; object-fit: cover; }
              
              @keyframes scanner-line {
                0% { top: 10%; opacity: 0; }
                10% { opacity: 1; }
                90% { opacity: 1; }
                100% { top: 90%; opacity: 0; }
              }
              .scanner-laser {
                position: absolute;
                left: 10%;
                width: 80%;
                height: 2px;
                background: #3b82f6;
                box-shadow: 0 0 10px #3b82f6, 0 0 20px #3b82f6;
                animation: scanner-line 1.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
                z-index: 20;
              }
              .pinch-hint {
                 animation: fade-out-hint 3s forwards 2s;
              }
              @keyframes fade-out-hint {
                 to { opacity: 0; }
              }
            `}),e.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 bg-gradient-to-b from-black/80 to-transparent pt-safe-top",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-3 py-1.5 rounded-full border border-white/10 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-white font-bold text-xs uppercase tracking-wider",children:"Smart Scan"})]}),e.jsx("button",{onClick:x,className:"p-3 bg-gray-800/50 backdrop-blur-md rounded-full text-white border border-white/10 active:scale-90 transition-all",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"relative flex-grow w-full h-full overflow-hidden",children:[e.jsx("div",{id:"barcode-reader-container"}),!F&&!f&&e.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:e.jsxs("div",{className:"relative w-[280px] h-[280px]",children:[e.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 border-t-4 border-l-4 border-blue-500 rounded-tl-3xl shadow-[0_0_10px_rgba(59,130,246,0.5)]"}),e.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 border-t-4 border-r-4 border-blue-500 rounded-tr-3xl shadow-[0_0_10px_rgba(59,130,246,0.5)]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 border-b-4 border-l-4 border-blue-500 rounded-bl-3xl shadow-[0_0_10px_rgba(59,130,246,0.5)]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-12 h-12 border-b-4 border-r-4 border-blue-500 rounded-br-3xl shadow-[0_0_10px_rgba(59,130,246,0.5)]"}),e.jsx("div",{className:"scanner-laser"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-4 h-4 bg-white/20 rounded-full -translate-x-1/2 -translate-y-1/2"})]})}),T&&!F&&e.jsx("div",{className:"absolute top-[20%] left-0 right-0 flex justify-center pointer-events-none pinch-hint",children:e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm px-4 py-2 rounded-full border border-white/5 text-white/70 text-[10px] font-black uppercase tracking-widest flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),"Pinch to Zoom"]})}),F&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black z-30",children:[e.jsx(le,{size:"lg"}),e.jsx("p",{className:"mt-6 text-gray-400 font-bold uppercase tracking-widest text-xs animate-pulse",children:"Initializing Optical Sensor..."})]}),f&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/90 text-white p-8 text-center z-30",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 text-red-500 rounded-full flex items-center justify-center mb-4 border border-red-500/50",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("p",{className:"font-bold text-red-400 text-lg mb-2",children:"Camera Access Denied"}),e.jsx("p",{className:"text-gray-400 text-sm",children:f})]}),m&&e.jsx("div",{className:"absolute top-[15%] left-1/2 -translate-x-1/2 w-[90%] max-w-sm z-40 animate-fade-in-scale",children:e.jsxs("div",{className:`
                            bg-[#0f172a]/95 backdrop-blur-xl border-l-4 p-4 rounded-r-2xl shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex items-center gap-4
                            ${m.status==="success"?"border-emerald-500":m.status==="warning"?"border-yellow-500":"border-red-500"}
                        `,children:[m.product?e.jsx("img",{src:_(m.product.ImageURL),className:"w-16 h-16 rounded-xl object-cover bg-black border border-white/10",alt:""}):e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-800 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-[10px] font-black uppercase tracking-widest mb-1 ${m.status==="success"?"text-emerald-400":m.status==="warning"?"text-yellow-400":"text-red-400"}`,children:m.status==="success"?"Scanned Successfully":m.status==="warning"?"Already Added":"Not Found"}),e.jsx("h3",{className:"text-white font-bold text-sm truncate",children:((te=m.product)==null?void 0:te.ProductName)||"Unknown Item"}),m.product&&e.jsxs("p",{className:"text-blue-400 font-mono font-black text-sm mt-0.5",children:["$",m.product.Price.toFixed(2)]}),!m.product&&e.jsx("p",{className:"text-gray-400 text-xs",children:m.message})]})]})})]}),!F&&!f&&e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black via-black/90 to-transparent pb-safe-bottom z-40 space-y-6",children:[T&&e.jsxs("div",{className:"flex items-center gap-4 px-4",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase",children:"1x"}),e.jsx("input",{type:"range",min:T.min,max:T.max,step:T.step,value:g,onChange:N=>j(parseFloat(N.target.value)),className:"w-full h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),e.jsxs("span",{className:"text-[10px] font-black text-gray-500 uppercase",children:[T.max,"x"]})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"flex bg-gray-800/80 backdrop-blur-md p-1 rounded-2xl border border-white/10",children:[e.jsx("button",{onClick:()=>c("single"),className:`px-4 py-3 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${S==="single"?"bg-blue-600 text-white shadow-lg":"text-gray-400"}`,children:"Single"}),e.jsx("button",{onClick:()=>c("increment"),className:`px-4 py-3 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${S==="increment"?"bg-emerald-600 text-white shadow-lg":"text-gray-400"}`,children:"Multi (+1)"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-1",children:"Items Scanned"}),e.jsx("span",{className:"text-3xl font-black text-white",children:K})]}),W&&e.jsx("button",{onClick:I,className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-all border ${D?"bg-yellow-500 text-black border-yellow-400 shadow-[0_0_20px_rgba(234,179,8,0.4)]":"bg-gray-800/80 text-white border-white/10 hover:bg-gray-700"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})]})]})},Fe=({schedule:x,time:b,onChange:S})=>{const c=()=>{S({schedule:!x,time:x?"":b})};return e.jsxs("div",{className:`relative overflow-hidden p-6 rounded-[2rem] border transition-all duration-500 ${x?"bg-cyan-500/10 border-cyan-500 shadow-[0_0_25px_rgba(6,182,212,0.15)]":"bg-gray-900/40 border-gray-700"}`,children:[e.jsx("style",{children:`
                /* ប្ដូរពណ៌ និងពង្រីកទំហំ Default Calendar Icon របស់ Browser */
                .cyan-calendar-picker::-webkit-calendar-picker-indicator {
                    cursor: pointer;
                    /* ប្ដូរពណ៌ទៅជា Cyan */
                    filter: invert(56%) sepia(86%) saturate(2256%) hue-rotate(150deg) brightness(98%) contrast(101%);
                    padding: 8px;
                    width: 24px;
                    height: 24px;
                    transform: scale(1.3); /* ពង្រីកឱ្យធំជាងមុន */
                    border-radius: 12px;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                }
                .cyan-calendar-picker::-webkit-calendar-picker-indicator:hover {
                    background: rgba(6, 182, 212, 0.15);
                    transform: scale(1.45);
                    filter: invert(60%) sepia(90%) saturate(2500%) hue-rotate(160deg) brightness(110%) contrast(110%);
                }
                .cyan-calendar-picker::-webkit-calendar-picker-indicator:active {
                    transform: scale(1.2);
                }
            `}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-500 ${x?"bg-cyan-500 text-white shadow-lg shadow-cyan-500/30":"bg-gray-800 text-gray-500"}`,children:e.jsx("svg",{className:"w-7 h-7",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-black uppercase tracking-widest transition-colors ${x?"text-cyan-400":"text-gray-400"}`,children:"កំណត់ពេល Telegram"}),e.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase opacity-60",children:"Auto-Send Schedule"})]})]}),e.jsx("button",{type:"button",onClick:c,className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none ${x?"bg-cyan-500":"bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform duration-300 ease-in-out ${x?"translate-x-6":"translate-x-1"}`})})]}),x&&e.jsxs("div",{className:"animate-fade-in-down pt-6 mt-4 border-t border-cyan-500/10",children:[e.jsx("div",{className:"relative group",children:e.jsx("input",{type:"datetime-local",value:b||"",onChange:u=>S({schedule:x,time:u.target.value}),onClick:u=>{try{"showPicker"in HTMLInputElement.prototype&&u.currentTarget.showPicker()}catch{}},className:"cyan-calendar-picker form-input !py-4 !pl-5 !pr-14 bg-black/40 border-cyan-500/20 text-white font-mono font-bold rounded-2xl focus:border-cyan-500 focus:ring-4 focus:ring-cyan-500/10 transition-all text-sm w-full cursor-pointer",min:new Date().toISOString().slice(0,16)})}),e.jsx("p",{className:"text-[9px] text-cyan-400/60 font-black uppercase tracking-widest text-center mt-3",children:"សារនឹងត្រូវផ្ញើដោយស្វ័យប្រវត្តិតាមម៉ោងកំណត់"})]}),e.jsx("div",{className:`absolute -right-6 -bottom-6 w-24 h-24 bg-cyan-500 transition-opacity duration-700 rounded-full blur-[40px] pointer-events-none ${x?"opacity-10":"opacity-0"}`})]})},ie={id:Date.now(),name:"",quantity:1,originalPrice:0,finalPrice:0,total:0,discountPercent:0,colorInfo:"",image:"",cost:0,discountType:"percent",discountAmountInput:"",discountPercentInput:"",finalPriceInput:"",applyDiscountToTotal:!1},ne=[{number:1,title:"អតិថិជន"},{number:2,title:"ផលិតផល"},{number:3,title:"ដឹកជញ្ជូន"},{number:4,title:"ផ្ទៀងផ្ទាត់"}],Be=({team:x,onSaveSuccess:b,onCancel:S})=>{const{appData:c,currentUser:u,apiKey:M,previewImage:P}=n.useContext(ue),[m,y]=n.useState(1),[F,L]=n.useState(!1),f=n.useMemo(()=>({page:"",telegramValue:"",fulfillmentStore:"",pageSelectMode:"cards",customer:{name:"",phone:"",province:"",district:"",sangkat:"",additionalLocation:"",shippingFee:""},products:[{...ie,id:Date.now()}],shipping:{method:"",details:"",cost:""},payment:{status:"Unpaid",info:""},telegram:{schedule:!1,time:""},subtotal:0,grandTotal:0,note:""}),[]),[t,g]=n.useState(f),[O,T]=n.useState(!1),[Q,D]=n.useState(""),[R,W]=n.useState(null),[q,K]=n.useState(null),[p,h]=n.useState(""),[k,C]=n.useState(""),[j,I]=n.useState(""),[B,V]=n.useState(!1),[X,te]=n.useState("charge"),[N,z]=n.useState(!1),[E,Z]=n.useState(""),[H,$]=n.useState("increment"),Y=n.useMemo(()=>`createOrderDraft_${u==null?void 0:u.UserName}_${x}`,[u,x]);n.useEffect(()=>{window.innerWidth<768&&window.scrollTo({top:0,behavior:"smooth"})},[m]),n.useEffect(()=>{var r,i;try{const a=localStorage.getItem(Y);if(a){const o=JSON.parse(a);if(g(d=>({...d,...o})),o.customer&&typeof o.customer.shippingFee=="number"&&te(o.customer.shippingFee===0?"free":"charge"),o.customer.phone){const d=o.customer.phone,s=(r=c.phoneCarriers)==null?void 0:r.find(l=>(l.Prefixes||"").split(",").some(v=>d.startsWith(v.trim())));h(s?_(s.CarrierLogoURL):"")}if(o.shipping.method){const d=(i=c.shippingMethods)==null?void 0:i.find(s=>s.MethodName===o.shipping.method);K(d||null),C(d?_(d.LogosURL):"")}}}catch{localStorage.removeItem(Y)}},[Y,c.phoneCarriers,c.shippingMethods]),n.useEffect(()=>{const r=setTimeout(()=>{localStorage.setItem(Y,JSON.stringify(t))},500);return()=>clearTimeout(r)},[t,Y]);const se=()=>L(!0),ee=()=>{localStorage.removeItem(Y),L(!1),S()},A=n.useMemo(()=>c.pages?c.pages.filter(r=>r.Team===x):[],[c.pages,x]);n.useEffect(()=>{if(A.length===1&&!t.page){const r=A[0];g(i=>({...i,page:r.PageName,telegramValue:r.TelegramValue,fulfillmentStore:r.DefaultStore||t.fulfillmentStore}))}},[A,t.page]);const ae=n.useMemo(()=>c.locations?[...new Set(c.locations.map(r=>r.Province))]:[],[c.locations]),he=n.useMemo(()=>!c.locations||!t.customer.province?[]:[...new Set(c.locations.filter(r=>r.Province===t.customer.province).map(r=>r.District))].sort((r,i)=>String(r).localeCompare(String(i),"km")),[c.locations,t.customer.province]),ge=n.useMemo(()=>!c.locations||!t.customer.province||!t.customer.district?[]:[...new Set(c.locations.filter(r=>r.Province===t.customer.province&&r.District===t.customer.district).map(r=>r.Sangkat).filter(Boolean))].sort((r,i)=>String(r).localeCompare(String(i),"km")),[c.locations,t.customer.province,t.customer.district]);n.useEffect(()=>{const r=t.products.reduce((a,o)=>a+(o.total||0),0),i=r+(Number(t.customer.shippingFee)||0);(r!==t.subtotal||i!==t.grandTotal)&&g(a=>({...a,subtotal:r,grandTotal:i}))},[t.products,t.customer.shippingFee]);const oe=(r,i)=>{const a={...r},o=i.find(v=>v.ProductName===a.name);a.quantity=Math.max(1,Number(a.quantity)||1),a.originalPrice=Math.max(0,o&&Number(o.Price)||0),a.cost=Math.max(0,o&&Number(o.Cost)||0);const d=a.quantity*a.originalPrice;let s=d,l=0;switch(a.discountType){case"percent":const v=Math.max(0,Number(a.discountPercentInput)||0);l=d*(v/100),s=d-l;break;case"amount":const U=Math.max(0,Number(a.discountAmountInput)||0);l=a.quantity>1&&a.applyDiscountToTotal?U:U*a.quantity,s=d-l;break;case"custom":const w=Math.max(0,Number(a.finalPriceInput)||0);s=a.quantity*w,l=d-s,a.finalPrice=w;break}return a.total=Math.max(0,s),a.finalPrice=a.quantity>0?a.total/a.quantity:0,a.discountPercent=d>0?l/d*100:0,a.discountType!=="custom"&&(a.finalPriceInput=a.finalPrice.toFixed(2)),a},be=n.useCallback(r=>{const i=c.products.find(a=>a.Barcode&&a.Barcode.trim()===r.trim());i&&(g(a=>{const o=a.products.findIndex(s=>s.name===i.ProductName);let d;if(o>-1){const s={...a.products[o]};H==="increment"&&(s.quantity+=1);const l=oe(s,c.products);d=[...a.products],d[o]=l}else{const s=a.products.findIndex(U=>!U.name),l={...ie,id:Date.now(),name:i.ProductName,quantity:1,originalPrice:i.Price,cost:i.Cost,image:i.ImageURL,tags:i.Tags},v=oe(l,c.products);s>-1?(d=[...a.products],d[s]=v):d=[...a.products,v]}return{...a,products:d}}),H==="single"&&V(!1))},[c.products,H]),G=r=>{const{name:i,value:a}=r.target;if(i==="phone"){let o=a.replace(/[^0-9]/g,"");o.length>1&&o.startsWith("00")?o="0"+o.substring(2):o.length>0&&!o.startsWith("0")&&(o="0"+o);let d=null;o.length>=2&&c.phoneCarriers&&(d=c.phoneCarriers.find(s=>(s.Prefixes||"").split(",").some(l=>o.startsWith(l.trim())))),h(d?_(d.CarrierLogoURL):""),g(s=>({...s,customer:{...s.customer,phone:o}}));return}if(i==="shippingFee"){const o=a===""?"":Math.max(0,parseFloat(a));g(d=>({...d,customer:{...d.customer,shippingFee:o}}));return}g(o=>{let d={...o.customer,[i]:a};return i==="province"?(d.district="",d.sangkat=""):i==="district"&&(d.sangkat=""),{...o,customer:d}})},J=(r,i,a,o)=>{g(d=>{const s=[...d.products];let l={...s[r]};if(["discountPercentInput","discountAmountInput","finalPriceInput"].includes(i)){let v=String(a).replace(/[^0-9.]/g,"").replace(/(\..*?)\./g,"$1");v.startsWith("0")&&v.length>1&&!v.startsWith("0.")&&(v=String(parseFloat(v))),l[i]=v}else i==="quantity"?l[i]=a===""?0:Math.max(0,parseInt(a)||0):l[i]=a;if(i==="name"){const v=c.products.find(U=>U.ProductName===a);l.name=a,v?(l.originalPrice=v.Price,l.image=v.ImageURL,l.cost=v.Cost,l.discountType="percent",l.finalPrice=v.Price,l.finalPriceInput=String(v.Price),l.tags=o!==void 0?o:v.Tags):(l.originalPrice=0,l.image="",l.cost=0,l.discountType="custom",l.finalPrice=0,l.tags="")}return i==="discountType"&&(l.discountPercentInput="",l.discountAmountInput="",l.finalPrice=l.originalPrice,l.finalPriceInput=String(l.originalPrice)),s[r]=oe(l,c.products),{...d,products:s}})},fe=r=>{K(r),C(_(r.LogosURL)),g(i=>({...i,shipping:{...i.shipping,method:r.MethodName,details:r.RequireDriverSelection?"":r.MethodName}}))},ce=r=>{const{name:i,value:a}=r.target;let o=a;if(i==="cost"){o.startsWith("0")&&o.length>1&&!o.startsWith("0.")&&(o=String(parseFloat(o)));const d=parseFloat(o)||0;o=String(Math.max(0,d))}g(d=>({...d,shipping:{...d.shipping,[i]:o}}))},je=r=>{g(i=>({...i,shipping:{...i.shipping,details:r}}))},ve=r=>{var a;const i=((a=c.bankAccounts)==null?void 0:a.find(o=>o.BankName===r))||null;I(i?_(i.LogoURL):""),g(o=>({...o,payment:{...o.payment,info:r}}))},de=r=>{te(r),g(i=>({...i,customer:{...i.customer,shippingFee:r==="free"?0:""}}))},we=()=>{if(!M){alert("API Key Required for Maps.");return}const{province:r,district:i,sangkat:a,additionalLocation:o}=t.customer,d=[o,a,i,r,"Cambodia"].filter(Boolean).join(", ");Z(`https://www.google.com/maps/embed/v1/search?key=${M}&q=${encodeURIComponent(d)}`),z(!0)},me=r=>{switch(D(""),r){case 1:return!t.customer.name||!t.customer.phone||!t.customer.province||!t.page||!t.fulfillmentStore?(D("សូមបំពេញឈ្មោះ, លេខទូរស័ព្ទ, ខេត្ត/ក្រុង, Page និងឃ្លាំងបញ្ចេញទំនិញ។"),!1):X==="charge"&&(t.customer.shippingFee===""||t.customer.shippingFee<0)?(D("សូមបញ្ចូលតម្លៃដឹកជញ្ជូនឱ្យបានត្រឹមត្រូវ។"),!1):!0;case 2:return t.products.length===0||t.products.some(i=>!i.name||i.quantity<=0)?(D("សូមពិនិត្យទិន្នន័យផលិតផល។"),!1):!0;case 3:return!t.shipping.method||q!=null&&q.RequireDriverSelection&&!t.shipping.details||t.shipping.cost===""||parseFloat(t.shipping.cost)<0?(D("សូមពិនិត្យព័ត៌មានដឹកជញ្ជូន។"),!1):!0;case 4:return t.payment.status==="Paid"&&!t.payment.info?(D("សូមជ្រើសរើសគណនីធនាគារ Tune។"),!1):t.telegram.schedule&&!t.telegram.time?(D("សូមជ្រើសរើសពេលវេលាផ្ញើសារ។"),!1):!0;default:return!0}},ye=()=>{me(m)&&y(m+1)},Ne=()=>{m>1&&y(m-1)},ke=async()=>{for(const a of ne)if(!me(a.number)){y(a.number);return}T(!0);let r="0"+t.customer.phone.replace(/[^0-9]/g,"").replace(/^0+/,"");const i={currentUser:u,selectedTeam:x,page:t.page,telegramValue:t.telegramValue,customer:{...t.customer,phone:r,shippingFee:Number(t.customer.shippingFee)||0},products:t.products.map(a=>({name:a.name,quantity:Number(a.quantity)||1,originalPrice:Number(a.originalPrice)||0,finalPrice:Number(a.finalPrice)||0,total:Number(a.total)||0,colorInfo:a.colorInfo,cost:Number(a.cost)||0,tags:a.tags})),shipping:{...t.shipping,cost:Number(t.shipping.cost)||0},payment:t.payment,subtotal:Number(t.subtotal)||0,grandTotal:Number(t.grandTotal)||0,note:t.note,fulfillmentStore:t.fulfillmentStore,scheduledTime:t.telegram.schedule?t.telegram.time:""};try{const a=await fetch(`${pe}/api/submit-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),o=await a.json();if(!a.ok||o.status!=="success")throw new Error(o.message||"Error");localStorage.removeItem(Y),W({type:"success",message:`ជោគជ័យ! Order ID: ${o.orderId}`}),setTimeout(b,3e3)}catch(a){W({type:"error",message:`បរាជ័យ: ${a.message}`}),setTimeout(()=>W(null),3e3)}finally{T(!1)}},Se=()=>{var r,i,a,o;switch(m){case 1:return e.jsxs("fieldset",{className:"border border-gray-600 p-3 sm:p-4 rounded-lg animate-fade-in space-y-6",children:[e.jsx("legend",{className:"px-2 text-base sm:text-lg font-semibold text-blue-300",children:"ព័ត៌មានអតិថិជន & Page"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("label",{className:"input-label font-black text-xs uppercase tracking-widest text-gray-500 mb-0 block",children:"Facebook Page*"}),e.jsxs("div",{className:"flex bg-gray-900/80 p-1 rounded-xl border border-gray-700",children:[e.jsxs("button",{type:"button",onClick:()=>g({...t,pageSelectMode:"cards"}),className:`px-3 py-1.5 text-[10px] font-black uppercase rounded-lg transition-all flex items-center gap-2 ${t.pageSelectMode==="cards"?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2z",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Card View"]}),e.jsxs("button",{type:"button",onClick:()=>g({...t,pageSelectMode:"search"}),className:`px-3 py-1.5 text-[10px] font-black uppercase rounded-lg transition-all flex items-center gap-2 ${t.pageSelectMode==="search"?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Search View"]})]})]}),e.jsx("div",{className:"animate-fade-in-down",children:t.pageSelectMode==="cards"?e.jsx($e,{pages:A,selectedPageName:t.page,onSelect:s=>g({...t,page:s.PageName,telegramValue:s.TelegramValue,fulfillmentStore:s.DefaultStore||t.fulfillmentStore})}):e.jsx(De,{pages:A,selectedPageName:t.page,onSelect:s=>g({...t,page:s.PageName,telegramValue:s.TelegramValue,fulfillmentStore:s.DefaultStore||t.fulfillmentStore})})})]}),e.jsxs("div",{className:"md:col-span-2 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-1.5 h-4 bg-orange-500 rounded-full"}),e.jsx("label",{className:"input-label !mb-0 font-black text-xs uppercase tracking-widest text-orange-400",children:"ឃ្លាំងបញ្ចេញទំនិញ (Store)*"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:(r=c.stores)==null?void 0:r.map(s=>{const l=t.fulfillmentStore===s.StoreName;return e.jsxs("button",{type:"button",onClick:()=>g({...t,fulfillmentStore:s.StoreName}),className:`relative overflow-hidden group p-4 rounded-2xl border-2 transition-all duration-300 flex flex-col items-center text-center gap-2 ${l?"bg-orange-500/10 border-orange-500 shadow-[0_0_20px_rgba(249,115,22,0.2)]":"bg-gray-900 border-gray-800 hover:border-gray-600"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-colors ${l?"bg-orange-500 text-white":"bg-gray-800 text-gray-500 group-hover:text-gray-300"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("span",{className:`text-[11px] font-black uppercase tracking-tight ${l?"text-white":"text-gray-400"}`,children:s.StoreName}),l&&e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]},s.StoreName)})})]}),e.jsx("input",{type:"text",name:"name",value:t.customer.name,placeholder:"ឈ្មោះអតិថិជន*",className:"form-input !py-3 rounded-xl border-gray-700 bg-gray-900",onChange:G,required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"tel",name:"phone",value:t.customer.phone,placeholder:"លេខទូរស័ព្ទ*",className:"form-input !py-3 rounded-xl border-gray-700 bg-gray-900 pr-12",onChange:G,required:!0}),p&&e.jsx("img",{src:p,alt:"Carrier",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-auto object-contain"})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(Te,{provinces:ae,selectedProvince:t.customer.province,onSelect:s=>G({target:{name:"province",value:s}})}),e.jsxs("select",{name:"district",value:t.customer.district,className:"form-select",onChange:G,disabled:!t.customer.province,children:[e.jsx("option",{value:"",children:"-- ស្រុក/ខណ្ឌ --"}),he.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{name:"sangkat",value:t.customer.sangkat,className:"form-select",onChange:G,disabled:!t.customer.district,children:[e.jsx("option",{value:"",children:"-- ឃុំ/សង្កាត់ --"}),ge.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"ទីតាំងលម្អិត (ផ្ទះលេខ, ផ្លូវ)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"additionalLocation",value:t.customer.additionalLocation,placeholder:"បញ្ចូលទីតាំងលម្អិត...",className:"form-input !py-3 rounded-xl bg-gray-900 border-gray-700",onChange:G}),e.jsx("button",{type:"button",onClick:we,className:"p-3 bg-blue-600/10 text-blue-400 rounded-xl border border-blue-500/20 hover:bg-blue-600 hover:text-white transition-all active:scale-90",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"ថ្លៃសេវាដឹកជញ្ជូន"}),e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>de("charge"),className:`flex-1 py-3 px-4 rounded-xl text-xs font-black uppercase transition-all border ${X==="charge"?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-300"}`,children:"គិតថ្លៃសេវា"}),e.jsx("button",{type:"button",onClick:()=>de("free"),className:`flex-1 py-3 px-4 rounded-xl text-xs font-black uppercase transition-all border ${X==="free"?"bg-emerald-600 border-emerald-500 text-white shadow-lg shadow-emerald-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-300"}`,children:"មិនគិតថ្លៃសេវា"})]}),X==="charge"&&e.jsxs("div",{className:"space-y-3 animate-fade-in",children:[e.jsx("input",{type:"number",min:"0",name:"shippingFee",value:t.customer.shippingFee,placeholder:"តម្លៃដឹកជញ្ជូន (ឧ. 1.5)*",className:"form-input !py-3 rounded-xl border-gray-700 bg-gray-900",onChange:G,required:!0}),e.jsx("div",{className:"flex gap-2",children:[1,1.5,2].map(s=>{const l=parseFloat(t.customer.shippingFee)===s;return e.jsxs("button",{type:"button",onClick:()=>G({target:{name:"shippingFee",value:String(s)}}),className:`flex-1 py-2 border font-black rounded-xl text-xs transition-all active:scale-95 ${l?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-200"}`,children:["$",s]},s)})})]})]})]})]});case 2:return e.jsxs("fieldset",{className:"border border-gray-600 p-3 sm:p-4 rounded-lg animate-fade-in space-y-4 sm:space-y-6",children:[e.jsx("legend",{className:"px-2 text-base sm:text-lg font-semibold text-blue-300",children:"ផលិតផល & ការបញ្ចុះតម្លៃ"}),e.jsx("div",{className:"space-y-4 sm:space-y-6",children:t.products.map((s,l)=>{const v=(Number(s.quantity)||0)*(Number(s.originalPrice)||0),U=v-(Number(s.total)||0);return e.jsxs("div",{className:"p-3 sm:p-5 bg-gray-800/40 rounded-2xl sm:rounded-3xl border border-gray-700 relative shadow-xl overflow-hidden group",children:[e.jsx("button",{type:"button",onClick:()=>{t.products.length>1&&g({...t,products:t.products.filter((w,re)=>re!==l)})},className:"absolute top-2 right-2 sm:top-4 sm:right-4 text-red-400 bg-red-400/10 rounded-full h-6 w-6 sm:h-8 sm:w-8 flex items-center justify-center border border-red-400/20 hover:bg-red-600 hover:text-white transition-all z-10 active:scale-90",disabled:t.products.length<=1,children:"×"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 sm:gap-6 mb-4 sm:mb-6",children:[e.jsx("div",{className:"md:col-span-2 flex justify-center",children:e.jsx("div",{className:"w-20 h-20 sm:w-28 sm:h-28 bg-gray-900 rounded-xl sm:rounded-2xl overflow-hidden border-2 border-gray-700 shadow-inner group-hover:border-blue-500/50 transition-colors",children:e.jsx("img",{src:_(s.image),className:"w-full h-full object-cover",alt:""})})}),e.jsxs("div",{className:"md:col-span-10 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"ឈ្មោះផលិតផល*"}),e.jsx(Me,{products:c.products||[],selectedProductName:s.name,onSelect:(w,re)=>J(l,"name",w,re)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsx(Le,{value:s.quantity,onChange:w=>J(l,"quantity",w)}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"ពណ៌/សម្គាល់"}),e.jsx("input",{type:"text",list:`colors-datalist-${s.id}`,value:s.colorInfo,onChange:w=>J(l,"colorInfo",w.target.value),className:"form-input text-sm !py-2.5 rounded-xl bg-gray-900 border-gray-700",placeholder:"ឧ. ខៀវ, XL"}),e.jsx("datalist",{id:`colors-datalist-${s.id}`,children:(c.colors||[]).map((w,re)=>e.jsx("option",{value:w.ColorName},re))})]})]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-xl sm:rounded-[2rem] p-3 sm:p-6 border border-white/5 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"h-px flex-grow bg-gray-700/50"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] whitespace-nowrap",children:"Pricing & Discount"}),e.jsx("div",{className:"h-px flex-grow bg-gray-700/50"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"flex bg-gray-900/50 p-1 rounded-xl sm:rounded-2xl border border-gray-700 shadow-inner",children:["percent","amount","custom"].map(w=>e.jsx("button",{type:"button",onClick:()=>J(l,"discountType",w),className:`flex-1 flex flex-col items-center justify-center py-2 sm:py-2.5 rounded-lg sm:rounded-xl transition-all duration-300 active:scale-95 ${s.discountType===w?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:e.jsx("span",{className:"text-[9px] sm:text-[11px] font-black uppercase tracking-widest",children:w==="percent"?"បញ្ចុះ %":w==="amount"?"បញ្ចុះ $":"កែតម្លៃលក់"})},w))}),e.jsxs("div",{className:"relative animate-fade-in",children:[s.discountType==="percent"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 ml-1",children:"បញ្ចូលភាគរយបញ្ចុះតម្លៃ (%)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",max:"100",placeholder:"0",value:s.discountPercentInput,onChange:w=>J(l,"discountPercentInput",w.target.value),className:"form-input !text-base sm:!text-lg !font-black !py-2 sm:!py-3 pr-10 text-right text-blue-400 bg-gray-900 border-gray-700"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-black",children:"%"})]})]}),s.discountType==="amount"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 ml-1",children:"បញ្ចូលទឹកប្រាក់បញ្ចុះតម្លៃ ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",placeholder:"0.00",value:s.discountAmountInput,onChange:w=>J(l,"discountAmountInput",w.target.value),className:"form-input !text-base sm:!text-lg !font-black !py-2 sm:!py-3 pr-10 text-right text-red-400 bg-gray-900 border-gray-700"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-black",children:"$"})]}),s.quantity>1&&e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-black/20 rounded-lg mt-1 sm:mt-2 border border-white/5 active:scale-95 transition-transform",children:[e.jsx("input",{type:"checkbox",checked:s.applyDiscountToTotal,onChange:w=>J(l,"applyDiscountToTotal",w.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-gray-800 text-blue-500"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] text-gray-400 uppercase font-black",children:"បញ្ចុះលើតម្លៃសរុប"})]})]}),s.discountType==="custom"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 ml-1",children:"កំណត់តម្លៃលក់ថ្មីក្នុង ១ ឯកតា ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",inputMode:"decimal",placeholder:"0.00",value:s.finalPriceInput,onChange:w=>J(l,"finalPriceInput",w.target.value),className:"form-input !text-base sm:!text-lg !font-black !py-2 sm:!py-3 pr-10 text-right text-emerald-400 bg-gray-900 border-gray-700"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-black",children:"$"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-900/60 rounded-xl sm:rounded-[1.5rem] p-3 sm:p-5 border border-white/5 flex flex-col justify-between",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-[10px] sm:text-xs",children:[e.jsx("span",{className:"text-gray-500 font-bold uppercase",children:"Original Subtotal"}),e.jsxs("span",{className:"text-blue-400 font-black",children:["$",v.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] sm:text-xs",children:[e.jsx("span",{className:"text-gray-500 font-bold uppercase",children:"Discount Applied"}),e.jsxs("span",{className:"text-red-400 font-black",children:["-",U>0?`$${U.toFixed(2)}`:"$0.00"]})]}),e.jsx("div",{className:"h-px bg-gray-700/50 my-1"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[9px] sm:text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Net Total"}),e.jsxs("span",{className:"text-xl sm:text-2xl font-black text-white tracking-tighter",children:["$",(s.total||0).toFixed(2)]})]})]}),e.jsx("div",{className:"mt-3 sm:mt-4 pt-2 sm:pt-3 border-t border-white/5 flex justify-center",children:e.jsxs("span",{className:"text-[8px] sm:text-[9px] bg-emerald-500/10 text-emerald-400 px-2 sm:px-3 py-1 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest",children:["Avg. $",(s.finalPrice||0).toFixed(2)," / unit"]})})]})]})]})]},s.id)})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mt-6",children:[e.jsxs("button",{type:"button",onClick:()=>g({...t,products:[...t.products,{...ie,id:Date.now()}]}),className:"flex-1 py-4 px-6 bg-gray-800 border border-gray-700 rounded-2xl text-gray-300 font-black uppercase text-[11px] tracking-widest hover:bg-gray-700 hover:border-blue-500 transition-all flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M12 4v16m8-8H4"})}),"បន្ថែមផលិតផល"]}),e.jsxs("button",{type:"button",onClick:()=>V(!0),className:"flex-1 py-4 px-6 bg-blue-600/10 border border-blue-500/30 rounded-2xl text-blue-400 font-black uppercase text-[11px] tracking-widest hover:bg-blue-600 hover:text-white transition-all flex items-center justify-center gap-2 shadow-lg shadow-blue-900/10 active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2M17 3h2a2 2 0 0 1 2 2v2M21 17v2a2 2 0 0 1-2 2h-2M7 21H5a2 2 0 0 1-2-2v-2M7 12h10",strokeWidth:"3"})}),"Scan Barcode"]})]})]});case 3:return e.jsxs("fieldset",{className:"border border-gray-600 p-3 sm:p-4 rounded-lg animate-fade-in space-y-4 sm:space-y-6",children:[e.jsx("legend",{className:"px-2 text-base sm:text-lg font-semibold text-blue-300",children:"ដឹកជញ្ជូន"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"វិធីសាស្រ្តដឹកជញ្ជូន*"}),e.jsx(Pe,{methods:c.shippingMethods||[],selectedMethodName:t.shipping.method,onSelect:fe})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"ថ្លៃសេវាឲ្យអ្នកដឹក (Cost)*"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",step:"0.01",name:"cost",placeholder:"0.00",value:t.shipping.cost,className:"form-input !py-3 rounded-xl bg-gray-900 border-gray-700 text-blue-400 font-black pr-12",onChange:ce,required:!0}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"$"})]}),e.jsx("div",{className:"flex gap-2",children:[1.25,1.5,2].map(s=>{const l=parseFloat(t.shipping.cost)===s;return e.jsxs("button",{type:"button",onClick:()=>ce({target:{name:"cost",value:String(s)}}),className:`flex-1 py-2 border font-black rounded-xl text-xs transition-all active:scale-95 ${l?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-200"}`,children:["$",s]},s)})})]})]}),(q==null?void 0:q.RequireDriverSelection)&&e.jsxs("div",{className:"md:col-span-2 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-1",children:[e.jsx("div",{className:"h-4 w-1 bg-blue-500 rounded-full"}),e.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"ជ្រើសរើសអ្នកដឹក (DriverSelection)*"})]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 sm:gap-4",children:(i=c.drivers)==null?void 0:i.map(s=>{const l=t.shipping.details===s.DriverName;return e.jsxs("button",{type:"button",onClick:()=>je(s.DriverName),className:`group relative flex flex-col items-center p-2 sm:p-3 rounded-2xl sm:rounded-[2rem] border-2 transition-all duration-300 active:scale-95 ${l?"bg-blue-600/20 border-blue-500 shadow-lg shadow-blue-900/20 scale-105":"bg-gray-800/40 border-transparent hover:bg-gray-800 hover:border-gray-700"}`,children:[e.jsx("div",{className:`w-12 h-12 sm:w-20 sm:h-20 rounded-full overflow-hidden mb-2 sm:mb-3 border-2 sm:border-4 transition-all duration-500 ${l?"border-blue-500 shadow-xl":"border-gray-700 group-hover:border-gray-600"}`,children:e.jsx("img",{src:_(s.ImageURL),className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",alt:s.DriverName})}),e.jsx("span",{className:`text-[9px] sm:text-[11px] font-black uppercase tracking-widest text-center truncate w-full ${l?"text-white":"text-gray-400 group-hover:text-gray-200"}`,children:s.DriverName}),l&&e.jsx("div",{className:"absolute top-0.5 right-0.5 bg-blue-500 text-white rounded-full p-0.5 sm:p-1 shadow-lg animate-fade-in-scale",children:e.jsx("svg",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:4,children:e.jsx("path",{d:"M5 13l4 4L19 7"})})})]},s.DriverName)})}),!t.shipping.details&&e.jsx("p",{className:"text-center text-[9px] text-gray-500 italic mt-1",children:"សូមជ្រើសរើសអ្នកដឹកម្នាក់"})]})]})]});case 4:const d=(a=c.drivers)==null?void 0:a.find(s=>s.DriverName===t.shipping.details);return e.jsxs("div",{className:"animate-fade-in space-y-4 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2 sm:mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," ព័ត៌មានអតិថិជន"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 bg-gray-900/60 p-3 sm:p-5 rounded-2xl sm:rounded-3xl border border-white/5 shadow-inner",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Customer Info"}),e.jsx("p",{className:"text-white font-black text-base sm:text-lg",children:t.customer.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-blue-400 font-bold font-mono text-sm",children:t.customer.phone}),p&&e.jsx("img",{src:p,className:"h-4 sm:h-5 w-auto object-contain",alt:"Carrier"})]})]}),e.jsxs("div",{className:"space-y-1 md:text-right",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Location / Store"}),e.jsx("p",{className:"text-gray-200 font-bold text-xs sm:text-sm leading-tight",children:`${t.customer.additionalLocation}, ${t.customer.sangkat}, ${t.customer.district}, ${t.customer.province}`.replace(/^,|,$/g,"").trim()}),e.jsxs("p",{className:"text-purple-400 font-black text-[9px] uppercase tracking-wider",children:["Fulfillment: ",t.fulfillmentStore]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2 sm:mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-orange-500"})," ព័ត៌មានដឹកជញ្ជូន"]}),e.jsxs("div",{className:"bg-gray-900/40 p-3 sm:p-5 rounded-2xl sm:rounded-3xl border border-white/5 shadow-inner grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Shipping Method"}),e.jsxs("div",{className:"flex items-center gap-2",children:[k&&e.jsx("img",{src:k,className:"h-4 sm:h-5 w-auto object-contain",alt:"Logo"}),e.jsx("p",{className:"text-white font-black text-xs sm:text-sm",children:t.shipping.method})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Driver / Details"}),e.jsxs("div",{className:"flex items-center gap-2",children:[d&&e.jsx("img",{src:_(d.ImageURL),className:"h-6 w-6 sm:h-8 sm:w-8 rounded-full object-cover border border-gray-700 cursor-pointer active:scale-95 transition-transform",alt:"Driver",onClick:()=>P(_(d.ImageURL))}),e.jsx("p",{className:"text-white font-bold text-xs sm:text-sm",children:t.shipping.details||"N/A"})]})]}),e.jsxs("div",{className:"space-y-1 sm:text-right",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Internal Cost ($)"}),e.jsxs("p",{className:"text-orange-400 font-black text-base sm:text-lg font-mono",children:["$",(Number(t.shipping.cost)||0).toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2 sm:mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," បញ្ជីទំនិញកុម្ម៉ង់"]}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:t.products.map(s=>e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 bg-gray-900/40 p-2 sm:p-3 rounded-xl sm:rounded-2xl border border-white/5 group hover:border-blue-500/30 transition-all",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-800 rounded-lg sm:rounded-xl overflow-hidden border border-gray-700 flex-shrink-0 relative",children:e.jsx("img",{src:_(s.image),className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",alt:s.name})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-0.5 sm:mb-1",children:[e.jsx("h4",{className:"text-white font-black text-xs sm:text-sm truncate leading-tight",children:s.name}),e.jsx("div",{className:"flex gap-1.5",children:e.jsxs("span",{className:"bg-blue-600/10 text-blue-400 text-[9px] sm:text-[10px] font-black px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded-lg border border-blue-500/20",children:["x",s.quantity]})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.colorInfo&&e.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded-md font-bold",children:s.colorInfo}),e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-tight",children:[e.jsxs("span",{children:["$",(s.finalPrice||0).toFixed(2)]})," / unit"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white font-black text-sm sm:text-base tracking-tight",children:["$",(s.total||0).toFixed(2)]}),e.jsx("p",{className:"text-[8px] text-gray-600 font-bold uppercase",children:"Subtotal"})]})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-gray-900/40 p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-white/5 text-center",children:[e.jsx("p",{className:"text-[8px] sm:text-[9px] text-gray-500 font-black uppercase mb-1",children:"សរុបទំនិញ"}),e.jsxs("p",{className:"text-white font-black text-base sm:text-lg",children:["$",(t.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-gray-900/40 p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-white/5 text-center",children:[e.jsx("p",{className:"text-[8px] sm:text-[9px] text-gray-500 font-black uppercase mb-1",children:"សេវាដឹក"}),e.jsxs("p",{className:"text-white font-black text-base sm:text-lg",children:["$",(Number(t.customer.shippingFee)||0).toFixed(2)]})]}),e.jsxs("div",{className:"col-span-2 bg-blue-600/10 p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-blue-500/20 text-center shadow-lg shadow-blue-900/10",children:[e.jsx("p",{className:"text-[9px] sm:text-[10px] text-blue-400 font-black uppercase mb-1 tracking-widest",children:"សរុបរួម (Grand Total)"}),e.jsxs("p",{className:"text-white font-black text-2xl sm:text-3xl tracking-tighter",children:["$",(t.grandTotal||0).toFixed(2)]})]})]}),e.jsxs("fieldset",{className:"border border-gray-700 p-4 sm:p-6 rounded-2xl sm:rounded-3xl bg-gray-900/20",children:[e.jsx("legend",{className:"px-3 text-[10px] sm:text-xs font-black text-blue-400 uppercase tracking-[0.2em]",children:"ស្ថានភាពទូទាត់"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("select",{value:t.payment.status,onChange:s=>g({...t,payment:{...t.payment,status:s.target.value,info:""}}),className:"form-select bg-gray-800 text-sm",children:[e.jsx("option",{value:"Unpaid",children:"មិនទាន់ទូទាត់ (COD)"}),e.jsx("option",{value:"Paid",children:"ទូទាត់រួច (Paid)"})]}),t.payment.status==="Paid"&&e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 animate-fade-in",children:[e.jsxs("select",{value:t.payment.info,onChange:s=>ve(s.target.value),className:"form-select bg-gray-800 flex-grow text-sm",children:[e.jsx("option",{value:"",children:"ជ្រើសរើសធនាគារ"}),(o=c.bankAccounts)==null?void 0:o.map(s=>e.jsx("option",{value:s.BankName,children:s.BankName},s.BankName))]}),j&&e.jsx("img",{src:j,className:"h-8 w-12 sm:h-10 sm:w-16 object-contain bg-white/10 p-1 rounded-lg sm:rounded-xl active:scale-95 transition-transform",alt:"bank"})]})]})]}),e.jsx(Fe,{schedule:t.telegram.schedule,time:t.telegram.time,onChange:s=>g({...t,telegram:s})}),e.jsxs("div",{className:"space-y-2 sm:space-y-3 pt-4",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"ចំណាំ & Link Google Map"}),e.jsx("textarea",{placeholder:"ចំណាំបន្ថែម...",value:t.note,rows:4,onChange:s=>g({...t,note:s.target.value}),className:"form-textarea bg-gray-900/60 !rounded-[1.5rem] sm:!rounded-[2rem] border-white/5 focus:border-blue-500/50 text-sm"})]})]});default:return null}};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto mt-2 sm:mt-10 lg:mt-14 px-1 sm:px-0",children:[e.jsx("style",{children:`
                @keyframes shimmer {
                    0% { background-position: -200% 0; }
                    100% { background-position: 200% 0; }
                }
                .btn-shimmer {
                    background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0) 100%);
                    background-size: 200% 100%;
                    animation: shimmer 3s infinite linear;
                }
                @keyframes pulse-glow {
                    0%, 100% { box-shadow: 0 0 15px rgba(37,99,235,0.3); }
                    50% { box-shadow: 0 0 30px rgba(37,99,235,0.6); }
                }
                .btn-pulse { animation: pulse-glow 2s infinite ease-in-out; }
             `}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[100] animate-fade-in p-4",children:e.jsxs("div",{className:"page-card text-center flex flex-col items-center animate-fade-in-scale",children:[R.type==="success"?e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-green-500/20 text-green-400 rounded-full flex items-center justify-center mb-4 border border-green-500/30 shadow-[0_0_30px_rgba(34,197,94,0.2)]",children:e.jsx("svg",{className:"h-8 w-8 sm:h-10 sm:w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}):e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-red-500/20 text-red-400 rounded-full flex items-center justify-center mb-4 border border-red-500/30",children:e.jsx("svg",{className:"h-8 w-8 sm:h-10 sm:w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("p",{className:"text-base sm:text-lg font-black text-white",children:R.message})]})}),e.jsx(ze,{isOpen:N,onClose:()=>z(!1),url:E}),B&&e.jsx(_e,{onClose:()=>V(!1),onCodeScanned:be,scanMode:H,setScanMode:$,productsInOrder:t.products,masterProducts:c.products||[]}),e.jsx(xe,{isOpen:F,onClose:()=>L(!1),maxWidth:"max-w-sm",children:e.jsxs("div",{className:"p-6 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto w-14 h-14 sm:w-16 sm:h-16 bg-red-500/10 text-red-500 rounded-full flex items-center justify-center border border-red-500/20 shadow-xl shadow-red-900/10 animate-bounce-slow",children:e.jsx("svg",{className:"h-7 w-7 sm:h-8 sm:w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-lg sm:text-xl font-black text-white uppercase tracking-tighter",children:"បោះបង់ការបញ្ចូល?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>L(!1),className:"px-6 py-3 bg-gray-800 border border-gray-700 text-gray-300 rounded-2xl flex-1 font-black text-xs sm:text-sm transition-all hover:bg-gray-700 active:scale-95",children:"ទេ (ត្រឡប់)"}),e.jsx("button",{onClick:ee,className:"px-6 py-3 bg-red-600 border border-red-500 text-white rounded-2xl flex-1 font-black text-xs sm:text-sm transition-all hover:bg-red-700 active:scale-95 shadow-lg shadow-red-900/20",children:"បាទ (បោះបង់)"})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 sm:mb-10 gap-4",children:[e.jsxs("h1",{className:"hidden md:flex text-2xl sm:text-3xl font-black text-white uppercase tracking-tighter items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"text-blue-500",children:"កុម្ម៉ង់ថ្មី"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] bg-blue-600/20 text-blue-400 px-3 sm:px-4 py-1.5 rounded-full border border-blue-500/20 uppercase tracking-[0.15em] sm:tracking-[0.2em]",children:x})]}),e.jsx("button",{onClick:se,className:"hidden md:block px-6 py-2.5 bg-gray-800 border border-gray-700 hover:border-red-500 hover:bg-red-500/10 text-gray-400 hover:text-red-400 font-black rounded-2xl uppercase text-[10px] sm:text-[11px] tracking-widest transition-all active:scale-90",children:"បោះបង់"})]}),e.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-3xl border border-white/5 rounded-[1.5rem] sm:rounded-[3rem] p-3 sm:p-10 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 sm:mb-12 relative px-2 sm:px-4",children:[e.jsx("div",{className:"absolute left-6 right-6 sm:left-10 sm:right-10 top-1/2 w-[calc(100%-48px)] sm:w-[calc(100%-80px)] h-0.5 bg-gray-700 -z-10"}),e.jsx("div",{className:"absolute left-6 sm:left-10 top-1/2 h-0.5 bg-blue-500 -z-10 transition-all duration-500",style:{width:`${(m-1)/(ne.length-1)*(100-48/400*100)}%`}}),ne.map(r=>e.jsxs("div",{className:`relative flex flex-col items-center z-10 transition-all duration-500 ${m>=r.number?"scale-110":"opacity-40 scale-90"}`,children:[e.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-xl sm:rounded-2xl flex items-center justify-center font-black text-[10px] sm:text-xs border-2 transition-all duration-500 ${m>=r.number?"border-blue-500 bg-blue-600 text-white shadow-[0_0_20px_rgba(37,99,235,0.4)]":"border-gray-600 bg-gray-800 text-gray-500"}`,children:m>r.number?"✓":r.number}),e.jsx("span",{className:`absolute -bottom-6 sm:-bottom-7 text-[8px] sm:text-[9px] font-black uppercase tracking-widest whitespace-nowrap ${m>=r.number?"text-blue-400":"text-gray-600"}`,children:r.title})]},r.number))]}),e.jsx("div",{className:"mt-8 sm:mt-16",children:Se()}),Q&&e.jsx("div",{className:"mt-4 sm:mt-6 p-3 sm:p-4 bg-red-500/10 border border-red-500/20 rounded-xl sm:rounded-2xl text-red-400 text-center text-[10px] sm:text-xs font-bold animate-shake",children:Q}),e.jsxs("div",{className:"mt-8 sm:mt-10 pt-6 sm:pt-8 border-t border-white/5 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex gap-3 sm:gap-4 h-12 sm:h-16",children:[m>1&&e.jsxs("button",{type:"button",onClick:Ne,className:"flex-1 px-4 sm:px-8 bg-gray-800 border border-gray-700 text-gray-300 rounded-2xl font-black uppercase text-[10px] sm:text-[12px] tracking-[0.15em] transition-all hover:bg-gray-700 flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M15 19l-7-7 7-7"})}),"ត្រឡប់"]}),m<ne.length?e.jsxs("button",{type:"button",onClick:ye,className:"relative flex-[2] bg-blue-600 hover:bg-blue-700 text-white rounded-2xl font-black uppercase text-[12px] sm:text-[14px] tracking-[0.2em] shadow-2xl active:scale-95 transition-all flex items-center justify-center gap-3 group overflow-hidden btn-pulse",children:[e.jsx("div",{className:"absolute inset-0 btn-shimmer pointer-events-none"}),e.jsx("span",{className:"relative z-10",children:"ជំហានបន្ទាប់"}),e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 relative z-10 transform group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M9 5l7 7-7 7"})})]}):e.jsxs("button",{type:"button",onClick:ke,className:"relative flex-[2] bg-emerald-600 hover:bg-emerald-700 text-white rounded-2xl font-black uppercase text-[12px] sm:text-[14px] tracking-[0.2em] shadow-2xl active:scale-95 transition-all flex items-center justify-center gap-3 overflow-hidden",disabled:O,children:[e.jsx("div",{className:"absolute inset-0 btn-shimmer pointer-events-none"}),O?e.jsx(le,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"relative z-10",children:"បញ្ជូនកម្ម៉ង់ឥឡូវនេះ"}),e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 relative z-10 animate-bounce-x",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M5 13l4 4L19 7"})})]})]})]}),e.jsx("button",{onClick:se,className:"md:hidden w-full py-4 bg-gray-800/40 text-gray-500 hover:text-red-400 font-black rounded-2xl uppercase text-[10px] tracking-widest transition-all active:scale-95 border border-white/5",children:"បោះបង់ការបញ្ចូល"})]})]}),e.jsx("style",{children:".animate-bounce-x { animation: bounce-x 1s infinite ease-in-out; } @keyframes bounce-x { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(5px); } }"})]})},Oe=({team:x,onAdd:b})=>{const[S,c]=n.useState([]),[u,M]=n.useState([]),[P,m]=n.useState(!0),[y,F]=n.useState(""),[L,f]=n.useState("this_month"),[t,g]=n.useState(new Date().toISOString().split("T")[0]),[O,T]=n.useState(new Date().toISOString().split("T")[0]),Q=n.useMemo(()=>new Set(["index","orderId","customerName","productInfo","location","pageInfo","total","shippingService","status","date","print"]),[]);n.useEffect(()=>{(async()=>{m(!0);try{const k=await(await fetch(`${pe}/api/admin/all-orders`)).json();if(k.status==="success"){const j=(Array.isArray(k.data)?k.data.filter(B=>B!==null):[]).map(B=>{let V=[];try{B["Products (JSON)"]&&(V=JSON.parse(B["Products (JSON)"]))}catch{}return{...B,Products:V}});M(j);const I=j.filter(B=>(B.Team||"").trim()===(x||"").trim());c(I.sort((B,V)=>new Date(V.Timestamp).getTime()-new Date(B.Timestamp).getTime()))}}catch(h){console.error(h)}finally{m(!1)}})()},[x]);const D=p=>{const h=new Date,k=new Date(h.getFullYear(),h.getMonth(),h.getDate());let C=null,j=new Date;switch(p){case"today":C=k;break;case"yesterday":C=new Date(k),C.setDate(k.getDate()-1),j=new Date(k),j.setMilliseconds(-1);break;case"this_week":const I=h.getDay();C=new Date(k),C.setDate(k.getDate()-(I===0?6:I-1));break;case"this_month":C=new Date(h.getFullYear(),h.getMonth(),1);break;case"custom":C=new Date(t+"T00:00:00"),j=new Date(O+"T23:59:59");break}return{start:C,end:j}},R=n.useMemo(()=>{const{start:p,end:h}=D(L);return S.filter(k=>{const C=new Date(k.Timestamp);if(p&&C<p||h&&C>h)return!1;if(y.trim()){const j=y.toLowerCase();return k["Order ID"].toLowerCase().includes(j)||(k["Customer Name"]||"").toLowerCase().includes(j)||(k["Customer Phone"]||"").includes(j)}return!0})},[S,y,L,t,O]),W=n.useMemo(()=>R.reduce((p,h)=>p+(Number(h["Grand Total"])||0),0),[R]),q=n.useMemo(()=>{const{start:p,end:h}=D(L),k=u.filter(j=>{const I=new Date(j.Timestamp);return!(p&&I<p||h&&I>h)}),C={};return k.forEach(j=>{const I=(j.Team||"Unassigned").trim();C[I]=(C[I]||0)+(Number(j["Grand Total"])||0)}),Object.entries(C).map(([j,I])=>({name:j,revenue:I})).sort((j,I)=>I.revenue-j.revenue).slice(0,3)},[u,L,t,O]),K=n.useMemo(()=>{switch(L){case"today":return"ថ្ងៃនេះ";case"yesterday":return"ម្សិលមិញ";case"this_week":return"សប្តាហ៍នេះ";case"this_month":return"ខែនេះ";case"custom":return"តាមកំណត់";default:return""}},[L]);return P?e.jsxs("div",{className:"flex flex-col justify-center items-center h-96 gap-4",children:[e.jsx(le,{size:"lg"}),e.jsx("p",{className:"text-[10px] font-black text-blue-500 uppercase tracking-[0.4em] animate-pulse",children:"Initializing Data Stream..."})]}):e.jsxs("div",{className:"space-y-6 flex flex-col min-h-screen",children:[e.jsx("style",{children:`
                .hide-scrollbar::-webkit-scrollbar { display: none; }
                .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-5 bg-blue-500 rounded-full"}),e.jsx("h3",{className:"text-xs font-black text-white uppercase tracking-widest",children:"តារាងក្រុមឆ្នើម"})]}),e.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase",children:K})]}),e.jsx("div",{className:"flex overflow-x-auto gap-4 px-2 pb-4 hide-scrollbar snap-x",children:q.map((p,h)=>e.jsxs("div",{className:"flex-shrink-0 w-[240px] sm:w-[300px] snap-center bg-gray-900/60 backdrop-blur-xl border border-white/5 p-5 rounded-[2rem] flex items-center gap-4 relative overflow-hidden",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-2xl border ${h===0?"bg-yellow-500/20 text-yellow-500 border-yellow-500/30":h===1?"bg-gray-400/20 text-gray-300 border-gray-400/30":"bg-orange-600/20 text-orange-500 border-orange-600/30"}`,children:h===0?"🥇":h===1?"🥈":"🥉"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"text-sm font-black text-white truncate uppercase tracking-tighter",children:p.name}),e.jsxs("p",{className:"text-lg font-black text-blue-400",children:["$",p.revenue.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),e.jsx("div",{className:`absolute -right-4 -bottom-4 w-20 h-20 rounded-full blur-3xl opacity-10 ${h===0?"bg-yellow-500":h===1?"bg-gray-400":"bg-orange-600"}`})]},p.name))})]}),e.jsxs("div",{className:"bg-gray-900/60 backdrop-blur-3xl p-4 rounded-[2rem] border border-white/5 space-y-4 shadow-2xl mx-1",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex items-center gap-1 overflow-x-auto hide-scrollbar bg-black/40 p-1 rounded-xl border border-white/5",children:["today","this_week","this_month","custom"].map(p=>e.jsx("button",{onClick:()=>f(p),className:`flex-shrink-0 px-4 py-2 text-[10px] font-black uppercase rounded-lg transition-all ${L===p?"bg-blue-600 text-white shadow-lg shadow-blue-600/40":"text-gray-500"}`,children:p==="today"?"ថ្ងៃនេះ":p==="this_week"?"សប្តាហ៍នេះ":p==="this_month"?"ខែនេះ":"កំណត់"},p))}),e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest",children:"ប្រតិបត្តិការណ៍"}),e.jsxs("span",{className:"text-lg font-black text-white",children:[R.length," ",e.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"Orders"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-[9px] font-black text-blue-500 uppercase tracking-widest",children:"ទឹកប្រាក់សរុប"}),e.jsxs("p",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-blue-200 to-blue-400",children:["$",W.toLocaleString(void 0,{minimumFractionDigits:0})]})]})]})]}),L==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 animate-fade-in-down",children:[e.jsx("input",{type:"date",value:t,onChange:p=>g(p.target.value),className:"bg-gray-800 border-none text-[10px] font-black text-white rounded-lg p-2"}),e.jsx("input",{type:"date",value:O,onChange:p=>T(p.target.value),className:"bg-gray-800 border-none text-[10px] font-black text-white rounded-lg p-2"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"ស្វែងរកតាម ID, ឈ្មោះ, ឬទូរស័ព្ទ...",value:y,onChange:p=>F(p.target.value),className:"w-full bg-black/40 border border-gray-800 rounded-xl py-3 pl-10 pr-4 text-xs font-bold text-white placeholder:text-gray-700 focus:border-blue-500/50 transition-all"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),e.jsx("div",{className:"px-1",children:R.length===0?e.jsx("div",{className:"text-center py-20 bg-gray-800/10 rounded-[2rem] border-2 border-dashed border-gray-800/50",children:e.jsx("p",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest italic",children:"រកមិនឃើញទិន្នន័យ"})}):e.jsx("div",{className:"animate-fade-in-up",children:e.jsx(Ie,{orders:R,showActions:!1,visibleColumns:Q})})}),e.jsx("div",{className:"md:hidden fixed bottom-6 left-6 right-6 z-40",children:e.jsxs("div",{className:"bg-gray-900/95 backdrop-blur-3xl p-4 rounded-3xl shadow-2xl border border-white/10 flex justify-between items-center ring-1 ring-white/5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[8px] font-black text-blue-500 uppercase tracking-[0.2em] mb-0.5",children:"Session Revenue"}),e.jsxs("span",{className:"text-white font-black text-xl tracking-tighter",children:["$",W.toLocaleString()]})]}),e.jsx("button",{onClick:b,className:"bg-blue-600 hover:bg-blue-500 text-white p-4 rounded-2xl shadow-lg shadow-blue-600/40 active:scale-90 transition-all",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 4v16m8-8H4",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}),e.jsx("div",{className:"h-32 md:hidden"})]})},Ve=({onBackToRoleSelect:x})=>{const{currentUser:b,setChatVisibility:S}=n.useContext(ue),[c,u]=n.useState("list"),[M,P]=Ce("team",""),m=n.useMemo(()=>((b==null?void 0:b.Team)||"").split(",").map(y=>y.trim()).filter(Boolean),[b]);return n.useEffect(()=>{S(c!=="create")},[c,S]),n.useEffect(()=>{m.length===1&&!M&&P(m[0])},[m,M,P]),m.length===0?e.jsxs("div",{className:"page-card text-center p-12 mt-20 max-w-lg mx-auto bg-gray-900/60 backdrop-blur-xl border border-white/5 rounded-[3rem]",children:[e.jsxs("h2",{className:"text-xl font-black text-white mb-4",children:["សួស្តី, ",b==null?void 0:b.FullName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"គណនីរបស់អ្នកមិនទាន់មានក្រុមការងារនៅឡើយទេ។"}),e.jsx("button",{onClick:x,className:"btn btn-secondary mt-8 w-full rounded-2xl font-black",children:"ត្រឡប់ក្រោយ"})]}):M?c==="create"?e.jsx(Be,{team:M,onSaveSuccess:()=>u("list"),onCancel:()=>u("list")}):e.jsxs("div",{className:"w-full max-w-[100rem] mx-auto p-2 sm:p-4 animate-fade-in min-h-screen relative overflow-x-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4 px-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl sm:text-4xl font-black text-white italic tracking-tighter leading-none",children:"MY ORDERS"}),e.jsx("div",{className:"h-6 w-px bg-white/10"}),e.jsx("span",{className:"text-blue-500 font-black text-xs uppercase tracking-widest",children:M})]}),e.jsx("div",{className:"flex gap-2",children:m.length>1&&e.jsxs("button",{onClick:()=>P(""),className:"text-[9px] font-black uppercase text-gray-500 hover:text-blue-400 transition-colors flex items-center gap-1.5 bg-gray-800/50 px-3 py-1.5 rounded-lg border border-white/5 active:scale-95",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",strokeWidth:3})}),"Switch Team"]})})]}),e.jsxs("button",{onClick:()=>u("create"),className:"hidden md:flex px-10 py-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-black uppercase tracking-widest text-xs rounded-2xl shadow-xl shadow-blue-900/20 transition-all active:scale-95 items-center gap-3 border border-blue-400/20",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M12 4v16m8-8H4"})}),"Create Order"]})]}),e.jsx("div",{className:"relative",children:e.jsx(Oe,{team:M,onAdd:()=>u("create")})})]}):e.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 mt-6 animate-fade-in flex flex-col items-center",children:[e.jsxs("div",{className:"text-center space-y-3 mb-10",children:[e.jsx("p",{className:"text-blue-500 font-black uppercase tracking-[0.4em] text-[10px]",children:"Access Identification"}),e.jsx("h2",{className:"text-4xl sm:text-5xl font-black text-white tracking-tighter italic",children:"ជ្រើសរើសក្រុមការងារ"}),e.jsx("div",{className:"w-16 h-1.5 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full mx-auto shadow-[0_0_15px_rgba(59,130,246,0.5)]"})]}),e.jsx("div",{className:"w-full space-y-4 max-w-md",children:m.map((y,F)=>e.jsxs("button",{onClick:()=>P(y),className:"group relative w-full overflow-hidden bg-gray-900/60 backdrop-blur-3xl border border-white/5 rounded-[2.5rem] p-6 hover:border-blue-500/40 transition-all duration-500 active:scale-[0.97] shadow-xl flex items-center gap-6",children:[e.jsxs("div",{className:"absolute top-4 left-6",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-ping opacity-75"}),e.jsx("div",{className:"absolute top-0 w-1.5 h-1.5 bg-emerald-500 rounded-full"})]}),e.jsx("div",{className:"relative z-10 w-16 h-16 sm:w-20 sm:h-20 bg-gray-800 rounded-3xl flex items-center justify-center border border-white/5 shadow-inner group-hover:bg-blue-600/10 group-hover:border-blue-500/20 transition-all duration-500 group-hover:rotate-6",children:e.jsx("span",{className:"text-3xl sm:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-br from-blue-400 to-blue-600",children:y.charAt(0)})}),e.jsxs("div",{className:"relative z-10 flex-grow text-left",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white uppercase tracking-tight mb-1",children:y}),e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-widest opacity-60",children:["Team Operational Node ",F+1]})]}),e.jsx("div",{className:"relative z-10 p-3 bg-white/5 rounded-2xl group-hover:bg-blue-600 group-hover:text-white transition-all text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M9 5l7 7-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/0 via-blue-600/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-blue-500 opacity-0 group-hover:opacity-5 blur-[40px] transition-opacity"})]},y))}),e.jsxs("button",{onClick:x,className:"mt-12 flex items-center gap-2 text-[10px] font-black text-gray-600 uppercase tracking-widest hover:text-blue-500 transition-all active:scale-95",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M15 19l-7-7 7-7",strokeLinecap:"round",strokeLinejoin:"round"})}),"ត្រឡប់ទៅតួនាទី"]})]})};export{Ve as default};
