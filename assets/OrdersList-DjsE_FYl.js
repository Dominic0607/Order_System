import{r as l,j as e,c as y,M as Q,A as X,S as G,L as Y,W as Z}from"./index-ClYgfP-T.js";const ee=(n,d)=>{if(!d||!n)return e.jsx("span",{children:n});const f=d.split(" ").filter(Boolean).map(c=>c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));if(f.length===0)return e.jsx("span",{children:n});const w=new RegExp(`(${f.join("|")})`,"gi");return e.jsx(e.Fragment,{children:n.split(w).map((c,i)=>w.test(c)&&c.trim()!==""?e.jsx("strong",{className:"text-yellow-300 bg-yellow-900/50 rounded-sm px-0.5",children:c},i):c)})},te=(n,d)=>{const f=(n.ProductName||"").toLowerCase(),w=(n.Barcode||"").toLowerCase(),c=`${f} ${w}`,i=d.toLowerCase().trim();if(!i)return 1;const g=i.split(" ").filter(Boolean);if(!g.every(x=>c.includes(x)))return 0;let b=10;return g.forEach(x=>{f.includes(x)&&(b+=20),w.includes(x)&&(b+=10)}),f.startsWith(i)&&(b+=500),b},ae=({products:n,selectedProductName:d,onSelect:f})=>{const[w,c]=l.useState(!1),[i,g]=l.useState(""),[p,b]=l.useState(0),[x,N]=l.useState(null),[o,C]=l.useState(window.innerWidth<768),I=l.useRef(null),v=l.useRef(null),D=l.useRef(null);l.useEffect(()=>{const s=()=>C(window.innerWidth<768);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),l.useEffect(()=>{g(d)},[d]),l.useEffect(()=>{if(x){const s=setTimeout(()=>{D.current&&D.current.scrollIntoView({behavior:"smooth",block:"center"})},100);return()=>clearTimeout(s)}},[x]),l.useEffect(()=>{const s=t=>{I.current&&!I.current.contains(t.target)&&(c(!1),g(d))};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[d]);const a=l.useMemo(()=>{const s=i||"";return s.trim()?n.map(t=>({product:t,score:te(t,s)})).filter(t=>t.score>0).sort((t,r)=>r.score-t.score||t.product.ProductName.localeCompare(r.product.ProductName)).map(t=>t.product):[]},[n,i]),A=l.useMemo(()=>{const s=i.trim();return s?!n.some(t=>t.ProductName.trim().toLowerCase()===s.toLowerCase()):!1},[i,n]),P=l.useMemo(()=>{const s=[...a];return A&&s.unshift({isAddNew:!0,ProductName:i.trim()}),s},[a,A,i]),M=l.useCallback(s=>{var t;f(s),g(s),c(!1),N(null),b(0),(t=v.current)==null||t.blur()},[f]),O=s=>{s.isAddNew?M(s.ProductName):(N(s),c(!1))},B=l.useCallback(()=>{var s;f(""),g(""),c(!0),b(0),(s=v.current)==null||s.focus()},[f]),V=s=>{var r;const t=P.length;if(t!==0)switch(s.key){case"ArrowDown":s.preventDefault(),w||c(!0),b(h=>(h+1)%t);break;case"ArrowUp":s.preventDefault(),w||c(!0),b(h=>(h-1+t)%t);break;case"Enter":if(s.preventDefault(),!w)return;p>-1&&P[p]&&O(P[p]);break;case"Escape":c(!1),g(d),(r=v.current)==null||r.blur();break}};return e.jsxs("div",{className:"relative",ref:I,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{ref:v,type:"text",className:"form-input !pr-16 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:"ស្វែងរកផលិតផល...",value:i,onChange:s=>{g(s.target.value),c(!0),b(0)},onFocus:()=>c(!0),onKeyDown:V}),e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[i&&e.jsx("button",{type:"button",onClick:B,className:"text-gray-500 hover:text-white text-2xl",children:"×"}),e.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),w&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden animate-fade-in-down max-h-80 overflow-y-auto custom-scrollbar",children:e.jsx("ul",{className:"p-2 space-y-1",children:P.length===0?e.jsx("li",{className:"p-4 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"រកមិនឃើញផលិតផលទេ"}):P.map((s,t)=>{if("isAddNew"in s&&s.isAddNew)return e.jsxs("li",{className:`p-3.5 rounded-2xl cursor-pointer flex items-center gap-4 transition-all ${p===t?"bg-blue-600 text-white":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>O(s),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center border border-blue-500/30",children:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"})})}),e.jsx("div",{className:"min-w-0",children:e.jsxs("p",{className:"font-black text-sm leading-tight",children:["បន្ថែមថ្មី៖ ",e.jsxs("span",{className:"text-yellow-400",children:['"',s.ProductName,'"']})]})})]},"add-new");const r=s;return e.jsxs("li",{className:`p-2.5 rounded-2xl cursor-pointer flex items-center gap-3 transition-all ${p===t?"bg-blue-600 text-white shadow-lg":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>O(r),children:[e.jsx("img",{src:y(r.ImageURL),className:"w-12 h-12 rounded-xl object-cover border border-white/10",alt:""}),e.jsxs("div",{className:"min-w-0 flex-grow",children:[e.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:ee(r.ProductName,i)}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:e.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-md border border-blue-500/10",children:["$",r.Price.toFixed(2)]})})]})]},r.ProductName)})})}),x&&e.jsx(Q,{isOpen:!0,onClose:()=>N(null),maxWidth:o?"max-w-[95vw]":"max-w-2xl",children:e.jsxs("div",{ref:D,className:"bg-[#0f172a] rounded-[2rem] sm:rounded-[3rem] overflow-hidden shadow-[0_30px_100px_rgba(0,0,0,0.8)] border border-white/5 relative",children:[e.jsxs("div",{className:"relative h-48 sm:h-72 w-full",children:[e.jsx("div",{className:"absolute inset-0 z-0",children:e.jsx("img",{src:y(x.ImageURL),className:"w-full h-full object-cover blur-3xl opacity-30",alt:""})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 p-6",children:e.jsx("img",{src:y(x.ImageURL),className:"h-full w-auto object-contain rounded-2xl sm:rounded-3xl shadow-[0_20px_50px_rgba(0,0,0,0.5)] border border-white/10 transform transition-transform hover:scale-105 duration-500",alt:x.ProductName})}),e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsxs("div",{className:"bg-emerald-500 text-white font-black px-4 py-2 rounded-2xl shadow-xl border-2 border-white/20 text-lg",children:["$",x.Price.toFixed(2)]})})]}),e.jsxs("div",{className:"p-6 sm:p-10 text-center space-y-6 sm:space-y-8 bg-gradient-to-b from-transparent to-black/40",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-500 text-[10px] sm:text-xs font-black uppercase tracking-[0.4em] mb-3",children:"បញ្ជាក់ការជ្រើសរើស"}),e.jsx("h3",{className:"text-2xl sm:text-4xl font-black text-white leading-tight break-words",children:x.ProductName}),x.Barcode&&e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 bg-white/5 px-4 py-1.5 rounded-full border border-white/5",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("span",{className:"text-gray-400 font-mono text-xs tracking-widest",children:x.Barcode})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 w-full",children:[e.jsx("button",{onClick:()=>N(null),className:"order-2 sm:order-1 flex-1 py-4 sm:py-5 bg-gray-800/50 hover:bg-gray-800 text-gray-400 font-black rounded-2xl uppercase text-[11px] tracking-widest transition-all active:scale-95 border border-white/5",children:"បោះបង់"}),e.jsxs("button",{onClick:()=>M(x.ProductName),className:"order-1 sm:order-2 flex-[2] py-4 sm:py-5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-black rounded-2xl uppercase text-xs tracking-[0.2em] shadow-[0_10px_30px_rgba(37,99,235,0.4)] hover:from-blue-500 hover:to-indigo-500 transition-all active:scale-95 flex items-center justify-center gap-3",children:["ជ្រើសរើសយក",e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M5 13l4 4L19 7",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),e.jsx("div",{className:"absolute -bottom-20 -left-20 w-64 h-64 bg-blue-600/10 rounded-full blur-[80px] pointer-events-none"}),e.jsx("div",{className:"absolute -top-20 -right-20 w-64 h-64 bg-indigo-600/10 rounded-full blur-[80px] pointer-events-none"})]})})]})},re=({methods:n,selectedMethodName:d,onSelect:f,placeholder:w="ជ្រើសរើសសេវាដឹកជញ្ជូន..."})=>{const[c,i]=l.useState(!1),[g,p]=l.useState(""),b=l.useRef(null);l.useEffect(()=>{const o=n.find(C=>C.MethodName===d);o&&p(o.MethodName)},[d,n]),l.useEffect(()=>{const o=C=>{if(b.current&&!b.current.contains(C.target)){i(!1);const I=n.find(v=>v.MethodName===d);p(I?I.MethodName:"")}};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[d,n]);const x=l.useMemo(()=>{if(!g.trim())return n;const o=g.toLowerCase();return n.filter(C=>C.MethodName.toLowerCase().includes(o))},[n,g]),N=n.find(o=>o.MethodName===d);return e.jsxs("div",{className:"relative w-full",ref:b,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",className:"form-input !pl-14 !pr-10 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:w,value:g,onChange:o=>{p(o.target.value),i(!0)},onFocus:()=>i(!0)}),e.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-8 h-8 rounded-xl bg-gray-800 overflow-hidden border border-white/5 flex items-center justify-center p-1 shadow-inner",children:N?e.jsx("img",{src:y(N.LogosURL),className:"w-full h-full object-contain",alt:""}):e.jsxs("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h8a1 1 0 001-1z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 16l4-4 4 4"})]})})}),e.jsx("div",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-gray-600 group-focus-within:text-blue-500 transition-colors",children:e.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 9l-7 7-7-7",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),c&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_60px_rgba(0,0,0,0.6)] overflow-hidden animate-fade-in-down",children:e.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar p-2.5 space-y-1.5",children:x.length>0?x.map(o=>e.jsxs("button",{type:"button",onClick:()=>{f(o),p(o.MethodName),i(!1)},className:`w-full flex items-center gap-3.5 p-3 rounded-2xl transition-all ${d===o.MethodName?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-300 hover:bg-white/5"}`,children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gray-900 border-2 border-white/10 p-1.5 shadow-sm flex-shrink-0 flex items-center justify-center",children:e.jsx("img",{src:y(o.LogosURL),className:"w-full h-full object-contain",alt:""})}),e.jsxs("div",{className:"text-left min-w-0 flex-grow",children:[e.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:o.MethodName}),e.jsx("div",{className:"flex items-center gap-1.5 mt-1",children:e.jsx("span",{className:`text-[8px] px-1.5 py-0.5 rounded-md font-black uppercase tracking-tighter ${d===o.MethodName?"bg-white/20 text-white":"bg-blue-500/10 text-blue-400"}`,children:o.RequireDriverSelection?"Driver Selection Req":"Standard Service"})})]})]},o.MethodName)):e.jsx("div",{className:"p-6 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"រកមិនឃើញសេវាដឹកជញ្ជូនទេ"})})})]})},ne=({orders:n,onEdit:d,showActions:f,visibleColumns:w,selectedIds:c=new Set,onToggleSelect:i,onToggleSelectAll:g})=>{const{appData:p,refreshData:b,previewImage:x}=l.useContext(X),[N,o]=l.useState(null),[C,I]=l.useState(new Set),[v,D]=l.useState(n);l.useEffect(()=>{D(n)},[n]);const a=t=>t==="actions"&&!f?!1:!w||w.has(t),A=n.length>0&&n.every(t=>c.has(t["Order ID"])),P=async(t,r)=>{const h=!r;D(u=>u.map(m=>m["Order ID"]===t?{...m,IsVerified:h}:m)),I(u=>new Set(u).add(t));try{if(!(await fetch(`${Z}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"AllOrders",primaryKey:{"Order ID":t},newData:{IsVerified:h}})})).ok)throw new Error("Failed to save");b()}catch(u){console.error("Verification toggle failed:",u),D(m=>m.map(k=>k["Order ID"]===t?{...k,IsVerified:r}:k)),alert("រក្សាទុកស្ថានភាពមិនបានសម្រេច!")}finally{I(u=>{const m=new Set(u);return m.delete(t),m})}},M=t=>{let r=(t||"").replace(/[^0-9]/g,"");return r.length>0&&(r="0"+r.replace(/^0+/,"")),r},O=t=>{navigator.clipboard.writeText(t),o(t),setTimeout(()=>o(null),2e3)},B=t=>{if(!t)return;const r=M(t["Customer Phone"]),h=new URLSearchParams({id:t["Order ID"],name:t["Customer Name"]||"",phone:r,location:t.Location||"",address:t["Address Details"]||"",total:(t["Grand Total"]||0).toString(),payment:t["Payment Status"]||"Unpaid",shipping:t["Internal Shipping Method"]||"N/A",page:t.Page||"",user:t.User||""}),m=(t.Note||"").match(/https?:\/\/(www\.)?(google\.com\/maps|maps\.app\.goo\.gl)\/[^\s]+/);m&&h.set("map",m[0]),window.open(`${Y}?${h.toString()}`,"_blank")},V=t=>{if(!t||!p.phoneCarriers)return null;const h=t.replace(/\s/g,"").substring(0,3),u=p.phoneCarriers.find(m=>m.Prefixes.split(",").map(k=>k.trim()).includes(h));return u?y(u.CarrierLogoURL):null},s=t=>{if(!t||!p.shippingMethods)return null;const r=p.shippingMethods.find(h=>h.MethodName===t);return r?y(r.LogosURL):null};return e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsxs("div",{className:"flex-grow space-y-4",children:[e.jsx("div",{className:"hidden md:block page-card !p-0 shadow-2xl border-gray-700/50 min-h-[1500px] overflow-visible",children:e.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800/80 border-b border-gray-700",children:[g&&e.jsx("th",{className:"px-4 py-4 w-12 text-center",children:e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-600 bg-gray-900 text-blue-500 cursor-pointer",checked:A,onChange:()=>g(n.map(t=>t["Order ID"]))})}),a("index")&&e.jsx("th",{className:"px-4 py-4 text-xs font-black uppercase tracking-wider text-center text-gray-400 w-12",children:"#"}),a("orderId")&&e.jsx("th",{className:"px-2 py-4 text-xs font-black uppercase tracking-wider text-center text-gray-400 w-16",children:"ID"}),a("customerName")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-44",children:"ឈ្មោះអតិថិជន"}),a("productInfo")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-36",children:"ព័ត៌មាន Product"}),a("location")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-48",children:"ទីតាំង"}),a("pageInfo")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-40",children:"Page"}),a("total")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-28",children:"សរុបទឹកប្រាក់"}),a("shippingService")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-44",children:"សេវាដឹក"}),a("shippingCost")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-24",children:"តម្លៃដឹកដើម"}),a("status")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-28",children:"ស្ថានភាព"}),a("date")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-32",children:"កាលបរិច្ឆេទ"}),a("print")&&e.jsx("th",{className:"px-4 py-4 text-xs font-black uppercase tracking-wider text-center text-gray-400 w-16",children:"ព្រីន"}),a("actions")&&e.jsx("th",{className:"px-4 py-4 text-xs font-black uppercase tracking-wider text-center text-gray-400 w-24",children:"សកម្មភាព"}),a("check")&&e.jsx("th",{className:"px-4 py-4 text-xs font-black uppercase tracking-wider text-center text-emerald-500 w-16",children:"Verified"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700/50",children:v.map((t,r)=>{var z;const h=(z=p.pages)==null?void 0:z.find(j=>j.PageName===t.Page),u=h?y(h.PageLogoURL):"",m=M(t["Customer Phone"]),k=V(m),R=N===t["Order ID"],_=s(t["Internal Shipping Method"]),S=t["Order ID"],$=t.IsVerified===!0||String(t.IsVerified).toUpperCase()==="TRUE",W=C.has(S),E=c.has(S),L=r>v.length-3&&v.length>4,H=L?"bottom-full mb-3":"top-full mt-3",U=L?"-bottom-2 border-r border-b":"-top-2 border-t border-l";return e.jsxs("tr",{className:`${$?"bg-emerald-500/5":E?"bg-blue-500/10":"hover:bg-gray-700/20"} transition-all group relative`,children:[i&&e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-600 bg-gray-900 text-blue-500 cursor-pointer",checked:E,onChange:()=>i(S)})}),a("index")&&e.jsx("td",{className:"px-4 py-4 text-center text-xs font-bold text-gray-500",children:r+1}),a("orderId")&&e.jsx("td",{className:"px-2 py-4 text-center",children:e.jsx("button",{onClick:()=>O(t["Order ID"]),className:`p-2 rounded-lg transition-all border ${R?"bg-green-500/20 border-green-500/40 text-green-400":"bg-gray-800 border-gray-700 text-gray-400 hover:text-blue-400"}`,children:e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:R?"✓":"ID"})})}),a("customerName")&&e.jsxs("td",{className:"px-5 py-4",children:[e.jsx("div",{className:"font-bold text-gray-100 truncate mb-1",children:t["Customer Name"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[k&&e.jsx("img",{src:k,className:"w-4 h-4 object-contain",alt:"carrier"}),e.jsx("div",{className:"text-[11px] text-gray-400 font-mono tracking-tighter",children:m})]})]}),a("productInfo")&&e.jsx("td",{className:"px-5 py-4 relative overflow-visible",children:e.jsxs("div",{className:"group/prod flex flex-col gap-1 cursor-help",children:[t.Products.slice(0,2).map((j,T)=>e.jsxs("div",{className:"text-[11px] bg-gray-900/50 p-1.5 rounded border border-white/5 flex flex-col",children:[e.jsx("span",{className:"font-black text-gray-200 line-clamp-1",children:j.name}),e.jsx("div",{className:"flex justify-between items-center mt-0.5",children:e.jsxs("span",{className:"text-blue-400 font-bold",children:["Qty: ",j.quantity]})})]},T)),t.Products.length>2&&e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold ml-1",children:["+ ",t.Products.length-2," items more..."]}),e.jsxs("div",{className:`invisible group-hover/prod:visible opacity-0 group-hover/prod:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${H} w-80 p-5 bg-gray-800 border border-gray-600 rounded-[2rem] shadow-[0_25px_60px_rgba(0,0,0,0.7)] transition-all duration-300 pointer-events-none`,children:[e.jsx("p",{className:"text-[10px] font-black text-blue-400 uppercase tracking-[0.2em] mb-4 border-b border-white/5 pb-3",children:"ព័ត៌មានទំនិញពេញលេញ"}),e.jsx("div",{className:"space-y-3 max-h-[350px] overflow-y-auto custom-scrollbar pr-1",children:t.Products.map((j,T)=>{var K;const F=(K=p.products)==null?void 0:K.find(q=>q.ProductName===j.name),J=j.image||(F==null?void 0:F.ImageURL)||"";return e.jsxs("div",{className:"flex items-center gap-4 text-left p-2 bg-black/20 rounded-2xl border border-white/5",children:[e.jsx("div",{className:"w-14 h-14 flex-shrink-0 bg-gray-900 rounded-xl border border-gray-700 overflow-hidden shadow-inner",children:e.jsx("img",{src:y(J),className:"w-full h-full object-cover",alt:j.name,onError:q=>q.currentTarget.src="https://placehold.co/100x100/1f2937/4b5563?text=N/A"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[12px] font-black text-white leading-tight mb-1 line-clamp-2",children:j.name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/10",children:["x",j.quantity]}),j.colorInfo&&e.jsxs("span",{className:"text-[9px] text-purple-400 font-bold",children:["ពណ៌៖ ",j.colorInfo]})]})]})]},T)})}),e.jsx("div",{className:`absolute ${U} left-1/2 -translate-x-1/2 w-5 h-5 bg-gray-800 border-gray-600 rotate-45`})]})]})}),a("location")&&e.jsx("td",{className:"px-5 py-4 relative overflow-visible",children:e.jsxs("div",{className:"group/loc cursor-help",children:[e.jsx("div",{className:"text-[13px] font-black text-gray-100 leading-tight",children:t.Location}),e.jsx("div",{className:"text-[11px] font-bold text-gray-500 mt-1 line-clamp-1",children:t["Address Details"]}),e.jsxs("div",{className:`invisible group-hover/loc:visible opacity-0 group-hover/loc:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${H} w-72 p-5 bg-gray-800 border border-gray-600 rounded-[2rem] shadow-[0_25px_60px_rgba(0,0,0,0.7)] transition-all duration-300 pointer-events-none`,children:[e.jsx("p",{className:"text-[10px] font-black text-blue-400 uppercase tracking-[0.2em] mb-3 border-b border-white/5 pb-2",children:"ទីតាំង និងអាសយដ្ឋាន"}),e.jsxs("div",{className:"space-y-3 text-left",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase",children:"Province / City"}),e.jsx("p",{className:"text-sm font-black text-white",children:t.Location})]}),e.jsxs("div",{className:"bg-black/20 p-3 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase block mb-1",children:"Details"}),e.jsx("p",{className:"text-[12px] text-gray-300 leading-relaxed font-medium",children:t["Address Details"]||"មិនមានអាសយដ្ឋានលម្អិត"})]})]}),e.jsx("div",{className:`absolute ${U} left-1/2 -translate-x-1/2 w-5 h-5 bg-gray-800 border-gray-600 rotate-45`})]})]})}),a("pageInfo")&&e.jsx("td",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[u?e.jsx("img",{src:u,className:"w-7 h-7 rounded-full border border-gray-700 shadow-sm object-cover",alt:"logo"}):e.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-[7px] text-gray-600 font-bold",children:"Log"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-[13px] font-bold text-gray-200 block truncate",children:t.Page}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest",children:t.Team})]})]})}),a("total")&&e.jsxs("td",{className:"px-5 py-4 font-black text-blue-400 text-base tracking-tight",children:["$",t["Grand Total"].toFixed(2)]}),a("shippingService")&&e.jsx("td",{className:"px-5 py-4 text-[11px] text-yellow-500/80 font-bold uppercase",children:e.jsxs("div",{className:"flex items-center gap-2",children:[_&&e.jsx("img",{src:_,className:"w-5 h-5 rounded-full object-contain",alt:"shipping"}),e.jsx("span",{className:"truncate",children:t["Internal Shipping Method"]||"-"})]})}),a("shippingCost")&&e.jsxs("td",{className:"px-5 py-4 text-[11px] text-orange-400 font-mono font-bold",children:["$",(Number(t["Internal Cost"])||0).toFixed(2)]}),a("status")&&e.jsx("td",{className:"px-5 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider shadow-sm border ${t["Payment Status"]==="Paid"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:t["Payment Status"]})}),a("date")&&e.jsx("td",{className:"px-5 py-4 text-[10px] text-gray-500 font-bold",children:new Date(t.Timestamp).toLocaleDateString("km-KH")}),a("print")&&e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("button",{onClick:()=>B(t),className:"text-emerald-400 hover:text-white bg-emerald-400/5 hover:bg-emerald-600 p-2 rounded-lg transition-all border border-emerald-400/20 shadow-sm active:scale-90",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})}),a("actions")&&e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("button",{onClick:()=>d&&d(t),className:"text-blue-400 hover:text-white bg-blue-400/5 hover:bg-blue-600 px-4 py-1.5 rounded-lg text-xs font-black transition-all border border-blue-400/20 shadow-sm active:scale-95",children:"Edit"})}),a("check")&&e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("input",{type:"checkbox",checked:$,onChange:()=>P(S,$),className:`h-6 w-6 rounded border-gray-600 bg-gray-800 text-emerald-500 focus:ring-emerald-500/20 cursor-pointer transition-all active:scale-150 ${W?"opacity-30":"hover:scale-110"}`}),W&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx(G,{size:"sm"})})]})})]},S)})})]})}),e.jsx("div",{className:"md:hidden space-y-4 min-h-[1200px] pb-64",children:v.map((t,r)=>{var E;const h=(E=p.pages)==null?void 0:E.find(L=>L.PageName===t.Page),u=h?y(h.PageLogoURL):"",m=M(t["Customer Phone"]),k=V(m),R=t.IsVerified===!0||String(t.IsVerified).toUpperCase()==="TRUE",_=C.has(t["Order ID"]),S=c.has(t["Order ID"]),$=s(t["Internal Shipping Method"]),W=N===t["Order ID"];return e.jsxs("div",{className:`bg-gray-800/40 border ${S?"border-blue-500 shadow-blue-500/10":R?"border-emerald-500/50":"border-gray-700"} rounded-[2rem] p-5 shadow-lg space-y-4 animate-fade-in relative`,children:[i&&e.jsx("div",{className:"absolute top-5 left-5 z-10",children:e.jsx("input",{type:"checkbox",className:"h-6 w-6 rounded-lg border-gray-600 bg-gray-900 text-blue-500 focus:ring-blue-500/20 cursor-pointer",checked:S,onChange:()=>i(t["Order ID"])})}),e.jsxs("div",{className:`flex justify-between items-start ${i?"pl-10":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 border border-gray-700 flex items-center justify-center overflow-hidden shadow-inner",children:u?e.jsx("img",{src:u,className:"w-full h-full object-cover",alt:"logo"}):e.jsx("span",{className:"text-[10px] font-black text-gray-500",children:"Log"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[15px] font-black text-white leading-none",children:t["Customer Name"]}),e.jsxs("p",{className:"text-[10px] text-gray-500 uppercase font-black mt-1.5",children:[t.Page," (",t.Team,")"]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("button",{onClick:()=>O(t["Order ID"]),className:`px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest border transition-all ${W?"bg-green-600 text-white border-green-500":"bg-gray-900 text-gray-400 border-gray-700"}`,children:N===t["Order ID"]?"Copied":t["Order ID"].substring(0,8)}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-black uppercase border ${t["Payment Status"]==="Paid"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:t["Payment Status"]})]})]}),a("productInfo")&&t.Products&&t.Products.length>0&&e.jsxs("div",{className:"bg-black/20 rounded-[1.5rem] p-3 border border-white/5 space-y-2",children:[e.jsxs("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1 ml-1 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"ទំនិញដែលបានកម្មង់"]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:t.Products.map((L,H)=>{var j;const U=(j=p.products)==null?void 0:j.find(T=>T.ProductName===L.name),z=L.image||(U==null?void 0:U.ImageURL)||"";return e.jsxs("div",{className:"flex items-center gap-3 bg-gray-900/40 p-2 rounded-xl border border-white/5",children:[e.jsx("div",{className:"w-10 h-10 flex-shrink-0 bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",onClick:()=>x(y(z)),children:e.jsx("img",{src:y(z),className:"w-full h-full object-cover",alt:""})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsx("p",{className:"text-[12px] font-bold text-gray-200 truncate leading-tight",children:L.name}),e.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-1.5 rounded-lg flex-shrink-0",children:["x",L.quantity]})]}),L.colorInfo&&e.jsxs("p",{className:"text-[9px] text-gray-500 italic mt-1 truncate",children:["ពណ៌៖ ",L.colorInfo]})]})]},H)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-[12px]",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-gray-500 font-black uppercase text-[9px] tracking-widest",children:"លេខទូរស័ព្ទ"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[k&&e.jsx("img",{src:k,className:"w-4 h-4 object-contain",alt:""}),e.jsx("span",{className:"text-white font-mono font-bold tracking-tight",children:m})]})]}),e.jsxs("div",{className:"space-y-1 text-right",children:[e.jsx("p",{className:"text-gray-500 font-black uppercase text-[9px] tracking-widest",children:"សរុបទឹកប្រាក់"}),e.jsxs("p",{className:"text-blue-400 font-black text-base",children:["$",t["Grand Total"].toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-gray-500 font-black uppercase text-[9px] tracking-widest",children:"ទីតាំង"}),e.jsx("p",{className:"text-white font-bold truncate max-w-[140px]",children:t.Location})]}),e.jsxs("div",{className:"space-y-1 text-right",children:[e.jsx("p",{className:"text-gray-500 font-black uppercase text-[9px] tracking-widest",children:"ដឹកជញ្ជូន"}),e.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[$&&e.jsx("img",{src:$,className:"w-3.5 h-3.5 object-contain",alt:""}),e.jsx("span",{className:"text-white truncate max-w-[100px] font-bold",children:t["Internal Shipping Method"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a("actions")&&e.jsx("button",{onClick:()=>d&&d(t),className:"p-3 bg-blue-600/10 text-blue-400 rounded-2xl border border-blue-500/20 active:scale-90 transition-all",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),a("print")&&e.jsx("button",{onClick:()=>B(t),className:"p-3 bg-emerald-600/10 text-emerald-400 rounded-2xl border border-emerald-500/20 active:scale-90 transition-all",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-[10px] text-gray-500 font-bold italic",children:new Date(t.Timestamp).toLocaleDateString("km-KH")}),a("check")&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:()=>P(t["Order ID"],R),className:`h-9 w-9 rounded-xl border-gray-600 bg-gray-900 text-emerald-500 focus:ring-emerald-500/20 transition-all ${_?"opacity-20":"active:scale-125"}`}),_&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(G,{size:"sm"})})]})]})]})]},t["Order ID"])})})]}),e.jsx("div",{className:"h-64 md:h-[400px] w-full pointer-events-none opacity-0 shrink-0","aria-hidden":"true"})]})};export{ne as O,ae as S,re as a};
