import{r as l,A as Q,j as e,M as Y,c as _,S as G,W as F,f as Z,L as ee}from"./index-C7cHpj5c.js";import{c as te}from"./imageCompressor-D5vYYzIg.js";const ae=({product:a,isOpen:n,onClose:g,onConfirm:u,showTagEditor:d=!0})=>{const{refreshData:i}=l.useContext(Q),[h,x]=l.useState(""),[m,p]=l.useState(window.innerWidth<768),[y,c]=l.useState(!1),[j,C]=l.useState(!1),[b,S]=l.useState(null),r=l.useRef(null);l.useEffect(()=>{const s=()=>p(window.innerWidth<768);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),l.useEffect(()=>{a&&n&&(x(a.Tags||""),S(a.ImageURL))},[a,n]);const f=l.useMemo(()=>{if(!a)return!1;const s=b||a.ImageURL;return s&&!s.includes("placehold.co")&&!s.includes("text=N/A")},[a,b]),P=s=>{if(s.key==="Enter"){s.preventDefault();const o=h.trim();o&&!o.endsWith(",")&&x(o+", ")}},z=async()=>{if(a){C(!0);try{const s=h.split(",").map(o=>o.trim()).filter(o=>o!=="").join(", ");if(s!==(a.Tags||"")){if(!(await fetch(`${F}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:a.ProductName},newData:{Tags:s}})})).ok)throw new Error("Failed to update product tags");await i(),u(a.ProductName,s)}else u(a.ProductName,s)}catch(s){console.error(s),alert(`Save failed: ${s.message}`),u(a.ProductName,h)}finally{C(!1)}}},R=async s=>{var N;const o=(N=s.target.files)==null?void 0:N[0];if(!(!o||!a)){c(!0);try{const t=await te(o,.7,1024),k=await Z(t),L=await fetch(`${F}/api/upload-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileData:k,fileName:o.name,mimeType:t.type})}),w=await L.json();if(!L.ok||w.status!=="success")throw new Error(w.message);const v=w.url;await fetch(`${F}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:a.ProductName},newData:{ImageURL:v}})}),S(v),await i()}catch(t){alert(`Update Error: ${t.message}`)}finally{c(!1),r.current&&(r.current.value="")}}};return a?e.jsx(Y,{isOpen:n,onClose:g,maxWidth:m?"max-w-[98vw]":"max-w-4xl",children:e.jsxs("div",{className:"bg-[#020617] rounded-[3.5rem] overflow-hidden shadow-[0_60px_150px_rgba(0,0,0,0.9)] border border-white/10 relative",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-blue-500/50 to-transparent"}),e.jsx("div",{className:"absolute -top-1/4 -right-1/4 w-[100%] h-[100%] bg-[radial-gradient(circle_at_center,rgba(59,130,246,0.12)_0%,transparent_60%)] animate-pulse-slow"})]}),e.jsxs("div",{className:`relative z-10 flex flex-col ${m?"":"md:flex-row"} min-h-[550px]`,children:[e.jsx("div",{className:`${m?"w-full h-80":"w-[45%]"} p-8 sm:p-12 flex items-center justify-center relative bg-gradient-to-br from-white/[0.03] to-transparent`,children:e.jsxs("div",{className:`relative w-full aspect-square max-w-[300px] group/card cursor-pointer transition-all duration-700
                            ${f?"hover:scale-[1.03]":"hover:scale-105 active:scale-95"}`,onClick:()=>{var s;return(s=r.current)==null?void 0:s.click()},children:[e.jsx("div",{className:`absolute inset-0 rounded-[3rem] border-2 transition-all duration-500 shadow-2xl
                                ${f?"border-white/10 bg-white/5 backdrop-blur-2xl":"border-dashed border-blue-500/40 bg-blue-500/5 animate-glow-pulse"}`}),f?e.jsx("img",{src:_(b||a.ImageURL),className:`relative z-10 w-full h-full object-contain p-5 rounded-[3rem] transform transition-all duration-700 ${y?"opacity-30 blur-md scale-90":"group-hover/card:scale-105"}`,alt:a.ProductName}):e.jsxs("div",{className:"relative z-10 h-full w-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 scale-[3.5] bg-blue-400/20 rounded-full animate-ping-ultra"}),e.jsx("div",{className:"absolute inset-0 scale-[2] bg-blue-500/30 rounded-full animate-ping-slow"}),e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-[2rem] flex items-center justify-center border-4 border-white/20 shadow-[0_0_50px_rgba(59,130,246,0.6)] relative z-20",children:e.jsxs("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z",strokeWidth:"2.5"}),e.jsx("path",{d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z",strokeWidth:"2.5"})]})}),e.jsx("div",{className:"absolute -bottom-4 -right-4 z-30 animate-cyber-tap",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -top-2 -left-2 w-10 h-10 bg-white/20 rounded-full blur-xl animate-pulse"}),e.jsx("svg",{className:"w-16 h-16 text-white filter drop-shadow-[0_0_10px_rgba(59,130,246,1)]",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18,11.5L13.1,6.6C12.7,6.2,12.1,6,11.5,6s-1.2,0.2-1.6,0.6L8,8.5v4.9c0,0.1,0.1,0.2,0.2,0.2s0.2-0.1,0.2-0.2V9.1 c0-0.4,0.3-0.7,0.7-0.7s0.7,0.3,0.7,0.7v3.5c0,0.1,0.1,0.2,0.2,0.2s0.2-0.1,0.2-0.2V9.8c0-0.4,0.3-0.7,0.7-0.7s0.7,0.3,0.7,0.7v2.8 c0,0.1,0.1,0.2,0.2,0.2s0.2-0.1,0.2-0.2v-1.4c0-0.4,0.3-0.7,0.7-0.7s0.7,0.3,0.7,0.7V11.5z M18.5,17c0,1.9-1.6,3.5-3.5,3.5h-4.5 c-1,0-1.9-0.4-2.5-1.1L5,16.5c-0.3-0.3-0.3-0.8,0-1.1s0.8-0.3,1.1,0l2,2.1c0.1,0.1,0.2,0,0.2-0.1V8.5C8.3,8.2,8.6,8,8.9,8s0.7,0.3,0.7,0.7 v6.5c0,0.1,0.1,0.2,0.2,0.2s0.2-0.1,0.2-0.2v-2.3c0-0.4,0.3-0.7,0.7-0.7s0.7,0.3,0.7,0.7v2.3c0,0.1,0.1,0.2,0.2,0.2s0.2-0.1,0.2-0.2v-1.6 c0-0.4,0.3-0.7,0.7-0.7s0.7,0.3,0.7,0.7v1.6c0,0.1,0.1,0.2,0.2,0.2s0.2-0.1,0.2-0.2v-0.9c0-0.4,0.3-0.7,0.7-0.7s0.7,0.3,0.7,0.7V17z"})})]})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[12px] font-black text-blue-400 uppercase tracking-[0.5em] mb-1 drop-shadow-lg",children:"Missing Data"}),e.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest opacity-60",children:"Tap area to upload"})]})]}),y&&e.jsxs("div",{className:"absolute inset-0 z-40 flex flex-col items-center justify-center bg-black/70 rounded-[3rem] backdrop-blur-lg border border-blue-500/50",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500/20 border-t-blue-500 rounded-full animate-spin"})}),e.jsx("span",{className:"text-[11px] font-black text-blue-400 uppercase mt-5 animate-pulse tracking-[0.3em]",children:"Synching..."})]}),e.jsx("div",{className:"absolute top-6 right-6 z-20",children:e.jsxs("div",{className:"bg-[#10b981] text-white font-black px-5 py-2 rounded-2xl shadow-[0_10px_30px_rgba(16,185,129,0.4)] border border-white/20 text-xl tracking-tighter sm:text-2xl italic",children:["$",a.Price.toFixed(2)]})})]})}),e.jsxs("div",{className:`${m?"w-full":"w-[55%]"} p-8 sm:p-14 flex flex-col justify-between relative`,children:[e.jsxs("div",{className:"space-y-10 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-1.5 bg-blue-500/10 rounded-full border border-blue-500/20 mb-6",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 animate-ping"}),e.jsx("span",{className:"text-[10px] font-black text-blue-400 uppercase tracking-[0.2em]",children:"Matrix Lock Engaged"})]}),e.jsx("h3",{className:"text-3xl sm:text-6xl font-black text-white leading-tight break-words italic tracking-tighter uppercase drop-shadow-2xl",children:a.ProductName}),a.Barcode&&e.jsxs("div",{className:"flex items-center gap-2.5 text-blue-500/50 font-mono text-[11px] mt-4 uppercase font-black tracking-widest bg-white/5 w-max px-4 py-1.5 rounded-xl border border-white/5",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z",strokeWidth:"2.5"})}),a.Barcode]})]}),!f&&e.jsxs("div",{className:"p-6 bg-gradient-to-r from-amber-500/10 to-transparent border-l-4 border-amber-500 rounded-r-3xl flex items-start gap-5 animate-fade-in-down",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-500 text-gray-900 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-[0_0_20px_rgba(245,158,11,0.3)]",children:e.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:"2.5"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-black text-amber-500 uppercase tracking-widest mb-1",children:"Visual Optimization Recommended"}),e.jsxs("p",{className:"text-[12px] text-gray-300 font-bold leading-relaxed",children:["ការបន្ថែមរូបភាពជួយឱ្យ ",e.jsx("span",{className:"text-white",children:"Telegram Bot"})," ផ្ញើសារបានកាន់តែទាក់ទាញ និងបង្កើនទំនុកចិត្តដល់អតិថិជន។"]})]})]}),d&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("label",{className:"text-[11px] font-black text-gray-500 uppercase tracking-[0.3em] flex items-center gap-3 ml-1",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z",strokeWidth:"3"})}),"System Categories"]}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",value:h,onChange:s=>x(s.target.value),onKeyDown:P,className:"form-input !py-5 !px-8 bg-black/60 border-white/10 focus:border-blue-500 focus:ring-[10px] focus:ring-blue-500/5 rounded-[2rem] font-bold text-gray-100 text-base shadow-2xl transition-all",placeholder:"ឧ. Promotion, Sale, 2024..."}),e.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-[10px] font-black text-blue-500 bg-blue-500/10 px-3 py-1.5 rounded-xl border border-blue-500/20 opacity-0 group-focus-within:opacity-100 transition-opacity",children:"PRESS ENTER"})]}),e.jsxs("p",{className:"text-[11px] text-gray-500 font-bold italic px-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-blue-500"}),"ប្រើប្រាស់ ",e.jsx("span",{className:"text-blue-400 not-italic",children:"Tags"})," សម្រាប់ការបែងចែកក្រុមដោយស្វ័យប្រវត្តិ។"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 mt-14 relative z-10",children:[e.jsx("button",{onClick:g,className:"order-2 sm:order-1 flex-1 py-5 bg-transparent border-2 border-white/10 hover:bg-white/5 hover:border-white/20 text-gray-400 hover:text-white font-black rounded-3xl uppercase text-[12px] tracking-[0.3em] transition-all active:scale-95 disabled:opacity-50",children:"Cancel Selection"}),e.jsxs("button",{onClick:z,disabled:j,className:"order-1 sm:order-2 flex-[2] py-5 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-black rounded-3xl uppercase text-xs sm:text-sm tracking-[0.4em] shadow-[0_20px_40px_rgba(37,99,235,0.4)] hover:shadow-[0_25px_60px_rgba(37,99,235,0.6)] hover:-translate-y-1 transition-all active:scale-95 flex items-center justify-center gap-4 disabled:opacity-80 group relative overflow-hidden border-t border-white/20",children:[e.jsx("div",{className:"absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"}),j?e.jsx(G,{size:"sm"}):"Confirm Asset",!j&&e.jsx("div",{className:"bg-white/20 p-2 rounded-xl group-hover:bg-white/30 transition-colors",children:e.jsx("svg",{className:"w-5 h-5 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M13 7l5 5-5 5M6 7l5 5-5 5"})})})]})]}),e.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-[radial-gradient(circle_at_bottom_right,rgba(59,130,246,0.1),transparent_70%)] pointer-events-none"})]})]}),e.jsx("input",{type:"file",ref:r,className:"hidden",accept:"image/*",onChange:R}),e.jsx("style",{children:`
                    @keyframes ping-ultra {
                        0% { transform: scale(1); opacity: 0.6; }
                        100% { transform: scale(5); opacity: 0; }
                    }
                    .animate-ping-ultra {
                        animation: ping-ultra 3s cubic-bezier(0, 0, 0.2, 1) infinite;
                    }
                    @keyframes glow-pulse {
                        0%, 100% { border-color: rgba(59, 130, 246, 0.2); box-shadow: 0 0 20px rgba(59, 130, 246, 0.05); }
                        50% { border-color: rgba(59, 130, 246, 0.6); box-shadow: 0 0 50px rgba(59, 130, 246, 0.2); }
                    }
                    .animate-glow-pulse {
                        animation: glow-pulse 3s infinite ease-in-out;
                    }
                    @keyframes cyber-tap {
                        0%, 100% { transform: translate(0, 0) scale(1) rotate(0deg); opacity: 1; }
                        50% { transform: translate(-8px, 8px) scale(0.8) rotate(-5deg); opacity: 0.8; }
                    }
                    .animate-cyber-tap {
                        animation: cyber-tap 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) infinite;
                    }
                `})]})}):null},se=(a,n)=>{if(!n||!a)return e.jsx("span",{children:a});const g=n.split(" ").filter(Boolean).map(d=>d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));if(g.length===0)return e.jsx("span",{children:a});const u=new RegExp(`(${g.join("|")})`,"gi");return e.jsx(e.Fragment,{children:a.split(u).map((d,i)=>u.test(d)&&d.trim()!==""?e.jsx("strong",{className:"text-yellow-300 bg-yellow-900/50 rounded-sm px-0.5",children:d},i):d)})},re=(a,n)=>{const g=(a.ProductName||"").toLowerCase(),u=(a.Barcode||"").toLowerCase(),d=`${g} ${u}`,i=n.toLowerCase().trim();if(!i)return 1;const h=i.split(" ").filter(Boolean);if(!h.every(p=>d.includes(p)))return 0;let m=10;return h.forEach(p=>{g.includes(p)&&(m+=20),u.includes(p)&&(m+=10)}),g.startsWith(i)&&(m+=500),m},ie=({products:a,selectedProductName:n,onSelect:g,showTagEditor:u=!0})=>{const[d,i]=l.useState(!1),[h,x]=l.useState(""),[m,p]=l.useState(0),[y,c]=l.useState(null),j=l.useRef(null),C=l.useRef(null);l.useEffect(()=>{x(n)},[n]),l.useEffect(()=>{const s=o=>{j.current&&!j.current.contains(o.target)&&(i(!1),x(n))};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[n]);const b=l.useMemo(()=>{const s=h||"";return s.trim()?a.map(o=>({product:o,score:re(o,s)})).filter(o=>o.score>0).sort((o,N)=>N.score-o.score||o.product.ProductName.localeCompare(N.product.ProductName)).map(o=>o.product):[]},[a,h]),S=l.useMemo(()=>{const s=h.trim();return s?!a.some(o=>o.ProductName.trim().toLowerCase()===s.toLowerCase()):!1},[h,a]),r=l.useMemo(()=>{const s=[...b];return S&&s.unshift({isAddNew:!0,ProductName:h.trim()}),s},[b,S,h]),f=l.useCallback((s,o)=>{var N;g(s,o),x(s),i(!1),c(null),p(0),(N=C.current)==null||N.blur()},[g]),P=s=>{s.isAddNew?f(s.ProductName):(c(s),i(!1))},z=l.useCallback(()=>{var s;g("",""),x(""),i(!0),p(0),(s=C.current)==null||s.focus()},[g]),R=s=>{var N;const o=r.length;if(o!==0)switch(s.key){case"ArrowDown":s.preventDefault(),d||i(!0),p(t=>(t+1)%o);break;case"ArrowUp":s.preventDefault(),d||i(!0),p(t=>(t-1+o)%o);break;case"Enter":if(s.preventDefault(),!d)return;m>-1&&r[m]&&P(r[m]);break;case"Escape":i(!1),x(n),(N=C.current)==null||N.blur();break}};return e.jsxs("div",{className:"relative",ref:j,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{ref:C,type:"text",className:"form-input !pr-16 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:"ស្វែងរកផលិតផល...",value:h,onChange:s=>{x(s.target.value),i(!0),p(0)},onFocus:()=>i(!0),onKeyDown:R}),e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[h&&e.jsx("button",{type:"button",onClick:z,className:"text-gray-500 hover:text-white text-2xl",children:"×"}),e.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),d&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden animate-fade-in-down max-h-80 overflow-y-auto custom-scrollbar",children:e.jsx("ul",{className:"p-2 space-y-1",children:r.length===0?e.jsx("li",{className:"p-4 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"រកមិនឃើញផលិតផលទេ"}):r.map((s,o)=>{if("isAddNew"in s&&s.isAddNew)return e.jsxs("li",{className:`p-3.5 rounded-2xl cursor-pointer flex items-center gap-4 transition-all ${m===o?"bg-blue-600 text-white":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>P(s),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center border border-blue-500/30",children:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"})})}),e.jsx("div",{className:"min-w-0",children:e.jsxs("p",{className:"font-black text-sm leading-tight",children:["បន្ថែមថ្មី៖ ",e.jsxs("span",{className:"text-yellow-400",children:['"',s.ProductName,'"']})]})})]},"add-new");const N=s;return e.jsxs("li",{className:`p-2.5 rounded-2xl cursor-pointer flex items-center gap-3 transition-all ${m===o?"bg-blue-600 text-white shadow-lg":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>P(N),children:[e.jsx("img",{src:_(N.ImageURL),className:"w-12 h-12 rounded-xl object-cover border border-white/10",alt:""}),e.jsxs("div",{className:"min-w-0 flex-grow",children:[e.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:se(N.ProductName,h)}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:e.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-md border border-blue-500/10",children:["$",N.Price.toFixed(2)]})})]})]},N.ProductName)})})}),e.jsx(ae,{product:y,isOpen:!!y,onClose:()=>c(null),onConfirm:f,showTagEditor:u})]})},oe=({methods:a,selectedMethodName:n,onSelect:g,placeholder:u="ជ្រើសរើសសេវាដឹកជញ្ជូន..."})=>{const[d,i]=l.useState(!1),[h,x]=l.useState(""),m=l.useRef(null);l.useEffect(()=>{const c=a.find(j=>j.MethodName===n);c&&x(c.MethodName)},[n,a]),l.useEffect(()=>{const c=j=>{if(m.current&&!m.current.contains(j.target)){i(!1);const C=a.find(b=>b.MethodName===n);x(C?C.MethodName:"")}};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[n,a]);const p=l.useMemo(()=>{if(!h.trim())return a;const c=h.toLowerCase();return a.filter(j=>j.MethodName.toLowerCase().includes(c))},[a,h]),y=a.find(c=>c.MethodName===n);return e.jsxs("div",{className:"relative w-full",ref:m,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",className:"form-input !pl-14 !pr-10 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:u,value:h,onChange:c=>{x(c.target.value),i(!0)},onFocus:()=>i(!0)}),e.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-8 h-8 rounded-xl bg-gray-800 overflow-hidden border border-white/5 flex items-center justify-center p-1 shadow-inner",children:y?e.jsx("img",{src:_(y.LogosURL),className:"w-full h-full object-contain",alt:""}):e.jsxs("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h8a1 1 0 001-1z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 16l4-4 4 4"})]})})}),e.jsx("div",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-gray-600 group-focus-within:text-blue-500 transition-colors",children:e.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${d?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 9l-7 7-7-7",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),d&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_60px_rgba(0,0,0,0.6)] overflow-hidden animate-fade-in-down",children:e.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar p-2.5 space-y-1.5",children:p.length>0?p.map(c=>e.jsxs("button",{type:"button",onClick:()=>{g(c),x(c.MethodName),i(!1)},className:`w-full flex items-center gap-3.5 p-3 rounded-2xl transition-all ${n===c.MethodName?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-300 hover:bg-white/5"}`,children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gray-900 border-2 border-white/10 p-1.5 shadow-sm flex-shrink-0 flex items-center justify-center",children:e.jsx("img",{src:_(c.LogosURL),className:"w-full h-full object-contain",alt:""})}),e.jsxs("div",{className:"text-left min-w-0 flex-grow",children:[e.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:c.MethodName}),e.jsx("div",{className:"flex items-center gap-1.5 mt-1",children:e.jsx("span",{className:`text-[8px] px-1.5 py-0.5 rounded-md font-black uppercase tracking-tighter ${n===c.MethodName?"bg-white/20 text-white":"bg-blue-500/10 text-blue-400"}`,children:c.RequireDriverSelection?"Driver Selection Req":"Standard Service"})})]})]},c.MethodName)):e.jsx("div",{className:"p-6 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"រកមិនឃើញសេវាដឹកជញ្ជូនទេ"})})})]})},ce=({provinces:a,selectedProvince:n,onSelect:g})=>{const[u,d]=l.useState(!1),[i,h]=l.useState(""),x=l.useRef(null);l.useEffect(()=>{h(n)},[n]),l.useEffect(()=>{const p=y=>{x.current&&!x.current.contains(y.target)&&(d(!1),h(n))};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[n]);const m=l.useMemo(()=>{const p=a.filter(b=>b.toLowerCase().includes(i.toLowerCase())),y=p.filter(b=>!b.includes("ភ្នំពេញ")&&!b.includes("កណ្ដាល")).sort((b,S)=>b.localeCompare(S,"km")),c=[],j=p.find(b=>b.includes("ភ្នំពេញ")),C=p.find(b=>b.includes("កណ្ដាល"));return j&&c.push(j),C&&c.push(C),[...c,...y]},[a,i]);return e.jsxs("div",{className:"relative w-full",ref:x,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",className:"form-input !pl-10 !py-3 rounded-xl border-gray-700 bg-gray-900 focus:border-blue-500/50 transition-all font-bold text-gray-200",placeholder:"ស្វែងរក ខេត្ត/រាជធានី...",value:i,onChange:p=>{h(p.target.value),d(!0)},onFocus:()=>d(!0)}),e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),u&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800 border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-down max-h-60 overflow-y-auto custom-scrollbar",children:m.length>0?m.map((p,y)=>e.jsx("button",{type:"button",onClick:()=>{g(p),h(p),d(!1)},className:`w-full text-left px-4 py-3 text-sm font-bold transition-colors border-b border-white/5 last:border-0 ${n===p?"bg-blue-600 text-white":"text-gray-300 hover:bg-white/5"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:p}),y<2&&i===""&&e.jsx("span",{className:"text-[8px] bg-white/10 px-1.5 py-0.5 rounded uppercase tracking-widest opacity-50",children:"Priority"})]})},p)):e.jsx("div",{className:"p-4 text-center text-xs text-gray-500",children:"រកមិនឃើញខេត្តនេះទេ"})})]})},de=({value:a,onChange:n,label:g="ចំនួន*",min:u=1,max:d=99})=>{var S;const i=l.useRef(null),[h,x]=l.useState(!1),m=()=>{const r=Math.min(d,a+1);n(r)},p=()=>{const r=Math.max(u,a-1);n(r)},y=r=>{const f=r.target.value;if(f===""){x(!0);return}const P=parseInt(f,10);isNaN(P)||(P<u||P>d?x(!0):(n(P),x(!1)))},c=()=>{if(h){const r=i.current;if(r&&r.value){let f=parseInt(r.value,10);isNaN(f)||f<u?f=u:f>d&&(f=d),n(f)}else n(u);x(!1)}},j=r=>{var f;r.key==="Enter"?(r.preventDefault(),c(),(f=i.current)==null||f.blur()):r.key==="ArrowUp"?(r.preventDefault(),m()):r.key==="ArrowDown"&&(r.preventDefault(),p())},C=()=>{x(!0)},b=h?((S=i.current)==null?void 0:S.value)||"":a;return e.jsxs("div",{className:"space-y-1.5 w-full",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:g}),e.jsxs("div",{className:"flex items-center bg-black/40 rounded-2xl border border-gray-700 h-12 w-full overflow-hidden focus-within:border-blue-500/50 transition-all focus-within:shadow-[0_0_20px_rgba(59,130,246,0.15)] ring-1 ring-white/5",children:[e.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${a<=u?"text-gray-600 cursor-not-allowed opacity-50":"text-gray-400 hover:text-white hover:bg-white/5 active:scale-90"}
                        transition-all border-r border-gray-700/50
                    `,onClick:p,disabled:a<=u,"aria-label":"ថយចំនួន",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M20 12H4"})})}),e.jsx("input",{ref:i,type:"number",inputMode:"numeric",value:b,onChange:y,onBlur:c,onFocus:C,onKeyDown:j,min:u,max:d,step:"1",className:"flex-1 h-full bg-transparent text-center text-white font-black text-base outline-none border-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:u.toString(),"aria-label":"ចំនួន"}),e.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${a>=d?"text-gray-600 cursor-not-allowed opacity-50":"text-blue-400 hover:text-white hover:bg-blue-600/10 active:scale-90"}
                        transition-all border-l border-gray-700/50
                    `,onClick:m,disabled:a>=d,"aria-label":"បន្ថែមចំនួន",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M12 4v16m8-8H4"})})})]}),e.jsxs("div",{className:"text-xs text-gray-500 px-1 flex justify-between",children:[e.jsxs("span",{children:["អប្បបរមា: ",u]}),e.jsxs("span",{children:["អតិបរមា: ",d]})]})]})},xe=({orders:a,onEdit:n,showActions:g,visibleColumns:u,selectedIds:d=new Set,onToggleSelect:i,onToggleSelectAll:h})=>{const{appData:x,refreshData:m,previewImage:p}=l.useContext(Q),[y,c]=l.useState(null),[j,C]=l.useState(new Set),[b,S]=l.useState(a);l.useEffect(()=>{S(a)},[a]);const r=t=>t==="actions"&&!g?!1:!u||u.has(t),f=a.length>0&&a.every(t=>d.has(t["Order ID"])),P=async(t,k)=>{const L=!k;S(w=>w.map(v=>v["Order ID"]===t?{...v,IsVerified:L}:v)),C(w=>new Set(w).add(t));try{if(!(await fetch(`${F}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"AllOrders",primaryKey:{"Order ID":t},newData:{IsVerified:L}})})).ok)throw new Error("Failed to save");m()}catch(w){console.error("Verification toggle failed:",w),S(v=>v.map(M=>M["Order ID"]===t?{...M,IsVerified:k}:M)),alert("រក្សាទុកស្ថានភាពមិនបានសម្រេច!")}finally{C(w=>{const v=new Set(w);return v.delete(t),v})}},z=t=>{let k=(t||"").replace(/[^0-9]/g,"");return k.length>0&&(k="0"+k.replace(/^0+/,"")),k},R=t=>{navigator.clipboard.writeText(t),c(t),setTimeout(()=>c(null),2e3)},s=t=>{if(!t)return;const k=z(t["Customer Phone"]),L=new URLSearchParams({id:t["Order ID"],name:t["Customer Name"]||"",phone:k,location:t.Location||"",address:t["Address Details"]||"",total:(t["Grand Total"]||0).toString(),payment:t["Payment Status"]||"Unpaid",shipping:t["Internal Shipping Method"]||"N/A",page:t.Page||"",user:t.User||""}),v=(t.Note||"").match(/https?:\/\/(www\.)?(google\.com\/maps|maps\.app\.goo\.gl)\/[^\s]+/);v&&L.set("map",v[0]),window.open(`${ee}?${L.toString()}`,"_blank")},o=t=>{if(!t||!x.phoneCarriers)return null;const L=t.replace(/\s/g,"").substring(0,3),w=x.phoneCarriers.find(v=>v.Prefixes.split(",").map(M=>M.trim()).includes(L));return w?_(w.CarrierLogoURL):null},N=t=>{if(!t||!x.shippingMethods)return null;const k=x.shippingMethods.find(L=>L.MethodName===t);return k?_(k.LogosURL):null};return e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsxs("div",{className:"flex-grow space-y-4",children:[e.jsx("div",{className:"hidden md:block page-card !p-0 shadow-2xl border-white/5 min-h-[1500px] overflow-visible bg-gray-900/60 backdrop-blur-3xl rounded-[2.5rem]",children:e.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800/80 border-b border-white/10",children:[h&&e.jsx("th",{className:"px-4 py-6 w-12 text-center",children:e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-600 bg-gray-900 text-blue-500 cursor-pointer focus:ring-blue-500/20",checked:f,onChange:()=>h(a.map(t=>t["Order ID"]))})}),r("index")&&e.jsx("th",{className:"px-4 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-center text-gray-500 w-12",children:"#"}),r("orderId")&&e.jsx("th",{className:"px-2 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-center text-gray-500 w-16",children:"Node ID"}),r("customerName")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-56",children:"Merchant/Client"}),r("productInfo")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-44",children:"Assets"}),r("location")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-52",children:"Geography"}),r("pageInfo")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-44",children:"Source Page"}),r("total")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32",children:"Valuation"}),r("shippingService")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-48",children:"Logistics"}),r("shippingCost")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-28",children:"Exp. Cost"}),r("status")&&e.jsx("th",{className:"px-6 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32",children:"Status"}),r("date")&&e.jsx("th",{className:"px-4 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-left text-gray-500 w-20",children:"Time"}),r("print")&&e.jsx("th",{className:"px-4 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-center text-gray-500 w-16",children:"P"}),r("actions")&&e.jsx("th",{className:"px-4 py-6 text-[10px] font-black uppercase tracking-[0.2em] text-center text-gray-500 w-24",children:"Command"}),r("check")&&e.jsx("th",{className:"px-2 py-6 text-[9px] font-normal uppercase tracking-[0.15em] text-center text-emerald-500/80 w-14",children:"VERIFIED"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:b.map((t,k)=>{var B;const L=(B=x.pages)==null?void 0:B.find(I=>I.PageName===t.Page),w=L?_(L.PageLogoURL):"",v=z(t["Customer Phone"]),M=o(v),$=y===t["Order ID"],U=N(t["Internal Shipping Method"]),T=t["Order ID"],E=t.IsVerified===!0||String(t.IsVerified).toUpperCase()==="TRUE",V=j.has(T),A=d.has(T),D=k>b.length-3&&b.length>4,H=D?"bottom-full mb-3":"top-full mt-3",O=D?"-bottom-2 border-r border-b":"-top-2 border-t border-l";return e.jsxs("tr",{className:`${E?"bg-emerald-500/[0.03]":A?"bg-blue-500/10":"hover:bg-white/[0.02]"} transition-all group relative`,children:[i&&e.jsx("td",{className:"px-4 py-5 text-center",children:e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-700 bg-gray-950 text-blue-500 cursor-pointer transition-all",checked:A,onChange:()=>i(T)})}),r("index")&&e.jsx("td",{className:"px-4 py-5 text-center text-[11px] font-bold text-gray-600",children:k+1}),r("orderId")&&e.jsx("td",{className:"px-2 py-5 text-center",children:e.jsx("button",{onClick:()=>R(t["Order ID"]),className:`p-2 rounded-xl transition-all border ${$?"bg-green-500/20 border-green-500/40 text-green-400":"bg-gray-800 border-white/5 text-gray-500 hover:text-blue-400 active:scale-90"}`,children:e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:$?"✓":"ID"})})}),r("customerName")&&e.jsxs("td",{className:"px-6 py-5",children:[e.jsx("div",{className:"text-[16px] font-black text-gray-100 truncate mb-1 leading-tight tracking-tight",children:t["Customer Name"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[M&&e.jsx("img",{src:M,className:"w-4 h-4 object-contain opacity-80",alt:"carrier"}),e.jsx("div",{className:"text-[13px] text-blue-400/80 font-mono font-black tracking-tighter",children:v})]})]}),r("productInfo")&&e.jsx("td",{className:"px-6 py-5 relative overflow-visible",children:e.jsxs("div",{className:"group/prod flex flex-col gap-1 cursor-help",children:[t.Products.slice(0,2).map((I,W)=>e.jsxs("div",{className:"text-[10px] bg-black/40 p-1.5 rounded-lg border border-white/5 flex flex-col",children:[e.jsx("span",{className:"font-bold text-gray-300 line-clamp-1",children:I.name}),e.jsxs("span",{className:"text-blue-400/80 font-black mt-0.5",children:["x",I.quantity]})]},W)),t.Products.length>2&&e.jsxs("p",{className:"text-[8px] text-gray-600 font-black ml-1 uppercase tracking-widest",children:["+ ",t.Products.length-2," items"]}),e.jsxs("div",{className:`invisible group-hover/prod:visible opacity-0 group-hover/prod:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${H} w-80 p-5 bg-[#1a2235] border border-white/10 rounded-[2.5rem] shadow-[0_40px_100px_rgba(0,0,0,0.8)] transition-all duration-300 pointer-events-none backdrop-blur-3xl`,children:[e.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-[0.3em] mb-4 border-b border-white/5 pb-3",children:"Operational Asset Data"}),e.jsx("div",{className:"space-y-3 max-h-[350px] overflow-y-auto custom-scrollbar pr-1",children:t.Products.map((I,W)=>{var J;const K=(J=x.products)==null?void 0:J.find(q=>q.ProductName===I.name),X=I.image||(K==null?void 0:K.ImageURL)||"";return e.jsxs("div",{className:"flex items-center gap-4 text-left p-2.5 bg-black/30 rounded-2xl border border-white/5",children:[e.jsx("div",{className:"w-14 h-14 flex-shrink-0 bg-gray-900 rounded-xl border border-gray-800 overflow-hidden shadow-inner",children:e.jsx("img",{src:_(X),className:"w-full h-full object-cover",alt:I.name,onError:q=>q.currentTarget.src="https://placehold.co/100x100/1f2937/4b5563?text=N/A"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[12px] font-black text-white leading-tight mb-1 line-clamp-2",children:I.name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2.5 py-0.5 rounded-lg border border-blue-500/10",children:["x",I.quantity]}),I.colorInfo&&e.jsxs("span",{className:"text-[9px] text-purple-400 font-bold uppercase",children:["Node: ",I.colorInfo]})]})]})]},W)})}),e.jsx("div",{className:`absolute ${O} left-1/2 -translate-x-1/2 w-5 h-5 bg-[#1a2235] border-white/10 rotate-45`})]})]})}),r("location")&&e.jsx("td",{className:"px-6 py-5 relative overflow-visible",children:e.jsxs("div",{className:"group/loc cursor-help",children:[e.jsx("div",{className:"text-[12px] font-black text-gray-200 leading-tight truncate",children:t.Location}),e.jsx("div",{className:"text-[10px] font-bold text-gray-600 mt-1 line-clamp-1",children:t["Address Details"]}),e.jsxs("div",{className:`invisible group-hover/loc:visible opacity-0 group-hover/loc:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${H} w-72 p-5 bg-[#1a2235] border border-white/10 rounded-[2.5rem] shadow-[0_40px_100px_rgba(0,0,0,0.8)] transition-all duration-300 pointer-events-none backdrop-blur-3xl`,children:[e.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-[0.3em] mb-3 border-b border-white/5 pb-2",children:"Geographic Assignment"}),e.jsxs("div",{className:"space-y-4 text-left",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[8px] font-black text-gray-600 uppercase tracking-widest",children:"Region Node"}),e.jsx("p",{className:"text-sm font-black text-white mt-0.5",children:t.Location})]}),e.jsxs("div",{className:"bg-black/30 p-3.5 rounded-2xl border border-white/5",children:[e.jsx("span",{className:"text-[8px] font-black text-gray-600 uppercase block mb-1.5 tracking-widest",children:"Local Matrix"}),e.jsx("p",{className:"text-[11px] text-gray-300 leading-relaxed font-bold",children:t["Address Details"]||"No precise location data"})]})]}),e.jsx("div",{className:`absolute ${O} left-1/2 -translate-x-1/2 w-5 h-5 bg-[#1a2235] border-white/10 rotate-45`})]})]})}),r("pageInfo")&&e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[w?e.jsx("img",{src:w,className:"w-8 h-8 rounded-full border border-white/10 shadow-sm object-cover",alt:"logo"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border border-white/5 flex items-center justify-center text-[7px] text-gray-600 font-bold uppercase",children:"Null"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-[12px] font-black text-gray-300 block truncate leading-none mb-1",children:t.Page}),e.jsx("span",{className:"text-[9px] text-gray-600 uppercase font-black tracking-widest",children:t.Team})]})]})}),r("total")&&e.jsxs("td",{className:"px-6 py-5 font-black text-blue-400 text-base tracking-tighter",children:["$",t["Grand Total"].toFixed(2)]}),r("shippingService")&&e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[U&&e.jsx("img",{src:U,className:"w-5 h-5 rounded-lg object-contain bg-gray-950 p-0.5 border border-white/5",alt:"shipping"}),e.jsx("span",{className:"text-[10px] text-orange-400/80 font-black uppercase truncate tracking-tight",children:t["Internal Shipping Method"]||"-"})]})}),r("shippingCost")&&e.jsxs("td",{className:"px-6 py-5 text-[11px] text-gray-500 font-mono font-black tracking-tighter",children:["$",(Number(t["Internal Cost"])||0).toFixed(2)]}),r("status")&&e.jsx("td",{className:"px-6 py-5",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border ${t["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:t["Payment Status"]})}),r("date")&&e.jsx("td",{className:"px-4 py-5 text-[10px] text-gray-500 font-bold italic opacity-60",children:new Date(t.Timestamp).toLocaleDateString("km-KH")}),r("print")&&e.jsx("td",{className:"px-4 py-5 text-center",children:e.jsx("button",{onClick:()=>s(t),className:"text-emerald-400/60 hover:text-white bg-emerald-400/5 hover:bg-emerald-600 p-2.5 rounded-xl transition-all border border-emerald-400/10 active:scale-90",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})}),r("actions")&&e.jsx("td",{className:"px-4 py-5 text-center",children:e.jsx("button",{onClick:()=>n&&n(t),className:"text-blue-400/80 hover:text-white bg-blue-400/5 hover:bg-blue-600 px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border border-blue-400/10 active:scale-95 shadow-md",children:"Edit"})}),r("check")&&e.jsx("td",{className:"px-2 py-5 text-center",children:e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:()=>P(T,E),className:`h-6 w-6 rounded-lg border-gray-700 bg-gray-950 text-emerald-500 focus:ring-emerald-500/10 transition-all ${V?"opacity-20":"hover:scale-110 active:scale-150 cursor-pointer"}`}),V&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx(G,{size:"sm"})})]})})]},T)})})]})}),e.jsx("div",{className:"md:hidden space-y-4 min-h-[1200px] pb-64",children:b.map((t,k)=>{var A;const L=(A=x.pages)==null?void 0:A.find(D=>D.PageName===t.Page),w=L?_(L.PageLogoURL):"",v=z(t["Customer Phone"]),M=o(v),$=t.IsVerified===!0||String(t.IsVerified).toUpperCase()==="TRUE",U=j.has(t["Order ID"]),T=d.has(t["Order ID"]),E=N(t["Internal Shipping Method"]),V=y===t["Order ID"];return e.jsxs("div",{className:`bg-[#0f172a]/60 backdrop-blur-2xl border ${T?"border-blue-500 shadow-[0_15px_30px_rgba(59,130,246,0.2)]":$?"border-emerald-500/40 shadow-[0_10px_30px_rgba(16,185,129,0.1)]":"border-white/5"} rounded-[2.2rem] p-5 shadow-2xl space-y-5 animate-fade-in relative overflow-hidden group`,children:[i&&e.jsx("div",{className:"absolute top-5 left-5 z-10",children:e.jsx("input",{type:"checkbox",className:"h-6 w-6 rounded-xl border-gray-700 bg-gray-950 text-blue-500 focus:ring-blue-500/10 cursor-pointer",checked:T,onChange:()=>i(t["Order ID"])})}),e.jsxs("div",{className:`flex justify-between items-start ${i?"pl-10":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3.5",children:[e.jsx("div",{className:"w-12 h-12 rounded-[1.2rem] bg-gray-950 border border-white/5 flex items-center justify-center overflow-hidden shadow-inner p-1",children:w?e.jsx("img",{src:w,className:"w-full h-full object-cover rounded-lg",alt:"logo"}):e.jsx("span",{className:"text-[10px] font-black text-gray-600",children:"Null"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[15px] font-black text-white leading-none tracking-tight",children:t["Customer Name"]}),e.jsxs("p",{className:"text-[10px] text-gray-600 uppercase font-black tracking-widest mt-1.5",children:[t.Page," | ",t.Team]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2.5",children:[e.jsx("button",{onClick:()=>R(t["Order ID"]),className:`px-3 py-1.5 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all ${V?"bg-emerald-600 text-white border-emerald-500":"bg-gray-900/50 text-gray-500 border-white/5"}`,children:V?"COPIED":t["Order ID"].substring(0,8)}),e.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-wider border ${t["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:t["Payment Status"]})]})]}),r("productInfo")&&t.Products&&t.Products.length>0&&e.jsxs("div",{className:"bg-black/30 rounded-[1.8rem] p-4 border border-white/5 space-y-3 shadow-inner",children:[e.jsxs("p",{className:"text-[9px] font-black text-gray-600 uppercase tracking-[0.2em] mb-2 ml-1 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-blue-500/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"Operational Assets"]}),e.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto custom-scrollbar",children:t.Products.map((D,H)=>{var I;const O=(I=x.products)==null?void 0:I.find(W=>W.ProductName===D.name),B=D.image||(O==null?void 0:O.ImageURL)||"";return e.jsxs("div",{className:"flex items-center gap-4 bg-[#1a2235]/40 p-2.5 rounded-2xl border border-white/5 hover:border-blue-500/20 transition-all",children:[e.jsx("div",{className:"w-10 h-10 flex-shrink-0 bg-gray-950 rounded-xl border border-white/5 overflow-hidden shadow-sm",onClick:()=>p(_(B)),children:e.jsx("img",{src:_(B),className:"w-full h-full object-cover",alt:""})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start gap-3",children:[e.jsx("p",{className:"text-[12px] font-black text-gray-200 truncate leading-tight uppercase tracking-tight",children:D.name}),e.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/10 flex-shrink-0 shadow-sm",children:["x",D.quantity]})]}),D.colorInfo&&e.jsxs("p",{className:"text-[9px] text-gray-600 font-bold mt-1.5 uppercase tracking-widest opacity-60",children:["Node: ",D.colorInfo]})]})]},H)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 px-1",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"text-gray-600 font-black uppercase text-[8px] tracking-[0.2em]",children:"Contact Node"}),e.jsxs("div",{className:"flex items-center gap-2",children:[M&&e.jsx("img",{src:M,className:"w-3.5 h-3.5 object-contain opacity-70",alt:""}),e.jsx("span",{className:"text-white font-mono font-black text-xs tracking-tight",children:v})]})]}),e.jsxs("div",{className:"space-y-1.5 text-right",children:[e.jsx("p",{className:"text-gray-600 font-black uppercase text-[8px] tracking-[0.2em]",children:"Transaction Total"}),e.jsxs("p",{className:"text-blue-400 font-black text-lg tracking-tighter",children:["$",t["Grand Total"].toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"text-gray-600 font-black uppercase text-[8px] tracking-[0.2em]",children:"Geographic Hub"}),e.jsx("p",{className:"text-gray-300 font-black text-[12px] truncate uppercase tracking-tight",children:t.Location})]}),e.jsxs("div",{className:"space-y-1.5 text-right",children:[e.jsx("p",{className:"text-gray-600 font-black uppercase text-[8px] tracking-[0.2em]",children:"Logistic Flow"}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[E&&e.jsx("img",{src:E,className:"w-3.5 h-3.5 object-contain bg-gray-950 p-0.5 rounded-md border border-white/5",alt:""}),e.jsx("span",{className:"text-orange-400/80 font-black text-[11px] uppercase truncate tracking-tight",children:t["Internal Shipping Method"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-5 border-t border-white/5 relative",children:[e.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[r("actions")&&e.jsx("button",{onClick:()=>n&&n(t),className:"p-3.5 bg-blue-600/10 text-blue-400 rounded-2xl border border-blue-500/20 active:scale-90 transition-all shadow-lg",children:e.jsx("svg",{className:"w-4.5 h-4.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r("print")&&e.jsx("button",{onClick:()=>s(t),className:"p-3.5 bg-emerald-600/10 text-emerald-400 rounded-2xl border border-emerald-500/20 active:scale-90 transition-all shadow-lg",children:e.jsx("svg",{className:"w-4.5 h-4.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v42 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})]}),e.jsxs("div",{className:"flex items-center gap-5 relative z-10",children:[e.jsx("span",{className:"text-[10px] text-gray-700 font-bold italic uppercase tracking-widest",children:new Date(t.Timestamp).toLocaleDateString("km-KH")}),r("check")&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:$,onChange:()=>P(t["Order ID"],$),className:`h-10 w-10 rounded-[1.2rem] border-gray-700 bg-gray-950 text-emerald-500 focus:ring-emerald-500/10 transition-all shadow-inner ${U?"opacity-20":"active:scale-110 cursor-pointer"}`}),U&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(G,{size:"sm"})})]})]}),e.jsx("div",{className:"absolute -right-10 -bottom-10 w-32 h-32 bg-blue-600/5 rounded-full blur-[40px] pointer-events-none"})]})]},t["Order ID"])})})]}),e.jsx("div",{className:"h-64 md:h-[400px] w-full pointer-events-none opacity-0 shrink-0","aria-hidden":"true"})]})};export{xe as O,ie as S,ce as a,de as b,oe as c};
