const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-PEJKaedr.js","assets/index-DzHlarFr.js","assets/index-BXlZ-H93.css","assets/imageCompressor-D5vYYzIg.js"])))=>i.map(i=>d[i]);
import{j as f,r as ve,S as Pr,c as st,_ as Pl,g as zh,b as Wh,A as mo,M as rc,W as ni,f as $h,L as Jh}from"./index-DzHlarFr.js";import{c as Yh}from"./imageCompressor-D5vYYzIg.js";const Zs=({label:t,value:e,icon:n,colorClass:r})=>f.jsxs("div",{className:"relative group overflow-hidden bg-gray-800/30 backdrop-blur-xl border border-white/5 p-6 rounded-[2rem] transition-all duration-500 hover:bg-gray-800/50 hover:border-white/10 hover:shadow-2xl",children:[f.jsxs("div",{className:"relative z-10 flex justify-between items-center gap-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-400 text-xs lg:text-sm font-black uppercase tracking-widest mb-1.5 transition-all",children:t}),f.jsx("h3",{className:"text-3xl lg:text-4xl 2xl:text-5xl font-black text-white tracking-tighter transition-all",children:e})]}),f.jsx("div",{className:`w-12 h-12 lg:w-16 lg:h-16 rounded-2xl bg-gradient-to-br ${r} flex items-center justify-center text-white text-xl lg:text-2xl shadow-lg shadow-blue-900/20 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 flex-shrink-0`,children:n})]}),f.jsx("div",{className:`absolute -right-6 -bottom-6 w-32 h-32 lg:w-40 lg:h-40 rounded-full bg-gradient-to-br ${r} opacity-0 group-hover:opacity-10 blur-[40px] transition-opacity duration-700`})]}),Kh="/Order_System/",Xh=[`${Kh}cambodia-provinces.geojson`,"https://raw.githubusercontent.com/seanghai/cambodia-geojson/master/cambodia-provinces.geojson","https://raw.githubusercontent.com/romnea/cambodia-geojson/master/provinces.geojson","https://raw.githubusercontent.com/kheang-hong/cambodia-geojson/master/provinces.geojson"],xl=t=>{if(!t)return"";const e=String(t).toLowerCase().replace(/\s/g,"").replace(/province|city|krong|khan|រាជធានី|ខេត្ត|ខេត្ដ|ក្រុង/g,"").trim();return{ភ្នំពេញ:"phnompenh",កណ្តាល:"kandal",កណ្ដាល:"kandal",កំពង់ចាម:"kampongcham",កំពង់ឆ្នាំង:"kampongchhnang",កំពង់ធំ:"kampongthom",កំពង់ស្ពឺ:"kampongspeu",កំពត:"kampot",កែប:"kep",កោះកុង:"kohkong",ក្រចេះ:"kratie",តាកែវ:"takeo",ត្បូងឃ្មុំ:"tbongkhmum",បន្ទាយមានជ័យ:"banteymeanchey",បាត់ដំបង:"battambang",ប៉ៃលិន:"pailin",ពោធិ៍សាត់:"pursat",ព្រៃវែង:"preyveng",ព្រះវិហារ:"preahvihear",ព្រះសីហនុ:"preahsihanouk",មណ្ឌលគិរី:"mondulkiri",រតនគិរី:"ratanakiri",សៀមរាប:"siemreap",ស្ទឹងត្រែង:"stungtreng",ស្វាយរៀង:"svayrieng",ឧត្តរមានជ័យ:"oddarmeanchey"}[e]||e},Qh=()=>{const[t,e]=ve.useState(null),[n,r]=ve.useState(null),[i,o]=ve.useState(!0);return ve.useEffect(()=>{let s=!0;return(async()=>{for(const l of Xh)try{const c=await fetch(l);if(c.ok){const p=await c.json();if(p&&p.type==="FeatureCollection"&&Array.isArray(p.features)){s&&(e(p),o(!1));return}else console.warn(`Fetched data from ${l} is not valid GeoJSON`)}}catch(c){console.warn(`Failed to load ${l}`,c)}s&&(r("មិនអាចទាញយកទិន្នន័យផែនទីបានទេ"),o(!1))})().catch(l=>{console.error("GeoJSON Fetch Fatal Error:",l),s&&(r("Error loading map data"),o(!1))}),()=>{s=!1}},[]),{geoJson:t,loading:i,error:n}},Zh={levels:["#001015","#00202b","#003547","#004d61","#006880","#0085a1","#00a6c2"]},Qr=[0,500,2e3,5e3,1e4,25e3],Gc=["interpolate",["linear"],["get","revenue"],0,50,500,500,5e3,2e3,1e4,5e3,5e4,15e3],ep=["case",["!=",["get","revenue"],0],["step",["get","revenue"],"#001015",Qr[1],"#001820",Qr[2],"#00202b",Qr[3],"#002a38",Qr[4],"#003547",Qr[5],"#00455c"],"#000000"],tp=()=>f.jsxs("div",{className:"absolute bottom-6 left-6 bg-black/90 p-4 border border-cyan-500/30 z-10 shadow-lg pointer-events-none min-w-[180px] font-mono",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-cyan-900 pb-2",children:[f.jsx("h5",{className:"text-[10px] font-bold text-cyan-500 uppercase tracking-widest",children:"DENSITY INDEX"}),f.jsx("div",{className:"w-2 h-2 bg-cyan-500 animate-pulse"})]}),f.jsx("div",{className:"space-y-1",children:Qr.map((t,e)=>{if(e===0)return null;const n=Zh.levels[e],r=Qr[e-1],i=e===Qr.length-1?`> ${(t/1e3).toFixed(0)}k`:`${(r/1e3).toFixed(0)}k-${(t/1e3).toFixed(0)}k`;return f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-2 h-2 border border-cyan-500/50",style:{backgroundColor:n}}),f.jsx("span",{className:"text-[9px] text-cyan-300",children:i})]},e)})}),f.jsxs("div",{className:"mt-3 pt-2 border-t border-cyan-900 flex items-center gap-2",children:[f.jsx("div",{className:"h-8 w-1 bg-gradient-to-t from-black via-cyan-900 to-cyan-500"}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-[8px] text-cyan-600 uppercase",children:"Z-AXIS"}),f.jsx("span",{className:"text-[8px] text-cyan-400",children:"VOLUME"})]})]})]}),np=t=>{const e=ve.useRef(null),[n,r]=ve.useState(!1),[i,o]=ve.useState(null);return ve.useEffect(()=>{let s=!0,a=null;return(async()=>{if(t.current&&!e.current)try{let c=0;for(;!window.maplibregl&&c<50;)await new Promise(m=>setTimeout(m,100)),c++;if(!s)return;const p=window.maplibregl;if(!p)throw new Error("MapLibre GL library not found.");a=new p.Map({container:t.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://a.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}@2x.png"],tileSize:256,attribution:"&copy; OpenStreetMap & CartoDB"}},layers:[{id:"background",type:"background",paint:{"background-color":"#020617"}},{id:"osm-layer",type:"raster",source:"osm",paint:{"raster-opacity":.3,"raster-saturation":-1,"raster-contrast":.1}}]},center:[104.916,12.5657],zoom:6.6,pitch:45,bearing:-10,minZoom:5,maxZoom:12}),a.addControl(new p.NavigationControl({showCompass:!0,visualizePitch:!0}),"top-right"),a.on("load",()=>{s&&(e.current=a,r(!0),console.log("Map Engine Ready in 3D Mode"))}),a.on("error",m=>{console.error("Map Internal Error:",m)})}catch(c){console.error("Map Engine Initialization Failed:",c),s&&o(c.message)}})().catch(c=>{console.error("Uncaught Map Engine Error:",c),s&&o("Failed to initialize map engine.")}),()=>{s=!1,a&&(a.remove(),e.current=null)}},[]),{map:e.current,isMapReady:n,mapError:i}},rp=({data:t})=>{const e=ve.useRef(null),n=ve.useRef(null),r=ve.useRef([]),i=ve.useRef([]),o=ve.useRef(null),s=ve.useRef(null),[a,l]=ve.useState("revenue"),c=ve.useRef(!1),{geoJson:p,loading:m,error:y}=Qh(),{map:v,isMapReady:N,mapError:A}=np(e),S=ve.useMemo(()=>{const C={};return Array.isArray(t)&&t.forEach(F=>{if(!F||!F.name)return;const D=xl(F.name);D&&(C[D]?(C[D].revenue+=Number(F.revenue)||0,C[D].orders+=Number(F.orders)||0,C[D].shippingCost=(C[D].shippingCost||0)+(Number(F.shippingCost)||0)):C[D]={...F,shippingCost:Number(F.shippingCost)||0})}),C},[t]),w=ve.useMemo(()=>{const C=Object.values(S).sort((D,M)=>{const E=D[a]||0;return(M[a]||0)-E}),F={};return C.forEach((D,M)=>{const E=xl(D.name);E&&(F[E]=M+1)}),F},[S,a]),_=()=>{switch(a){case"revenue":return"#00bcd4";case"orders":return"#8b5cf6";case"shipping":return"#10b981";default:return"#00bcd4"}};return ve.useEffect(()=>{if(!(!N||!v||!p)){try{const C=window.maplibregl,F=()=>{c.current=!0},D=()=>{c.current=!1};v.on("mousedown",F),v.on("touchstart",F),v.on("dragstart",F),v.on("mouseup",D),v.on("touchend",D),v.on("dragend",D),v.on("zoomstart",F),v.on("zoomend",D),s.current||v.flyTo({center:[104.916,12.6],zoom:7.2,pitch:50,bearing:-5,speed:.8,curve:1.2,essential:!0});const M=H=>{if(v.setLight({anchor:"map",color:"#ffffff",intensity:.6,position:[1.5,1.5,80]}),!c.current){const I=H/2e4,k=-5+Math.sin(I)*3;v.jumpTo({bearing:k})}s.current=requestAnimationFrame(M)};s.current&&cancelAnimationFrame(s.current),s.current=requestAnimationFrame(M),v.setFog&&v.setFog({range:[1,10],color:"#0f172a","horizon-blend":.2,"high-color":"#1e293b","space-color":"#0f172a","star-intensity":0});const E=p.features.map(H=>{const I=H.properties||{},k=[I.name_kh,I.Name_KH,I.name_en,I.Name_EN,I.name,I.shapeName];let B=0,J=0,re=0,j=I.name_en||I.shapeName||"Province",R=999;for(const K of k){if(!K)continue;const te=xl(String(K));if(S[te]){B=S[te].revenue,J=S[te].orders,re=S[te].shippingCost||0,w[te]&&(R=w[te]),j=K;break}}let W=B;return a==="orders"&&(W=J*80),a==="shipping"&&(W=re*25),{...H,properties:{...I,revenue:W,realRevenue:B,orders:J,shippingCost:re,displayName:j,rank:R}}}),L={type:"FeatureCollection",features:E},z=v.getSource("cambodia-3d-source");z?z.setData(L):(v.addSource("cambodia-3d-source",{type:"geojson",data:L,generateId:!0}),v.addLayer({id:"province-3d",type:"fill-extrusion",source:"cambodia-3d-source",paint:{"fill-extrusion-color":ep,"fill-extrusion-height":Gc,"fill-extrusion-base":0,"fill-extrusion-opacity":1,"fill-extrusion-vertical-gradient":!0}}),v.addLayer({id:"province-outlines",type:"line",source:"cambodia-3d-source",paint:{"line-color":_(),"line-width":1.5,"line-opacity":.5}}),v.addLayer({id:"province-highlight",type:"fill-extrusion",source:"cambodia-3d-source",paint:{"fill-extrusion-color":_(),"fill-extrusion-height":["+",Gc,100],"fill-extrusion-opacity":["case",["boolean",["feature-state","hover"],!1],.8,0]}}),n.current=new C.Popup({closeButton:!1,closeOnClick:!1,className:"custom-map-popup",offset:80,maxWidth:"300px"}),v.on("mousemove","province-3d",H=>{if(H.features.length>0){v.getCanvas().style.cursor="pointer";const I=H.features[0];o.current!==null&&v.setFeatureState({source:"cambodia-3d-source",id:o.current},{hover:!1}),o.current=I.id,v.setFeatureState({source:"cambodia-3d-source",id:I.id},{hover:!0});const{displayName:k,realRevenue:B,orders:J,shippingCost:re}=I.properties;let j=`$${Number(B).toLocaleString()}`,R="REVENUE";a==="orders"?(j=`${J}`,R="ORDERS"):a==="shipping"&&(j=`$${Number(re).toLocaleString()}`,R="SHIPPING"),n.current.setLngLat(H.lngLat).setHTML(`
                                <div class="bg-slate-900 border border-slate-700 p-3 shadow-xl rounded-lg min-w-[160px]">
                                    <div class="flex items-center justify-between border-b border-slate-800 pb-2 mb-2">
                                        <h4 class="text-white font-bold text-xs uppercase">${k}</h4>
                                    </div>
                                    <div class="flex justify-between items-baseline">
                                        <span class="text-[10px] text-gray-400 uppercase">${R}</span>
                                        <span class="text-lg font-bold text-cyan-400">${j}</span>
                                    </div>
                                </div>
                            `).addTo(v)}}),v.on("mouseleave","province-3d",()=>{v.getCanvas().style.cursor="",o.current!==null&&v.setFeatureState({source:"cambodia-3d-source",id:o.current},{hover:!1}),o.current=null,n.current.remove()})),v.getLayer("province-outlines")&&v.setPaintProperty("province-outlines","line-color",_()),v.getLayer("province-highlight")&&v.setPaintProperty("province-highlight","fill-extrusion-color",_()),i.current.forEach(H=>H.remove()),i.current=[],E.forEach(H=>{const{displayName:I}=H.properties,k=H.geometry.type==="Polygon"?H.geometry.coordinates[0]:H.geometry.coordinates.flat(1)[0];if(!k)return;const B=new C.LngLatBounds(k[0],k[0]);k.forEach(R=>B.extend(R));const J=B.getCenter(),re=document.createElement("div");re.className="province-label-marker",re.innerHTML=`<span class="text-[8px] font-bold text-white/50 uppercase tracking-wider drop-shadow-md select-none hover:text-white transition-colors">${I}</span>`;const j=new C.Marker({element:re,anchor:"center"}).setLngLat(J).addTo(v);i.current.push(j)}),r.current.forEach(H=>H.remove()),r.current=[],E.forEach(H=>{const{rank:I,displayName:k,realRevenue:B,orders:J,shippingCost:re}=H.properties;if(I&&I<=3){const j=H.geometry.type==="Polygon"?H.geometry.coordinates[0]:H.geometry.coordinates.flat(1)[0];if(!j)return;const R=new C.LngLatBounds(j[0],j[0]);j.forEach(P=>R.extend(P));const W=R.getCenter(),K=document.createElement("div");K.className="province-rank-marker";let te=`$${(B/1e3).toFixed(1)}k`;a==="orders"&&(te=`${J}`),a==="shipping"&&(te=`$${(re/1e3).toFixed(1)}k`),K.innerHTML=`
                        <div class="flex flex-col items-center group cursor-pointer animate-float hover:z-50">
                            <div class="px-3 py-1 bg-slate-900/90 border border-white/20 rounded-lg flex items-center gap-2 shadow-lg mb-1 backdrop-blur-sm">
                                <span class="text-[10px] font-black text-yellow-400">#${I}</span>
                                <span class="text-[9px] font-bold text-white uppercase">${k}</span>
                            </div>
                            <div class="w-0.5 h-10 bg-white/50"></div>
                            <div class="w-2 h-2 bg-white rounded-full"></div>
                        </div>
                    `;const ae=new C.Marker({element:K,anchor:"bottom",offset:[0,-10]}).setLngLat(W).addTo(v);r.current.push(ae)}})}catch(C){console.error("Layer Update Error:",C)}return()=>{s.current&&cancelAnimationFrame(s.current)}}},[N,p,S,w,a]),y||A?f.jsx("div",{className:"w-full h-[500px] flex items-center justify-center bg-gray-900/50 rounded-3xl border border-red-500/20 text-red-400",children:f.jsxs("p",{children:["Map Error: ",y||A]})}):f.jsxs("div",{className:"relative w-full h-[650px] xl:h-[750px] bg-slate-950 rounded-lg border border-slate-800 shadow-2xl overflow-hidden group",children:[f.jsx("div",{className:"absolute top-6 left-6 z-10 pointer-events-none",children:f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("div",{className:"w-2 h-2 bg-cyan-500 animate-pulse rounded-full"}),f.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"3D Visualization"})]}),f.jsxs("h2",{className:"text-xl font-black text-white uppercase tracking-tight",children:["Cambodia ",f.jsx("span",{className:"text-cyan-400",children:"Map"})]})]})}),f.jsx("div",{className:"absolute top-6 right-6 flex flex-col gap-2 z-10",children:[{id:"revenue",label:"Revenue",color:"bg-cyan-600"},{id:"orders",label:"Orders",color:"bg-violet-600"},{id:"shipping",label:"Shipping",color:"bg-emerald-600"}].map(C=>f.jsx("button",{onClick:()=>l(C.id),className:`px-3 py-1.5 rounded text-[10px] font-bold uppercase tracking-widest transition-all w-24 text-center ${a===C.id?`${C.color} text-white shadow-lg`:"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:C.label},C.id))}),f.jsx("div",{ref:e,className:"w-full h-full relative z-1"}),(!N||m)&&f.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-950 z-20",children:f.jsx("div",{className:"text-slate-500 font-bold text-xs animate-pulse",children:"LOADING MAP..."})}),f.jsx(tp,{}),f.jsx("style",{children:`
                .maplibregl-popup { z-index: 100; }
                .maplibregl-popup-content { background: transparent !important; box-shadow: none !important; padding: 0 !important; border: none !important; }
                .maplibregl-popup-tip { display: none !important; }
                .province-rank-marker { z-index: 10; pointer-events: none; }
                .province-label-marker { z-index: 5; pointer-events: none; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
                
                @keyframes float {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-5px); }
                }
                .animate-float {
                    animation: float 4s ease-in-out infinite;
                }
            `})]})};var ip={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let op,sp;function ap(){return{geminiUrl:op,vertexUrl:sp}}function lp(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=ap();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rr{}function De(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function h(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const p=l[c];h(p,e.slice(o+1),n[c])}else for(const c of l)h(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];h(l[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function u(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(a=>u(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function cp(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){const c=o[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}Ll(t,i,o,0,s)}}function Ll(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const l of a[s])Ll(l,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(const c of a)l[c]=s[c];for(const[c,p]of Object.entries(l)){const m=[];for(const y of n.slice(r))y==="*"?m.push(c):m.push(y);h(s,m,p)}for(const c of a)delete s[c]}}else{const s=t;o in s&&Ll(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ic(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function up(t){const e={},n=u(t,["operationName"]);n!=null&&h(e,["operationName"],n);const r=u(t,["resourceName"]);return r!=null&&h(e,["_url","resourceName"],r),e}function dp(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const r=u(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=u(t,["done"]);i!=null&&h(e,["done"],i);const o=u(t,["error"]);o!=null&&h(e,["error"],o);const s=u(t,["response","generateVideoResponse"]);return s!=null&&h(e,["response"],hp(s)),e}function fp(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const r=u(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=u(t,["done"]);i!=null&&h(e,["done"],i);const o=u(t,["error"]);o!=null&&h(e,["error"],o);const s=u(t,["response"]);return s!=null&&h(e,["response"],pp(s)),e}function hp(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>gp(s))),h(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function pp(t){const e={},n=u(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>mp(s))),h(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function gp(t){const e={},n=u(t,["video"]);return n!=null&&h(e,["video"],Np(n)),e}function mp(t){const e={},n=u(t,["_self"]);return n!=null&&h(e,["video"],Sp(n)),e}function vp(t){const e={},n=u(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function yp(t){const e={},n=u(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function xp(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const r=u(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=u(t,["done"]);i!=null&&h(e,["done"],i);const o=u(t,["error"]);o!=null&&h(e,["error"],o);const s=u(t,["response"]);return s!=null&&h(e,["response"],bp(s)),e}function bp(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&h(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function $d(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const r=u(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=u(t,["done"]);i!=null&&h(e,["done"],i);const o=u(t,["error"]);o!=null&&h(e,["error"],o);const s=u(t,["response"]);return s!=null&&h(e,["response"],wp(s)),e}function wp(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&h(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function Np(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["uri"],n);const r=u(t,["encodedVideo"]);r!=null&&h(e,["videoBytes"],ic(r));const i=u(t,["encoding"]);return i!=null&&h(e,["mimeType"],i),e}function Sp(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&h(e,["videoBytes"],ic(r));const i=u(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zc;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(zc||(zc={}));var Wc;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Wc||(Wc={}));var $c;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})($c||($c={}));var ei;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ei||(ei={}));var Jc;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Jc||(Jc={}));var Yc;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Yc||(Yc={}));var Kc;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Kc||(Kc={}));var Xc;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Xc||(Xc={}));var Qc;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Qc||(Qc={}));var Zc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Zc||(Zc={}));var eu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(eu||(eu={}));var tu;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(tu||(tu={}));var nu;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(nu||(nu={}));var ru;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ru||(ru={}));var iu;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(iu||(iu={}));var ou;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(ou||(ou={}));var su;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(su||(su={}));var au;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(au||(au={}));var lu;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(lu||(lu={}));var cu;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(cu||(cu={}));var uu;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(uu||(uu={}));var pa;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(pa||(pa={}));var du;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(du||(du={}));var fu;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(fu||(fu={}));var hu;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(hu||(hu={}));var Rl;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Rl||(Rl={}));var pu;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(pu||(pu={}));var gu;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(gu||(gu={}));var mu;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(mu||(mu={}));var vu;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(vu||(vu={}));var yu;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(yu||(yu={}));var xu;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(xu||(xu={}));var bu;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(bu||(bu={}));var wu;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(wu||(wu={}));var Nu;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Nu||(Nu={}));var Su;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Su||(Su={}));var _u;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(_u||(_u={}));var Au;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Au||(Au={}));var Cu;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Cu||(Cu={}));var Tu;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Tu||(Tu={}));var ku;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ku||(ku={}));var Iu;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Iu||(Iu={}));var Eu;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Eu||(Eu={}));var Pu;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Pu||(Pu={}));var Lu;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Lu||(Lu={}));var Ru;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ru||(Ru={}));var Mu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Mu||(Mu={}));var Du;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Du||(Du={}));var Fu;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Fu||(Fu={}));var ju;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ju||(ju={}));var Uu;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Uu||(Uu={}));var Bu;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Bu||(Bu={}));var qu;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(qu||(qu={}));var Ou;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Ou||(Ou={}));var fo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(fo||(fo={}));class Ml{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ko{get text(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",p=!1;const m=[];for(const y of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[v,N]of Object.entries(y))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(N!==null||N!==void 0)&&m.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;p=!0,c+=y.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?c:void 0}get data(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const p=[];for(const m of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,v]of Object.entries(m))y!=="inlineData"&&(v!==null||v!==void 0)&&p.push(y);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,o,s,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(c=p==null?void 0:p[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,o,s,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(c=p==null?void 0:p[0])===null||c===void 0?void 0:c.output}}class Hu{}class Vu{}class _p{}class Ap{}class Cp{}class Tp{}class Gu{}class zu{}class Wu{}class kp{}class ga{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ga;let i;const o=e;return n?i=fp(o):i=dp(o),Object.assign(r,i),r}}class $u{}class Ju{}class Yu{}class Ku{}class Ip{}class Ep{}class Pp{}class oc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new oc,o=xp(e);return Object.assign(r,o),r}}class Lp{}class Rp{}class Mp{}class Xu{}class Dp{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Fp{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class sc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new sc,o=$d(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Jd(t,e){const n=pt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Yd(t){return Array.isArray(t)?t.map(e=>ma(e)):[ma(t)]}function ma(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Kd(t){const e=ma(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Xd(t){const e=ma(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Qu(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Qd(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Qu(e)):[Qu(t)]}function Dl(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Zu(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ed(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function dn(t){if(t==null)throw new Error("ContentUnion is required");return Dl(t)?t:{role:"user",parts:Qd(t)}}function ac(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=dn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=dn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>dn(n)):[dn(e)]}function Un(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Zu(t)||ed(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dn(t)]}const e=[],n=[],r=Dl(t[0]);for(const i of t){const o=Dl(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Zu(i)||ed(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Qd(n)}),e}function jp(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ei).includes(n[0].toUpperCase())?n[0].toUpperCase():ei.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ei).includes(r.toUpperCase())?r.toUpperCase():ei.TYPE_UNSPECIFIED})}}function po(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&jp(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(ei).includes(a.toUpperCase())?a.toUpperCase():ei.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=po(a);else if(r.includes(s)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(po(c))}e[s]=l}else if(i.includes(s)){const l={};for(const[c,p]of Object.entries(a))l[c]=po(p);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function lc(t){return po(t)}function cc(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function uc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function vo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=po(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=po(e.response));return t}function yo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Up(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Mr(t,e){if(typeof e!="string")throw new Error("name must be a string");return Up(t,e,"cachedContents")}function Zd(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function si(t){return ic(t)}function Bp(t){return t!=null&&typeof t=="object"&&"name"in t}function qp(t){return t!=null&&typeof t=="object"&&"video"in t}function Op(t){return t!=null&&typeof t=="object"&&"uri"in t}function ef(t){var e;let n;if(Bp(t)&&(n=t.name),!(Op(t)&&(n=t.uri,n===void 0))&&!(qp(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function tf(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function nf(t){for(const e of["models","tunedModels","publisherModels"])if(Hp(t,e))return t[e];return[]}function Hp(t,e){return t!==null&&typeof t=="object"&&e in t}function Vp(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Gp(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=Vp(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function rf(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function zp(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function of(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function xo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function sf(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wp(t){const e={},n=u(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const r=u(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>C0(s))),h(e,["inlinedResponses"],o)}const i=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["inlinedEmbedContentResponses"],o)}return e}function $p(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const r=u(t,["gcsDestination","outputUriPrefix"]);r!=null&&h(e,["gcsUri"],r);const i=u(t,["bigqueryDestination","outputUri"]);return i!=null&&h(e,["bigqueryUri"],i),e}function Jp(t){const e={},n=u(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const r=u(t,["gcsUri"]);r!=null&&h(e,["gcsDestination","outputUriPrefix"],r);const i=u(t,["bigqueryUri"]);if(i!=null&&h(e,["bigqueryDestination","outputUri"],i),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function da(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const r=u(t,["metadata","displayName"]);r!=null&&h(e,["displayName"],r);const i=u(t,["metadata","state"]);i!=null&&h(e,["state"],sf(i));const o=u(t,["metadata","createTime"]);o!=null&&h(e,["createTime"],o);const s=u(t,["metadata","endTime"]);s!=null&&h(e,["endTime"],s);const a=u(t,["metadata","updateTime"]);a!=null&&h(e,["updateTime"],a);const l=u(t,["metadata","model"]);l!=null&&h(e,["model"],l);const c=u(t,["metadata","output"]);return c!=null&&h(e,["dest"],Wp(of(c))),e}function Fl(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const r=u(t,["displayName"]);r!=null&&h(e,["displayName"],r);const i=u(t,["state"]);i!=null&&h(e,["state"],sf(i));const o=u(t,["error"]);o!=null&&h(e,["error"],o);const s=u(t,["createTime"]);s!=null&&h(e,["createTime"],s);const a=u(t,["startTime"]);a!=null&&h(e,["startTime"],a);const l=u(t,["endTime"]);l!=null&&h(e,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&h(e,["updateTime"],c);const p=u(t,["model"]);p!=null&&h(e,["model"],p);const m=u(t,["inputConfig"]);m!=null&&h(e,["src"],Yp(m));const y=u(t,["outputConfig"]);y!=null&&h(e,["dest"],$p(of(y)));const v=u(t,["completionStats"]);return v!=null&&h(e,["completionStats"],v),e}function Yp(t){const e={},n=u(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const r=u(t,["gcsSource","uris"]);r!=null&&h(e,["gcsUri"],r);const i=u(t,["bigquerySource","inputUri"]);return i!=null&&h(e,["bigqueryUri"],i),e}function Kp(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=u(e,["fileName"]);r!=null&&h(n,["fileName"],r);const i=u(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>A0(t,s))),h(n,["requests","requests"],o)}return n}function Xp(t){const e={},n=u(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const r=u(t,["gcsUri"]);r!=null&&h(e,["gcsSource","uris"],r);const i=u(t,["bigqueryUri"]);if(i!=null&&h(e,["bigquerySource","inputUri"],i),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Qp(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Zp(t,e){const n={},r=u(e,["name"]);return r!=null&&h(n,["_url","name"],xo(t,r)),n}function e0(t,e){const n={},r=u(e,["name"]);return r!=null&&h(n,["_url","name"],xo(t,r)),n}function t0(t){const e={},n=u(t,["content"]);n!=null&&h(e,["content"],n);const r=u(t,["citationMetadata"]);r!=null&&h(e,["citationMetadata"],n0(r));const i=u(t,["tokenCount"]);i!=null&&h(e,["tokenCount"],i);const o=u(t,["finishReason"]);o!=null&&h(e,["finishReason"],o);const s=u(t,["avgLogprobs"]);s!=null&&h(e,["avgLogprobs"],s);const a=u(t,["groundingMetadata"]);a!=null&&h(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&h(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&h(e,["logprobsResult"],c);const p=u(t,["safetyRatings"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(v=>v)),h(e,["safetyRatings"],y)}const m=u(t,["urlContextMetadata"]);return m!=null&&h(e,["urlContextMetadata"],m),e}function n0(t){const e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),h(e,["citations"],r)}return e}function af(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>R0(o))),h(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&h(e,["role"],r),e}function r0(t,e){const n={},r=u(t,["displayName"]);if(e!==void 0&&r!=null&&h(e,["batch","displayName"],r),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function i0(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const i=u(t,["dest"]);return e!==void 0&&i!=null&&h(e,["outputConfig"],Jp(zp(i))),n}function td(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["src"]);i!=null&&h(n,["batch","inputConfig"],Kp(t,rf(t,i)));const o=u(e,["config"]);return o!=null&&r0(o,n),n}function o0(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["model"],pt(t,r));const i=u(e,["src"]);i!=null&&h(n,["inputConfig"],Xp(rf(t,i)));const o=u(e,["config"]);return o!=null&&i0(o,n),n}function s0(t,e){const n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&h(e,["batch","displayName"],r),n}function a0(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["src"]);i!=null&&h(n,["batch","inputConfig"],p0(t,i));const o=u(e,["config"]);return o!=null&&s0(o,n),n}function l0(t,e){const n={},r=u(e,["name"]);return r!=null&&h(n,["_url","name"],xo(t,r)),n}function c0(t,e){const n={},r=u(e,["name"]);return r!=null&&h(n,["_url","name"],xo(t,r)),n}function u0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["name"]);r!=null&&h(e,["name"],r);const i=u(t,["done"]);i!=null&&h(e,["done"],i);const o=u(t,["error"]);return o!=null&&h(e,["error"],o),e}function d0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["name"]);r!=null&&h(e,["name"],r);const i=u(t,["done"]);i!=null&&h(e,["done"],i);const o=u(t,["error"]);return o!=null&&h(e,["error"],o),e}function f0(t,e){const n={},r=u(e,["contents"]);if(r!=null){let o=ac(t,r);Array.isArray(o)&&(o=o.map(s=>s)),h(n,["requests[]","request","content"],o)}const i=u(e,["config"]);return i!=null&&(h(n,["_self"],h0(i,n)),cp(n,{"requests[].*":"requests[].request.*"})),n}function h0(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&h(e,["requests[]","title"],i);const o=u(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&h(e,["requests[]","outputDimensionality"],o),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function p0(t,e){const n={},r=u(e,["fileName"]);r!=null&&h(n,["file_name"],r);const i=u(e,["inlinedRequests"]);return i!=null&&h(n,["requests"],f0(t,i)),n}function g0(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function m0(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const r=u(t,["args"]);r!=null&&h(e,["args"],r);const i=u(t,["name"]);if(i!=null&&h(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function v0(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&h(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function y0(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&h(n,["systemInstruction"],af(dn(i)));const o=u(e,["temperature"]);o!=null&&h(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&h(r,["topP"],s);const a=u(e,["topK"]);a!=null&&h(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&h(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&h(r,["maxOutputTokens"],c);const p=u(e,["stopSequences"]);p!=null&&h(r,["stopSequences"],p);const m=u(e,["responseLogprobs"]);m!=null&&h(r,["responseLogprobs"],m);const y=u(e,["logprobs"]);y!=null&&h(r,["logprobs"],y);const v=u(e,["presencePenalty"]);v!=null&&h(r,["presencePenalty"],v);const N=u(e,["frequencyPenalty"]);N!=null&&h(r,["frequencyPenalty"],N);const A=u(e,["seed"]);A!=null&&h(r,["seed"],A);const S=u(e,["responseMimeType"]);S!=null&&h(r,["responseMimeType"],S);const w=u(e,["responseSchema"]);w!=null&&h(r,["responseSchema"],lc(w));const _=u(e,["responseJsonSchema"]);if(_!=null&&h(r,["responseJsonSchema"],_),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=u(e,["safetySettings"]);if(n!==void 0&&C!=null){let B=C;Array.isArray(B)&&(B=B.map(J=>M0(J))),h(n,["safetySettings"],B)}const F=u(e,["tools"]);if(n!==void 0&&F!=null){let B=yo(F);Array.isArray(B)&&(B=B.map(J=>F0(vo(J)))),h(n,["tools"],B)}const D=u(e,["toolConfig"]);if(n!==void 0&&D!=null&&h(n,["toolConfig"],D0(D)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=u(e,["cachedContent"]);n!==void 0&&M!=null&&h(n,["cachedContent"],Mr(t,M));const E=u(e,["responseModalities"]);E!=null&&h(r,["responseModalities"],E);const L=u(e,["mediaResolution"]);L!=null&&h(r,["mediaResolution"],L);const z=u(e,["speechConfig"]);if(z!=null&&h(r,["speechConfig"],cc(z)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=u(e,["thinkingConfig"]);H!=null&&h(r,["thinkingConfig"],H);const I=u(e,["imageConfig"]);I!=null&&h(r,["imageConfig"],_0(I));const k=u(e,["enableEnhancedCivicAnswers"]);return k!=null&&h(r,["enableEnhancedCivicAnswers"],k),r}function x0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>t0(c))),h(e,["candidates"],l)}const i=u(t,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const s=u(t,["responseId"]);s!=null&&h(e,["responseId"],s);const a=u(t,["usageMetadata"]);return a!=null&&h(e,["usageMetadata"],a),e}function b0(t,e){const n={},r=u(e,["name"]);return r!=null&&h(n,["_url","name"],xo(t,r)),n}function w0(t,e){const n={},r=u(e,["name"]);return r!=null&&h(n,["_url","name"],xo(t,r)),n}function N0(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function S0(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function _0(t){const e={},n=u(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=u(t,["imageSize"]);if(r!=null&&h(e,["imageSize"],r),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function A0(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["request","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let a=Un(i);Array.isArray(a)&&(a=a.map(l=>af(l))),h(n,["request","contents"],a)}const o=u(e,["metadata"]);o!=null&&h(n,["metadata"],o);const s=u(e,["config"]);return s!=null&&h(n,["request","generationConfig"],y0(t,s,u(n,["request"],{}))),n}function C0(t){const e={},n=u(t,["response"]);n!=null&&h(e,["response"],x0(n));const r=u(t,["error"]);return r!=null&&h(e,["error"],r),e}function T0(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);if(e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function k0(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),n}function I0(t){const e={},n=u(t,["config"]);return n!=null&&T0(n,e),e}function E0(t){const e={},n=u(t,["config"]);return n!=null&&k0(n,e),e}function P0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=u(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>da(s))),h(e,["batchJobs"],o)}return e}function L0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=u(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Fl(s))),h(e,["batchJobs"],o)}return e}function R0(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&h(e,["fileData"],g0(o));const s=u(t,["functionCall"]);s!=null&&h(e,["functionCall"],m0(s));const a=u(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&h(e,["inlineData"],Qp(l));const c=u(t,["text"]);c!=null&&h(e,["text"],c);const p=u(t,["thought"]);p!=null&&h(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&h(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&h(e,["videoMetadata"],y),e}function M0(t){const e={},n=u(t,["category"]);if(n!=null&&h(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function D0(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&h(e,["functionCallingConfig"],v0(r)),e}function F0(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&h(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&h(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),h(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],N0(s));const a=u(t,["googleSearch"]);a!=null&&h(e,["googleSearch"],S0(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&h(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&h(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Lr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Lr||(Lr={}));class ki{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j0 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ki(Lr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=td(this.apiClient,e),r=n._url,i=De("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const p of l){const m=Object.assign({},p);if(m.systemInstruction){const y=m.systemInstruction;delete m.systemInstruction;const v=m.request;v.systemInstruction=y,m.request=v}c.push(m)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=o0(this.apiClient,e);return a=De("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>Fl(p))}else{const c=td(this.apiClient,e);return a=De("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>da(p))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=a0(this.apiClient,e);return o=De("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>da(l))}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=w0(this.apiClient,e);return a=De("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>Fl(p))}else{const c=b0(this.apiClient,e);return a=De("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>da(p))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const l=e0(this.apiClient,e);s=De("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=Zp(this.apiClient,e);s=De("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=E0(e);return a=De("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=L0(p),y=new Xu;return Object.assign(y,m),y})}else{const c=I0(e);return a=De("batches",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=P0(p),y=new Xu;return Object.assign(y,m),y})}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=c0(this.apiClient,e);return a=De("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>d0(p))}else{const c=l0(this.apiClient,e);return a=De("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>u0(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U0(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function nd(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ag(o))),h(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&h(e,["role"],r),e}function B0(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=u(t,["expireTime"]);e!==void 0&&i!=null&&h(e,["expireTime"],i);const o=u(t,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const s=u(t,["contents"]);if(e!==void 0&&s!=null){let p=Un(s);Array.isArray(p)&&(p=p.map(m=>nd(m))),h(e,["contents"],p)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],nd(dn(a)));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>cg(m))),h(e,["tools"],p)}const c=u(t,["toolConfig"]);if(e!==void 0&&c!=null&&h(e,["toolConfig"],lg(c)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function q0(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=u(t,["expireTime"]);e!==void 0&&i!=null&&h(e,["expireTime"],i);const o=u(t,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const s=u(t,["contents"]);if(e!==void 0&&s!=null){let m=Un(s);Array.isArray(m)&&(m=m.map(y=>y)),h(e,["contents"],m)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],dn(a));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>ug(y))),h(e,["tools"],m)}const c=u(t,["toolConfig"]);e!==void 0&&c!=null&&h(e,["toolConfig"],c);const p=u(t,["kmsKeyName"]);return e!==void 0&&p!=null&&h(e,["encryption_spec","kmsKeyName"],p),n}function O0(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["model"],Jd(t,r));const i=u(e,["config"]);return i!=null&&B0(i,n),n}function H0(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["model"],Jd(t,r));const i=u(e,["config"]);return i!=null&&q0(i,n),n}function V0(t,e){const n={},r=u(e,["name"]);return r!=null&&h(n,["_url","name"],Mr(t,r)),n}function G0(t,e){const n={},r=u(e,["name"]);return r!=null&&h(n,["_url","name"],Mr(t,r)),n}function z0(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function W0(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function $0(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function J0(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const r=u(t,["args"]);r!=null&&h(e,["args"],r);const i=u(t,["name"]);if(i!=null&&h(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Y0(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&h(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function K0(t){const e={},n=u(t,["description"]);n!=null&&h(e,["description"],n);const r=u(t,["name"]);r!=null&&h(e,["name"],r);const i=u(t,["parameters"]);i!=null&&h(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&h(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&h(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function X0(t,e){const n={},r=u(e,["name"]);return r!=null&&h(n,["_url","name"],Mr(t,r)),n}function Q0(t,e){const n={},r=u(e,["name"]);return r!=null&&h(n,["_url","name"],Mr(t,r)),n}function Z0(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function eg(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function tg(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function ng(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function rg(t){const e={},n=u(t,["config"]);return n!=null&&tg(n,e),e}function ig(t){const e={},n=u(t,["config"]);return n!=null&&ng(n,e),e}function og(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=u(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["cachedContents"],o)}return e}function sg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=u(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["cachedContents"],o)}return e}function ag(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&h(e,["fileData"],$0(o));const s=u(t,["functionCall"]);s!=null&&h(e,["functionCall"],J0(s));const a=u(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&h(e,["inlineData"],U0(l));const c=u(t,["text"]);c!=null&&h(e,["text"],c);const p=u(t,["thought"]);p!=null&&h(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&h(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&h(e,["videoMetadata"],y),e}function lg(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&h(e,["functionCallingConfig"],Y0(r)),e}function cg(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&h(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&h(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),h(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],Z0(s));const a=u(t,["googleSearch"]);a!=null&&h(e,["googleSearch"],eg(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&h(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&h(e,["urlContext"],c),e}function ug(t){const e={},n=u(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&h(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&h(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&h(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(y=>K0(y))),h(e,["functionDeclarations"],m)}const a=u(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const p=u(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function dg(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=u(t,["expireTime"]);return e!==void 0&&i!=null&&h(e,["expireTime"],i),n}function fg(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=u(t,["expireTime"]);return e!==void 0&&i!=null&&h(e,["expireTime"],i),n}function hg(t,e){const n={},r=u(e,["name"]);r!=null&&h(n,["_url","name"],Mr(t,r));const i=u(e,["config"]);return i!=null&&dg(i,n),n}function pg(t,e){const n={},r=u(e,["name"]);r!=null&&h(n,["_url","name"],Mr(t,r));const i=u(e,["config"]);return i!=null&&fg(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gg extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ki(Lr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=H0(this.apiClient,e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const c=O0(this.apiClient,e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Q0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const c=X0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=G0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=W0(p),y=new Yu;return Object.assign(y,m),y})}else{const c=V0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=z0(p),y=new Yu;return Object.assign(y,m),y})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=pg(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const c=hg(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=ig(e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=sg(p),y=new Ku;return Object.assign(y,m),y})}else{const c=rg(e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=og(p),y=new Ku;return Object.assign(y,m),y})}}}function va(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function rd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qe(t){return this instanceof Qe?(this.v=t,this):new Qe(t)}function er(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(N){return Promise.resolve(N).then(v,m)}}function a(v,N){r[v]&&(i[v]=function(A){return new Promise(function(S,w){o.push([v,A,S,w])>1||l(v,A)})},N&&(i[v]=N(i[v])))}function l(v,N){try{c(r[v](N))}catch(A){y(o[0][3],A)}}function c(v){v.value instanceof Qe?Promise.resolve(v.value.v).then(p,m):y(o[0][2],v)}function p(v){l("next",v)}function m(v){l("throw",v)}function y(v,N){v(N),o.shift(),o.length&&l(o[0][0],o[0][1])}}function tr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rd=="function"?rd(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mg(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:lf(n)}function lf(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function vg(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function id(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!lf(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class yg{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new xg(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class xg{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),vg(o)}async sendMessage(e){var n;await this.sendPromise;const r=dn(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const l=await i,c=(s=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,p=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let y=[];p!=null&&(y=(a=p.slice(m))!==null&&a!==void 0?a:[]);const v=c?[c]:[];this.recordHistory(r,v,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=dn(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?id(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return er(this,arguments,function*(){var i,o,s,a,l,c;const p=[];try{for(var m=!0,y=tr(e),v;v=yield Qe(y.next()),i=v.done,!i;m=!0){a=v.value,m=!1;const N=a;if(mg(N)){const A=(c=(l=N.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;A!==void 0&&p.push(A)}yield yield Qe(N)}}catch(N){o={error:N}}finally{try{!m&&!i&&(s=y.return)&&(yield Qe(s.call(y)))}finally{if(o)throw o.error}}this.recordHistory(n,p)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...id(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wa extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,wa.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bg(t){const e={},n=u(t,["file"]);return n!=null&&h(e,["file"],n),e}function wg(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function Ng(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","file"],ef(n)),e}function Sg(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function _g(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","file"],ef(n)),e}function Ag(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function Cg(t){const e={},n=u(t,["config"]);return n!=null&&Ag(n,e),e}function Tg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=u(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kg extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ki(Lr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Cg(e);return o=De("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=Tg(l),p=new Lp;return Object.assign(p,c),p})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=bg(e);return o=De("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=wg(l),p=new Rp;return Object.assign(p,c),p})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=_g(e);return o=De("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ng(e);return o=De("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=Sg(l),p=new Mp;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fa(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Ig(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>zg(o))),h(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&h(e,["role"],r),e}function Eg(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Pg(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const r=u(t,["args"]);r!=null&&h(e,["args"],r);const i=u(t,["name"]);if(i!=null&&h(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Lg(t){const e={},n=u(t,["description"]);n!=null&&h(e,["description"],n);const r=u(t,["name"]);r!=null&&h(e,["name"],r);const i=u(t,["parameters"]);i!=null&&h(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&h(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&h(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Rg(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const r=u(t,["responseJsonSchema"]);r!=null&&h(e,["responseJsonSchema"],r);const i=u(t,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const o=u(t,["candidateCount"]);o!=null&&h(e,["candidateCount"],o);const s=u(t,["enableAffectiveDialog"]);s!=null&&h(e,["enableAffectiveDialog"],s);const a=u(t,["frequencyPenalty"]);a!=null&&h(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&h(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&h(e,["maxOutputTokens"],c);const p=u(t,["mediaResolution"]);p!=null&&h(e,["mediaResolution"],p);const m=u(t,["presencePenalty"]);m!=null&&h(e,["presencePenalty"],m);const y=u(t,["responseLogprobs"]);y!=null&&h(e,["responseLogprobs"],y);const v=u(t,["responseMimeType"]);v!=null&&h(e,["responseMimeType"],v);const N=u(t,["responseModalities"]);N!=null&&h(e,["responseModalities"],N);const A=u(t,["responseSchema"]);A!=null&&h(e,["responseSchema"],A);const S=u(t,["routingConfig"]);S!=null&&h(e,["routingConfig"],S);const w=u(t,["seed"]);w!=null&&h(e,["seed"],w);const _=u(t,["speechConfig"]);_!=null&&h(e,["speechConfig"],_);const C=u(t,["stopSequences"]);C!=null&&h(e,["stopSequences"],C);const F=u(t,["temperature"]);F!=null&&h(e,["temperature"],F);const D=u(t,["thinkingConfig"]);D!=null&&h(e,["thinkingConfig"],D);const M=u(t,["topK"]);M!=null&&h(e,["topK"],M);const E=u(t,["topP"]);if(E!=null&&h(e,["topP"],E),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Mg(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function Dg(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function Fg(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r);const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","mediaResolution"],c);const p=u(t,["seed"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","seed"],p);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","speechConfig"],uc(m));const y=u(t,["thinkingConfig"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","thinkingConfig"],y);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],v);const N=u(t,["systemInstruction"]);e!==void 0&&N!=null&&h(e,["setup","systemInstruction"],Ig(dn(N)));const A=u(t,["tools"]);if(e!==void 0&&A!=null){let M=yo(A);Array.isArray(M)&&(M=M.map(E=>$g(vo(E)))),h(e,["setup","tools"],M)}const S=u(t,["sessionResumption"]);e!==void 0&&S!=null&&h(e,["setup","sessionResumption"],Wg(S));const w=u(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&h(e,["setup","inputAudioTranscription"],w);const _=u(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&h(e,["setup","outputAudioTranscription"],_);const C=u(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&h(e,["setup","realtimeInputConfig"],C);const F=u(t,["contextWindowCompression"]);e!==void 0&&F!=null&&h(e,["setup","contextWindowCompression"],F);const D=u(t,["proactivity"]);if(e!==void 0&&D!=null&&h(e,["setup","proactivity"],D),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function jg(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],Rg(r));const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","mediaResolution"],c);const p=u(t,["seed"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","seed"],p);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","speechConfig"],uc(m));const y=u(t,["thinkingConfig"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","thinkingConfig"],y);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],v);const N=u(t,["systemInstruction"]);e!==void 0&&N!=null&&h(e,["setup","systemInstruction"],dn(N));const A=u(t,["tools"]);if(e!==void 0&&A!=null){let E=yo(A);Array.isArray(E)&&(E=E.map(L=>Jg(vo(L)))),h(e,["setup","tools"],E)}const S=u(t,["sessionResumption"]);e!==void 0&&S!=null&&h(e,["setup","sessionResumption"],S);const w=u(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&h(e,["setup","inputAudioTranscription"],w);const _=u(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&h(e,["setup","outputAudioTranscription"],_);const C=u(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&h(e,["setup","realtimeInputConfig"],C);const F=u(t,["contextWindowCompression"]);e!==void 0&&F!=null&&h(e,["setup","contextWindowCompression"],F);const D=u(t,["proactivity"]);e!==void 0&&D!=null&&h(e,["setup","proactivity"],D);const M=u(t,["explicitVadSignal"]);return e!==void 0&&M!=null&&h(e,["setup","explicitVadSignal"],M),n}function Ug(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["setup","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&h(n,["config"],Fg(i,n)),n}function Bg(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["setup","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&h(n,["config"],jg(i,n)),n}function qg(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function Og(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),h(e,["weightedPrompts"],r)}return e}function Hg(t){const e={},n=u(t,["media"]);if(n!=null){let c=Yd(n);Array.isArray(c)&&(c=c.map(p=>fa(p))),h(e,["mediaChunks"],c)}const r=u(t,["audio"]);r!=null&&h(e,["audio"],fa(Xd(r)));const i=u(t,["audioStreamEnd"]);i!=null&&h(e,["audioStreamEnd"],i);const o=u(t,["video"]);o!=null&&h(e,["video"],fa(Kd(o)));const s=u(t,["text"]);s!=null&&h(e,["text"],s);const a=u(t,["activityStart"]);a!=null&&h(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&h(e,["activityEnd"],l),e}function Vg(t){const e={},n=u(t,["media"]);if(n!=null){let c=Yd(n);Array.isArray(c)&&(c=c.map(p=>p)),h(e,["mediaChunks"],c)}const r=u(t,["audio"]);r!=null&&h(e,["audio"],Xd(r));const i=u(t,["audioStreamEnd"]);i!=null&&h(e,["audioStreamEnd"],i);const o=u(t,["video"]);o!=null&&h(e,["video"],Kd(o));const s=u(t,["text"]);s!=null&&h(e,["text"],s);const a=u(t,["activityStart"]);a!=null&&h(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&h(e,["activityEnd"],l),e}function Gg(t){const e={},n=u(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const r=u(t,["serverContent"]);r!=null&&h(e,["serverContent"],r);const i=u(t,["toolCall"]);i!=null&&h(e,["toolCall"],i);const o=u(t,["toolCallCancellation"]);o!=null&&h(e,["toolCallCancellation"],o);const s=u(t,["usageMetadata"]);s!=null&&h(e,["usageMetadata"],Yg(s));const a=u(t,["goAway"]);a!=null&&h(e,["goAway"],a);const l=u(t,["sessionResumptionUpdate"]);l!=null&&h(e,["sessionResumptionUpdate"],l);const c=u(t,["voiceActivityDetectionSignal"]);return c!=null&&h(e,["voiceActivityDetectionSignal"],c),e}function zg(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&h(e,["fileData"],Eg(o));const s=u(t,["functionCall"]);s!=null&&h(e,["functionCall"],Pg(s));const a=u(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&h(e,["inlineData"],fa(l));const c=u(t,["text"]);c!=null&&h(e,["text"],c);const p=u(t,["thought"]);p!=null&&h(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&h(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&h(e,["videoMetadata"],y),e}function Wg(t){const e={},n=u(t,["handle"]);if(n!=null&&h(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $g(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&h(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&h(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),h(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],Mg(s));const a=u(t,["googleSearch"]);a!=null&&h(e,["googleSearch"],Dg(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&h(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&h(e,["urlContext"],c),e}function Jg(t){const e={},n=u(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&h(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&h(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&h(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(y=>Lg(y))),h(e,["functionDeclarations"],m)}const a=u(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const p=u(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function Yg(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const r=u(t,["cachedContentTokenCount"]);r!=null&&h(e,["cachedContentTokenCount"],r);const i=u(t,["candidatesTokenCount"]);i!=null&&h(e,["responseTokenCount"],i);const o=u(t,["toolUsePromptTokenCount"]);o!=null&&h(e,["toolUsePromptTokenCount"],o);const s=u(t,["thoughtsTokenCount"]);s!=null&&h(e,["thoughtsTokenCount"],s);const a=u(t,["totalTokenCount"]);a!=null&&h(e,["totalTokenCount"],a);const l=u(t,["promptTokensDetails"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(N=>N)),h(e,["promptTokensDetails"],v)}const c=u(t,["cacheTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(N=>N)),h(e,["cacheTokensDetails"],v)}const p=u(t,["candidatesTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(N=>N)),h(e,["responseTokensDetails"],v)}const m=u(t,["toolUsePromptTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(N=>N)),h(e,["toolUsePromptTokensDetails"],v)}const y=u(t,["trafficType"]);return y!=null&&h(e,["trafficType"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kg(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Xg(t){const e={},n=u(t,["content"]);n!=null&&h(e,["content"],n);const r=u(t,["citationMetadata"]);r!=null&&h(e,["citationMetadata"],Qg(r));const i=u(t,["tokenCount"]);i!=null&&h(e,["tokenCount"],i);const o=u(t,["finishReason"]);o!=null&&h(e,["finishReason"],o);const s=u(t,["avgLogprobs"]);s!=null&&h(e,["avgLogprobs"],s);const a=u(t,["groundingMetadata"]);a!=null&&h(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&h(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&h(e,["logprobsResult"],c);const p=u(t,["safetyRatings"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(v=>v)),h(e,["safetyRatings"],y)}const m=u(t,["urlContextMetadata"]);return m!=null&&h(e,["urlContextMetadata"],m),e}function Qg(t){const e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),h(e,["citations"],r)}return e}function Zg(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let o=Un(i);Array.isArray(o)&&(o=o.map(s=>s)),h(n,["contents"],o)}return n}function em(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["tokensInfo"],i)}return e}function tm(t){const e={},n=u(t,["values"]);n!=null&&h(e,["values"],n);const r=u(t,["statistics"]);return r!=null&&h(e,["statistics"],nm(r)),e}function nm(t){const e={},n=u(t,["truncated"]);n!=null&&h(e,["truncated"],n);const r=u(t,["token_count"]);return r!=null&&h(e,["tokenCount"],r),e}function Na(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>d1(o))),h(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&h(e,["role"],r),e}function rm(t){const e={},n=u(t,["controlType"]);n!=null&&h(e,["controlType"],n);const r=u(t,["enableControlImageComputation"]);return r!=null&&h(e,["computeControl"],r),e}function im(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function om(t,e){const n={},r=u(t,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],dn(r));const i=u(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>ff(a))),h(e,["tools"],s)}const o=u(t,["generationConfig"]);return e!==void 0&&o!=null&&h(e,["generationConfig"],Km(o)),n}function sm(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=Un(i);Array.isArray(s)&&(s=s.map(a=>Na(a))),h(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&im(o),n}function am(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=Un(i);Array.isArray(s)&&(s=s.map(a=>a)),h(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&om(o,n),n}function lm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["totalTokens"]);r!=null&&h(e,["totalTokens"],r);const i=u(t,["cachedContentTokenCount"]);return i!=null&&h(e,["cachedContentTokenCount"],i),e}function cm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["totalTokens"]);return r!=null&&h(e,["totalTokens"],r),e}function um(t,e){const n={},r=u(e,["model"]);return r!=null&&h(n,["_url","name"],pt(t,r)),n}function dm(t,e){const n={},r=u(e,["model"]);return r!=null&&h(n,["_url","name"],pt(t,r)),n}function fm(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function hm(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function pm(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=u(t,["negativePrompt"]);e!==void 0&&i!=null&&h(e,["parameters","negativePrompt"],i);const o=u(t,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&h(e,["parameters","aspectRatio"],s);const a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const y=u(t,["includeRaiReason"]);e!==void 0&&y!=null&&h(e,["parameters","includeRaiReason"],y);const v=u(t,["language"]);e!==void 0&&v!=null&&h(e,["parameters","language"],v);const N=u(t,["outputMimeType"]);e!==void 0&&N!=null&&h(e,["parameters","outputOptions","mimeType"],N);const A=u(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&h(e,["parameters","outputOptions","compressionQuality"],A);const S=u(t,["addWatermark"]);e!==void 0&&S!=null&&h(e,["parameters","addWatermark"],S);const w=u(t,["labels"]);e!==void 0&&w!=null&&h(e,["labels"],w);const _=u(t,["editMode"]);e!==void 0&&_!=null&&h(e,["parameters","editMode"],_);const C=u(t,["baseSteps"]);return e!==void 0&&C!=null&&h(e,["parameters","editConfig","baseSteps"],C),n}function gm(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const o=u(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>v1(l))),h(n,["instances[0]","referenceImages"],a)}const s=u(e,["config"]);return s!=null&&pm(s,n),n}function mm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Sa(o))),h(e,["generatedImages"],i)}return e}function vm(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&h(e,["requests[]","title"],i);const o=u(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&h(e,["requests[]","outputDimensionality"],o),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ym(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&h(e,["instances[]","title"],i);const o=u(t,["outputDimensionality"]);e!==void 0&&o!=null&&h(e,["parameters","outputDimensionality"],o);const s=u(t,["mimeType"]);e!==void 0&&s!=null&&h(e,["instances[]","mimeType"],s);const a=u(t,["autoTruncate"]);return e!==void 0&&a!=null&&h(e,["parameters","autoTruncate"],a),n}function xm(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let a=ac(t,i);Array.isArray(a)&&(a=a.map(l=>l)),h(n,["requests[]","content"],a)}const o=u(e,["config"]);o!=null&&vm(o,n);const s=u(e,["model"]);return s!==void 0&&h(n,["requests[]","model"],pt(t,s)),n}function bm(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=ac(t,i);Array.isArray(s)&&(s=s.map(a=>a)),h(n,["instances[]","content"],s)}const o=u(e,["config"]);return o!=null&&ym(o,n),n}function wm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["embeddings"],o)}const i=u(t,["metadata"]);return i!=null&&h(e,["metadata"],i),e}function Nm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>tm(s))),h(e,["embeddings"],o)}const i=u(t,["metadata"]);return i!=null&&h(e,["metadata"],i),e}function Sm(t){const e={},n=u(t,["endpoint"]);n!=null&&h(e,["name"],n);const r=u(t,["deployedModelId"]);return r!=null&&h(e,["deployedModelId"],r),e}function _m(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Am(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const r=u(t,["args"]);r!=null&&h(e,["args"],r);const i=u(t,["name"]);if(i!=null&&h(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Cm(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&h(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Tm(t){const e={},n=u(t,["description"]);n!=null&&h(e,["description"],n);const r=u(t,["name"]);r!=null&&h(e,["name"],r);const i=u(t,["parameters"]);i!=null&&h(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&h(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&h(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function km(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&h(n,["systemInstruction"],Na(dn(i)));const o=u(e,["temperature"]);o!=null&&h(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&h(r,["topP"],s);const a=u(e,["topK"]);a!=null&&h(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&h(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&h(r,["maxOutputTokens"],c);const p=u(e,["stopSequences"]);p!=null&&h(r,["stopSequences"],p);const m=u(e,["responseLogprobs"]);m!=null&&h(r,["responseLogprobs"],m);const y=u(e,["logprobs"]);y!=null&&h(r,["logprobs"],y);const v=u(e,["presencePenalty"]);v!=null&&h(r,["presencePenalty"],v);const N=u(e,["frequencyPenalty"]);N!=null&&h(r,["frequencyPenalty"],N);const A=u(e,["seed"]);A!=null&&h(r,["seed"],A);const S=u(e,["responseMimeType"]);S!=null&&h(r,["responseMimeType"],S);const w=u(e,["responseSchema"]);w!=null&&h(r,["responseSchema"],lc(w));const _=u(e,["responseJsonSchema"]);if(_!=null&&h(r,["responseJsonSchema"],_),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=u(e,["safetySettings"]);if(n!==void 0&&C!=null){let B=C;Array.isArray(B)&&(B=B.map(J=>y1(J))),h(n,["safetySettings"],B)}const F=u(e,["tools"]);if(n!==void 0&&F!=null){let B=yo(F);Array.isArray(B)&&(B=B.map(J=>A1(vo(J)))),h(n,["tools"],B)}const D=u(e,["toolConfig"]);if(n!==void 0&&D!=null&&h(n,["toolConfig"],_1(D)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=u(e,["cachedContent"]);n!==void 0&&M!=null&&h(n,["cachedContent"],Mr(t,M));const E=u(e,["responseModalities"]);E!=null&&h(r,["responseModalities"],E);const L=u(e,["mediaResolution"]);L!=null&&h(r,["mediaResolution"],L);const z=u(e,["speechConfig"]);if(z!=null&&h(r,["speechConfig"],cc(z)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=u(e,["thinkingConfig"]);H!=null&&h(r,["thinkingConfig"],H);const I=u(e,["imageConfig"]);I!=null&&h(r,["imageConfig"],t1(I));const k=u(e,["enableEnhancedCivicAnswers"]);return k!=null&&h(r,["enableEnhancedCivicAnswers"],k),r}function Im(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&h(n,["systemInstruction"],dn(i));const o=u(e,["temperature"]);o!=null&&h(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&h(r,["topP"],s);const a=u(e,["topK"]);a!=null&&h(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&h(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&h(r,["maxOutputTokens"],c);const p=u(e,["stopSequences"]);p!=null&&h(r,["stopSequences"],p);const m=u(e,["responseLogprobs"]);m!=null&&h(r,["responseLogprobs"],m);const y=u(e,["logprobs"]);y!=null&&h(r,["logprobs"],y);const v=u(e,["presencePenalty"]);v!=null&&h(r,["presencePenalty"],v);const N=u(e,["frequencyPenalty"]);N!=null&&h(r,["frequencyPenalty"],N);const A=u(e,["seed"]);A!=null&&h(r,["seed"],A);const S=u(e,["responseMimeType"]);S!=null&&h(r,["responseMimeType"],S);const w=u(e,["responseSchema"]);w!=null&&h(r,["responseSchema"],lc(w));const _=u(e,["responseJsonSchema"]);_!=null&&h(r,["responseJsonSchema"],_);const C=u(e,["routingConfig"]);C!=null&&h(r,["routingConfig"],C);const F=u(e,["modelSelectionConfig"]);F!=null&&h(r,["modelConfig"],F);const D=u(e,["safetySettings"]);if(n!==void 0&&D!=null){let j=D;Array.isArray(j)&&(j=j.map(R=>R)),h(n,["safetySettings"],j)}const M=u(e,["tools"]);if(n!==void 0&&M!=null){let j=yo(M);Array.isArray(j)&&(j=j.map(R=>ff(vo(R)))),h(n,["tools"],j)}const E=u(e,["toolConfig"]);n!==void 0&&E!=null&&h(n,["toolConfig"],E);const L=u(e,["labels"]);n!==void 0&&L!=null&&h(n,["labels"],L);const z=u(e,["cachedContent"]);n!==void 0&&z!=null&&h(n,["cachedContent"],Mr(t,z));const H=u(e,["responseModalities"]);H!=null&&h(r,["responseModalities"],H);const I=u(e,["mediaResolution"]);I!=null&&h(r,["mediaResolution"],I);const k=u(e,["speechConfig"]);k!=null&&h(r,["speechConfig"],cc(k));const B=u(e,["audioTimestamp"]);B!=null&&h(r,["audioTimestamp"],B);const J=u(e,["thinkingConfig"]);J!=null&&h(r,["thinkingConfig"],J);const re=u(e,["imageConfig"]);if(re!=null&&h(r,["imageConfig"],n1(re)),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function od(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=Un(i);Array.isArray(s)&&(s=s.map(a=>Na(a))),h(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&h(n,["generationConfig"],km(t,o,n)),n}function sd(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=Un(i);Array.isArray(s)&&(s=s.map(a=>a)),h(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&h(n,["generationConfig"],Im(t,o,n)),n}function ad(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Xg(c))),h(e,["candidates"],l)}const i=u(t,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const s=u(t,["responseId"]);s!=null&&h(e,["responseId"],s);const a=u(t,["usageMetadata"]);return a!=null&&h(e,["usageMetadata"],a),e}function ld(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(p=>p)),h(e,["candidates"],c)}const i=u(t,["createTime"]);i!=null&&h(e,["createTime"],i);const o=u(t,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const s=u(t,["promptFeedback"]);s!=null&&h(e,["promptFeedback"],s);const a=u(t,["responseId"]);a!=null&&h(e,["responseId"],a);const l=u(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function Em(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const i=u(t,["aspectRatio"]);e!==void 0&&i!=null&&h(e,["parameters","aspectRatio"],i);const o=u(t,["guidanceScale"]);if(e!==void 0&&o!=null&&h(e,["parameters","guidanceScale"],o),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=u(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&h(e,["parameters","safetySetting"],s);const a=u(t,["personGeneration"]);e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a);const l=u(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&h(e,["parameters","includeSafetyAttributes"],l);const c=u(t,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const p=u(t,["language"]);e!==void 0&&p!=null&&h(e,["parameters","language"],p);const m=u(t,["outputMimeType"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","mimeType"],m);const y=u(t,["outputCompressionQuality"]);if(e!==void 0&&y!=null&&h(e,["parameters","outputOptions","compressionQuality"],y),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=u(t,["imageSize"]);if(e!==void 0&&v!=null&&h(e,["parameters","sampleImageSize"],v),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Pm(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=u(t,["negativePrompt"]);e!==void 0&&i!=null&&h(e,["parameters","negativePrompt"],i);const o=u(t,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&h(e,["parameters","aspectRatio"],s);const a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const y=u(t,["includeRaiReason"]);e!==void 0&&y!=null&&h(e,["parameters","includeRaiReason"],y);const v=u(t,["language"]);e!==void 0&&v!=null&&h(e,["parameters","language"],v);const N=u(t,["outputMimeType"]);e!==void 0&&N!=null&&h(e,["parameters","outputOptions","mimeType"],N);const A=u(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&h(e,["parameters","outputOptions","compressionQuality"],A);const S=u(t,["addWatermark"]);e!==void 0&&S!=null&&h(e,["parameters","addWatermark"],S);const w=u(t,["labels"]);e!==void 0&&w!=null&&h(e,["labels"],w);const _=u(t,["imageSize"]);e!==void 0&&_!=null&&h(e,["parameters","sampleImageSize"],_);const C=u(t,["enhancePrompt"]);return e!==void 0&&C!=null&&h(e,["parameters","enhancePrompt"],C),n}function Lm(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const o=u(e,["config"]);return o!=null&&Em(o,n),n}function Rm(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const o=u(e,["config"]);return o!=null&&Pm(o,n),n}function Mm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Wm(s))),h(e,["generatedImages"],o)}const i=u(t,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],uf(i)),e}function Dm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Sa(s))),h(e,["generatedImages"],o)}const i=u(t,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],df(i)),e}function Fm(t,e){const n={},r=u(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=u(t,["durationSeconds"]);if(e!==void 0&&i!=null&&h(e,["parameters","durationSeconds"],i),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const s=u(t,["resolution"]);e!==void 0&&s!=null&&h(e,["parameters","resolution"],s);const a=u(t,["personGeneration"]);if(e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=u(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const c=u(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&h(e,["parameters","enhancePrompt"],c),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=u(t,["lastFrame"]);e!==void 0&&p!=null&&h(e,["instances[0]","lastFrame"],_a(p));const m=u(t,["referenceImages"]);if(e!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(v=>U1(v))),h(e,["instances[0]","referenceImages"],y)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function jm(t,e){const n={},r=u(t,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const o=u(t,["fps"]);e!==void 0&&o!=null&&h(e,["parameters","fps"],o);const s=u(t,["durationSeconds"]);e!==void 0&&s!=null&&h(e,["parameters","durationSeconds"],s);const a=u(t,["seed"]);e!==void 0&&a!=null&&h(e,["parameters","seed"],a);const l=u(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=u(t,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const m=u(t,["pubsubTopic"]);e!==void 0&&m!=null&&h(e,["parameters","pubsubTopic"],m);const y=u(t,["negativePrompt"]);e!==void 0&&y!=null&&h(e,["parameters","negativePrompt"],y);const v=u(t,["enhancePrompt"]);e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v);const N=u(t,["generateAudio"]);e!==void 0&&N!=null&&h(e,["parameters","generateAudio"],N);const A=u(t,["lastFrame"]);e!==void 0&&A!=null&&h(e,["instances[0]","lastFrame"],nr(A));const S=u(t,["referenceImages"]);if(e!==void 0&&S!=null){let C=S;Array.isArray(C)&&(C=C.map(F=>B1(F))),h(e,["instances[0]","referenceImages"],C)}const w=u(t,["mask"]);e!==void 0&&w!=null&&h(e,["instances[0]","mask"],j1(w));const _=u(t,["compressionQuality"]);return e!==void 0&&_!=null&&h(e,["parameters","compressionQuality"],_),n}function Um(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const r=u(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=u(t,["done"]);i!=null&&h(e,["done"],i);const o=u(t,["error"]);o!=null&&h(e,["error"],o);const s=u(t,["response","generateVideoResponse"]);return s!=null&&h(e,["response"],Hm(s)),e}function Bm(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const r=u(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=u(t,["done"]);i!=null&&h(e,["done"],i);const o=u(t,["error"]);o!=null&&h(e,["error"],o);const s=u(t,["response"]);return s!=null&&h(e,["response"],Vm(s)),e}function qm(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const o=u(e,["image"]);o!=null&&h(n,["instances[0]","image"],_a(o));const s=u(e,["video"]);s!=null&&h(n,["instances[0]","video"],hf(s));const a=u(e,["source"]);a!=null&&Gm(a,n);const l=u(e,["config"]);return l!=null&&Fm(l,n),n}function Om(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const o=u(e,["image"]);o!=null&&h(n,["instances[0]","image"],nr(o));const s=u(e,["video"]);s!=null&&h(n,["instances[0]","video"],pf(s));const a=u(e,["source"]);a!=null&&zm(a,n);const l=u(e,["config"]);return l!=null&&jm(l,n),n}function Hm(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Jm(s))),h(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function Vm(t){const e={},n=u(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ym(s))),h(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function Gm(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=u(t,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],_a(i));const o=u(t,["video"]);return e!==void 0&&o!=null&&h(e,["instances[0]","video"],hf(o)),n}function zm(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=u(t,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],nr(i));const o=u(t,["video"]);return e!==void 0&&o!=null&&h(e,["instances[0]","video"],pf(o)),n}function Wm(t){const e={},n=u(t,["_self"]);n!=null&&h(e,["image"],r1(n));const r=u(t,["raiFilteredReason"]);r!=null&&h(e,["raiFilteredReason"],r);const i=u(t,["_self"]);return i!=null&&h(e,["safetyAttributes"],uf(i)),e}function Sa(t){const e={},n=u(t,["_self"]);n!=null&&h(e,["image"],cf(n));const r=u(t,["raiFilteredReason"]);r!=null&&h(e,["raiFilteredReason"],r);const i=u(t,["_self"]);i!=null&&h(e,["safetyAttributes"],df(i));const o=u(t,["prompt"]);return o!=null&&h(e,["enhancedPrompt"],o),e}function $m(t){const e={},n=u(t,["_self"]);n!=null&&h(e,["mask"],cf(n));const r=u(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["labels"],i)}return e}function Jm(t){const e={},n=u(t,["video"]);return n!=null&&h(e,["video"],D1(n)),e}function Ym(t){const e={},n=u(t,["_self"]);return n!=null&&h(e,["video"],F1(n)),e}function Km(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const r=u(t,["responseJsonSchema"]);r!=null&&h(e,["responseJsonSchema"],r);const i=u(t,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const o=u(t,["candidateCount"]);o!=null&&h(e,["candidateCount"],o);const s=u(t,["enableAffectiveDialog"]);s!=null&&h(e,["enableAffectiveDialog"],s);const a=u(t,["frequencyPenalty"]);a!=null&&h(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&h(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&h(e,["maxOutputTokens"],c);const p=u(t,["mediaResolution"]);p!=null&&h(e,["mediaResolution"],p);const m=u(t,["presencePenalty"]);m!=null&&h(e,["presencePenalty"],m);const y=u(t,["responseLogprobs"]);y!=null&&h(e,["responseLogprobs"],y);const v=u(t,["responseMimeType"]);v!=null&&h(e,["responseMimeType"],v);const N=u(t,["responseModalities"]);N!=null&&h(e,["responseModalities"],N);const A=u(t,["responseSchema"]);A!=null&&h(e,["responseSchema"],A);const S=u(t,["routingConfig"]);S!=null&&h(e,["routingConfig"],S);const w=u(t,["seed"]);w!=null&&h(e,["seed"],w);const _=u(t,["speechConfig"]);_!=null&&h(e,["speechConfig"],_);const C=u(t,["stopSequences"]);C!=null&&h(e,["stopSequences"],C);const F=u(t,["temperature"]);F!=null&&h(e,["temperature"],F);const D=u(t,["thinkingConfig"]);D!=null&&h(e,["thinkingConfig"],D);const M=u(t,["topK"]);M!=null&&h(e,["topK"],M);const E=u(t,["topP"]);if(E!=null&&h(e,["topP"],E),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Xm(t,e){const n={},r=u(e,["model"]);return r!=null&&h(n,["_url","name"],pt(t,r)),n}function Qm(t,e){const n={},r=u(e,["model"]);return r!=null&&h(n,["_url","name"],pt(t,r)),n}function Zm(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function e1(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function t1(t){const e={},n=u(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=u(t,["imageSize"]);if(r!=null&&h(e,["imageSize"],r),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function n1(t){const e={},n=u(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=u(t,["imageSize"]);r!=null&&h(e,["imageSize"],r);const i=u(t,["personGeneration"]);i!=null&&h(e,["personGeneration"],i);const o=u(t,["outputMimeType"]);o!=null&&h(e,["imageOutputOptions","mimeType"],o);const s=u(t,["outputCompressionQuality"]);return s!=null&&h(e,["imageOutputOptions","compressionQuality"],s),e}function r1(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],si(n));const r=u(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function cf(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&h(e,["imageBytes"],si(r));const i=u(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function _a(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],si(n));const r=u(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function nr(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const r=u(t,["imageBytes"]);r!=null&&h(e,["bytesBase64Encoded"],si(r));const i=u(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function i1(t,e,n){const r={},i=u(e,["pageSize"]);n!==void 0&&i!=null&&h(n,["_query","pageSize"],i);const o=u(e,["pageToken"]);n!==void 0&&o!=null&&h(n,["_query","pageToken"],o);const s=u(e,["filter"]);n!==void 0&&s!=null&&h(n,["_query","filter"],s);const a=u(e,["queryBase"]);return n!==void 0&&a!=null&&h(n,["_url","models_url"],tf(t,a)),r}function o1(t,e,n){const r={},i=u(e,["pageSize"]);n!==void 0&&i!=null&&h(n,["_query","pageSize"],i);const o=u(e,["pageToken"]);n!==void 0&&o!=null&&h(n,["_query","pageToken"],o);const s=u(e,["filter"]);n!==void 0&&s!=null&&h(n,["_query","filter"],s);const a=u(e,["queryBase"]);return n!==void 0&&a!=null&&h(n,["_url","models_url"],tf(t,a)),r}function s1(t,e){const n={},r=u(e,["config"]);return r!=null&&i1(t,r,n),n}function a1(t,e){const n={},r=u(e,["config"]);return r!=null&&o1(t,r,n),n}function l1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=u(t,["_self"]);if(i!=null){let o=nf(i);Array.isArray(o)&&(o=o.map(s=>jl(s))),h(e,["models"],o)}return e}function c1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=u(t,["_self"]);if(i!=null){let o=nf(i);Array.isArray(o)&&(o=o.map(s=>Ul(s))),h(e,["models"],o)}return e}function u1(t){const e={},n=u(t,["maskMode"]);n!=null&&h(e,["maskMode"],n);const r=u(t,["segmentationClasses"]);r!=null&&h(e,["maskClasses"],r);const i=u(t,["maskDilation"]);return i!=null&&h(e,["dilation"],i),e}function jl(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const r=u(t,["displayName"]);r!=null&&h(e,["displayName"],r);const i=u(t,["description"]);i!=null&&h(e,["description"],i);const o=u(t,["version"]);o!=null&&h(e,["version"],o);const s=u(t,["_self"]);s!=null&&h(e,["tunedModelInfo"],C1(s));const a=u(t,["inputTokenLimit"]);a!=null&&h(e,["inputTokenLimit"],a);const l=u(t,["outputTokenLimit"]);l!=null&&h(e,["outputTokenLimit"],l);const c=u(t,["supportedGenerationMethods"]);c!=null&&h(e,["supportedActions"],c);const p=u(t,["temperature"]);p!=null&&h(e,["temperature"],p);const m=u(t,["maxTemperature"]);m!=null&&h(e,["maxTemperature"],m);const y=u(t,["topP"]);y!=null&&h(e,["topP"],y);const v=u(t,["topK"]);v!=null&&h(e,["topK"],v);const N=u(t,["thinking"]);return N!=null&&h(e,["thinking"],N),e}function Ul(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const r=u(t,["displayName"]);r!=null&&h(e,["displayName"],r);const i=u(t,["description"]);i!=null&&h(e,["description"],i);const o=u(t,["versionId"]);o!=null&&h(e,["version"],o);const s=u(t,["deployedModels"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(y=>Sm(y))),h(e,["endpoints"],m)}const a=u(t,["labels"]);a!=null&&h(e,["labels"],a);const l=u(t,["_self"]);l!=null&&h(e,["tunedModelInfo"],T1(l));const c=u(t,["defaultCheckpointId"]);c!=null&&h(e,["defaultCheckpointId"],c);const p=u(t,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(y=>y)),h(e,["checkpoints"],m)}return e}function d1(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&h(e,["fileData"],_m(o));const s=u(t,["functionCall"]);s!=null&&h(e,["functionCall"],Am(s));const a=u(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&h(e,["inlineData"],Kg(l));const c=u(t,["text"]);c!=null&&h(e,["text"],c);const p=u(t,["thought"]);p!=null&&h(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&h(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&h(e,["videoMetadata"],y),e}function f1(t){const e={},n=u(t,["productImage"]);return n!=null&&h(e,["image"],nr(n)),e}function h1(t,e){const n={},r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const i=u(t,["baseSteps"]);e!==void 0&&i!=null&&h(e,["parameters","baseSteps"],i);const o=u(t,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const s=u(t,["seed"]);e!==void 0&&s!=null&&h(e,["parameters","seed"],s);const a=u(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const l=u(t,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=u(t,["addWatermark"]);e!==void 0&&c!=null&&h(e,["parameters","addWatermark"],c);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","mimeType"],p);const m=u(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);const y=u(t,["enhancePrompt"]);e!==void 0&&y!=null&&h(e,["parameters","enhancePrompt"],y);const v=u(t,["labels"]);return e!==void 0&&v!=null&&h(e,["labels"],v),n}function p1(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["source"]);i!=null&&m1(i,n);const o=u(e,["config"]);return o!=null&&h1(o,n),n}function g1(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Sa(i))),h(e,["generatedImages"],r)}return e}function m1(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=u(t,["personImage"]);e!==void 0&&i!=null&&h(e,["instances[0]","personImage","image"],nr(i));const o=u(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>f1(a))),h(e,["instances[0]","productImages"],s)}return n}function v1(t){const e={},n=u(t,["referenceImage"]);n!=null&&h(e,["referenceImage"],nr(n));const r=u(t,["referenceId"]);r!=null&&h(e,["referenceId"],r);const i=u(t,["referenceType"]);i!=null&&h(e,["referenceType"],i);const o=u(t,["maskImageConfig"]);o!=null&&h(e,["maskImageConfig"],u1(o));const s=u(t,["controlImageConfig"]);s!=null&&h(e,["controlImageConfig"],rm(s));const a=u(t,["styleImageConfig"]);a!=null&&h(e,["styleImageConfig"],a);const l=u(t,["subjectImageConfig"]);return l!=null&&h(e,["subjectImageConfig"],l),e}function uf(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const r=u(t,["safetyAttributes","scores"]);r!=null&&h(e,["scores"],r);const i=u(t,["contentType"]);return i!=null&&h(e,["contentType"],i),e}function df(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const r=u(t,["safetyAttributes","scores"]);r!=null&&h(e,["scores"],r);const i=u(t,["contentType"]);return i!=null&&h(e,["contentType"],i),e}function y1(t){const e={},n=u(t,["category"]);if(n!=null&&h(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function x1(t){const e={},n=u(t,["image"]);return n!=null&&h(e,["image"],nr(n)),e}function b1(t,e){const n={},r=u(t,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const i=u(t,["maxPredictions"]);e!==void 0&&i!=null&&h(e,["parameters","maxPredictions"],i);const o=u(t,["confidenceThreshold"]);e!==void 0&&o!=null&&h(e,["parameters","confidenceThreshold"],o);const s=u(t,["maskDilation"]);e!==void 0&&s!=null&&h(e,["parameters","maskDilation"],s);const a=u(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&h(e,["parameters","binaryColorThreshold"],a);const l=u(t,["labels"]);return e!==void 0&&l!=null&&h(e,["labels"],l),n}function w1(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["source"]);i!=null&&S1(i,n);const o=u(e,["config"]);return o!=null&&b1(o,n),n}function N1(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>$m(i))),h(e,["generatedMasks"],r)}return e}function S1(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=u(t,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],nr(i));const o=u(t,["scribbleImage"]);return e!==void 0&&o!=null&&h(e,["instances[0]","scribble"],x1(o)),n}function _1(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&h(e,["functionCallingConfig"],Cm(r)),e}function A1(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&h(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&h(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),h(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],Zm(s));const a=u(t,["googleSearch"]);a!=null&&h(e,["googleSearch"],e1(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&h(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&h(e,["urlContext"],c),e}function ff(t){const e={},n=u(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&h(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&h(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&h(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(y=>Tm(y))),h(e,["functionDeclarations"],m)}const a=u(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const p=u(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function C1(t){const e={},n=u(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const r=u(t,["createTime"]);r!=null&&h(e,["createTime"],r);const i=u(t,["updateTime"]);return i!=null&&h(e,["updateTime"],i),e}function T1(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const r=u(t,["createTime"]);r!=null&&h(e,["createTime"],r);const i=u(t,["updateTime"]);return i!=null&&h(e,["updateTime"],i),e}function k1(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const i=u(t,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const o=u(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&h(e,["defaultCheckpointId"],o),n}function I1(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const i=u(t,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const o=u(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&h(e,["defaultCheckpointId"],o),n}function E1(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","name"],pt(t,r));const i=u(e,["config"]);return i!=null&&k1(i,n),n}function P1(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&I1(i,n),n}function L1(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=u(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&h(e,["parameters","safetySetting"],i);const o=u(t,["personGeneration"]);e!==void 0&&o!=null&&h(e,["parameters","personGeneration"],o);const s=u(t,["includeRaiReason"]);e!==void 0&&s!=null&&h(e,["parameters","includeRaiReason"],s);const a=u(t,["outputMimeType"]);e!==void 0&&a!=null&&h(e,["parameters","outputOptions","mimeType"],a);const l=u(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&h(e,["parameters","outputOptions","compressionQuality"],l);const c=u(t,["enhanceInputImage"]);e!==void 0&&c!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],c);const p=u(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=u(t,["labels"]);e!==void 0&&m!=null&&h(e,["labels"],m);const y=u(t,["numberOfImages"]);e!==void 0&&y!=null&&h(e,["parameters","sampleCount"],y);const v=u(t,["mode"]);return e!==void 0&&v!=null&&h(e,["parameters","mode"],v),n}function R1(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["_url","model"],pt(t,r));const i=u(e,["image"]);i!=null&&h(n,["instances[0]","image"],nr(i));const o=u(e,["upscaleFactor"]);o!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=u(e,["config"]);return s!=null&&L1(s,n),n}function M1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Sa(o))),h(e,["generatedImages"],i)}return e}function D1(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["uri"],n);const r=u(t,["encodedVideo"]);r!=null&&h(e,["videoBytes"],si(r));const i=u(t,["encoding"]);return i!=null&&h(e,["mimeType"],i),e}function F1(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&h(e,["videoBytes"],si(r));const i=u(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function j1(t){const e={},n=u(t,["image"]);n!=null&&h(e,["_self"],nr(n));const r=u(t,["maskMode"]);return r!=null&&h(e,["maskMode"],r),e}function U1(t){const e={},n=u(t,["image"]);n!=null&&h(e,["image"],_a(n));const r=u(t,["referenceType"]);return r!=null&&h(e,["referenceType"],r),e}function B1(t){const e={},n=u(t,["image"]);n!=null&&h(e,["image"],nr(n));const r=u(t,["referenceType"]);return r!=null&&h(e,["referenceType"],r),e}function hf(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["uri"],n);const r=u(t,["videoBytes"]);r!=null&&h(e,["encodedVideo"],si(r));const i=u(t,["mimeType"]);return i!=null&&h(e,["encoding"],i),e}function pf(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["gcsUri"],n);const r=u(t,["videoBytes"]);r!=null&&h(e,["bytesBase64Encoded"],si(r));const i=u(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q1(t,e){const n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&h(e,["displayName"],r),n}function O1(t){const e={},n=u(t,["config"]);return n!=null&&q1(n,e),e}function H1(t,e){const n={},r=u(t,["force"]);return e!==void 0&&r!=null&&h(e,["_query","force"],r),n}function V1(t){const e={},n=u(t,["name"]);n!=null&&h(e,["_url","name"],n);const r=u(t,["config"]);return r!=null&&H1(r,e),e}function G1(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function z1(t,e){const n={},r=u(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["customMetadata"],o)}const i=u(t,["chunkingConfig"]);return e!==void 0&&i!=null&&h(e,["chunkingConfig"],i),n}function W1(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const r=u(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=u(t,["done"]);i!=null&&h(e,["done"],i);const o=u(t,["error"]);o!=null&&h(e,["error"],o);const s=u(t,["response"]);return s!=null&&h(e,["response"],J1(s)),e}function $1(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const r=u(t,["fileName"]);r!=null&&h(e,["fileName"],r);const i=u(t,["config"]);return i!=null&&z1(i,e),e}function J1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&h(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function Y1(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function K1(t){const e={},n=u(t,["config"]);return n!=null&&Y1(n,e),e}function X1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=u(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["fileSearchStores"],o)}return e}function gf(t,e){const n={},r=u(t,["mimeType"]);e!==void 0&&r!=null&&h(e,["mimeType"],r);const i=u(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=u(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["customMetadata"],a)}const s=u(t,["chunkingConfig"]);return e!==void 0&&s!=null&&h(e,["chunkingConfig"],s),n}function Q1(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const r=u(t,["config"]);return r!=null&&gf(r,e),e}function Z1(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e2="Content-Type",t2="X-Server-Timeout",n2="User-Agent",Bl="x-goog-api-client",r2="1.35.0",i2=`google-genai-sdk/${r2}`,o2="v1beta1",s2="v1beta";class a2{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:o2,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:s2,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&l2(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await cd(i),new Ml(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await cd(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return er(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:p}=yield Qe(i.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=o.decode(p,{stream:!0});try{const N=JSON.parse(m);if("error"in N){const A=JSON.parse(JSON.stringify(N.error)),S=A.status,w=A.code,_=`got status: ${S}. ${JSON.stringify(N)}`;if(w>=400&&w<600)throw new wa({message:_,status:w})}}catch(N){if(N.name==="ApiError")throw N}s+=m;let y=-1,v=0;for(;;){y=-1,v=0;for(const S of l){const w=s.indexOf(S);w!==-1&&(y===-1||w<y)&&(y=w,v=S.length)}if(y===-1)break;const N=s.substring(0,y);s=s.substring(y+v);const A=N.trim();if(A.startsWith(a)){const S=A.substring(a.length).trim();try{const w=new Response(S,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Qe(new Ml(w))}catch(w){throw new Error(`exception parsing stream chunk ${S}. ${w}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=i2+" "+this.clientOptions.userAgentExtra;return e[n2]=n,e[Bl]=n,e[e2]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(t2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},c=this.getFileName(e),p=De("upload/v1beta/files",l._url),m=await this.fetchUploadUrl(p,i.sizeBytes,i.mimeType,c,l,n==null?void 0:n.httpOptions);return o.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),a=String(s.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),m={};r!=null&&gf(r,m);const y=await this.fetchUploadUrl(c,a,l,p,m,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function cd(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new wa({message:i,status:n}):new Error(i)}}function l2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const c=s[l],p=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&p&&typeof p=="object"&&!Array.isArray(p)?a[l]=r(p,c):(p&&c&&typeof p!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof p}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c2="mcp_used/unknown";let u2=!1;function mf(t){for(const e of t)if(d2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return u2}function vf(t){var e;const n=(e=t[Bl])!==null&&e!==void 0?e:"";t[Bl]=(n+` ${c2}`).trimStart()}function d2(t){return t!==null&&typeof t=="object"&&t instanceof dc}function f2(t){return er(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const s=yield Qe(n.listTools({cursor:i}));for(const a of s.tools)yield yield Qe(a),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class dc{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new dc(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const p of this.mcpClients)try{for(var a=!0,l=(n=void 0,tr(f2(p))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const m=i;s.push(m);const y=m.name;if(o[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);o[y]=p}}catch(m){n={error:m}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),Gp(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function h2(t,e,n){const r=new Fp;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class p2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=v2(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const p=new Promise(C=>{c=C}),m=e.callbacks,y=function(){c({})},v=this.apiClient,N={onopen:y,onmessage:C=>{h2(v,m.onmessage,C)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(C){}},A=this.webSocketFactory.create(l,m2(s),N);A.connect(),await p;const _={setup:{model:pt(this.apiClient,e.model)}};return A.send(JSON.stringify(_)),new g2(A,this.apiClient)}}class g2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Og(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=qg(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(fo.PLAY)}pause(){this.sendPlaybackControl(fo.PAUSE)}stop(){this.sendPlaybackControl(fo.STOP)}resetContext(){this.sendPlaybackControl(fo.RESET_CONTEXT)}close(){this.conn.close()}}function m2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function v2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function x2(t,e,n){const r=new Dp;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=Gg(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class b2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new p2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let p;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&mf(e.config.tools)&&vf(m);const y=_2(m);if(this.apiClient.isVertexAI())p=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y,p);else{const z=this.apiClient.getApiKey();let H="BidiGenerateContent",I="key";z!=null&&z.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),H="BidiGenerateContentConstrained",I="access_token"),p=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${H}?${I}=${z}`}let v=()=>{};const N=new Promise(z=>{v=z}),A=e.callbacks,S=function(){var z;(z=A==null?void 0:A.onopen)===null||z===void 0||z.call(A),v({})},w=this.apiClient,_={onopen:S,onmessage:z=>{x2(w,A.onmessage,z)},onerror:(n=A==null?void 0:A.onerror)!==null&&n!==void 0?n:function(z){},onclose:(r=A==null?void 0:A.onclose)!==null&&r!==void 0?r:function(z){}},C=this.webSocketFactory.create(p,S2(y),_);C.connect(),await N;let F=pt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const z=this.apiClient.getProject(),H=this.apiClient.getLocation();F=`projects/${z}/locations/${H}/`+F}let D={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[pa.AUDIO]}:e.config.responseModalities=[pa.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const M=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],E=[];for(const z of M)if(this.isCallableTool(z)){const H=z;E.push(await H.tool())}else E.push(z);E.length>0&&(e.config.tools=E);const L={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?D=Bg(this.apiClient,L):D=Ug(this.apiClient,L),delete D.config,C.send(JSON.stringify(D)),new N2(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const w2={turnComplete:!0};class N2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Un(n.turns),e.isVertexAI()||(r=r.map(i=>Na(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(y2)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},w2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Vg(e)}:n={realtimeInput:Hg(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function S2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function _2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ud=10;function dd(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(go(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function go(t){return"callTool"in t&&typeof t.callTool=="function"}function A2(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>go(i)))!==null&&r!==void 0?r:!1}function fd(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(go(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function hd(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C2 extends Rr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!A2(n)||dd(n.config))return await this.generateContentInternal(l);const c=fd(n);if(c.length>0){const A=c.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let p,m;const y=Un(l.contents),v=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:ud;let N=0;for(;N<v&&(p=await this.generateContentInternal(l),!(!p.functionCalls||p.functionCalls.length===0));){const A=p.candidates[0].content,S=[];for(const w of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(go(w)){const C=await w.callTool(p.functionCalls);S.push(...C)}N++,m={role:"user",parts:S},l.contents=Un(l.contents),l.contents.push(A),l.contents.push(m),hd(l.config)&&(y.push(A),y.push(m))}return hd(l.config)&&(p.automaticFunctionCallingHistory=y),p},this.generateContentStream=async n=>{var r,i,o,s,a;if(this.maybeMoveToResponseJsonSchem(n),dd(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const l=fd(n);if(l.length>0){const m=l.map(y=>`tools[${y}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,p=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:s.push(l);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new ki(Lr.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async l=>go(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&mf(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),vf(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(go(s)){const a=s,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:ud;let s=!1,a=0;const l=await this.initAfcToolsMap(e);return(function(c,p,m){return er(this,arguments,function*(){for(var y,v,N,A,S,w;a<o;){s&&(a++,s=!1);const D=yield Qe(c.processParamsMaybeAddMcpUsage(m)),M=yield Qe(c.generateContentStreamInternal(D)),E=[],L=[];try{for(var _=!0,C=(v=void 0,tr(M)),F;F=yield Qe(C.next()),y=F.done,!y;_=!0){A=F.value,_=!1;const z=A;if(yield yield Qe(z),z.candidates&&(!((S=z.candidates[0])===null||S===void 0)&&S.content)){L.push(z.candidates[0].content);for(const H of(w=z.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(a<o&&H.functionCall){if(!H.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(H.functionCall.name)){const I=yield Qe(p.get(H.functionCall.name).callTool([H.functionCall]));E.push(...I)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${H.functionCall.name}`)}}}}catch(z){v={error:z}}finally{try{!_&&!y&&(N=C.return)&&(yield Qe(N.call(C)))}finally{if(v)throw v.error}}if(E.length>0){s=!0;const z=new Ko;z.candidates=[{content:{role:"user",parts:E}}],yield yield Qe(z);const H=[];H.push(...L),H.push({role:"user",parts:E});const I=Un(m.contents).concat(H);m.contents=I}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=sd(this.apiClient,e);return a=De("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=ld(p),y=new Ko;return Object.assign(y,m),y})}else{const c=od(this.apiClient,e);return a=De("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=ad(p),y=new Ko;return Object.assign(y,m),y})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=sd(this.apiClient,e);return a=De("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(m){return er(this,arguments,function*(){var y,v,N,A;try{for(var S=!0,w=tr(m),_;_=yield Qe(w.next()),y=_.done,!y;S=!0){A=_.value,S=!1;const C=A,F=ld(yield Qe(C.json()));F.sdkHttpResponse={headers:C.headers};const D=new Ko;Object.assign(D,F),yield yield Qe(D)}}catch(C){v={error:C}}finally{try{!S&&!y&&(N=w.return)&&(yield Qe(N.call(w)))}finally{if(v)throw v.error}}})})}else{const c=od(this.apiClient,e);return a=De("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(m){return er(this,arguments,function*(){var y,v,N,A;try{for(var S=!0,w=tr(m),_;_=yield Qe(w.next()),y=_.done,!y;S=!0){A=_.value,S=!1;const C=A,F=ad(yield Qe(C.json()));F.sdkHttpResponse={headers:C.headers};const D=new Ko;Object.assign(D,F),yield yield Qe(D)}}catch(C){v={error:C}}finally{try{!S&&!y&&(N=w.return)&&(yield Qe(N.call(w)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=bm(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Nm(p),y=new Hu;return Object.assign(y,m),y})}else{const c=xm(this.apiClient,e);return a=De("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=wm(p),y=new Hu;return Object.assign(y,m),y})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Rm(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Dm(p),y=new Vu;return Object.assign(y,m),y})}else{const c=Lm(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Mm(p),y=new Vu;return Object.assign(y,m),y})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=gm(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=mm(l),p=new _p;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=R1(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=M1(l),p=new Ap;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=p1(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=g1(l),p=new Cp;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=w1(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=N1(l),p=new Tp;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Qm(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>Ul(p))}else{const c=Xm(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>jl(p))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=a1(this.apiClient,e);return a=De("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=c1(p),y=new Gu;return Object.assign(y,m),y})}else{const c=s1(this.apiClient,e);return a=De("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=l1(p),y=new Gu;return Object.assign(y,m),y})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=P1(this.apiClient,e);return a=De("{model}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>Ul(p))}else{const c=E1(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>jl(p))}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=dm(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=hm(p),y=new zu;return Object.assign(y,m),y})}else{const c=um(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=fm(p),y=new zu;return Object.assign(y,m),y})}}async countTokens(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=am(this.apiClient,e);return a=De("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=cm(p),y=new Wu;return Object.assign(y,m),y})}else{const c=sm(this.apiClient,e);return a=De("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=lm(p),y=new Wu;return Object.assign(y,m),y})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=Zg(this.apiClient,e);return o=De("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=em(l),p=new kp;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Om(this.apiClient,e);return a=De("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>{const m=Bm(p),y=new ga;return Object.assign(y,m),y})}else{const c=qm(this.apiClient,e);return a=De("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=Um(p),y=new ga;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T2 extends Rr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=yp(e);return a=De("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s}else{const c=vp(e);return a=De("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=up(e);return o=De("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k2(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function I2(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>U2(o))),h(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&h(e,["role"],r),e}function E2(t,e,n){const r={},i=u(e,["expireTime"]);n!==void 0&&i!=null&&h(n,["expireTime"],i);const o=u(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&h(n,["newSessionExpireTime"],o);const s=u(e,["uses"]);n!==void 0&&s!=null&&h(n,["uses"],s);const a=u(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&h(n,["bidiGenerateContentSetup"],j2(t,a));const l=u(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&h(n,["fieldMask"],l),r}function P2(t,e){const n={},r=u(e,["config"]);return r!=null&&h(n,["config"],E2(t,r,n)),n}function L2(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function R2(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const r=u(t,["args"]);r!=null&&h(e,["args"],r);const i=u(t,["name"]);if(i!=null&&h(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function M2(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function D2(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function F2(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r);const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","mediaResolution"],c);const p=u(t,["seed"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","seed"],p);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","speechConfig"],uc(m));const y=u(t,["thinkingConfig"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","thinkingConfig"],y);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],v);const N=u(t,["systemInstruction"]);e!==void 0&&N!=null&&h(e,["setup","systemInstruction"],I2(dn(N)));const A=u(t,["tools"]);if(e!==void 0&&A!=null){let M=yo(A);Array.isArray(M)&&(M=M.map(E=>q2(vo(E)))),h(e,["setup","tools"],M)}const S=u(t,["sessionResumption"]);e!==void 0&&S!=null&&h(e,["setup","sessionResumption"],B2(S));const w=u(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&h(e,["setup","inputAudioTranscription"],w);const _=u(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&h(e,["setup","outputAudioTranscription"],_);const C=u(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&h(e,["setup","realtimeInputConfig"],C);const F=u(t,["contextWindowCompression"]);e!==void 0&&F!=null&&h(e,["setup","contextWindowCompression"],F);const D=u(t,["proactivity"]);if(e!==void 0&&D!=null&&h(e,["setup","proactivity"],D),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function j2(t,e){const n={},r=u(e,["model"]);r!=null&&h(n,["setup","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&h(n,["config"],F2(i,n)),n}function U2(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&h(e,["fileData"],L2(o));const s=u(t,["functionCall"]);s!=null&&h(e,["functionCall"],R2(s));const a=u(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&h(e,["inlineData"],k2(l));const c=u(t,["text"]);c!=null&&h(e,["text"],c);const p=u(t,["thought"]);p!=null&&h(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&h(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&h(e,["videoMetadata"],y),e}function B2(t){const e={},n=u(t,["handle"]);if(n!=null&&h(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function q2(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&h(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&h(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),h(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],M2(s));const a=u(t,["googleSearch"]);a!=null&&h(e,["googleSearch"],D2(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&h(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&h(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O2(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function H2(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=O2(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>s.includes(c)?`generationConfig.${c}`:c));const l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class V2 extends Rr{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=P2(this.apiClient,e);o=De("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const l=H2(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G2(t,e){const n={},r=u(t,["force"]);return e!==void 0&&r!=null&&h(e,["_query","force"],r),n}function z2(t){const e={},n=u(t,["name"]);n!=null&&h(e,["_url","name"],n);const r=u(t,["config"]);return r!=null&&G2(r,e),e}function W2(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function $2(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function J2(t){const e={},n=u(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const r=u(t,["config"]);return r!=null&&$2(r,e),e}function Y2(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=u(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K2 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async n=>new ki(Lr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=W2(e);return o=De("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=z2(e);i=De("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=J2(e);return o=De("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Y2(l),p=new Ip;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X2 extends Rr{constructor(e,n=new K2(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new ki(Lr.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=O1(e);return o=De("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=G1(e);return o=De("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=V1(e);i=De("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=K1(e);return o=De("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=X1(l),p=new Ep;return Object.assign(p,c),p})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Q1(e);return o=De("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Z1(l),p=new Pp;return Object.assign(p,c),p})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$1(e);return o=De("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=W1(l),p=new oc;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yf=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return yf=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const Q2=()=>yf();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ql(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Ol=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bn extends Error{}class mn extends Bn{constructor(e,n,r,i){super(`${mn.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Aa({message:r,cause:Ol(n)});const o=n;return e===400?new bf(e,o,r,i):e===401?new wf(e,o,r,i):e===403?new Nf(e,o,r,i):e===404?new Sf(e,o,r,i):e===409?new _f(e,o,r,i):e===422?new Af(e,o,r,i):e===429?new Cf(e,o,r,i):e>=500?new Tf(e,o,r,i):new mn(e,o,r,i)}}class Hl extends mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Aa extends mn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class xf extends Aa{constructor({message:e}={}){super({message:e??"Request timed out."})}}class bf extends mn{}class wf extends mn{}class Nf extends mn{}class Sf extends mn{}class _f extends mn{}class Af extends mn{}class Cf extends mn{}class Tf extends mn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z2=/^[a-z][a-z0-9+.-]*:/i,e5=t=>Z2.test(t);let Vl=t=>(Vl=Array.isArray,Vl(t));const t5=Vl;let n5=t5;const pd=n5;function r5(t){if(!t)return!0;for(const e in t)return!1;return!0}function i5(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const o5=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Bn(`${t} must be an integer`);if(e<0)throw new Bn(`${t} must be a positive integer`);return e},s5=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a5=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l5(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const c5=()=>{var t,e,n,r,i;const o=l5();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lo,"X-Stainless-OS":md(Deno.build.os),"X-Stainless-Arch":gd(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lo,"X-Stainless-OS":md((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":gd((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=u5();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function u5(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const gd=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",md=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ea;const d5=()=>ea??(ea=c5());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f5(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function kf(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function h5(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return kf({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function If(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function p5(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g5=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ef=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function bl(t,e,n){return Ef(),new File(t,e??"unknown_file",n)}function m5(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const v5=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pf=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",y5=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Pf(t),x5=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function b5(t,e,n){if(Ef(),t=await t,y5(t))return t instanceof File?t:bl([await t.arrayBuffer()],t.name);if(x5(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),bl(await Gl(i),e,n)}const r=await Gl(t);if(e||(e=m5(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return bl(r,e,n)}async function Gl(t){var e,n,r,i,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(Pf(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(v5(t))try{for(var a=!0,l=tr(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const p=i;s.push(...await Gl(p))}}catch(p){n={error:p}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const p=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${p?`; constructor: ${p}`:""}${w5(t)}`)}return s}function w5(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lf{constructor(e){this._client=e}}Lf._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rf(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const vd=Object.freeze(Object.create(null)),N5=(t=Rf)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],s=n.reduce((p,m,y)=>{var v,N,A;/[?#]/.test(m)&&(i=!0);const S=r[y];let w=(i?encodeURIComponent:t)(""+S);return y!==r.length&&(S==null||typeof S=="object"&&S.toString===((A=Object.getPrototypeOf((N=Object.getPrototypeOf((v=S.hasOwnProperty)!==null&&v!==void 0?v:vd))!==null&&N!==void 0?N:vd))===null||A===void 0?void 0:A.toString))&&(w=S+"",o.push({start:p.length+m.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(S).slice(8,-1)} is not a valid path parameter`})),p+m+(y===r.length?"":w)},""),a=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)o.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(o.sort((p,m)=>p.start-m.start),o.length>0){let p=0;const m=o.reduce((y,v)=>{const N=" ".repeat(v.start-p),A="^".repeat(v.length);return p=v.start+v.length,y+N+A},"");throw new Bn(`Path parameters result in path with invalid segments:
${o.map(y=>y.error).join(`
`)}
${s}
${m}`)}return s}),ta=N5(Rf);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mf extends Lf{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=va(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Bn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Bn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ta`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(ta`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(ta`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:s=this._client.apiVersion}=o,a=va(o,["api_version"]);return this._client.get(ta`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}Mf._key=Object.freeze(["interactions"]);class Df extends Mf{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S5(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let na;function fc(t){let e;return(na??(e=new globalThis.TextEncoder,na=e.encode.bind(e)))(t)}let ra;function yd(t){let e;return(ra??(e=new globalThis.TextDecoder,ra=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ca{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?fc(e):e;this.buffer=S5([this.buffer,n]);const r=[];let i;for(;(i=_5(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(yd(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=yd(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Ca.NEWLINE_CHARS=new Set([`
`,"\r"]);Ca.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function _5(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function A5(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ya={off:0,error:200,warn:300,info:400,debug:500},xd=(t,e,n)=>{if(t){if(i5(ya,t))return t;gn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ya))}`)}};function ts(){}function ia(t,e,n){return!e||ya[t]>ya[n]?ts:e[t].bind(e)}const C5={error:ts,warn:ts,info:ts,debug:ts};let bd=new WeakMap;function gn(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return C5;const i=bd.get(n);if(i&&i[0]===r)return i[1];const o={error:ia("error",n,r),warn:ia("warn",n,r),info:ia("info",n,r),debug:ia("debug",n,r)};return bd.set(n,[r,o]),o}const bi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ho{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?gn(r):console;function s(){return er(this,arguments,function*(){var l,c,p,m;if(i)throw new Bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let y=!1;try{try{for(var v=!0,N=tr(T5(e,n)),A;A=yield Qe(N.next()),l=A.done,!l;v=!0){m=A.value,v=!1;const S=m;if(!y)if(S.data.startsWith("[DONE]")){y=!0;continue}else try{yield yield Qe(JSON.parse(S.data))}catch(w){throw o.error("Could not parse message into JSON:",S.data),o.error("From chunk:",S.raw),w}}}catch(S){c={error:S}}finally{try{!v&&!l&&(p=N.return)&&(yield Qe(p.call(N)))}finally{if(c)throw c.error}}y=!0}catch(S){if(ql(S))return yield Qe(void 0);throw S}finally{y||n.abort()}})}return new ho(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return er(this,arguments,function*(){var l,c,p,m;const y=new Ca,v=If(e);try{for(var N=!0,A=tr(v),S;S=yield Qe(A.next()),l=S.done,!l;N=!0){m=S.value,N=!1;const w=m;for(const _ of y.decode(w))yield yield Qe(_)}}catch(w){c={error:w}}finally{try{!N&&!l&&(p=A.return)&&(yield Qe(p.call(A)))}finally{if(c)throw c.error}}for(const w of y.flush())yield yield Qe(w)})}function s(){return er(this,arguments,function*(){var l,c,p,m;if(i)throw new Bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let y=!1;try{try{for(var v=!0,N=tr(o()),A;A=yield Qe(N.next()),l=A.done,!l;v=!0){m=A.value,v=!1;const S=m;y||S&&(yield yield Qe(JSON.parse(S)))}}catch(S){c={error:S}}finally{try{!v&&!l&&(p=N.return)&&(yield Qe(p.call(N)))}finally{if(c)throw c.error}}y=!0}catch(S){if(ql(S))return yield Qe(void 0);throw S}finally{y||n.abort()}})}return new ho(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new ho(()=>i(e),this.controller,this.client),new ho(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return kf({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const s=fc(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function T5(t,e){return er(this,arguments,function*(){var r,i,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Bn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Bn("Attempted to iterate over a response with no body");const a=new I5,l=new Ca,c=If(t.body);try{for(var p=!0,m=tr(k5(c)),y;y=yield Qe(m.next()),r=y.done,!r;p=!0){s=y.value,p=!1;const v=s;for(const N of l.decode(v)){const A=a.decode(N);A&&(yield yield Qe(A))}}}catch(v){i={error:v}}finally{try{!p&&!r&&(o=m.return)&&(yield Qe(o.call(m)))}finally{if(i)throw i.error}}for(const v of l.flush()){const N=a.decode(v);N&&(yield yield Qe(N))}})}function k5(t){return er(this,arguments,function*(){var n,r,i,o;let s=new Uint8Array;try{for(var a=!0,l=tr(t),c;c=yield Qe(l.next()),n=c.done,!n;a=!0){o=c.value,a=!1;const p=o;if(p==null)continue;const m=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?fc(p):p;let y=new Uint8Array(s.length+m.length);y.set(s),y.set(m,s.length),s=y;let v;for(;(v=A5(s))!==-1;)yield yield Qe(s.slice(0,v)),s=s.slice(v)}}catch(p){r={error:p}}finally{try{!a&&!n&&(i=l.return)&&(yield Qe(i.call(l)))}finally{if(r)throw r.error}}s.length>0&&(yield yield Qe(s))})}class I5{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=E5(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function E5(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function P5(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=await(async()=>{var a;if(e.options.stream)return gn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ho.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return gn(t).debug(`[${r}] response parsed`,bi({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hc extends Promise{constructor(e,n,r=P5){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new hc(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ff=Symbol("brand.privateNullableHeaders");function*L5(t){if(!t)return;if(Ff in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():pd(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=pd(r[1])?r[1]:[r[1]];let s=!1;for(const a of o)a!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,a])}}const Xo=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,s]of L5(r)){const a=o.toLowerCase();i.has(a)||(e.delete(o),i.add(a)),s===null?(e.delete(o),n.add(a)):(e.append(o,s),n.delete(a))}}return{[Ff]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wl=t=>{var e,n,r,i,o,s;if(typeof globalThis.process<"u")return(r=(n=(e=ip)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jf;class Ta{constructor(e){var n,r,i,o,s,a,l,{baseURL:c=wl("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(n=wl("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,y=va(e,["baseURL","apiKey","apiVersion"]);const v=Object.assign(Object.assign({apiKey:p,apiVersion:m},y),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=v.baseURL,this.timeout=(r=v.timeout)!==null&&r!==void 0?r:Ta.DEFAULT_TIMEOUT,this.logger=(i=v.logger)!==null&&i!==void 0?i:console;const N="warn";this.logLevel=N,this.logLevel=(s=(o=xd(v.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:xd(wl("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:N,this.fetchOptions=v.fetchOptions,this.maxRetries=(a=v.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=v.fetch)!==null&&l!==void 0?l:f5(),this.encoder=g5,this._options=v,this.apiKey=p,this.apiVersion=m,this.clientAdapter=v.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Xo([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Xo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Xo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Bn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${lo}`}defaultIdempotencyKey(){return`stainless-node-retry-${Q2()}`}makeStatusError(e,n,r,i){return mn.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=e5(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return r5(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new hc(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,s;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:p,timeout:m}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:p,options:a});const y="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=r===void 0?"":`, retryOf: ${r}`,N=Date.now();if(gn(this).debug(`[${y}] sending request`,bi({retryOfRequestLogID:r,method:a.method,url:p,options:a,headers:c.headers})),!((o=a.signal)===null||o===void 0)&&o.aborted)throw new Hl;const A=new AbortController,S=await this.fetchWithTimeout(p,c,m,A).catch(Ol),w=Date.now();if(S instanceof globalThis.Error){const C=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Hl;const F=ql(S)||/timed? ?out/i.test(String(S)+("cause"in S?String(S.cause):""));if(n)return gn(this).info(`[${y}] connection ${F?"timed out":"failed"} - ${C}`),gn(this).debug(`[${y}] connection ${F?"timed out":"failed"} (${C})`,bi({retryOfRequestLogID:r,url:p,durationMs:w-N,message:S.message})),this.retryRequest(a,n,r??y);throw gn(this).info(`[${y}] connection ${F?"timed out":"failed"} - error; no more retries left`),gn(this).debug(`[${y}] connection ${F?"timed out":"failed"} (error; no more retries left)`,bi({retryOfRequestLogID:r,url:p,durationMs:w-N,message:S.message})),F?new xf:new Aa({cause:S})}const _=`[${y}${v}] ${c.method} ${p} ${S.ok?"succeeded":"failed"} with status ${S.status} in ${w-N}ms`;if(!S.ok){const C=await this.shouldRetry(S);if(n&&C){const z=`retrying, ${n} attempts remaining`;return await p5(S.body),gn(this).info(`${_} - ${z}`),gn(this).debug(`[${y}] response error (${z})`,bi({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,durationMs:w-N})),this.retryRequest(a,n,r??y,S.headers)}const F=C?"error; no more retries left":"error; not retryable";gn(this).info(`${_} - ${F}`);const D=await S.text().catch(z=>Ol(z).message),M=s5(D),E=M?void 0:D;throw gn(this).debug(`[${y}] response error (${F})`,bi({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,message:E,durationMs:Date.now()-N})),this.makeStatusError(S.status,M,E,S.headers)}return gn(this).info(_),gn(this).debug(`[${y}] response start`,bi({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,durationMs:w-N})),{response:S,options:a,controller:A,requestLogID:y,retryOfRequestLogID:r,startTime:N}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:s,method:a}=o,l=va(o,["signal","method"]);s&&s.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),p=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m=Object.assign(Object.assign(Object.assign({signal:i.signal},p?{duplex:"half"}:{}),{method:"GET"}),l);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let s;const a=i==null?void 0:i.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(s=c)}const l=i==null?void 0:i.get("retry-after");if(l&&!s){const c=parseFloat(l);Number.isNaN(c)?s=Date.parse(l)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await a5(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const s=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:p}=s,m=this.buildURL(l,c,p);"timeout"in s&&o5("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:y,body:v}=this.buildBody({options:s}),N=await this.buildHeaders({options:e,method:a,bodyHeaders:y,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:N},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"}),v&&{body:v}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:m,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let a=Xo([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),d5()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Xo([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:h5(e)}:this.encoder({body:e,headers:r})}}Ta.DEFAULT_TIMEOUT=6e4;class Qt extends Ta{constructor(){super(...arguments),this.interactions=new Df(this)}}jf=Qt;Qt.GeminiNextGenAPIClient=jf;Qt.GeminiNextGenAPIClientError=Bn;Qt.APIError=mn;Qt.APIConnectionError=Aa;Qt.APIConnectionTimeoutError=xf;Qt.APIUserAbortError=Hl;Qt.NotFoundError=Sf;Qt.ConflictError=_f;Qt.RateLimitError=Cf;Qt.BadRequestError=bf;Qt.AuthenticationError=wf;Qt.InternalServerError=Tf;Qt.PermissionDeniedError=Nf;Qt.UnprocessableEntityError=Af;Qt.toFile=b5;Qt.Interactions=Df;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R5(t,e){const n={},r=u(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function M5(t,e){const n={},r=u(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function D5(t,e){const n={},r=u(t,["sdkHttpResponse"]);return r!=null&&h(n,["sdkHttpResponse"],r),n}function F5(t,e){const n={},r=u(t,["sdkHttpResponse"]);return r!=null&&h(n,["sdkHttpResponse"],r),n}function j5(t,e,n){const r={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&h(e,["displayName"],i),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=u(t,["epochCount"]);e!==void 0&&o!=null&&h(e,["tuningTask","hyperparameters","epochCount"],o);const s=u(t,["learningRateMultiplier"]);if(s!=null&&h(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=u(t,["batchSize"]);e!==void 0&&a!=null&&h(e,["tuningTask","hyperparameters","batchSize"],a);const l=u(t,["learningRate"]);if(e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","learningRate"],l),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function U5(t,e,n){const r={};let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const v=u(t,["validationDataset"]);e!==void 0&&v!=null&&h(e,["supervisedTuningSpec"],wd(v))}else if(i==="PREFERENCE_TUNING"){const v=u(t,["validationDataset"]);e!==void 0&&v!=null&&h(e,["preferenceOptimizationSpec"],wd(v))}const o=u(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&h(e,["tunedModelDisplayName"],o);const s=u(t,["description"]);e!==void 0&&s!=null&&h(e,["description"],s);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const v=u(t,["epochCount"]);e!==void 0&&v!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],v)}else if(a==="PREFERENCE_TUNING"){const v=u(t,["epochCount"]);e!==void 0&&v!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],v)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const v=u(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],v)}else if(l==="PREFERENCE_TUNING"){const v=u(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],v)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const v=u(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],v)}else if(c==="PREFERENCE_TUNING"){const v=u(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],v)}let p=u(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const v=u(t,["adapterSize"]);e!==void 0&&v!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v)}else if(p==="PREFERENCE_TUNING"){const v=u(t,["adapterSize"]);e!==void 0&&v!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],v)}if(u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=u(t,["labels"]);e!==void 0&&m!=null&&h(e,["labels"],m);const y=u(t,["beta"]);return e!==void 0&&y!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],y),r}function B5(t,e){const n={},r=u(t,["baseModel"]);r!=null&&h(n,["baseModel"],r);const i=u(t,["preTunedModel"]);i!=null&&h(n,["preTunedModel"],i);const o=u(t,["trainingDataset"]);o!=null&&K5(o);const s=u(t,["config"]);return s!=null&&j5(s,n),n}function q5(t,e){const n={},r=u(t,["baseModel"]);r!=null&&h(n,["baseModel"],r);const i=u(t,["preTunedModel"]);i!=null&&h(n,["preTunedModel"],i);const o=u(t,["trainingDataset"]);o!=null&&X5(o,n,e);const s=u(t,["config"]);return s!=null&&U5(s,n,e),n}function O5(t,e){const n={},r=u(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function H5(t,e){const n={},r=u(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function V5(t,e,n){const r={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);e!==void 0&&o!=null&&h(e,["_query","pageToken"],o);const s=u(t,["filter"]);return e!==void 0&&s!=null&&h(e,["_query","filter"],s),r}function G5(t,e,n){const r={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);e!==void 0&&o!=null&&h(e,["_query","pageToken"],o);const s=u(t,["filter"]);return e!==void 0&&s!=null&&h(e,["_query","filter"],s),r}function z5(t,e){const n={},r=u(t,["config"]);return r!=null&&V5(r,n),n}function W5(t,e){const n={},r=u(t,["config"]);return r!=null&&G5(r,n),n}function $5(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=u(t,["nextPageToken"]);i!=null&&h(n,["nextPageToken"],i);const o=u(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Uf(a))),h(n,["tuningJobs"],s)}return n}function J5(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=u(t,["nextPageToken"]);i!=null&&h(n,["nextPageToken"],i);const o=u(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>zl(a))),h(n,["tuningJobs"],s)}return n}function Y5(t,e){const n={},r=u(t,["name"]);r!=null&&h(n,["model"],r);const i=u(t,["name"]);return i!=null&&h(n,["endpoint"],i),n}function K5(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=u(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),h(n,["examples","examples"],i)}return n}function X5(t,e,n){const r={};let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=u(t,["gcsUri"]);e!==void 0&&s!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=u(t,["gcsUri"]);e!==void 0&&s!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Uf(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&h(n,["name"],i);const o=u(t,["state"]);o!=null&&h(n,["state"],Zd(o));const s=u(t,["createTime"]);s!=null&&h(n,["createTime"],s);const a=u(t,["tuningTask","startTime"]);a!=null&&h(n,["startTime"],a);const l=u(t,["tuningTask","completeTime"]);l!=null&&h(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&h(n,["updateTime"],c);const p=u(t,["description"]);p!=null&&h(n,["description"],p);const m=u(t,["baseModel"]);m!=null&&h(n,["baseModel"],m);const y=u(t,["_self"]);return y!=null&&h(n,["tunedModel"],Y5(y)),n}function zl(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&h(n,["name"],i);const o=u(t,["state"]);o!=null&&h(n,["state"],Zd(o));const s=u(t,["createTime"]);s!=null&&h(n,["createTime"],s);const a=u(t,["startTime"]);a!=null&&h(n,["startTime"],a);const l=u(t,["endTime"]);l!=null&&h(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&h(n,["updateTime"],c);const p=u(t,["error"]);p!=null&&h(n,["error"],p);const m=u(t,["description"]);m!=null&&h(n,["description"],m);const y=u(t,["baseModel"]);y!=null&&h(n,["baseModel"],y);const v=u(t,["tunedModel"]);v!=null&&h(n,["tunedModel"],v);const N=u(t,["preTunedModel"]);N!=null&&h(n,["preTunedModel"],N);const A=u(t,["supervisedTuningSpec"]);A!=null&&h(n,["supervisedTuningSpec"],A);const S=u(t,["preferenceOptimizationSpec"]);S!=null&&h(n,["preferenceOptimizationSpec"],S);const w=u(t,["tuningDataStats"]);w!=null&&h(n,["tuningDataStats"],w);const _=u(t,["encryptionSpec"]);_!=null&&h(n,["encryptionSpec"],_);const C=u(t,["partnerModelTuningSpec"]);C!=null&&h(n,["partnerModelTuningSpec"],C);const F=u(t,["customBaseModel"]);F!=null&&h(n,["customBaseModel"],F);const D=u(t,["experiment"]);D!=null&&h(n,["experiment"],D);const M=u(t,["labels"]);M!=null&&h(n,["labels"],M);const E=u(t,["outputUri"]);E!=null&&h(n,["outputUri"],E);const L=u(t,["pipelineJob"]);L!=null&&h(n,["pipelineJob"],L);const z=u(t,["serviceAccount"]);z!=null&&h(n,["serviceAccount"],z);const H=u(t,["tunedModelDisplayName"]);H!=null&&h(n,["tunedModelDisplayName"],H);const I=u(t,["veoTuningSpec"]);return I!=null&&h(n,["veoTuningSpec"],I),n}function Q5(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&h(n,["name"],i);const o=u(t,["metadata"]);o!=null&&h(n,["metadata"],o);const s=u(t,["done"]);s!=null&&h(n,["done"],s);const a=u(t,["error"]);return a!=null&&h(n,["error"],a),n}function wd(t,e){const n={},r=u(t,["gcsUri"]);r!=null&&h(n,["validationDatasetUri"],r);const i=u(t,["vertexDatasetResource"]);return i!=null&&h(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z5 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ki(Lr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Rl.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=H5(e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>zl(p))}else{const c=O5(e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>Uf(p))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=W5(e);return a=De("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=J5(p),y=new $u;return Object.assign(y,m),y})}else{const c=z5(e);return a=De("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=$5(p),y=new $u;return Object.assign(y,m),y})}}async cancel(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=M5(e);return a=De("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=F5(p),y=new Ju;return Object.assign(y,m),y})}else{const c=R5(e);return a=De("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=D5(p),y=new Ju;return Object.assign(y,m),y})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=q5(e,e);return o=De("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>zl(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=B5(e);return o=De("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>Q5(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ev{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const tv=1024*1024*8,nv=3,rv=1e3,iv=2,xa="x-goog-upload-status";async function ov(t,e,n){var r;const i=await Bf(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[xa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function sv(t,e,n){var r;const i=await Bf(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[xa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=$d(o),a=new sc;return Object.assign(a,s),a}async function Bf(t,e,n){var r,i;let o=0,s=0,a=new Ml(new Response),l="upload";for(o=t.size;s<o;){const c=Math.min(tv,o-s),p=t.slice(s,s+c);s+c>=o&&(l+=", finalize");let m=0,y=rv;for(;m<nv&&(a=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[xa]));)m++,await lv(y),y=y*iv;if(s+=c,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[xa])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function av(t){return{size:t.size,type:t.type}}function lv(t){return new Promise(e=>setTimeout(e,t))}class cv{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ov(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sv(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await av(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uv{create(e,n,r){return new dv(e,n,r)}}class dv{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nd="x-goog-api-key";class fv{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Nd)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Nd,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hv="gl-node/";class pv{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Qt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=lp(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new fv(this.apiKey);this.apiClient=new a2({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:hv+"web",uploader:new cv,downloader:new ev}),this.models=new C2(this.apiClient),this.live=new b2(this.apiClient,i,new uv),this.batches=new j0(this.apiClient),this.chats=new yg(this.models,this.apiClient),this.caches=new gg(this.apiClient),this.files=new kg(this.apiClient),this.operations=new T2(this.apiClient),this.authTokens=new V2(this.apiClient),this.tunings=new Z5(this.apiClient),this.fileSearchStores=new X2(this.apiClient)}}const gv=t=>t.text||"",mv=async(t,e)=>{var r;const n=new pv({apiKey:"PLACEHOLDER_API_KEY"});try{const o=`
            As a business data analyst, review the following sales data for an online business in Cambodia. Provide a concise summary of key insights and actionable recommendations, **written in clear Khmer language**.

            **Filters Applied for this Report:** ${[`Date Range: ${e.datePreset==="all"?"All Time":`${e.startDate} to ${e.endDate}`}`,`Team: ${e.team||"All"}`,`User: ${e.user||"All"}`,`Payment Status: ${e.paymentStatus||"All"}`].join("; ")}

            **Key Metrics Summary:**
            - Total Revenue: $${((r=t.revenue)==null?void 0:r.toFixed(2))||0}
            - Total Orders: ${t.totalOrders||0}

            **Your analysis should be a bulleted list covering:**
            1.  An overall summary of business performance.
            2.  Identify potential areas of concern or opportunities for growth.
            3.  Provide one strategic recommendation to improve sales.
        `,s=await n.models.generateContent({model:"gemini-3-pro-preview",contents:o});return gv(s)||"Could not generate analysis from Gemini."}catch(i){return console.error("Gemini report analysis error:",i),"Could not generate analysis from Gemini."}},vv=()=>f.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-2",children:[f.jsx("path",{d:"M12 2C11.4696 2 10.9609 2.21071 10.5858 2.58579C10.2107 2.96086 10 3.46957 10 4V4.53C8.7 5.2 7.64 6.27 7 7.53L6.5 7.03C6.12275 6.65624 5.6122 6.44963 5.08003 6.44963C4.54786 6.44963 4.03731 6.65624 3.65997 7.03C3.28263 7.40376 3.07602 7.91431 3.07602 8.44648C3.07602 8.97865 3.28263 9.4892 3.65997 9.86297L4.16 10.3C3.5 11.56 2.82 12.98 2.59 14.5H2C1.46957 14.5 0.960859 14.7107 0.585786 15.0858C0.210714 15.4609 0 15.9696 0 16.5C0 17.0304 0.210714 17.5391 0.585786 17.9142C0.960859 18.2893 1.46957 18.5 2 18.5H2.59C3.12 20.31 4.28 21.88 5.84 22.95C6.34 23.23 6.94 23.09 7.22 22.59C7.5 22.09 7.36 21.49 6.86 21.21C5.7 20.41 4.81 19.24 4.34 17.87L12 14.01L19.66 17.87C19.19 19.24 18.3 20.41 17.14 21.21C16.64 21.5 16.5 22.1 16.78 22.59C17.06 23.09 17.66 23.23 18.16 22.95C19.72 21.88 20.88 20.31 21.41 18.5H22C22.5304 18.5 23.0391 18.2893 23.4142 17.9142C23.7893 17.5391 24 17.0304 24 16.5C24 15.9696 23.7893 15.4609 23.4142 15.0858C23.0391 14.7107 22.5304 14.5 22 14.5H21.41C21.18 12.98 20.5 11.56 19.84 10.3L20.34 9.86297C20.7174 9.4892 20.924 8.97865 20.924 8.44648C20.924 7.91431 20.7174 7.40376 20.34 7.03C19.9627 6.65624 19.4521 6.44963 18.92 6.44963C18.3878 6.44963 17.8773 6.65624 17.5 7.03L17 7.53C16.36 6.27 15.3 5.2 14 4.53V4C14 3.46957 13.7893 2.96086 13.4142 2.58579C13.0391 2.21071 12.5304 2 12 2Z",fill:"url(#paint0_linear_1_2)"}),f.jsx("defs",{children:f.jsxs("linearGradient",{id:"paint0_linear_1_2",x1:"12",y1:"2",x2:"12",y2:"22.95",gradientUnits:"userSpaceOnUse",children:[f.jsx("stop",{stopColor:"#93c5fd"}),f.jsx("stop",{offset:"1",stopColor:"#3b82f6"})]})})]}),yv=({onClick:t,isLoading:e,disabled:n=!1,children:r,className:i=""})=>f.jsxs("button",{type:"button",onClick:t,disabled:e||n,className:`btn btn-secondary flex items-center justify-center !p-2 text-sm transition-all duration-300 ease-in-out border border-blue-500/50 bg-gray-700 hover:bg-blue-800/40 hover:border-blue-500 disabled:cursor-not-allowed disabled:bg-gray-800 disabled:opacity-50 ${i}`,children:[e?f.jsx(Pr,{size:"sm"}):f.jsx(vv,{}),f.jsx("span",{className:"ml-1",children:r})]}),Qy=({orders:t,appData:e,dateFilter:n,startDate:r,endDate:i,onNavigate:o,contextFilters:s,onBack:a})=>{var D;const[l,c]=ve.useState(""),[p,m]=ve.useState(!1),[y,v]=ve.useState("All"),N=(M,E)=>{if(o){const L={};s&&(s.team&&(L.team=s.team),s.store&&(L.store=s.store),s.paymentStatus&&(L.paymentStatus=s.paymentStatus),s.user&&(L.user=s.user),s.page&&(L.page=s.page),s.bank&&(L.bank=s.bank),s.product&&(L.product=s.product),s.internalCost&&(L.internalCost=s.internalCost),s.location&&(L.location=s.location)),M==="shippingFilter"&&(L.shipping=E),M==="driverFilter"&&(L.driver=E),M==="fulfillmentStore"&&(L.fulfillmentStore=E),y!=="All"&&M!=="fulfillmentStore"&&(L.fulfillmentStore=y),L.datePreset=n,L.startDate=r,L.endDate=i,o(L)}},A=ve.useMemo(()=>y==="All"?t:t.filter(M=>M["Fulfillment Store"]===y),[t,y]),S=ve.useMemo(()=>{const M=A.reduce((k,B)=>k+(Number(B["Internal Cost"])||0),0),E=A.reduce((k,B)=>k+(Number(B["Shipping Fee (Customer)"])||0),0),L=E-M,z={},H={},I={};return A.forEach(k=>{var j,R;const B=k["Internal Shipping Method"]||"Other";if(!z[B]){const W=(j=e.shippingMethods)==null?void 0:j.find(K=>K.MethodName===B);z[B]={name:B,cost:0,orders:0,logo:(W==null?void 0:W.LogosURL)||""}}z[B].cost+=Number(k["Internal Cost"])||0,z[B].orders+=1;const J=k["Internal Shipping Details"]||"N/A";if(J!=="N/A"){if(!H[J]){const W=(R=e.drivers)==null?void 0:R.find(K=>K.DriverName===J);H[J]={name:J,cost:0,orders:0,photo:(W==null?void 0:W.ImageURL)||""}}H[J].cost+=Number(k["Internal Cost"])||0,H[J].orders+=1}const re=k["Fulfillment Store"]||"Unassigned";I[re]||(I[re]={name:re,cost:0,orders:0}),I[re].cost+=Number(k["Internal Cost"])||0,I[re].orders+=1}),{totalInternalCost:M,totalCustomerFee:E,netShipping:L,totalOrders:A.length,methods:Object.values(z).sort((k,B)=>B.cost-k.cost),drivers:Object.values(H).sort((k,B)=>B.cost-k.cost),stores:Object.values(I).sort((k,B)=>B.cost-k.cost)}},[A,e]),w=ve.useMemo(()=>{const M={};return A.forEach(E=>{const L=(E.Location||"").split(/[,|\-|/]/)[0].trim();!L||L.toUpperCase()==="N/A"||(M[L]||(M[L]={name:L,revenue:0,orders:0}),M[L].revenue+=Number(E["Internal Cost"])||0,M[L].orders+=1)}),Object.values(M).sort((E,L)=>L.revenue-E.revenue)},[A]),_=async()=>{m(!0);try{const M=await mv(S,{reportType:"shipping"});c(M)}catch{c("AI Analysis error.")}finally{m(!1)}},C=()=>{let M="\uFEFF";M+=`SHIPPING COST REPORT SUMMARY
`,M+=`Generated Date,${new Date().toLocaleDateString()}
`,M+=`Period,${n==="custom"?`${r} to ${i}`:n}
`,M+=`Filter Store,${y}

`,M+=`Metric,Value
`,M+=`Total Internal Cost,${S.totalInternalCost.toFixed(2)}
`,M+=`Total Customer Fee,${S.totalCustomerFee.toFixed(2)}
`,M+=`Net Shipping,${S.netShipping.toFixed(2)}
`,M+=`Total Orders,${S.totalOrders}

`,M+=`SHIPPING METHODS (COMPANIES)
`,M+=`Company Name,Total Orders,Total Cost ($)
`,S.methods.forEach(H=>{M+=`"${H.name}",${H.orders},${H.cost.toFixed(2)}
`}),M+=`
`,M+=`DRIVERS
`,M+=`Driver Name,Total Orders,Total Cost ($)
`,S.drivers.forEach(H=>{M+=`"${H.name}",${H.orders},${H.cost.toFixed(2)}
`}),M+=`
`,M+=`FULFILLMENT STORES (STOCK)
`,M+=`Store Name,Total Orders,Total Cost ($)
`,S.stores.forEach(H=>{M+=`"${H.name}",${H.orders},${H.cost.toFixed(2)}
`});const E=new Blob([M],{type:"text/csv;charset=utf-8;"}),L=document.createElement("a"),z=URL.createObjectURL(E);L.setAttribute("href",z),L.setAttribute("download",`Shipping_Report_${y}_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(L),L.click(),document.body.removeChild(L)},F=()=>{const M=window.open("","_blank");if(!M){alert("Please allow popups to view the report.");return}const E=n==="custom"?`${r} to ${i}`:n.toUpperCase(),L=(H,I)=>H.map((k,B)=>`
                <tr class="border-b border-gray-200 hover:bg-gray-50">
                    <td class="py-3 px-4 text-sm text-gray-700 font-bold">${B+1}</td>
                    <td class="py-3 px-4 text-sm font-bold text-gray-800">${k.name}</td>
                    <td class="py-3 px-4 text-center text-sm font-mono font-bold text-blue-600">${k.orders}</td>
                    <td class="py-3 px-4 text-right text-sm font-mono font-bold text-gray-800">$${k.cost.toLocaleString(void 0,{minimumFractionDigits:2})}</td>
                </tr>
            `).join(""),z=`
            <!DOCTYPE html>
            <html lang="km">
            <head>
                <meta charset="UTF-8">
                <title>Shipping Report - ${y}</title>
                <script src="https://cdn.tailwindcss.com"><\/script>
                <link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
                <style>
                    body { font-family: 'Kantumruy Pro', sans-serif; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
                    @media print { 
                        .no-print { display: none !important; } 
                        body { background: white; }
                        .page-break { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body class="bg-gray-100 min-h-screen py-10 print:py-0">
                
                <!-- Action Bar (Hidden on Print) -->
                <div class="no-print fixed top-0 left-0 right-0 bg-gray-900 text-white p-4 shadow-lg flex justify-between items-center z-50">
                    <div class="font-bold text-lg">Shipping Report Preview</div>
                    <div class="flex gap-3">
                        <button onclick="window.close()" class="px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 transition">Close</button>
                        <button onclick="window.print()" class="px-6 py-2 rounded bg-blue-600 hover:bg-blue-500 font-bold transition shadow-lg flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"></path></svg>
                            Print / Save as PDF
                        </button>
                    </div>
                </div>

                <!-- Report Container (A4 Style) -->
                <div class="max-w-[210mm] mx-auto bg-white p-10 shadow-2xl print:shadow-none print:w-full mt-10 print:mt-0 mb-10">
                    
                    <!-- Header -->
                    <div class="flex justify-between items-start border-b-2 border-black pb-6 mb-8">
                        <div>
                            <h1 class="text-3xl font-black text-gray-900 uppercase tracking-tight">របាយការណ៍ដឹកជញ្ជូន</h1>
                            <p class="text-sm text-gray-500 font-bold mt-1 uppercase tracking-widest">Shipping & Fulfillment Cost</p>
                        </div>
                        <div class="text-right">
                            <p class="text-xs font-bold text-gray-500 uppercase">Period</p>
                            <p class="text-sm font-black text-gray-900">${E}</p>
                            <p class="text-xs font-bold text-gray-500 uppercase mt-2">Filter Store</p>
                            <p class="text-sm font-black text-blue-600">${y}</p>
                        </div>
                    </div>

                    <!-- Summary Cards -->
                    <div class="grid grid-cols-3 gap-6 mb-10">
                        <div class="p-4 bg-red-50 rounded-xl border border-red-100 text-center">
                            <p class="text-xs font-black text-red-400 uppercase tracking-widest mb-1">Total Internal Cost</p>
                            <p class="text-2xl font-black text-gray-800">$${S.totalInternalCost.toLocaleString()}</p>
                        </div>
                        <div class="p-4 bg-green-50 rounded-xl border border-green-100 text-center">
                            <p class="text-xs font-black text-green-500 uppercase tracking-widest mb-1">Customer Fees</p>
                            <p class="text-2xl font-black text-gray-800">$${S.totalCustomerFee.toLocaleString()}</p>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-xl border border-gray-200 text-center">
                            <p class="text-xs font-black text-gray-500 uppercase tracking-widest mb-1">Total Orders</p>
                            <p class="text-2xl font-black text-gray-800">${S.totalOrders}</p>
                        </div>
                    </div>

                    <!-- Table 1: Companies -->
                    <div class="mb-10 page-break">
                        <h2 class="text-lg font-black text-blue-800 border-l-4 border-blue-600 pl-3 mb-4 uppercase">1. ក្រុមហ៊ុនដឹកជញ្ជូន (Companies)</h2>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-blue-600 text-white">
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase w-12">#</th>
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase">Company Name</th>
                                    <th class="py-2 px-4 text-center text-xs font-black uppercase w-24">Orders</th>
                                    <th class="py-2 px-4 text-right text-xs font-black uppercase w-32">Cost ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${L(S.methods)}
                            </tbody>
                            <tfoot class="bg-gray-100 font-black">
                                <tr>
                                    <td colspan="2" class="py-3 px-4 text-right uppercase text-xs tracking-widest text-gray-500">Total</td>
                                    <td class="py-3 px-4 text-center text-blue-600">${S.methods.reduce((H,I)=>H+I.orders,0)}</td>
                                    <td class="py-3 px-4 text-right text-gray-900">$${S.methods.reduce((H,I)=>H+I.cost,0).toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <!-- Table 2: Drivers -->
                    <div class="mb-10 page-break">
                        <h2 class="text-lg font-black text-emerald-700 border-l-4 border-emerald-600 pl-3 mb-4 uppercase">2. អ្នកដឹក (Drivers)</h2>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-emerald-600 text-white">
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase w-12">#</th>
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase">Driver Name</th>
                                    <th class="py-2 px-4 text-center text-xs font-black uppercase w-24">Orders</th>
                                    <th class="py-2 px-4 text-right text-xs font-black uppercase w-32">Cost ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${L(S.drivers)}
                            </tbody>
                            <tfoot class="bg-gray-100 font-black">
                                <tr>
                                    <td colspan="2" class="py-3 px-4 text-right uppercase text-xs tracking-widest text-gray-500">Total</td>
                                    <td class="py-3 px-4 text-center text-blue-600">${S.drivers.reduce((H,I)=>H+I.orders,0)}</td>
                                    <td class="py-3 px-4 text-right text-gray-900">$${S.drivers.reduce((H,I)=>H+I.cost,0).toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <!-- Table 3: Stores -->
                    <div class="page-break">
                        <h2 class="text-lg font-black text-orange-700 border-l-4 border-orange-500 pl-3 mb-4 uppercase">3. ឃ្លាំង (Fulfillment Stores)</h2>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-orange-500 text-white">
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase w-12">#</th>
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase">Store Name</th>
                                    <th class="py-2 px-4 text-center text-xs font-black uppercase w-24">Orders</th>
                                    <th class="py-2 px-4 text-right text-xs font-black uppercase w-32">Cost ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${L(S.stores)}
                            </tbody>
                            <tfoot class="bg-gray-100 font-black">
                                <tr>
                                    <td colspan="2" class="py-3 px-4 text-right uppercase text-xs tracking-widest text-gray-500">Total</td>
                                    <td class="py-3 px-4 text-center text-blue-600">${S.stores.reduce((H,I)=>H+I.orders,0)}</td>
                                    <td class="py-3 px-4 text-right text-gray-900">$${S.stores.reduce((H,I)=>H+I.cost,0).toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <div class="mt-12 pt-6 border-t border-gray-200 text-center text-xs text-gray-400">
                        Generated by O-System on ${new Date().toLocaleString("km-KH")}
                    </div>

                </div>
            </body>
            </html>
        `;M.document.write(z),M.document.close()};return f.jsxs("div",{className:"space-y-8 animate-fade-in pb-12",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-gray-900/40 p-4 rounded-3xl border border-white/5",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[a&&f.jsx("button",{onClick:a,className:"bg-gray-800 p-3 rounded-2xl border border-gray-700 hover:bg-gray-700 active:scale-95 transition-all",children:f.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tight",children:"របាយការណ៍ដឹកជញ្ជូន"}),f.jsx("p",{className:"text-xs text-gray-500 font-bold mt-1",children:"Shipping & Fulfillment Cost Analysis"})]})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center w-full sm:w-auto",children:[f.jsxs("div",{className:"bg-gray-800 p-1 rounded-xl border border-white/10 flex items-center w-full sm:w-auto",children:[f.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase px-3 whitespace-nowrap",children:"View:"}),f.jsxs("select",{value:y,onChange:M=>v(M.target.value),className:"bg-transparent border-none text-xs font-black text-white focus:ring-0 cursor-pointer py-1.5 pr-8 pl-1 w-full",children:[f.jsx("option",{value:"All",children:"All Stores"}),(D=e.stores)==null?void 0:D.map(M=>f.jsx("option",{value:M.StoreName,children:M.StoreName},M.StoreName))]})]}),f.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[f.jsxs("button",{onClick:C,className:"flex-1 sm:flex-none justify-center px-4 py-2.5 bg-emerald-600/10 border border-emerald-500/30 text-emerald-400 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-emerald-600 hover:text-white transition-all flex items-center gap-2 active:scale-95",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Excel"]}),f.jsxs("button",{onClick:F,className:"flex-1 sm:flex-none justify-center px-4 py-2.5 bg-red-600/10 border border-red-500/30 text-red-400 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-red-600 hover:text-white transition-all flex items-center gap-2 active:scale-95",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"View & Print"]})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsx(Zs,{label:"ចំណាយដឹកជញ្ជូនសរុប",value:`$${S.totalInternalCost.toLocaleString()}`,icon:"🚚",colorClass:"from-orange-600 to-red-500"}),f.jsx(Zs,{label:"ថ្លៃដឹកពីអតិថិជន",value:`$${S.totalCustomerFee.toLocaleString()}`,icon:"💰",colorClass:"from-blue-600 to-indigo-500"}),f.jsx(Zs,{label:"តុល្យភាព (Net)",value:`$${S.netShipping.toLocaleString()}`,icon:"⚖️",colorClass:S.netShipping>=0?"from-emerald-600 to-teal-500":"from-red-600 to-pink-500"}),f.jsx(Zs,{label:"ចំនួនកញ្ចប់សរុប",value:S.totalOrders,icon:"📦",colorClass:"from-purple-600 to-blue-500"})]}),f.jsx("div",{className:"w-full",children:f.jsx(rp,{data:w,valueLabel:"Cost"})}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[f.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[f.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5",children:[f.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-2",children:"សង្ខេបតាមក្រុមហ៊ុនដឹកជញ្ជូន"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm text-left",children:[f.jsx("thead",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest border-b border-gray-800",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3",children:"ក្រុមហ៊ុន"}),f.jsx("th",{className:"px-4 py-3 text-center",children:"ចំនួន Orders"}),f.jsx("th",{className:"px-4 py-3 text-right",children:"ទឹកប្រាក់បង់ ($)"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-800",children:S.methods.map((M,E)=>f.jsxs("tr",{className:"hover:bg-white/5",children:[f.jsxs("td",{className:"px-4 py-3 font-bold text-gray-200 flex items-center gap-3",children:[f.jsx("img",{src:st(M.logo),className:"w-8 h-8 rounded-lg object-contain bg-gray-800 p-1 border border-gray-700",alt:""}),M.name]}),f.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-400 cursor-pointer hover:underline hover:text-blue-300 transition-colors",onClick:()=>N("shippingFilter",M.name),children:M.orders}),f.jsxs("td",{className:"px-4 py-3 text-right font-black text-white cursor-pointer hover:underline hover:text-gray-300 transition-colors",onClick:()=>N("shippingFilter",M.name),children:["$",M.cost.toLocaleString(void 0,{minimumFractionDigits:2})]})]},E))}),f.jsx("tfoot",{className:"bg-white/5 border-t-2 border-white/10",children:f.jsxs("tr",{children:[f.jsx("td",{className:"px-4 py-3 text-right text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Grand Total"}),f.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-300 text-base",children:S.methods.reduce((M,E)=>M+E.orders,0)}),f.jsxs("td",{className:"px-4 py-3 text-right font-black text-emerald-400 text-base",children:["$",S.methods.reduce((M,E)=>M+E.cost,0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})})]}),f.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5",children:[f.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-2",children:"សង្ខេបតាមអ្នកដឹក (Drivers)"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm text-left",children:[f.jsx("thead",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest border-b border-gray-800",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3",children:"អ្នកដឹក"}),f.jsx("th",{className:"px-4 py-3 text-center",children:"ចំនួន Orders"}),f.jsx("th",{className:"px-4 py-3 text-right",children:"ទឹកប្រាក់បង់ ($)"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-800",children:S.drivers.map((M,E)=>f.jsxs("tr",{className:"hover:bg-white/5",children:[f.jsxs("td",{className:"px-4 py-3 font-bold text-gray-200 flex items-center gap-3",children:[f.jsx("img",{src:st(M.photo),className:"w-8 h-8 rounded-full object-cover bg-gray-800 border border-gray-700",alt:""}),M.name]}),f.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-400 cursor-pointer hover:underline hover:text-blue-300 transition-colors",onClick:()=>N("driverFilter",M.name),children:M.orders}),f.jsxs("td",{className:"px-4 py-3 text-right font-black text-white cursor-pointer hover:underline hover:text-gray-300 transition-colors",onClick:()=>N("driverFilter",M.name),children:["$",M.cost.toLocaleString(void 0,{minimumFractionDigits:2})]})]},E))}),f.jsx("tfoot",{className:"bg-white/5 border-t-2 border-white/10",children:f.jsxs("tr",{children:[f.jsx("td",{className:"px-4 py-3 text-right text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Grand Total"}),f.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-300 text-base",children:S.drivers.reduce((M,E)=>M+E.orders,0)}),f.jsxs("td",{className:"px-4 py-3 text-right font-black text-emerald-400 text-base",children:["$",S.drivers.reduce((M,E)=>M+E.cost,0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})})]}),f.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5",children:[f.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-2",children:"សង្ខេបតាម Fulfillment Store (Stock)"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm text-left",children:[f.jsx("thead",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest border-b border-gray-800",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3",children:"ឈ្មោះឃ្លាំង (Store)"}),f.jsx("th",{className:"px-4 py-3 text-center",children:"ចំនួន Orders"}),f.jsx("th",{className:"px-4 py-3 text-right",children:"ទឹកប្រាក់បង់ ($)"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-800",children:S.stores.map((M,E)=>f.jsxs("tr",{className:"hover:bg-white/5",children:[f.jsxs("td",{className:"px-4 py-3 font-bold text-gray-200 flex items-center gap-3",children:[f.jsxs("span",{className:"w-8 h-8 rounded-lg bg-gray-800 text-gray-400 flex items-center justify-center text-[10px] border border-gray-700",children:["#",E+1]}),M.name]}),f.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-400 cursor-pointer hover:underline hover:text-blue-300 transition-colors",onClick:()=>N("fulfillmentStore",M.name),children:M.orders}),f.jsxs("td",{className:"px-4 py-3 text-right font-black text-white cursor-pointer hover:underline hover:text-gray-300 transition-colors",onClick:()=>N("fulfillmentStore",M.name),children:["$",M.cost.toLocaleString(void 0,{minimumFractionDigits:2})]})]},E))}),f.jsx("tfoot",{className:"bg-white/5 border-t-2 border-white/10",children:f.jsxs("tr",{children:[f.jsx("td",{className:"px-4 py-3 text-right text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Grand Total"}),f.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-300 text-base",children:S.stores.reduce((M,E)=>M+E.orders,0)}),f.jsxs("td",{className:"px-4 py-3 text-right font-black text-emerald-400 text-base",children:["$",S.stores.reduce((M,E)=>M+E.cost,0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})})]})]}),f.jsx("div",{className:"lg:col-span-4",children:f.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5 h-full flex flex-col shadow-2xl relative overflow-hidden group",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8 relative z-10",children:[f.jsx("div",{children:f.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest",children:"ការវិភាគដោយ AI"})}),f.jsx(yv,{onClick:_,isLoading:p,children:"Analyze"})]}),f.jsx("div",{className:"flex-grow bg-black/40 rounded-3xl p-6 border border-white/5 overflow-y-auto custom-scrollbar min-h-[300px] relative z-10",children:l?f.jsx("div",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:l}):f.jsx("div",{className:"flex flex-col items-center justify-center h-full opacity-20 text-center",children:f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:'ចុច "Analyze" ដើម្បីវិភាគ'})})})]})})]})]})},Zy=({data:t,title:e})=>{const[n,r]=ve.useState(null);if(!t||t.length===0)return f.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 min-h-[300px]",children:"No data available for chart."});const i=350,o=500,s=50,a=100,l=40,c=10,p=i-l-10,m=o/t.length-c,y=Math.max(...t.map(_=>_.value),0),v=y===0?0:p/y,N=(_,C)=>{const F=_.currentTarget.getBoundingClientRect(),D=`${C.label}: $${C.value.toFixed(2)}`;r({visible:!0,x:F.left+window.scrollX,y:F.top+window.scrollY,content:D})},A=()=>{r(null)},w=(_=>{if(_===0)return[0];const C=5;let F=Math.ceil(_/C);const D=Math.pow(10,Math.floor(Math.log10(F||1))),M=F/D;return D>0&&(M>5?F=10*D:M>2?F=5*D:M>1&&(F=2*D)),F===0?[0,_]:Array.from({length:C+2},(E,L)=>L*F).filter(E=>E<=_*1.1)})(y);return f.jsxs("div",{className:"relative",children:[f.jsx("h3",{className:"text-lg font-bold mb-4 text-white text-center",children:e}),f.jsx("div",{className:"w-full overflow-x-auto",children:f.jsxs("svg",{viewBox:`0 0 ${o+s} ${i+a}`,className:"min-w-[500px]",preserveAspectRatio:"xMinYMin meet",children:[f.jsx("g",{className:"y-axis",children:w.map(_=>f.jsxs("g",{transform:`translate(0, ${i-_*v})`,children:[f.jsx("line",{x1:s-5,y1:"0",x2:o+s,y2:"0",stroke:"#374151"}),f.jsx("text",{x:s-10,y:"3",textAnchor:"end",fill:"#9ca3af",fontSize:"12",children:_>=1e3?`${(_/1e3).toFixed(0)}k`:_})]},_))}),f.jsx("g",{className:"bars",transform:`translate(${s}, 0)`,children:t.map((_,C)=>{const F=_.value*v,D=C*(m+c)+c/2,M=i-F,E=30;return f.jsxs("g",{children:[_.imageUrl&&f.jsx("image",{href:st(_.imageUrl),x:D+m/2-E/2,y:M-E-5,height:E,width:E,clipPath:`circle(${E/2}px at center)`}),f.jsx("rect",{x:D,y:M,width:m,height:F,fill:"#3b82f6",className:"transition-all duration-300 hover:opacity-80",onMouseOver:L=>N(L,_),onMouseOut:A}),f.jsx("text",{x:D+m/2,y:i+15,textAnchor:"end",fill:"#9ca3af",fontSize:"12",className:"select-none",transform:`rotate(-60 ${D+m/2},${i+15})`,children:_.label})]},C)})})]})}),n&&f.jsx("div",{className:"fixed p-2 text-xs text-white bg-gray-900 border border-gray-600 rounded-md shadow-lg z-50",style:{left:n.x,top:n.y-35,pointerEvents:"none",transform:"translateX(-50%)"},children:n.content})]})};function bt(t){"@babel/helpers - typeof";return bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(t)}var un=Uint8Array,In=Uint16Array,pc=Int32Array,ka=new un([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ia=new un([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Wl=new un([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qf=function(t,e){for(var n=new In(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new pc(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},Of=qf(ka,2),Hf=Of.b,$l=Of.r;Hf[28]=258,$l[258]=28;var Vf=qf(Ia,0),xv=Vf.b,Sd=Vf.r,Jl=new In(32768);for(var kt=0;kt<32768;++kt){var Yr=(kt&43690)>>1|(kt&21845)<<1;Yr=(Yr&52428)>>2|(Yr&13107)<<2,Yr=(Yr&61680)>>4|(Yr&3855)<<4,Jl[kt]=((Yr&65280)>>8|(Yr&255)<<8)>>1}var vr=(function(t,e,n){for(var r=t.length,i=0,o=new In(e);i<r;++i)t[i]&&++o[t[i]-1];var s=new In(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(n){a=new In(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],p=e-t[i],m=s[t[i]-1]++<<p,y=m|(1<<p)-1;m<=y;++m)a[Jl[m]>>l]=c}else for(a=new In(r),i=0;i<r;++i)t[i]&&(a[i]=Jl[s[t[i]-1]++]>>15-t[i]);return a}),ii=new un(288);for(var kt=0;kt<144;++kt)ii[kt]=8;for(var kt=144;kt<256;++kt)ii[kt]=9;for(var kt=256;kt<280;++kt)ii[kt]=7;for(var kt=280;kt<288;++kt)ii[kt]=8;var as=new un(32);for(var kt=0;kt<32;++kt)as[kt]=5;var bv=vr(ii,9,0),wv=vr(ii,9,1),Nv=vr(as,5,0),Sv=vr(as,5,1),Nl=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Xn=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Sl=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},gc=function(t){return(t+7)/8|0},Gf=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new un(t.subarray(e,n))},_v=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Zn=function(t,e,n){var r=new Error(e||_v[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Zn),!n)throw r;return r},Av=function(t,e,n,r){var i=t.length,o=0;if(!i||e.f&&!e.l)return n||new un(0);var s=!n,a=s||e.i!=2,l=e.i;s&&(n=new un(i*3));var c=function(Ce){var Ee=n.length;if(Ce>Ee){var Ie=new un(Math.max(Ee*2,Ce));Ie.set(n),n=Ie}},p=e.f||0,m=e.p||0,y=e.b||0,v=e.l,N=e.d,A=e.m,S=e.n,w=i*8;do{if(!v){p=Xn(t,m,1);var _=Xn(t,m+1,3);if(m+=3,_)if(_==1)v=wv,N=Sv,A=9,S=5;else if(_==2){var M=Xn(t,m,31)+257,E=Xn(t,m+10,15)+4,L=M+Xn(t,m+5,31)+1;m+=14;for(var z=new un(L),H=new un(19),I=0;I<E;++I)H[Wl[I]]=Xn(t,m+I*3,7);m+=E*3;for(var k=Nl(H),B=(1<<k)-1,J=vr(H,k,1),I=0;I<L;){var re=J[Xn(t,m,B)];m+=re&15;var C=re>>4;if(C<16)z[I++]=C;else{var j=0,R=0;for(C==16?(R=3+Xn(t,m,3),m+=2,j=z[I-1]):C==17?(R=3+Xn(t,m,7),m+=3):C==18&&(R=11+Xn(t,m,127),m+=7);R--;)z[I++]=j}}var W=z.subarray(0,M),K=z.subarray(M);A=Nl(W),S=Nl(K),v=vr(W,A,1),N=vr(K,S,1)}else Zn(1);else{var C=gc(m)+4,F=t[C-4]|t[C-3]<<8,D=C+F;if(D>i){l&&Zn(0);break}a&&c(y+F),n.set(t.subarray(C,D),y),e.b=y+=F,e.p=m=D*8,e.f=p;continue}if(m>w){l&&Zn(0);break}}a&&c(y+131072);for(var te=(1<<A)-1,ae=(1<<S)-1,P=m;;P=m){var j=v[Sl(t,m)&te],G=j>>4;if(m+=j&15,m>w){l&&Zn(0);break}if(j||Zn(2),G<256)n[y++]=G;else if(G==256){P=m,v=null;break}else{var X=G-254;if(G>264){var I=G-257,Q=ka[I];X=Xn(t,m,(1<<Q)-1)+Hf[I],m+=Q}var ee=N[Sl(t,m)&ae],oe=ee>>4;ee||Zn(3),m+=ee&15;var K=xv[oe];if(oe>3){var Q=Ia[oe];K+=Sl(t,m)&(1<<Q)-1,m+=Q}if(m>w){l&&Zn(0);break}a&&c(y+131072);var de=y+X;if(y<K){var pe=o-K,Ne=Math.min(K,de);for(pe+y<0&&Zn(3);y<Ne;++y)n[y]=r[pe+y]}for(;y<de;++y)n[y]=n[y-K]}}e.l=v,e.p=P,e.b=y,e.f=p,v&&(p=1,e.m=A,e.d=N,e.n=S)}while(!p);return y!=n.length&&s?Gf(n,0,y):n.subarray(0,y)},Er=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Qo=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},_l=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,o=n.slice();if(!i)return{t:Wf,l:0};if(i==1){var s=new un(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(D,M){return D.f-M.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,p=1,m=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};p!=i-1;)a=n[n[c].f<n[m].f?c++:m++],l=n[c!=p&&n[c].f<n[m].f?c++:m++],n[p++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=o[0].s,r=1;r<i;++r)o[r].s>y&&(y=o[r].s);var v=new In(y+1),N=Yl(n[p-1],v,0);if(N>e){var r=0,A=0,S=N-e,w=1<<S;for(o.sort(function(M,E){return v[E.s]-v[M.s]||M.f-E.f});r<i;++r){var _=o[r].s;if(v[_]>e)A+=w-(1<<N-v[_]),v[_]=e;else break}for(A>>=S;A>0;){var C=o[r].s;v[C]<e?A-=1<<e-v[C]++-1:++r}for(;r>=0&&A;--r){var F=o[r].s;v[F]==e&&(--v[F],++A)}N=e}return{t:new un(v),l:N}},Yl=function(t,e,n){return t.s==-1?Math.max(Yl(t.l,e,n+1),Yl(t.r,e,n+1)):e[t.s]=n},_d=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new In(++e),r=0,i=t[0],o=1,s=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Zo=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},zf=function(t,e,n){var r=n.length,i=gc(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var o=0;o<r;++o)t[i+o+4]=n[o];return(i+4+r)*8},Ad=function(t,e,n,r,i,o,s,a,l,c,p){Er(e,p++,n),++i[256];for(var m=_l(i,15),y=m.t,v=m.l,N=_l(o,15),A=N.t,S=N.l,w=_d(y),_=w.c,C=w.n,F=_d(A),D=F.c,M=F.n,E=new In(19),L=0;L<_.length;++L)++E[_[L]&31];for(var L=0;L<D.length;++L)++E[D[L]&31];for(var z=_l(E,7),H=z.t,I=z.l,k=19;k>4&&!H[Wl[k-1]];--k);var B=c+5<<3,J=Zo(i,ii)+Zo(o,as)+s,re=Zo(i,y)+Zo(o,A)+s+14+3*k+Zo(E,H)+2*E[16]+3*E[17]+7*E[18];if(l>=0&&B<=J&&B<=re)return zf(e,p,t.subarray(l,l+c));var j,R,W,K;if(Er(e,p,1+(re<J)),p+=2,re<J){j=vr(y,v,0),R=y,W=vr(A,S,0),K=A;var te=vr(H,I,0);Er(e,p,C-257),Er(e,p+5,M-1),Er(e,p+10,k-4),p+=14;for(var L=0;L<k;++L)Er(e,p+3*L,H[Wl[L]]);p+=3*k;for(var ae=[_,D],P=0;P<2;++P)for(var G=ae[P],L=0;L<G.length;++L){var X=G[L]&31;Er(e,p,te[X]),p+=H[X],X>15&&(Er(e,p,G[L]>>5&127),p+=G[L]>>12)}}else j=bv,R=ii,W=Nv,K=as;for(var L=0;L<a;++L){var Q=r[L];if(Q>255){var X=Q>>18&31;Qo(e,p,j[X+257]),p+=R[X+257],X>7&&(Er(e,p,Q>>23&31),p+=ka[X]);var ee=Q&31;Qo(e,p,W[ee]),p+=K[ee],ee>3&&(Qo(e,p,Q>>5&8191),p+=Ia[ee])}else Qo(e,p,j[Q]),p+=R[Q]}return Qo(e,p,j[256]),p+R[256]},Cv=new pc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Wf=new un(0),Tv=function(t,e,n,r,i,o){var s=o.z||t.length,a=new un(r+s+5*(1+Math.ceil(s/7e3))+i),l=a.subarray(r,a.length-i),c=o.l,p=(o.r||0)&7;if(e){p&&(l[0]=o.r>>3);for(var m=Cv[e-1],y=m>>13,v=m&8191,N=(1<<n)-1,A=o.p||new In(32768),S=o.h||new In(N+1),w=Math.ceil(n/3),_=2*w,C=function(He){return(t[He]^t[He+1]<<w^t[He+2]<<_)&N},F=new pc(25e3),D=new In(288),M=new In(32),E=0,L=0,z=o.i||0,H=0,I=o.w||0,k=0;z+2<s;++z){var B=C(z),J=z&32767,re=S[B];if(A[J]=re,S[B]=J,I<=z){var j=s-z;if((E>7e3||H>24576)&&(j>423||!c)){p=Ad(t,l,0,F,D,M,L,H,k,z-k,p),H=E=L=0,k=z;for(var R=0;R<286;++R)D[R]=0;for(var R=0;R<30;++R)M[R]=0}var W=2,K=0,te=v,ae=J-re&32767;if(j>2&&B==C(z-ae))for(var P=Math.min(y,j)-1,G=Math.min(32767,z),X=Math.min(258,j);ae<=G&&--te&&J!=re;){if(t[z+W]==t[z+W-ae]){for(var Q=0;Q<X&&t[z+Q]==t[z+Q-ae];++Q);if(Q>W){if(W=Q,K=ae,Q>P)break;for(var ee=Math.min(ae,Q-2),oe=0,R=0;R<ee;++R){var de=z-ae+R&32767,pe=A[de],Ne=de-pe&32767;Ne>oe&&(oe=Ne,re=de)}}}J=re,re=A[J],ae+=J-re&32767}if(K){F[H++]=268435456|$l[W]<<18|Sd[K];var Ce=$l[W]&31,Ee=Sd[K]&31;L+=ka[Ce]+Ia[Ee],++D[257+Ce],++M[Ee],I=z+W,++E}else F[H++]=t[z],++D[t[z]]}}for(z=Math.max(z,I);z<s;++z)F[H++]=t[z],++D[t[z]];p=Ad(t,l,c,F,D,M,L,H,k,z-k,p),c||(o.r=p&7|l[p/8|0]<<3,p-=7,o.h=S,o.p=A,o.i=z,o.w=I)}else{for(var z=o.w||0;z<s+c;z+=65535){var Ie=z+65535;Ie>=s&&(l[p/8|0]=c,Ie=s),p=zf(l,p+1,t.subarray(z,Ie))}o.i=s}return Gf(a,0,r+gc(p)+i)},$f=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,o=n.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=n[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},kv=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new un(o.length+t.length);s.set(o),s.set(t,o.length),t=s,i.w=o.length}return Tv(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},Jf=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Iv=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=$f();i.p(e.dictionary),Jf(t,2,i.d())}},Ev=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Zn(6,"invalid zlib data"),(t[1]>>5&1)==1&&Zn(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Kl(t,e){e||(e={});var n=$f();n.p(t);var r=kv(t,e,e.dictionary?6:2,4);return Iv(r,e),Jf(r,r.length-4,n.d()),r}function Pv(t,e){return Av(t.subarray(Ev(t),-4),{i:2},e,e)}var Lv=typeof TextDecoder<"u"&&new TextDecoder,Rv=0;try{Lv.decode(Wf,{stream:!0}),Rv=1}catch{}var Je=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Al(){Je.console&&typeof Je.console.log=="function"&&Je.console.log.apply(Je.console,arguments)}var At={log:Al,warn:function(t){Je.console&&(typeof Je.console.warn=="function"?Je.console.warn.apply(Je.console,arguments):Al.call(null,arguments))},error:function(t){Je.console&&(typeof Je.console.error=="function"?Je.console.error.apply(Je.console,arguments):Al(t))}};function Cl(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){wi(r.response,e,n)},r.onerror=function(){At.error("could not download file")},r.send()}function Cd(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function oa(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var ns,Xl,wi=Je.saveAs||((typeof window>"u"?"undefined":bt(window))!=="object"||window!==Je?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Je.URL||Je.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Cd(i.href)?Cl(t,e,n):oa(i,i.target="_blank"):oa(i)):(i.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){oa(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Cd(t))Cl(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){oa(r)}))}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:bt(o)!=="object"&&(At.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Cl(t,e,n);var i=t.type==="application/octet-stream",o=/constructor/i.test(Je.HTMLElement)||Je.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":bt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var p=a.result;p=s?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},a.readAsDataURL(t)}else{var l=Je.URL||Je.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout((function(){l.revokeObjectURL(c)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Yf(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,s=i.exec(t);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Tl(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];n=sn(n,r,i,o,e[0],7,-680876936),o=sn(o,n,r,i,e[1],12,-389564586),i=sn(i,o,n,r,e[2],17,606105819),r=sn(r,i,o,n,e[3],22,-1044525330),n=sn(n,r,i,o,e[4],7,-176418897),o=sn(o,n,r,i,e[5],12,1200080426),i=sn(i,o,n,r,e[6],17,-1473231341),r=sn(r,i,o,n,e[7],22,-45705983),n=sn(n,r,i,o,e[8],7,1770035416),o=sn(o,n,r,i,e[9],12,-1958414417),i=sn(i,o,n,r,e[10],17,-42063),r=sn(r,i,o,n,e[11],22,-1990404162),n=sn(n,r,i,o,e[12],7,1804603682),o=sn(o,n,r,i,e[13],12,-40341101),i=sn(i,o,n,r,e[14],17,-1502002290),n=an(n,r=sn(r,i,o,n,e[15],22,1236535329),i,o,e[1],5,-165796510),o=an(o,n,r,i,e[6],9,-1069501632),i=an(i,o,n,r,e[11],14,643717713),r=an(r,i,o,n,e[0],20,-373897302),n=an(n,r,i,o,e[5],5,-701558691),o=an(o,n,r,i,e[10],9,38016083),i=an(i,o,n,r,e[15],14,-660478335),r=an(r,i,o,n,e[4],20,-405537848),n=an(n,r,i,o,e[9],5,568446438),o=an(o,n,r,i,e[14],9,-1019803690),i=an(i,o,n,r,e[3],14,-187363961),r=an(r,i,o,n,e[8],20,1163531501),n=an(n,r,i,o,e[13],5,-1444681467),o=an(o,n,r,i,e[2],9,-51403784),i=an(i,o,n,r,e[7],14,1735328473),n=ln(n,r=an(r,i,o,n,e[12],20,-1926607734),i,o,e[5],4,-378558),o=ln(o,n,r,i,e[8],11,-2022574463),i=ln(i,o,n,r,e[11],16,1839030562),r=ln(r,i,o,n,e[14],23,-35309556),n=ln(n,r,i,o,e[1],4,-1530992060),o=ln(o,n,r,i,e[4],11,1272893353),i=ln(i,o,n,r,e[7],16,-155497632),r=ln(r,i,o,n,e[10],23,-1094730640),n=ln(n,r,i,o,e[13],4,681279174),o=ln(o,n,r,i,e[0],11,-358537222),i=ln(i,o,n,r,e[3],16,-722521979),r=ln(r,i,o,n,e[6],23,76029189),n=ln(n,r,i,o,e[9],4,-640364487),o=ln(o,n,r,i,e[12],11,-421815835),i=ln(i,o,n,r,e[15],16,530742520),n=cn(n,r=ln(r,i,o,n,e[2],23,-995338651),i,o,e[0],6,-198630844),o=cn(o,n,r,i,e[7],10,1126891415),i=cn(i,o,n,r,e[14],15,-1416354905),r=cn(r,i,o,n,e[5],21,-57434055),n=cn(n,r,i,o,e[12],6,1700485571),o=cn(o,n,r,i,e[3],10,-1894986606),i=cn(i,o,n,r,e[10],15,-1051523),r=cn(r,i,o,n,e[1],21,-2054922799),n=cn(n,r,i,o,e[8],6,1873313359),o=cn(o,n,r,i,e[15],10,-30611744),i=cn(i,o,n,r,e[6],15,-1560198380),r=cn(r,i,o,n,e[13],21,1309151649),n=cn(n,r,i,o,e[4],6,-145523070),o=cn(o,n,r,i,e[11],10,-1120210379),i=cn(i,o,n,r,e[2],15,718787259),r=cn(r,i,o,n,e[9],21,-343485551),t[0]=ti(n,t[0]),t[1]=ti(r,t[1]),t[2]=ti(i,t[2]),t[3]=ti(o,t[3])}function Ea(t,e,n,r,i,o){return e=ti(ti(e,t),ti(r,o)),ti(e<<i|e>>>32-i,n)}function sn(t,e,n,r,i,o,s){return Ea(e&n|~e&r,t,e,i,o,s)}function an(t,e,n,r,i,o,s){return Ea(e&r|n&~r,t,e,i,o,s)}function ln(t,e,n,r,i,o,s){return Ea(e^n^r,t,e,i,o,s)}function cn(t,e,n,r,i,o,s){return Ea(n^(e|~r),t,e,i,o,s)}function Kf(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Tl(r,Mv(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Tl(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,Tl(r,i),r}function Mv(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}ns=Je.atob.bind(Je),Xl=Je.btoa.bind(Je);var Td="0123456789abcdef".split("");function Dv(t){for(var e="",n=0;n<4;n++)e+=Td[t>>8*n+4&15]+Td[t>>8*n&15];return e}function Fv(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Ql(t){return Kf(t).map(Fv).join("")}var jv=(function(t){for(var e=0;e<t.length;e++)t[e]=Dv(t[e]);return t.join("")})(Kf("hello"))!="5d41402abc4b2a76b9719d911017c592";function ti(t,e){if(jv){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Zl(t,e){var n,r,i,o;if(t!==n){for(var s=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var p=a[l];c=(c+p+s.charCodeAt(l))%256,a[l]=a[c],a[c]=p}n=t,r=a}else a=r;var m=e.length,y=0,v=0,N="";for(l=0;l<m;l++)v=(v+(p=a[y=(y+1)%256]))%256,a[y]=a[v],a[v]=p,s=a[(a[y]+a[v])%256],N+=String.fromCharCode(e.charCodeAt(l)^s);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var kd={print:4,modify:8,copy:16,"annot-forms":32};function co(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach((function(a){if(kd.perm!==void 0)throw new Error("Invalid permission: "+a);i+=kd[a]})),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var o=(e+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=Ql(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Zl(this.encryptionKey,this.padding)}function uo(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function Id(t){if(bt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[r,!!i],o},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[n]){var s=e[n][o];try{s[0].apply(t,r)}catch(a){Je.console&&At.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function ls(t){if(!(this instanceof ls))return new ls(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Xf(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Zr(t,e,n,r,i){if(!(this instanceof Zr))return new Zr(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Xf.call(this,r,i)}function Ni(t,e,n,r,i){if(!(this instanceof Ni))return new Ni(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Xf.call(this,r,i)}function We(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,l=16,c="S",p=null;bt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,o=t.compress||t.compressPdf||o,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),s=t.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,y={},v={internal:{},__private__:{}};v.__private__.PubSub=Id;var N="1.3",A=v.__private__.getPdfVersion=function(){return N};v.__private__.setPdfVersion=function(x){N=x};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return S};var w=v.__private__.getPageFormat=function(x){return S[x]};i=i||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},C=_.COMPAT;function F(){this.saveGraphicsState(),ie(new $e(je,0,0,-je,0,jr()*je).toString()+" cm"),this.setFontSize(this.getFontSize()/je),c="n",C=_.ADVANCED}function D(){this.restoreGraphicsState(),c="S",C=_.COMPAT}var M=v.__private__.combineFontStyleAndFontWeight=function(x,q){if(x=="bold"&&q=="normal"||x=="bold"&&q==400||x=="normal"&&q=="italic"||x=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(x=q==400||q==="normal"?x==="italic"?"italic":"normal":q!=700&&q!=="bold"||x!=="normal"?(q==700?"bold":q)+""+x:"bold"),x};v.advancedAPI=function(x){var q=C===_.COMPAT;return q&&F.call(this),typeof x!="function"||(x(this),q&&D.call(this)),this},v.compatAPI=function(x){var q=C===_.ADVANCED;return q&&D.call(this),typeof x!="function"||(x(this),q&&F.call(this)),this},v.isAdvancedAPI=function(){return C===_.ADVANCED};var E,L=function(x){if(C!==_.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=v.roundToPrecision=v.__private__.roundToPrecision=function(x,q){var ne=e||q;if(isNaN(x)||isNaN(ne))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(ne).replace(/0+$/,"")};E=v.hpf=v.__private__.hpf=typeof l=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return z(x,l)}:l==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return z(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return z(x,16)};var H=v.f2=v.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return z(x,2)},I=v.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return z(x,3)},k=v.scale=v.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return C===_.COMPAT?x*je:C===_.ADVANCED?x:void 0},B=function(x){return C===_.COMPAT?jr()-x:C===_.ADVANCED?x:void 0},J=function(x){return k(B(x))};v.__private__.setPrecision=v.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(e=parseInt(x,10))};var re,j="00000000000000000000000000000000",R=v.__private__.getFileId=function(){return j},W=v.__private__.setFileId=function(x){return j=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():j.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),p!==null&&(rn=new co(p.userPermissions,p.userPassword,p.ownerPassword,j)),j};v.setFileId=function(x){return W(x),this},v.getFileId=function(){return R()};var K=v.__private__.convertDateToPDFDate=function(x){var q=x.getTimezoneOffset(),ne=q<0?"+":"-",se=Math.floor(Math.abs(q/60)),he=Math.abs(q%60),be=[ne,X(se),"'",X(he),"'"].join("");return["D:",x.getFullYear(),X(x.getMonth()+1),X(x.getDate()),X(x.getHours()),X(x.getMinutes()),X(x.getSeconds()),be].join("")},te=v.__private__.convertPDFDateToDate=function(x){var q=parseInt(x.substr(2,4),10),ne=parseInt(x.substr(6,2),10)-1,se=parseInt(x.substr(8,2),10),he=parseInt(x.substr(10,2),10),be=parseInt(x.substr(12,2),10),Te=parseInt(x.substr(14,2),10);return new Date(q,ne,se,he,be,Te,0)},ae=v.__private__.setCreationDate=function(x){var q;if(x===void 0&&(x=new Date),x instanceof Date)q=K(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=x}return re=q},P=v.__private__.getCreationDate=function(x){var q=re;return x==="jsDate"&&(q=te(re)),q};v.setCreationDate=function(x){return ae(x),this},v.getCreationDate=function(x){return P(x)};var G,X=v.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},Q=v.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},ee=0,oe=[],de=[],pe=0,Ne=[],Ce=[],Ee=!1,Ie=de,He=function(){ee=0,pe=0,de=[],oe=[],Ne=[],br=Ht(),Vn=Ht()};v.__private__.setCustomOutputDestination=function(x){Ee=!0,Ie=x};var xe=function(x){Ee||(Ie=x)};v.__private__.resetCustomOutputDestination=function(){Ee=!1,Ie=de};var ie=v.__private__.out=function(x){return x=x.toString(),pe+=x.length+1,Ie.push(x),Ie},Ke=v.__private__.write=function(x){return ie(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Oe=v.__private__.getArrayBuffer=function(x){for(var q=x.length,ne=new ArrayBuffer(q),se=new Uint8Array(ne);q--;)se[q]=x.charCodeAt(q);return ne},ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return ke};var Pe=t.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(x){return Pe=C===_.ADVANCED?x/je:x,this};var Fe,Me=v.__private__.getFontSize=v.getFontSize=function(){return C===_.COMPAT?Pe:Pe*je},Ve=t.R2L||!1;v.__private__.setR2L=v.setR2L=function(x){return Ve=x,this},v.__private__.getR2L=v.getR2L=function(){return Ve};var Ze,ot=v.__private__.setZoomMode=function(x){var q=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Fe=x;else if(isNaN(x)){if(q.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Fe=x}else Fe=parseInt(x,10)};v.__private__.getZoomMode=function(){return Fe};var at,dt=v.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');Ze=x};v.__private__.getPageMode=function(){return Ze};var wt=v.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');at=x};v.__private__.getLayoutMode=function(){return at},v.__private__.setDisplayMode=v.setDisplayMode=function(x,q,ne){return ot(x),wt(q),dt(ne),this};var Ye={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(x){if(Object.keys(Ye).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ye[x]},v.__private__.getDocumentProperties=function(){return Ye},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(x){for(var q in Ye)Ye.hasOwnProperty(q)&&x[q]&&(Ye[q]=x[q]);return this},v.__private__.setDocumentProperty=function(x,q){if(Object.keys(Ye).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ye[x]=q};var lt,je,nn,ht,qn,St={},It={},or=[],mt={},ai={},Pt={},On={},xr=null,Lt=0,et=[],vt=new Id(v),li=t.hotfixes||[],Zt={},sr={},ar=[],$e=function x(q,ne,se,he,be,Te){if(!(this instanceof x))return new x(q,ne,se,he,be,Te);isNaN(q)&&(q=1),isNaN(ne)&&(ne=0),isNaN(se)&&(se=0),isNaN(he)&&(he=1),isNaN(be)&&(be=0),isNaN(Te)&&(Te=0),this._matrix=[q,ne,se,he,be,Te]};Object.defineProperty($e.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty($e.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty($e.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty($e.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty($e.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty($e.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty($e.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty($e.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty($e.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty($e.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty($e.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty($e.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty($e.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty($e.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty($e.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty($e.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),$e.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(x)},$e.prototype.multiply=function(x){var q=x.sx*this.sx+x.shy*this.shx,ne=x.sx*this.shy+x.shy*this.sy,se=x.shx*this.sx+x.sy*this.shx,he=x.shx*this.shy+x.sy*this.sy,be=x.tx*this.sx+x.ty*this.shx+this.tx,Te=x.tx*this.shy+x.ty*this.sy+this.ty;return new $e(q,ne,se,he,be,Te)},$e.prototype.decompose=function(){var x=this.sx,q=this.shy,ne=this.shx,se=this.sy,he=this.tx,be=this.ty,Te=Math.sqrt(x*x+q*q),Ue=(x/=Te)*ne+(q/=Te)*se;ne-=x*Ue,se-=q*Ue;var Ge=Math.sqrt(ne*ne+se*se);return Ue/=Ge,x*(se/=Ge)<q*(ne/=Ge)&&(x=-x,q=-q,Ue=-Ue,Te=-Te),{scale:new $e(Te,0,0,Ge,0,0),translate:new $e(1,0,0,1,he,be),rotate:new $e(x,q,-q,x,0,0),skew:new $e(1,0,Ue,1,0,0)}},$e.prototype.toString=function(x){return this.join(" ")},$e.prototype.inversed=function(){var x=this.sx,q=this.shy,ne=this.shx,se=this.sy,he=this.tx,be=this.ty,Te=1/(x*se-q*ne),Ue=se*Te,Ge=-q*Te,rt=-ne*Te,tt=x*Te;return new $e(Ue,Ge,rt,tt,-Ue*he-rt*be,-Ge*he-tt*be)},$e.prototype.applyToPoint=function(x){var q=x.x*this.sx+x.y*this.shx+this.tx,ne=x.x*this.shy+x.y*this.sy+this.ty;return new Vi(q,ne)},$e.prototype.applyToRectangle=function(x){var q=this.applyToPoint(x),ne=this.applyToPoint(new Vi(x.x+x.w,x.y+x.h));return new Eo(q.x,q.y,ne.x-q.x,ne.y-q.y)},$e.prototype.clone=function(){var x=this.sx,q=this.shy,ne=this.shx,se=this.sy,he=this.tx,be=this.ty;return new $e(x,q,ne,se,he,be)},v.Matrix=$e;var Hn=v.matrixMult=function(x,q){return q.multiply(x)},lr=new $e(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=lr;var vn=function(x,q){if(!ai[x]){var ne=(q instanceof Zr?"Sh":"P")+(Object.keys(mt).length+1).toString(10);q.id=ne,ai[x]=ne,mt[ne]=q,vt.publish("addPattern",q)}};v.ShadingPattern=Zr,v.TilingPattern=Ni,v.addShadingPattern=function(x,q){return L("addShadingPattern()"),vn(x,q),this},v.beginTilingPattern=function(x){L("beginTilingPattern()"),Ts(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},v.endTilingPattern=function(x,q){L("endTilingPattern()"),q.stream=Ce[G].join(`
`),vn(x,q),vt.publish("endTilingPattern",q),ar.pop().restore()};var Wt=v.__private__.newObject=function(){var x=Ht();return _n(x,!0),x},Ht=v.__private__.newObjectDeferred=function(){return ee++,oe[ee]=function(){return pe},ee},_n=function(x,q){return q=typeof q=="boolean"&&q,oe[x]=pe,q&&ie(x+" 0 obj"),x},Ei=v.__private__.newAdditionalObject=function(){var x={objId:Ht(),content:""};return Ne.push(x),x},br=Ht(),Vn=Ht(),Gn=v.__private__.decodeColorString=function(x){var q=x.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length===5&&(q[4]==="k"||q[4]==="K")&&(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var ne=parseFloat(q[0]);q=[ne,ne,ne,"r"]}for(var se="#",he=0;he<3;he++)se+=("0"+Math.floor(255*parseFloat(q[he])).toString(16)).slice(-2);return se},zn=v.__private__.encodeColorString=function(x){var q;typeof x=="string"&&(x={ch1:x});var ne=x.ch1,se=x.ch2,he=x.ch3,be=x.ch4,Te=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ne=="string"&&ne.charAt(0)!=="#"){var Ue=new Yf(ne);if(Ue.ok)ne=Ue.toHex();else if(!/^\d*\.?\d*$/.test(ne))throw new Error('Invalid color "'+ne+'" passed to jsPDF.encodeColorString.')}if(typeof ne=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ne)&&(ne="#"+ne[1]+ne[1]+ne[2]+ne[2]+ne[3]+ne[3]),typeof ne=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ne)){var Ge=parseInt(ne.substr(1),16);ne=Ge>>16&255,se=Ge>>8&255,he=255&Ge}if(se===void 0||be===void 0&&ne===se&&se===he)if(typeof ne=="string")q=ne+" "+Te[0];else switch(x.precision){case 2:q=H(ne/255)+" "+Te[0];break;case 3:default:q=I(ne/255)+" "+Te[0]}else if(be===void 0||bt(be)==="object"){if(be&&!isNaN(be.a)&&be.a===0)return q=["1.","1.","1.",Te[1]].join(" ");if(typeof ne=="string")q=[ne,se,he,Te[1]].join(" ");else switch(x.precision){case 2:q=[H(ne/255),H(se/255),H(he/255),Te[1]].join(" ");break;default:case 3:q=[I(ne/255),I(se/255),I(he/255),Te[1]].join(" ")}}else if(typeof ne=="string")q=[ne,se,he,be,Te[2]].join(" ");else switch(x.precision){case 2:q=[H(ne),H(se),H(he),H(be),Te[2]].join(" ");break;case 3:default:q=[I(ne),I(se),I(he),I(be),Te[2]].join(" ")}return q},cr=v.__private__.getFilters=function(){return s},En=v.__private__.putStream=function(x){var q=(x=x||{}).data||"",ne=x.filters||cr(),se=x.alreadyAppliedFilters||[],he=x.addLength1||!1,be=q.length,Te=x.objectId,Ue=function(on){return on};if(p!==null&&Te===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Ue=rn.encryptor(Te,0));var Ge={};ne===!0&&(ne=["FlateEncode"]);var rt=x.additionalKeyValues||[],tt=(Ge=We.API.processDataByFilters!==void 0?We.API.processDataByFilters(q,ne):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(se)?se.join(" "):se.toString());if(Ge.data.length!==0&&(rt.push({key:"Length",value:Ge.data.length}),he===!0&&rt.push({key:"Length1",value:be})),tt.length!=0)if(tt.split("/").length-1==1)rt.push({key:"Filter",value:tt});else{rt.push({key:"Filter",value:"["+tt+"]"});for(var ut=0;ut<rt.length;ut+=1)if(rt[ut].key==="DecodeParms"){for(var Et=[],Rt=0;Rt<Ge.reverseChain.split("/").length-1;Rt+=1)Et.push("null");Et.push(rt[ut].value),rt[ut].value="["+Et.join(" ")+"]"}}ie("<<");for(var Vt=0;Vt<rt.length;Vt++)ie("/"+rt[Vt].key+" "+rt[Vt].value);ie(">>"),Ge.data.length!==0&&(ie("stream"),ie(Ue(Ge.data)),ie("endstream"))},ur=v.__private__.putPage=function(x){var q=x.number,ne=x.data,se=x.objId,he=x.contentsObjId;_n(se,!0),ie("<</Type /Page"),ie("/Parent "+x.rootDictionaryObjId+" 0 R"),ie("/Resources "+x.resourceDictionaryObjId+" 0 R"),ie("/MediaBox ["+parseFloat(E(x.mediaBox.bottomLeftX))+" "+parseFloat(E(x.mediaBox.bottomLeftY))+" "+E(x.mediaBox.topRightX)+" "+E(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&ie("/CropBox ["+E(x.cropBox.bottomLeftX)+" "+E(x.cropBox.bottomLeftY)+" "+E(x.cropBox.topRightX)+" "+E(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&ie("/BleedBox ["+E(x.bleedBox.bottomLeftX)+" "+E(x.bleedBox.bottomLeftY)+" "+E(x.bleedBox.topRightX)+" "+E(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&ie("/TrimBox ["+E(x.trimBox.bottomLeftX)+" "+E(x.trimBox.bottomLeftY)+" "+E(x.trimBox.topRightX)+" "+E(x.trimBox.topRightY)+"]"),x.artBox!==null&&ie("/ArtBox ["+E(x.artBox.bottomLeftX)+" "+E(x.artBox.bottomLeftY)+" "+E(x.artBox.topRightX)+" "+E(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&ie("/UserUnit "+x.userUnit),vt.publish("putPage",{objId:se,pageContext:et[q],pageNumber:q,page:ne}),ie("/Contents "+he+" 0 R"),ie(">>"),ie("endobj");var be=ne.join(`
`);return C===_.ADVANCED&&(be+=`
Q`),_n(he,!0),En({data:be,filters:cr(),objectId:he}),ie("endobj"),se},ci=v.__private__.putPages=function(){var x,q,ne=[];for(x=1;x<=Lt;x++)et[x].objId=Ht(),et[x].contentsObjId=Ht();for(x=1;x<=Lt;x++)ne.push(ur({number:x,data:Ce[x],objId:et[x].objId,contentsObjId:et[x].contentsObjId,mediaBox:et[x].mediaBox,cropBox:et[x].cropBox,bleedBox:et[x].bleedBox,trimBox:et[x].trimBox,artBox:et[x].artBox,userUnit:et[x].userUnit,rootDictionaryObjId:br,resourceDictionaryObjId:Vn}));_n(br,!0),ie("<</Type /Pages");var se="/Kids [";for(q=0;q<Lt;q++)se+=ne[q]+" 0 R ";ie(se+"]"),ie("/Count "+Lt),ie(">>"),ie("endobj"),vt.publish("postPutPages")},Pi=function(x){vt.publish("putFont",{font:x,out:ie,newObject:Wt,putStream:En}),x.isAlreadyPutted!==!0&&(x.objectNumber=Wt(),ie("<<"),ie("/Type /Font"),ie("/BaseFont /"+uo(x.postScriptName)),ie("/Subtype /Type1"),typeof x.encoding=="string"&&ie("/Encoding /"+x.encoding),ie("/FirstChar 32"),ie("/LastChar 255"),ie(">>"),ie("endobj"))},Li=function(){for(var x in St)St.hasOwnProperty(x)&&(m===!1||m===!0&&y.hasOwnProperty(x))&&Pi(St[x])},Ri=function(x){x.objectNumber=Wt();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[E(x.x),E(x.y),E(x.x+x.width),E(x.y+x.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var ne=x.pages[1].join(`
`);En({data:ne,additionalKeyValues:q,objectId:x.objectNumber}),ie("endobj")},Mi=function(){for(var x in Zt)Zt.hasOwnProperty(x)&&Ri(Zt[x])},cs=function(x,q){var ne,se=[],he=1/(q-1);for(ne=0;ne<1;ne+=he)se.push(ne);if(se.push(1),x[0].offset!=0){var be={offset:0,color:x[0].color};x.unshift(be)}if(x[x.length-1].offset!=1){var Te={offset:1,color:x[x.length-1].color};x.push(Te)}for(var Ue="",Ge=0,rt=0;rt<se.length;rt++){for(ne=se[rt];ne>x[Ge+1].offset;)Ge++;var tt=x[Ge].offset,ut=(ne-tt)/(x[Ge+1].offset-tt),Et=x[Ge].color,Rt=x[Ge+1].color;Ue+=Q(Math.round((1-ut)*Et[0]+ut*Rt[0]).toString(16))+Q(Math.round((1-ut)*Et[1]+ut*Rt[1]).toString(16))+Q(Math.round((1-ut)*Et[2]+ut*Rt[2]).toString(16))}return Ue.trim()},Pa=function(x,q){q||(q=21);var ne=Wt(),se=cs(x.colors,q),he=[];he.push({key:"FunctionType",value:"0"}),he.push({key:"Domain",value:"[0.0 1.0]"}),he.push({key:"Size",value:"["+q+"]"}),he.push({key:"BitsPerSample",value:"8"}),he.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),En({data:se,additionalKeyValues:he,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ne}),ie("endobj"),x.objectNumber=Wt(),ie("<< /ShadingType "+x.type),ie("/ColorSpace /DeviceRGB");var be="/Coords ["+E(parseFloat(x.coords[0]))+" "+E(parseFloat(x.coords[1]))+" ";x.type===2?be+=E(parseFloat(x.coords[2]))+" "+E(parseFloat(x.coords[3])):be+=E(parseFloat(x.coords[2]))+" "+E(parseFloat(x.coords[3]))+" "+E(parseFloat(x.coords[4]))+" "+E(parseFloat(x.coords[5])),ie(be+="]"),x.matrix&&ie("/Matrix ["+x.matrix.toString()+"]"),ie("/Function "+ne+" 0 R"),ie("/Extend [true true]"),ie(">>"),ie("endobj")},La=function(x,q){var ne=Ht(),se=Wt();q.push({resourcesOid:ne,objectOid:se}),x.objectNumber=se;var he=[];he.push({key:"Type",value:"/Pattern"}),he.push({key:"PatternType",value:"1"}),he.push({key:"PaintType",value:"1"}),he.push({key:"TilingType",value:"1"}),he.push({key:"BBox",value:"["+x.boundingBox.map(E).join(" ")+"]"}),he.push({key:"XStep",value:E(x.xStep)}),he.push({key:"YStep",value:E(x.yStep)}),he.push({key:"Resources",value:ne+" 0 R"}),x.matrix&&he.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),En({data:x.stream,additionalKeyValues:he,objectId:x.objectNumber}),ie("endobj")},Di=function(x){var q;for(q in mt)mt.hasOwnProperty(q)&&(mt[q]instanceof Zr?Pa(mt[q]):mt[q]instanceof Ni&&La(mt[q],x))},us=function(x){for(var q in x.objectNumber=Wt(),ie("<<"),x)switch(q){case"opacity":ie("/ca "+H(x[q]));break;case"stroke-opacity":ie("/CA "+H(x[q]))}ie(">>"),ie("endobj")},Ra=function(){var x;for(x in Pt)Pt.hasOwnProperty(x)&&us(Pt[x])},bo=function(){for(var x in ie("/XObject <<"),Zt)Zt.hasOwnProperty(x)&&Zt[x].objectNumber>=0&&ie("/"+x+" "+Zt[x].objectNumber+" 0 R");vt.publish("putXobjectDict"),ie(">>")},Ma=function(){rn.oid=Wt(),ie("<<"),ie("/Filter /Standard"),ie("/V "+rn.v),ie("/R "+rn.r),ie("/U <"+rn.toHexString(rn.U)+">"),ie("/O <"+rn.toHexString(rn.O)+">"),ie("/P "+rn.P),ie(">>"),ie("endobj")},ds=function(){for(var x in ie("/Font <<"),St)St.hasOwnProperty(x)&&(m===!1||m===!0&&y.hasOwnProperty(x))&&ie("/"+x+" "+St[x].objectNumber+" 0 R");ie(">>")},Da=function(){if(Object.keys(mt).length>0){for(var x in ie("/Shading <<"),mt)mt.hasOwnProperty(x)&&mt[x]instanceof Zr&&mt[x].objectNumber>=0&&ie("/"+x+" "+mt[x].objectNumber+" 0 R");vt.publish("putShadingPatternDict"),ie(">>")}},Fi=function(x){if(Object.keys(mt).length>0){for(var q in ie("/Pattern <<"),mt)mt.hasOwnProperty(q)&&mt[q]instanceof v.TilingPattern&&mt[q].objectNumber>=0&&mt[q].objectNumber<x&&ie("/"+q+" "+mt[q].objectNumber+" 0 R");vt.publish("putTilingPatternDict"),ie(">>")}},Fa=function(){if(Object.keys(Pt).length>0){var x;for(x in ie("/ExtGState <<"),Pt)Pt.hasOwnProperty(x)&&Pt[x].objectNumber>=0&&ie("/"+x+" "+Pt[x].objectNumber+" 0 R");vt.publish("putGStateDict"),ie(">>")}},Ft=function(x){_n(x.resourcesOid,!0),ie("<<"),ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ds(),Da(),Fi(x.objectOid),Fa(),bo(),ie(">>"),ie("endobj")},fs=function(){var x=[];Li(),Ra(),Mi(),Di(x),vt.publish("putResources"),x.forEach(Ft),Ft({resourcesOid:Vn,objectOid:Number.MAX_SAFE_INTEGER}),vt.publish("postPutResources")},hs=function(){vt.publish("putAdditionalObjects");for(var x=0;x<Ne.length;x++){var q=Ne[x];_n(q.objId,!0),ie(q.content),ie("endobj")}vt.publish("postPutAdditionalObjects")},ps=function(x){It[x.fontName]=It[x.fontName]||{},It[x.fontName][x.fontStyle]=x.id},wo=function(x,q,ne,se,he){var be={id:"F"+(Object.keys(St).length+1).toString(10),postScriptName:x,fontName:q,fontStyle:ne,encoding:se,isStandardFont:he||!1,metadata:{}};return vt.publish("addFont",{font:be,instance:this}),St[be.id]=be,ps(be),be.id},ja=function(x){for(var q=0,ne=ke.length;q<ne;q++){var se=wo.call(this,x[q][0],x[q][1],x[q][2],ke[q][3],!0);m===!1&&(y[se]=!0);var he=x[q][0].split("-");ps({id:se,fontName:he[0],fontStyle:he[1]||""})}vt.publish("addFonts",{fonts:St,dictionary:It})},Wn=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(se){var q=se.stack||"";~q.indexOf(" at ")&&(q=q.split(" at ")[1]);var ne="Error in function "+q.split(`
`)[0].split("<")[0]+": "+se.message;if(!Je.console)throw new Error(ne);Je.console.error(ne,se),Je.alert&&alert(ne)}},x.foo.bar=x,x.foo},ji=function(x,q){var ne,se,he,be,Te,Ue,Ge,rt,tt;if(he=(q=q||{}).sourceEncoding||"Unicode",Te=q.outputEncoding,(q.autoencode||Te)&&St[lt].metadata&&St[lt].metadata[he]&&St[lt].metadata[he].encoding&&(be=St[lt].metadata[he].encoding,!Te&&St[lt].encoding&&(Te=St[lt].encoding),!Te&&be.codePages&&(Te=be.codePages[0]),typeof Te=="string"&&(Te=be[Te]),Te)){for(Ge=!1,Ue=[],ne=0,se=x.length;ne<se;ne++)(rt=Te[x.charCodeAt(ne)])?Ue.push(String.fromCharCode(rt)):Ue.push(x[ne]),Ue[ne].charCodeAt(0)>>8&&(Ge=!0);x=Ue.join("")}for(ne=x.length;Ge===void 0&&ne!==0;)x.charCodeAt(ne-1)>>8&&(Ge=!0),ne--;if(!Ge)return x;for(Ue=q.noBOM?[]:[254,255],ne=0,se=x.length;ne<se;ne++){if((tt=(rt=x.charCodeAt(ne))>>8)>>8)throw new Error("Character at position "+ne+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ue.push(tt),Ue.push(rt-(tt<<8))}return String.fromCharCode.apply(void 0,Ue)},yn=v.__private__.pdfEscape=v.pdfEscape=function(x,q){return ji(x,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},No=v.__private__.beginPage=function(x){Ce[++Lt]=[],et[Lt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},ms(Lt),xe(Ce[G])},gs=function(x,q){var ne,se,he;switch(n=q||n,typeof x=="string"&&(ne=w(x.toLowerCase()),Array.isArray(ne)&&(se=ne[0],he=ne[1])),Array.isArray(x)&&(se=x[0]*je,he=x[1]*je),isNaN(se)&&(se=i[0],he=i[1]),(se>14400||he>14400)&&(At.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),se=Math.min(14400,se),he=Math.min(14400,he)),i=[se,he],n.substr(0,1)){case"l":he>se&&(i=[he,se]);break;case"p":se>he&&(i=[he,se])}No(i),Ns(Co),ie($n),ko!==0&&ie(ko+" J"),Io!==0&&ie(Io+" j"),vt.publish("addPage",{pageNumber:Lt})},Ua=function(x){x>0&&x<=Lt&&(Ce.splice(x,1),et.splice(x,1),Lt--,G>Lt&&(G=Lt),this.setPage(G))},ms=function(x){x>0&&x<=Lt&&(G=x)},Ba=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Ce.length-1},vs=function(x,q,ne){var se,he=void 0;return ne=ne||{},x=x!==void 0?x:St[lt].fontName,q=q!==void 0?q:St[lt].fontStyle,se=x.toLowerCase(),It[se]!==void 0&&It[se][q]!==void 0?he=It[se][q]:It[x]!==void 0&&It[x][q]!==void 0?he=It[x][q]:ne.disableWarning===!1&&At.warn("Unable to look up font label for font '"+x+"', '"+q+"'. Refer to getFontList() for available fonts."),he||ne.noFallback||(he=It.times[q])==null&&(he=It.times.normal),he},qa=v.__private__.putInfo=function(){var x=Wt(),q=function(se){return se};for(var ne in p!==null&&(q=rn.encryptor(x,0)),ie("<<"),ie("/Producer ("+yn(q("jsPDF "+We.version))+")"),Ye)Ye.hasOwnProperty(ne)&&Ye[ne]&&ie("/"+ne.substr(0,1).toUpperCase()+ne.substr(1)+" ("+yn(q(Ye[ne]))+")");ie("/CreationDate ("+yn(q(re))+")"),ie(">>"),ie("endobj")},So=v.__private__.putCatalog=function(x){var q=(x=x||{}).rootDictionaryObjId||br;switch(Wt(),ie("<<"),ie("/Type /Catalog"),ie("/Pages "+q+" 0 R"),Fe||(Fe="fullwidth"),Fe){case"fullwidth":ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ie("/OpenAction [3 0 R /Fit]");break;case"original":ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ne=""+Fe;ne.substr(ne.length-1)==="%"&&(Fe=parseInt(Fe)/100),typeof Fe=="number"&&ie("/OpenAction [3 0 R /XYZ null null "+H(Fe)+"]")}switch(at||(at="continuous"),at){case"continuous":ie("/PageLayout /OneColumn");break;case"single":ie("/PageLayout /SinglePage");break;case"two":case"twoleft":ie("/PageLayout /TwoColumnLeft");break;case"tworight":ie("/PageLayout /TwoColumnRight")}Ze&&ie("/PageMode /"+Ze),vt.publish("putCatalog"),ie(">>"),ie("endobj")},Oa=v.__private__.putTrailer=function(){ie("trailer"),ie("<<"),ie("/Size "+(ee+1)),ie("/Root "+ee+" 0 R"),ie("/Info "+(ee-1)+" 0 R"),p!==null&&ie("/Encrypt "+rn.oid+" 0 R"),ie("/ID [ <"+j+"> <"+j+"> ]"),ie(">>")},Ha=v.__private__.putHeader=function(){ie("%PDF-"+N),ie("%ºß¬à")},Va=v.__private__.putXRef=function(){var x="0000000000";ie("xref"),ie("0 "+(ee+1)),ie("0000000000 65535 f ");for(var q=1;q<=ee;q++)typeof oe[q]=="function"?ie((x+oe[q]()).slice(-10)+" 00000 n "):oe[q]!==void 0?ie((x+oe[q]).slice(-10)+" 00000 n "):ie("0000000000 00000 n ")},wr=v.__private__.buildDocument=function(){He(),xe(de),vt.publish("buildDocument"),Ha(),ci(),hs(),fs(),p!==null&&Ma(),qa(),So();var x=pe;return Va(),Oa(),ie("startxref"),ie(""+x),ie("%%EOF"),xe(Ce[G]),de.join(`
`)},Ui=v.__private__.getBlob=function(x){return new Blob([Oe(x)],{type:"application/pdf"})},Bi=v.output=v.__private__.output=Wn((function(x,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",x){case void 0:return wr();case"save":v.save(q.filename);break;case"arraybuffer":return Oe(wr());case"blob":return Ui(wr());case"bloburi":case"bloburl":if(Je.URL!==void 0&&typeof Je.URL.createObjectURL=="function")return Je.URL&&Je.URL.createObjectURL(Ui(wr()))||void 0;At.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ne="",se=wr();try{ne=Xl(se)}catch{ne=Xl(unescape(encodeURIComponent(se)))}return"data:application/pdf;filename="+q.filename+";base64,"+ne;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Je)==="[object Window]"){var he="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(he=q.pdfObjectUrl,be="");var Te='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+he+'"'+be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",Ue=Je.open();return Ue!==null&&Ue.document.write(Te),Ue}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Je)==="[object Window]"){var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',rt=Je.open();if(rt!==null){rt.document.write(Ge);var tt=this;rt.document.documentElement.querySelector("#pdfViewer").onload=function(){rt.document.title=q.filename,rt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(tt.output("bloburl"))}}return rt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Je)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',Et=Je.open();if(Et!==null&&(Et.document.write(ut),Et.document.title=q.filename),Et||typeof safari>"u")return Et;break;case"datauri":case"dataurl":return Je.document.location.href=this.output("datauristring",q);default:return null}})),ys=function(x){return Array.isArray(li)===!0&&li.indexOf(x)>-1};switch(r){case"pt":je=1;break;case"mm":je=72/25.4;break;case"cm":je=72/2.54;break;case"in":je=72;break;case"px":je=ys("px_scaling")==1?.75:96/72;break;case"pc":case"em":je=12;break;case"ex":je=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);je=r}var rn=null;ae(),W();var Ga=function(x){return p!==null?rn.encryptor(x,0):function(q){return q}},xs=v.__private__.getPageInfo=v.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:et[x].objId,pageNumber:x,pageContext:et[x]}},Xe=v.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in et)if(et[q].objId===x)break;return xs(q)},za=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:et[G].objId,pageNumber:G,pageContext:et[G]}};v.addPage=function(){return gs.apply(this,arguments),this},v.setPage=function(){return ms.apply(this,arguments),xe.call(this,Ce[G]),this},v.insertPage=function(x){return this.addPage(),this.movePage(G,x),this},v.movePage=function(x,q){var ne,se;if(x>q){ne=Ce[x],se=et[x];for(var he=x;he>q;he--)Ce[he]=Ce[he-1],et[he]=et[he-1];Ce[q]=ne,et[q]=se,this.setPage(q)}else if(x<q){ne=Ce[x],se=et[x];for(var be=x;be<q;be++)Ce[be]=Ce[be+1],et[be]=et[be+1];Ce[q]=ne,et[q]=se,this.setPage(q)}return this},v.deletePage=function(){return Ua.apply(this,arguments),this},v.__private__.text=v.text=function(x,q,ne,se,he){var be,Te,Ue,Ge,rt,tt,ut,Et,Rt,Vt=(se=se||{}).scope||this;if(typeof x=="number"&&typeof q=="number"&&(typeof ne=="string"||Array.isArray(ne))){var on=ne;ne=q,q=x,x=on}if(arguments[3]instanceof $e?(L("The transform parameter of text() with a Matrix value"),Rt=he):(Ue=arguments[4],Ge=arguments[5],bt(ut=arguments[3])==="object"&&ut!==null||(typeof Ue=="string"&&(Ge=Ue,Ue=null),typeof ut=="string"&&(Ge=ut,ut=null),typeof ut=="number"&&(Ue=ut,ut=null),se={flags:ut,angle:Ue,align:Ge})),isNaN(q)||isNaN(ne)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Vt;var Yt="",Jn=!1,An=typeof se.lineHeightFactor=="number"?se.lineHeightFactor:di,hr=Vt.internal.scaleFactor;function ks(Ct){return Ct=Ct.split("	").join(Array(se.TabLen||9).join(" ")),yn(Ct,ut)}function Mo(Ct){for(var Tt,Ut=Ct.concat(),$t=[],Cr=Ut.length;Cr--;)typeof(Tt=Ut.shift())=="string"?$t.push(Tt):Array.isArray(Ct)&&(Tt.length===1||Tt[1]===void 0&&Tt[2]===void 0)?$t.push(Tt[0]):$t.push([Tt[0],Tt[1],Tt[2]]);return $t}function Do(Ct,Tt){var Ut;if(typeof Ct=="string")Ut=Tt(Ct)[0];else if(Array.isArray(Ct)){for(var $t,Cr,Vo=Ct.concat(),eo=[],Rs=Vo.length;Rs--;)typeof($t=Vo.shift())=="string"?eo.push(Tt($t)[0]):Array.isArray($t)&&typeof $t[0]=="string"&&(Cr=Tt($t[0],$t[1],$t[2]),eo.push([Cr[0],Cr[1],Cr[2]]));Ut=eo}return Ut}var zi=!1,Fo=!0;if(typeof x=="string")zi=!0;else if(Array.isArray(x)){var jo=x.concat();Te=[];for(var Wi,en=jo.length;en--;)(typeof(Wi=jo.shift())!="string"||Array.isArray(Wi)&&typeof Wi[0]!="string")&&(Fo=!1);zi=Fo}if(zi===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var $i=Pe/Vt.internal.scaleFactor,Ji=$i*(An-1);switch(se.baseline){case"bottom":ne-=Ji;break;case"top":ne+=$i-Ji;break;case"hanging":ne+=$i-2*Ji;break;case"middle":ne+=$i/2-Ji}if((tt=se.maxWidth||0)>0&&(typeof x=="string"?x=Vt.splitTextToSize(x,tt):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce((function(Ct,Tt){return Ct.concat(Vt.splitTextToSize(Tt,tt))}),[]))),be={text:x,x:q,y:ne,options:se,mutex:{pdfEscape:yn,activeFontKey:lt,fonts:St,activeFontSize:Pe}},vt.publish("preProcessText",be),x=be.text,Ue=(se=be.options).angle,!(Rt instanceof $e)&&Ue&&typeof Ue=="number"){Ue*=Math.PI/180,se.rotationDirection===0&&(Ue=-Ue),C===_.ADVANCED&&(Ue=-Ue);var Yi=Math.cos(Ue),Uo=Math.sin(Ue);Rt=new $e(Yi,Uo,-Uo,Yi,0,0)}else Ue&&Ue instanceof $e&&(Rt=Ue);C!==_.ADVANCED||Rt||(Rt=lr),(rt=se.charSpace||Hi)!==void 0&&(Yt+=E(k(rt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Et=se.horizontalScale)!==void 0&&(Yt+=E(100*Et)+` Tz
`),se.lang;var xn=-1,tl=se.renderingMode!==void 0?se.renderingMode:se.stroke,Bo=Vt.internal.getCurrentPageInfo().pageContext;switch(tl){case 0:case!1:case"fill":xn=0;break;case 1:case!0:case"stroke":xn=1;break;case 2:case"fillThenStroke":xn=2;break;case 3:case"invisible":xn=3;break;case 4:case"fillAndAddForClipping":xn=4;break;case 5:case"strokeAndAddPathForClipping":xn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":xn=6;break;case 7:case"addToPathForClipping":xn=7}var Is=Bo.usedRenderingMode!==void 0?Bo.usedRenderingMode:-1;xn!==-1?Yt+=xn+` Tr
`:Is!==-1&&(Yt+=`0 Tr
`),xn!==-1&&(Bo.usedRenderingMode=xn),Ge=se.align||"left";var Pn,Ki=Pe*An,Es=Vt.internal.pageSize.getWidth(),Ps=St[lt];rt=se.charSpace||Hi,tt=se.maxWidth||0,ut=Object.assign({autoencode:!0,noBOM:!0},se.flags);var Ur=[],pi=function(Ct){return Vt.getStringUnitWidth(Ct,{font:Ps,charSpace:rt,fontSize:Pe,doKerning:!1})*Pe/hr};if(Object.prototype.toString.call(x)==="[object Array]"){var bn;Te=Mo(x),Ge!=="left"&&(Pn=Te.map(pi));var fn,Br=0;if(Ge==="right"){q-=Pn[0],x=[],en=Te.length;for(var Sr=0;Sr<en;Sr++)Sr===0?(fn=fr(q),bn=Nr(ne)):(fn=k(Br-Pn[Sr]),bn=-Ki),x.push([Te[Sr],fn,bn]),Br=Pn[Sr]}else if(Ge==="center"){q-=Pn[0]/2,x=[],en=Te.length;for(var _r=0;_r<en;_r++)_r===0?(fn=fr(q),bn=Nr(ne)):(fn=k((Br-Pn[_r])/2),bn=-Ki),x.push([Te[_r],fn,bn]),Br=Pn[_r]}else if(Ge==="left"){x=[],en=Te.length;for(var Xi=0;Xi<en;Xi++)x.push(Te[Xi])}else if(Ge==="justify"&&Ps.encoding==="Identity-H"){x=[],en=Te.length,tt=tt!==0?tt:Es;for(var Ar=0,jt=0;jt<en;jt++)if(bn=jt===0?Nr(ne):-Ki,fn=jt===0?fr(q):Ar,jt<en-1){var qo=k((tt-Pn[jt])/(Te[jt].split(" ").length-1)),hn=Te[jt].split(" ");x.push([hn[0]+" ",fn,bn]),Ar=0;for(var Ln=1;Ln<hn.length;Ln++){var Qi=(pi(hn[Ln-1]+" "+hn[Ln])-pi(hn[Ln]))*hr+qo;Ln==hn.length-1?x.push([hn[Ln],Qi,0]):x.push([hn[Ln]+" ",Qi,0]),Ar-=Qi}}else x.push([Te[jt],fn,bn]);x.push(["",Ar,0])}else{if(Ge!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],en=Te.length,tt=tt!==0?tt:Es,jt=0;jt<en;jt++)bn=jt===0?Nr(ne):-Ki,fn=jt===0?fr(q):0,jt<en-1?Ur.push(E(k((tt-Pn[jt])/(Te[jt].split(" ").length-1)))):Ur.push(0),x.push([Te[jt],fn,bn])}}var Ls=typeof se.R2L=="boolean"?se.R2L:Ve;Ls===!0&&(x=Do(x,(function(Ct,Tt,Ut){return[Ct.split("").reverse().join(""),Tt,Ut]}))),be={text:x,x:q,y:ne,options:se,mutex:{pdfEscape:yn,activeFontKey:lt,fonts:St,activeFontSize:Pe}},vt.publish("postProcessText",be),x=be.text,Jn=be.mutex.isHex||!1;var Oo=St[lt].encoding;Oo!=="WinAnsiEncoding"&&Oo!=="StandardEncoding"||(x=Do(x,(function(Ct,Tt,Ut){return[ks(Ct),Tt,Ut]}))),Te=Mo(x),x=[];for(var gi,mi,qr,vi=0,Zi=1,yi=Array.isArray(Te[0])?Zi:vi,Or="",Ho=function(Ct,Tt,Ut){var $t="";return Ut instanceof $e?(Ut=typeof se.angle=="number"?Hn(Ut,new $e(1,0,0,1,Ct,Tt)):Hn(new $e(1,0,0,1,Ct,Tt),Ut),C===_.ADVANCED&&(Ut=Hn(new $e(1,0,0,-1,0,0),Ut)),$t=Ut.join(" ")+` Tm
`):$t=E(Ct)+" "+E(Tt)+` Td
`,$t},Rn=0;Rn<Te.length;Rn++){switch(Or="",yi){case Zi:qr=(Jn?"<":"(")+Te[Rn][0]+(Jn?">":")"),gi=parseFloat(Te[Rn][1]),mi=parseFloat(Te[Rn][2]);break;case vi:qr=(Jn?"<":"(")+Te[Rn]+(Jn?">":")"),gi=fr(q),mi=Nr(ne)}Ur!==void 0&&Ur[Rn]!==void 0&&(Or=Ur[Rn]+` Tw
`),Rn===0?x.push(Or+Ho(gi,mi,Rt)+qr):yi===vi?x.push(Or+qr):yi===Zi&&x.push(Or+Ho(gi,mi,Rt)+qr)}x=yi===vi?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Mn=`BT
/`;return Mn+=lt+" "+Pe+` Tf
`,Mn+=E(Pe*An)+` TL
`,Mn+=fi+`
`,Mn+=Yt,Mn+=x,ie(Mn+="ET"),y[lt]=!0,Vt};var Wa=v.__private__.clip=v.clip=function(x){return ie(x==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return Wa("evenodd")},v.__private__.discardPath=v.discardPath=function(){return ie("n"),this};var dr=v.__private__.isValidStyle=function(x){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(q=!0),q};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(x){return dr(x)&&(c=x),this};var bs=v.__private__.getStyle=v.getStyle=function(x){var q=c;switch(x){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=x}return q},ws=v.close=function(){return ie("h"),this};v.stroke=function(){return ie("S"),this},v.fill=function(x){return qi("f",x),this},v.fillEvenOdd=function(x){return qi("f*",x),this},v.fillStroke=function(x){return qi("B",x),this},v.fillStrokeEvenOdd=function(x){return qi("B*",x),this};var qi=function(x,q){bt(q)==="object"?Ja(q,x):ie(x)},_o=function(x){x===null||C===_.ADVANCED&&x===void 0||(x=bs(x),ie(x))};function $a(x,q,ne,se,he){var be=new Ni(q||this.boundingBox,ne||this.xStep,se||this.yStep,this.gState,he||this.matrix);be.stream=this.stream;var Te=x+"$$"+this.cloneIndex+++"$$";return vn(Te,be),be}var Ja=function(x,q){var ne=ai[x.key],se=mt[ne];if(se instanceof Zr)ie("q"),ie(Ya(q)),se.gState&&v.setGState(se.gState),ie(x.matrix.toString()+" cm"),ie("/"+ne+" sh"),ie("Q");else if(se instanceof Ni){var he=new $e(1,0,0,-1,0,jr());x.matrix&&(he=he.multiply(x.matrix||lr),ne=$a.call(se,x.key,x.boundingBox,x.xStep,x.yStep,he).id),ie("q"),ie("/Pattern cs"),ie("/"+ne+" scn"),se.gState&&v.setGState(se.gState),ie(q),ie("Q")}},Ya=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ao=v.moveTo=function(x,q){return ie(E(k(x))+" "+E(J(q))+" m"),this},ui=v.lineTo=function(x,q){return ie(E(k(x))+" "+E(J(q))+" l"),this},Dr=v.curveTo=function(x,q,ne,se,he,be){return ie([E(k(x)),E(J(q)),E(k(ne)),E(J(se)),E(k(he)),E(J(be)),"c"].join(" ")),this};v.__private__.line=v.line=function(x,q,ne,se,he){if(isNaN(x)||isNaN(q)||isNaN(ne)||isNaN(se)||!dr(he))throw new Error("Invalid arguments passed to jsPDF.line");return C===_.COMPAT?this.lines([[ne-x,se-q]],x,q,[1,1],he||"S"):this.lines([[ne-x,se-q]],x,q,[1,1]).stroke()},v.__private__.lines=v.lines=function(x,q,ne,se,he,be){var Te,Ue,Ge,rt,tt,ut,Et,Rt,Vt,on,Yt,Jn;if(typeof x=="number"&&(Jn=ne,ne=q,q=x,x=Jn),se=se||[1,1],be=be||!1,isNaN(q)||isNaN(ne)||!Array.isArray(x)||!Array.isArray(se)||!dr(he)||typeof be!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ao(q,ne),Te=se[0],Ue=se[1],rt=x.length,on=q,Yt=ne,Ge=0;Ge<rt;Ge++)(tt=x[Ge]).length===2?(on=tt[0]*Te+on,Yt=tt[1]*Ue+Yt,ui(on,Yt)):(ut=tt[0]*Te+on,Et=tt[1]*Ue+Yt,Rt=tt[2]*Te+on,Vt=tt[3]*Ue+Yt,on=tt[4]*Te+on,Yt=tt[5]*Ue+Yt,Dr(ut,Et,Rt,Vt,on,Yt));return be&&ws(),_o(he),this},v.path=function(x){for(var q=0;q<x.length;q++){var ne=x[q],se=ne.c;switch(ne.op){case"m":Ao(se[0],se[1]);break;case"l":ui(se[0],se[1]);break;case"c":Dr.apply(this,se);break;case"h":ws()}}return this},v.__private__.rect=v.rect=function(x,q,ne,se,he){if(isNaN(x)||isNaN(q)||isNaN(ne)||isNaN(se)||!dr(he))throw new Error("Invalid arguments passed to jsPDF.rect");return C===_.COMPAT&&(se=-se),ie([E(k(x)),E(J(q)),E(k(ne)),E(k(se)),"re"].join(" ")),_o(he),this},v.__private__.triangle=v.triangle=function(x,q,ne,se,he,be,Te){if(isNaN(x)||isNaN(q)||isNaN(ne)||isNaN(se)||isNaN(he)||isNaN(be)||!dr(Te))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ne-x,se-q],[he-ne,be-se],[x-he,q-be]],x,q,[1,1],Te,!0),this},v.__private__.roundedRect=v.roundedRect=function(x,q,ne,se,he,be,Te){if(isNaN(x)||isNaN(q)||isNaN(ne)||isNaN(se)||isNaN(he)||isNaN(be)||!dr(Te))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ue=4/3*(Math.SQRT2-1);return he=Math.min(he,.5*ne),be=Math.min(be,.5*se),this.lines([[ne-2*he,0],[he*Ue,0,he,be-be*Ue,he,be],[0,se-2*be],[0,be*Ue,-he*Ue,be,-he,be],[2*he-ne,0],[-he*Ue,0,-he,-be*Ue,-he,-be],[0,2*be-se],[0,-be*Ue,he*Ue,-be,he,-be]],x+he,q,[1,1],Te,!0),this},v.__private__.ellipse=v.ellipse=function(x,q,ne,se,he){if(isNaN(x)||isNaN(q)||isNaN(ne)||isNaN(se)||!dr(he))throw new Error("Invalid arguments passed to jsPDF.ellipse");var be=4/3*(Math.SQRT2-1)*ne,Te=4/3*(Math.SQRT2-1)*se;return Ao(x+ne,q),Dr(x+ne,q-Te,x+be,q-se,x,q-se),Dr(x-be,q-se,x-ne,q-Te,x-ne,q),Dr(x-ne,q+Te,x-be,q+se,x,q+se),Dr(x+be,q+se,x+ne,q+Te,x+ne,q),_o(he),this},v.__private__.circle=v.circle=function(x,q,ne,se){if(isNaN(x)||isNaN(q)||isNaN(ne)||!dr(se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,q,ne,ne,se)},v.setFont=function(x,q,ne){return ne&&(q=M(q,ne)),lt=vs(x,q,{disableWarning:!1}),this};var Ka=v.__private__.getFont=v.getFont=function(){return St[vs.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var x,q,ne={};for(x in It)if(It.hasOwnProperty(x))for(q in ne[x]=[],It[x])It[x].hasOwnProperty(q)&&ne[x].push(q);return ne},v.addFont=function(x,q,ne,se,he){var be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&be.indexOf(arguments[3])!==-1?he=arguments[3]:arguments[3]&&be.indexOf(arguments[3])==-1&&(ne=M(ne,se)),he=he||"Identity-H",wo.call(this,x,q,ne,he)};var di,Co=t.lineWidth||.200025,Oi=v.__private__.getLineWidth=v.getLineWidth=function(){return Co},Ns=v.__private__.setLineWidth=v.setLineWidth=function(x){return Co=x,ie(E(k(x))+" w"),this};v.__private__.setLineDash=We.API.setLineDash=We.API.setLineDashPattern=function(x,q){if(x=x||[],q=q||0,isNaN(q)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map((function(ne){return E(k(ne))})).join(" "),q=E(k(q)),ie("["+x+"] "+q+" d"),this};var Ss=v.__private__.getLineHeight=v.getLineHeight=function(){return Pe*di};v.__private__.getLineHeight=v.getLineHeight=function(){return Pe*di};var _s=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(di=x),this},As=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return di};_s(t.lineHeight);var fr=v.__private__.getHorizontalCoordinate=function(x){return k(x)},Nr=v.__private__.getVerticalCoordinate=function(x){return C===_.ADVANCED?x:et[G].mediaBox.topRightY-et[G].mediaBox.bottomLeftY-k(x)},Xa=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(x){return E(fr(x))},Fr=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(x){return E(Nr(x))},$n=t.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return Gn($n)},v.__private__.setStrokeColor=v.setDrawColor=function(x,q,ne,se){return $n=zn({ch1:x,ch2:q,ch3:ne,ch4:se,pdfColorType:"draw",precision:2}),ie($n),this};var To=t.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return Gn(To)},v.__private__.setFillColor=v.setFillColor=function(x,q,ne,se){return To=zn({ch1:x,ch2:q,ch3:ne,ch4:se,pdfColorType:"fill",precision:2}),ie(To),this};var fi=t.textColor||"0 g",Qa=v.__private__.getTextColor=v.getTextColor=function(){return Gn(fi)};v.__private__.setTextColor=v.setTextColor=function(x,q,ne,se){return fi=zn({ch1:x,ch2:q,ch3:ne,ch4:se,pdfColorType:"text",precision:3}),this};var Hi=t.charSpace,Za=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Hi||0)};v.__private__.setCharSpace=v.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Hi=x,this};var ko=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(x){var q=v.CapJoinStyles[x];if(q===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ko=q,ie(q+" J"),this};var Io=0;v.__private__.setLineJoin=v.setLineJoin=function(x){var q=v.CapJoinStyles[x];if(q===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Io=q,ie(q+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ie(E(k(x))+" M"),this},v.GState=ls,v.setGState=function(x){(x=typeof x=="string"?Pt[On[x]]:Cs(null,x)).equals(xr)||(ie("/"+x.id+" gs"),xr=x)};var Cs=function(x,q){if(!x||!On[x]){var ne=!1;for(var se in Pt)if(Pt.hasOwnProperty(se)&&Pt[se].equals(q)){ne=!0;break}if(ne)q=Pt[se];else{var he="GS"+(Object.keys(Pt).length+1).toString(10);Pt[he]=q,q.id=he}return x&&(On[x]=q.id),vt.publish("addGState",q),q}};v.addGState=function(x,q){return Cs(x,q),this},v.saveGraphicsState=function(){return ie("q"),or.push({key:lt,size:Pe,color:fi}),this},v.restoreGraphicsState=function(){ie("Q");var x=or.pop();return lt=x.key,Pe=x.size,fi=x.color,xr=null,this},v.setCurrentTransformationMatrix=function(x){return ie(x.toString()+" cm"),this},v.comment=function(x){return ie("#"+x),this};var Vi=function(x,q){var ne=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ne},set:function(be){isNaN(be)||(ne=parseFloat(be))}});var se=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return se},set:function(be){isNaN(be)||(se=parseFloat(be))}});var he="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return he},set:function(be){he=be.toString()}}),this},Eo=function(x,q,ne,se){Vi.call(this,x,q),this.type="rect";var he=ne||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return he},set:function(Te){isNaN(Te)||(he=parseFloat(Te))}});var be=se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return be},set:function(Te){isNaN(Te)||(be=parseFloat(Te))}}),this},Po=function(){this.page=Lt,this.currentPage=G,this.pages=Ce.slice(0),this.pagesContext=et.slice(0),this.x=nn,this.y=ht,this.matrix=qn,this.width=hi(G),this.height=jr(G),this.outputDestination=Ie,this.id="",this.objectNumber=-1};Po.prototype.restore=function(){Lt=this.page,G=this.currentPage,et=this.pagesContext,Ce=this.pages,nn=this.x,ht=this.y,qn=this.matrix,Lo(G,this.width),Ro(G,this.height),Ie=this.outputDestination};var Ts=function(x,q,ne,se,he){ar.push(new Po),Lt=G=0,Ce=[],nn=x,ht=q,qn=he,No([ne,se])},el=function(x){if(sr[x])ar.pop().restore();else{var q=new Po,ne="Xo"+(Object.keys(Zt).length+1).toString(10);q.id=ne,sr[x]=ne,Zt[ne]=q,vt.publish("addFormObject",q),ar.pop().restore()}};for(var Gi in v.beginFormObject=function(x,q,ne,se,he){return Ts(x,q,ne,se,he),this},v.endFormObject=function(x){return el(x),this},v.doFormObject=function(x,q){var ne=Zt[sr[x]];return ie("q"),ie(q.toString()+" cm"),ie("/"+ne.id+" Do"),ie("Q"),this},v.getFormObject=function(x){var q=Zt[sr[x]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},v.save=function(x,q){return x=x||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(wi(Ui(wr()),x),typeof wi.unload=="function"&&Je.setTimeout&&setTimeout(wi.unload,911),this):new Promise((function(ne,se){try{var he=wi(Ui(wr()),x);typeof wi.unload=="function"&&Je.setTimeout&&setTimeout(wi.unload,911),ne(he)}catch(be){se(be.message)}}))},We.API)We.API.hasOwnProperty(Gi)&&(Gi==="events"&&We.API.events.length?(function(x,q){var ne,se,he;for(he=q.length-1;he!==-1;he--)ne=q[he][0],se=q[he][1],x.subscribe.apply(x,[ne].concat(typeof se=="function"?[se]:se))})(vt,We.API.events):v[Gi]=We.API[Gi]);var hi=v.getPageWidth=function(x){return(et[x=x||G].mediaBox.topRightX-et[x].mediaBox.bottomLeftX)/je},Lo=v.setPageWidth=function(x,q){et[x].mediaBox.topRightX=q*je+et[x].mediaBox.bottomLeftX},jr=v.getPageHeight=function(x){return(et[x=x||G].mediaBox.topRightY-et[x].mediaBox.bottomLeftY)/je},Ro=v.setPageHeight=function(x,q){et[x].mediaBox.topRightY=q*je+et[x].mediaBox.bottomLeftY};return v.internal={pdfEscape:yn,getStyle:bs,getFont:Ka,getFontSize:Me,getCharSpace:Za,getTextColor:Qa,getLineHeight:Ss,getLineHeightFactor:As,getLineWidth:Oi,write:Ke,getHorizontalCoordinate:fr,getVerticalCoordinate:Nr,getCoordinateString:Xa,getVerticalCoordinateString:Fr,collections:{},newObject:Wt,newAdditionalObject:Ei,newObjectDeferred:Ht,newObjectDeferredBegin:_n,getFilters:cr,putStream:En,events:vt,scaleFactor:je,pageSize:{getWidth:function(){return hi(G)},setWidth:function(x){Lo(G,x)},getHeight:function(){return jr(G)},setHeight:function(x){Ro(G,x)}},encryptionOptions:p,encryption:rn,getEncryptor:Ga,output:Bi,getNumberOfPages:Ba,pages:Ce,out:ie,f2:H,f3:I,getPageInfo:xs,getPageInfoByObjId:Xe,getCurrentPageInfo:za,getPDFVersion:A,Point:Vi,Rectangle:Eo,Matrix:$e,hasHotfix:ys},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return hi(G)},set:function(x){Lo(G,x)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return jr(G)},set:function(x){Ro(G,x)},enumerable:!0,configurable:!0}),ja.call(v,ke),lt="F1",gs(i,n),vt.publish("initialized"),v}co.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},co.prototype.toHexString=function(t){return t.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},co.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},co.prototype.processOwnerPassword=function(t,e){return Zl(Ql(e).substr(0,5),t)},co.prototype.encryptor=function(t,e){var n=Ql(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Zl(n,r)}},ls.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||bt(t)!==bt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},We.API={events:[]},We.version="2.5.2";var Dt=We.API,mc=1,Ii=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},oo=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nt=function(t){return t.toFixed(2)},Kr=function(t){return t.toFixed(5)};Dt.__acroform__={};var Sn=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Ed=function(t){return t*mc},gr=function(t){var e=new Zf,n=qe.internal.getHeight(t)||0,r=qe.internal.getWidth(t)||0;return e.BBox=[0,0,Number(nt(r)),Number(nt(n))],e},Uv=Dt.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Bv=Dt.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},qv=Dt.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Bt=Dt.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qv(t,e-1)},qt=Dt.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Uv(t,e-1)},Ot=Dt.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Bv(t,e-1)},Ov=Dt.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],o=t[1],s=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(o+a)||0,l.upperRight_X=n(i+s)||0,l.upperRight_Y=r(o)||0,[Number(nt(l.lowerLeft_X)),Number(nt(l.lowerLeft_Y)),Number(nt(l.upperRight_X)),Number(nt(l.upperRight_Y))]},Hv=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=ec(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+nt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=gr(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},ec=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map((function(I){return I.split(`
`)})):i.map((function(I){return[I]}));var o=n,s=qe.internal.getHeight(t)||0;s=s<0?-s:s;var a=qe.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(I,k,B){if(I+1<i.length){var J=k+" "+i[I+1][0];return sa(J,t,B).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var c,p,m=sa("3",t,o).height,y=t.multiline?s-o:(s-m)/2,v=y+=2,N=0,A=0,S=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+sa(e,t,o=12).width+", FieldWidth:"+a+`
`;break}for(var w="",_=0,C=0;C<i.length;C++)if(i.hasOwnProperty(C)){var F=!1;if(i[C].length!==1&&S!==i[C].length-1){if((m+2)*(_+2)+2>s)continue e;w+=i[C][S],F=!0,A=C,C--}else{w=(w+=i[C][S]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var D=parseInt(C),M=l(D,w,o),E=C>=i.length-1;if(M&&!E){w+=" ",S=0;continue}if(M||E){if(E)A=D;else if(t.multiline&&(m+2)*(_+2)+2>s)continue e}else{if(!t.multiline||(m+2)*(_+2)+2>s)continue e;A=D}}for(var L="",z=N;z<=A;z++){var H=i[z];if(t.multiline){if(z===A){L+=H[S]+" ",S=(S+1)%H.length;continue}if(z===N){L+=H[H.length-1]+" ";continue}}L+=H[0]+" "}switch(L=L.substr(L.length-1)==" "?L.substr(0,L.length-1):L,p=sa(L,t,o).width,t.textAlign){case"right":c=a-p-2;break;case"center":c=(a-p)/2;break;case"left":default:c=2}e+=nt(c)+" "+nt(v)+` Td
`,e+="("+Ii(L)+`) Tj
`,e+=-nt(c)+` 0 Td
`,v=-(o+2),p=0,N=F?A:A+1,_++,w=""}break}return r.text=e,r.fontSize=o,r},sa=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Vv={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Gv=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find((function(r){return r.type===n.type&&r.object===n.object}))===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},zv=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),bt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},Wv=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(rr.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Vv)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");mc=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new eh,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)})),t.internal.events.subscribe("buildDocument",(function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&Gv(o,n)}})(t)})),t.internal.events.subscribe("putCatalog",(function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)})),t.internal.events.subscribe("postPutPages",(function(n){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],l=[],c=a.Rect;if(a.Rect&&(a.Rect=Ov(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=qe.createDefaultAppearanceStream(a),bt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var p=Hv(a);l.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(a.appearanceStreamContent){var m="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var v=a.appearanceStreamContent[y];if(m+="/"+y+" ",m+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var s in v)if(v.hasOwnProperty(s)){var N=v[s];typeof N=="function"&&(N=N.call(i,a)),m+="/"+s+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=v)=="function"&&(N=N.call(i,a)),m+="/"+s+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);m+=">>"}l.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}o&&zv(i.internal.acroformPlugin.xForms,i)})(n,t)})),t.internal.acroformPlugin.isInitialized=!0}},Qf=Dt.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(s){return s};if(Array.isArray(t)){for(var i="[",o=0;o<t.length;o++)switch(o!==0&&(i+=" "),bt(t[o])){case"boolean":case"number":case"object":i+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Ii(r(t[o].toString()))+")"):i+=t[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},kl=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ii(r(t))+")"},mr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};mr.prototype.toString=function(){return this.objId+" 0 R"},mr.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},mr.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"}));for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:Qf(i,this.objId,this.scope)}):i instanceof mr?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var Zf=function(){mr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Sn(Zf,mr);var eh=function(){mr.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ii(n(t))+")"}},set:function(n){t=n}})};Sn(eh,mr);var rr=function t(){mr.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Bt(e,3)},set:function(w){w?this.F=qt(e,3):this.F=Ot(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');n=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof ba)return;o="FieldObject"+t.FieldNum++}var w=function(_){return _};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Ii(w(o))+")"},set:function(w){o=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(w){o=w}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(w){s=w}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/mc:c},set:function(w){c=w}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(w){p=w}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof ba||this instanceof ri))return kl(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=w}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Jt?y:kl(y,this.objId,this.scope)},set:function(w){w=w.toString(),y=this instanceof Jt?w:w.substr(0,1)==="("?oo(w.substr(1,w.length-2)):oo(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Jt?oo(y.substr(1,y.length-1)):y},set:function(w){w=w.toString(),y=this instanceof Jt?"/"+w:w}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Jt?v:kl(v,this.objId,this.scope)},set:function(w){w=w.toString(),v=this instanceof Jt?w:w.substr(0,1)==="("?oo(w.substr(1,w.length-2)):oo(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Jt?oo(v.substr(1,v.length-1)):v},set:function(w){w=w.toString(),v=this instanceof Jt?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(w){w=!!w,A=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(w){N=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,1)},set:function(w){w?this.Ff=qt(this.Ff,1):this.Ff=Ot(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,2)},set:function(w){w?this.Ff=qt(this.Ff,2):this.Ff=Ot(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,3)},set:function(w){w?this.Ff=qt(this.Ff,3):this.Ff=Ot(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');S=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(S){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};Sn(rr,mr);var Si=function(){rr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Qf(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=(function(o,s,a){a||(a=1);for(var l,c=[];l=s.exec(o);)c.push(l[a]);return c})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,18)},set:function(n){n?this.Ff=qt(this.Ff,18):this.Ff=Ot(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=qt(this.Ff,19):this.Ff=Ot(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,20)},set:function(n){n?(this.Ff=qt(this.Ff,20),e.sort()):this.Ff=Ot(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,22)},set:function(n){n?this.Ff=qt(this.Ff,22):this.Ff=Ot(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,23)},set:function(n){n?this.Ff=qt(this.Ff,23):this.Ff=Ot(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,27)},set:function(n){n?this.Ff=qt(this.Ff,27):this.Ff=Ot(this.Ff,27)}}),this.hasAppearanceStream=!1};Sn(Si,rr);var _i=function(){Si.call(this),this.fontName="helvetica",this.combo=!1};Sn(_i,Si);var Ai=function(){_i.call(this),this.combo=!0};Sn(Ai,_i);var rs=function(){Ai.call(this),this.edit=!0};Sn(rs,Ai);var Jt=function(){rr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,15)},set:function(n){n?this.Ff=qt(this.Ff,15):this.Ff=Ot(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,16)},set:function(n){n?this.Ff=qt(this.Ff,16):this.Ff=Ot(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,17)},set:function(n){n?this.Ff=qt(this.Ff,17):this.Ff=Ot(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,26)},set:function(n){n?this.Ff=qt(this.Ff,26):this.Ff=Ot(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ii(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){bt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Sn(Jt,rr);var is=function(){Jt.call(this),this.pushButton=!0};Sn(is,Jt);var Ci=function(){Jt.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Sn(Ci,Jt);var ba=function(){var t,e;rr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+Ii(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){bt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=qe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Sn(ba,rr),Ci.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Ci.prototype.createOption=function(t){var e=new ba;return e.Parent=this,e.optionName=t,this.Kids.push(e),$v.call(this.scope,e),e};var os=function(){Jt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=qe.CheckBox.createAppearanceStream()};Sn(os,Jt);var ri=function(){rr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,13)},set:function(e){e?this.Ff=qt(this.Ff,13):this.Ff=Ot(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,21)},set:function(e){e?this.Ff=qt(this.Ff,21):this.Ff=Ot(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,23)},set:function(e){e?this.Ff=qt(this.Ff,23):this.Ff=Ot(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,24)},set:function(e){e?this.Ff=qt(this.Ff,24):this.Ff=Ot(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,25)},set:function(e){e?this.Ff=qt(this.Ff,25):this.Ff=Ot(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,26)},set:function(e){e?this.Ff=qt(this.Ff,26):this.Ff=Ot(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Sn(ri,rr);var ss=function(){ri.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,14)},set:function(t){t?this.Ff=qt(this.Ff,14):this.Ff=Ot(this.Ff,14)}}),this.password=!0};Sn(ss,ri);var qe={CheckBox:{createAppearanceStream:function(){return{N:{On:qe.CheckBox.YesNormal},D:{On:qe.CheckBox.YesPushDown,Off:qe.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=ec(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+nt(qe.internal.getWidth(t))+" "+nt(qe.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+nt(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=gr(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],o=qe.internal.getHeight(t),s=qe.internal.getWidth(t),a=ec(t,t.caption);return i.push("1 g"),i.push("0 0 "+nt(s)+" "+nt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+nt(s-1)+" "+nt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+nt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+nt(qe.internal.getWidth(t))+" "+nt(qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:qe.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=qe.RadioButton.Circle.YesNormal,e.D[t]=qe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=qe.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*qe.internal.Bezier_C).toFixed(5)),s=Number((r*qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:qe.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=qe.RadioButton.Cross.YesNormal,e.D[t]=qe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+nt(qe.internal.getWidth(t)-2)+" "+nt(qe.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(nt(r.x1.x)+" "+nt(r.x1.y)+" m"),n.push(nt(r.x2.x)+" "+nt(r.x2.y)+" l"),n.push(nt(r.x4.x)+" "+nt(r.x4.y)+" m"),n.push(nt(r.x3.x)+" "+nt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=qe.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+nt(qe.internal.getWidth(t))+" "+nt(qe.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+nt(qe.internal.getWidth(t)-2)+" "+nt(qe.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(nt(n.x1.x)+" "+nt(n.x1.y)+" m"),r.push(nt(n.x2.x)+" "+nt(n.x2.y)+" l"),r.push(nt(n.x4.x)+" "+nt(n.x4.y)+" m"),r.push(nt(n.x3.x)+" "+nt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+nt(qe.internal.getWidth(t))+" "+nt(qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};qe.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=qe.internal.getWidth(t),n=qe.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},qe.internal.getWidth=function(t){var e=0;return bt(t)==="object"&&(e=Ed(t.Rect[2])),e},qe.internal.getHeight=function(t){var e=0;return bt(t)==="object"&&(e=Ed(t.Rect[3])),e};var $v=Dt.addField=function(t){if(Wv(this,t),!(t instanceof rr))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Dt.AcroFormChoiceField=Si,Dt.AcroFormListBox=_i,Dt.AcroFormComboBox=Ai,Dt.AcroFormEditBox=rs,Dt.AcroFormButton=Jt,Dt.AcroFormPushButton=is,Dt.AcroFormRadioButton=Ci,Dt.AcroFormCheckBox=os,Dt.AcroFormTextField=ri,Dt.AcroFormPasswordField=ss,Dt.AcroFormAppearance=qe,Dt.AcroForm={ChoiceField:Si,ListBox:_i,ComboBox:Ai,EditBox:rs,Button:Jt,PushButton:is,RadioButton:Ci,CheckBox:os,TextField:ri,PasswordField:ss,Appearance:qe},We.AcroForm={ChoiceField:Si,ListBox:_i,ComboBox:Ai,EditBox:rs,Button:Jt,PushButton:is,RadioButton:Ci,CheckBox:os,TextField:ri,PasswordField:ss,Appearance:qe};var Jv=We.AcroForm;function th(t){return t.reduce((function(e,n,r){return e[n]=r,e}),{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(I,k){var B,J,re,j,R,W=e;if((k=k||e)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(M(I))for(R in n)for(re=n[R],B=0;B<re.length;B+=1){for(j=!0,J=0;J<re[B].length;J+=1)if(re[B][J]!==void 0&&re[B][J]!==I[J]){j=!1;break}if(j===!0){W=R;break}}else for(R in n)for(re=n[R],B=0;B<re.length;B+=1){for(j=!0,J=0;J<re[B].length;J+=1)if(re[B][J]!==void 0&&re[B][J]!==I.charCodeAt(J)){j=!1;break}if(j===!0){W=R;break}}return W===e&&k!==e&&(W=k),W},i=function I(k){for(var B=this.internal.write,J=this.internal.putStream,re=(0,this.internal.getFilters)();re.indexOf("FlateEncode")!==-1;)re.splice(re.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var j=[];if(j.push({key:"Type",value:"/XObject"}),j.push({key:"Subtype",value:"/Image"}),j.push({key:"Width",value:k.width}),j.push({key:"Height",value:k.height}),k.colorSpace===S.INDEXED?j.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(j.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===S.DEVICE_CMYK&&j.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),j.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&j.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var R="",W=0,K=k.transparency.length;W<K;W++)R+=k.transparency[W]+" "+k.transparency[W]+" ";j.push({key:"Mask",value:"["+R+"]"})}k.sMask!==void 0&&j.push({key:"SMask",value:k.objectId+1+" 0 R"});var te=k.filter!==void 0?["/"+k.filter]:void 0;if(J({data:k.data,additionalKeyValues:j,alreadyAppliedFilters:te,objectId:k.objectId}),B("endobj"),"sMask"in k&&k.sMask!==void 0){var ae="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,P={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:ae,data:k.sMask};"filter"in k&&(P.filter=k.filter),I.call(this,P)}if(k.colorSpace===S.INDEXED){var G=this.internal.newObject();J({data:L(new Uint8Array(k.palette)),objectId:G}),B("endobj")}},o=function(){var I=this.internal.collections.addImage_images;for(var k in I)i.call(this,I[k])},s=function(){var I,k=this.internal.collections.addImage_images,B=this.internal.write;for(var J in k)B("/I"+(I=k[J]).index,I.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var I=this.internal.collections.addImage_images;return a.call(this),I},c=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(I){return typeof t["process"+I.toUpperCase()]=="function"},m=function(I){return bt(I)==="object"&&I.nodeType===1},y=function(I,k){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var B=""+I.getAttribute("src");if(B.indexOf("data:image/")===0)return ns(unescape(B).split("base64,").pop());var J=t.loadFile(B,!0);if(J!==void 0)return J}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var re;switch(k){case"PNG":re="image/png";break;case"WEBP":re="image/webp";break;case"JPEG":case"JPG":default:re="image/jpeg"}return ns(I.toDataURL(re,1).split("base64,").pop())}},v=function(I){var k=this.internal.collections.addImage_images;if(k){for(var B in k)if(I===k[B].alias)return k[B]}},N=function(I,k,B){return I||k||(I=-96,k=-96),I<0&&(I=-1*B.width*72/I/this.internal.scaleFactor),k<0&&(k=-1*B.height*72/k/this.internal.scaleFactor),I===0&&(I=k*B.width/B.height),k===0&&(k=I*B.height/B.width),[I,k]},A=function(I,k,B,J,re,j){var R=N.call(this,B,J,re),W=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,te=l.call(this);if(B=R[0],J=R[1],te[re.index]=re,j){j*=Math.PI/180;var ae=Math.cos(j),P=Math.sin(j),G=function(Q){return Q.toFixed(4)},X=[G(ae),G(P),G(-1*P),G(ae),0,0,"cm"]}this.internal.write("q"),j?(this.internal.write([1,"0","0",1,W(I),K(k+J),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([W(B),"0","0",W(J),"0","0","cm"].join(" "))):this.internal.write([W(B),"0","0",W(J),W(I),K(k+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+re.index+" Do"),this.internal.write("Q")},S=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=t.__addimage__.sHashCode=function(I){var k,B,J=0;if(typeof I=="string")for(B=I.length,k=0;k<B;k++)J=(J<<5)-J+I.charCodeAt(k),J|=0;else if(M(I))for(B=I.byteLength/2,k=0;k<B;k++)J=(J<<5)-J+I[k],J|=0;return J},C=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var k=!0;return I.length===0&&(k=!1),I.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(k=!1),k},F=t.__addimage__.extractImageFromDataUrl=function(I){var k=(I=I||"").split("base64,"),B=null;if(k.length===2){var J=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(k[0]);Array.isArray(J)&&(B={mimeType:J[1],charset:J[2],data:k[1]})}return B},D=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(I){return D()&&I instanceof ArrayBuffer};var M=t.__addimage__.isArrayBufferView=function(I){return D()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},E=t.__addimage__.binaryStringToUint8Array=function(I){for(var k=I.length,B=new Uint8Array(k),J=0;J<k;J++)B[J]=I.charCodeAt(J);return B},L=t.__addimage__.arrayBufferToBinaryString=function(I){for(var k="",B=M(I)?I:new Uint8Array(I),J=0;J<B.length;J+=8192)k+=String.fromCharCode.apply(null,B.subarray(J,J+8192));return k};t.addImage=function(){var I,k,B,J,re,j,R,W,K;if(typeof arguments[1]=="number"?(k=e,B=arguments[1],J=arguments[2],re=arguments[3],j=arguments[4],R=arguments[5],W=arguments[6],K=arguments[7]):(k=arguments[1],B=arguments[2],J=arguments[3],re=arguments[4],j=arguments[5],R=arguments[6],W=arguments[7],K=arguments[8]),bt(I=arguments[0])==="object"&&!m(I)&&"imageData"in I){var te=I;I=te.imageData,k=te.format||k||e,B=te.x||B||0,J=te.y||J||0,re=te.w||te.width||re,j=te.h||te.height||j,R=te.alias||R,W=te.compression||W,K=te.rotation||te.angle||K}var ae=this.internal.getFilters();if(W===void 0&&ae.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(B)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var P=z.call(this,I,k,R,W);return A.call(this,B,J,re,j,P,K),this};var z=function(I,k,B,J){var re,j,R;if(typeof I=="string"&&r(I)===e){I=unescape(I);var W=H(I,!1);(W!==""||(W=t.loadFile(I,!0))!==void 0)&&(I=W)}if(m(I)&&(I=y(I,k)),k=r(I,k),!p(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((R=B)==null||R.length===0)&&(B=(function(K){return typeof K=="string"||M(K)?_(K):M(K.data)?_(K.data):null})(I)),(re=v.call(this,B))||(D()&&(I instanceof Uint8Array||k==="RGBA"||(j=I,I=E(I))),re=this["process"+k.toUpperCase()](I,c.call(this),B,(function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in t.image_compression?K:w.NONE})(J),j)),!re)throw new Error("An unknown error occurred whilst processing the image.");return re},H=t.__addimage__.convertBase64ToBinaryString=function(I,k){var B;k=typeof k!="boolean"||k;var J,re="";if(typeof I=="string"){J=(B=F(I))!==null?B.data:I;try{re=ns(J)}catch(j){if(k)throw C(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+j.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return re};t.getImageProperties=function(I){var k,B,J="";if(m(I)&&(I=y(I)),typeof I=="string"&&r(I)===e&&((J=H(I,!1))===""&&(J=t.loadFile(I)||""),I=J),B=r(I),!p(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(!D()||I instanceof Uint8Array||(I=E(I)),!(k=this["process"+B.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=B,k}})(We.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};We.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,p=!1,m=0;m<c.length&&!p;m++)switch((r=c[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){r=c[y];var v=this.internal.pdfEscape,N=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(A.objId),_=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+v(w(r.contents))+")",o+=" /Popup "+S.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+v(w(_))+") >>",A.content=o;var C=A.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+C,r.open&&(o+=" /Open true"),o+=" >>",S.content=o,this.internal.write(A.objId,"0 R",S.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var F=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+v(N(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var D=this.annotations._nameMap[r.options.name];r.options.pageNumber=D.page,r.options.top=D.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+v(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var M=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+M+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,o,s){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+o)},options:s,type:"link"})},t.textWithLink=function(n,r,i,o){var s,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var p=this.splitTextToSize(n,a).length;s=Math.ceil(c*p)}else a=l,s=c;return this.text(n,r,i,o),i+=.2*c,o.align==="center"&&(r-=l/2),o.align==="right"&&(r-=l),this.link(r,i-c,a,s,o),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(We.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(A){return e[A.charCodeAt(0)]!==void 0},s=t.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},a=t.__arabicParser__.isArabicEndLetter=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(A){return s(A)&&i.indexOf(A.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(A){var S=0,w=n,_="",C=0;for(S=0;S<A.length;S+=1)w[A.charCodeAt(S)]!==void 0?(C++,typeof(w=w[A.charCodeAt(S)])=="number"&&(_+=String.fromCharCode(w),w=n,C=0),S===A.length-1&&(w=n,_+=A.charAt(S-(C-1)),S-=C-1,C=0)):(w=n,_+=A.charAt(S-C),S-=C,C=0);return _};t.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&r[A.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(A,S,w){return s(A)?o(A)===!1?-1:!c(A)||!s(S)&&!s(w)||!s(w)&&a(S)||a(A)&&!s(S)||a(A)&&l(S)||a(A)&&a(S)?0:p(A)&&s(S)&&!a(S)&&s(w)&&c(w)?3:a(A)||!s(w)?1:2:-1},v=function(A){var S=0,w=0,_=0,C="",F="",D="",M=(A=A||"").split("\\s+"),E=[];for(S=0;S<M.length;S+=1){for(E.push(""),w=0;w<M[S].length;w+=1)C=M[S][w],F=M[S][w-1],D=M[S][w+1],s(C)?(_=y(C,F,D),E[S]+=_!==-1?String.fromCharCode(e[C.charCodeAt(0)][_]):C):E[S]+=C;E[S]=m(E[S])}return E.join(" ")},N=t.__arabicParser__.processArabic=t.processArabic=function(){var A,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(S)){var _=0;for(w=[],_=0;_<S.length;_+=1)Array.isArray(S[_])?w.push([v(S[_][0]),S[_][1],S[_][2]]):w.push([v(S[_])]);A=w}else A=v(S);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};t.events.push(["preProcessText",N])})(We.API),We.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(We.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(A){l=A}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(A){c=A}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(A){p=A}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(A){m=A}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(A){y=A}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(A){v=A}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(A){N=A}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var p=(c=c||{}).fontSize||this.getFontSize(),m=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,v=0,N=0,A=0,S=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=c.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce((function(C,F){return C.concat(S.splitTextToSize(F,w))}),[])):l=Array.isArray(l)?l:[l];for(var _=0;_<l.length;_++)v<(A=this.getStringUnitWidth(l[_],{font:m})*p)&&(v=A);return v!==0&&(N=l.length),{w:v/=y,h:Math.max((N*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=m.top,v&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-p,l.y+p,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+p,{align:"center",baseline:"top",maxWidth:l.width-p-p}):this.text(l.text,l.x+p,l.y+p,{align:"left",baseline:"top",maxWidth:l.width-p-p})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,p,m,y){if(r.call(this),!p)throw new Error("No data for PDF table.");var v,N,A,S,w=[],_=[],C=[],F={},D={},M=[],E=[],L=(y=y||{}).autoSize||!1,z=y.printHeaders!==!1,H=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,I=y.margins||Object.assign({width:this.getPageWidth()},e),k=typeof y.padding=="number"?y.padding:3,B=y.headerBackgroundColor||"#c8c8c8",J=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=z,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=H,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=J,this.setFontSize(H),m==null)_=w=Object.keys(p[0]),C=w.map((function(){return"left"}));else if(Array.isArray(m)&&bt(m[0])==="object")for(w=m.map((function(te){return te.name})),_=m.map((function(te){return te.prompt||te.name||""})),C=m.map((function(te){return te.align||"left"})),v=0;v<m.length;v+=1)D[m[v].name]=m[v].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(_=w=m,C=w.map((function(){return"left"})));if(L||Array.isArray(m)&&typeof m[0]=="string")for(v=0;v<w.length;v+=1){for(F[S=w[v]]=p.map((function(te){return te[S]})),this.setFont(void 0,"bold"),M.push(this.getTextDimensions(_[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=F[S],this.setFont(void 0,"normal"),A=0;A<N.length;A+=1)M.push(this.getTextDimensions(N[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);D[S]=Math.max.apply(null,M)+k+k,M=[]}if(z){var re={};for(v=0;v<w.length;v+=1)re[w[v]]={},re[w[v]].text=_[v],re[w[v]].align=C[v];var j=a.call(this,re,D);E=w.map((function(te){return new o(l,c,D[te],j,re[te].text,void 0,re[te].align)})),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var R=m.reduce((function(te,ae){return te[ae.name]=ae.align,te}),{});for(v=0;v<p.length;v+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:v,data:p[v]},this);var W=a.call(this,p[v],D);for(A=0;A<w.length;A+=1){var K=p[v][w[A]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:v,col:A,data:K},this),s.call(this,new o(l,c,D[w[A]],W,K,v+2,R[w[A]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var p=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map((function(v){var N=l[v];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,c[v]-p-p)}),this).map((function(v){return this.getLineHeightFactor()*v.length*m/y+p+p}),this).reduce((function(v,N){return Math.max(v,N)}),0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){p=this.internal.__cell__.tableHeaderRow[v].clone(),c&&(p.y=this.internal.__cell__.margins.top||0,y.push(p)),p.lineNumber=l;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,p),this.setTextColor(N)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}})(We.API);var nh={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},rh=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],tc=th(rh),ih=[100,200,300,400,500,600,700,800,900],Yv=th(ih);function nc(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(o){return nh[o=o||"normal"]?o:"normal"})(t.style),r=(function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}})(t.weight),i=(function(o){return typeof tc[o=o||"normal"]=="number"?o:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function Pd(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Kv={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ld={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Rd(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Xv(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Kv,n.genericFontFamilies||{}),o=null,s=null,a=0;a<e.length;++a)if(i[(o=nc(e[a])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){s=t[o.family];break}if(!(s=s||t[r]))throw new Error("Could not find a font-family for the rule '"+Rd(o)+"' and default family '"+r+"'.");if(s=(function(l,c){if(c[l])return c[l];var p=tc[l],m=p<=tc.normal?-1:1,y=Pd(c,rh,p,m);if(!y)throw new Error("Could not find a matching font-stretch value for "+l);return y})(o.stretch,s),s=(function(l,c){if(c[l])return c[l];for(var p=nh[l],m=0;m<p.length;++m)if(c[p[m]])return c[p[m]];throw new Error("Could not find a matching font-style for "+l)})(o.style,s),!(s=(function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var p=Yv[l],m=Pd(c,ih,p,l<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+l);return m})(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+Rd(o)+"'.");return s}function Md(t){return t.trimLeft()}function Qv(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Zv(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var aa,Dd,Fd,Il=["times"];(function(t){var e,n,r,i,o,s,a,l,c,p=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new s,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new s,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new p}]);var m=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=P;Object.defineProperty(this,"pdf",{get:function(){return G}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(xe){X=!!xe}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(xe){Q=!!xe}});var ee=0;Object.defineProperty(this,"posX",{get:function(){return ee},set:function(xe){isNaN(xe)||(ee=xe)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(xe){isNaN(xe)||(oe=xe)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(xe){var ie;typeof xe=="number"?ie=[xe,xe,xe,xe]:((ie=new Array(4))[0]=xe[0],ie[1]=xe.length>=2?xe[1]:ie[0],ie[2]=xe.length>=3?xe[2]:ie[0],ie[3]=xe.length>=4?xe[3]:ie[1]),c.margin=ie}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(xe){de=xe}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(xe){pe=xe}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(xe){Ne=xe}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(xe){xe instanceof p&&(c=xe)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(xe){c.path=xe}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(xe){Ce=xe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(xe){var ie;ie=y(xe),this.ctx.fillStyle=ie.style,this.ctx.isFillTransparent=ie.a===0,this.ctx.fillOpacity=ie.a,this.pdf.setFillColor(ie.r,ie.g,ie.b,{a:ie.a}),this.pdf.setTextColor(ie.r,ie.g,ie.b,{a:ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(xe){var ie=y(xe);this.ctx.strokeStyle=ie.style,this.ctx.isStrokeTransparent=ie.a===0,this.ctx.strokeOpacity=ie.a,ie.a===0?this.pdf.setDrawColor(255,255,255):(ie.a,this.pdf.setDrawColor(ie.r,ie.g,ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(xe){["butt","round","square"].indexOf(xe)!==-1&&(this.ctx.lineCap=xe,this.pdf.setLineCap(xe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(xe){isNaN(xe)||(this.ctx.lineWidth=xe,this.pdf.setLineWidth(xe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(xe){["bevel","round","miter"].indexOf(xe)!==-1&&(this.ctx.lineJoin=xe,this.pdf.setLineJoin(xe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(xe){isNaN(xe)||(this.ctx.miterLimit=xe,this.pdf.setMiterLimit(xe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(xe){this.ctx.textBaseline=xe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(xe){["right","end","center","left","start"].indexOf(xe)!==-1&&(this.ctx.textAlign=xe)}});var Ee=null;function Ie(xe,ie){if(Ee===null){var Ke=(function(Oe){var ke=[];return Object.keys(Oe).forEach((function(Pe){Oe[Pe].forEach((function(Fe){var Me=null;switch(Fe){case"bold":Me={family:Pe,weight:"bold"};break;case"italic":Me={family:Pe,style:"italic"};break;case"bolditalic":Me={family:Pe,weight:"bold",style:"italic"};break;case"":case"normal":Me={family:Pe}}Me!==null&&(Me.ref={name:Pe,style:Fe},ke.push(Me))}))})),ke})(xe.getFontList());Ee=(function(Oe){for(var ke={},Pe=0;Pe<Oe.length;++Pe){var Fe=nc(Oe[Pe]),Me=Fe.family,Ve=Fe.stretch,Ze=Fe.style,ot=Fe.weight;ke[Me]=ke[Me]||{},ke[Me][Ve]=ke[Me][Ve]||{},ke[Me][Ve][Ze]=ke[Me][Ve][Ze]||{},ke[Me][Ve][Ze][ot]=Fe}return ke})(Ke.concat(ie))}return Ee}var He=null;Object.defineProperty(this,"fontFaces",{get:function(){return He},set:function(xe){Ee=null,He=xe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(xe){var ie;if(this.ctx.font=xe,(ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(xe))!==null){var Ke=ie[1],Oe=(ie[2],ie[3]),ke=ie[4],Pe=(ie[5],ie[6]),Fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ke)[2];ke=Math.floor(Fe==="px"?parseFloat(ke)*this.pdf.internal.scaleFactor:Fe==="em"?parseFloat(ke)*this.pdf.getFontSize():parseFloat(ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ke);var Me=(function(Ye){var lt,je,nn=[],ht=Ye.trim();if(ht==="")return Il;if(ht in Ld)return[Ld[ht]];for(;ht!=="";){switch(je=null,lt=(ht=Md(ht)).charAt(0)){case'"':case"'":je=Qv(ht.substring(1),lt);break;default:je=Zv(ht)}if(je===null||(nn.push(je[0]),(ht=Md(je[1]))!==""&&ht.charAt(0)!==","))return Il;ht=ht.replace(/^,/,"")}return nn})(Pe);if(this.fontFaces){var Ve=Xv(Ie(this.pdf,this.fontFaces),Me.map((function(Ye){return{family:Ye,stretch:"normal",weight:Oe,style:Ke}})));this.pdf.setFont(Ve.ref.name,Ve.ref.style)}else{var Ze="";(Oe==="bold"||parseInt(Oe,10)>=700||Ke==="bold")&&(Ze="bold"),Ke==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ot="",at={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<Me.length;dt++){if(this.pdf.internal.getFont(Me[dt],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ot=Me[dt];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(Me[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Me[dt],Ze="bold";else if(this.pdf.internal.getFont(Me[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Me[dt],Ze="normal";break}}if(ot===""){for(var wt=0;wt<Me.length;wt++)if(at[Me[wt]]){ot=at[Me[wt]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(xe){this.ctx.globalCompositeOperation=xe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(xe){this.ctx.globalAlpha=xe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(xe){this.ctx.lineDashOffset=xe,ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(xe){this.ctx.lineDash=xe,ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(xe){this.ctx.ignoreClearRect=!!xe}})};m.prototype.setLineDash=function(P){this.lineDash=P},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){F.call(this,"fill",!1)},m.prototype.stroke=function(){F.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(P,G){if(isNaN(P)||isNaN(G))throw At.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new s(P,G));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new s(P,G)},m.prototype.closePath=function(){var P=new s(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&bt(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){P=new s(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(P.x,P.y)},m.prototype.lineTo=function(P,G){if(isNaN(P)||isNaN(G))throw At.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new s(P,G));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new s(X.x,X.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},m.prototype.quadraticCurveTo=function(P,G,X,Q){if(isNaN(X)||isNaN(Q)||isNaN(P)||isNaN(G))throw At.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ee=this.ctx.transform.applyToPoint(new s(X,Q)),oe=this.ctx.transform.applyToPoint(new s(P,G));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new s(ee.x,ee.y)},m.prototype.bezierCurveTo=function(P,G,X,Q,ee,oe){if(isNaN(ee)||isNaN(oe)||isNaN(P)||isNaN(G)||isNaN(X)||isNaN(Q))throw At.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new s(ee,oe)),pe=this.ctx.transform.applyToPoint(new s(P,G)),Ne=this.ctx.transform.applyToPoint(new s(X,Q));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:Ne.x,y2:Ne.y,x:de.x,y:de.y}),this.ctx.lastPoint=new s(de.x,de.y)},m.prototype.arc=function(P,G,X,Q,ee,oe){if(isNaN(P)||isNaN(G)||isNaN(X)||isNaN(Q)||isNaN(ee))throw At.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new s(P,G));P=de.x,G=de.y;var pe=this.ctx.transform.applyToPoint(new s(0,X)),Ne=this.ctx.transform.applyToPoint(new s(0,0));X=Math.sqrt(Math.pow(pe.x-Ne.x,2)+Math.pow(pe.y-Ne.y,2))}Math.abs(ee-Q)>=2*Math.PI&&(Q=0,ee=2*Math.PI),this.path.push({type:"arc",x:P,y:G,radius:X,startAngle:Q,endAngle:ee,counterclockwise:oe})},m.prototype.arcTo=function(P,G,X,Q,ee){throw new Error("arcTo not implemented.")},m.prototype.rect=function(P,G,X,Q){if(isNaN(P)||isNaN(G)||isNaN(X)||isNaN(Q))throw At.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,G),this.lineTo(P+X,G),this.lineTo(P+X,G+Q),this.lineTo(P,G+Q),this.lineTo(P,G),this.lineTo(P+X,G),this.lineTo(P,G)},m.prototype.fillRect=function(P,G,X,Q){if(isNaN(P)||isNaN(G)||isNaN(X)||isNaN(Q))throw At.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var ee={};this.lineCap!=="butt"&&(ee.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ee.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,G,X,Q),this.fill(),ee.hasOwnProperty("lineCap")&&(this.lineCap=ee.lineCap),ee.hasOwnProperty("lineJoin")&&(this.lineJoin=ee.lineJoin)}},m.prototype.strokeRect=function(P,G,X,Q){if(isNaN(P)||isNaN(G)||isNaN(X)||isNaN(Q))throw At.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(P,G,X,Q),this.stroke())},m.prototype.clearRect=function(P,G,X,Q){if(isNaN(P)||isNaN(G)||isNaN(X)||isNaN(Q))throw At.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,G,X,Q))},m.prototype.save=function(P){P=typeof P!="boolean"||P;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},m.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(G),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(P){var G,X,Q,ee;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))G=0,X=0,Q=0,ee=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(oe!==null)G=parseInt(oe[1]),X=parseInt(oe[2]),Q=parseInt(oe[3]),ee=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)G=parseInt(oe[1]),X=parseInt(oe[2]),Q=parseInt(oe[3]),ee=parseFloat(oe[4]);else{if(ee=1,typeof P=="string"&&P.charAt(0)!=="#"){var de=new Yf(P);P=de.ok?de.toHex():"#000000"}P.length===4?(G=P.substring(1,2),G+=G,X=P.substring(2,3),X+=X,Q=P.substring(3,4),Q+=Q):(G=P.substring(1,3),X=P.substring(3,5),Q=P.substring(5,7)),G=parseInt(G,16),X=parseInt(X,16),Q=parseInt(Q,16)}}return{r:G,g:X,b:Q,a:ee,style:P}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(P,G,X,Q){if(isNaN(G)||isNaN(X)||typeof P!="string")throw At.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!v.call(this)){var ee=W(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;k.call(this,{text:P,x:G,y:X,scale:oe,angle:ee,align:this.textAlign,maxWidth:Q})}},m.prototype.strokeText=function(P,G,X,Q){if(isNaN(G)||isNaN(X)||typeof P!="string")throw At.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){Q=isNaN(Q)?void 0:Q;var ee=W(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;k.call(this,{text:P,x:G,y:X,scale:oe,renderingMode:"stroke",angle:ee,align:this.textAlign,maxWidth:Q})}},m.prototype.measureText=function(P){if(typeof P!="string")throw At.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,X=this.pdf.internal.scaleFactor,Q=G.internal.getFontSize(),ee=G.getStringUnitWidth(P)*Q/G.internal.scaleFactor,oe=function(de){var pe=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this};return new oe({width:ee*=Math.round(96*X/72*1e4)/1e4})},m.prototype.scale=function(P,G){if(isNaN(P)||isNaN(G))throw At.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new l(P,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},m.prototype.rotate=function(P){if(isNaN(P))throw At.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},m.prototype.translate=function(P,G){if(isNaN(P)||isNaN(G))throw At.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new l(1,0,0,1,P,G);this.ctx.transform=this.ctx.transform.multiply(X)},m.prototype.transform=function(P,G,X,Q,ee,oe){if(isNaN(P)||isNaN(G)||isNaN(X)||isNaN(Q)||isNaN(ee)||isNaN(oe))throw At.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new l(P,G,X,Q,ee,oe);this.ctx.transform=this.ctx.transform.multiply(de)},m.prototype.setTransform=function(P,G,X,Q,ee,oe){P=isNaN(P)?1:P,G=isNaN(G)?0:G,X=isNaN(X)?0:X,Q=isNaN(Q)?1:Q,ee=isNaN(ee)?0:ee,oe=isNaN(oe)?0:oe,this.ctx.transform=new l(P,G,X,Q,ee,oe)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(P,G,X,Q,ee,oe,de,pe,Ne){var Ce=this.pdf.getImageProperties(P),Ee=1,Ie=1,He=1,xe=1;Q!==void 0&&pe!==void 0&&(He=pe/Q,xe=Ne/ee,Ee=Ce.width/Q*pe/Q,Ie=Ce.height/ee*Ne/ee),oe===void 0&&(oe=G,de=X,G=0,X=0),Q!==void 0&&pe===void 0&&(pe=Q,Ne=ee),Q===void 0&&pe===void 0&&(pe=Ce.width,Ne=Ce.height);for(var ie,Ke=this.ctx.transform.decompose(),Oe=W(Ke.rotate.shx),ke=new l,Pe=(ke=(ke=(ke=ke.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale)).applyToRectangle(new a(oe-G*He,de-X*xe,Q*Ee,ee*Ie)),Fe=S.call(this,Pe),Me=[],Ve=0;Ve<Fe.length;Ve+=1)Me.indexOf(Fe[Ve])===-1&&Me.push(Fe[Ve]);if(C(Me),this.autoPaging)for(var Ze=Me[0],ot=Me[Me.length-1],at=Ze;at<ot+1;at++){this.pdf.setPage(at);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wt=at===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],je=at===1?0:Ye+(at-2)*lt;if(this.ctx.clip_path.length!==0){var nn=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(ie,this.posX+this.margin[3],-je+wt+this.ctx.prevPageLastElemOffset),D.call(this,"fill",!0),this.path=nn}var ht=JSON.parse(JSON.stringify(Pe));ht=_([ht],this.posX+this.margin[3],-je+wt+this.ctx.prevPageLastElemOffset)[0];var qn=(at>Ze||at<ot)&&A.call(this);qn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,lt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",ht.x,ht.y,ht.w,ht.h,null,null,Oe),qn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,Oe)};var S=function(P,G,X){var Q=[];G=G||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ee=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":Q.push(Math.floor((P.y+ee)/X)+1);break;case"arc":Q.push(Math.floor((P.y+ee-P.radius)/X)+1),Q.push(Math.floor((P.y+ee+P.radius)/X)+1);break;case"qct":var oe=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);Q.push(Math.floor((oe.y+ee)/X)+1),Q.push(Math.floor((oe.y+oe.h+ee)/X)+1);break;case"bct":var de=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);Q.push(Math.floor((de.y+ee)/X)+1),Q.push(Math.floor((de.y+de.h+ee)/X)+1);break;case"rect":Q.push(Math.floor((P.y+ee)/X)+1),Q.push(Math.floor((P.y+P.h+ee)/X)+1)}for(var pe=0;pe<Q.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<Q[pe];)w.call(this);return Q},w=function(){var P=this.fillStyle,G=this.strokeStyle,X=this.font,Q=this.lineCap,ee=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=G,this.font=X,this.lineCap=Q,this.lineWidth=ee,this.lineJoin=oe},_=function(P,G,X){for(var Q=0;Q<P.length;Q++)switch(P[Q].type){case"bct":P[Q].x2+=G,P[Q].y2+=X;case"qct":P[Q].x1+=G,P[Q].y1+=X;case"mt":case"lt":case"arc":default:P[Q].x+=G,P[Q].y+=X}return P},C=function(P){return P.sort((function(G,X){return G-X}))},F=function(P,G){for(var X,Q,ee=this.fillStyle,oe=this.strokeStyle,de=this.lineCap,pe=this.lineWidth,Ne=Math.abs(pe*this.ctx.transform.scaleX),Ce=this.lineJoin,Ee=JSON.parse(JSON.stringify(this.path)),Ie=JSON.parse(JSON.stringify(this.path)),He=[],xe=0;xe<Ie.length;xe++)if(Ie[xe].x!==void 0)for(var ie=S.call(this,Ie[xe]),Ke=0;Ke<ie.length;Ke+=1)He.indexOf(ie[Ke])===-1&&He.push(ie[Ke]);for(var Oe=0;Oe<He.length;Oe++)for(;this.pdf.internal.getNumberOfPages()<He[Oe];)w.call(this);if(C(He),this.autoPaging)for(var ke=He[0],Pe=He[He.length-1],Fe=ke;Fe<Pe+1;Fe++){this.pdf.setPage(Fe),this.fillStyle=ee,this.strokeStyle=oe,this.lineCap=de,this.lineWidth=Ne,this.lineJoin=Ce;var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Fe===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],at=Fe===1?0:Ze+(Fe-2)*ot;if(this.ctx.clip_path.length!==0){var dt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(X,this.posX+this.margin[3],-at+Ve+this.ctx.prevPageLastElemOffset),D.call(this,P,!0),this.path=dt}if(Q=JSON.parse(JSON.stringify(Ee)),this.path=_(Q,this.posX+this.margin[3],-at+Ve+this.ctx.prevPageLastElemOffset),G===!1||Fe===0){var wt=(Fe>ke||Fe<Pe)&&A.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,ot,null).clip().discardPath()),D.call(this,P,G),wt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}else this.lineWidth=Ne,D.call(this,P,G),this.lineWidth=pe;this.path=Ee},D=function(P,G){if((P!=="stroke"||G||!N.call(this))&&(P==="stroke"||G||!v.call(this))){for(var X,Q,ee=[],oe=this.path,de=0;de<oe.length;de++){var pe=oe[de];switch(pe.type){case"begin":ee.push({begin:!0});break;case"close":ee.push({close:!0});break;case"mt":ee.push({start:pe,deltas:[],abs:[]});break;case"lt":var Ne=ee.length;if(oe[de-1]&&!isNaN(oe[de-1].x)&&(X=[pe.x-oe[de-1].x,pe.y-oe[de-1].y],Ne>0)){for(;Ne>=0;Ne--)if(ee[Ne-1].close!==!0&&ee[Ne-1].begin!==!0){ee[Ne-1].deltas.push(X),ee[Ne-1].abs.push(pe);break}}break;case"bct":X=[pe.x1-oe[de-1].x,pe.y1-oe[de-1].y,pe.x2-oe[de-1].x,pe.y2-oe[de-1].y,pe.x-oe[de-1].x,pe.y-oe[de-1].y],ee[ee.length-1].deltas.push(X);break;case"qct":var Ce=oe[de-1].x+2/3*(pe.x1-oe[de-1].x),Ee=oe[de-1].y+2/3*(pe.y1-oe[de-1].y),Ie=pe.x+2/3*(pe.x1-pe.x),He=pe.y+2/3*(pe.y1-pe.y),xe=pe.x,ie=pe.y;X=[Ce-oe[de-1].x,Ee-oe[de-1].y,Ie-oe[de-1].x,He-oe[de-1].y,xe-oe[de-1].x,ie-oe[de-1].y],ee[ee.length-1].deltas.push(X);break;case"arc":ee.push({deltas:[],abs:[],arc:!0}),Array.isArray(ee[ee.length-1].abs)&&ee[ee.length-1].abs.push(pe)}}Q=G?null:P==="stroke"?"stroke":"fill";for(var Ke=!1,Oe=0;Oe<ee.length;Oe++)if(ee[Oe].arc)for(var ke=ee[Oe].abs,Pe=0;Pe<ke.length;Pe++){var Fe=ke[Pe];Fe.type==="arc"?L.call(this,Fe.x,Fe.y,Fe.radius,Fe.startAngle,Fe.endAngle,Fe.counterclockwise,void 0,G,!Ke):B.call(this,Fe.x,Fe.y),Ke=!0}else if(ee[Oe].close===!0)this.pdf.internal.out("h"),Ke=!1;else if(ee[Oe].begin!==!0){var Me=ee[Oe].start.x,Ve=ee[Oe].start.y;J.call(this,ee[Oe].deltas,Me,Ve),Ke=!0}Q&&z.call(this,Q),G&&H.call(this)}},M=function(P){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-X;case"top":return P+G-X;case"hanging":return P+G-2*X;case"middle":return P+G/2-X;case"ideographic":return P;case"alphabetic":default:return P}},E=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(G,X){this.colorStops.push([G,X])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var L=function(P,G,X,Q,ee,oe,de,pe,Ne){for(var Ce=j.call(this,X,Q,ee,oe),Ee=0;Ee<Ce.length;Ee++){var Ie=Ce[Ee];Ee===0&&(Ne?I.call(this,Ie.x1+P,Ie.y1+G):B.call(this,Ie.x1+P,Ie.y1+G)),re.call(this,P,G,Ie.x2,Ie.y2,Ie.x3,Ie.y3,Ie.x4,Ie.y4)}pe?H.call(this):z.call(this,de)},z=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},H=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(P,G){this.pdf.internal.out(n(P)+" "+r(G)+" m")},k=function(P){var G;switch(P.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var X=this.pdf.getTextDimensions(P.text),Q=M.call(this,P.y),ee=E.call(this,Q)-X.h,oe=this.ctx.transform.applyToPoint(new s(P.x,Q)),de=this.ctx.transform.decompose(),pe=new l;pe=(pe=(pe=pe.multiply(de.translate)).multiply(de.skew)).multiply(de.scale);for(var Ne,Ce,Ee,Ie=this.ctx.transform.applyToRectangle(new a(P.x,Q,X.w,X.h)),He=pe.applyToRectangle(new a(P.x,ee,X.w,X.h)),xe=S.call(this,He),ie=[],Ke=0;Ke<xe.length;Ke+=1)ie.indexOf(xe[Ke])===-1&&ie.push(xe[Ke]);if(C(ie),this.autoPaging)for(var Oe=ie[0],ke=ie[ie.length-1],Pe=Oe;Pe<ke+1;Pe++){this.pdf.setPage(Pe);var Fe=Pe===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],Ze=Ve-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],at=ot-this.margin[3],dt=Pe===1?0:Me+(Pe-2)*Ze;if(this.ctx.clip_path.length!==0){var wt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(Ne,this.posX+this.margin[3],-1*dt+Fe),D.call(this,"fill",!0),this.path=wt}var Ye=_([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-dt+Fe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*P.scale),Ee=this.lineWidth,this.lineWidth=Ee*P.scale);var lt=this.autoPaging!=="text";if(lt||Ye.y+Ye.h<=Ve){if(lt||Ye.y>=Fe&&Ye.x<=ot){var je=lt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ot-Ye.x)[0],nn=_([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-dt+Fe+this.ctx.prevPageLastElemOffset)[0],ht=lt&&(Pe>Oe||Pe<ke)&&A.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Ze,null).clip().discardPath()),this.pdf.text(je,nn.x,nn.y,{angle:P.angle,align:G,renderingMode:P.renderingMode}),ht&&this.pdf.restoreGraphicsState()}}else Ye.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-Ye.y);P.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ee)}else P.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*P.scale),Ee=this.lineWidth,this.lineWidth=Ee*P.scale),this.pdf.text(P.text,oe.x+this.posX,oe.y+this.posY,{angle:P.angle,align:G,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ee)},B=function(P,G,X,Q){X=X||0,Q=Q||0,this.pdf.internal.out(n(P+X)+" "+r(G+Q)+" l")},J=function(P,G,X){return this.pdf.lines(P,G,X,null,null)},re=function(P,G,X,Q,ee,oe,de,pe){this.pdf.internal.out([e(i(X+P)),e(o(Q+G)),e(i(ee+P)),e(o(oe+G)),e(i(de+P)),e(o(pe+G)),"c"].join(" "))},j=function(P,G,X,Q){for(var ee=2*Math.PI,oe=Math.PI/2;G>X;)G-=ee;var de=Math.abs(X-G);de<ee&&Q&&(de=ee-de);for(var pe=[],Ne=Q?-1:1,Ce=G;de>1e-5;){var Ee=Ce+Ne*Math.min(de,oe);pe.push(R.call(this,P,Ce,Ee)),de-=Math.abs(Ee-Ce),Ce=Ee}return pe},R=function(P,G,X){var Q=(X-G)/2,ee=P*Math.cos(Q),oe=P*Math.sin(Q),de=ee,pe=-oe,Ne=de*de+pe*pe,Ce=Ne+de*ee+pe*oe,Ee=4/3*(Math.sqrt(2*Ne*Ce)-Ce)/(de*oe-pe*ee),Ie=de-Ee*pe,He=pe+Ee*de,xe=Ie,ie=-He,Ke=Q+G,Oe=Math.cos(Ke),ke=Math.sin(Ke);return{x1:P*Math.cos(G),y1:P*Math.sin(G),x2:Ie*Oe-He*ke,y2:Ie*ke+He*Oe,x3:xe*Oe-ie*ke,y3:xe*ke+ie*Oe,x4:P*Math.cos(X),y4:P*Math.sin(X)}},W=function(P){return 180*P/Math.PI},K=function(P,G,X,Q,ee,oe){var de=P+.5*(X-P),pe=G+.5*(Q-G),Ne=ee+.5*(X-ee),Ce=oe+.5*(Q-oe),Ee=Math.min(P,ee,de,Ne),Ie=Math.max(P,ee,de,Ne),He=Math.min(G,oe,pe,Ce),xe=Math.max(G,oe,pe,Ce);return new a(Ee,He,Ie-Ee,xe-He)},te=function(P,G,X,Q,ee,oe,de,pe){var Ne,Ce,Ee,Ie,He,xe,ie,Ke,Oe,ke,Pe,Fe,Me,Ve,Ze=X-P,ot=Q-G,at=ee-X,dt=oe-Q,wt=de-ee,Ye=pe-oe;for(Ce=0;Ce<41;Ce++)Oe=(ie=(Ee=P+(Ne=Ce/40)*Ze)+Ne*((He=X+Ne*at)-Ee))+Ne*(He+Ne*(ee+Ne*wt-He)-ie),ke=(Ke=(Ie=G+Ne*ot)+Ne*((xe=Q+Ne*dt)-Ie))+Ne*(xe+Ne*(oe+Ne*Ye-xe)-Ke),Ce==0?(Pe=Oe,Fe=ke,Me=Oe,Ve=ke):(Pe=Math.min(Pe,Oe),Fe=Math.min(Fe,ke),Me=Math.max(Me,Oe),Ve=Math.max(Ve,ke));return new a(Math.round(Pe),Math.round(Fe),Math.round(Me-Pe),Math.round(Ve-Fe))},ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,G,X=(P=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:G}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(We.API),(function(t){var e=function(o){var s,a,l,c,p,m,y,v,N,A;for(a=[],l=0,c=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;c>l;l+=4)(p=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(m=(p=((p=((p=((p=(p-(A=p%85))/85)-(N=p%85))/85)-(v=p%85))/85)-(y=p%85))/85)%85,a.push(m+33,y+33,v+33,N+33,A+33)):a.push(122);return(function(S,w){for(var _=w;_>0;_--)S.pop()})(a,s.length),String.fromCharCode.apply(String,a)+"~>"},n=function(o){var s,a,l,c,p,m=String,y="length",v=255,N="charCodeAt",A="slice",S="replace";for(o[A](-2),o=o[A](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),l=[],c=0,p=(o+=s="uuuuu"[A](o[y]%5||5))[y];p>c;c+=5)a=52200625*(o[N](c)-33)+614125*(o[N](c+1)-33)+7225*(o[N](c+2)-33)+85*(o[N](c+3)-33)+(o[N](c+4)-33),l.push(v&a>>24,v&a>>16,v&a>>8,v&a);return(function(w,_){for(var C=_;C>0;C--)w.pop()})(l,s[y]),m.fromCharCode.apply(m,l)},r=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var a="",l=0;l<o.length;l+=2)a+=String.fromCharCode("0x"+(o[l]+o[l+1]));return a},i=function(o){for(var s=new Uint8Array(o.length),a=o.length;a--;)s[a]=o.charCodeAt(a);return o=(s=Kl(s)).reduce((function(l,c){return l+String.fromCharCode(c)}),"")};t.processDataByFilters=function(o,s){var a=0,l=o||"",c=[];for(typeof(s=s||[])=="string"&&(s=[s]),a=0;a<s.length;a+=1)switch(s[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map((function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)})).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}})(We.API),(function(t){t.loadFile=function(e,n,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(l,c,p){var m=new XMLHttpRequest,y=0,v=function(N){var A=N.length,S=[],w=String.fromCharCode;for(y=0;y<A;y+=1)S.push(w(255&N.charCodeAt(y)));return S.join("")};if(m.open("GET",l,!c),m.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(m.onload=function(){m.status===200?p(v(this.responseText)):p(void 0)}),m.send(null),c&&m.status===200)return v(m.responseText)})(i,o,s)}catch{}return a})(e,n,r)},t.loadImageFile=t.loadFile})(We.API),(function(t){function e(){return(Je.html2canvas?Promise.resolve(Je.html2canvas):Pl(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))})).then((function(s){return s.default?s.default:s}))}function n(){return(Je.DOMPurify?Promise.resolve(Je.DOMPurify):Pl(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(s){return Promise.reject(new Error("Could not load dompurify: "+s))})).then((function(s){return s.default?s.default:s}))}var r=function(s){var a=bt(s);return a==="undefined"?"undefined":a==="string"||s instanceof String?"string":a==="number"||s instanceof Number?"number":a==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(s,a){var l=document.createElement(s);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},o=function s(a){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),c=s.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,s,1,[s])).set(a)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,a){return s.__proto__=a||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,a){return this.then((function(){switch(a=a||(function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(s)){case"string":return this.then(n).then((function(l){return this.set({src:i("div",{innerHTML:s,dompurify:l})})}));case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=(function l(c,p){for(var m=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),y=c.firstChild;y;y=y.nextSibling)p!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||m.appendChild(l(y,p));return c.nodeType===1&&(c.nodeName==="CANVAS"?(m.width=c.width,m.height=c.height,m.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(m.value=c.value),m.addEventListener("load",(function(){m.scrollTop=c.scrollTop,m.scrollLeft=c.scrollLeft}),!0)),m})(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then((function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)})).then((function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then((function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var y=0;y<c.length;++y){var v=c[y],N=v.src.find((function(A){return A.format==="truetype"}));N&&l.addFont(N.url,v.ref.name,v.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),a(this.prop.container,m)})).then((function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(s,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,a):this.outputPdf(s,a)},o.prototype.outputPdf=function(s,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(s,a)}))},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}}))},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(s){if(r(s)!=="object")return this;var a=Object.keys(s||{}).map((function(l){if(l in o.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}}),this);return this.then((function(){return this.thenList(a)}))},o.prototype.get=function(s,a){return this.then((function(){var l=s in o.template.prop?this.prop[s]:this.opt[s];return a?a(l):l}))},o.prototype.setMargin=function(s){return this.then((function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s})).then(this.setPageSize)},o.prototype.setPageSize=function(s){function a(l,c){return Math.floor(l*c/72*96)}return this.then((function(){(s=s||We.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:a(s.inner.width,s.k),height:a(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s}))},o.prototype.setProgress=function(s,a,l,c){return s!=null&&(this.progress.val=s),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,a,l,c){return this.setProgress(s?this.progress.val+s:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},o.prototype.then=function(s,a){var l=this;return this.thenCore(s,a,(function(c,p){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,(function(m){return l.updateProgress(null,c),m})).then(c,p).then((function(m){return l.updateProgress(1),m}))}))},o.prototype.thenCore=function(s,a,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),p=l.call(c,s,a);return o.convert(p,this.__proto__)},o.prototype.thenExternal=function(s,a){return Promise.prototype.then.call(this,s,a)},o.prototype.thenList=function(s){var a=this;return s.forEach((function(l){a=a.thenCore(l)})),a},o.prototype.catch=function(s){s&&(s=s.bind(this));var a=Promise.prototype.catch.call(this,s);return o.convert(a,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then((function(){throw new Error(s)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,We.getPageSize=function(s,a,l){if(bt(s)==="object"){var c=s;s=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var p,m=(""+l).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+a}var v,N=0,A=0;if(y.hasOwnProperty(m))N=y[m][1]/p,A=y[m][0]/p;else try{N=l[1],A=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",A>N&&(v=A,A=N,N=v);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",N>A&&(v=A,A=N,N=v)}return{width:A,height:N,unit:a,k:p,orientation:s}},t.html=function(s,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(nc):null;var l=new o(a);return a.worker?l:l.from(s).doCallback()}})(We.API),We.API.addJS=function(t){return Fd=t,this.internal.events.subscribe("postPutResources",(function(){aa=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(aa+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Dd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Fd+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){aa!==void 0&&Dd!==void 0&&this.internal.out("/Names <</JavaScript "+aa+" 0 R>>")})),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,p=[];for(o=0;o<c;o++){var m=n.internal.newObject();p.push(m);var y=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var v=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<p.length;o++)n.internal.write("(page_"+(o+1)+")"+p[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+v+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var l=n.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(We.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,o,s,a){var l,c=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=s||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=(function(m){for(var y,v=256*m.charCodeAt(4)+m.charCodeAt(5),N=m.length,A={width:0,height:0,numcomponents:1},S=4;S<N;S+=2){if(S+=v,e.indexOf(m.charCodeAt(S+1))!==-1){y=256*m.charCodeAt(S+5)+m.charCodeAt(S+6),A={width:256*m.charCodeAt(S+7)+m.charCodeAt(S+8),height:y,numcomponents:m.charCodeAt(S+9)};break}v=256*m.charCodeAt(S+2)+m.charCodeAt(S+3)}return A})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}p={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return p}})(We.API);var so,la,jd,Ud,Bd,ey=(function(){var t,e,n;function r(o){var s,a,l,c,p,m,y,v,N,A,S,w,_,C;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(s=this.readUInt32(),N=(function(){var F,D;for(D=[],F=0;F<4;++F)D.push(String.fromCharCode(this.data[this.pos++]));return D}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),c=this.readUInt16()||100,m.delay=1e3*p/c,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,s-=4),o=(m!=null?m.data:void 0)||this.imgData,w=0;0<=s?w<s:w>s;0<=s?++w:--w)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((A=l-this.transparency.indexed.length)>0)for(_=0;0<=A?_<A:_>A;0<=A?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":y=(S=this.read(s)).indexOf(0),v=String.fromCharCode.apply(String,S.slice(0,y)),this.text[v]=String.fromCharCode.apply(String,S.slice(y+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var s,a;for(a=[],s=0;0<=o?s<o:s>o;0<=o?++s:--s)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var s=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*s),l=0,c=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function p(m,y,v,N){var A,S,w,_,C,F,D,M,E,L,z,H,I,k,B,J,re,j,R,W,K,te=Math.ceil((c.width-m)/v),ae=Math.ceil((c.height-y)/N),P=c.width==te&&c.height==ae;for(k=s*te,H=P?a:new Uint8Array(k*ae),F=o.length,I=0,S=0;I<ae&&l<F;){switch(o[l++]){case 0:for(_=re=0;re<k;_=re+=1)H[S++]=o[l++];break;case 1:for(_=j=0;j<k;_=j+=1)A=o[l++],C=_<s?0:H[S-s],H[S++]=(A+C)%256;break;case 2:for(_=R=0;R<k;_=R+=1)A=o[l++],w=(_-_%s)/s,B=I&&H[(I-1)*k+w*s+_%s],H[S++]=(B+A)%256;break;case 3:for(_=W=0;W<k;_=W+=1)A=o[l++],w=(_-_%s)/s,C=_<s?0:H[S-s],B=I&&H[(I-1)*k+w*s+_%s],H[S++]=(A+Math.floor((C+B)/2))%256;break;case 4:for(_=K=0;K<k;_=K+=1)A=o[l++],w=(_-_%s)/s,C=_<s?0:H[S-s],I===0?B=J=0:(B=H[(I-1)*k+w*s+_%s],J=w&&H[(I-1)*k+(w-1)*s+_%s]),D=C+B-J,M=Math.abs(D-C),L=Math.abs(D-B),z=Math.abs(D-J),E=M<=L&&M<=z?C:L<=z?B:J,H[S++]=(A+E)%256;break;default:throw new Error("Invalid filter algorithm: "+o[l-1])}if(!P){var G=((y+I*N)*c.width+m)*s,X=I*k;for(_=0;_<te;_+=1){for(var Q=0;Q<s;Q+=1)a[G++]=H[X++];G+=(v-1)*s}}I++}}return o=Pv(o),c.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),a},r.prototype.decodePalette=function(){var o,s,a,l,c,p,m,y,v;for(a=this.palette,p=this.transparency.indexed||[],c=new Uint8Array((p.length||0)+a.length),l=0,o=0,s=m=0,y=a.length;m<y;s=m+=3)c[l++]=a[s],c[l++]=a[s+1],c[l++]=a[s+2],c[l++]=(v=p[o++])!=null?v:255;return c},r.prototype.copyToImageData=function(o,s){var a,l,c,p,m,y,v,N,A,S,w;if(l=this.colors,A=null,a=this.hasAlphaChannel,this.palette.length&&(A=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,a=!0),N=(c=o.data||o).length,m=A||s,p=y=0,l===1)for(;p<N;)v=A?4*s[p/4]:y,S=m[v++],c[p++]=S,c[p++]=S,c[p++]=S,c[p++]=a?m[v++]:255,y=v;else for(;p<N;)v=A?4*s[p/4]:y,c[p++]=m[v++],c[p++]=m[v++],c[p++]=m[v++],c[p++]=a?m[v++]:255,y=v},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(Je)==="[object Window]"){try{e=Je.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(o){var s;if(i()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var s,a,l,c,p,m,y,v;if(this.animation){for(v=[],a=p=0,m=(y=this.animation.frames).length;p<m;a=++p)s=y[a],l=o.createImageData(s.width,s.height),c=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,c),s.imageData=l,v.push(s.image=t(l));return v}},r.prototype.renderFrame=function(o,s){var a,l,c;return a=(l=this.animation.frames)[s],c=l[s-1],s===0&&o.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?o.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&o.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&o.clearRect(a.xOffset,a.yOffset,a.width,a.height),o.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(o){var s,a,l,c,p,m,y=this;return a=0,m=this.animation,c=m.numFrames,l=m.frames,p=m.numPlays,(s=function(){var v,N;if(v=a++%c,N=l[v],y.renderFrame(o,v),c>1&&a/c<p)return y.animation._timeout=setTimeout(s,N.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var s,a;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,s=o.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(a=s.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),s.putImageData(a,0,0))},r})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ty(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,s=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;o&&(a=e,l=s,e+=3*s);var c=!0,p=[],m=0,y=null,v=0,N=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,N=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var A=t[e++];m=t[e++]|t[e++]<<8,y=t[e++],(1&A)==0&&(y=null),v=A>>2&7,e++;break;case 254:for(;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var S=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,F=t[e++],D=F>>6&1,M=1<<(7&F)+1,E=a,L=l,z=!1;F>>7&&(z=!0,E=e,L=M,e+=3*M);var H=e;for(e++;;){var I;if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}p.push({x:S,y:w,width:_,height:C,has_local_palette:z,palette_offset:E,palette_size:L,data_offset:H,data_length:e-H,transparent_index:y,interlaced:!!D,delay:m,disposal:v});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return N},this.frameInfo=function(k){if(k<0||k>=p.length)throw new Error("Frame index out of range.");return p[k]},this.decodeAndBlitFrameBGRA=function(k,B){var J=this.frameInfo(k),re=J.width*J.height,j=new Uint8Array(re);qd(t,J.data_offset,j,re);var R=J.palette_offset,W=J.transparent_index;W===null&&(W=256);var K=J.width,te=n-K,ae=K,P=4*(J.y*n+J.x),G=4*((J.y+J.height)*n+J.x),X=P,Q=4*te;J.interlaced===!0&&(Q+=4*n*7);for(var ee=8,oe=0,de=j.length;oe<de;++oe){var pe=j[oe];if(ae===0&&(ae=K,(X+=Q)>=G&&(Q=4*te+4*n*(ee-1),X=P+(K+te)*(ee<<1),ee>>=1)),pe===W)X+=4;else{var Ne=t[R+3*pe],Ce=t[R+3*pe+1],Ee=t[R+3*pe+2];B[X++]=Ee,B[X++]=Ce,B[X++]=Ne,B[X++]=255}--ae}},this.decodeAndBlitFrameRGBA=function(k,B){var J=this.frameInfo(k),re=J.width*J.height,j=new Uint8Array(re);qd(t,J.data_offset,j,re);var R=J.palette_offset,W=J.transparent_index;W===null&&(W=256);var K=J.width,te=n-K,ae=K,P=4*(J.y*n+J.x),G=4*((J.y+J.height)*n+J.x),X=P,Q=4*te;J.interlaced===!0&&(Q+=4*n*7);for(var ee=8,oe=0,de=j.length;oe<de;++oe){var pe=j[oe];if(ae===0&&(ae=K,(X+=Q)>=G&&(Q=4*te+4*n*(ee-1),X=P+(K+te)*(ee<<1),ee>>=1)),pe===W)X+=4;else{var Ne=t[R+3*pe],Ce=t[R+3*pe+1],Ee=t[R+3*pe+2];B[X++]=Ne,B[X++]=Ce,B[X++]=Ee,B[X++]=255}--ae}}}function qd(t,e,n,r){for(var i=t[e++],o=1<<i,s=o+1,a=s+1,l=i+1,c=(1<<l)-1,p=0,m=0,y=0,v=t[e++],N=new Int32Array(4096),A=null;;){for(;p<16&&v!==0;)m|=t[e++]<<p,p+=8,v===1?v=t[e++]:--v;if(p<l)break;var S=m&c;if(m>>=l,p-=l,S!==o){if(S===s)break;for(var w=S<a?S:A,_=0,C=w;C>o;)C=N[C]>>8,++_;var F=C;if(y+_+(w!==S?1:0)>r)return void At.log("Warning, gif stream longer than expected.");n[y++]=F;var D=y+=_;for(w!==S&&(n[y++]=F),C=w;_--;)C=N[C],n[--D]=255&C,C>>=8;A!==null&&a<4096&&(N[a++]=A<<8|F,a>=c+1&&l<12&&(++l,c=c<<1|1)),A=S}else a=s+1,c=(1<<(l=i+1))-1,A=null}return y!==r&&At.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function El(t){var e,n,r,i,o,s=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),p=new Array(64),m=new Array(65535),y=new Array(65535),v=new Array(64),N=new Array(64),A=[],S=0,w=7,_=new Array(64),C=new Array(64),F=new Array(64),D=new Array(256),M=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],L=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],re=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function j(P,G){for(var X=0,Q=0,ee=new Array,oe=1;oe<=16;oe++){for(var de=1;de<=P[oe];de++)ee[G[Q]]=[],ee[G[Q]][0]=X,ee[G[Q]][1]=oe,Q++,X++;X*=2}return ee}function R(P){for(var G=P[0],X=P[1]-1;X>=0;)G&1<<X&&(S|=1<<w),X--,--w<0&&(S==255?(W(255),W(0)):W(S),w=7,S=0)}function W(P){A.push(P)}function K(P){W(P>>8&255),W(255&P)}function te(P,G,X,Q,ee){for(var oe,de=ee[0],pe=ee[240],Ne=(function(ke,Pe){var Fe,Me,Ve,Ze,ot,at,dt,wt,Ye,lt,je=0;for(Ye=0;Ye<8;++Ye){Fe=ke[je],Me=ke[je+1],Ve=ke[je+2],Ze=ke[je+3],ot=ke[je+4],at=ke[je+5],dt=ke[je+6];var nn=Fe+(wt=ke[je+7]),ht=Fe-wt,qn=Me+dt,St=Me-dt,It=Ve+at,or=Ve-at,mt=Ze+ot,ai=Ze-ot,Pt=nn+mt,On=nn-mt,xr=qn+It,Lt=qn-It;ke[je]=Pt+xr,ke[je+4]=Pt-xr;var et=.707106781*(Lt+On);ke[je+2]=On+et,ke[je+6]=On-et;var vt=.382683433*((Pt=ai+or)-(Lt=St+ht)),li=.5411961*Pt+vt,Zt=1.306562965*Lt+vt,sr=.707106781*(xr=or+St),ar=ht+sr,$e=ht-sr;ke[je+5]=$e+li,ke[je+3]=$e-li,ke[je+1]=ar+Zt,ke[je+7]=ar-Zt,je+=8}for(je=0,Ye=0;Ye<8;++Ye){Fe=ke[je],Me=ke[je+8],Ve=ke[je+16],Ze=ke[je+24],ot=ke[je+32],at=ke[je+40],dt=ke[je+48];var Hn=Fe+(wt=ke[je+56]),lr=Fe-wt,vn=Me+dt,Wt=Me-dt,Ht=Ve+at,_n=Ve-at,Ei=Ze+ot,br=Ze-ot,Vn=Hn+Ei,Gn=Hn-Ei,zn=vn+Ht,cr=vn-Ht;ke[je]=Vn+zn,ke[je+32]=Vn-zn;var En=.707106781*(cr+Gn);ke[je+16]=Gn+En,ke[je+48]=Gn-En;var ur=.382683433*((Vn=br+_n)-(cr=Wt+lr)),ci=.5411961*Vn+ur,Pi=1.306562965*cr+ur,Li=.707106781*(zn=_n+Wt),Ri=lr+Li,Mi=lr-Li;ke[je+40]=Mi+ci,ke[je+24]=Mi-ci,ke[je+8]=Ri+Pi,ke[je+56]=Ri-Pi,je++}for(Ye=0;Ye<64;++Ye)lt=ke[Ye]*Pe[Ye],v[Ye]=lt>0?lt+.5|0:lt-.5|0;return v})(P,G),Ce=0;Ce<64;++Ce)N[E[Ce]]=Ne[Ce];var Ee=N[0]-X;X=N[0],Ee==0?R(Q[0]):(R(Q[y[oe=32767+Ee]]),R(m[oe]));for(var Ie=63;Ie>0&&N[Ie]==0;)Ie--;if(Ie==0)return R(de),X;for(var He,xe=1;xe<=Ie;){for(var ie=xe;N[xe]==0&&xe<=Ie;)++xe;var Ke=xe-ie;if(Ke>=16){He=Ke>>4;for(var Oe=1;Oe<=He;++Oe)R(pe);Ke&=15}oe=32767+N[xe],R(ee[(Ke<<4)+y[oe]]),R(m[oe]),xe++}return Ie!=63&&R(de),X}function ae(P){P=Math.min(Math.max(P,1),100),o!=P&&((function(G){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var ee=s((X[Q]*G+50)/100);ee=Math.min(Math.max(ee,1),255),a[E[Q]]=ee}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var pe=s((oe[de]*G+50)/100);pe=Math.min(Math.max(pe,1),255),l[E[de]]=pe}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,Ee=0;Ee<8;Ee++)for(var Ie=0;Ie<8;Ie++)c[Ce]=1/(a[E[Ce]]*Ne[Ee]*Ne[Ie]*8),p[Ce]=1/(l[E[Ce]]*Ne[Ee]*Ne[Ie]*8),Ce++})(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),o=P)}this.encode=function(P,G){G&&ae(G),A=new Array,S=0,w=7,K(65496),K(65504),K(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),K(1),K(1),W(0),W(0),(function(){K(65499),K(132),W(0);for(var Me=0;Me<64;Me++)W(a[Me]);W(1);for(var Ve=0;Ve<64;Ve++)W(l[Ve])})(),(function(Me,Ve){K(65472),K(17),W(8),K(Ve),K(Me),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)})(P.width,P.height),(function(){K(65476),K(418),W(0);for(var Me=0;Me<16;Me++)W(L[Me+1]);for(var Ve=0;Ve<=11;Ve++)W(z[Ve]);W(16);for(var Ze=0;Ze<16;Ze++)W(H[Ze+1]);for(var ot=0;ot<=161;ot++)W(I[ot]);W(1);for(var at=0;at<16;at++)W(k[at+1]);for(var dt=0;dt<=11;dt++)W(B[dt]);W(17);for(var wt=0;wt<16;wt++)W(J[wt+1]);for(var Ye=0;Ye<=161;Ye++)W(re[Ye])})(),K(65498),K(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var X=0,Q=0,ee=0;S=0,w=7,this.encode.displayName="_encode_";for(var oe,de,pe,Ne,Ce,Ee,Ie,He,xe,ie=P.data,Ke=P.width,Oe=P.height,ke=4*Ke,Pe=0;Pe<Oe;){for(oe=0;oe<ke;){for(Ce=ke*Pe+oe,Ie=-1,He=0,xe=0;xe<64;xe++)Ee=Ce+(He=xe>>3)*ke+(Ie=4*(7&xe)),Pe+He>=Oe&&(Ee-=ke*(Pe+1+He-Oe)),oe+Ie>=ke&&(Ee-=oe+Ie-ke+4),de=ie[Ee++],pe=ie[Ee++],Ne=ie[Ee++],_[xe]=(M[de]+M[pe+256>>0]+M[Ne+512>>0]>>16)-128,C[xe]=(M[de+768>>0]+M[pe+1024>>0]+M[Ne+1280>>0]>>16)-128,F[xe]=(M[de+1280>>0]+M[pe+1536>>0]+M[Ne+1792>>0]>>16)-128;X=te(_,c,X,e,r),Q=te(C,p,Q,n,i),ee=te(F,p,ee,n,i),oe+=32}Pe+=8}if(w>=0){var Fe=[];Fe[1]=w+1,Fe[0]=(1<<w+1)-1,R(Fe)}return K(65497),new Uint8Array(A)},t=t||50,(function(){for(var P=String.fromCharCode,G=0;G<256;G++)D[G]=P(G)})(),e=j(L,z),n=j(k,B),r=j(H,I),i=j(J,re),(function(){for(var P=1,G=2,X=1;X<=15;X++){for(var Q=P;Q<G;Q++)y[32767+Q]=X,m[32767+Q]=[],m[32767+Q][1]=X,m[32767+Q][0]=Q;for(var ee=-(G-1);ee<=-P;ee++)y[32767+ee]=X,m[32767+ee]=[],m[32767+ee][1]=X,m[32767+ee][0]=G-1+ee;P<<=1,G<<=1}})(),(function(){for(var P=0;P<256;P++)M[P]=19595*P,M[P+256>>0]=38470*P,M[P+512>>0]=7471*P+32768,M[P+768>>0]=-11059*P,M[P+1024>>0]=-21709*P,M[P+1280>>0]=32768*P+8421375,M[P+1536>>0]=-27439*P,M[P+1792>>0]=-5329*P})(),ae(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Qn(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Od(t){function e(L){if(!L)throw Error("assert :P")}function n(L,z,H){for(var I=0;4>I;I++)if(L[z+I]!=H.charCodeAt(I))return!0;return!1}function r(L,z,H,I,k){for(var B=0;B<k;B++)L[z+B]=H[I+B]}function i(L,z,H,I){for(var k=0;k<I;k++)L[z+k]=H}function o(L){return new Int32Array(L)}function s(L,z){for(var H=[],I=0;I<L;I++)H.push(new z);return H}function a(L,z){var H=[];return(function I(k,B,J){for(var re=J[B],j=0;j<re&&(k.push(J.length>B+1?[]:new z),!(J.length<B+1));j++)I(k[j],B+1,J)})(H,0,L),H}var l=function(){var L=this;function z(d,g){for(var b=1<<g-1>>>0;d&b;)b>>>=1;return b?(d&b-1)+b:d}function H(d,g,b,T,U){e(!(T%b));do d[g+(T-=b)]=U;while(0<T)}function I(d,g,b,T,U){if(e(2328>=U),512>=U)var O=o(512);else if((O=o(U))==null)return 0;return(function(V,$,Y,Z,le,ge){var me,fe,_e=$,ye=1<<Y,ce=o(16),ue=o(16);for(e(le!=0),e(Z!=null),e(V!=null),e(0<Y),fe=0;fe<le;++fe){if(15<Z[fe])return 0;++ce[Z[fe]]}if(ce[0]==le)return 0;for(ue[1]=0,me=1;15>me;++me){if(ce[me]>1<<me)return 0;ue[me+1]=ue[me]+ce[me]}for(fe=0;fe<le;++fe)me=Z[fe],0<Z[fe]&&(ge[ue[me]++]=fe);if(ue[15]==1)return(Z=new k).g=0,Z.value=ge[0],H(V,_e,1,ye,Z),ye;var we,Ae=-1,Se=ye-1,Be=0,Le=1,ze=1,Re=1<<Y;for(fe=0,me=1,le=2;me<=Y;++me,le<<=1){if(Le+=ze<<=1,0>(ze-=ce[me]))return 0;for(;0<ce[me];--ce[me])(Z=new k).g=me,Z.value=ge[fe++],H(V,_e+Be,le,Re,Z),Be=z(Be,me)}for(me=Y+1,le=2;15>=me;++me,le<<=1){if(Le+=ze<<=1,0>(ze-=ce[me]))return 0;for(;0<ce[me];--ce[me]){if(Z=new k,(Be&Se)!=Ae){for(_e+=Re,we=1<<(Ae=me)-Y;15>Ae&&!(0>=(we-=ce[Ae]));)++Ae,we<<=1;ye+=Re=1<<(we=Ae-Y),V[$+(Ae=Be&Se)].g=we+Y,V[$+Ae].value=_e-$-Ae}Z.g=me-Y,Z.value=ge[fe++],H(V,_e+(Be>>Y),le,Re,Z),Be=z(Be,me)}}return Le!=2*ue[15]-1?0:ye})(d,g,b,T,U,O)}function k(){this.value=this.g=0}function B(){this.value=this.g=0}function J(){this.G=s(5,k),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(en,B)}function re(d,g,b,T){e(d!=null),e(g!=null),e(2147483648>T),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=g,d.pa=b,d.Jd=g,d.Yc=b+T,d.Zc=4<=T?b+T-4+1:b,oe(d)}function j(d,g){for(var b=0;0<g--;)b|=pe(d,128)<<g;return b}function R(d,g){var b=j(d,g);return de(d)?-b:b}function W(d,g,b,T){var U,O=0;for(e(d!=null),e(g!=null),e(4294967288>T),d.Sb=T,d.Ra=0,d.u=0,d.h=0,4<T&&(T=4),U=0;U<T;++U)O+=g[b+U]<<8*U;d.Ra=O,d.bb=T,d.oa=g,d.pa=b}function K(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Yi-8>>>0,++d.bb,d.u-=8;X(d)&&(d.h=1,d.u=0)}function te(d,g){if(e(0<=g),!d.h&&g<=Ji){var b=G(d)&$i[g];return d.u+=g,K(d),b}return d.h=1,d.u=0}function ae(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(d){return d.Ra>>>(d.u&Yi-1)>>>0}function X(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Yi}function Q(d,g){d.u=g,d.h=X(d)}function ee(d){d.u>=Uo&&(e(d.u>=Uo),K(d))}function oe(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function de(d){return j(d,1)}function pe(d,g){var b=d.Ca;0>d.b&&oe(d);var T=d.b,U=b*g>>>8,O=(d.I>>>T>U)+0;for(O?(b-=U,d.I-=U+1<<T>>>0):b=U+1,T=b,U=0;256<=T;)U+=8,T>>=8;return T=7^U+xn[T],d.b-=T,d.Ca=(b<<T)-1,O}function Ne(d,g,b){d[g+0]=b>>24&255,d[g+1]=b>>16&255,d[g+2]=b>>8&255,d[g+3]=b>>0&255}function Ce(d,g){return d[g+0]<<0|d[g+1]<<8}function Ee(d,g){return Ce(d,g)|d[g+2]<<16}function Ie(d,g){return Ce(d,g)|Ce(d,g+2)<<16}function He(d,g){var b=1<<g;return e(d!=null),e(0<g),d.X=o(b),d.X==null?0:(d.Mb=32-g,d.Xa=g,1)}function xe(d,g){e(d!=null),e(g!=null),e(d.Xa==g.Xa),r(g.X,0,d.X,0,1<<g.Xa)}function ie(){this.X=[],this.Xa=this.Mb=0}function Ke(d,g,b,T){e(b!=null),e(T!=null);var U=b[0],O=T[0];return U==0&&(U=(d*O+g/2)/g),O==0&&(O=(g*U+d/2)/d),0>=U||0>=O?0:(b[0]=U,T[0]=O,1)}function Oe(d,g){return d+(1<<g)-1>>>g}function ke(d,g){return((4278255360&d)+(4278255360&g)>>>0&4278255360)+((16711935&d)+(16711935&g)>>>0&16711935)>>>0}function Pe(d,g){L[g]=function(b,T,U,O,V,$,Y){var Z;for(Z=0;Z<V;++Z){var le=L[d]($[Y+Z-1],U,O+Z);$[Y+Z]=ke(b[T+Z],le)}}}function Fe(){this.ud=this.hd=this.jd=0}function Me(d,g){return((4278124286&(d^g))>>>1)+(d&g)>>>0}function Ve(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Ze(d,g){return Ve(d+(d-g+.5>>1))}function ot(d,g,b){return Math.abs(g-b)-Math.abs(d-b)}function at(d,g,b,T,U,O,V){for(T=O[V-1],b=0;b<U;++b)O[V+b]=T=ke(d[g+b],T)}function dt(d,g,b,T,U){var O;for(O=0;O<b;++O){var V=d[g+O],$=V>>8&255,Y=16711935&(Y=(Y=16711935&V)+(($<<16)+$));T[U+O]=(4278255360&V)+Y>>>0}}function wt(d,g){g.jd=d>>0&255,g.hd=d>>8&255,g.ud=d>>16&255}function Ye(d,g,b,T,U,O){var V;for(V=0;V<T;++V){var $=g[b+V],Y=$>>>8,Z=$,le=255&(le=(le=$>>>16)+((d.jd<<24>>24)*(Y<<24>>24)>>>5));Z=255&(Z=(Z=Z+((d.hd<<24>>24)*(Y<<24>>24)>>>5))+((d.ud<<24>>24)*(le<<24>>24)>>>5)),U[O+V]=(4278255360&$)+(le<<16)+Z}}function lt(d,g,b,T,U){L[g]=function(O,V,$,Y,Z,le,ge,me,fe){for(Y=ge;Y<me;++Y)for(ge=0;ge<fe;++ge)Z[le++]=U($[T(O[V++])])},L[d]=function(O,V,$,Y,Z,le,ge){var me=8>>O.b,fe=O.Ea,_e=O.K[0],ye=O.w;if(8>me)for(O=(1<<O.b)-1,ye=(1<<me)-1;V<$;++V){var ce,ue=0;for(ce=0;ce<fe;++ce)ce&O||(ue=T(Y[Z++])),le[ge++]=U(_e[ue&ye]),ue>>=me}else L["VP8LMapColor"+b](Y,Z,_e,ye,le,ge,V,$,fe)}}function je(d,g,b,T,U){for(b=g+b;g<b;){var O=d[g++];T[U++]=O>>16&255,T[U++]=O>>8&255,T[U++]=O>>0&255}}function nn(d,g,b,T,U){for(b=g+b;g<b;){var O=d[g++];T[U++]=O>>16&255,T[U++]=O>>8&255,T[U++]=O>>0&255,T[U++]=O>>24&255}}function ht(d,g,b,T,U){for(b=g+b;g<b;){var O=(V=d[g++])>>16&240|V>>12&15,V=V>>0&240|V>>28&15;T[U++]=O,T[U++]=V}}function qn(d,g,b,T,U){for(b=g+b;g<b;){var O=(V=d[g++])>>16&248|V>>13&7,V=V>>5&224|V>>3&31;T[U++]=O,T[U++]=V}}function St(d,g,b,T,U){for(b=g+b;g<b;){var O=d[g++];T[U++]=O>>0&255,T[U++]=O>>8&255,T[U++]=O>>16&255}}function It(d,g,b,T,U,O){if(O==0)for(b=g+b;g<b;)Ne(T,((O=d[g++])[0]>>24|O[1]>>8&65280|O[2]<<8&16711680|O[3]<<24)>>>0),U+=32;else r(T,U,d,g,b)}function or(d,g){L[g][0]=L[d+"0"],L[g][1]=L[d+"1"],L[g][2]=L[d+"2"],L[g][3]=L[d+"3"],L[g][4]=L[d+"4"],L[g][5]=L[d+"5"],L[g][6]=L[d+"6"],L[g][7]=L[d+"7"],L[g][8]=L[d+"8"],L[g][9]=L[d+"9"],L[g][10]=L[d+"10"],L[g][11]=L[d+"11"],L[g][12]=L[d+"12"],L[g][13]=L[d+"13"],L[g][14]=L[d+"0"],L[g][15]=L[d+"0"]}function mt(d){return d==il||d==ol||d==Bs||d==sl}function ai(){this.eb=[],this.size=this.A=this.fb=0}function Pt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function On(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ai,this.f.kb=new Pt,this.sd=null}function xr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function et(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function vt(d,g){var b=d.T,T=g.ba.f.RGBA,U=T.eb,O=T.fb+d.ka*T.A,V=Fn[g.ba.S],$=d.y,Y=d.O,Z=d.f,le=d.N,ge=d.ea,me=d.W,fe=g.cc,_e=g.dc,ye=g.Mc,ce=g.Nc,ue=d.ka,we=d.ka+d.T,Ae=d.U,Se=Ae+1>>1;for(ue==0?V($,Y,null,null,Z,le,ge,me,Z,le,ge,me,U,O,null,null,Ae):(V(g.ec,g.fc,$,Y,fe,_e,ye,ce,Z,le,ge,me,U,O-T.A,U,O,Ae),++b);ue+2<we;ue+=2)fe=Z,_e=le,ye=ge,ce=me,le+=d.Rc,me+=d.Rc,O+=2*T.A,V($,(Y+=2*d.fa)-d.fa,$,Y,fe,_e,ye,ce,Z,le,ge,me,U,O-T.A,U,O,Ae);return Y+=d.fa,d.j+we<d.o?(r(g.ec,g.fc,$,Y,Ae),r(g.cc,g.dc,Z,le,Se),r(g.Mc,g.Nc,ge,me,Se),b--):1&we||V($,Y,null,null,Z,le,ge,me,Z,le,ge,me,U,O+T.A,null,null,Ae),b}function li(d,g,b){var T=d.F,U=[d.J];if(T!=null){var O=d.U,V=g.ba.S,$=V==Us||V==Bs;g=g.ba.f.RGBA;var Y=[0],Z=d.ka;Y[0]=d.T,d.Kb&&(Z==0?--Y[0]:(--Z,U[0]-=d.width),d.j+d.ka+d.T==d.o&&(Y[0]=d.o-d.j-Z));var le=g.eb;Z=g.fb+Z*g.A,d=Tt(T,U[0],d.width,O,Y,le,Z+($?0:3),g.A),e(b==Y),d&&mt(V)&&Mn(le,Z,$,O,Y,g.A)}return 0}function Zt(d){var g=d.ma,b=g.ba.S,T=11>b,U=b==Fs||b==js||b==Us||b==rl||b==12||mt(b);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Fo(g.Oa,d,U?11:12))return 0;if(U&&mt(b)&&Te(),d.da)alert("todo:use_scaling");else{if(T){if(g.Ib=et,d.Kb){if(b=d.U+1>>1,g.memory=o(d.U+2*b),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+d.U,g.Mc=g.cc,g.Nc=g.dc+b,g.Ib=vt,Te()}}else alert("todo:EmitYUV");U&&(g.Jb=li,T&&he())}if(T&&!Cc){for(d=0;256>d;++d)Ch[d]=89858*(d-128)+Os>>qs,Ih[d]=-22014*(d-128)+Os,kh[d]=-45773*(d-128),Th[d]=113618*(d-128)+Os>>qs;for(d=zo;d<cl;++d)g=76283*(d-16)+Os>>qs,Eh[d-zo]=An(g,255),Ph[d-zo]=An(g+8>>4,15);Cc=1}return 1}function sr(d){var g=d.ma,b=d.U,T=d.T;return e(!(1&d.ka)),0>=b||0>=T?0:(b=g.Ib(d,g),g.Jb!=null&&g.Jb(d,g,b),g.Dc+=b,1)}function ar(d){d.ma.memory=null}function $e(d,g,b,T){return te(d,8)!=47?0:(g[0]=te(d,14)+1,b[0]=te(d,14)+1,T[0]=te(d,1),te(d,3)!=0?0:!d.h)}function Hn(d,g){if(4>d)return d+1;var b=d-2>>1;return(2+(1&d)<<b)+te(g,b)+1}function lr(d,g){return 120<g?g-120:1<=(b=((b=fh[g-1])>>4)*d+(8-(15&b)))?b:1;var b}function vn(d,g,b){var T=G(b),U=d[g+=255&T].g-8;return 0<U&&(Q(b,b.u+8),T=G(b),g+=d[g].value,g+=T&(1<<U)-1),Q(b,b.u+d[g].g),d[g].value}function Wt(d,g,b){return b.g+=d.g,b.value+=d.value<<g>>>0,e(8>=b.g),d.g}function Ht(d,g,b){var T=d.xc;return e((g=T==0?0:d.vc[d.md*(b>>T)+(g>>T)])<d.Wb),d.Ya[g]}function _n(d,g,b,T){var U=d.ab,O=d.c*g,V=d.C;g=V+g;var $=b,Y=T;for(T=d.Ta,b=d.Ua;0<U--;){var Z=d.gc[U],le=V,ge=g,me=$,fe=Y,_e=(Y=T,$=b,Z.Ea);switch(e(le<ge),e(ge<=Z.nc),Z.hc){case 2:Is(me,fe,(ge-le)*_e,Y,$);break;case 0:var ye=le,ce=ge,ue=Y,we=$,Ae=(Re=Z).Ea;ye==0&&(tl(me,fe,null,null,1,ue,we),at(me,fe+1,0,0,Ae-1,ue,we+1),fe+=Ae,we+=Ae,++ye);for(var Se=1<<Re.b,Be=Se-1,Le=Oe(Ae,Re.b),ze=Re.K,Re=Re.w+(ye>>Re.b)*Le;ye<ce;){var gt=ze,yt=Re,ft=1;for(Bo(me,fe,ue,we-Ae,1,ue,we);ft<Ae;){var ct=(ft&~Be)+Se;ct>Ae&&(ct=Ae),(0,Ur[gt[yt++]>>8&15])(me,fe+ +ft,ue,we+ft-Ae,ct-ft,ue,we+ft),ft=ct}fe+=Ae,we+=Ae,++ye&Be||(Re+=Le)}ge!=Z.nc&&r(Y,$-_e,Y,$+(ge-le-1)*_e,_e);break;case 1:for(_e=me,ce=fe,Ae=(me=Z.Ea)-(we=me&~(ue=(fe=1<<Z.b)-1)),ye=Oe(me,Z.b),Se=Z.K,Z=Z.w+(le>>Z.b)*ye;le<ge;){for(Be=Se,Le=Z,ze=new Fe,Re=ce+we,gt=ce+me;ce<Re;)wt(Be[Le++],ze),pi(ze,_e,ce,fe,Y,$),ce+=fe,$+=fe;ce<gt&&(wt(Be[Le++],ze),pi(ze,_e,ce,Ae,Y,$),ce+=Ae,$+=Ae),++le&ue||(Z+=ye)}break;case 3:if(me==Y&&fe==$&&0<Z.b){for(ce=Y,me=_e=$+(ge-le)*_e-(we=(ge-le)*Oe(Z.Ea,Z.b)),fe=Y,ue=$,ye=[],we=(Ae=we)-1;0<=we;--we)ye[we]=fe[ue+we];for(we=Ae-1;0<=we;--we)ce[me+we]=ye[we];Pn(Z,le,ge,Y,_e,Y,$)}else Pn(Z,le,ge,me,fe,Y,$)}$=T,Y=b}Y!=b&&r(T,b,$,Y,O)}function Ei(d,g){var b=d.V,T=d.Ba+d.c*d.C,U=g-d.C;if(e(g<=d.l.o),e(16>=U),0<U){var O=d.l,V=d.Ta,$=d.Ua,Y=O.width;if(_n(d,U,b,T),U=$=[$],e((b=d.C)<(T=g)),e(O.v<O.va),T>O.o&&(T=O.o),b<O.j){var Z=O.j-b;b=O.j,U[0]+=Z*Y}if(b>=T?b=0:(U[0]+=4*O.v,O.ka=b-O.j,O.U=O.va-O.v,O.T=T-b,b=1),b){if($=$[0],11>(b=d.ca).S){var le=b.f.RGBA,ge=(T=b.S,U=O.U,O=O.T,Z=le.eb,le.A),me=O;for(le=le.fb+d.Ma*le.A;0<me--;){var fe=V,_e=$,ye=U,ce=Z,ue=le;switch(T){case Ds:bn(fe,_e,ye,ce,ue);break;case Fs:fn(fe,_e,ye,ce,ue);break;case il:fn(fe,_e,ye,ce,ue),Mn(ce,ue,0,ye,1,0);break;case vc:_r(fe,_e,ye,ce,ue);break;case js:It(fe,_e,ye,ce,ue,1);break;case ol:It(fe,_e,ye,ce,ue,1),Mn(ce,ue,0,ye,1,0);break;case Us:It(fe,_e,ye,ce,ue,0);break;case Bs:It(fe,_e,ye,ce,ue,0),Mn(ce,ue,1,ye,1,0);break;case rl:Br(fe,_e,ye,ce,ue);break;case sl:Br(fe,_e,ye,ce,ue),Ct(ce,ue,ye,1,0);break;case yc:Sr(fe,_e,ye,ce,ue);break;default:e(0)}$+=Y,le+=ge}d.Ma+=O}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=b.height)}}d.C=g,e(d.C<=d.i)}function br(d){var g;if(0<d.ua)return 0;for(g=0;g<d.Wb;++g){var b=d.Ya[g].G,T=d.Ya[g].H;if(0<b[1][T[1]+0].g||0<b[2][T[2]+0].g||0<b[3][T[3]+0].g)return 0}return 1}function Vn(d,g,b,T,U,O){if(d.Z!=0){var V=d.qd,$=d.rd;for(e(Vr[d.Z]!=null);g<b;++g)Vr[d.Z](V,$,T,U,T,U,O),V=T,$=U,U+=O;d.qd=V,d.rd=$}}function Gn(d,g){var b=d.l.ma,T=b.Z==0||b.Z==1?d.l.j:d.C;if(T=d.C<T?T:d.C,e(g<=d.l.o),g>T){var U=d.l.width,O=b.ca,V=b.tb+U*T,$=d.V,Y=d.Ba+d.c*T,Z=d.gc;e(d.ab==1),e(Z[0].hc==3),Es(Z[0],T,g,$,Y,O,V),Vn(b,T,g,O,V,U)}d.C=d.Ma=g}function zn(d,g,b,T,U,O,V){var $=d.$/T,Y=d.$%T,Z=d.m,le=d.s,ge=b+d.$,me=ge;U=b+T*U;var fe=b+T*O,_e=280+le.ua,ye=d.Pb?$:16777216,ce=0<le.ua?le.Wa:null,ue=le.wc,we=ge<fe?Ht(le,Y,$):null;e(d.C<O),e(fe<=U);var Ae=!1;e:for(;;){for(;Ae||ge<fe;){var Se=0;if($>=ye){var Be=ge-b;e((ye=d).Pb),ye.wd=ye.m,ye.xd=Be,0<ye.s.ua&&xe(ye.s.Wa,ye.s.vb),ye=$+ph}if(Y&ue||(we=Ht(le,Y,$)),e(we!=null),we.Qb&&(g[ge]=we.qb,Ae=!0),!Ae)if(ee(Z),we.jc){Se=Z,Be=g;var Le=ge,ze=we.pd[G(Se)&en-1];e(we.jc),256>ze.g?(Q(Se,Se.u+ze.g),Be[Le]=ze.value,Se=0):(Q(Se,Se.u+ze.g-256),e(256<=ze.value),Se=ze.value),Se==0&&(Ae=!0)}else Se=vn(we.G[0],we.H[0],Z);if(Z.h)break;if(Ae||256>Se){if(!Ae)if(we.nd)g[ge]=(we.qb|Se<<8)>>>0;else{if(ee(Z),Ae=vn(we.G[1],we.H[1],Z),ee(Z),Be=vn(we.G[2],we.H[2],Z),Le=vn(we.G[3],we.H[3],Z),Z.h)break;g[ge]=(Le<<24|Ae<<16|Se<<8|Be)>>>0}if(Ae=!1,++ge,++Y>=T&&(Y=0,++$,V!=null&&$<=O&&!($%16)&&V(d,$),ce!=null))for(;me<ge;)Se=g[me++],ce.X[(506832829*Se&4294967295)>>>ce.Mb]=Se}else if(280>Se){if(Se=Hn(Se-256,Z),Be=vn(we.G[4],we.H[4],Z),ee(Z),Be=lr(T,Be=Hn(Be,Z)),Z.h)break;if(ge-b<Be||U-ge<Se)break e;for(Le=0;Le<Se;++Le)g[ge+Le]=g[ge+Le-Be];for(ge+=Se,Y+=Se;Y>=T;)Y-=T,++$,V!=null&&$<=O&&!($%16)&&V(d,$);if(e(ge<=U),Y&ue&&(we=Ht(le,Y,$)),ce!=null)for(;me<ge;)Se=g[me++],ce.X[(506832829*Se&4294967295)>>>ce.Mb]=Se}else{if(!(Se<_e))break e;for(Ae=Se-280,e(ce!=null);me<ge;)Se=g[me++],ce.X[(506832829*Se&4294967295)>>>ce.Mb]=Se;Se=ge,e(!(Ae>>>(Be=ce).Xa)),g[Se]=Be.X[Ae],Ae=!0}Ae||e(Z.h==X(Z))}if(d.Pb&&Z.h&&ge<U)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&xe(d.s.vb,d.s.Wa);else{if(Z.h)break e;V!=null&&V(d,$>O?O:$),d.a=0,d.$=ge-b}return 1}return d.a=3,0}function cr(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var g=d.Wa;g!=null&&(g.X=null),d.vb=null,e(d!=null)}function En(){var d=new el;return d==null?null:(d.a=0,d.xb=wc,or("Predictor","VP8LPredictors"),or("Predictor","VP8LPredictors_C"),or("PredictorAdd","VP8LPredictorsAdd"),or("PredictorAdd","VP8LPredictorsAdd_C"),Is=dt,pi=Ye,bn=je,fn=nn,Br=ht,Sr=qn,_r=St,L.VP8LMapColor32b=Ki,L.VP8LMapColor8b=Ps,d)}function ur(d,g,b,T,U){var O=1,V=[d],$=[g],Y=T.m,Z=T.s,le=null,ge=0;e:for(;;){if(b)for(;O&&te(Y,1);){var me=V,fe=$,_e=T,ye=1,ce=_e.m,ue=_e.gc[_e.ab],we=te(ce,2);if(_e.Oc&1<<we)O=0;else{switch(_e.Oc|=1<<we,ue.hc=we,ue.Ea=me[0],ue.nc=fe[0],ue.K=[null],++_e.ab,e(4>=_e.ab),we){case 0:case 1:ue.b=te(ce,3)+2,ye=ur(Oe(ue.Ea,ue.b),Oe(ue.nc,ue.b),0,_e,ue.K),ue.K=ue.K[0];break;case 3:var Ae,Se=te(ce,8)+1,Be=16<Se?0:4<Se?1:2<Se?2:3;if(me[0]=Oe(ue.Ea,Be),ue.b=Be,Ae=ye=ur(Se,1,0,_e,ue.K)){var Le,ze=Se,Re=ue,gt=1<<(8>>Re.b),yt=o(gt);if(yt==null)Ae=0;else{var ft=Re.K[0],ct=Re.w;for(yt[0]=Re.K[0][0],Le=1;Le<1*ze;++Le)yt[Le]=ke(ft[ct+Le],yt[Le-1]);for(;Le<4*gt;++Le)yt[Le]=0;Re.K[0]=null,Re.K[0]=yt,Ae=1}}ye=Ae;break;case 2:break;default:e(0)}O=ye}}if(V=V[0],$=$[0],O&&te(Y,1)&&!(O=1<=(ge=te(Y,4))&&11>=ge)){T.a=3;break e}var _t;if(_t=O)t:{var Nt,it,Gt,wn=T,zt=V,Nn=$,xt=ge,Tn=b,kn=wn.m,Kt=wn.s,tn=[null],pn=1,jn=0,pr=hh[xt];n:for(;;){if(Tn&&te(kn,1)){var Xt=te(kn,3)+2,kr=Oe(zt,Xt),xi=Oe(Nn,Xt),to=kr*xi;if(!ur(kr,xi,0,wn,tn))break n;for(tn=tn[0],Kt.xc=Xt,Nt=0;Nt<to;++Nt){var Gr=tn[Nt]>>8&65535;tn[Nt]=Gr,Gr>=pn&&(pn=Gr+1)}}if(kn.h)break n;for(it=0;5>it;++it){var Mt=xc[it];!it&&0<xt&&(Mt+=1<<xt),jn<Mt&&(jn=Mt)}var ul=s(pn*pr,k),Ic=pn,Ec=s(Ic,J);if(Ec==null)var Vs=null;else e(65536>=Ic),Vs=Ec;var Wo=o(jn);if(Vs==null||Wo==null||ul==null){wn.a=1;break n}var Gs=ul;for(Nt=Gt=0;Nt<pn;++Nt){var Kn=Vs[Nt],no=Kn.G,ro=Kn.H,Pc=0,zs=1,Lc=0;for(it=0;5>it;++it){Mt=xc[it],no[it]=Gs,ro[it]=Gt,!it&&0<xt&&(Mt+=1<<xt);i:{var Ws,dl=Mt,$s=wn,$o=Wo,Mh=Gs,Dh=Gt,fl=0,zr=$s.m,Fh=te(zr,1);if(i($o,0,0,dl),Fh){var jh=te(zr,1)+1,Uh=te(zr,1),Rc=te(zr,Uh==0?1:8);$o[Rc]=1,jh==2&&($o[Rc=te(zr,8)]=1);var Js=1}else{var Mc=o(19),Dc=te(zr,4)+4;if(19<Dc){$s.a=3;var Ys=0;break i}for(Ws=0;Ws<Dc;++Ws)Mc[dh[Ws]]=te(zr,3);var hl=void 0,Jo=void 0,Fc=$s,Bh=Mc,Ks=dl,jc=$o,pl=0,Wr=Fc.m,Uc=8,Bc=s(128,k);r:for(;I(Bc,0,7,Bh,19);){if(te(Wr,1)){var qh=2+2*te(Wr,3);if((hl=2+te(Wr,qh))>Ks)break r}else hl=Ks;for(Jo=0;Jo<Ks&&hl--;){ee(Wr);var qc=Bc[0+(127&G(Wr))];Q(Wr,Wr.u+qc.g);var io=qc.value;if(16>io)jc[Jo++]=io,io!=0&&(Uc=io);else{var Oh=io==16,Oc=io-16,Hh=ch[Oc],Hc=te(Wr,lh[Oc])+Hh;if(Jo+Hc>Ks)break r;for(var Vh=Oh?Uc:0;0<Hc--;)jc[Jo++]=Vh}}pl=1;break r}pl||(Fc.a=3),Js=pl}(Js=Js&&!zr.h)&&(fl=I(Mh,Dh,8,$o,dl)),Js&&fl!=0?Ys=fl:($s.a=3,Ys=0)}if(Ys==0)break n;if(zs&&uh[it]==1&&(zs=Gs[Gt].g==0),Pc+=Gs[Gt].g,Gt+=Ys,3>=it){var Yo,gl=Wo[0];for(Yo=1;Yo<Mt;++Yo)Wo[Yo]>gl&&(gl=Wo[Yo]);Lc+=gl}}if(Kn.nd=zs,Kn.Qb=0,zs&&(Kn.qb=(no[3][ro[3]+0].value<<24|no[1][ro[1]+0].value<<16|no[2][ro[2]+0].value)>>>0,Pc==0&&256>no[0][ro[0]+0].value&&(Kn.Qb=1,Kn.qb+=no[0][ro[0]+0].value<<8)),Kn.jc=!Kn.Qb&&6>Lc,Kn.jc){var Xs,Ir=Kn;for(Xs=0;Xs<en;++Xs){var $r=Xs,Jr=Ir.pd[$r],Qs=Ir.G[0][Ir.H[0]+$r];256<=Qs.value?(Jr.g=Qs.g+256,Jr.value=Qs.value):(Jr.g=0,Jr.value=0,$r>>=Wt(Qs,8,Jr),$r>>=Wt(Ir.G[1][Ir.H[1]+$r],16,Jr),$r>>=Wt(Ir.G[2][Ir.H[2]+$r],0,Jr),Wt(Ir.G[3][Ir.H[3]+$r],24,Jr))}}}Kt.vc=tn,Kt.Wb=pn,Kt.Ya=Vs,Kt.yc=ul,_t=1;break t}_t=0}if(!(O=_t)){T.a=3;break e}if(0<ge){if(Z.ua=1<<ge,!He(Z.Wa,ge)){T.a=1,O=0;break e}}else Z.ua=0;var ml=T,Vc=V,Gh=$,vl=ml.s,yl=vl.xc;if(ml.c=Vc,ml.i=Gh,vl.md=Oe(Vc,yl),vl.wc=yl==0?-1:(1<<yl)-1,b){T.xb=wh;break e}if((le=o(V*$))==null){T.a=1,O=0;break e}O=(O=zn(T,le,0,V,$,$,null))&&!Y.h;break e}return O?(U!=null?U[0]=le:(e(le==null),e(b)),T.$=0,b||cr(Z)):cr(Z),O}function ci(d,g){var b=d.c*d.i,T=b+g+16*g;return e(d.c<=g),d.V=o(T),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+b+g,1)}function Pi(d,g){var b=d.C,T=g-b,U=d.V,O=d.Ba+d.c*b;for(e(g<=d.l.o);0<T;){var V=16<T?16:T,$=d.l.ma,Y=d.l.width,Z=Y*V,le=$.ca,ge=$.tb+Y*b,me=d.Ta,fe=d.Ua;_n(d,V,U,O),Ut(me,fe,le,ge,Z),Vn($,b,b+V,le,ge,Y),T-=V,U+=V*d.c,b+=V}e(b==g),d.C=d.Ma=g}function Li(){this.ub=this.yd=this.td=this.Rb=0}function Ri(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Mi(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function cs(){this.Yb=(function(){var d=[];return(function g(b,T,U){for(var O=U[T],V=0;V<O&&(b.push(U.length>T+1?[]:0),!(U.length<T+1));V++)g(b[V],T+1,U)})(d,0,[3,11]),d})()}function Pa(){this.jb=o(3),this.Wc=a([4,8],cs),this.Xc=a([4,17],cs)}function La(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Di(){this.ld=this.La=this.dd=this.tc=0}function us(){this.Na=this.la=0}function Ra(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bo(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ma(){this.uc=this.M=this.Nb=0,this.wa=Array(new Di),this.Y=0,this.ya=Array(new bo),this.aa=0,this.l=new Fi}function ds(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Da(){this.cb=this.a=0,this.sc="",this.m=new ae,this.Od=new Li,this.Kc=new Ri,this.ed=new La,this.Qa=new Mi,this.Ic=this.$c=this.Aa=0,this.D=new Ma,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,ae),this.ia=0,this.pb=s(4,Ra),this.Pa=new Pa,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ds),this.Hd=0,this.rb=Array(new us),this.sb=0,this.wa=Array(new Di),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bo),this.L=this.aa=0,this.gd=a([4,2],Di),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Fi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fa(){var d=new Da;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Go||(Go=ps)),d}function Ft(d,g,b){return d.a==0&&(d.a=g,d.sc=b,d.cb=0),0}function fs(d,g,b){return 3<=b&&d[g+0]==157&&d[g+1]==1&&d[g+2]==42}function hs(d,g){if(d==null)return 0;if(d.a=0,d.sc="OK",g==null)return Ft(d,2,"null VP8Io passed to VP8GetHeaders()");var b=g.data,T=g.w,U=g.ha;if(4>U)return Ft(d,7,"Truncated header.");var O=b[T+0]|b[T+1]<<8|b[T+2]<<16,V=d.Od;if(V.Rb=!(1&O),V.td=O>>1&7,V.yd=O>>4&1,V.ub=O>>5,3<V.td)return Ft(d,3,"Incorrect keyframe parameters.");if(!V.yd)return Ft(d,4,"Frame not displayable.");T+=3,U-=3;var $=d.Kc;if(V.Rb){if(7>U)return Ft(d,7,"cannot parse picture header");if(!fs(b,T,U))return Ft(d,3,"Bad code word");$.c=16383&(b[T+4]<<8|b[T+3]),$.Td=b[T+4]>>6,$.i=16383&(b[T+6]<<8|b[T+5]),$.Ud=b[T+6]>>6,T+=7,U-=7,d.za=$.c+15>>4,d.Ub=$.i+15>>4,g.width=$.c,g.height=$.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i((O=d.Pa).jb,0,255,O.jb.length),e((O=d.Qa)!=null),O.Cb=0,O.Bb=0,O.Fb=1,i(O.Zb,0,0,O.Zb.length),i(O.Lb,0,0,O.Lb)}if(V.ub>U)return Ft(d,7,"bad partition length");re(O=d.m,b,T,V.ub),T+=V.ub,U-=V.ub,V.Rb&&($.Ld=de(O),$.Kd=de(O)),$=d.Qa;var Y,Z=d.Pa;if(e(O!=null),e($!=null),$.Cb=de(O),$.Cb){if($.Bb=de(O),de(O)){for($.Fb=de(O),Y=0;4>Y;++Y)$.Zb[Y]=de(O)?R(O,7):0;for(Y=0;4>Y;++Y)$.Lb[Y]=de(O)?R(O,6):0}if($.Bb)for(Y=0;3>Y;++Y)Z.jb[Y]=de(O)?j(O,8):255}else $.Bb=0;if(O.Ka)return Ft(d,3,"cannot parse segment header");if(($=d.ed).zd=de(O),$.Tb=j(O,6),$.wb=j(O,3),$.Pc=de(O),$.Pc&&de(O)){for(Z=0;4>Z;++Z)de(O)&&($.vd[Z]=R(O,6));for(Z=0;4>Z;++Z)de(O)&&($.od[Z]=R(O,6))}if(d.L=$.Tb==0?0:$.zd?1:2,O.Ka)return Ft(d,3,"cannot parse filter header");var le=U;if(U=Y=T,T=Y+le,$=le,d.Xb=(1<<j(d.m,2))-1,le<3*(Z=d.Xb))b=7;else{for(Y+=3*Z,$-=3*Z,le=0;le<Z;++le){var ge=b[U+0]|b[U+1]<<8|b[U+2]<<16;ge>$&&(ge=$),re(d.Jc[+le],b,Y,ge),Y+=ge,$-=ge,U+=3}re(d.Jc[+Z],b,Y,$),b=Y<T?0:5}if(b!=0)return Ft(d,b,"cannot parse partitions");for(b=j(Y=d.m,7),U=de(Y)?R(Y,4):0,T=de(Y)?R(Y,4):0,$=de(Y)?R(Y,4):0,Z=de(Y)?R(Y,4):0,Y=de(Y)?R(Y,4):0,le=d.Qa,ge=0;4>ge;++ge){if(le.Cb){var me=le.Zb[ge];le.Fb||(me+=b)}else{if(0<ge){d.pb[ge]=d.pb[0];continue}me=b}var fe=d.pb[ge];fe.Sc[0]=al[An(me+U,127)],fe.Sc[1]=ll[An(me+0,127)],fe.Eb[0]=2*al[An(me+T,127)],fe.Eb[1]=101581*ll[An(me+$,127)]>>16,8>fe.Eb[1]&&(fe.Eb[1]=8),fe.Qc[0]=al[An(me+Z,117)],fe.Qc[1]=ll[An(me+Y,127)],fe.lc=me+Y}if(!V.Rb)return Ft(d,4,"Not a key frame.");for(de(O),V=d.Pa,b=0;4>b;++b){for(U=0;8>U;++U)for(T=0;3>T;++T)for($=0;11>$;++$)Z=pe(O,xh[b][U][T][$])?j(O,8):vh[b][U][T][$],V.Wc[b][U].Yb[T][$]=Z;for(U=0;17>U;++U)V.Xc[b][U]=V.Wc[b][bh[U]]}return d.kc=de(O),d.kc&&(d.Bd=j(O,8)),d.cb=1}function ps(d,g,b,T,U,O,V){var $=g[U].Yb[b];for(b=0;16>U;++U){if(!pe(d,$[b+0]))return U;for(;!pe(d,$[b+1]);)if($=g[++U].Yb[0],b=0,U==16)return 16;var Y=g[U+1].Yb;if(pe(d,$[b+2])){var Z=d,le=0;if(pe(Z,(me=$)[(ge=b)+3]))if(pe(Z,me[ge+6])){for($=0,ge=2*(le=pe(Z,me[ge+8]))+(me=pe(Z,me[ge+9+le])),le=0,me=gh[ge];me[$];++$)le+=le+pe(Z,me[$]);le+=3+(8<<ge)}else pe(Z,me[ge+7])?(le=7+2*pe(Z,165),le+=pe(Z,145)):le=5+pe(Z,159);else le=pe(Z,me[ge+4])?3+pe(Z,me[ge+5]):2;$=Y[2]}else le=1,$=Y[1];Y=V+mh[U],0>(Z=d).b&&oe(Z);var ge,me=Z.b,fe=(ge=Z.Ca>>1)-(Z.I>>me)>>31;--Z.b,Z.Ca+=fe,Z.Ca|=1,Z.I-=(ge+1&fe)<<me,O[Y]=((le^fe)-fe)*T[(0<U)+0]}return 16}function wo(d){var g=d.rb[d.sb-1];g.la=0,g.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function ja(d,g){if(d==null)return 0;if(g==null)return Ft(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!hs(d,g))return 0;if(e(d.cb),g.ac==null||g.ac(g)){g.ob&&(d.L=0);var b=Hs[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=g.v-b>>4,d.zb=g.j-b>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=g.o+15+b>>4,d.Hb=g.va+15+b>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var T=d.ed;for(b=0;4>b;++b){var U;if(d.Qa.Cb){var O=d.Qa.Lb[b];d.Qa.Fb||(O+=T.Tb)}else O=T.Tb;for(U=0;1>=U;++U){var V=d.gd[b][U],$=O;if(T.Pc&&($+=T.vd[0],U&&($+=T.od[0])),0<($=0>$?0:63<$?63:$)){var Y=$;0<T.wb&&(Y=4<T.wb?Y>>2:Y>>1)>9-T.wb&&(Y=9-T.wb),1>Y&&(Y=1),V.dd=Y,V.tc=2*$+Y,V.ld=40<=$?2:15<=$?1:0}else V.tc=0;V.La=U}}}b=0}else Ft(d,6,"Frame setup failed"),b=d.a;if(b=b==0){if(b){d.$c=0,0<d.Aa||(d.Ic=Rh);e:{b=d.Ic,T=4*(Y=d.za);var Z=32*Y,le=Y+1,ge=0<d.L?Y*(0<d.Aa?2:1):0,me=(d.Aa==2?2:1)*Y;if((V=T+832+(U=3*(16*b+Hs[d.L])/2*Z)+(O=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=V)b=0;else{if(V>d.Vb){if(d.Vb=0,d.Ec=o(V),d.Fc=0,d.Ec==null){b=Ft(d,1,"no memory during frame initialization.");break e}d.Vb=V}V=d.Ec,$=d.Fc,d.Ac=V,d.Bc=$,$+=T,d.Gd=s(Z,ds),d.Hd=0,d.rb=s(le+1,us),d.sb=1,d.wa=ge?s(ge,Di):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=Y),e(!0),d.oc=V,d.pc=$,$+=832,d.ya=s(me,bo),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=Y),d.R=16*Y,d.B=8*Y,Y=(Z=Hs[d.L])*d.R,Z=Z/2*d.B,d.sa=V,d.ta=$+Y,d.qa=d.sa,d.ra=d.ta+16*b*d.R+Z,d.Ha=d.qa,d.Ia=d.ra+8*b*d.B+Z,d.$c=0,$+=U,d.mb=O?V:null,d.nb=O?$:null,e($+O<=d.Fc+d.Vb),wo(d),i(d.Ac,d.Bc,0,T),b=1}}if(b){if(g.ka=0,g.y=d.sa,g.O=d.ta,g.f=d.qa,g.N=d.ra,g.ea=d.Ha,g.Vd=d.Ia,g.fa=d.R,g.Rc=d.B,g.F=null,g.J=0,!Rs){for(b=-255;255>=b;++b)$t[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)Cr[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)Vo[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)eo[255+b]=0>b?0:255<b?255:b;Rs=1}Xi=qa,Ar=Ua,qo=ms,hn=Ba,Ln=vs,jt=gs,Qi=To,Ls=fi,Oo=Za,gi=ko,mi=Qa,qr=Hi,vi=Io,Zi=Cs,yi=As,Or=fr,Ho=Nr,Rn=Xa,Yn[0]=dr,Yn[1]=Oa,Yn[2]=za,Yn[3]=Wa,Yn[4]=bs,Yn[5]=qi,Yn[6]=ws,Yn[7]=_o,Yn[8]=Ja,Yn[9]=$a,Hr[0]=ys,Hr[1]=Va,Hr[2]=wr,Hr[3]=Ui,Hr[4]=rn,Hr[5]=Ga,Hr[6]=xs,Tr[0]=Dr,Tr[1]=Ha,Tr[2]=Ya,Tr[3]=Ao,Tr[4]=di,Tr[5]=Ka,Tr[6]=Co,b=1}else b=0}b&&(b=(function(fe,_e){for(fe.M=0;fe.M<fe.Va;++fe.M){var ye,ce=fe.Jc[fe.M&fe.Xb],ue=fe.m,we=fe;for(ye=0;ye<we.za;++ye){var Ae=ue,Se=we,Be=Se.Ac,Le=Se.Bc+4*ye,ze=Se.zc,Re=Se.ya[Se.aa+ye];if(Se.Qa.Bb?Re.$b=pe(Ae,Se.Pa.jb[0])?2+pe(Ae,Se.Pa.jb[2]):pe(Ae,Se.Pa.jb[1]):Re.$b=0,Se.kc&&(Re.Ad=pe(Ae,Se.Bd)),Re.Za=!pe(Ae,145)+0,Re.Za){var gt=Re.Ob,yt=0;for(Se=0;4>Se;++Se){var ft,ct=ze[0+Se];for(ft=0;4>ft;++ft){ct=yh[Be[Le+ft]][ct];for(var _t=bc[pe(Ae,ct[0])];0<_t;)_t=bc[2*_t+pe(Ae,ct[_t])];ct=-_t,Be[Le+ft]=ct}r(gt,yt,Be,Le,4),yt+=4,ze[0+Se]=ct}}else ct=pe(Ae,156)?pe(Ae,128)?1:3:pe(Ae,163)?2:0,Re.Ob[0]=ct,i(Be,Le,ct,4),i(ze,0,ct,4);Re.Dd=pe(Ae,142)?pe(Ae,114)?pe(Ae,183)?1:3:2:0}if(we.m.Ka)return Ft(fe,7,"Premature end-of-partition0 encountered.");for(;fe.ja<fe.za;++fe.ja){if(we=ce,Ae=(ue=fe).rb[ue.sb-1],Be=ue.rb[ue.sb+ue.ja],ye=ue.ya[ue.aa+ue.ja],Le=ue.kc?ye.Ad:0)Ae.la=Be.la=0,ye.Za||(Ae.Na=Be.Na=0),ye.Hc=0,ye.Gc=0,ye.ia=0;else{var Nt,it;if(Ae=Be,Be=we,Le=ue.Pa.Xc,ze=ue.ya[ue.aa+ue.ja],Re=ue.pb[ze.$b],Se=ze.ad,gt=0,yt=ue.rb[ue.sb-1],ct=ft=0,i(Se,gt,0,384),ze.Za)var Gt=0,wn=Le[3];else{_t=o(16);var zt=Ae.Na+yt.Na;if(zt=Go(Be,Le[1],zt,Re.Eb,0,_t,0),Ae.Na=yt.Na=(0<zt)+0,1<zt)Xi(_t,0,Se,gt);else{var Nn=_t[0]+3>>3;for(_t=0;256>_t;_t+=16)Se[gt+_t]=Nn}Gt=1,wn=Le[0]}var xt=15&Ae.la,Tn=15&yt.la;for(_t=0;4>_t;++_t){var kn=1&Tn;for(Nn=it=0;4>Nn;++Nn)xt=xt>>1|(kn=(zt=Go(Be,wn,zt=kn+(1&xt),Re.Sc,Gt,Se,gt))>Gt)<<7,it=it<<2|(3<zt?3:1<zt?2:Se[gt+0]!=0),gt+=16;xt>>=4,Tn=Tn>>1|kn<<7,ft=(ft<<8|it)>>>0}for(wn=xt,Gt=Tn>>4,Nt=0;4>Nt;Nt+=2){for(it=0,xt=Ae.la>>4+Nt,Tn=yt.la>>4+Nt,_t=0;2>_t;++_t){for(kn=1&Tn,Nn=0;2>Nn;++Nn)zt=kn+(1&xt),xt=xt>>1|(kn=0<(zt=Go(Be,Le[2],zt,Re.Qc,0,Se,gt)))<<3,it=it<<2|(3<zt?3:1<zt?2:Se[gt+0]!=0),gt+=16;xt>>=2,Tn=Tn>>1|kn<<5}ct|=it<<4*Nt,wn|=xt<<4<<Nt,Gt|=(240&Tn)<<Nt}Ae.la=wn,yt.la=Gt,ze.Hc=ft,ze.Gc=ct,ze.ia=43690&ct?0:Re.ia,Le=!(ft|ct)}if(0<ue.L&&(ue.wa[ue.Y+ue.ja]=ue.gd[ye.$b][ye.Za],ue.wa[ue.Y+ue.ja].La|=!Le),we.Ka)return Ft(fe,7,"Premature end-of-file encountered.")}if(wo(fe),ue=_e,we=1,ye=(ce=fe).D,Ae=0<ce.L&&ce.M>=ce.zb&&ce.M<=ce.Va,ce.Aa==0)e:{if(ye.M=ce.M,ye.uc=Ae,Do(ce,ye),we=1,ye=(it=ce.D).Nb,Ae=(ct=Hs[ce.L])*ce.R,Be=ct/2*ce.B,_t=16*ye*ce.R,Nn=8*ye*ce.B,Le=ce.sa,ze=ce.ta-Ae+_t,Re=ce.qa,Se=ce.ra-Be+Nn,gt=ce.Ha,yt=ce.Ia-Be+Nn,Tn=(xt=it.M)==0,ft=xt>=ce.Va-1,ce.Aa==2&&Do(ce,it),it.uc)for(kn=(zt=ce).D.M,e(zt.D.uc),it=zt.yb;it<zt.Hb;++it){Gt=it,wn=kn;var Kt=(tn=(Mt=zt).D).Nb;Nt=Mt.R;var tn=tn.wa[tn.Y+Gt],pn=Mt.sa,jn=Mt.ta+16*Kt*Nt+16*Gt,pr=tn.dd,Xt=tn.tc;if(Xt!=0)if(e(3<=Xt),Mt.L==1)0<Gt&&Or(pn,jn,Nt,Xt+4),tn.La&&Rn(pn,jn,Nt,Xt),0<wn&&yi(pn,jn,Nt,Xt+4),tn.La&&Ho(pn,jn,Nt,Xt);else{var kr=Mt.B,xi=Mt.qa,to=Mt.ra+8*Kt*kr+8*Gt,Gr=Mt.Ha,Mt=Mt.Ia+8*Kt*kr+8*Gt;Kt=tn.ld,0<Gt&&(Ls(pn,jn,Nt,Xt+4,pr,Kt),gi(xi,to,Gr,Mt,kr,Xt+4,pr,Kt)),tn.La&&(qr(pn,jn,Nt,Xt,pr,Kt),Zi(xi,to,Gr,Mt,kr,Xt,pr,Kt)),0<wn&&(Qi(pn,jn,Nt,Xt+4,pr,Kt),Oo(xi,to,Gr,Mt,kr,Xt+4,pr,Kt)),tn.La&&(mi(pn,jn,Nt,Xt,pr,Kt),vi(xi,to,Gr,Mt,kr,Xt,pr,Kt))}}if(ce.ia&&alert("todo:DitherRow"),ue.put!=null){if(it=16*xt,xt=16*(xt+1),Tn?(ue.y=ce.sa,ue.O=ce.ta+_t,ue.f=ce.qa,ue.N=ce.ra+Nn,ue.ea=ce.Ha,ue.W=ce.Ia+Nn):(it-=ct,ue.y=Le,ue.O=ze,ue.f=Re,ue.N=Se,ue.ea=gt,ue.W=yt),ft||(xt-=ct),xt>ue.o&&(xt=ue.o),ue.F=null,ue.J=null,ce.Fa!=null&&0<ce.Fa.length&&it<xt&&(ue.J=Ro(ce,ue,it,xt-it),ue.F=ce.mb,ue.F==null&&ue.F.length==0)){we=Ft(ce,3,"Could not decode alpha data.");break e}it<ue.j&&(ct=ue.j-it,it=ue.j,e(!(1&ct)),ue.O+=ce.R*ct,ue.N+=ce.B*(ct>>1),ue.W+=ce.B*(ct>>1),ue.F!=null&&(ue.J+=ue.width*ct)),it<xt&&(ue.O+=ue.v,ue.N+=ue.v>>1,ue.W+=ue.v>>1,ue.F!=null&&(ue.J+=ue.v),ue.ka=it-ue.j,ue.U=ue.va-ue.v,ue.T=xt-it,we=ue.put(ue))}ye+1!=ce.Ic||ft||(r(ce.sa,ce.ta-Ae,Le,ze+16*ce.R,Ae),r(ce.qa,ce.ra-Be,Re,Se+8*ce.B,Be),r(ce.Ha,ce.Ia-Be,gt,yt+8*ce.B,Be))}if(!we)return Ft(fe,6,"Output aborted.")}return 1})(d,g)),g.bc!=null&&g.bc(g),b&=1}return b?(d.cb=0,b):0}function Wn(d,g,b,T,U){U=d[g+b+32*T]+(U>>3),d[g+b+32*T]=-256&U?0>U?0:255:U}function ji(d,g,b,T,U,O){Wn(d,g,0,b,T+U),Wn(d,g,1,b,T+O),Wn(d,g,2,b,T-O),Wn(d,g,3,b,T-U)}function yn(d){return(20091*d>>16)+d}function No(d,g,b,T){var U,O=0,V=o(16);for(U=0;4>U;++U){var $=d[g+0]+d[g+8],Y=d[g+0]-d[g+8],Z=(35468*d[g+4]>>16)-yn(d[g+12]),le=yn(d[g+4])+(35468*d[g+12]>>16);V[O+0]=$+le,V[O+1]=Y+Z,V[O+2]=Y-Z,V[O+3]=$-le,O+=4,g++}for(U=O=0;4>U;++U)$=(d=V[O+0]+4)+V[O+8],Y=d-V[O+8],Z=(35468*V[O+4]>>16)-yn(V[O+12]),Wn(b,T,0,0,$+(le=yn(V[O+4])+(35468*V[O+12]>>16))),Wn(b,T,1,0,Y+Z),Wn(b,T,2,0,Y-Z),Wn(b,T,3,0,$-le),O++,T+=32}function gs(d,g,b,T){var U=d[g+0]+4,O=35468*d[g+4]>>16,V=yn(d[g+4]),$=35468*d[g+1]>>16;ji(b,T,0,U+V,d=yn(d[g+1]),$),ji(b,T,1,U+O,d,$),ji(b,T,2,U-O,d,$),ji(b,T,3,U-V,d,$)}function Ua(d,g,b,T,U){No(d,g,b,T),U&&No(d,g+16,b,T+4)}function ms(d,g,b,T){Ar(d,g+0,b,T,1),Ar(d,g+32,b,T+128,1)}function Ba(d,g,b,T){var U;for(d=d[g+0]+4,U=0;4>U;++U)for(g=0;4>g;++g)Wn(b,T,g,U,d)}function vs(d,g,b,T){d[g+0]&&hn(d,g+0,b,T),d[g+16]&&hn(d,g+16,b,T+4),d[g+32]&&hn(d,g+32,b,T+128),d[g+48]&&hn(d,g+48,b,T+128+4)}function qa(d,g,b,T){var U,O=o(16);for(U=0;4>U;++U){var V=d[g+0+U]+d[g+12+U],$=d[g+4+U]+d[g+8+U],Y=d[g+4+U]-d[g+8+U],Z=d[g+0+U]-d[g+12+U];O[0+U]=V+$,O[8+U]=V-$,O[4+U]=Z+Y,O[12+U]=Z-Y}for(U=0;4>U;++U)V=(d=O[0+4*U]+3)+O[3+4*U],$=O[1+4*U]+O[2+4*U],Y=O[1+4*U]-O[2+4*U],Z=d-O[3+4*U],b[T+0]=V+$>>3,b[T+16]=Z+Y>>3,b[T+32]=V-$>>3,b[T+48]=Z-Y>>3,T+=64}function So(d,g,b){var T,U=g-32,O=Cn,V=255-d[U-1];for(T=0;T<b;++T){var $,Y=O,Z=V+d[g-1];for($=0;$<b;++$)d[g+$]=Y[Z+d[U+$]];g+=32}}function Oa(d,g){So(d,g,4)}function Ha(d,g){So(d,g,8)}function Va(d,g){So(d,g,16)}function wr(d,g){var b;for(b=0;16>b;++b)r(d,g+32*b,d,g-32,16)}function Ui(d,g){var b;for(b=16;0<b;--b)i(d,g,d[g-1],16),g+=32}function Bi(d,g,b){var T;for(T=0;16>T;++T)i(g,b+32*T,d,16)}function ys(d,g){var b,T=16;for(b=0;16>b;++b)T+=d[g-1+32*b]+d[g+b-32];Bi(T>>5,d,g)}function rn(d,g){var b,T=8;for(b=0;16>b;++b)T+=d[g-1+32*b];Bi(T>>4,d,g)}function Ga(d,g){var b,T=8;for(b=0;16>b;++b)T+=d[g+b-32];Bi(T>>4,d,g)}function xs(d,g){Bi(128,d,g)}function Xe(d,g,b){return d+2*g+b+2>>2}function za(d,g){var b,T=g-32;for(T=new Uint8Array([Xe(d[T-1],d[T+0],d[T+1]),Xe(d[T+0],d[T+1],d[T+2]),Xe(d[T+1],d[T+2],d[T+3]),Xe(d[T+2],d[T+3],d[T+4])]),b=0;4>b;++b)r(d,g+32*b,T,0,T.length)}function Wa(d,g){var b=d[g-1],T=d[g-1+32],U=d[g-1+64],O=d[g-1+96];Ne(d,g+0,16843009*Xe(d[g-1-32],b,T)),Ne(d,g+32,16843009*Xe(b,T,U)),Ne(d,g+64,16843009*Xe(T,U,O)),Ne(d,g+96,16843009*Xe(U,O,O))}function dr(d,g){var b,T=4;for(b=0;4>b;++b)T+=d[g+b-32]+d[g-1+32*b];for(T>>=3,b=0;4>b;++b)i(d,g+32*b,T,4)}function bs(d,g){var b=d[g-1+0],T=d[g-1+32],U=d[g-1+64],O=d[g-1-32],V=d[g+0-32],$=d[g+1-32],Y=d[g+2-32],Z=d[g+3-32];d[g+0+96]=Xe(T,U,d[g-1+96]),d[g+1+96]=d[g+0+64]=Xe(b,T,U),d[g+2+96]=d[g+1+64]=d[g+0+32]=Xe(O,b,T),d[g+3+96]=d[g+2+64]=d[g+1+32]=d[g+0+0]=Xe(V,O,b),d[g+3+64]=d[g+2+32]=d[g+1+0]=Xe($,V,O),d[g+3+32]=d[g+2+0]=Xe(Y,$,V),d[g+3+0]=Xe(Z,Y,$)}function ws(d,g){var b=d[g+1-32],T=d[g+2-32],U=d[g+3-32],O=d[g+4-32],V=d[g+5-32],$=d[g+6-32],Y=d[g+7-32];d[g+0+0]=Xe(d[g+0-32],b,T),d[g+1+0]=d[g+0+32]=Xe(b,T,U),d[g+2+0]=d[g+1+32]=d[g+0+64]=Xe(T,U,O),d[g+3+0]=d[g+2+32]=d[g+1+64]=d[g+0+96]=Xe(U,O,V),d[g+3+32]=d[g+2+64]=d[g+1+96]=Xe(O,V,$),d[g+3+64]=d[g+2+96]=Xe(V,$,Y),d[g+3+96]=Xe($,Y,Y)}function qi(d,g){var b=d[g-1+0],T=d[g-1+32],U=d[g-1+64],O=d[g-1-32],V=d[g+0-32],$=d[g+1-32],Y=d[g+2-32],Z=d[g+3-32];d[g+0+0]=d[g+1+64]=O+V+1>>1,d[g+1+0]=d[g+2+64]=V+$+1>>1,d[g+2+0]=d[g+3+64]=$+Y+1>>1,d[g+3+0]=Y+Z+1>>1,d[g+0+96]=Xe(U,T,b),d[g+0+64]=Xe(T,b,O),d[g+0+32]=d[g+1+96]=Xe(b,O,V),d[g+1+32]=d[g+2+96]=Xe(O,V,$),d[g+2+32]=d[g+3+96]=Xe(V,$,Y),d[g+3+32]=Xe($,Y,Z)}function _o(d,g){var b=d[g+0-32],T=d[g+1-32],U=d[g+2-32],O=d[g+3-32],V=d[g+4-32],$=d[g+5-32],Y=d[g+6-32],Z=d[g+7-32];d[g+0+0]=b+T+1>>1,d[g+1+0]=d[g+0+64]=T+U+1>>1,d[g+2+0]=d[g+1+64]=U+O+1>>1,d[g+3+0]=d[g+2+64]=O+V+1>>1,d[g+0+32]=Xe(b,T,U),d[g+1+32]=d[g+0+96]=Xe(T,U,O),d[g+2+32]=d[g+1+96]=Xe(U,O,V),d[g+3+32]=d[g+2+96]=Xe(O,V,$),d[g+3+64]=Xe(V,$,Y),d[g+3+96]=Xe($,Y,Z)}function $a(d,g){var b=d[g-1+0],T=d[g-1+32],U=d[g-1+64],O=d[g-1+96];d[g+0+0]=b+T+1>>1,d[g+2+0]=d[g+0+32]=T+U+1>>1,d[g+2+32]=d[g+0+64]=U+O+1>>1,d[g+1+0]=Xe(b,T,U),d[g+3+0]=d[g+1+32]=Xe(T,U,O),d[g+3+32]=d[g+1+64]=Xe(U,O,O),d[g+3+64]=d[g+2+64]=d[g+0+96]=d[g+1+96]=d[g+2+96]=d[g+3+96]=O}function Ja(d,g){var b=d[g-1+0],T=d[g-1+32],U=d[g-1+64],O=d[g-1+96],V=d[g-1-32],$=d[g+0-32],Y=d[g+1-32],Z=d[g+2-32];d[g+0+0]=d[g+2+32]=b+V+1>>1,d[g+0+32]=d[g+2+64]=T+b+1>>1,d[g+0+64]=d[g+2+96]=U+T+1>>1,d[g+0+96]=O+U+1>>1,d[g+3+0]=Xe($,Y,Z),d[g+2+0]=Xe(V,$,Y),d[g+1+0]=d[g+3+32]=Xe(b,V,$),d[g+1+32]=d[g+3+64]=Xe(T,b,V),d[g+1+64]=d[g+3+96]=Xe(U,T,b),d[g+1+96]=Xe(O,U,T)}function Ya(d,g){var b;for(b=0;8>b;++b)r(d,g+32*b,d,g-32,8)}function Ao(d,g){var b;for(b=0;8>b;++b)i(d,g,d[g-1],8),g+=32}function ui(d,g,b){var T;for(T=0;8>T;++T)i(g,b+32*T,d,8)}function Dr(d,g){var b,T=8;for(b=0;8>b;++b)T+=d[g+b-32]+d[g-1+32*b];ui(T>>4,d,g)}function Ka(d,g){var b,T=4;for(b=0;8>b;++b)T+=d[g+b-32];ui(T>>3,d,g)}function di(d,g){var b,T=4;for(b=0;8>b;++b)T+=d[g-1+32*b];ui(T>>3,d,g)}function Co(d,g){ui(128,d,g)}function Oi(d,g,b){var T=d[g-b],U=d[g+0],O=3*(U-T)+nl[1020+d[g-2*b]-d[g+b]],V=Ms[112+(O+4>>3)];d[g-b]=Cn[255+T+Ms[112+(O+3>>3)]],d[g+0]=Cn[255+U-V]}function Ns(d,g,b,T){var U=d[g+0],O=d[g+b];return Dn[255+d[g-2*b]-d[g-b]]>T||Dn[255+O-U]>T}function Ss(d,g,b,T){return 4*Dn[255+d[g-b]-d[g+0]]+Dn[255+d[g-2*b]-d[g+b]]<=T}function _s(d,g,b,T,U){var O=d[g-3*b],V=d[g-2*b],$=d[g-b],Y=d[g+0],Z=d[g+b],le=d[g+2*b],ge=d[g+3*b];return 4*Dn[255+$-Y]+Dn[255+V-Z]>T?0:Dn[255+d[g-4*b]-O]<=U&&Dn[255+O-V]<=U&&Dn[255+V-$]<=U&&Dn[255+ge-le]<=U&&Dn[255+le-Z]<=U&&Dn[255+Z-Y]<=U}function As(d,g,b,T){var U=2*T+1;for(T=0;16>T;++T)Ss(d,g+T,b,U)&&Oi(d,g+T,b)}function fr(d,g,b,T){var U=2*T+1;for(T=0;16>T;++T)Ss(d,g+T*b,1,U)&&Oi(d,g+T*b,1)}function Nr(d,g,b,T){var U;for(U=3;0<U;--U)As(d,g+=4*b,b,T)}function Xa(d,g,b,T){var U;for(U=3;0<U;--U)fr(d,g+=4,b,T)}function Fr(d,g,b,T,U,O,V,$){for(O=2*O+1;0<U--;){if(_s(d,g,b,O,V))if(Ns(d,g,b,$))Oi(d,g,b);else{var Y=d,Z=g,le=b,ge=Y[Z-2*le],me=Y[Z-le],fe=Y[Z+0],_e=Y[Z+le],ye=Y[Z+2*le],ce=27*(we=nl[1020+3*(fe-me)+nl[1020+ge-_e]])+63>>7,ue=18*we+63>>7,we=9*we+63>>7;Y[Z-3*le]=Cn[255+Y[Z-3*le]+we],Y[Z-2*le]=Cn[255+ge+ue],Y[Z-le]=Cn[255+me+ce],Y[Z+0]=Cn[255+fe-ce],Y[Z+le]=Cn[255+_e-ue],Y[Z+2*le]=Cn[255+ye-we]}g+=T}}function $n(d,g,b,T,U,O,V,$){for(O=2*O+1;0<U--;){if(_s(d,g,b,O,V))if(Ns(d,g,b,$))Oi(d,g,b);else{var Y=d,Z=g,le=b,ge=Y[Z-le],me=Y[Z+0],fe=Y[Z+le],_e=Ms[112+((ye=3*(me-ge))+4>>3)],ye=Ms[112+(ye+3>>3)],ce=_e+1>>1;Y[Z-2*le]=Cn[255+Y[Z-2*le]+ce],Y[Z-le]=Cn[255+ge+ye],Y[Z+0]=Cn[255+me-_e],Y[Z+le]=Cn[255+fe-ce]}g+=T}}function To(d,g,b,T,U,O){Fr(d,g,b,1,16,T,U,O)}function fi(d,g,b,T,U,O){Fr(d,g,1,b,16,T,U,O)}function Qa(d,g,b,T,U,O){var V;for(V=3;0<V;--V)$n(d,g+=4*b,b,1,16,T,U,O)}function Hi(d,g,b,T,U,O){var V;for(V=3;0<V;--V)$n(d,g+=4,1,b,16,T,U,O)}function Za(d,g,b,T,U,O,V,$){Fr(d,g,U,1,8,O,V,$),Fr(b,T,U,1,8,O,V,$)}function ko(d,g,b,T,U,O,V,$){Fr(d,g,1,U,8,O,V,$),Fr(b,T,1,U,8,O,V,$)}function Io(d,g,b,T,U,O,V,$){$n(d,g+4*U,U,1,8,O,V,$),$n(b,T+4*U,U,1,8,O,V,$)}function Cs(d,g,b,T,U,O,V,$){$n(d,g+4,1,U,8,O,V,$),$n(b,T+4,1,U,8,O,V,$)}function Vi(){this.ba=new On,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Eo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Po(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ts(){this.ua=0,this.Wa=new ie,this.vb=new ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new J,this.yc=new k}function el(){this.xb=this.a=0,this.l=new Fi,this.ca=new On,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ts,this.ab=0,this.gc=s(4,Po),this.Oc=0}function Gi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Fi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function hi(d,g,b,T,U,O,V){for(d=d==null?0:d[g+0],g=0;g<V;++g)U[O+g]=d+b[T+g]&255,d=U[O+g]}function Lo(d,g,b,T,U,O,V){var $;if(d==null)hi(null,null,b,T,U,O,V);else for($=0;$<V;++$)U[O+$]=d[g+$]+b[T+$]&255}function jr(d,g,b,T,U,O,V){if(d==null)hi(null,null,b,T,U,O,V);else{var $,Y=d[g+0],Z=Y,le=Y;for($=0;$<V;++$)Z=le+(Y=d[g+$])-Z,le=b[T+$]+(-256&Z?0>Z?0:255:Z)&255,Z=Y,U[O+$]=le}}function Ro(d,g,b,T){var U=g.width,O=g.o;if(e(d!=null&&g!=null),0>b||0>=T||b+T>O)return null;if(!d.Cc){if(d.ga==null){var V;if(d.ga=new Gi,(V=d.ga==null)||(V=g.width*g.o,e(d.Gb.length==0),d.Gb=o(V),d.Uc=0,d.Gb==null?V=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,V=1),V=!V),!V){V=d.ga;var $=d.Fa,Y=d.P,Z=d.qc,le=d.mb,ge=d.nb,me=Y+1,fe=Z-1,_e=V.l;if(e($!=null&&le!=null&&g!=null),Vr[0]=null,Vr[1]=hi,Vr[2]=Lo,Vr[3]=jr,V.ca=le,V.tb=ge,V.c=g.width,V.i=g.height,e(0<V.c&&0<V.i),1>=Z)g=0;else if(V.$a=$[Y+0]>>0&3,V.Z=$[Y+0]>>2&3,V.Lc=$[Y+0]>>4&3,Y=$[Y+0]>>6&3,0>V.$a||1<V.$a||4<=V.Z||1<V.Lc||Y)g=0;else if(_e.put=sr,_e.ac=Zt,_e.bc=ar,_e.ma=V,_e.width=g.width,_e.height=g.height,_e.Da=g.Da,_e.v=g.v,_e.va=g.va,_e.j=g.j,_e.o=g.o,V.$a)e:{e(V.$a==1),g=En();t:for(;;){if(g==null){g=0;break e}if(e(V!=null),V.mc=g,g.c=V.c,g.i=V.i,g.l=V.l,g.l.ma=V,g.l.width=V.c,g.l.height=V.i,g.a=0,W(g.m,$,me,fe),!ur(V.c,V.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&br(g.s)?(V.ic=1,$=g.c*g.i,g.Ta=null,g.Ua=0,g.V=o($),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(V.ic=0,g=ci(g,V.c)),!g))break t;g=1;break e}V.mc=null,g=0}else g=fe>=V.c*V.i;V=!g}if(V)return null;d.ga.Lc!=1?d.Ga=0:T=O-b}e(d.ga!=null),e(b+T<=O);e:{if(g=($=d.ga).c,O=$.l.o,$.$a==0){if(me=d.rc,fe=d.Vc,_e=d.Fa,Y=d.P+1+b*g,Z=d.mb,le=d.nb+b*g,e(Y<=d.P+d.qc),$.Z!=0)for(e(Vr[$.Z]!=null),V=0;V<T;++V)Vr[$.Z](me,fe,_e,Y,Z,le,g),me=Z,fe=le,le+=g,Y+=g;else for(V=0;V<T;++V)r(Z,le,_e,Y,g),me=Z,fe=le,le+=g,Y+=g;d.rc=me,d.Vc=fe}else{if(e($.mc!=null),g=b+T,e((V=$.mc)!=null),e(g<=V.i),V.C>=g)g=1;else if($.ic||he(),$.ic){$=V.V,me=V.Ba,fe=V.c;var ye=V.i,ce=(_e=1,Y=V.$/fe,Z=V.$%fe,le=V.m,ge=V.s,V.$),ue=fe*ye,we=fe*g,Ae=ge.wc,Se=ce<we?Ht(ge,Z,Y):null;e(ce<=ue),e(g<=ye),e(br(ge));t:for(;;){for(;!le.h&&ce<we;){if(Z&Ae||(Se=Ht(ge,Z,Y)),e(Se!=null),ee(le),256>(ye=vn(Se.G[0],Se.H[0],le)))$[me+ce]=ye,++ce,++Z>=fe&&(Z=0,++Y<=g&&!(Y%16)&&Gn(V,Y));else{if(!(280>ye)){_e=0;break t}ye=Hn(ye-256,le);var Be,Le=vn(Se.G[4],Se.H[4],le);if(ee(le),!(ce>=(Le=lr(fe,Le=Hn(Le,le)))&&ue-ce>=ye)){_e=0;break t}for(Be=0;Be<ye;++Be)$[me+ce+Be]=$[me+ce+Be-Le];for(ce+=ye,Z+=ye;Z>=fe;)Z-=fe,++Y<=g&&!(Y%16)&&Gn(V,Y);ce<we&&Z&Ae&&(Se=Ht(ge,Z,Y))}e(le.h==X(le))}Gn(V,Y>g?g:Y);break t}!_e||le.h&&ce<ue?(_e=0,V.a=le.h?5:3):V.$=ce,g=_e}else g=zn(V,V.V,V.Ba,V.c,V.i,g,Pi);if(!g){T=0;break e}}b+T>=O&&(d.Cc=1),T=1}if(!T)return null;if(d.Cc&&((T=d.ga)!=null&&(T.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+b*U}function x(d,g,b,T,U,O){for(;0<U--;){var V,$=d,Y=g+(b?1:0),Z=d,le=g+(b?0:3);for(V=0;V<T;++V){var ge=Z[le+4*V];ge!=255&&(ge*=32897,$[Y+4*V+0]=$[Y+4*V+0]*ge>>23,$[Y+4*V+1]=$[Y+4*V+1]*ge>>23,$[Y+4*V+2]=$[Y+4*V+2]*ge>>23)}g+=O}}function q(d,g,b,T,U){for(;0<T--;){var O;for(O=0;O<b;++O){var V=d[g+2*O+0],$=15&(Z=d[g+2*O+1]),Y=4369*$,Z=(240&Z|Z>>4)*Y>>16;d[g+2*O+0]=(240&V|V>>4)*Y>>16&240|(15&V|V<<4)*Y>>16>>4&15,d[g+2*O+1]=240&Z|$}g+=U}}function ne(d,g,b,T,U,O,V,$){var Y,Z,le=255;for(Z=0;Z<U;++Z){for(Y=0;Y<T;++Y){var ge=d[g+Y];O[V+4*Y]=ge,le&=ge}g+=b,V+=$}return le!=255}function se(d,g,b,T,U){var O;for(O=0;O<U;++O)b[T+O]=d[g+O]>>8}function he(){Mn=x,Ct=q,Tt=ne,Ut=se}function be(d,g,b){L[d]=function(T,U,O,V,$,Y,Z,le,ge,me,fe,_e,ye,ce,ue,we,Ae){var Se,Be=Ae-1>>1,Le=$[Y+0]|Z[le+0]<<16,ze=ge[me+0]|fe[_e+0]<<16;e(T!=null);var Re=3*Le+ze+131074>>2;for(g(T[U+0],255&Re,Re>>16,ye,ce),O!=null&&(Re=3*ze+Le+131074>>2,g(O[V+0],255&Re,Re>>16,ue,we)),Se=1;Se<=Be;++Se){var gt=$[Y+Se]|Z[le+Se]<<16,yt=ge[me+Se]|fe[_e+Se]<<16,ft=Le+gt+ze+yt+524296,ct=ft+2*(gt+ze)>>3;Re=ct+Le>>1,Le=(ft=ft+2*(Le+yt)>>3)+gt>>1,g(T[U+2*Se-1],255&Re,Re>>16,ye,ce+(2*Se-1)*b),g(T[U+2*Se-0],255&Le,Le>>16,ye,ce+(2*Se-0)*b),O!=null&&(Re=ft+ze>>1,Le=ct+yt>>1,g(O[V+2*Se-1],255&Re,Re>>16,ue,we+(2*Se-1)*b),g(O[V+2*Se+0],255&Le,Le>>16,ue,we+(2*Se+0)*b)),Le=gt,ze=yt}1&Ae||(Re=3*Le+ze+131074>>2,g(T[U+Ae-1],255&Re,Re>>16,ye,ce+(Ae-1)*b),O!=null&&(Re=3*ze+Le+131074>>2,g(O[V+Ae-1],255&Re,Re>>16,ue,we+(Ae-1)*b)))}}function Te(){Fn[Ds]=Nh,Fn[Fs]=Nc,Fn[vc]=Sh,Fn[js]=Sc,Fn[Us]=_c,Fn[rl]=Ac,Fn[yc]=_h,Fn[il]=Nc,Fn[ol]=Sc,Fn[Bs]=_c,Fn[sl]=Ac}function Ue(d){return d&-16384?0>d?0:255:d>>Ah}function Ge(d,g){return Ue((19077*d>>8)+(26149*g>>8)-14234)}function rt(d,g,b){return Ue((19077*d>>8)-(6419*g>>8)-(13320*b>>8)+8708)}function tt(d,g){return Ue((19077*d>>8)+(33050*g>>8)-17685)}function ut(d,g,b,T,U){T[U+0]=Ge(d,b),T[U+1]=rt(d,g,b),T[U+2]=tt(d,g)}function Et(d,g,b,T,U){T[U+0]=tt(d,g),T[U+1]=rt(d,g,b),T[U+2]=Ge(d,b)}function Rt(d,g,b,T,U){var O=rt(d,g,b);g=O<<3&224|tt(d,g)>>3,T[U+0]=248&Ge(d,b)|O>>5,T[U+1]=g}function Vt(d,g,b,T,U){var O=240&tt(d,g)|15;T[U+0]=240&Ge(d,b)|rt(d,g,b)>>4,T[U+1]=O}function on(d,g,b,T,U){T[U+0]=255,ut(d,g,b,T,U+1)}function Yt(d,g,b,T,U){Et(d,g,b,T,U),T[U+3]=255}function Jn(d,g,b,T,U){ut(d,g,b,T,U),T[U+3]=255}function An(d,g){return 0>d?0:d>g?g:d}function hr(d,g,b){L[d]=function(T,U,O,V,$,Y,Z,le,ge){for(var me=le+(-2&ge)*b;le!=me;)g(T[U+0],O[V+0],$[Y+0],Z,le),g(T[U+1],O[V+0],$[Y+0],Z,le+b),U+=2,++V,++Y,le+=2*b;1&ge&&g(T[U+0],O[V+0],$[Y+0],Z,le)}}function ks(d,g,b){return b==0?d==0?g==0?6:5:g==0?4:0:b}function Mo(d,g,b,T,U){switch(d>>>30){case 3:Ar(g,b,T,U,0);break;case 2:jt(g,b,T,U);break;case 1:hn(g,b,T,U)}}function Do(d,g){var b,T,U=g.M,O=g.Nb,V=d.oc,$=d.pc+40,Y=d.oc,Z=d.pc+584,le=d.oc,ge=d.pc+600;for(b=0;16>b;++b)V[$+32*b-1]=129;for(b=0;8>b;++b)Y[Z+32*b-1]=129,le[ge+32*b-1]=129;for(0<U?V[$-1-32]=Y[Z-1-32]=le[ge-1-32]=129:(i(V,$-32-1,127,21),i(Y,Z-32-1,127,9),i(le,ge-32-1,127,9)),T=0;T<d.za;++T){var me=g.ya[g.aa+T];if(0<T){for(b=-1;16>b;++b)r(V,$+32*b-4,V,$+32*b+12,4);for(b=-1;8>b;++b)r(Y,Z+32*b-4,Y,Z+32*b+4,4),r(le,ge+32*b-4,le,ge+32*b+4,4)}var fe=d.Gd,_e=d.Hd+T,ye=me.ad,ce=me.Hc;if(0<U&&(r(V,$-32,fe[_e].y,0,16),r(Y,Z-32,fe[_e].f,0,8),r(le,ge-32,fe[_e].ea,0,8)),me.Za){var ue=V,we=$-32+16;for(0<U&&(T>=d.za-1?i(ue,we,fe[_e].y[15],4):r(ue,we,fe[_e+1].y,0,4)),b=0;4>b;b++)ue[we+128+b]=ue[we+256+b]=ue[we+384+b]=ue[we+0+b];for(b=0;16>b;++b,ce<<=2)ue=V,we=$+Tc[b],Yn[me.Ob[b]](ue,we),Mo(ce,ye,16*+b,ue,we)}else if(ue=ks(T,U,me.Ob[0]),Hr[ue](V,$),ce!=0)for(b=0;16>b;++b,ce<<=2)Mo(ce,ye,16*+b,V,$+Tc[b]);for(b=me.Gc,ue=ks(T,U,me.Dd),Tr[ue](Y,Z),Tr[ue](le,ge),ce=ye,ue=Y,we=Z,255&(me=b>>0)&&(170&me?qo(ce,256,ue,we):Ln(ce,256,ue,we)),me=le,ce=ge,255&(b>>=8)&&(170&b?qo(ye,320,me,ce):Ln(ye,320,me,ce)),U<d.Ub-1&&(r(fe[_e].y,0,V,$+480,16),r(fe[_e].f,0,Y,Z+224,8),r(fe[_e].ea,0,le,ge+224,8)),b=8*O*d.B,fe=d.sa,_e=d.ta+16*T+16*O*d.R,ye=d.qa,me=d.ra+8*T+b,ce=d.Ha,ue=d.Ia+8*T+b,b=0;16>b;++b)r(fe,_e+b*d.R,V,$+32*b,16);for(b=0;8>b;++b)r(ye,me+b*d.B,Y,Z+32*b,8),r(ce,ue+b*d.B,le,ge+32*b,8)}}function zi(d,g,b,T,U,O,V,$,Y){var Z=[0],le=[0],ge=0,me=Y!=null?Y.kd:0,fe=Y??new Eo;if(d==null||12>b)return 7;fe.data=d,fe.w=g,fe.ha=b,g=[g],b=[b],fe.gb=[fe.gb];e:{var _e=g,ye=b,ce=fe.gb;if(e(d!=null),e(ye!=null),e(ce!=null),ce[0]=0,12<=ye[0]&&!n(d,_e[0],"RIFF")){if(n(d,_e[0]+8,"WEBP")){ce=3;break e}var ue=Ie(d,_e[0]+4);if(12>ue||4294967286<ue){ce=3;break e}if(me&&ue>ye[0]-8){ce=7;break e}ce[0]=ue,_e[0]+=12,ye[0]-=12}ce=0}if(ce!=0)return ce;for(ue=0<fe.gb[0],b=b[0];;){e:{var we=d;ye=g,ce=b;var Ae=Z,Se=le,Be=_e=[0];if((Re=ge=[ge])[0]=0,8>ce[0])ce=7;else{if(!n(we,ye[0],"VP8X")){if(Ie(we,ye[0]+4)!=10){ce=3;break e}if(18>ce[0]){ce=7;break e}var Le=Ie(we,ye[0]+8),ze=1+Ee(we,ye[0]+12);if(2147483648<=ze*(we=1+Ee(we,ye[0]+15))){ce=3;break e}Be!=null&&(Be[0]=Le),Ae!=null&&(Ae[0]=ze),Se!=null&&(Se[0]=we),ye[0]+=18,ce[0]-=18,Re[0]=1}ce=0}}if(ge=ge[0],_e=_e[0],ce!=0)return ce;if(ye=!!(2&_e),!ue&&ge)return 3;if(O!=null&&(O[0]=!!(16&_e)),V!=null&&(V[0]=ye),$!=null&&($[0]=0),V=Z[0],_e=le[0],ge&&ye&&Y==null){ce=0;break}if(4>b){ce=7;break}if(ue&&ge||!ue&&!ge&&!n(d,g[0],"ALPH")){b=[b],fe.na=[fe.na],fe.P=[fe.P],fe.Sa=[fe.Sa];e:{Le=d,ce=g,ue=b;var Re=fe.gb;Ae=fe.na,Se=fe.P,Be=fe.Sa,ze=22,e(Le!=null),e(ue!=null),we=ce[0];var gt=ue[0];for(e(Ae!=null),e(Be!=null),Ae[0]=null,Se[0]=null,Be[0]=0;;){if(ce[0]=we,ue[0]=gt,8>gt){ce=7;break e}var yt=Ie(Le,we+4);if(4294967286<yt){ce=3;break e}var ft=8+yt+1&-2;if(ze+=ft,0<Re&&ze>Re){ce=3;break e}if(!n(Le,we,"VP8 ")||!n(Le,we,"VP8L")){ce=0;break e}if(gt[0]<ft){ce=7;break e}n(Le,we,"ALPH")||(Ae[0]=Le,Se[0]=we+8,Be[0]=yt),we+=ft,gt-=ft}}if(b=b[0],fe.na=fe.na[0],fe.P=fe.P[0],fe.Sa=fe.Sa[0],ce!=0)break}b=[b],fe.Ja=[fe.Ja],fe.xa=[fe.xa];e:if(Re=d,ce=g,ue=b,Ae=fe.gb[0],Se=fe.Ja,Be=fe.xa,Le=ce[0],we=!n(Re,Le,"VP8 "),ze=!n(Re,Le,"VP8L"),e(Re!=null),e(ue!=null),e(Se!=null),e(Be!=null),8>ue[0])ce=7;else{if(we||ze){if(Re=Ie(Re,Le+4),12<=Ae&&Re>Ae-12){ce=3;break e}if(me&&Re>ue[0]-8){ce=7;break e}Se[0]=Re,ce[0]+=8,ue[0]-=8,Be[0]=ze}else Be[0]=5<=ue[0]&&Re[Le+0]==47&&!(Re[Le+4]>>5),Se[0]=ue[0];ce=0}if(b=b[0],fe.Ja=fe.Ja[0],fe.xa=fe.xa[0],g=g[0],ce!=0)break;if(4294967286<fe.Ja)return 3;if($==null||ye||($[0]=fe.xa?2:1),V=[V],_e=[_e],fe.xa){if(5>b){ce=7;break}$=V,me=_e,ye=O,d==null||5>b?d=0:5<=b&&d[g+0]==47&&!(d[g+4]>>5)?(ue=[0],Re=[0],Ae=[0],W(Se=new P,d,g,b),$e(Se,ue,Re,Ae)?($!=null&&($[0]=ue[0]),me!=null&&(me[0]=Re[0]),ye!=null&&(ye[0]=Ae[0]),d=1):d=0):d=0}else{if(10>b){ce=7;break}$=_e,d==null||10>b||!fs(d,g+3,b-3)?d=0:(me=d[g+0]|d[g+1]<<8|d[g+2]<<16,ye=16383&(d[g+7]<<8|d[g+6]),d=16383&(d[g+9]<<8|d[g+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=fe.Ja||!ye||!d?d=0:(V&&(V[0]=ye),$&&($[0]=d),d=1))}if(!d||(V=V[0],_e=_e[0],ge&&(Z[0]!=V||le[0]!=_e)))return 3;Y!=null&&(Y[0]=fe,Y.offset=g-Y.w,e(4294967286>g-Y.w),e(Y.offset==Y.ha-b));break}return ce==0||ce==7&&ge&&Y==null?(O!=null&&(O[0]|=fe.na!=null&&0<fe.na.length),T!=null&&(T[0]=V),U!=null&&(U[0]=_e),0):ce}function Fo(d,g,b){var T=g.width,U=g.height,O=0,V=0,$=T,Y=U;if(g.Da=d!=null&&0<d.Da,g.Da&&($=d.cd,Y=d.bd,O=d.v,V=d.j,11>b||(O&=-2,V&=-2),0>O||0>V||0>=$||0>=Y||O+$>T||V+Y>U))return 0;if(g.v=O,g.j=V,g.va=O+$,g.o=V+Y,g.U=$,g.T=Y,g.da=d!=null&&0<d.da,g.da){if(!Ke($,Y,b=[d.ib],O=[d.hb]))return 0;g.ib=b[0],g.hb=O[0]}return g.ob=d!=null&&d.ob,g.Kb=d==null||!d.Sd,g.da&&(g.ob=g.ib<3*T/4&&g.hb<3*U/4,g.Kb=0),1}function jo(d){if(d==null)return 2;if(11>d.S){var g=d.f.RGBA;g.fb+=(d.height-1)*g.A,g.A=-g.A}else g=d.f.kb,d=d.height,g.O+=(d-1)*g.fa,g.fa=-g.fa,g.N+=(d-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(d-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(d-1)*g.lb,g.lb=-g.lb);return 0}function Wi(d,g,b,T){if(T==null||0>=d||0>=g)return 2;if(b!=null){if(b.Da){var U=b.cd,O=b.bd,V=-2&b.v,$=-2&b.j;if(0>V||0>$||0>=U||0>=O||V+U>d||$+O>g)return 2;d=U,g=O}if(b.da){if(!Ke(d,g,U=[b.ib],O=[b.hb]))return 2;d=U[0],g=O[0]}}T.width=d,T.height=g;e:{var Y=T.width,Z=T.height;if(d=T.S,0>=Y||0>=Z||!(d>=Ds&&13>d))d=2;else{if(0>=T.Rd&&T.sd==null){V=O=U=g=0;var le=($=Y*kc[d])*Z;if(11>d||(O=(Z+1)/2*(g=(Y+1)/2),d==12&&(V=(U=Y)*Z)),(Z=o(le+2*O+V))==null){d=1;break e}T.sd=Z,11>d?((Y=T.f.RGBA).eb=Z,Y.fb=0,Y.A=$,Y.size=le):((Y=T.f.kb).y=Z,Y.O=0,Y.fa=$,Y.Fd=le,Y.f=Z,Y.N=0+le,Y.Ab=g,Y.Cd=O,Y.ea=Z,Y.W=0+le+O,Y.Db=g,Y.Ed=O,d==12&&(Y.F=Z,Y.J=0+le+2*O),Y.Tc=V,Y.lb=U)}if(g=1,U=T.S,O=T.width,V=T.height,U>=Ds&&13>U)if(11>U)d=T.f.RGBA,g&=($=Math.abs(d.A))*(V-1)+O<=d.size,g&=$>=O*kc[U],g&=d.eb!=null;else{d=T.f.kb,$=(O+1)/2,le=(V+1)/2,Y=Math.abs(d.fa),Z=Math.abs(d.Ab);var ge=Math.abs(d.Db),me=Math.abs(d.lb),fe=me*(V-1)+O;g&=Y*(V-1)+O<=d.Fd,g&=Z*(le-1)+$<=d.Cd,g=(g&=ge*(le-1)+$<=d.Ed)&Y>=O&Z>=$&ge>=$,g&=d.y!=null,g&=d.f!=null,g&=d.ea!=null,U==12&&(g&=me>=O,g&=fe<=d.Tc,g&=d.F!=null)}else g=0;d=g?0:2}}return d!=0||b!=null&&b.fd&&(d=jo(T)),d}var en=64,$i=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ji=24,Yi=32,Uo=8,xn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Pe("Predictor0","PredictorAdd0"),L.Predictor0=function(){return 4278190080},L.Predictor1=function(d){return d},L.Predictor2=function(d,g,b){return g[b+0]},L.Predictor3=function(d,g,b){return g[b+1]},L.Predictor4=function(d,g,b){return g[b-1]},L.Predictor5=function(d,g,b){return Me(Me(d,g[b+1]),g[b+0])},L.Predictor6=function(d,g,b){return Me(d,g[b-1])},L.Predictor7=function(d,g,b){return Me(d,g[b+0])},L.Predictor8=function(d,g,b){return Me(g[b-1],g[b+0])},L.Predictor9=function(d,g,b){return Me(g[b+0],g[b+1])},L.Predictor10=function(d,g,b){return Me(Me(d,g[b-1]),Me(g[b+0],g[b+1]))},L.Predictor11=function(d,g,b){var T=g[b+0];return 0>=ot(T>>24&255,d>>24&255,(g=g[b-1])>>24&255)+ot(T>>16&255,d>>16&255,g>>16&255)+ot(T>>8&255,d>>8&255,g>>8&255)+ot(255&T,255&d,255&g)?T:d},L.Predictor12=function(d,g,b){var T=g[b+0];return(Ve((d>>24&255)+(T>>24&255)-((g=g[b-1])>>24&255))<<24|Ve((d>>16&255)+(T>>16&255)-(g>>16&255))<<16|Ve((d>>8&255)+(T>>8&255)-(g>>8&255))<<8|Ve((255&d)+(255&T)-(255&g)))>>>0},L.Predictor13=function(d,g,b){var T=g[b-1];return(Ze((d=Me(d,g[b+0]))>>24&255,T>>24&255)<<24|Ze(d>>16&255,T>>16&255)<<16|Ze(d>>8&255,T>>8&255)<<8|Ze(d>>0&255,T>>0&255))>>>0};var tl=L.PredictorAdd0;L.PredictorAdd1=at,Pe("Predictor2","PredictorAdd2"),Pe("Predictor3","PredictorAdd3"),Pe("Predictor4","PredictorAdd4"),Pe("Predictor5","PredictorAdd5"),Pe("Predictor6","PredictorAdd6"),Pe("Predictor7","PredictorAdd7"),Pe("Predictor8","PredictorAdd8"),Pe("Predictor9","PredictorAdd9"),Pe("Predictor10","PredictorAdd10"),Pe("Predictor11","PredictorAdd11"),Pe("Predictor12","PredictorAdd12"),Pe("Predictor13","PredictorAdd13");var Bo=L.PredictorAdd2;lt("ColorIndexInverseTransform","MapARGB","32b",(function(d){return d>>8&255}),(function(d){return d})),lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(d){return d}),(function(d){return d>>8&255}));var Is,Pn=L.ColorIndexInverseTransform,Ki=L.MapARGB,Es=L.VP8LColorIndexInverseTransformAlpha,Ps=L.MapAlpha,Ur=L.VP8LPredictorsAdd=[];Ur.length=16,(L.VP8LPredictors=[]).length=16,(L.VP8LPredictorsAdd_C=[]).length=16,(L.VP8LPredictors_C=[]).length=16;var pi,bn,fn,Br,Sr,_r,Xi,Ar,jt,qo,hn,Ln,Qi,Ls,Oo,gi,mi,qr,vi,Zi,yi,Or,Ho,Rn,Mn,Ct,Tt,Ut,$t=o(511),Cr=o(2041),Vo=o(225),eo=o(767),Rs=0,nl=Cr,Ms=Vo,Cn=eo,Dn=$t,Ds=0,Fs=1,vc=2,js=3,Us=4,rl=5,yc=6,il=7,ol=8,Bs=9,sl=10,lh=[2,3,7],ch=[3,3,11],xc=[280,256,256,256,40],uh=[0,1,1,1,0],dh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],fh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],hh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ph=8,al=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ll=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Go=null,gh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],mh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],bc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],vh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],yh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],xh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hr=[],Yn=[],Tr=[],wh=1,wc=2,Vr=[],Fn=[];be("UpsampleRgbLinePair",ut,3),be("UpsampleBgrLinePair",Et,3),be("UpsampleRgbaLinePair",Jn,4),be("UpsampleBgraLinePair",Yt,4),be("UpsampleArgbLinePair",on,4),be("UpsampleRgba4444LinePair",Vt,2),be("UpsampleRgb565LinePair",Rt,2);var Nh=L.UpsampleRgbLinePair,Sh=L.UpsampleBgrLinePair,Nc=L.UpsampleRgbaLinePair,Sc=L.UpsampleBgraLinePair,_c=L.UpsampleArgbLinePair,Ac=L.UpsampleRgba4444LinePair,_h=L.UpsampleRgb565LinePair,qs=16,Os=1<<qs-1,zo=-227,cl=482,Ah=6,Cc=0,Ch=o(256),Th=o(256),kh=o(256),Ih=o(256),Eh=o(cl-zo),Ph=o(cl-zo);hr("YuvToRgbRow",ut,3),hr("YuvToBgrRow",Et,3),hr("YuvToRgbaRow",Jn,4),hr("YuvToBgraRow",Yt,4),hr("YuvToArgbRow",on,4),hr("YuvToRgba4444Row",Vt,2),hr("YuvToRgb565Row",Rt,2);var Tc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Hs=[0,2,8],Lh=[8,7,6,4,4,2,2,2,1,1,1,1],Rh=1;this.WebPDecodeRGBA=function(d,g,b,T,U){var O=Fs,V=new Vi,$=new On;V.ba=$,$.S=O,$.width=[$.width],$.height=[$.height];var Y=$.width,Z=$.height,le=new xr;if(le==null||d==null)var ge=2;else e(le!=null),ge=zi(d,g,b,le.width,le.height,le.Pd,le.Qd,le.format,null);if(ge!=0?Y=0:(Y!=null&&(Y[0]=le.width[0]),Z!=null&&(Z[0]=le.height[0]),Y=1),Y){$.width=$.width[0],$.height=$.height[0],T!=null&&(T[0]=$.width),U!=null&&(U[0]=$.height);e:{if(T=new Fi,(U=new Eo).data=d,U.w=g,U.ha=b,U.kd=1,g=[0],e(U!=null),((d=zi(U.data,U.w,U.ha,null,null,null,g,null,U))==0||d==7)&&g[0]&&(d=4),(g=d)==0){if(e(V!=null),T.data=U.data,T.w=U.w+U.offset,T.ha=U.ha-U.offset,T.put=sr,T.ac=Zt,T.bc=ar,T.ma=V,U.xa){if((d=En())==null){V=1;break e}if((function(me,fe){var _e=[0],ye=[0],ce=[0];t:for(;;){if(me==null)return 0;if(fe==null)return me.a=2,0;if(me.l=fe,me.a=0,W(me.m,fe.data,fe.w,fe.ha),!$e(me.m,_e,ye,ce)){me.a=3;break t}if(me.xb=wc,fe.width=_e[0],fe.height=ye[0],!ur(_e[0],ye[0],1,me,null))break t;return 1}return e(me.a!=0),0})(d,T)){if(T=(g=Wi(T.width,T.height,V.Oa,V.ba))==0){t:{T=d;n:for(;;){if(T==null){T=0;break t}if(e(T.s.yc!=null),e(T.s.Ya!=null),e(0<T.s.Wb),e((b=T.l)!=null),e((U=b.ma)!=null),T.xb!=0){if(T.ca=U.ba,T.tb=U.tb,e(T.ca!=null),!Fo(U.Oa,b,js)){T.a=2;break n}if(!ci(T,b.width)||b.da)break n;if((b.da||mt(T.ca.S))&&he(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&he()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!He(T.s.vb,T.s.Wa.Xa)){T.a=1;break n}T.xb=0}if(!zn(T,T.V,T.Ba,T.c,T.i,b.o,Ei))break n;U.Dc=T.Ma,T=1;break t}e(T.a!=0),T=0}T=!T}T&&(g=d.a)}else g=d.a}else{if((d=new Fa)==null){V=1;break e}if(d.Fa=U.na,d.P=U.P,d.qc=U.Sa,hs(d,T)){if((g=Wi(T.width,T.height,V.Oa,V.ba))==0){if(d.Aa=0,b=V.Oa,e((U=d)!=null),b!=null){if(0<(Y=0>(Y=b.Md)?0:100<Y?255:255*Y/100)){for(Z=le=0;4>Z;++Z)12>(ge=U.pb[Z]).lc&&(ge.ia=Y*Lh[0>ge.lc?0:ge.lc]>>3),le|=ge.ia;le&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=b.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}ja(d,T)||(g=d.a)}}else g=d.a}g==0&&V.Oa!=null&&V.Oa.fd&&(g=jo(V.ba))}V=g}O=V!=0?null:11>O?$.f.RGBA.eb:$.f.kb.y}else O=null;return O};var kc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(L,z){for(var H="",I=0;I<4;I++)H+=String.fromCharCode(L[z++]);return H}function p(L,z){return(L[z+0]<<0|L[z+1]<<8|L[z+2]<<16)>>>0}function m(L,z){return(L[z+0]<<0|L[z+1]<<8|L[z+2]<<16|L[z+3]<<24)>>>0}new l;var y=[0],v=[0],N=[],A=new l,S=t,w=(function(L,z){var H={},I=0,k=!1,B=0,J=0;if(H.frames=[],!(function(G,X,Q,ee){for(var oe=0;oe<ee;oe++)if(G[X+oe]!=Q.charCodeAt(oe))return!0;return!1})(L,z,"RIFF",4)){var re,j;for(m(L,z+=4),z+=8;z<L.length;){var R=c(L,z),W=m(L,z+=4);z+=4;var K=W+(1&W);switch(R){case"VP8 ":case"VP8L":H.frames[I]===void 0&&(H.frames[I]={}),(P=H.frames[I]).src_off=k?J:z-8,P.src_size=B+W+8,I++,k&&(k=!1,B=0,J=0);break;case"VP8X":(P=H.header={}).feature_flags=L[z];var te=z+4;P.canvas_width=1+p(L,te),te+=3,P.canvas_height=1+p(L,te),te+=3;break;case"ALPH":k=!0,B=K+8,J=z-8;break;case"ANIM":(P=H.header).bgcolor=m(L,z),te=z+4,P.loop_count=(re=L)[(j=te)+0]<<0|re[j+1]<<8,te+=2;break;case"ANMF":var ae,P;(P=H.frames[I]={}).offset_x=2*p(L,z),z+=3,P.offset_y=2*p(L,z),z+=3,P.width=1+p(L,z),z+=3,P.height=1+p(L,z),z+=3,P.duration=p(L,z),z+=3,ae=L[z++],P.dispose=1&ae,P.blend=ae>>1&1}R!="ANMF"&&(z+=K)}return H}})(S,0);w.response=S,w.rgbaoutput=!0,w.dataurl=!1;var _=w.header?w.header:null,C=w.frames?w.frames:null;if(_){_.loop_counter=_.loop_count,y=[_.canvas_height],v=[_.canvas_width];for(var F=0;F<C.length&&C[F].blend!=0;F++);}var D=C[0],M=A.WebPDecodeRGBA(S,D.src_off,D.src_size,v,y);D.rgba=M,D.imgwidth=v[0],D.imgheight=y[0];for(var E=0;E<v[0]*y[0]*4;E++)N[E]=M[E];return this.width=v,this.height=y,this.data=N,this}(function(t){var e=function(){return typeof Kl=="function"},n=function(y,v,N,A){var S=4,w=s;switch(A){case t.image_compression.FAST:S=1,w=o;break;case t.image_compression.MEDIUM:S=6,w=a;break;case t.image_compression.SLOW:S=9,w=l}y=r(y,v,N,w);var _=Kl(y,{level:S});return t.__addimage__.arrayBufferToBinaryString(_)},r=function(y,v,N,A){for(var S,w,_,C=y.length/v,F=new Uint8Array(y.length+C),D=p(),M=0;M<C;M+=1){if(_=M*v,S=y.subarray(_,_+v),A)F.set(A(S,N,w),_+M);else{for(var E,L=D.length,z=[];E<L;E+=1)z[E]=D[E](S,N,w);var H=m(z.concat());F.set(z[H],_+M)}w=S}return F},i=function(y){var v=Array.apply([],y);return v.unshift(0),v},o=function(y,v){var N,A=[],S=y.length;A[0]=1;for(var w=0;w<S;w+=1)N=y[w-v]||0,A[w+1]=y[w]-N+256&255;return A},s=function(y,v,N){var A,S=[],w=y.length;S[0]=2;for(var _=0;_<w;_+=1)A=N&&N[_]||0,S[_+1]=y[_]-A+256&255;return S},a=function(y,v,N){var A,S,w=[],_=y.length;w[0]=3;for(var C=0;C<_;C+=1)A=y[C-v]||0,S=N&&N[C]||0,w[C+1]=y[C]+256-(A+S>>>1)&255;return w},l=function(y,v,N){var A,S,w,_,C=[],F=y.length;C[0]=4;for(var D=0;D<F;D+=1)A=y[D-v]||0,S=N&&N[D]||0,w=N&&N[D-v]||0,_=c(A,S,w),C[D+1]=y[D]-_+256&255;return C},c=function(y,v,N){if(y===v&&v===N)return y;var A=Math.abs(v-N),S=Math.abs(y-N),w=Math.abs(y+v-N-N);return A<=S&&A<=w?y:S<=w?v:N},p=function(){return[i,o,s,a,l]},m=function(y){var v=y.map((function(N){return N.reduce((function(A,S){return A+Math.abs(S)}),0)}));return v.indexOf(Math.min.apply(null,v))};t.processPNG=function(y,v,N,A){var S,w,_,C,F,D,M,E,L,z,H,I,k,B,J,re=this.decode.FLATE_DECODE,j="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(_=new ey(y)).imgData,w=_.bits,S=_.colorSpace,F=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){L=(E=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,H=new Uint8Array(L*_.colors),z=new Uint8Array(L);var R,W=_.pixelBitlength-_.bits;for(B=0,J=0;B<L;B++){for(k=E[B],R=0;R<W;)H[J++]=k>>>R&255,R+=_.bits;z[B]=k>>>R&255}}if(_.bits===16){L=(E=new Uint32Array(_.decodePixels().buffer)).length,H=new Uint8Array(L*(32/_.pixelBitlength)*_.colors),z=new Uint8Array(L*(32/_.pixelBitlength)),I=_.colors>1,B=0,J=0;for(var K=0;B<L;)k=E[B++],H[J++]=k>>>0&255,I&&(H[J++]=k>>>16&255,k=E[B++],H[J++]=k>>>0&255),z[K++]=k>>>16&255;w=8}A!==t.image_compression.NONE&&e()?(y=n(H,_.width*_.colors,_.colors,A),M=n(z,_.width,1,A)):(y=H,M=z,re=void 0)}if(_.colorType===3&&(S=this.color_spaces.INDEXED,D=_.palette,_.transparency.indexed)){var te=_.transparency.indexed,ae=0;for(B=0,L=te.length;B<L;++B)ae+=te[B];if((ae/=255)===L-1&&te.indexOf(0)!==-1)C=[te.indexOf(0)];else if(ae!==L){for(E=_.decodePixels(),z=new Uint8Array(E.length),B=0,L=E.length;B<L;B++)z[B]=te[E[B]];M=n(z,_.width,1)}}var P=(function(G){var X;switch(G){case t.image_compression.FAST:X=11;break;case t.image_compression.MEDIUM:X=13;break;case t.image_compression.SLOW:X=14;break;default:X=12}return X})(A);return re===this.decode.FLATE_DECODE&&(j="/Predictor "+P+" "),j+="/Colors "+F+" /BitsPerComponent "+w+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(M&&this.__addimage__.isArrayBuffer(M)||this.__addimage__.isArrayBufferView(M))&&(M=this.__addimage__.arrayBufferToBinaryString(M)),{alias:N,data:y,index:v,filter:re,decodeParameters:j,transparency:C,palette:D,sMask:M,predictor:P,width:_.width,height:_.height,bitsPerComponent:w,colorSpace:S}}}})(We.API),(function(t){t.processGIF89A=function(e,n,r,i){var o=new ty(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:a},p=new El(100).encode(c,100);return t.processJPEG.call(this,p,n,r,i)},t.processGIF87A=t.processGIF89A})(We.API),Qn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Qn.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){At.log("bit decode error:"+n)}},Qn.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Qn.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,l=15&o,c=this.palette[a];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Qn.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},Qn.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,c=o>>15?255:0,p=r*this.width*4+4*i;this.data[p]=l,this.data[p+1]=a,this.data[p+2]=s,this.data[p+3]=c}this.pos+=t}},Qn.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&n)/n*255|0,c=(s>>11)/e*255|0,p=i*this.width*4+4*o;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=a,this.data[p+3]=255}this.pos+=t}},Qn.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Qn.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},Qn.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,i){var o=new Qn(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new El(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}})(We.API),Od.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,i){var o=new Od(e),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new El(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}})(We.API),We.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var p=r[c],m=r[c+1],y=r[c+2],v=r[c+3];o[a++]=p,o[a++]=m,o[a++]=y,s[l++]=v}var N=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:N,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},We.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},so=We.API,la=so.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=c.fof?c.fof:1,m=e.doKerning!==!1,y=0,v=t.length,N=0,A=a[0]||l,S=[];for(n=0;n<v;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?S.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(y=m&&bt(c[r])==="object"&&!isNaN(parseInt(c[r][N],10))?c[r][N]/p:0,S.push((a[r]||A)/l+y)),N=r;return S},jd=so.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return so.processArabic&&(t=so.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:la.apply(this,arguments).reduce((function(o,s){return o+s}),0)},Ud=function(t,e,n,r){for(var i=[],o=0,s=t.length,a=0;o!==s&&a+e[o]<n;)a+=e[o],o++;i.push(t.slice(0,o));var l=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(t.slice(l,o)),a=0,l=o),a+=e[o],o++;return l!==o&&i.push(t.slice(l,o)),i},Bd=function(t,e,n){n||(n={});var r,i,o,s,a,l,c,p=[],m=[p],y=n.textIndent||0,v=0,N=0,A=t.split(" "),S=la.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?A[0].length+2:n.lineIndent||0){var w=Array(l).join(" "),_=[];A.map((function(F){(F=F.split(/\s*\n/)).length>1?_=_.concat(F.map((function(D,M){return(M&&D.length?`
`:"")+D}))):_.push(F[0])})),A=_,l=jd.apply(this,[w,n])}for(o=0,s=A.length;o<s;o++){var C=0;if(r=A[o],l&&r[0]==`
`&&(r=r.substr(1),C=1),y+v+(N=(i=la.apply(this,[r,n])).reduce((function(F,D){return F+D}),0))>e||C){if(N>e){for(a=Ud.apply(this,[r,i,e-(y+v),e]),p.push(a.shift()),p=[a.pop()];a.length;)m.push([a.shift()]);N=i.slice(r.length-(p[0]?p[0].length:0)).reduce((function(F,D){return F+D}),0)}else p=[r];m.push(p),y=N+l,v=S}else p.push(r),y+=v+N,v=S}return c=l?function(F,D){return(D?w:"")+F.join(" ")}:function(F){return F.join(" ")},m.map(c)},so.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var m=this.internal.getFont(p.fontName,p.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(Bd.apply(this,[r[a],s,o]));return c},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(m){return"0x"+parseInt(m,10).toString(16)},s=t.__fontmetrics__.compress=function(m){var y,v,N,A,S=["{"];for(var w in m){if(y=m[w],isNaN(parseInt(w,10))?v="'"+w+"'":(w=parseInt(w,10),v=(v=o(w).slice(2)).slice(0,-1)+r[v.slice(-1)]),typeof y=="number")y<0?(N=o(y).slice(3),A="-"):(N=o(y).slice(2),A=""),N=A+N.slice(0,-1)+r[N.slice(-1)];else{if(bt(y)!=="object")throw new Error("Don't know what to do with value type "+bt(y)+".");N=s(y)}S.push(v+N)}return S.push("}"),S.join("")},a=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,v,N,A,S={},w=1,_=S,C=[],F="",D="",M=m.length-1,E=1;E<M;E+=1)(A=m[E])=="'"?y?(N=y.join(""),y=void 0):y=[]:y?y.push(A):A=="{"?(C.push([_,N]),_={},N=void 0):A=="}"?((v=C.pop())[0][v[1]]=_,N=void 0,_=v[0]):A=="-"?w=-1:N===void 0?n.hasOwnProperty(A)?(F+=n[A],N=parseInt(F,16)*w,w=1,F=""):F+=A:n.hasOwnProperty(A)?(D+=n[A],_[N]=parseInt(D,16)*w,w=1,N=void 0,D=""):D+=A;return S},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var y=m.font,v=p.Unicode[y.postScriptName];v&&(y.metadata.Unicode={},y.metadata.Unicode.widths=v.widths,y.metadata.Unicode.kerning=v.kerning);var N=c.Unicode[y.postScriptName];N&&(y.metadata.Unicode.encoding=N,y.encoding=N.codePages[0])}])})(We.API),(function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(ns(a)),s.metadata=t.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(We),(function(t){function e(){return(Je.canvg?Promise.resolve(Je.canvg):Pl(()=>import("./index.es-PEJKaedr.js"),__vite__mapDeps([0,1,2,3]))).catch((function(n){return Promise.reject(new Error("Could not load canvg: "+n))})).then((function(n){return n.default?n.default:n}))}We.API.addSvgAsImage=function(n,r,i,o,s,a,l,c){if(isNaN(r)||isNaN(i))throw At.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(s))throw At.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=o,p.height=s;var m=p.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,p.width,p.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return e().then((function(N){return N.fromString(m,n,y)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(N){return N.render(y)})).then((function(){v.addImage(p.toDataURL("image/jpeg",1),r,i,o,s,l,c)}))}})(),We.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},We.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],c=0,p=0,m=0;function y(N,A){var S,w=!1;for(S=0;S<N.length;S+=1)N[S]===A&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var v=a.length;for(m=0;m<v;m+=1)n[a[m]].value=n[a[m]].defaultValue,n[a[m]].explicitSet=!1}if(bt(t)==="object"){for(i in t)if(o=t[i],y(a,i)&&o!==void 0){if(n[i].type==="boolean"&&typeof o=="boolean")n[i].value=o;else if(n[i].type==="name"&&y(n[i].valueSet,o))n[i].value=o;else if(n[i].type==="integer"&&Number.isInteger(o))n[i].value=o;else if(n[i].type==="array"){for(c=0;c<o.length;c+=1)if(r=!0,o[c].length===1&&typeof o[c][0]=="number")l.push(String(o[c]-1));else if(o[c].length>1){for(p=0;p<o[c].length;p+=1)typeof o[c][p]!="number"&&(r=!1);r===!0&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var N,A=[];for(N in n)n[N].explicitSet===!0&&(n[N].type==="name"?A.push("/"+N+" /"+n[N].value):A.push("/"+N+" "+n[N].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=o.length+s.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(We.API),(function(t){var e=t.API,n=e.pdfEscape16=function(o,s){for(var a,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],p=[""],m=0,y=o.length;m<y;++m){if(a=s.metadata.characterToGlyph(o.charCodeAt(m)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(m),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return p.join("");a=a.toString(16),p.push(c[4-a.length],a)}return p.join("")},r=function(o){var s,a,l,c,p,m,y;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],m=0,y=(a=Object.keys(o).sort((function(v,N){return v-N}))).length;m<y;m++)s=a[m],l.length>=100&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(c=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,p=s.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var m=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),v="",N=0;N<y.length;N++)v+=String.fromCharCode(y[N]);var A=c();p({data:v,addLength1:!0,objectId:A}),l("endobj");var S=c();p({data:r(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var w=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+uo(a.fontName)),l("/FontFile2 "+A+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var _=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+uo(a.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(m)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+uo(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+_+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,p=s.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var m=a.metadata.rawData,y="",v=0;v<m.length;v++)y+=String.fromCharCode(m[v]);var N=c();p({data:y,addLength1:!0,objectId:N}),l("endobj");var A=c();p({data:r(a.metadata.toUnicode),addLength1:!0,objectId:A}),l("endobj");var S=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+N+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+uo(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var w=0;w<a.metadata.hmtx.widths.length;w++)a.metadata.hmtx.widths[w]=parseInt(a.metadata.hmtx.widths[w]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+uo(a.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",l=o.x,c=o.y,p=o.options||{},m=o.mutex||{},y=m.pdfEscape,v=m.activeFontKey,N=m.fonts,A=v,S="",w=0,_="",C=N[A].encoding;if(N[A].encoding!=="Identity-H")return{text:a,x:l,y:c,options:p,mutex:m};for(_=a,A=v,Array.isArray(a)&&(_=a[0]),w=0;w<_.length;w+=1)N[A].metadata.hasOwnProperty("cmap")&&(s=N[A].metadata.cmap.unicode.codeMap[_[w].charCodeAt(0)]),s||_[w].charCodeAt(0)<256&&N[A].metadata.hasOwnProperty("Unicode")?S+=_[w]:S+="";var F="";return parseInt(A.slice(1))<14||C==="WinAnsiEncoding"?F=y(S,A).split("").map((function(D){return D.charCodeAt(0).toString(16)})).join(""):C==="Identity-H"&&(F=n(S,N[A])),m.isHex=!0,{text:F,x:l,y:c,options:p,mutex:m}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],l={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?a.push([i(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):a.push(i(Object.assign({},l,{text:s[c]})).text);o.text=a}else o.text=i(Object.assign({},l,{text:s})).text}])})(We),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(We.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,o,s,a,l,c,p,m=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,C=0;this.__bidiEngine__={};var F=function(I){var k=I.charCodeAt(),B=k>>8,J=A[B];return J!==void 0?m[256*J+(255&k)]:B===252||B===253?"AL":w.test(B)?"L":B===8?"R":"N"},D=function(I){for(var k,B=0;B<I.length;B++){if((k=F(I.charAt(B)))==="L")return!1;if(k==="R")return!0}return!1},M=function(I,k,B,J){var re,j,R,W,K=k[J];switch(K){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(K="AN");break;case"AL":_=!0,K="R";break;case"WS":K="N";break;case"CS":J<1||J+1>=k.length||(re=B[J-1])!=="EN"&&re!=="AN"||(j=k[J+1])!=="EN"&&j!=="AN"?K="N":_&&(j="AN"),K=j===re?j:"N";break;case"ES":K=(re=J>0?B[J-1]:"B")==="EN"&&J+1<k.length&&k[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&B[J-1]==="EN"){K="EN";break}if(_){K="N";break}for(R=J+1,W=k.length;R<W&&k[R]==="ET";)R++;K=R<W&&k[R]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(W=k.length,R=J+1;R<W&&k[R]==="NSM";)R++;if(R<W){var te=I[J],ae=te>=1425&&te<=2303||te===64286;if(re=k[R],ae&&(re==="R"||re==="AL")){K="R";break}}}K=J<1||(re=k[J-1])==="B"?"N":B[J-1];break;case"B":_=!1,i=!0,K=C;break;case"S":o=!0,K="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":K="N"}return K},E=function(I,k,B){var J=I.split("");return B&&L(J,B,{hiLevel:C}),J.reverse(),k&&k.reverse(),J.join("")},L=function(I,k,B){var J,re,j,R,W,K=-1,te=I.length,ae=0,P=[],G=C?v:y,X=[];for(_=!1,i=!1,o=!1,re=0;re<te;re++)X[re]=F(I[re]);for(j=0;j<te;j++){if(W=ae,P[j]=M(I,X,P,j),J=240&(ae=G[W][N[P[j]]]),ae&=15,k[j]=R=G[ae][5],J>0)if(J===16){for(re=K;re<j;re++)k[re]=1;K=-1}else K=-1;if(G[ae][6])K===-1&&(K=j);else if(K>-1){for(re=K;re<j;re++)k[re]=R;K=-1}X[j]==="B"&&(k[j]=0),B.hiLevel|=R}o&&(function(Q,ee,oe){for(var de=0;de<oe;de++)if(Q[de]==="S"){ee[de]=C;for(var pe=de-1;pe>=0&&Q[pe]==="WS";pe--)ee[pe]=C}})(X,k,te)},z=function(I,k,B,J,re){if(!(re.hiLevel<I)){if(I===1&&C===1&&!i)return k.reverse(),void(B&&B.reverse());for(var j,R,W,K,te=k.length,ae=0;ae<te;){if(J[ae]>=I){for(W=ae+1;W<te&&J[W]>=I;)W++;for(K=ae,R=W-1;K<R;K++,R--)j=k[K],k[K]=k[R],k[R]=j,B&&(j=B[K],B[K]=B[R],B[R]=j);ae=W}ae++}}},H=function(I,k,B){var J=I.split(""),re={hiLevel:C};return B||(B=[]),L(J,B,re),(function(j,R,W){if(W.hiLevel!==0&&p)for(var K,te=0;te<j.length;te++)R[te]===1&&(K=S.indexOf(j[te]))>=0&&(j[te]=S[K+1])})(J,B,re),z(2,J,k,B,re),z(1,J,k,B,re),J.join("")};return this.__bidiEngine__.doBidiReorder=function(I,k,B){if((function(re,j){if(j)for(var R=0;R<re.length;R++)j[R]=R;a===void 0&&(a=D(re)),c===void 0&&(c=D(re))})(I,k),s||!l||c)if(s&&l&&a^c)C=a?1:0,I=E(I,k,B);else if(!s&&l&&c)C=a?1:0,I=H(I,k,B),I=E(I,k);else if(!s||a||l||c){if(s&&!l&&a^c)I=E(I,k),a?(C=0,I=H(I,k,B)):(C=1,I=H(I,k,B),I=E(I,k));else if(s&&a&&!l&&c)C=1,I=H(I,k,B),I=E(I,k);else if(!s&&!l&&a^c){var J=p;a?(C=1,I=H(I,k,B),C=0,p=!1,I=H(I,k,B),p=J):(C=0,I=H(I,k,B),I=E(I,k),C=1,p=!1,I=H(I,k,B),p=J,I=E(I,k))}}else C=0,I=H(I,k,B);else C=a?1:0,I=H(I,k,B);return I},this.__bidiEngine__.setOptions=function(I){I&&(s=I.isInputVisual,l=I.isOutputVisual,a=I.isInputRtl,c=I.isOutputRtl,p=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,o=(r.x,r.y,r.options||{}),s=(r.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([n.doBidiReorder(i[a])]);r.text=s}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])})(We),We.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new oi(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new my(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ny(this.contents),this.head=new iy(this),this.name=new cy(this),this.cmap=new oh(this),this.toUnicode={},this.hhea=new oy(this),this.maxp=new uy(this),this.hmtx=new dy(this),this.post=new ay(this),this.os2=new sy(this),this.loca=new gy(this),this.glyf=new fy(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,l,c;for(c=[],s=0,a=(l=this.bbox).length;s<a;s++)e=l[s],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(n=i>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return s*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var ir,oi=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,o,s,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],o.push(this.writeByte(n));return o},t})(),ny=(function(){var t;function e(n){var r,i,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,o,s,a,l,c,p,m,y,v,N,A;for(A in v=Object.keys(n).length,l=Math.log(2),m=16*Math.floor(Math.log(v)/l),s=Math.floor(m/l),p=16*v-m,(i=new oi).writeInt(this.scalarType),i.writeShort(v),i.writeShort(m),i.writeShort(s),i.writeShort(p),o=16*v,c=i.pos+o,a=null,N=[],n)for(y=n[A],i.writeString(A),i.writeInt(t(y)),i.writeInt(c),i.writeInt(y.length),N=N.concat(y),A==="head"&&(a=c),c+=y.length;c%4;)N.push(0),c++;return i.write(N),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,o,s;for(n=sh.call(n);n.length%4;)n.push(0);for(o=new oi(n),i=0,r=0,s=n.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),ry={}.hasOwnProperty,yr=function(t,e){for(var n in e)ry.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};ir=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var iy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new oi).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e})(),Hd=(function(){function t(e,n){var r,i,o,s,a,l,c,p,m,y,v,N,A,S,w,_,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(v=e.readUInt16(),y=v/2,e.pos+=6,o=(function(){var F,D;for(D=[],l=F=0;0<=y?F<y:F>y;l=0<=y?++F:--F)D.push(e.readUInt16());return D})(),e.pos+=2,A=(function(){var F,D;for(D=[],l=F=0;0<=y?F<y:F>y;l=0<=y?++F:--F)D.push(e.readUInt16());return D})(),c=(function(){var F,D;for(D=[],l=F=0;0<=y?F<y:F>y;l=0<=y?++F:--F)D.push(e.readUInt16());return D})(),p=(function(){var F,D;for(D=[],l=F=0;0<=y?F<y:F>y;l=0<=y?++F:--F)D.push(e.readUInt16());return D})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var F,D;for(D=[],l=F=0;0<=i?F<i:F>i;l=0<=i?++F:--F)D.push(e.readUInt16());return D})(),l=w=0,C=o.length;w<C;l=++w)for(S=o[l],r=_=N=A[l];N<=S?_<=S:_>=S;r=N<=S?++_:--_)p[l]===0?s=r+c[l]:(s=a[p[l]/2+(r-N)-(y-l)]||0)!==0&&(s+=c[l]),this.codeMap[r]=65535&s}e.pos=m}return t.encode=function(e,n){var r,i,o,s,a,l,c,p,m,y,v,N,A,S,w,_,C,F,D,M,E,L,z,H,I,k,B,J,re,j,R,W,K,te,ae,P,G,X,Q,ee,oe,de,pe,Ne,Ce,Ee;switch(J=new oi,s=Object.keys(e).sort((function(Ie,He){return Ie-He})),n){case"macroman":for(A=0,S=(function(){var Ie=[];for(N=0;N<256;++N)Ie.push(0);return Ie})(),_={0:0},o={},re=0,K=s.length;re<K;re++)_[pe=e[i=s[re]]]==null&&(_[pe]=++A),o[i]={old:e[i],new:_[e[i]]},S[i]=_[e[i]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(S),{charMap:o,subtable:J.data,maxGlyphID:A+1};case"unicode":for(k=[],m=[],C=0,_={},r={},w=c=null,j=0,te=s.length;j<te;j++)_[D=e[i=s[j]]]==null&&(_[D]=++C),r[i]={old:D,new:_[D]},a=_[D]-i,w!=null&&a===c||(w&&m.push(w),k.push(i),c=a),w=i;for(w&&m.push(w),m.push(65535),k.push(65535),H=2*(z=k.length),L=2*Math.pow(Math.log(z)/Math.LN2,2),y=Math.log(L/2)/Math.LN2,E=2*z-L,l=[],M=[],v=[],N=R=0,ae=k.length;R<ae;N=++R){if(I=k[N],p=m[N],I===65535){l.push(0),M.push(0);break}if(I-(B=r[I].new)>=32768)for(l.push(0),M.push(2*(v.length+z-N)),i=W=I;I<=p?W<=p:W>=p;i=I<=p?++W:--W)v.push(r[i].new);else l.push(B-I),M.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*z+2*v.length),J.writeUInt16(0),J.writeUInt16(H),J.writeUInt16(L),J.writeUInt16(y),J.writeUInt16(E),oe=0,P=m.length;oe<P;oe++)i=m[oe],J.writeUInt16(i);for(J.writeUInt16(0),de=0,G=k.length;de<G;de++)i=k[de],J.writeUInt16(i);for(Ne=0,X=l.length;Ne<X;Ne++)a=l[Ne],J.writeUInt16(a);for(Ce=0,Q=M.length;Ce<Q;Ce++)F=M[Ce],J.writeUInt16(F);for(Ee=0,ee=v.length;Ee<ee;Ee++)A=v[Ee],J.writeUInt16(A);return{charMap:r,subtable:J.data,maxGlyphID:C+1}}},t})(),oh=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new Hd(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,o;return r==null&&(r="macroman"),i=Hd.encode(n,r),(o=new oi).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},e})(),oy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e})(),sy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i})(),this.charRange=(function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e})(),ay=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var s;for(i=n.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)r=n.readByte(),o.push(this.names.push(n.readString(r)));return o;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],s=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;s=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e})(),ly=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},cy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,o,s,a,l,c,p,m,y,v;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},s=m=0,y=i.length;m<y;s=++m)o=i[s],n.pos=o.offset,p=n.readString(o.length),a=new ly(p,o),c[v=o.nameID]==null&&(c[v]=[]),c[o.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e})(),uy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e})(),dy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,o,s,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,m;for(m=[],r=p=0;0<=o?p<o:p>o;r=0<=o?++p:--p)m.push(n.readInt16());return m})(),this.widths=(function(){var p,m,y,v;for(v=[],p=0,m=(y=this.metrics).length;p<m;p++)s=y[p],v.push(s.advance);return v}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=o?a<o:a>o;r=0<=o?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e})(),sh=[].slice,fy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,o,s,a,l,c,p,m,y;return n in this.cache?this.cache[n]:(s=this.file.loca,r=this.file.contents,i=s.indexOf(n),(o=s.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new oi(r.read(o))).readShort(),p=l.readShort(),y=l.readShort(),c=l.readShort(),m=l.readShort(),this.cache[n]=a===-1?new py(l,p,y,c,m):new hy(l,a,p,y,c,m),this.cache[n]))},e.prototype.encode=function(n,r,i){var o,s,a,l,c;for(a=[],s=[],l=0,c=r.length;l<c;l++)o=n[r[l]],s.push(a.length),o&&(a=a.concat(o.encode(i)));return s.push(a.length),{table:a,offsets:s}},e})(),hy=(function(){function t(e,n,r,i,o,s){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),py=(function(){function t(e,n,r,i,o){var s,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new oi(sh.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),gy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=2)s.push(2*n.readUInt16());return s}).call(this):(function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=4)s.push(n.readUInt32());return s}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),o=0,s=0,a=0;a<i.length;++a)if(i[a]=o,s<r.length&&r[s]==a){++s,i[a]=o;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(o+=c)}for(var p=new Array(4*i.length),m=0;m<i.length;++m)p[4*m+3]=255&i[m],p[4*m+2]=(65280&i[m])>>8,p[4*m+1]=(16711680&i[m])>>16,p[4*m]=(4278190080&i[m])>>24;return p},e})(),my=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,o;for(n in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,o,s,a,l;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in n=[],i)(r=i[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in l=this.glyphsFor(n))r=l[o],i[o]=r;return i},t.prototype.encode=function(e,n){var r,i,o,s,a,l,c,p,m,y,v,N,A,S,w;for(i in r=oh.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),v={0:0},w=r.charMap)v[(l=w[i]).old]=l.new;for(N in y=r.maxGlyphID,s)N in v||(v[N]=y++);return p=(function(_){var C,F;for(C in F={},_)F[_[C]]=C;return F})(v),m=Object.keys(p).sort((function(_,C){return _-C})),A=(function(){var _,C,F;for(F=[],_=0,C=m.length;_<C;_++)a=m[_],F.push(p[a]);return F})(),o=this.font.glyf.encode(s,A,v),c=this.font.loca.encode(o.offsets,A),S={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},t})();We.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,o,s;if(Array.isArray(n))return"["+(function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in o=["<<"],n)s=n[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+n},e})();const vy=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Jv,AcroFormAppearance:qe,AcroFormButton:Jt,AcroFormCheckBox:os,AcroFormChoiceField:Si,AcroFormComboBox:Ai,AcroFormEditBox:rs,AcroFormListBox:_i,AcroFormPasswordField:ss,AcroFormPushButton:is,AcroFormRadioButton:Ci,AcroFormTextField:ri,GState:ls,ShadingPattern:Zr,TilingPattern:Ni,default:We,jsPDF:We},Symbol.toStringTag,{value:"Module"}));var ha={exports:{}};const yy=zh(vy);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var Vd=ha.exports,Gd;function xy(){return Gd||(Gd=1,(function(t,e){(function(r,i){t.exports=i((function(){try{return yy}catch{}})())})(typeof globalThis<"u"?globalThis:typeof Vd<"u"?Vd:typeof window<"u"?window:typeof self<"u"?self:Wh,function(n){return(function(){var r={172:(function(a,l){var c=this&&this.__extends||(function(){var y=function(v,N){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,S){A.__proto__=S}||function(A,S){for(var w in S)Object.prototype.hasOwnProperty.call(S,w)&&(A[w]=S[w])},y(v,N)};return function(v,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");y(v,N);function A(){this.constructor=v}v.prototype=N===null?Object.create(N):(A.prototype=N.prototype,new A)}})();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var p=(function(){function y(v,N,A){this.table=N,this.pageNumber=N.pageNumber,this.pageCount=this.pageNumber,this.settings=N.settings,this.cursor=A,this.doc=v.getDocument()}return y})();l.HookData=p;var m=(function(y){c(v,y);function v(N,A,S,w,_,C){var F=y.call(this,N,A,C)||this;return F.cell=S,F.row=w,F.column=_,F.section=w.section,F}return v})(p);l.CellHookData=m}),340:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var p=c(4),m=c(136),y=c(744),v=c(776),N=c(664),A=c(972);function S(w){w.API.autoTable=function(){for(var _=[],C=0;C<arguments.length;C++)_[C]=arguments[C];var F;_.length===1?F=_[0]:(console.error("Use of deprecated autoTable initiation"),F=_[2]||{},F.columns=_[0],F.body=_[1]);var D=(0,v.parseInput)(this,F),M=(0,A.createTable)(this,D);return(0,N.drawTable)(this,M),this},w.API.lastAutoTable=!1,w.API.previousAutoTable=!1,w.API.autoTable.previous=!1,w.API.autoTableText=function(_,C,F,D){(0,m.default)(_,C,F,D,this)},w.API.autoTableSetDefaults=function(_){return y.DocHandler.setDefaults(_,this),this},w.autoTableSetDefaults=function(_,C){y.DocHandler.setDefaults(_,C)},w.API.autoTableHtmlToJson=function(_,C){var F;if(C===void 0&&(C=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var D=new y.DocHandler(this),M=(0,p.parseHtml)(D,_,window,C,!1),E=M.head,L=M.body,z=((F=E[0])===null||F===void 0?void 0:F.map(function(H){return H.content}))||[];return{columns:z,rows:L,data:L}},w.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var _=this.lastAutoTable;return _&&_.finalY?_.finalY:0},w.API.autoTableAddPageContent=function(_){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),w.API.autoTable.globalDefaults||(w.API.autoTable.globalDefaults={}),w.API.autoTable.globalDefaults.addPageContent=_,this},w.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=S}),136:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(p,m,y,v,N){v=v||{};var A=1.15,S=N.internal.scaleFactor,w=N.internal.getFontSize()/S,_=N.getLineHeightFactor?N.getLineHeightFactor():A,C=w*_,F=/\r\n|\r|\n/g,D="",M=1;if((v.valign==="middle"||v.valign==="bottom"||v.halign==="center"||v.halign==="right")&&(D=typeof p=="string"?p.split(F):p,M=D.length||1),y+=w*(2-A),v.valign==="middle"?y-=M/2*C:v.valign==="bottom"&&(y-=M*C),v.halign==="center"||v.halign==="right"){var E=w;if(v.halign==="center"&&(E*=.5),D&&M>=1){for(var L=0;L<D.length;L++)N.text(D[L],m-N.getStringUnitWidth(D[L])*E,y),y+=C;return N}m-=N.getStringUnitWidth(p)*E}return v.halign==="justify"?N.text(p,m,y,{maxWidth:v.maxWidth||100,align:"justify"}):N.text(p,m,y),N}l.default=c}),420:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(N,A,S){S.applyStyles(A,!0);var w=Array.isArray(N)?N:[N],_=w.map(function(C){return S.getTextWidth(C)}).reduce(function(C,F){return Math.max(C,F)},0);return _}l.getStringWidth=c;function p(N,A,S,w){var _=A.settings.tableLineWidth,C=A.settings.tableLineColor;N.applyStyles({lineWidth:_,lineColor:C});var F=m(_,!1);F&&N.rect(S.x,S.y,A.getWidth(N.pageSize().width),w.y-S.y,F)}l.addTableBorder=p;function m(N,A){var S=N>0,w=A||A===0;return S&&w?"DF":S?"S":w?"F":null}l.getFillStyle=m;function y(N,A){var S,w,_,C;if(N=N||A,Array.isArray(N)){if(N.length>=4)return{top:N[0],right:N[1],bottom:N[2],left:N[3]};if(N.length===3)return{top:N[0],right:N[1],bottom:N[2],left:N[1]};if(N.length===2)return{top:N[0],right:N[1],bottom:N[0],left:N[1]};N.length===1?N=N[0]:N=A}return typeof N=="object"?(typeof N.vertical=="number"&&(N.top=N.vertical,N.bottom=N.vertical),typeof N.horizontal=="number"&&(N.right=N.horizontal,N.left=N.horizontal),{left:(S=N.left)!==null&&S!==void 0?S:A,top:(w=N.top)!==null&&w!==void 0?w:A,right:(_=N.right)!==null&&_!==void 0?_:A,bottom:(C=N.bottom)!==null&&C!==void 0?C:A}):(typeof N!="number"&&(N=A),{top:N,right:N,bottom:N,left:N})}l.parseSpacing=y;function v(N,A){var S=y(A.settings.margin,0);return N.pageSize().width-(S.left+S.right)}l.getPageAvailableWidth=v}),796:(function(a,l){var c=this&&this.__extends||(function(){var v=function(N,A){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,w){S.__proto__=w}||function(S,w){for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(S[_]=w[_])},v(N,A)};return function(N,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");v(N,A);function S(){this.constructor=N}N.prototype=A===null?Object.create(A):(S.prototype=A.prototype,new S)}})();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var p=(function(v){c(N,v);function N(A){var S=v.call(this)||this;return S._element=A,S}return N})(Array);l.HtmlRowInput=p;function m(v){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/v,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=m;function y(v){var N={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return N[v]}l.getTheme=y}),903:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var p=c(420);function m(S,w,_,C,F){var D={},M=1.3333333333333333,E=v(w,function(K){return F.getComputedStyle(K).backgroundColor});E!=null&&(D.fillColor=E);var L=v(w,function(K){return F.getComputedStyle(K).color});L!=null&&(D.textColor=L);var z=A(C,_);z&&(D.cellPadding=z);var H="borderTopColor",I=M*_,k=C.borderTopWidth;if(C.borderBottomWidth===k&&C.borderRightWidth===k&&C.borderLeftWidth===k){var B=(parseFloat(k)||0)/I;B&&(D.lineWidth=B)}else D.lineWidth={top:(parseFloat(C.borderTopWidth)||0)/I,right:(parseFloat(C.borderRightWidth)||0)/I,bottom:(parseFloat(C.borderBottomWidth)||0)/I,left:(parseFloat(C.borderLeftWidth)||0)/I},D.lineWidth.top||(D.lineWidth.right?H="borderRightColor":D.lineWidth.bottom?H="borderBottomColor":D.lineWidth.left&&(H="borderLeftColor"));var J=v(w,function(K){return F.getComputedStyle(K)[H]});J!=null&&(D.lineColor=J);var re=["left","right","center","justify"];re.indexOf(C.textAlign)!==-1&&(D.halign=C.textAlign),re=["middle","bottom","top"],re.indexOf(C.verticalAlign)!==-1&&(D.valign=C.verticalAlign);var j=parseInt(C.fontSize||"");isNaN(j)||(D.fontSize=j/M);var R=y(C);R&&(D.fontStyle=R);var W=(C.fontFamily||"").toLowerCase();return S.indexOf(W)!==-1&&(D.font=W),D}l.parseCss=m;function y(S){var w="";return(S.fontWeight==="bold"||S.fontWeight==="bolder"||parseInt(S.fontWeight)>=700)&&(w="bold"),(S.fontStyle==="italic"||S.fontStyle==="oblique")&&(w+="italic"),w}function v(S,w){var _=N(S,w);if(!_)return null;var C=_.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!C||!Array.isArray(C))return null;var F=[parseInt(C[1]),parseInt(C[2]),parseInt(C[3])],D=parseInt(C[4]);return D===0||isNaN(F[0])||isNaN(F[1])||isNaN(F[2])?null:F}function N(S,w){var _=w(S);return _==="rgba(0, 0, 0, 0)"||_==="transparent"||_==="initial"||_==="inherit"?S.parentElement==null?null:N(S.parentElement,w):_}function A(S,w){var _=[S.paddingTop,S.paddingRight,S.paddingBottom,S.paddingLeft],C=96/(72/w),F=(parseInt(S.lineHeight)-parseInt(S.fontSize))/w/2,D=_.map(function(E){return parseInt(E||"0")/C}),M=(0,p.parseSpacing)(D,0);return F>M.top&&(M.top=F),F>M.bottom&&(M.bottom=F),M}}),744:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},p=(function(){function m(y){this.jsPDFDocument=y,this.userStyles={textColor:y.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:y.internal.getFontSize(),fontStyle:y.internal.getFont().fontStyle,font:y.internal.getFont().fontName,lineWidth:y.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:y.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return m.setDefaults=function(y,v){v===void 0&&(v=null),v?v.__autoTableDocumentDefaults=y:c=y},m.unifyColor=function(y){return Array.isArray(y)?y:typeof y=="number"?[y,y,y]:typeof y=="string"?[y]:null},m.prototype.applyStyles=function(y,v){var N,A,S;v===void 0&&(v=!1),y.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(y.fontStyle);var w=this.jsPDFDocument.internal.getFont(),_=w.fontStyle,C=w.fontName;if(y.font&&(C=y.font),y.fontStyle){_=y.fontStyle;var F=this.getFontList()[C];F&&F.indexOf(_)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(F[0]),_=F[0])}if(this.jsPDFDocument.setFont(C,_),y.fontSize&&this.jsPDFDocument.setFontSize(y.fontSize),!v){var D=m.unifyColor(y.fillColor);D&&(N=this.jsPDFDocument).setFillColor.apply(N,D),D=m.unifyColor(y.textColor),D&&(A=this.jsPDFDocument).setTextColor.apply(A,D),D=m.unifyColor(y.lineColor),D&&(S=this.jsPDFDocument).setDrawColor.apply(S,D),typeof y.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(y.lineWidth)}},m.prototype.splitTextToSize=function(y,v,N){return this.jsPDFDocument.splitTextToSize(y,v,N)},m.prototype.rect=function(y,v,N,A,S){return this.jsPDFDocument.rect(y,v,N,A,S)},m.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},m.prototype.getTextWidth=function(y){return this.jsPDFDocument.getTextWidth(y)},m.prototype.getDocument=function(){return this.jsPDFDocument},m.prototype.setPage=function(y){this.jsPDFDocument.setPage(y)},m.prototype.addPage=function(){return this.jsPDFDocument.addPage()},m.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},m.prototype.getGlobalOptions=function(){return c||{}},m.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},m.prototype.pageSize=function(){var y=this.jsPDFDocument.internal.pageSize;return y.width==null&&(y={width:y.getWidth(),height:y.getHeight()}),y},m.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},m.prototype.getLineHeightFactor=function(){var y=this.jsPDFDocument;return y.getLineHeightFactor?y.getLineHeightFactor():1.15},m.prototype.getLineHeight=function(y){return y/this.scaleFactor()*this.getLineHeightFactor()},m.prototype.pageNumber=function(){var y=this.jsPDFDocument.internal.getCurrentPageInfo();return y?y.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},m})();l.DocHandler=p}),4:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var p=c(903),m=c(796);function y(A,S,w,_,C){var F,D;_===void 0&&(_=!1),C===void 0&&(C=!1);var M;typeof S=="string"?M=w.document.querySelector(S):M=S;var E=Object.keys(A.getFontList()),L=A.scaleFactor(),z=[],H=[],I=[];if(!M)return console.error("Html table could not be found with input: ",S),{head:z,body:H,foot:I};for(var k=0;k<M.rows.length;k++){var B=M.rows[k],J=(D=(F=B==null?void 0:B.parentElement)===null||F===void 0?void 0:F.tagName)===null||D===void 0?void 0:D.toLowerCase(),re=v(E,L,w,B,_,C);re&&(J==="thead"?z.push(re):J==="tfoot"?I.push(re):H.push(re))}return{head:z,body:H,foot:I}}l.parseHtml=y;function v(A,S,w,_,C,F){for(var D=new m.HtmlRowInput(_),M=0;M<_.cells.length;M++){var E=_.cells[M],L=w.getComputedStyle(E);if(C||L.display!=="none"){var z=void 0;F&&(z=(0,p.parseCss)(A,E,S,L,w)),D.push({rowSpan:E.rowSpan,colSpan:E.colSpan,styles:z,_element:E,content:N(E)})}}var H=w.getComputedStyle(_);if(D.length>0&&(C||H.display!=="none"))return D}function N(A){var S=A.cloneNode(!0);return S.innerHTML=S.innerHTML.replace(/\n/g,"").replace(/ +/g," "),S.innerHTML=S.innerHTML.split(/<br.*?>/).map(function(w){return w.trim()}).join(`
`),S.innerText||S.textContent||""}}),776:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var p=c(4),m=c(356),y=c(420),v=c(744),N=c(792);function A(M,E){var L=new v.DocHandler(M),z=L.getDocumentOptions(),H=L.getGlobalOptions();(0,N.default)(L,H,z,E);var I=(0,m.assign)({},H,z,E),k;typeof window<"u"&&(k=window);var B=S(H,z,E),J=w(H,z,E),re=_(L,I),j=F(L,I,k);return{id:E.tableId,content:j,hooks:J,styles:B,settings:re}}l.parseInput=A;function S(M,E,L){for(var z={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},H=function(J){if(J==="columnStyles"){var re=M[J],j=E[J],R=L[J];z.columnStyles=(0,m.assign)({},re,j,R)}else{var W=[M,E,L],K=W.map(function(te){return te[J]||{}});z[J]=(0,m.assign)({},K[0],K[1],K[2])}},I=0,k=Object.keys(z);I<k.length;I++){var B=k[I];H(B)}return z}function w(M,E,L){for(var z=[M,E,L],H={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},I=0,k=z;I<k.length;I++){var B=k[I];B.didParseCell&&H.didParseCell.push(B.didParseCell),B.willDrawCell&&H.willDrawCell.push(B.willDrawCell),B.didDrawCell&&H.didDrawCell.push(B.didDrawCell),B.willDrawPage&&H.willDrawPage.push(B.willDrawPage),B.didDrawPage&&H.didDrawPage.push(B.didDrawPage)}return H}function _(M,E){var L,z,H,I,k,B,J,re,j,R,W,K,te=(0,y.parseSpacing)(E.margin,40/M.scaleFactor()),ae=(L=C(M,E.startY))!==null&&L!==void 0?L:te.top,P;E.showFoot===!0?P="everyPage":E.showFoot===!1?P="never":P=(z=E.showFoot)!==null&&z!==void 0?z:"everyPage";var G;E.showHead===!0?G="everyPage":E.showHead===!1?G="never":G=(H=E.showHead)!==null&&H!==void 0?H:"everyPage";var X=(I=E.useCss)!==null&&I!==void 0?I:!1,Q=E.theme||(X?"plain":"striped"),ee=!!E.horizontalPageBreak,oe=(k=E.horizontalPageBreakRepeat)!==null&&k!==void 0?k:null;return{includeHiddenHtml:(B=E.includeHiddenHtml)!==null&&B!==void 0?B:!1,useCss:X,theme:Q,startY:ae,margin:te,pageBreak:(J=E.pageBreak)!==null&&J!==void 0?J:"auto",rowPageBreak:(re=E.rowPageBreak)!==null&&re!==void 0?re:"auto",tableWidth:(j=E.tableWidth)!==null&&j!==void 0?j:"auto",showHead:G,showFoot:P,tableLineWidth:(R=E.tableLineWidth)!==null&&R!==void 0?R:0,tableLineColor:(W=E.tableLineColor)!==null&&W!==void 0?W:200,horizontalPageBreak:ee,horizontalPageBreakRepeat:oe,horizontalPageBreakBehaviour:(K=E.horizontalPageBreakBehaviour)!==null&&K!==void 0?K:"afterAllRows"}}function C(M,E){var L=M.getLastAutoTable(),z=M.scaleFactor(),H=M.pageNumber(),I=!1;if(L&&L.startPageNumber){var k=L.startPageNumber+L.pageNumber-1;I=k===H}return typeof E=="number"?E:(E==null||E===!1)&&I&&(L==null?void 0:L.finalY)!=null?L.finalY+20/z:null}function F(M,E,L){var z=E.head||[],H=E.body||[],I=E.foot||[];if(E.html){var k=E.includeHiddenHtml;if(L){var B=(0,p.parseHtml)(M,E.html,L,k,E.useCss)||{};z=B.head||z,H=B.body||z,I=B.foot||z}else console.error("Cannot parse html in non browser environment")}var J=E.columns||D(z,H,I);return{columns:J,head:z,body:H,foot:I}}function D(M,E,L){var z=M[0]||E[0]||L[0]||[],H=[];return Object.keys(z).filter(function(I){return I!=="_element"}).forEach(function(I){var k=1,B;Array.isArray(z)?B=z[parseInt(I)]:B=z[I],typeof B=="object"&&!Array.isArray(B)&&(k=(B==null?void 0:B.colSpan)||1);for(var J=0;J<k;J++){var re=void 0;Array.isArray(z)?re=H.length:re=I+(J>0?"_".concat(J):"");var j={dataKey:re};H.push(j)}}),H}}),792:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(m,y,v,N){for(var A=function(C){C&&typeof C!="object"&&console.error("The options parameter should be of type object, is: "+typeof C),typeof C.extendWidth<"u"&&(C.tableWidth=C.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof C.margins<"u"&&(typeof C.margin>"u"&&(C.margin=C.margins),console.error("Use of deprecated option: margins, use margin instead.")),C.startY&&typeof C.startY!="number"&&(console.error("Invalid value for startY option",C.startY),delete C.startY),!C.didDrawPage&&(C.afterPageContent||C.beforePageContent||C.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),C.didDrawPage=function(I){m.applyStyles(m.userStyles),C.beforePageContent&&C.beforePageContent(I),m.applyStyles(m.userStyles),C.afterPageContent&&C.afterPageContent(I),m.applyStyles(m.userStyles),C.afterPageAdd&&I.pageNumber>1&&I.afterPageAdd(I),m.applyStyles(m.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(I){C[I]&&console.error('The "'.concat(I,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(I){var k=I[0],B=I[1];C[B]&&(console.error("Use of deprecated option ".concat(B,". Use ").concat(k," instead")),C[k]=C[B])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(I){var k=typeof I=="string"?I:I[0],B=typeof I=="string"?I:I[1];typeof C[k]<"u"&&(typeof C.styles[B]>"u"&&(C.styles[B]=C[k]),console.error("Use of deprecated option: "+k+", use the style "+B+" instead."))});for(var F=0,D=["styles","bodyStyles","headStyles","footStyles"];F<D.length;F++){var M=D[F];p(C[M]||{})}for(var E=C.columnStyles||{},L=0,z=Object.keys(E);L<z.length;L++){var H=z[L];p(E[H]||{})}},S=0,w=[y,v,N];S<w.length;S++){var _=w[S];A(_)}}l.default=c;function p(m){m.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),m.minCellHeight||(m.minCellHeight=m.rowHeight)):m.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),m.cellWidth||(m.cellWidth=m.columnWidth))}}),260:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var p=c(796),m=c(172),y=c(420),v=(function(){function w(_,C){this.pageNumber=1,this.pageCount=1,this.id=_.id,this.settings=_.settings,this.styles=_.styles,this.hooks=_.hooks,this.columns=C.columns,this.head=C.head,this.body=C.body,this.foot=C.foot}return w.prototype.getHeadHeight=function(_){return this.head.reduce(function(C,F){return C+F.getMaxCellHeight(_)},0)},w.prototype.getFootHeight=function(_){return this.foot.reduce(function(C,F){return C+F.getMaxCellHeight(_)},0)},w.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},w.prototype.callCellHooks=function(_,C,F,D,M,E){for(var L=0,z=C;L<z.length;L++){var H=z[L],I=new m.CellHookData(_,this,F,D,M,E),k=H(I)===!1;if(F.text=Array.isArray(F.text)?F.text:[F.text],k)return!1}return!0},w.prototype.callEndPageHooks=function(_,C){_.applyStyles(_.userStyles);for(var F=0,D=this.hooks.didDrawPage;F<D.length;F++){var M=D[F];M(new m.HookData(_,this,C))}},w.prototype.callWillDrawPageHooks=function(_,C){for(var F=0,D=this.hooks.willDrawPage;F<D.length;F++){var M=D[F];M(new m.HookData(_,this,C))}},w.prototype.getWidth=function(_){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var C=this.columns.reduce(function(D,M){return D+M.wrappedWidth},0);return C}else{var F=this.settings.margin;return _-F.left-F.right}},w})();l.Table=v;var N=(function(){function w(_,C,F,D,M){M===void 0&&(M=!1),this.height=0,this.raw=_,_ instanceof p.HtmlRowInput&&(this.raw=_._element,this.element=_._element),this.index=C,this.section=F,this.cells=D,this.spansMultiplePages=M}return w.prototype.getMaxCellHeight=function(_){var C=this;return _.reduce(function(F,D){var M;return Math.max(F,((M=C.cells[D.index])===null||M===void 0?void 0:M.height)||0)},0)},w.prototype.hasRowSpan=function(_){var C=this;return _.filter(function(F){var D=C.cells[F.index];return D?D.rowSpan>1:!1}).length>0},w.prototype.canEntireRowFit=function(_,C){return this.getMaxCellHeight(C)<=_},w.prototype.getMinimumRowHeight=function(_,C){var F=this;return _.reduce(function(D,M){var E=F.cells[M.index];if(!E)return 0;var L=C.getLineHeight(E.styles.fontSize),z=E.padding("vertical"),H=z+L;return H>D?H:D},0)},w})();l.Row=N;var A=(function(){function w(_,C,F){var D,M;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=C,this.section=F,this.raw=_;var E=_;_!=null&&typeof _=="object"&&!Array.isArray(_)?(this.rowSpan=_.rowSpan||1,this.colSpan=_.colSpan||1,E=(M=(D=_.content)!==null&&D!==void 0?D:_.title)!==null&&M!==void 0?M:_,_._element&&(this.raw=_._element)):(this.rowSpan=1,this.colSpan=1);var L=E!=null?""+E:"",z=/\r\n|\r|\n/g;this.text=L.split(z)}return w.prototype.getTextPos=function(){var _;if(this.styles.valign==="top")_=this.y+this.padding("top");else if(this.styles.valign==="bottom")_=this.y+this.height-this.padding("bottom");else{var C=this.height-this.padding("vertical");_=this.y+C/2+this.padding("top")}var F;if(this.styles.halign==="right")F=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var D=this.width-this.padding("horizontal");F=this.x+D/2+this.padding("left")}else F=this.x+this.padding("left");return{x:F,y:_}},w.prototype.getContentHeight=function(_,C){C===void 0&&(C=1.15);var F=Array.isArray(this.text)?this.text.length:1,D=this.styles.fontSize/_*C,M=F*D+this.padding("vertical");return Math.max(M,this.styles.minCellHeight)},w.prototype.padding=function(_){var C=(0,y.parseSpacing)(this.styles.cellPadding,0);return _==="vertical"?C.top+C.bottom:_==="horizontal"?C.left+C.right:C[_]},w})();l.Cell=A;var S=(function(){function w(_,C,F){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=_,this.raw=C,this.index=F}return w.prototype.getMaxCustomCellWidth=function(_){for(var C=0,F=0,D=_.allRows();F<D.length;F++){var M=D[F],E=M.cells[this.index];E&&typeof E.styles.cellWidth=="number"&&(C=Math.max(C,E.styles.cellWidth))}return C},w})();l.Column=S}),356:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(p,m,y,v,N){if(p==null)throw new TypeError("Cannot convert undefined or null to object");for(var A=Object(p),S=1;S<arguments.length;S++){var w=arguments[S];if(w!=null)for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(A[_]=w[_])}return A}l.assign=c}),972:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var p=c(744),m=c(260),y=c(324),v=c(796),N=c(356);function A(M,E){var L=new p.DocHandler(M),z=S(E,L.scaleFactor()),H=new m.Table(E,z);return(0,y.calculateWidths)(L,H),L.applyStyles(L.userStyles),H}l.createTable=A;function S(M,E){var L=M.content,z=F(L.columns);if(L.head.length===0){var H=_(z,"head");H&&L.head.push(H)}if(L.foot.length===0){var H=_(z,"foot");H&&L.foot.push(H)}var I=M.settings.theme,k=M.styles;return{columns:z,head:w("head",L.head,z,k,I,E),body:w("body",L.body,z,k,I,E),foot:w("foot",L.foot,z,k,I,E)}}function w(M,E,L,z,H,I){var k={},B=E.map(function(J,re){for(var j=0,R={},W=0,K=0,te=0,ae=L;te<ae.length;te++){var P=ae[te];if(k[P.index]==null||k[P.index].left===0)if(K===0){var G=void 0;Array.isArray(J)?G=J[P.index-W-j]:G=J[P.dataKey];var X={};typeof G=="object"&&!Array.isArray(G)&&(X=(G==null?void 0:G.styles)||{});var Q=D(M,P,re,H,z,I,X),ee=new m.Cell(G,Q,M);R[P.dataKey]=ee,R[P.index]=ee,K=ee.colSpan-1,k[P.index]={left:ee.rowSpan-1,times:K}}else K--,W++;else k[P.index].left--,K=k[P.index].times,j++}return new m.Row(J,re,M,R)});return B}function _(M,E){var L={};return M.forEach(function(z){if(z.raw!=null){var H=C(E,z.raw);H!=null&&(L[z.dataKey]=H)}}),Object.keys(L).length>0?L:null}function C(M,E){if(M==="head"){if(typeof E=="object")return E.header||E.title||null;if(typeof E=="string"||typeof E=="number")return E}else if(M==="foot"&&typeof E=="object")return E.footer;return null}function F(M){return M.map(function(E,L){var z,H,I;return typeof E=="object"?I=(H=(z=E.dataKey)!==null&&z!==void 0?z:E.key)!==null&&H!==void 0?H:L:I=L,new m.Column(I,E,L)})}function D(M,E,L,z,H,I,k){var B=(0,v.getTheme)(z),J;M==="head"?J=H.headStyles:M==="body"?J=H.bodyStyles:M==="foot"&&(J=H.footStyles);var re=(0,N.assign)({},B.table,B[M],H.styles,J),j=H.columnStyles[E.dataKey]||H.columnStyles[E.index]||{},R=M==="body"?j:{},W=M==="body"&&L%2===0?(0,N.assign)({},B.alternateRow,H.alternateRowStyles):{},K=(0,v.defaultStyles)(I),te=(0,N.assign)({},K,re,W,R);return(0,N.assign)(te,k)}}),664:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var p=c(420),m=c(260),y=c(744),v=c(356),N=c(136),A=c(224);function S(j,R){var W=R.settings,K=W.startY,te=W.margin,ae={x:te.left,y:K},P=R.getHeadHeight(R.columns)+R.getFootHeight(R.columns),G=K+te.bottom+P;if(W.pageBreak==="avoid"){var X=R.body,Q=X.reduce(function(de,pe){return de+pe.height},0);G+=Q}var ee=new y.DocHandler(j);(W.pageBreak==="always"||W.startY!=null&&G>ee.pageSize().height)&&(re(ee),ae.y=te.top),R.callWillDrawPageHooks(ee,ae);var oe=(0,v.assign)({},ae);R.startPageNumber=ee.pageNumber(),W.horizontalPageBreak?w(ee,R,oe,ae):(ee.applyStyles(ee.userStyles),(W.showHead==="firstPage"||W.showHead==="everyPage")&&R.head.forEach(function(de){return H(ee,R,de,ae,R.columns)}),ee.applyStyles(ee.userStyles),R.body.forEach(function(de,pe){var Ne=pe===R.body.length-1;z(ee,R,de,Ne,oe,ae,R.columns)}),ee.applyStyles(ee.userStyles),(W.showFoot==="lastPage"||W.showFoot==="everyPage")&&R.foot.forEach(function(de){return H(ee,R,de,ae,R.columns)})),(0,p.addTableBorder)(ee,R,oe,ae),R.callEndPageHooks(ee,ae),R.finalY=ae.y,j.lastAutoTable=R,j.previousAutoTable=R,j.autoTable&&(j.autoTable.previous=R),ee.applyStyles(ee.userStyles)}l.drawTable=S;function w(j,R,W,K){var te=(0,A.calculateAllColumnsCanFitInPage)(j,R),ae=R.settings;if(ae.horizontalPageBreakBehaviour==="afterAllRows")te.forEach(function(Q,ee){j.applyStyles(j.userStyles),ee>0?J(j,R,W,K,Q.columns,!0):_(j,R,K,Q.columns),C(j,R,W,K,Q.columns),D(j,R,K,Q.columns)});else for(var P=-1,G=te[0],X=function(){var Q=P;if(G){j.applyStyles(j.userStyles);var ee=G.columns;P>=0?J(j,R,W,K,ee,!0):_(j,R,K,ee),Q=F(j,R,P+1,K,ee),D(j,R,K,ee)}var oe=Q-P;te.slice(1).forEach(function(de){j.applyStyles(j.userStyles),J(j,R,W,K,de.columns,!0),F(j,R,P+1,K,de.columns,oe),D(j,R,K,de.columns)}),P=Q};P<R.body.length-1;)X()}function _(j,R,W,K){var te=R.settings;j.applyStyles(j.userStyles),(te.showHead==="firstPage"||te.showHead==="everyPage")&&R.head.forEach(function(ae){return H(j,R,ae,W,K)})}function C(j,R,W,K,te){j.applyStyles(j.userStyles),R.body.forEach(function(ae,P){var G=P===R.body.length-1;z(j,R,ae,G,W,K,te)})}function F(j,R,W,K,te,ae){j.applyStyles(j.userStyles),ae=ae??R.body.length;var P=Math.min(W+ae,R.body.length),G=-1;return R.body.slice(W,P).forEach(function(X,Q){var ee=W+Q===R.body.length-1,oe=B(j,R,ee,K);X.canEntireRowFit(oe,te)&&(H(j,R,X,K,te),G=W+Q)}),G}function D(j,R,W,K){var te=R.settings;j.applyStyles(j.userStyles),(te.showFoot==="lastPage"||te.showFoot==="everyPage")&&R.foot.forEach(function(ae){return H(j,R,ae,W,K)})}function M(j,R,W){var K=W.getLineHeight(j.styles.fontSize),te=j.padding("vertical"),ae=Math.floor((R-te)/K);return Math.max(0,ae)}function E(j,R,W,K){var te={};j.spansMultiplePages=!0,j.height=0;for(var ae=0,P=0,G=W.columns;P<G.length;P++){var X=G[P],Q=j.cells[X.index];if(Q){Array.isArray(Q.text)||(Q.text=[Q.text]);var ee=new m.Cell(Q.raw,Q.styles,Q.section);ee=(0,v.assign)(ee,Q),ee.text=[];var oe=M(Q,R,K);Q.text.length>oe&&(ee.text=Q.text.splice(oe,Q.text.length));var de=K.scaleFactor(),pe=K.getLineHeightFactor();Q.contentHeight=Q.getContentHeight(de,pe),Q.contentHeight>=R&&(Q.contentHeight=R,ee.styles.minCellHeight-=R),Q.contentHeight>j.height&&(j.height=Q.contentHeight),ee.contentHeight=ee.getContentHeight(de,pe),ee.contentHeight>ae&&(ae=ee.contentHeight),te[X.index]=ee}}var Ne=new m.Row(j.raw,-1,j.section,te,!0);Ne.height=ae;for(var Ce=0,Ee=W.columns;Ce<Ee.length;Ce++){var X=Ee[Ce],ee=Ne.cells[X.index];ee&&(ee.height=Ne.height);var Q=j.cells[X.index];Q&&(Q.height=j.height)}return Ne}function L(j,R,W,K){var te=j.pageSize().height,ae=K.settings.margin,P=ae.top+ae.bottom,G=te-P;R.section==="body"&&(G-=K.getHeadHeight(K.columns)+K.getFootHeight(K.columns));var X=R.getMinimumRowHeight(K.columns,j),Q=X<W;if(X>G)return console.error("Will not be able to print row ".concat(R.index," correctly since it's minimum height is larger than page height")),!0;if(!Q)return!1;var ee=R.hasRowSpan(K.columns),oe=R.getMaxCellHeight(K.columns)>G;return oe?(ee&&console.error("The content of row ".concat(R.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ee||K.settings.rowPageBreak==="avoid")}function z(j,R,W,K,te,ae,P){var G=B(j,R,K,ae);if(W.canEntireRowFit(G,P))H(j,R,W,ae,P);else if(L(j,W,G,R)){var X=E(W,G,R,j);H(j,R,W,ae,P),J(j,R,te,ae,P),z(j,R,X,K,te,ae,P)}else J(j,R,te,ae,P),z(j,R,W,K,te,ae,P)}function H(j,R,W,K,te){K.x=R.settings.margin.left;for(var ae=0,P=te;ae<P.length;ae++){var G=P[ae],X=W.cells[G.index];if(!X){K.x+=G.width;continue}j.applyStyles(X.styles),X.x=K.x,X.y=K.y;var Q=R.callCellHooks(j,R.hooks.willDrawCell,X,W,G,K);if(Q===!1){K.x+=G.width;continue}I(j,X,K);var ee=X.getTextPos();(0,N.default)(X.text,ee.x,ee.y,{halign:X.styles.halign,valign:X.styles.valign,maxWidth:Math.ceil(X.width-X.padding("left")-X.padding("right"))},j.getDocument()),R.callCellHooks(j,R.hooks.didDrawCell,X,W,G,K),K.x+=G.width}K.y+=W.height}function I(j,R,W){var K=R.styles;if(j.getDocument().setFillColor(j.getDocument().getFillColor()),typeof K.lineWidth=="number"){var te=(0,p.getFillStyle)(K.lineWidth,K.fillColor);te&&j.rect(R.x,W.y,R.width,R.height,te)}else typeof K.lineWidth=="object"&&(K.fillColor&&j.rect(R.x,W.y,R.width,R.height,"F"),k(j,R,W,K.lineWidth))}function k(j,R,W,K){var te,ae,P,G;K.top&&(te=W.x,ae=W.y,P=W.x+R.width,G=W.y,K.right&&(P+=.5*K.right),K.left&&(te-=.5*K.left),X(K.top,te,ae,P,G)),K.bottom&&(te=W.x,ae=W.y+R.height,P=W.x+R.width,G=W.y+R.height,K.right&&(P+=.5*K.right),K.left&&(te-=.5*K.left),X(K.bottom,te,ae,P,G)),K.left&&(te=W.x,ae=W.y,P=W.x,G=W.y+R.height,K.top&&(ae-=.5*K.top),K.bottom&&(G+=.5*K.bottom),X(K.left,te,ae,P,G)),K.right&&(te=W.x+R.width,ae=W.y,P=W.x+R.width,G=W.y+R.height,K.top&&(ae-=.5*K.top),K.bottom&&(G+=.5*K.bottom),X(K.right,te,ae,P,G));function X(Q,ee,oe,de,pe){j.getDocument().setLineWidth(Q),j.getDocument().line(ee,oe,de,pe,"S")}}function B(j,R,W,K){var te=R.settings.margin.bottom,ae=R.settings.showFoot;return(ae==="everyPage"||ae==="lastPage"&&W)&&(te+=R.getFootHeight(R.columns)),j.pageSize().height-K.y-te}function J(j,R,W,K,te,ae){te===void 0&&(te=[]),ae===void 0&&(ae=!1),j.applyStyles(j.userStyles),R.settings.showFoot==="everyPage"&&!ae&&R.foot.forEach(function(G){return H(j,R,G,K,te)}),R.callEndPageHooks(j,K);var P=R.settings.margin;(0,p.addTableBorder)(j,R,W,K),re(j),R.pageNumber++,R.pageCount++,K.x=P.left,K.y=P.top,W.y=P.top,R.callWillDrawPageHooks(j,K),R.settings.showHead==="everyPage"&&(R.head.forEach(function(G){return H(j,R,G,K,te)}),j.applyStyles(j.userStyles))}l.addPage=J;function re(j){var R=j.pageNumber();j.setPage(R+1);var W=j.pageNumber();return W===R?(j.addPage(),!0):!1}}),224:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var p=c(420);function m(v,N,A){var S;A===void 0&&(A={});var w=(0,p.getPageAvailableWidth)(v,N),_=new Map,C=[],F=[],D=[];N.settings.horizontalPageBreakRepeat,Array.isArray(N.settings.horizontalPageBreakRepeat)?D=N.settings.horizontalPageBreakRepeat:(typeof N.settings.horizontalPageBreakRepeat=="string"||typeof N.settings.horizontalPageBreakRepeat=="number")&&(D=[N.settings.horizontalPageBreakRepeat]),D.forEach(function(z){var H=N.columns.find(function(I){return I.dataKey===z||I.index===z});H&&!_.has(H.index)&&(_.set(H.index,!0),C.push(H.index),F.push(N.columns[H.index]),w-=H.wrappedWidth)});for(var M=!0,E=(S=A==null?void 0:A.start)!==null&&S!==void 0?S:0;E<N.columns.length;){if(_.has(E)){E++;continue}var L=N.columns[E].wrappedWidth;if(M||w>=L)M=!1,C.push(E),F.push(N.columns[E]),w-=L;else break;E++}return{colIndexes:C,columns:F,lastIndex:E-1}}function y(v,N){for(var A=[],S=0;S<N.columns.length;S++){var w=m(v,N,{start:S});w.columns.length&&(A.push(w),S=w.lastIndex)}return A}l.calculateAllColumnsCanFitInPage=y}),324:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var p=c(420);function m(C,F){y(C,F);var D=[],M=0;F.columns.forEach(function(L){var z=L.getMaxCustomCellWidth(F);z?L.width=z:(L.width=L.wrappedWidth,D.push(L)),M+=L.width});var E=F.getWidth(C.pageSize().width)-M;E&&(E=v(D,E,function(L){return Math.max(L.minReadableWidth,L.minWidth)})),E&&(E=v(D,E,function(L){return L.minWidth})),E=Math.abs(E),!F.settings.horizontalPageBreak&&E>.1/C.scaleFactor()&&(E=E<1?E:Math.round(E),console.warn("Of the table content, ".concat(E," units width could not fit page"))),A(F),S(F,C),N(F)}l.calculateWidths=m;function y(C,F){var D=C.scaleFactor(),M=F.settings.horizontalPageBreak,E=(0,p.getPageAvailableWidth)(C,F);F.allRows().forEach(function(L){for(var z=0,H=F.columns;z<H.length;z++){var I=H[z],k=L.cells[I.index];if(k){var B=F.hooks.didParseCell;F.callCellHooks(C,B,k,L,I,null);var J=k.padding("horizontal");k.contentWidth=(0,p.getStringWidth)(k.text,k.styles,C)+J;var re=(0,p.getStringWidth)(k.text.join(" ").split(/[^\S\u00A0]+/),k.styles,C);if(k.minReadableWidth=re+k.padding("horizontal"),typeof k.styles.cellWidth=="number")k.minWidth=k.styles.cellWidth,k.wrappedWidth=k.styles.cellWidth;else if(k.styles.cellWidth==="wrap"||M===!0)k.contentWidth>E?(k.minWidth=E,k.wrappedWidth=E):(k.minWidth=k.contentWidth,k.wrappedWidth=k.contentWidth);else{var j=10/D;k.minWidth=k.styles.minCellWidth||j,k.wrappedWidth=k.contentWidth,k.minWidth>k.wrappedWidth&&(k.wrappedWidth=k.minWidth)}}}}),F.allRows().forEach(function(L){for(var z=0,H=F.columns;z<H.length;z++){var I=H[z],k=L.cells[I.index];if(k&&k.colSpan===1)I.wrappedWidth=Math.max(I.wrappedWidth,k.wrappedWidth),I.minWidth=Math.max(I.minWidth,k.minWidth),I.minReadableWidth=Math.max(I.minReadableWidth,k.minReadableWidth);else{var B=F.styles.columnStyles[I.dataKey]||F.styles.columnStyles[I.index]||{},J=B.cellWidth||B.minCellWidth;J&&typeof J=="number"&&(I.minWidth=J,I.wrappedWidth=J)}k&&(k.colSpan>1&&!I.minWidth&&(I.minWidth=k.minWidth),k.colSpan>1&&!I.wrappedWidth&&(I.wrappedWidth=k.minWidth))}})}function v(C,F,D){for(var M=F,E=C.reduce(function(j,R){return j+R.wrappedWidth},0),L=0;L<C.length;L++){var z=C[L],H=z.wrappedWidth/E,I=M*H,k=z.width+I,B=D(z),J=k<B?B:k;F-=J-z.width,z.width=J}if(F=Math.round(F*1e10)/1e10,F){var re=C.filter(function(j){return F<0?j.width>D(j):!0});re.length&&(F=v(re,F,D))}return F}l.resizeColumns=v;function N(C){for(var F={},D=1,M=C.allRows(),E=0;E<M.length;E++)for(var L=M[E],z=0,H=C.columns;z<H.length;z++){var I=H[z],k=F[I.index];if(D>1)D--,delete L.cells[I.index];else if(k)k.cell.height+=L.height,D=k.cell.colSpan,delete L.cells[I.index],k.left--,k.left<=1&&delete F[I.index];else{var B=L.cells[I.index];if(!B)continue;if(B.height=L.height,B.rowSpan>1){var J=M.length-E,re=B.rowSpan>J?J:B.rowSpan;F[I.index]={cell:B,left:re,row:L}}}}}function A(C){for(var F=C.allRows(),D=0;D<F.length;D++)for(var M=F[D],E=null,L=0,z=0,H=0;H<C.columns.length;H++){var I=C.columns[H];if(z-=1,z>1&&C.columns[H+1])L+=I.width,delete M.cells[I.index];else if(E){var k=E;delete M.cells[I.index],E=null,k.width=I.width+L}else{var k=M.cells[I.index];if(!k)continue;if(z=k.colSpan,L=0,k.colSpan>1){E=k,L+=I.width;continue}k.width=I.width+L}}}function S(C,F){for(var D={count:0,height:0},M=0,E=C.allRows();M<E.length;M++){for(var L=E[M],z=0,H=C.columns;z<H.length;z++){var I=H[z],k=L.cells[I.index];if(k){F.applyStyles(k.styles,!0);var B=k.width-k.padding("horizontal");if(k.styles.overflow==="linebreak")k.text=F.splitTextToSize(k.text,B+1/F.scaleFactor(),{fontSize:k.styles.fontSize});else if(k.styles.overflow==="ellipsize")k.text=w(k.text,B,k.styles,F,"...");else if(k.styles.overflow==="hidden")k.text=w(k.text,B,k.styles,F,"");else if(typeof k.styles.overflow=="function"){var J=k.styles.overflow(k.text,B);typeof J=="string"?k.text=[J]:k.text=J}k.contentHeight=k.getContentHeight(F.scaleFactor(),F.getLineHeightFactor());var re=k.contentHeight/k.rowSpan;k.rowSpan>1&&D.count*D.height<re*k.rowSpan?D={height:re,count:k.rowSpan}:D&&D.count>0&&D.height>re&&(re=D.height),re>L.height&&(L.height=re)}}D.count--}}function w(C,F,D,M,E){return C.map(function(L){return _(L,F,D,M,E)})}l.ellipsize=w;function _(C,F,D,M,E){var L=1e4*M.scaleFactor();if(F=Math.ceil(F*L)/L,F>=(0,p.getStringWidth)(C,D,M))return C;for(;F<(0,p.getStringWidth)(C+E,D,M)&&!(C.length<=1);)C=C.substring(0,C.length-1);return C.trim()+E}}),964:(function(a){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=n})},i={};function o(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,o),c.exports}var s={};return(function(){var a=s;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=o(340),c=o(776),p=o(664),m=o(972),y=o(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return y.Table}});var v=o(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return v.CellHookData}});var N=o(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return N.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return N.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return N.Row}});function A(F){(0,l.default)(F)}a.applyPlugin=A;function S(F,D){var M=(0,c.parseInput)(F,D),E=(0,m.createTable)(F,M);(0,p.drawTable)(F,E)}function w(F,D){var M=(0,c.parseInput)(F,D);return(0,m.createTable)(F,M)}a.__createTable=w;function _(F,D){(0,p.drawTable)(F,D)}a.__drawTable=_;try{var C=o(964);C.jsPDF&&(C=C.jsPDF),A(C)}catch{}a.default=S})(),s})()})})(ha)),ha.exports}xy();const zd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ex=({data:t,grandTotals:e,sortConfig:n,onToggleSort:r,showAllPages:i,setShowAllPages:o,onExportPDF:s,isExporting:a,onPreviewImage:l,onNavigate:c,onMonthClick:p})=>{const[m,y]=ve.useState(!0),[v,N]=ve.useState(!1),[A,S]=ve.useState(!0),[w,_]=ve.useState(!0),[C,F]=ve.useState("All"),D=ve.useMemo(()=>{const H=new Set(t.map(I=>I.teamName));return Array.from(H).sort()},[t]),M=ve.useMemo(()=>C==="All"?t:t.filter(H=>H.teamName===C),[t,C]),{rowSpans:E,displayRow:L}=ve.useMemo(()=>{const H=new Array(M.length).fill(0),I=new Array(M.length).fill(!0);let k=0;for(;k<M.length;){const B=M[k].teamName;let J=1;for(;k+J<M.length&&M[k+J].teamName===B;)J++;H[k]=J,I[k]=!0;for(let re=1;re<J;re++)H[k+re]=0,I[k+re]=!1;k+=J}return{rowSpans:H,displayRow:I}},[M]),z=(H,I)=>{const k=[{key:"index",label:"#"},{key:"teamName",label:"ក្រុម (Team)",sortable:!0,sortKey:"teamName"},{key:"logo",label:"Logo"},{key:"pageName",label:"ឈ្មោះ Page",sortable:!0,sortKey:"pageName"},{key:`total${H}`,label:`សរុប (${H})`,sortable:!0,sortKey:H.toLowerCase()},...zd.map(B=>({key:`${I}_${B}`,label:B}))];return f.jsxs("div",{className:"hidden xl:flex page-card flex-col mb-8 !p-6 border-gray-700/50 shadow-xl overflow-hidden bg-gray-900/40",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("h3",{className:`text-xl font-black flex items-center gap-2 ${H==="Revenue"?"text-blue-300":"text-green-400"}`,children:[f.jsx("span",{className:`w-2 h-6 rounded-full ${H==="Revenue"?"bg-blue-600":"bg-green-600"}`}),"តារាង",H==="Revenue"?"ចំណូល":"ប្រាក់ចំណេញ","តាម Page (Desktop)"]}),f.jsxs("div",{className:"flex items-center gap-2",children:[H==="Revenue"&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"relative group mr-1",children:[f.jsxs("select",{value:C,onChange:B=>F(B.target.value),className:"btn !py-1 !px-3 !pl-8 text-[10px] font-black border transition-all bg-gray-800 border-gray-700 text-gray-400 hover:text-white uppercase appearance-none cursor-pointer focus:border-blue-500 outline-none",children:[f.jsx("option",{value:"All",children:"ALL TEAMS"}),D.map(B=>f.jsx("option",{value:B,children:String(B).toUpperCase()},B))]}),f.jsx("svg",{className:"w-3.5 h-3.5 text-gray-500 absolute left-2.5 top-1/2 -translate-y-1/2 pointer-events-none group-hover:text-blue-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})]}),f.jsx("button",{onClick:()=>o(!i),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${i?"bg-purple-600 border-purple-500 text-white shadow-lg shadow-purple-900/20":"bg-gray-800 border-gray-700 text-gray-400"}`,children:i?"ALL PAGES":"ACTIVE ONLY"}),f.jsxs("button",{onClick:s,disabled:a,className:"btn !py-1 !px-4 text-[10px] font-black bg-red-600/20 border border-red-500/30 text-red-400 hover:bg-red-600 hover:text-white transition-all flex items-center gap-2",children:[a?f.jsx(Pr,{size:"sm"}):f.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"EXPORT PDF"]})]}),f.jsx("button",{onClick:()=>_(!w),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${w?"bg-indigo-600 border-indigo-500 text-white":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"MERGE"}),f.jsx("button",{onClick:()=>S(!A),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${A?"bg-orange-600 border-orange-500 text-white":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"COLOR"}),f.jsx("button",{onClick:()=>N(!v),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${v?"bg-blue-600 border-blue-500 text-white shadow-lg":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"FREEZE"}),f.jsx("button",{onClick:()=>y(!m),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${m?"bg-gray-700 border-gray-600 text-white shadow-lg":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"BORDER"})]})]}),f.jsx("div",{className:`overflow-x-auto custom-scrollbar pb-2 ${m?"border-2 border-white/20 rounded-2xl shadow-[0_0_40px_rgba(0,0,0,0.6)]":""}`,children:f.jsxs("table",{className:`report-table w-full border-separate border-spacing-0 text-sm ${m?"border-collapse":""}`,children:[f.jsx("thead",{className:"bg-[#0f172a] backdrop-blur-md",children:f.jsx("tr",{className:"border-b-2 border-white/20",children:k.map(B=>{let J="",re={};v&&(B.key==="index"?(J="sticky left-0 z-30 bg-[#0f172a]",re={width:"45px",minWidth:"45px"}):B.key==="teamName"?(J="sticky left-[45px] z-30 bg-[#0f172a] border-r border-white/20 shadow-md",re={minWidth:"130px"}):B.key==="logo"?(J="sticky z-30 bg-[#0f172a]",re={left:"175px",width:"50px",minWidth:"50px"}):B.key==="pageName"?(J="sticky z-30 bg-[#0f172a] shadow-md",re={left:"225px",minWidth:"160px"}):B.key.includes("total")&&(J="sticky z-30 bg-[#0f172a] border-r border-white/20 shadow-lg",re={left:"385px",width:"100px",minWidth:"100px"}));const j=B.key.includes("total")?H==="Revenue"?"bg-blue-900/80":"bg-green-900/80":"";return f.jsx("th",{onClick:()=>B.sortable&&r(B.sortKey),className:`px-4 py-5 whitespace-nowrap text-left font-black uppercase tracking-wider border-b-2 border-white/20 ${m?"border-x border-white/10":""} ${J} ${j} ${B.sortable?"cursor-pointer hover:bg-gray-700":""}`,style:re,children:f.jsxs("div",{className:"flex items-center gap-1",children:[B.label," ",B.sortable&&n.key===B.sortKey&&f.jsx("span",{children:n.direction==="asc"?"↑":"↓"})]})},B.key)})})}),f.jsx("tbody",{className:"divide-y divide-white/10",children:M.map((B,J)=>{const re=w?L[J]:!0,j=w?E[J]:1,R=Array.from(String(B.teamName)).reduce((ae,P)=>ae+P.charCodeAt(0),0)%5,K=[{bg:"bg-blue-500/5",border:"border-l-4 border-l-blue-500"},{bg:"bg-purple-500/5",border:"border-l-4 border-l-purple-500"},{bg:"bg-emerald-500/5",border:"border-l-4 border-l-emerald-500"},{bg:"bg-orange-500/5",border:"border-l-4 border-l-orange-500"},{bg:"bg-pink-500/5",border:"border-l-4 border-l-pink-500"}][R],te=A?K.bg:"hover:bg-blue-500/5";return f.jsx("tr",{className:`${te} transition-colors group border-b border-white/10`,children:k.map(ae=>{const P=`px-4 py-4 lg:py-5 whitespace-nowrap border-white/10 ${m?"border-x border-white/10":""}`;let G="",X={};if(v&&(ae.key==="index"?(G="sticky left-0 z-10 bg-[#020617]",X={width:"45px",minWidth:"45px"}):ae.key==="teamName"?(G="sticky left-[45px] z-10 bg-[#020617] border-r border-white/20 shadow-md",X={width:"130px",minWidth:"130px"}):ae.key==="logo"?(G="sticky z-10 bg-[#020617]",X={left:"175px",width:"50px",minWidth:"50px"}):ae.key==="pageName"?(G="sticky z-10 bg-[#020617] shadow-md",X={left:"225px",minWidth:"160px"}):ae.key.includes("total")&&(G="sticky z-10 bg-[#020617] border-r border-white/20 shadow-lg",X={left:"385px",width:"100px",minWidth:"100px"})),ae.key==="index")return f.jsx("td",{className:`${P} text-center font-bold text-gray-500 ${G}`,style:X,children:J+1},ae.key);if(ae.key==="teamName")return re?f.jsx("td",{rowSpan:j,className:`${P} font-black text-white bg-gray-900/95 align-middle text-center ${G} ${A?K.border:""} border-b border-white/10 cursor-pointer hover:text-blue-400`,style:X,onClick:()=>c("team",B.teamName),children:f.jsx("div",{className:"bg-gray-800/80 py-1 px-3 rounded-xl border border-white/5 shadow-sm inline-block",children:B.teamName})},ae.key):null;if(ae.key==="logo")return f.jsx("td",{className:`${P} text-center ${G} border-b border-white/10`,style:X,children:f.jsx("img",{src:st(B.logoUrl),className:"w-9 h-9 rounded-full border border-gray-700 mx-auto shadow-md cursor-pointer hover:scale-110 transition-transform",alt:"logo",onClick:()=>l(st(B.logoUrl))})},ae.key);if(ae.key==="pageName")return f.jsx("td",{className:`${P} font-black text-white ${G} border-b border-white/10 cursor-pointer hover:text-blue-400 hover:underline transition-colors`,style:X,onClick:()=>c("page",B.pageName),children:B.pageName},ae.key);if(ae.key.includes("total"))return f.jsxs("td",{className:`${P} text-right font-black ${G} ${H==="Revenue"?"text-blue-100 bg-blue-600/10 hover:text-blue-300":"text-green-100 bg-green-600/10"} border-b border-white/10 cursor-pointer`,style:X,onClick:()=>c("page",B.pageName),children:["$",(H==="Revenue"?B.revenue:B.profit).toLocaleString(void 0,{minimumFractionDigits:2})]},ae.key);if(ae.key.startsWith(I)){const Q=B[ae.key]||0,ee=H==="Profit"?Q>0?"text-green-400":Q<0?"text-red-400":"text-gray-500":Q>0?"text-blue-300":"text-gray-500",oe=zd.indexOf(ae.key.split("_")[1]);return f.jsx("td",{className:`${P} text-right font-bold font-mono ${ee} border-b border-white/10 cursor-pointer hover:bg-gray-800 transition-colors`,onClick:()=>p(B.pageName,oe),children:Q!==0?`$${Q.toLocaleString(void 0,{minimumFractionDigits:2})}`:"-"},ae.key)}return f.jsx("td",{className:`${P} border-b border-white/10`,children:"-"},ae.key)})},B.pageName)})}),f.jsx("tfoot",{className:"bg-[#0f172a] font-black border-t-2 border-white/20",children:f.jsx("tr",{className:"border-t-2 border-white/20",children:k.map((B,J)=>{const re=`px-4 py-5 whitespace-nowrap border-t-2 border-white/20 ${m?"border-x border-white/10":""}`;let j="",R={};return v&&(B.key==="index"?(j="sticky left-0 z-30 bg-[#0f172a]",R={width:"45px",minWidth:"45px"}):B.key==="teamName"?(j="sticky left-[45px] z-30 bg-[#0f172a] border-r border-white/20 shadow-md",R={minWidth:"130px"}):B.key==="logo"?(j="sticky z-30 bg-[#0f172a]",R={left:"175px",width:"50px",minWidth:"50px"}):B.key==="pageName"?(j="sticky z-30 bg-[#0f172a] shadow-md",R={left:"225px",minWidth:"160px"}):B.key.includes("total")&&(j="sticky z-30 bg-[#0f172a] border-r border-white/20 shadow-lg",R={left:"385px",width:"100px",minWidth:"100px"})),J===0?f.jsx("td",{className:`${re} uppercase tracking-widest text-white font-black ${j}`,style:R,colSpan:4,children:"សរុបរួម (GRAND TOTAL)"},B.key):["teamName","logo","pageName"].includes(B.key)?null:B.key.includes("total")?f.jsxs("td",{className:`${re} text-right ${j} ${H==="Revenue"?"text-blue-300 bg-blue-600/10":"text-green-300 bg-green-600/10"}`,style:R,children:["$",(H==="Revenue"?e.revenue:e.profit).toLocaleString(void 0,{minimumFractionDigits:2})]},B.key):B.key.startsWith(I)?f.jsxs("td",{className:`${re} text-right text-gray-300 font-mono`,children:["$",e[B.key].toLocaleString(void 0,{minimumFractionDigits:2})]},B.key):f.jsx("td",{className:re},B.key)})})})]})})]})};return f.jsxs(f.Fragment,{children:[z("Revenue","rev"),z("Profit","prof")]})},by=({data:t,dataType:e,rowSpans:n,displayRow:r,MONTHS:i,grandTotals:o,onNavigate:s,onPreviewImage:a,onMonthClick:l})=>f.jsx("div",{className:"bg-[#0f172a] border border-white/10 rounded-[2.5rem] overflow-hidden shadow-2xl animate-fade-in flex flex-col w-full relative",children:f.jsx("div",{className:"overflow-x-auto custom-scrollbar w-full relative",children:f.jsxs("table",{className:"w-max min-w-full text-sm border-separate border-spacing-0",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"h-16 bg-[#0f172a]",children:[f.jsx("th",{className:"sticky left-0 z-30 bg-[#0f172a] px-2 text-center text-gray-500 font-black border-b border-white/10 w-[50px] min-w-[50px] border-r border-white/5",children:"#"}),f.jsx("th",{className:"sticky left-[50px] z-30 bg-[#0f172a] px-4 text-left text-white font-black uppercase tracking-wider border-b border-white/10 w-[110px] min-w-[110px] border-r border-white/5",children:"Team"}),f.jsx("th",{className:"sticky left-[160px] z-30 bg-[#0f172a] px-4 text-left text-white font-black uppercase tracking-wider border-b border-white/10 w-[200px] min-w-[200px] shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] border-r border-white/5",children:"Page Name"}),f.jsxs("th",{className:`px-6 text-right font-black uppercase tracking-wider border-b border-white/10 ${e==="revenue"?"text-blue-300 bg-blue-900/10":"text-green-300 bg-green-900/10"} min-w-[140px]`,children:["Total ",e==="revenue"?"Rev":"Prof"]}),i.map(c=>f.jsx("th",{className:"px-4 text-right text-gray-400 font-bold uppercase border-b border-white/10 min-w-[90px]",children:c},c))]})}),f.jsx("tbody",{className:"divide-y divide-white/5",children:t.map((c,p)=>{const m=Array.from(String(c.teamName)).reduce((S,w)=>S+w.charCodeAt(0),0)%5,v=["bg-blue-500/[0.02]","bg-purple-500/[0.02]","bg-emerald-500/[0.02]","bg-orange-500/[0.02]","bg-pink-500/[0.02]"][m],N="bg-[#111827]",A=e==="revenue"?"rev":"prof";return f.jsxs("tr",{className:`${v} hover:bg-white/5 transition-colors h-16 group`,children:[f.jsx("td",{className:`sticky left-0 z-20 ${N} border-r border-white/5 border-b border-white/5 text-center font-bold text-gray-600`,children:p+1}),r[p]?f.jsx("td",{rowSpan:n[p],className:`sticky left-[50px] z-20 ${N} border-r border-white/5 border-b border-white/5 align-middle px-4 cursor-pointer hover:bg-gray-800`,onClick:()=>s("team",c.teamName),children:f.jsx("div",{className:"font-black text-white bg-gray-800 border border-white/10 px-2.5 py-1.5 rounded-xl inline-block shadow-sm text-[10px] tracking-wide truncate max-w-[90px]",children:c.teamName})}):null,f.jsx("td",{className:`sticky left-[160px] z-20 ${N} border-r border-white/5 border-b border-white/5 shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] px-4 cursor-pointer hover:bg-gray-800`,onClick:()=>s("page",c.pageName),children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg p-0.5 bg-gray-800 border border-white/10 flex-shrink-0",onClick:S=>{S.stopPropagation(),a(st(c.logoUrl))},children:f.jsx("img",{src:st(c.logoUrl),className:"w-full h-full rounded-md object-cover",alt:""})}),f.jsx("span",{className:"truncate max-w-[140px] text-xs font-bold text-gray-200 group-hover:text-blue-300 transition-colors",title:c.pageName,children:c.pageName})]})}),f.jsxs("td",{className:`px-6 text-right font-black ${e==="revenue"?"text-blue-400 bg-blue-900/5 group-hover:bg-blue-900/20":"text-emerald-400 bg-emerald-900/5 group-hover:bg-emerald-900/20"} border-r border-white/5 border-b border-white/5 text-sm cursor-pointer`,onClick:()=>s("page",c.pageName),children:["$",(e==="revenue"?c.revenue:c.profit).toLocaleString()]}),i.map((S,w)=>{const _=c[`${A}_${S}`]||0;return f.jsx("td",{className:`px-4 text-right font-mono text-xs border-b border-white/5 cursor-pointer hover:bg-gray-800 transition-colors ${_>0?"text-gray-300 font-bold":"text-gray-700"}`,onClick:()=>l(c.pageName,w),children:_!==0?_.toLocaleString():"-"},S)})]},c.pageName)})}),o&&f.jsx("tfoot",{className:"bg-[#0f172a] font-black border-t-2 border-white/20",children:f.jsxs("tr",{className:"h-16",children:[f.jsx("td",{className:"sticky left-0 bg-[#0f172a] z-30 border-r border-white/5 border-b border-white/5"}),f.jsx("td",{className:"sticky left-[50px] bg-[#0f172a] z-30 border-r border-white/5 border-b border-white/5"}),f.jsx("td",{className:"sticky left-[160px] bg-[#0f172a] z-30 px-4 text-right uppercase tracking-widest text-white shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] border-r border-white/5 border-b border-white/5 text-xs flex items-center justify-end h-16",children:"Grand Total"}),f.jsxs("td",{className:`px-6 text-right ${e==="revenue"?"text-blue-300":"text-green-300"} border-r border-white/5 border-b border-white/5 text-base bg-[#1e293b]`,children:["$",(e==="revenue"?o.revenue:o.profit).toLocaleString()]}),i.map(c=>{const m=o[`${e==="revenue"?"rev":"prof"}_${c}`]||0;return f.jsx("td",{className:"px-4 text-right text-gray-400 font-mono text-[10px] border-b border-white/5 bg-[#0f172a]",children:m!==0?m.toLocaleString():"-"},c)})]})})]})})}),wy=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tx=({data:t,grandTotals:e,onPreviewImage:n,onNavigate:r,onMonthClick:i})=>{const[o,s]=ve.useState("table"),[a,l]=ve.useState("revenue"),{rowSpans:c,displayRow:p}=ve.useMemo(()=>{if(o!=="table")return{rowSpans:[],displayRow:[]};const m=new Array(t.length).fill(0),y=new Array(t.length).fill(!0);let v=0;for(;v<t.length;){const N=t[v].teamName;let A=1;for(;v+A<t.length&&t[v+A].teamName===N;)A++;m[v]=A,y[v]=!0;for(let S=1;S<A;S++)m[v+S]=0,y[v+S]=!1;v+=A}return{rowSpans:m,displayRow:y}},[t,o]);return f.jsxs("div",{className:"hidden md:block xl:hidden space-y-5 pb-12 px-1",children:[f.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl p-4 rounded-3xl border border-white/10 shadow-2xl flex flex-col sm:flex-row justify-between items-center gap-4 sticky top-20 z-40",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-900/30",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight",children:"Tablet Report"}),f.jsxs("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),t.length," Active Pages"]})]})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs("div",{className:"bg-black/40 p-1.5 rounded-2xl border border-white/5 flex",children:[f.jsx("button",{onClick:()=>l("revenue"),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${a==="revenue"?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:"Revenue"}),f.jsx("button",{onClick:()=>l("profit"),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${a==="profit"?"bg-emerald-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:"Profit"})]}),f.jsxs("div",{className:"bg-black/40 p-1.5 rounded-2xl border border-white/5 flex",children:[f.jsx("button",{onClick:()=>s("table"),className:`p-2.5 rounded-xl transition-all ${o==="table"?"bg-gray-700 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),f.jsx("button",{onClick:()=>s("grid"),className:`p-2.5 rounded-xl transition-all ${o==="grid"?"bg-gray-700 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2z"})})})]})]})]}),o==="grid"?f.jsx("div",{className:"grid grid-cols-2 gap-5 animate-fade-in",children:t.map(m=>f.jsxs("div",{className:"bg-gray-800/40 border border-white/10 rounded-[2.5rem] p-6 shadow-xl flex flex-col relative overflow-hidden group hover:border-blue-500/30 transition-all cursor-pointer",onClick:()=>r("page",m.pageName),children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-white/5 to-transparent rounded-bl-[100px] pointer-events-none transition-opacity group-hover:opacity-100 opacity-50"}),f.jsxs("div",{className:"flex items-center gap-5 mb-5 relative z-10",children:[f.jsx("div",{className:"w-14 h-14 rounded-2xl overflow-hidden border-2 border-gray-700 bg-gray-950 p-0.5 flex-shrink-0 shadow-2xl group-hover:scale-105 transition-transform",onClick:y=>{y.stopPropagation(),n(st(m.logoUrl))},children:f.jsx("img",{src:st(m.logoUrl),className:"w-full h-full object-cover rounded-xl",alt:""})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("h4",{className:"text-base font-black text-white truncate leading-tight uppercase tracking-tight group-hover:text-blue-300 transition-colors",children:m.pageName}),f.jsx("span",{className:"text-[10px] bg-blue-900/30 text-blue-300 px-3 py-1 rounded-full border border-blue-500/20 font-black uppercase mt-1.5 inline-block tracking-widest",children:m.teamName})]})]}),f.jsxs("div",{className:"space-y-3 flex-grow relative z-10",children:[f.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-2xl border border-white/5 group-hover:bg-blue-600/10 transition-colors",children:[f.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Revenue"}),f.jsxs("span",{className:"text-base font-black text-blue-400 tracking-tight",children:["$",m.revenue.toLocaleString()]})]}),f.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-2xl border border-white/5",children:[f.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Profit"}),f.jsxs("span",{className:"text-base font-black text-emerald-400 tracking-tight",children:["$",m.profit.toLocaleString()]})]})]})]},m.pageName))}):f.jsx(by,{data:t,dataType:a,rowSpans:c,displayRow:p,MONTHS:wy,grandTotals:e,onNavigate:r,onPreviewImage:n,onMonthClick:i})]})},ca=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nx=({data:t,onPreviewImage:e,onNavigate:n,onMonthClick:r,sortConfig:i,onToggleSort:o})=>{const[s,a]=ve.useState(()=>{const c=localStorage.getItem("mobile_view_preference");return c==="card"||c==="table"?c:"table"}),l=c=>{a(c),localStorage.setItem("mobile_view_preference",c)};return f.jsxs("div",{className:"md:hidden space-y-4 pb-12 px-1",children:[f.jsxs("div",{className:"flex justify-between items-center px-2 mb-2",children:[f.jsxs("h3",{className:"text-lg font-black text-white flex items-center gap-2",children:[f.jsx("span",{className:"w-1.5 h-5 bg-indigo-500 rounded-full"}),"Page Report"]}),f.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-xl border border-white/10",children:[f.jsx("button",{onClick:()=>l("card"),className:`p-2 rounded-lg transition-all ${s==="card"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Card View",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})})}),f.jsx("button",{onClick:()=>l("table"),className:`p-2 rounded-lg transition-all ${s==="table"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Table View",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),s==="card"?t.map(c=>{const p=c.orderCount>0?c.revenue/c.orderCount:0;return f.jsxs("div",{className:"bg-gray-800/40 border border-white/10 rounded-[2.5rem] p-6 shadow-xl space-y-5 animate-fade-in-up group relative overflow-hidden active:scale-[0.98] transition-all cursor-pointer",onClick:()=>n("page",c.pageName),children:[f.jsx("div",{className:"flex justify-between items-center border-b border-white/5 pb-4",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden border border-gray-700 bg-gray-950 shadow-inner p-0.5",onClick:m=>{m.stopPropagation(),e(st(c.logoUrl))},children:f.jsx("img",{src:st(c.logoUrl),className:"w-full h-full object-cover rounded-lg",alt:""})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("h4",{className:"text-base font-black text-white truncate leading-tight uppercase tracking-tight",children:c.pageName}),f.jsx("p",{className:"text-[10px] text-indigo-400 font-black uppercase tracking-[0.2em] mt-1",onClick:m=>{m.stopPropagation(),n("team",c.teamName)},children:c.teamName})]})]})}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl border border-white/5",children:[f.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1.5",children:"ចំណូលសរុប"}),f.jsxs("p",{className:"text-lg font-black text-blue-400 tracking-tighter",children:["$",c.revenue.toLocaleString()]})]}),f.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl border border-white/5",children:[f.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1.5",children:"ប្រាក់ចំណេញ"}),f.jsxs("p",{className:"text-lg font-black text-emerald-400 tracking-tighter",children:["$",c.profit.toLocaleString()]})]})]}),r&&f.jsxs("div",{className:"pt-4 border-t border-white/5",children:[f.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-2 ml-1",children:"Monthly Breakdown"}),f.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 hide-scrollbar",children:[ca.map((m,y)=>{const v=c[`rev_${m}`]||0;return v===0?null:f.jsxs("button",{onClick:N=>{N.stopPropagation(),r(c.pageName,y)},className:"flex-shrink-0 bg-gray-900/60 p-2.5 rounded-xl border border-white/5 min-w-[70px] flex flex-col items-center hover:bg-gray-800 hover:border-blue-500/30 transition-all active:scale-95",children:[f.jsx("span",{className:"text-[8px] font-bold text-gray-500 uppercase mb-0.5",children:m}),f.jsxs("span",{className:"text-[10px] font-black text-blue-300",children:["$",v.toLocaleString(void 0,{maximumFractionDigits:0})]})]},m)}),ca.every(m=>(c[`rev_${m}`]||0)===0)&&f.jsx("span",{className:"text-[9px] text-gray-600 italic pl-1",children:"No monthly data"})]})]}),f.jsxs("div",{className:"flex items-center justify-between px-1 pt-2 border-t border-white/5",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),f.jsxs("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:[c.orderCount," Orders"]})]}),f.jsxs("span",{className:"text-[10px] font-black text-purple-400 uppercase tracking-widest",children:["AOV: $",p.toFixed(0)]})]}),f.jsx("div",{className:"absolute -right-8 -bottom-8 w-24 h-24 bg-indigo-600/10 rounded-full blur-[40px] pointer-events-none group-hover:bg-indigo-600/20 transition-all duration-700"})]},c.pageName)}):f.jsx("div",{className:"bg-gray-900/60 border border-white/10 rounded-3xl overflow-hidden shadow-2xl animate-fade-in",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left border-collapse",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-[#0f172a] border-b border-white/10 text-xs text-gray-400 font-bold uppercase tracking-wider",children:[f.jsx("th",{className:"p-3 sticky left-0 z-20 bg-[#0f172a] border-r border-white/10 min-w-[140px] shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)] cursor-pointer hover:bg-gray-800 transition-colors",onClick:()=>o&&o("pageName"),children:f.jsxs("div",{className:"flex items-center gap-1",children:["Page Name",(i==null?void 0:i.key)==="pageName"&&f.jsx("span",{className:"text-blue-400",children:i.direction==="asc"?"↑":"↓"})]})}),f.jsx("th",{className:"p-3 text-right min-w-[100px] text-blue-300 bg-blue-900/10 cursor-pointer hover:bg-blue-900/20 transition-colors",onClick:()=>o&&o("revenue"),children:f.jsxs("div",{className:"flex items-center justify-end gap-1",children:["Total Rev",(i==null?void 0:i.key)==="revenue"&&f.jsx("span",{className:"text-white",children:i.direction==="asc"?"↑":"↓"})]})}),ca.map(c=>f.jsx("th",{className:"p-3 text-right min-w-[80px]",children:c},c))]})}),f.jsx("tbody",{className:"divide-y divide-white/5 text-xs",children:t.map((c,p)=>f.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[f.jsx("td",{className:"p-3 sticky left-0 z-20 bg-gray-900 border-r border-white/10 shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)]",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-7 h-7 rounded-lg bg-gray-800 border border-white/10 overflow-hidden flex-shrink-0",onClick:m=>{m.stopPropagation(),e(st(c.logoUrl))},children:f.jsx("img",{src:st(c.logoUrl),className:"w-full h-full object-cover",alt:""})}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("div",{className:"font-black text-white truncate max-w-[120px] leading-tight",onClick:()=>n("page",c.pageName),children:c.pageName}),f.jsx("div",{className:"text-[9px] text-gray-500 font-bold uppercase truncate max-w-[120px]",onClick:()=>n("team",c.teamName),children:c.teamName})]})]})}),f.jsxs("td",{className:"p-3 text-right font-black text-blue-400 bg-blue-900/5",children:["$",c.revenue.toLocaleString()]}),ca.map((m,y)=>{const v=c[`rev_${m}`]||0;return f.jsx("td",{className:`p-3 text-right font-mono ${v>0?"text-gray-300 font-bold":"text-gray-700"}`,onClick:()=>r&&r(c.pageName,y),children:v>0?v.toLocaleString():"-"},m)})]},c.pageName))})]})})}),f.jsx("style",{children:`
                .hide-scrollbar::-webkit-scrollbar { display: none; }
                .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `})]})},Ny=({product:t,isOpen:e,onClose:n,onConfirm:r,showTagEditor:i=!0})=>{const{refreshData:o}=ve.useContext(mo),[s,a]=ve.useState(""),[l,c]=ve.useState(window.innerWidth<768),[p,m]=ve.useState(!1),[y,v]=ve.useState(!1),[N,A]=ve.useState(!1),[S,w]=ve.useState(null),_=ve.useRef(null);ve.useEffect(()=>{const E=()=>c(window.innerWidth<768);return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),ve.useEffect(()=>{t&&e&&(a(t.Tags||""),w(t.ImageURL),v(!1))},[t,e]);const C=ve.useMemo(()=>{if(!t)return!1;const E=S||t.ImageURL;return E&&!E.includes("placehold.co")&&!E.includes("text=N/A")},[t,S]),F=E=>{if(E.key==="Enter"){E.preventDefault();const L=s.trim();L&&!L.endsWith(",")&&a(L+", ")}},D=async()=>{if(t){A(!0);try{const E=s.split(",").map(L=>L.trim()).filter(L=>L!=="").join(", ");if(E!==(t.Tags||"")){if(!(await fetch(`${ni}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:t.ProductName},newData:{Tags:E}})})).ok)throw new Error("Failed to update product tags");await o(),r(t.ProductName,E)}else r(t.ProductName,E)}catch(E){console.error(E),alert(`Save failed: ${E.message}`),r(t.ProductName,s)}finally{A(!1)}}},M=async E=>{var z;const L=(z=E.target.files)==null?void 0:z[0];if(!(!L||!t)){m(!0),v(!1);try{const H=await Yh(L,.7,1024),I=await $h(H),k=await fetch(`${ni}/api/upload-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileData:I,fileName:L.name,mimeType:H.type})}),B=await k.json();if(!k.ok||B.status!=="success")throw new Error(B.message);const J=B.url;await fetch(`${ni}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:t.ProductName},newData:{ImageURL:J}})}),w(J),v(!0),setTimeout(()=>v(!1),2500),await o()}catch(H){alert(`Update Error: ${H.message}`)}finally{m(!1),_.current&&(_.current.value="")}}};return t?f.jsx(rc,{isOpen:e,onClose:n,maxWidth:l?"max-w-[95vw]":"max-w-4xl",children:f.jsxs("div",{className:`
                bg-[#09090b] border border-white/10 overflow-hidden relative flex flex-col
                ${l?"h-[85vh] rounded-[2rem]":"h-[500px] rounded-[2rem] md:flex-row"}
                shadow-2xl transition-all duration-300
            `,children:[f.jsx("div",{className:`
                    relative group flex items-center justify-center bg-black/20
                    ${l?"h-[40%] w-full border-b border-white/5":"w-[40%] h-full border-r border-white/5"}
                `,children:f.jsxs("div",{className:"relative w-full h-full flex items-center justify-center cursor-pointer p-6",onClick:()=>{var E;return!p&&((E=_.current)==null?void 0:E.click())},children:[C?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:st(S||t.ImageURL),className:`
                                        w-full h-full object-contain relative z-10 transition-all duration-500 rounded-xl
                                        ${p?"opacity-30 grayscale blur-sm":"group-hover:scale-105"}
                                    `,alt:t.ProductName}),!p&&!y&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/40 backdrop-blur-[2px] z-20",children:f.jsxs("div",{className:"bg-white/10 px-3 py-1.5 rounded-full border border-white/20 backdrop-blur-md flex items-center gap-2",children:[f.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),f.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-wider",children:"Change"})]})})]}):f.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 text-gray-600 group-hover:text-blue-400 transition-colors",children:[f.jsx("div",{className:"p-4 rounded-full border-2 border-dashed border-gray-700 group-hover:border-blue-500/50 transition-all",children:f.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Upload Image"})]}),p&&f.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center",children:[f.jsx(Pr,{size:"md"}),f.jsx("span",{className:"text-[9px] font-bold text-gray-400 mt-2 uppercase tracking-wider",children:"Uploading..."})]}),y&&f.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:[f.jsx("div",{className:"w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center shadow-lg mb-2 animate-scale-in",children:f.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),f.jsx("span",{className:"text-[9px] font-bold text-emerald-400 uppercase tracking-widest",children:"Success"})]})]})}),f.jsxs("div",{className:`
                    flex flex-col p-6 md:p-10 relative
                    ${l?"h-[60%] justify-between":"w-[60%] h-full justify-center gap-8"}
                `,children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("span",{className:"px-2 py-1 bg-white/5 rounded text-[10px] font-mono text-gray-400 border border-white/5",children:["#",t.Barcode||"NO-CODE"]}),f.jsxs("span",{className:"px-2 py-1 bg-emerald-500/10 text-emerald-400 rounded text-[10px] font-bold border border-emerald-500/20",children:["$",t.Price.toFixed(2)]})]}),f.jsx("h2",{className:`font-black text-white leading-tight ${l?"text-2xl line-clamp-2":"text-4xl line-clamp-3"}`,children:t.ProductName}),i&&f.jsxs("div",{className:"space-y-2 pt-2",children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:"Operational Tags"}),f.jsxs("div",{className:"relative group",children:[f.jsx("input",{type:"text",value:s,onChange:E=>a(E.target.value),onKeyDown:F,className:"w-full bg-transparent border-b border-gray-700 py-2 text-sm font-medium text-gray-200 focus:border-blue-500 outline-none transition-colors placeholder:text-gray-700",placeholder:"Add tags..."}),f.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 text-[9px] font-bold text-gray-600 opacity-0 group-focus-within:opacity-100 transition-opacity",children:"ENTER"})]})]})]}),f.jsxs("div",{className:"flex gap-3 mt-4",children:[f.jsx("button",{onClick:n,className:"px-6 py-4 rounded-xl border border-white/10 text-gray-400 font-bold text-xs uppercase tracking-wider hover:bg-white/5 hover:text-white transition-all active:scale-95",children:"Cancel"}),f.jsxs("button",{onClick:D,disabled:N,className:"flex-1 px-6 py-4 rounded-xl bg-blue-600 text-white font-bold text-xs uppercase tracking-wider hover:bg-blue-500 transition-all active:scale-95 shadow-lg shadow-blue-900/20 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[N?f.jsx(Pr,{size:"sm"}):"Confirm Selection",!N&&f.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:f.jsx("path",{d:"M5 12h14M12 5l7 7-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),f.jsx("input",{type:"file",ref:_,className:"hidden",accept:"image/*",onChange:M}),f.jsx("style",{children:`
                    @keyframes scale-in {
                        0% { transform: scale(0); opacity: 0; }
                        60% { transform: scale(1.1); opacity: 1; }
                        100% { transform: scale(1); }
                    }
                    .animate-scale-in { animation: scale-in 0.3s ease-out forwards; }
                `})]})}):null},Sy=(t,e)=>{if(!e||!t)return f.jsx("span",{children:t});const n=e.split(" ").filter(Boolean).map(i=>i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));if(n.length===0)return f.jsx("span",{children:t});const r=new RegExp(`(${n.join("|")})`,"gi");return f.jsx(f.Fragment,{children:t.split(r).map((i,o)=>r.test(i)&&i.trim()!==""?f.jsx("strong",{className:"text-yellow-300 bg-yellow-900/50 rounded-sm px-0.5",children:i},o):i)})},_y=(t,e)=>{const n=(t.ProductName||"").toLowerCase(),r=(t.Barcode||"").toLowerCase(),i=`${n} ${r}`,o=e.toLowerCase().trim();if(!o)return 1;const s=o.split(" ").filter(Boolean);if(!s.every(c=>i.includes(c)))return 0;let l=10;return s.forEach(c=>{n.includes(c)&&(l+=20),r.includes(c)&&(l+=10)}),n.startsWith(o)&&(l+=500),l},Ay=({products:t,selectedProductName:e,onSelect:n,showTagEditor:r=!0})=>{const[i,o]=ve.useState(!1),[s,a]=ve.useState(""),[l,c]=ve.useState(0),[p,m]=ve.useState(null),y=ve.useRef(null),v=ve.useRef(null);ve.useEffect(()=>{a(e)},[e]),ve.useEffect(()=>{const D=M=>{y.current&&!y.current.contains(M.target)&&(o(!1),a(e))};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[e]);const N=ve.useMemo(()=>{const D=s||"";return D.trim()?t.map(M=>({product:M,score:_y(M,D)})).filter(M=>M.score>0).sort((M,E)=>E.score-M.score||M.product.ProductName.localeCompare(E.product.ProductName)).map(M=>M.product):[]},[t,s]),A=ve.useMemo(()=>{const D=s.trim();return D?!t.some(M=>M.ProductName.trim().toLowerCase()===D.toLowerCase()):!1},[s,t]),S=ve.useMemo(()=>{const D=[...N];return A&&D.unshift({isAddNew:!0,ProductName:s.trim()}),D},[N,A,s]),w=ve.useCallback((D,M)=>{var E;n(D,M),a(D),o(!1),m(null),c(0),(E=v.current)==null||E.blur()},[n]),_=D=>{D.isAddNew?w(D.ProductName):(m(D),o(!1))},C=ve.useCallback(()=>{var D;n("",""),a(""),o(!0),c(0),(D=v.current)==null||D.focus()},[n]),F=D=>{var E;const M=S.length;if(M!==0)switch(D.key){case"ArrowDown":D.preventDefault(),i||o(!0),c(L=>(L+1)%M);break;case"ArrowUp":D.preventDefault(),i||o(!0),c(L=>(L-1+M)%M);break;case"Enter":if(D.preventDefault(),!i)return;l>-1&&S[l]&&_(S[l]);break;case"Escape":o(!1),a(e),(E=v.current)==null||E.blur();break}};return f.jsxs("div",{className:"relative",ref:y,children:[f.jsxs("div",{className:"relative group",children:[f.jsx("input",{ref:v,type:"text",className:"form-input !pr-16 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:"ស្វែងរកផលិតផល...",value:s,onChange:D=>{a(D.target.value),o(!0),c(0)},onFocus:()=>o(!0),onKeyDown:F}),f.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[s&&f.jsx("button",{type:"button",onClick:C,className:"text-gray-500 hover:text-white text-2xl",children:"×"}),f.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),i&&f.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden animate-fade-in-down max-h-80 overflow-y-auto custom-scrollbar",children:f.jsx("ul",{className:"p-2 space-y-1",children:S.length===0?f.jsx("li",{className:"p-4 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"រកមិនឃើញផលិតផលទេ"}):S.map((D,M)=>{if("isAddNew"in D&&D.isAddNew)return f.jsxs("li",{className:`p-3.5 rounded-2xl cursor-pointer flex items-center gap-4 transition-all ${l===M?"bg-blue-600 text-white":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>_(D),children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center border border-blue-500/30",children:f.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"})})}),f.jsx("div",{className:"min-w-0",children:f.jsxs("p",{className:"font-black text-sm leading-tight",children:["បន្ថែមថ្មី៖ ",f.jsxs("span",{className:"text-yellow-400",children:['"',D.ProductName,'"']})]})})]},"add-new");const E=D;return f.jsxs("li",{className:`p-2.5 rounded-2xl cursor-pointer flex items-center gap-3 transition-all ${l===M?"bg-blue-600 text-white shadow-lg":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>_(E),children:[f.jsx("img",{src:st(E.ImageURL),className:"w-12 h-12 rounded-xl object-cover border border-white/10",alt:""}),f.jsxs("div",{className:"min-w-0 flex-grow",children:[f.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:Sy(E.ProductName,s)}),f.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:f.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-md border border-blue-500/10",children:["$",E.Price.toFixed(2)]})})]})]},E.ProductName)})})}),f.jsx(Ny,{product:p,isOpen:!!p,onClose:()=>m(null),onConfirm:w,showTagEditor:r})]})},Cy=t=>{if(!t)return"";const e=t.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(e){const i=e[1],o=e[2].padStart(2,"0"),s=e[3].padStart(2,"0"),a=e[4].padStart(2,"0"),l=e[5].padStart(2,"0");return`${i}-${o}-${s}T${a}:${l}`}const n=new Date(t);if(isNaN(n.getTime()))return"";const r=i=>i.toString().padStart(2,"0");return`${n.getFullYear()}-${r(n.getMonth()+1)}-${r(n.getDate())}T${r(n.getHours())}:${r(n.getMinutes())}`},ao=(t,e)=>{const n=t.reduce((s,a)=>s+(a.total||0),0),r=n+e,i=t.reduce((s,a)=>s+(a.cost||0)*(a.quantity||0),0),o=t.reduce((s,a)=>s+(a.originalPrice-a.finalPrice)*a.quantity,0);return{Subtotal:n,"Grand Total":r,"Total Product Cost ($)":i,"Discount ($)":o}},Ty=(t,e)=>{var l,c;const n=[];["Customer Name","Customer Phone","Location","Address Details","Grand Total","Payment Status","Internal Shipping Method","Internal Shipping Details","Internal Cost","Discount ($)","Shipping Fee (Customer)","Fulfillment Store"].forEach(p=>{const m=t[p],y=e[p],v=m==null?"":String(m),N=y==null?"":String(y);v!=N&&n.push({field:p,oldValue:v,newValue:N})});const i=JSON.stringify(t.Products||[]),o=JSON.stringify(e.Products||[]);i!==o&&n.push({field:"Products List",oldValue:`${((l=t.Products)==null?void 0:l.length)||0} items`,newValue:`${((c=e.Products)==null?void 0:c.length)||0} items`});const s=t.Note||"",a=e.Note||"";return s!==a&&n.push({field:"Note",oldValue:s,newValue:a}),n},Wd=async(t,e,n)=>{try{await fetch(`${ni}/api/logging/activity`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,action:e,details:n,timestamp:new Date().toISOString(),User:t,Action:e,Details:n})})}catch{}},ky=async(t,e,n,r,i)=>{if(n)try{const o={orderId:t,user:e,field:n,oldValue:r,newValue:i,timestamp:new Date().toISOString(),OrderID:t,Requester:e,"Field Changed":n,"Old Value":r,"New Value":i,OldValue:r,NewValue:i};await fetch(`${ni}/api/logging/edit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}catch(o){console.warn("[Audit] Failed to log edit:",o)}},Iy=({provinces:t,selectedProvince:e,onSelect:n})=>{const[r,i]=ve.useState(!1),[o,s]=ve.useState(""),a=ve.useRef(null);ve.useEffect(()=>{s(e)},[e]),ve.useEffect(()=>{const c=p=>{a.current&&!a.current.contains(p.target)&&(i(!1),s(e))};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[e]);const l=ve.useMemo(()=>{const c=t.filter(N=>N.toLowerCase().includes(o.toLowerCase())),p=c.filter(N=>!N.includes("ភ្នំពេញ")&&!N.includes("កណ្ដាល")).sort((N,A)=>N.localeCompare(A,"km")),m=[],y=c.find(N=>N.includes("ភ្នំពេញ")),v=c.find(N=>N.includes("កណ្ដាល"));return y&&m.push(y),v&&m.push(v),[...m,...p]},[t,o]);return f.jsxs("div",{className:"relative w-full",ref:a,children:[f.jsxs("div",{className:"relative group",children:[f.jsx("input",{type:"text",className:"form-input !pl-10 !py-3 rounded-xl border-gray-700 bg-gray-900 focus:border-blue-500/50 transition-all font-bold text-gray-200",placeholder:"ស្វែងរក ខេត្ត/រាជធានី...",value:o,onChange:c=>{s(c.target.value),i(!0)},onFocus:()=>i(!0)}),f.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:f.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),r&&f.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800 border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-down max-h-60 overflow-y-auto custom-scrollbar",children:l.length>0?l.map((c,p)=>f.jsx("button",{type:"button",onClick:()=>{n(c),s(c),i(!1)},className:`w-full text-left px-4 py-3 text-sm font-bold transition-colors border-b border-white/5 last:border-0 ${e===c?"bg-blue-600 text-white":"text-gray-300 hover:bg-white/5"}`,children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{children:c}),p<2&&o===""&&f.jsx("span",{className:"text-[8px] bg-white/10 px-1.5 py-0.5 rounded uppercase tracking-widest opacity-50",children:"Priority"})]})},c)):f.jsx("div",{className:"p-4 text-center text-xs text-gray-500",children:"រកមិនឃើញខេត្តនេះទេ"})})]})},Ey=({methods:t,selectedMethodName:e,onSelect:n})=>f.jsxs("div",{className:"w-full",children:[f.jsx("style",{children:`
                @keyframes spin-border {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }
                .card-flux {
                    position: relative;
                    background: #0f172a; /* Slate 900 */
                    border-radius: 1rem;
                    z-index: 1;
                }
                /* The spinning border effect */
                .card-flux-active::after, .card-flux-active::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    background: conic-gradient(from var(--angle), transparent 70%, #3b82f6, #8b5cf6, #ec4899, #3b82f6);
                    border-radius: inherit;
                    animation: spin-border 3s linear infinite;
                }
                .card-flux-active::before {
                    filter: blur(10px);
                    opacity: 0.7;
                }
                
                @keyframes float-y {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-5px); }
                }
                .animate-float-y {
                    animation: float-y 3s ease-in-out infinite;
                }
                
                @keyframes pulse-soft {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.6; }
                }
                .animate-pulse-soft {
                    animation: pulse-soft 2s ease-in-out infinite;
                }
            `}),f.jsx("div",{className:"grid grid-cols-2 gap-4 max-h-80 overflow-y-auto custom-scrollbar px-2 pb-2 pt-2",children:t.map(r=>{const i=e===r.MethodName;return f.jsx("button",{type:"button",onClick:()=>n(r),className:`
                                relative group rounded-2xl transition-all duration-300 min-h-[140px] flex flex-col
                                ${i?"card-flux card-flux-active scale-[1.02]":"bg-gray-900 border border-gray-800 hover:bg-gray-800"}
                            `,children:f.jsxs("div",{className:`
                                w-full h-full rounded-2xl flex flex-col items-center justify-center p-4 relative overflow-hidden
                                ${i?"bg-[#0f172a]":"bg-transparent"}
                            `,children:[i&&f.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-blue-500/10 via-purple-500/5 to-transparent pointer-events-none"}),f.jsx("div",{className:"absolute top-3 right-3 flex gap-1",children:i&&f.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[f.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),f.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-blue-500"})]})}),f.jsx("div",{className:`
                                    relative z-10 w-14 h-14 mb-3 transition-all duration-300
                                    ${i?"animate-float-y drop-shadow-[0_0_15px_rgba(59,130,246,0.5)]":"opacity-80 group-hover:opacity-100"}
                                `,children:f.jsx("img",{src:st(r.LogosURL),className:"w-full h-full object-contain",alt:r.MethodName})}),f.jsxs("div",{className:"relative z-10 text-center w-full",children:[f.jsx("p",{className:`
                                        text-xs font-black uppercase tracking-widest transition-all
                                        ${i?"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-pink-400 animate-pulse-soft":"text-gray-400 group-hover:text-gray-200"}
                                    `,children:r.MethodName}),r.RequireDriverSelection&&f.jsxs("div",{className:`
                                            mt-2 inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-[8px] font-bold uppercase tracking-wider
                                            ${i?"bg-purple-900/30 text-purple-300 border border-purple-500/30":"bg-gray-800 text-gray-500"}
                                        `,children:[f.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Driver Req"]})]})]})},r.MethodName)})}),t.length===0&&f.jsx("div",{className:"p-8 text-center border border-dashed border-gray-700 rounded-2xl bg-gray-900/50",children:f.jsx("p",{className:"text-xs text-gray-500 font-black uppercase tracking-widest animate-pulse",children:"No Signal"})})]}),Py=({drivers:t,selectedDriverName:e,onSelect:n})=>{const r=ve.useRef(null),i=ve.useRef(null);ve.useEffect(()=>{r.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"),i.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2570/2570-preview.mp3"),r.current&&(r.current.volume=.15),i.current&&(i.current.volume=.4)},[]);const o=()=>{r.current&&(r.current.currentTime=0,r.current.play().catch(()=>{}))},s=a=>{e!==a&&(i.current&&(i.current.currentTime=0,i.current.play().catch(()=>{})),n(a))};return f.jsxs("div",{className:"w-full py-4",children:[f.jsx("style",{children:`
                /* CSS Variable for Rotation */
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }

                /* Flux Animation Keyframes */
                @keyframes spin-flux {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }

                /* Base Card Style */
                .flux-card {
                    position: relative;
                    background: #0f172a; /* Slate 900 */
                    border-radius: 1rem;
                    z-index: 1;
                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
                }

                /* Electric Flux Effect (Active State) */
                .flux-card.selected::after, .flux-card.selected::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    /* Electric Gradient Colors: Cyan -> Blue -> Purple -> Cyan */
                    background: conic-gradient(from var(--angle), transparent 60%, #22d3ee, #3b82f6, #a855f7, #22d3ee);
                    border-radius: inherit;
                    animation: spin-flux 2s linear infinite;
                }

                /* Outer Glow (Blur) */
                .flux-card.selected::before {
                    filter: blur(10px);
                    opacity: 0.7;
                }

                /* Floating Text Animation */
                @keyframes float-text {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-2px); }
                }
                .animate-float-text {
                    animation: float-text 3s ease-in-out infinite;
                }
            `}),t.length===0?f.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-gray-800 rounded-2xl bg-gray-900/30",children:[f.jsx("div",{className:"w-10 h-10 border-2 border-gray-700 border-t-cyan-500 rounded-full animate-spin mb-3"}),f.jsx("p",{className:"text-gray-500 font-black uppercase tracking-[0.2em] text-[10px]",children:"NO DRIVERS DETECTED"})]}):f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5 p-2",children:t.map(a=>f.jsx(Ly,{driver:a,isSelected:e===a.DriverName,onSelect:()=>s(a.DriverName),onHover:o},a.DriverName))})]})},Ly=({driver:t,isSelected:e,onSelect:n,onHover:r})=>f.jsxs("div",{onClick:n,onMouseEnter:r,className:`
                flux-card relative h-48 cursor-pointer transition-all duration-300 group overflow-visible
                flex flex-col items-center justify-end pb-3
                ${e?"selected scale-[1.03]":"border border-white/5 hover:border-blue-500/30 grayscale opacity-70 hover:opacity-100 hover:grayscale-0"}
            `,children:[f.jsxs("div",{className:"absolute inset-0 rounded-2xl overflow-hidden bg-gray-900",children:[f.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(#3b82f6 1px, transparent 1px)",backgroundSize:"10px 10px"}}),e&&f.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/2 bg-gradient-to-t from-blue-900/40 to-transparent"})]}),f.jsx("div",{className:`
                absolute inset-x-0 transition-all duration-500 z-10 flex justify-center
                ${e?"top-3 bottom-12":"top-4 bottom-10"}
            `,children:f.jsx("div",{className:`
                    relative w-full h-full max-w-[85%] rounded-xl overflow-hidden transition-all duration-500
                    ${e?"shadow-[0_0_20px_rgba(59,130,246,0.4)] ring-1 ring-blue-400/30":"shadow-none"}
                `,children:f.jsx("img",{src:st(t.ImageURL),className:"w-full h-full object-cover object-top",alt:t.DriverName})})}),f.jsxs("div",{className:"relative z-20 w-full px-2 text-center",children:[f.jsx("div",{className:`
                    transition-all duration-300 transform
                    ${e?"translate-y-0 animate-float-text":"translate-y-1"}
                `,children:f.jsx("h3",{className:`
                        text-[11px] font-black uppercase tracking-widest leading-tight
                        ${e?"text-white drop-shadow-[0_0_5px_rgba(34,211,238,0.8)]":"text-gray-400"}
                    `,children:t.DriverName})}),f.jsxs("div",{className:`
                    mt-2 flex items-center justify-center gap-1.5 transition-all duration-300
                    ${e?"opacity-100":"opacity-0 scale-0"}
                `,children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse shadow-[0_0_5px_#22d3ee]"}),f.jsx("span",{className:"text-[7px] font-bold text-cyan-300 uppercase tracking-[0.2em] border border-cyan-500/30 px-1.5 py-0.5 rounded bg-cyan-950/50",children:"ONLINE"})]})]})]}),Ry=({formData:t,appData:e,onChange:n,onProvinceSelect:r,onDistrictChange:i,onSangkatChange:o,onShippingMethodSelect:s,onDriverSelect:a,onBankChange:l,selectedDistrict:c,selectedSangkat:p,bankLogo:m})=>{var C,F,D;const[y,v]=ve.useState(!1),N=[...new Set(e.locations.map(M=>M.Province))],A=[...new Set(e.locations.filter(M=>M.Province===t.Location).map(M=>M.District))].sort(),S=[...new Set(e.locations.filter(M=>M.Province===t.Location&&M.District===c).map(M=>M.Sangkat))].sort(),w=(C=e.shippingMethods)==null?void 0:C.find(M=>M.MethodName===t["Internal Shipping Method"]),_=(F=e.drivers)==null?void 0:F.find(M=>M.DriverName===t["Internal Shipping Details"]);return f.jsxs("div",{className:"flex flex-col gap-4 h-full overflow-y-auto custom-scrollbar pr-2 pb-20 lg:pb-2",children:[f.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg relative overflow-hidden flex-shrink-0",children:[f.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:f.jsx("svg",{className:"w-24 h-24 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),f.jsxs("h3",{className:"text-xs font-black text-blue-400 uppercase tracking-[0.25em] mb-4 relative z-10 flex items-center gap-2",children:[f.jsx("span",{className:"w-1.5 h-4 bg-blue-500 rounded-full"}),"ព័ត៌មានអតិថិជន"]}),f.jsxs("div",{className:"space-y-3 relative z-10",children:[f.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[f.jsx("input",{type:"text",name:"Customer Name",value:t["Customer Name"]||"",onChange:n,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl font-bold text-sm text-white placeholder-gray-600 focus:border-blue-500",placeholder:"ឈ្មោះអតិថិជន",required:!0}),f.jsx("input",{type:"tel",name:"Customer Phone",value:t["Customer Phone"]||"",onChange:n,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl font-mono font-black text-sm text-blue-300 placeholder-gray-600 focus:border-blue-500",placeholder:"លេខទូរស័ព្ទ",required:!0})]}),f.jsxs("div",{className:"space-y-3 pt-2",children:[f.jsx(Iy,{provinces:N,selectedProvince:t.Location||"",onSelect:r}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("select",{value:c,onChange:M=>i(M.target.value),className:"form-select bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-gray-300 h-12",disabled:!t.Location,children:[f.jsx("option",{value:"",children:"ស្រុក/ខណ្ឌ"}),A.map(M=>f.jsx("option",{value:M,children:M},M))]}),f.jsxs("select",{value:p,onChange:M=>o(M.target.value),className:"form-select bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-gray-300 h-12",disabled:!c,children:[f.jsx("option",{value:"",children:"ឃុំ/សង្កាត់"}),S.map(M=>f.jsx("option",{value:M,children:M},M))]})]}),f.jsx("input",{type:"text",name:"Address Details",value:t["Address Details"]||"",onChange:n,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-white placeholder-gray-600 focus:border-blue-500",placeholder:"ផ្ទះលេខ, ផ្លូវ..."})]})]})]}),f.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg relative overflow-hidden flex-shrink-0",children:[f.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:f.jsx("svg",{className:"w-24 h-24 text-orange-500",fill:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"})})}),f.jsxs("h3",{className:"text-xs font-black text-orange-400 uppercase tracking-[0.25em] mb-4 relative z-10 flex items-center gap-2",children:[f.jsx("span",{className:"w-1.5 h-4 bg-orange-500 rounded-full"}),"ដឹកជញ្ជូន & ទូទាត់"]}),f.jsxs("div",{className:"space-y-4 relative z-10",children:[f.jsx(Ey,{methods:e.shippingMethods||[],selectedMethodName:t["Internal Shipping Method"]||"",onSelect:s}),(w==null?void 0:w.RequireDriverSelection)&&f.jsxs("div",{className:"space-y-3 pt-2 border-t border-white/5 animate-fade-in",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("label",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"ជ្រើសរើសអ្នកដឹក"}),!t["Internal Shipping Details"]&&f.jsx("span",{className:"text-[9px] text-red-400 font-bold animate-pulse",children:"* Required"})]}),f.jsx("div",{onClick:()=>v(!0),className:`
                                    relative p-3 rounded-2xl border transition-all cursor-pointer group flex items-center gap-4 shadow-lg
                                    ${_?"bg-gradient-to-r from-gray-800 to-gray-900 border-blue-500/30 hover:border-blue-500/50":"bg-red-500/5 border-red-500/20 hover:bg-red-500/10 border-dashed"}
                                `,children:_?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:st(_.ImageURL),alt:_.DriverName,className:"w-12 h-12 rounded-xl object-cover border border-white/10 shadow-sm"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-white font-black text-sm truncate",children:_.DriverName}),f.jsx("p",{className:"text-[9px] text-blue-400 font-bold uppercase tracking-wider mt-0.5",children:"Driver Selected"})]}),f.jsx("div",{className:"bg-black/40 p-2.5 rounded-xl border border-white/10 group-hover:bg-blue-600 group-hover:text-white group-hover:border-blue-500 transition-colors text-gray-500 shadow-inner",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})})]}):f.jsxs("div",{className:"w-full py-2 flex items-center justify-center gap-3 text-gray-500 group-hover:text-red-400 transition-colors",children:[f.jsx("span",{className:"bg-gray-800 p-2 rounded-full border border-gray-700 group-hover:border-red-500/50 transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),f.jsx("span",{className:"font-bold text-xs uppercase tracking-wider",children:"Tap to Select Driver"})]})})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[f.jsxs("div",{className:"relative group",children:[f.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase absolute -top-2 left-2 bg-[#161f32] px-1 group-focus-within:text-orange-400 transition-colors",children:"Cost ($)"}),f.jsx("input",{type:"text",inputMode:"decimal",name:"Internal Cost",value:t["Internal Cost"],onChange:n,className:"form-input !py-2.5 !px-3 bg-gray-900/80 border-gray-700 rounded-xl font-black text-orange-400 text-sm text-center focus:border-orange-500"})]}),f.jsxs("div",{className:"relative group",children:[f.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase absolute -top-2 left-2 bg-[#161f32] px-1 group-focus-within:text-white transition-colors",children:"Status"}),f.jsxs("select",{name:"Payment Status",value:t["Payment Status"],onChange:n,className:`form-select !py-2.5 !px-2 rounded-xl font-black text-xs uppercase border-none w-full ${t["Payment Status"]==="Paid"?"bg-emerald-600 text-white shadow-lg shadow-emerald-900/50":"bg-red-900/40 text-red-400 border border-red-500/20"}`,children:[f.jsx("option",{value:"Unpaid",children:"Unpaid"}),f.jsx("option",{value:"Paid",children:"Paid"})]})]})]}),t["Payment Status"]==="Paid"&&f.jsxs("div",{className:"flex items-center gap-3 animate-fade-in bg-black/30 p-2 rounded-2xl border border-white/5",children:[f.jsxs("select",{value:t["Payment Info"],onChange:l,className:"form-select bg-transparent border-none text-xs font-bold flex-grow text-white focus:ring-0",children:[f.jsx("option",{value:"",children:"Select Bank..."}),(D=e.bankAccounts)==null?void 0:D.map(M=>f.jsx("option",{value:M.BankName,children:M.BankName},M.BankName))]}),m&&f.jsx("img",{src:m,className:"w-10 h-10 object-contain bg-white/10 p-1 rounded-xl border border-white/10",alt:""})]})]})]}),f.jsx("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg mt-auto flex-shrink-0",children:f.jsx("textarea",{name:"Note",value:t.Note||"",onChange:n,rows:3,className:"form-textarea bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold w-full resize-none text-gray-300 placeholder-gray-600 focus:border-blue-500",placeholder:"ចំណាំ..."})}),y&&f.jsx(rc,{isOpen:!0,onClose:()=>v(!1),maxWidth:"max-w-3xl",children:f.jsxs("div",{className:"p-6 sm:p-8 bg-[#0f172a] rounded-[2.5rem] border border-white/10",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("h3",{className:"text-xl sm:text-2xl font-black text-white uppercase tracking-tighter flex items-center gap-3",children:[f.jsx("span",{className:"w-2 h-8 bg-blue-600 rounded-full"}),"Select Driver"]}),f.jsx("button",{onClick:()=>v(!1),className:"w-10 h-10 rounded-2xl bg-gray-800 text-gray-400 hover:text-white flex items-center justify-center transition-all hover:bg-gray-700 active:scale-90",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar pr-2 bg-black/20 rounded-3xl p-2 border border-white/5",children:f.jsx(Py,{drivers:e.drivers||[],selectedDriverName:t["Internal Shipping Details"]||"",onSelect:M=>{a(M),v(!1)}})})]})})]})},My=({value:t,onChange:e,label:n="ចំនួន*",min:r=1,max:i=99})=>{var A;const o=ve.useRef(null),[s,a]=ve.useState(!1),l=()=>{const S=Math.min(i,t+1);e(S)},c=()=>{const S=Math.max(r,t-1);e(S)},p=S=>{const w=S.target.value;if(w===""){a(!0);return}const _=parseInt(w,10);isNaN(_)||(_<r||_>i?a(!0):(e(_),a(!1)))},m=()=>{if(s){const S=o.current;if(S&&S.value){let w=parseInt(S.value,10);isNaN(w)||w<r?w=r:w>i&&(w=i),e(w)}else e(r);a(!1)}},y=S=>{var w;S.key==="Enter"?(S.preventDefault(),m(),(w=o.current)==null||w.blur()):S.key==="ArrowUp"?(S.preventDefault(),l()):S.key==="ArrowDown"&&(S.preventDefault(),c())},v=()=>{a(!0)},N=s?((A=o.current)==null?void 0:A.value)||"":t;return f.jsxs("div",{className:"space-y-1.5 w-full",children:[f.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:n}),f.jsxs("div",{className:"flex items-center bg-black/40 rounded-2xl border border-gray-700 h-12 w-full overflow-hidden focus-within:border-blue-500/50 transition-all focus-within:shadow-[0_0_20px_rgba(59,130,246,0.15)] ring-1 ring-white/5",children:[f.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${t<=r?"text-gray-600 cursor-not-allowed opacity-50":"text-gray-400 hover:text-white hover:bg-white/5 active:scale-90"}
                        transition-all border-r border-gray-700/50
                    `,onClick:c,disabled:t<=r,"aria-label":"ថយចំនួន",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:f.jsx("path",{d:"M20 12H4"})})}),f.jsx("input",{ref:o,type:"number",inputMode:"numeric",value:N,onChange:p,onBlur:m,onFocus:v,onKeyDown:y,min:r,max:i,step:"1",className:"flex-1 h-full bg-transparent text-center text-white font-black text-base outline-none border-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:r.toString(),"aria-label":"ចំនួន"}),f.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${t>=i?"text-gray-600 cursor-not-allowed opacity-50":"text-blue-400 hover:text-white hover:bg-blue-600/10 active:scale-90"}
                        transition-all border-l border-gray-700/50
                    `,onClick:l,disabled:t>=i,"aria-label":"បន្ថែមចំនួន",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:f.jsx("path",{d:"M12 4v16m8-8H4"})})})]}),f.jsxs("div",{className:"text-xs text-gray-500 px-1 flex justify-between",children:[f.jsxs("span",{children:["អប្បបរមា: ",r]}),f.jsxs("span",{children:["អតិបរមា: ",i]})]})]})},Dy=({products:t,masterProducts:e,onProductChange:n,onAddProduct:r,onRemoveProduct:i,onPreviewImage:o,onScanBarcode:s})=>f.jsxs("div",{className:"flex-1 bg-gray-800/30 border border-white/5 rounded-[2rem] p-4 lg:p-6 overflow-y-auto custom-scrollbar flex flex-col relative shadow-inner",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 z-20 bg-[#121a2b]/95 backdrop-blur-md p-3 -mx-2 -mt-2 rounded-2xl border border-white/5 shadow-lg",children:[f.jsxs("h3",{className:"text-xs font-black text-white uppercase tracking-widest pl-2 flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Items List (",t.length,")"]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{type:"button",onClick:s,className:"px-4 py-2.5 bg-blue-600/10 border border-blue-500/30 text-blue-400 rounded-xl shadow-lg hover:bg-blue-600 hover:text-white transition-all active:scale-95 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"Scan"]}),f.jsxs("button",{type:"button",onClick:r,className:"px-5 py-2.5 bg-blue-600 text-white rounded-xl shadow-lg shadow-blue-600/30 text-[10px] font-black uppercase hover:bg-blue-500 transition-all active:scale-95 flex items-center gap-2",children:[f.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:f.jsx("path",{d:"M12 4v16m8-8H4"})})," Add"]})]})]}),f.jsx("div",{className:"space-y-4 pb-4",children:t.map((a,l)=>f.jsxs("div",{className:"group relative bg-[#0f1523] rounded-[1.5rem] p-4 border border-white/5 hover:border-blue-500/30 transition-all flex flex-col sm:flex-row gap-5 items-start shadow-md hover:shadow-xl",children:[f.jsx("button",{type:"button",onClick:()=>i(l),className:"absolute top-3 right-3 text-gray-600 hover:text-red-500 hover:bg-red-500/10 rounded-full w-8 h-8 flex items-center justify-center transition-all opacity-0 group-hover:opacity-100 focus:opacity-100",children:"×"}),f.jsx("div",{className:"w-20 h-20 bg-gray-900 rounded-2xl border border-white/10 overflow-hidden flex-shrink-0 cursor-pointer shadow-lg group-hover:scale-105 transition-transform",onClick:()=>a.image&&o(st(a.image)),children:f.jsx("img",{src:st(a.image),className:"w-full h-full object-cover",alt:""})}),f.jsxs("div",{className:"flex-1 w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-4 items-center",children:[f.jsxs("div",{className:"lg:col-span-6 space-y-3",children:[f.jsx(Ay,{products:e,selectedProductName:a.name,onSelect:(c,p)=>n(l,"name",c,p)}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:a.colorInfo,onChange:c=>n(l,"colorInfo",c.target.value),className:"bg-gray-800/50 border-none rounded-lg py-1.5 px-3 text-[10px] font-bold text-white w-full focus:ring-1 focus:ring-blue-500 placeholder-gray-600",placeholder:"Color/Size..."}),f.jsx("input",{type:"text",value:a.tags||"",onChange:c=>n(l,"tags",c.target.value),className:"bg-gray-800/50 border-none rounded-lg py-1.5 px-3 text-[10px] font-bold text-blue-300 w-full focus:ring-1 focus:ring-blue-500 placeholder-gray-600",placeholder:"Tags..."})]})]}),f.jsx("div",{className:"lg:col-span-3 flex justify-center",children:f.jsx("div",{className:"w-32",children:f.jsx(My,{value:Number(a.quantity)||1,onChange:c=>n(l,"quantity",c),label:""})})}),f.jsxs("div",{className:"lg:col-span-3 flex flex-row lg:flex-col justify-between items-center lg:items-end gap-2 h-full",children:[f.jsxs("div",{className:"relative group/price",children:[f.jsx("label",{className:"absolute -top-3 right-0 text-[8px] font-black text-gray-500 uppercase opacity-0 group-hover/price:opacity-100 transition-opacity",children:"Unit Price"}),f.jsx("input",{type:"text",inputMode:"decimal",value:a.finalPrice,onChange:c=>n(l,"finalPrice",c.target.value),className:"w-24 bg-transparent border-b border-gray-700 py-1 font-black text-right text-emerald-400 focus:border-emerald-500 outline-none text-sm transition-all"})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-[9px] text-gray-500 uppercase font-black tracking-wider",children:"Total"}),f.jsxs("p",{className:"text-lg font-black text-white tracking-tight",children:["$",(Number(a.total)||0).toFixed(2)]})]})]})]})]},a.id||l))})]}),Fy=({subtotal:t,grandTotal:e,shippingFee:n,onShippingFeeChange:r,onSave:i,onDelete:o,loading:s})=>f.jsxs("div",{className:"flex-shrink-0 bg-[#0f1523]/80 backdrop-blur-xl border border-white/5 rounded-[2.5rem] p-5 lg:p-6 flex flex-col lg:flex-row gap-6 items-center justify-between shadow-[0_-10px_40px_rgba(0,0,0,0.3)] relative z-30",children:[f.jsxs("div",{className:"flex flex-wrap gap-8 items-center justify-center lg:justify-start w-full lg:w-auto",children:[f.jsxs("div",{className:"text-center lg:text-left",children:[f.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1",children:"Subtotal"}),f.jsxs("p",{className:"text-xl font-bold text-gray-300",children:["$",t.toFixed(2)]})]}),f.jsx("div",{className:"w-px h-10 bg-white/10 hidden lg:block"}),f.jsxs("div",{className:"text-center lg:text-left relative group",children:[f.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1 group-focus-within:text-blue-400 transition-colors",children:"Shipping Fee"}),f.jsxs("div",{className:"relative inline-flex items-center",children:[f.jsx("input",{type:"text",inputMode:"decimal",name:"Shipping Fee (Customer)",value:n,onChange:r,className:"w-20 bg-transparent border-b-2 border-gray-600 text-center font-black text-xl text-white outline-none focus:border-blue-500 transition-all py-0.5"}),f.jsx("span",{className:"text-gray-500 font-black ml-1 text-sm",children:"$"})]})]}),f.jsx("div",{className:"w-px h-10 bg-white/10 hidden lg:block"}),f.jsxs("div",{className:"text-center lg:text-left",children:[f.jsx("p",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-[0.2em] mb-1",children:"Grand Total"}),f.jsxs("p",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-emerald-200 tracking-tighter drop-shadow-md",children:["$",e.toFixed(2)]})]})]}),f.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 w-full lg:w-auto items-center",children:[f.jsxs("button",{type:"button",onClick:o,disabled:s,className:"w-full lg:w-auto px-8 py-5 bg-red-500/10 hover:bg-red-600 text-red-500 hover:text-white rounded-[1.5rem] font-black uppercase text-xs tracking-[0.2em] transition-all flex items-center justify-center gap-3 border border-red-500/20 active:scale-95 group order-last lg:order-first",children:[f.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:rotate-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",strokeWidth:"2.5"})}),"Delete"]}),f.jsx("button",{onClick:i,disabled:s,className:"w-full lg:w-auto px-12 py-5 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white rounded-[1.5rem] font-black uppercase text-xs tracking-[0.2em] shadow-[0_10px_30px_rgba(37,99,235,0.4)] transform active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50 disabled:cursor-not-allowed group border border-white/10",children:s?f.jsx(Pr,{size:"sm"}):f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"relative z-10",children:"Save Changes"}),f.jsx("div",{className:"w-8 h-8 bg-white/10 rounded-full flex items-center justify-center group-hover:bg-white/20 transition-colors",children:f.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]})})]})]}),Ti=()=>{if(typeof window>"u"||typeof navigator>"u")return!1;const t=navigator.userAgent||navigator.vendor||window.opera;return!!(/iPad|iPhone|iPod/.test(t)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)};let es=null,ua=null;const jy=t=>{if(!t||t.videoWidth===0)return null;const e=80,n=80;if(es||(es=document.createElement("canvas"),es.width=e,es.height=n,ua=es.getContext("2d",{willReadFrequently:!0})),!ua)return null;ua.drawImage(t,0,0,e,n);const i=ua.getImageData(0,0,e,n).data,o=new Float32Array(n).fill(0),s=new Float32Array(e).fill(0);let a=0;for(let A=1;A<n-1;A++)for(let S=1;S<e-1;S++){const w=(A*e+S)*4,_=(i[w]+i[w+1]+i[w+2])/3,C=(i[w-4]+i[w-3]+i[w-2])/3,F=(i[w-e*4]+i[w-e*4+1]+i[w-e*4+2])/3,D=Math.abs(_-C),M=Math.abs(_-F);let E=D+M>30?D+M:0;o[A]+=E,s[S]+=E,a+=E}if(a<15e3)return null;const l=(A,S)=>{const w=new Float32Array(S);for(let E=2;E<S-2;E++)w[E]=(A[E-2]+A[E-1]+A[E]+A[E+1]+A[E+2])/5;let _=0,C=S/2;for(let E=0;E<S;E++)w[E]>_&&(_=w[E],C=E);const F=_*.25;let D=C,M=C;for(;D>0&&w[D]>F;)D--;for(;M<S-1&&w[M]>F;)M++;return{min:Math.max(0,D-2),max:Math.min(S,M+2)}},c=l(s,e),p=l(o,n),m=(c.max-c.min)/e*100,y=(p.max-p.min)/n*100,v=(c.min+c.max)/2/e*100,N=(p.min+p.max)/2/n*100;return m>90||y>90||m<5||y<5?null:{x:v,y:N,width:m,height:y,score:Math.min(1,a/2e5)}},Xr=(t,e,n)=>t+(e-t)*n,Uy=(t,e,n,r,i)=>{const[o,s]=ve.useState(null),[a,l]=ve.useState(!1),c=ve.useRef(0),p=ve.useRef(0),m=ve.useRef(0),y=ve.useRef(null),v=ve.useRef(0),N=ve.useRef(!1),A=ve.useRef(!1),S=ve.useRef(null);ve.useEffect(()=>{if("BarcodeDetector"in window&&!Ti())try{console.log("Initializing Native BarcodeDetector..."),S.current=new window.BarcodeDetector({formats:["qr_code","ean_13","code_128","code_39"]})}catch(C){console.warn("Native BarcodeDetector failed to init:",C)}},[]);const w=()=>{v.current=Date.now()+3e3,l(!1)},_=ve.useCallback(async()=>{if(Ti())return;if(!t||t.paused||t.ended){c.current=requestAnimationFrame(_);return}let C=null;if(S.current)if(A.current)y.current;else{A.current=!0;try{const F=await S.current.detect(t);if(F.length>0){const M=F.sort((z,H)=>H.boundingBox.width*H.boundingBox.height-z.boundingBox.width*z.boundingBox.height)[0].boundingBox,E=t.videoWidth,L=t.videoHeight;E>0&&L>0&&(C={x:(M.x+M.width/2)/E*100,y:(M.y+M.height/2)/L*100,width:M.width/E*100,height:M.height/L*100})}}catch{}finally{A.current=!1}}else C=jy(t);if(C){if(m.current=0,y.current?y.current={x:Xr(y.current.x,C.x,.4),y:Xr(y.current.y,C.y,.4),width:Xr(y.current.width,C.width,.4),height:Xr(y.current.height,C.height,.4)}:y.current=C,s(F=>F?{x:Xr(F.x,y.current.x,.25),y:Xr(F.y,y.current.y,.25),width:Xr(F.width,y.current.width,.2),height:Xr(F.height,y.current.height,.2)}:y.current),Date.now()>v.current){const F=C.x>30&&C.x<70&&C.y>30&&C.y<70,D=60,M=C.width<D;if(F&&M?p.current++:p.current=Math.max(0,p.current-1),p.current>3){let E=5;try{const H=e!=null&&e.getCapabilities?e.getCapabilities():{};H.zoom&&H.zoom.max&&(E=H.zoom.max)}catch{}const L=Math.min(E,8),z=D-C.width;if(Math.abs(z)>2&&n<L&&!N.current){l(!0);let I=z*.01*n;I=Math.max(-.2,Math.min(I,.2));const k=Math.min(Math.max(n+I,1),L);Math.abs(k-n)>.02&&(N.current=!0,r(k),i(k).catch(B=>{}).finally(()=>{N.current=!1}))}}}}else m.current++,m.current>10&&(s(null),y.current=null,l(!1),p.current=0);c.current=requestAnimationFrame(_)},[t,n,r,i,e]);return ve.useEffect(()=>(Ti()||(c.current=requestAnimationFrame(_)),()=>{c.current&&cancelAnimationFrame(c.current)}),[_]),{trackingBox:o,isAutoZooming:a,notifyManualZoom:w}},By=(t,e,n)=>{const r=ve.useRef(null),[i,o]=ve.useState(!0),[s,a]=ve.useState(null),[l,c]=ve.useState(1),[p,m]=ve.useState(null),[y,v]=ve.useState(!1),[N,A]=ve.useState(!1),[S,w]=ve.useState("environment"),_=ve.useRef(null),C=ve.useRef(null),F=ve.useRef(new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3")),D=ve.useCallback(()=>{w(j=>j==="environment"?"user":"environment")},[]),M=()=>{var R,W,K;if(C.current&&C.current.readyState==="live")return C.current;if((R=r.current)!=null&&R.html5QrCode){const te=(K=(W=r.current.html5QrCode).getRunningTrackCamera)==null?void 0:K.call(W);if(te)return te}const j=document.querySelector(`#${t} video`);if(j&&j.srcObject){const ae=j.srcObject.getVideoTracks()[0];if(ae)return ae}return null},E=ve.useCallback(async j=>{const R=M();if(!R)return;const W=Ti();try{await R.applyConstraints(j)}catch{if(j.zoom&&W)try{await R.applyConstraints({advanced:[{zoom:j.zoom}]})}catch{}}},[]),L=ve.useCallback(async j=>{if(!M())return;let W=j;p&&(W=Math.max(p.min,Math.min(j,p.max))),c(W),await E({zoom:W})},[p,E]),{trackingBox:z,isAutoZooming:H,notifyManualZoom:I}=Uy(_.current,C.current,l,c,j=>E({zoom:j})),k=ve.useCallback(j=>{I(),L(j)},[I,L]),B=ve.useCallback(async()=>{const j=M();if(!j||Ti())return;const R=!y;try{await j.applyConstraints({advanced:[{torch:R}]}),v(R)}catch{try{await j.applyConstraints({torch:R}),v(R)}catch{}}},[y]),J=ve.useCallback(async()=>{const j=M();if(j){try{await E({focusMode:"continuous"})}catch{}try{const R=j.getCapabilities?j.getCapabilities():{};R.focusMode&&R.focusMode.includes("single-shot")&&await E({focusMode:"single-shot"})}catch{}}},[E]),re=ve.useCallback(async j=>{if(!r.current)throw new Error("Scanner not initialized");return await r.current.scanFile(j,!0)},[]);return ve.useEffect(()=>{if(!window.Html5Qrcode){a("Scanner library missing.");return}return(async()=>{o(!0),v(!1),c(1);const R=new window.Html5Qrcode(t);r.current=R;const W=Ti(),te={fps:30,qrbox:{width:280,height:280},...W?{}:{aspectRatio:1.777777778},disableFlip:!1,experimentalFeatures:{useBarCodeDetectorIfSupported:!W},videoConstraints:W?{facingMode:"environment",width:{min:1280,ideal:1920},height:{min:720,ideal:1080}}:{facingMode:S,width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080},frameRate:{ideal:60,min:30},aspectRatio:1.777777778,focusMode:"continuous"}};let ae=0;const P=G=>{const X=Date.now();X-ae<1500||(ae=X,F.current.currentTime=0,F.current.play().catch(()=>{}),navigator.vibrate&&navigator.vibrate(50),e(G))};try{await R.start({facingMode:S},te,P,void 0);const G=document.querySelector(`#${t} video`);G&&(_.current=G,G.setAttribute("playsinline","true"),G.style.objectFit="cover");const X=M();if(X){C.current=X;const Q=X.getCapabilities?X.getCapabilities():{},ee=X.getSettings();if(!W&&"torch"in Q?A(!0):A(!1),W){const oe=ee.zoom?Math.min(ee.zoom,1):1;m({min:oe>=1?1:.5,max:5,step:.1}),c(ee.zoom||1)}else Q.zoom?(m({min:Q.zoom.min,max:Q.zoom.max,step:Q.zoom.step}),c(ee.zoom||Q.zoom.min)):m(null)}o(!1)}catch(G){console.error("Camera Start Error:",G),a(G.name==="NotAllowedError"?"Camera permission denied.":"Camera error."),o(!1)}})(),()=>{r.current&&r.current.isScanning&&r.current.stop().then(()=>r.current.clear()).catch(console.error)}},[S]),{isInitializing:i,error:s,zoom:l,zoomCapabilities:p,handleZoomChange:k,isTorchOn:y,isTorchSupported:N,toggleTorch:B,trackingBox:z,isAutoZooming:H,triggerFocus:J,switchCamera:D,facingMode:S,scanFromImage:re}},qy=({isScanning:t,error:e,scanSuccessFlash:n,zoom:r,useSimulatedZoom:i,trackingBox:o,focusPoint:s})=>f.jsxs(f.Fragment,{children:[f.jsx("style",{children:`
              .hud-grid {
                background-size: 40px 40px;
                background-image: linear-gradient(to right, rgba(59, 130, 246, 0.1) 1px, transparent 1px), linear-gradient(to bottom, rgba(59, 130, 246, 0.1) 1px, transparent 1px);
              }
              .scanner-laser {
                position: absolute; left: 0; width: 100%; height: 2px; background: #3b82f6; box-shadow: 0 0 15px #3b82f6; animation: laser-scan 2s ease-in-out infinite;
              }
              @keyframes laser-scan { 0% { top: 0%; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
              
              /* Enhanced Success Animation */
              .scan-flash-overlay { animation: flash-screen 0.4s ease-out forwards; }
              @keyframes flash-screen { 
                  0% { background-color: rgba(16, 185, 129, 0); } 
                  20% { background-color: rgba(16, 185, 129, 0.4); } 
                  100% { background-color: rgba(16, 185, 129, 0); } 
              }
              
              .tracking-box {
                  position: absolute;
                  border: 2px solid #10b981;
                  background-color: rgba(16, 185, 129, 0.1);
                  box-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
                  border-radius: 8px;
                  transition: all 0.1s linear; /* Smooth movement */
                  pointer-events: none;
                  z-index: 10;
                  transform: translate(-50%, -50%); /* Center based on x, y */
              }

              /* Focus Reticle Animation */
              @keyframes focus-ping {
                  0% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; border-color: white; }
                  20% { opacity: 1; }
                  100% { transform: translate(-50%, -50%) scale(1); opacity: 0; border-color: #f59e0b; }
              }
              .focus-reticle {
                  position: absolute;
                  width: 60px;
                  height: 60px;
                  border: 2px solid white;
                  border-radius: 50%;
                  pointer-events: none;
                  animation: focus-ping 0.6s ease-out forwards;
                  z-index: 20;
                  box-shadow: 0 0 10px rgba(255,255,255,0.5);
              }
            `}),f.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[!t&&!e&&f.jsx("div",{className:"absolute inset-0 hud-grid opacity-30"}),n&&f.jsx("div",{className:"absolute inset-0 z-50 scan-flash-overlay"}),s&&f.jsx("div",{className:"focus-reticle",style:{left:s.x,top:s.y}}),o&&f.jsx("div",{className:"tracking-box",style:{left:`${o.x}%`,top:`${o.y}%`,width:`${o.width}%`,height:`${o.height}%`},children:f.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-emerald-500 text-white text-[9px] font-black px-2 py-0.5 rounded uppercase tracking-wider shadow-lg whitespace-nowrap animate-pulse",children:"AI TRACKING"})}),!t&&!e&&!o&&f.jsxs("div",{className:`
                        absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 
                        w-[260px] h-[260px] border-2 transition-all duration-300
                        ${n?"border-emerald-500 scale-110 shadow-[0_0_50px_rgba(16,185,129,0.8)]":"border-white/30"}
                        rounded-[2rem]
                    `,children:[f.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-blue-500 rounded-tl-2xl -translate-x-1 -translate-y-1"}),f.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-blue-500 rounded-tr-2xl translate-x-1 -translate-y-1"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-blue-500 rounded-bl-2xl -translate-x-1 translate-y-1"}),f.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-blue-500 rounded-br-2xl translate-x-1 translate-y-1"}),f.jsx("div",{className:"scanner-laser"})]}),f.jsxs("div",{className:"absolute top-[18%] right-4 flex flex-col gap-2 items-end",children:[f.jsxs("div",{className:"text-[9px] font-mono text-blue-400 bg-black/60 px-2 py-1 rounded border border-blue-500/20 flex items-center gap-2 backdrop-blur-md",children:[f.jsxs("span",{children:[r.toFixed(1),"x"]}),i&&f.jsx("span",{className:"bg-white/10 px-1 rounded text-[8px] text-white",children:"DIGITAL"})]}),o&&f.jsx("div",{className:"text-[9px] font-mono text-emerald-400 bg-black/60 px-2 py-1 rounded border border-emerald-500/20 flex items-center gap-2 backdrop-blur-md animate-pulse",children:f.jsx("span",{children:"SMART-ZOOM"})})]})]})]}),Oy=({history:t,isOpen:e,setIsOpen:n,onClear:r})=>{const i=ve.useRef(null),o=a=>{i.current=a.touches[0].clientY},s=a=>{i.current!==null&&a.touches[0].clientY-i.current>50&&(n(!1),i.current=null)};return f.jsxs("div",{className:`
                absolute bottom-0 left-0 right-0 bg-[#0f172a] rounded-t-[2.5rem] border-t border-white/10 shadow-[0_-20px_60px_rgba(0,0,0,0.9)] z-50 transition-all duration-300 ease-out flex flex-col
                ${e?"h-[80vh]":"h-0 overflow-hidden"}
            `,onTouchStart:o,onTouchMove:s,onTouchEnd:()=>{i.current=null},children:[f.jsx("div",{className:"w-full flex justify-center py-5 cursor-pointer active:bg-white/5 transition-colors rounded-t-[2.5rem]",onClick:()=>n(!e),children:f.jsx("div",{className:"w-16 h-1.5 bg-gray-600 rounded-full"})}),f.jsxs("div",{className:"flex-grow flex flex-col overflow-hidden px-5 pb-6 animate-fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-1.5 h-6 bg-blue-500 rounded-full"}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-base font-black text-white uppercase tracking-tight",children:"Scanned History"}),f.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:[t.length," items logged"]})]})]}),f.jsx("button",{onClick:r,className:"text-[10px] text-red-400 font-black uppercase tracking-widest bg-red-500/10 px-4 py-2 rounded-xl border border-red-500/20 active:scale-95 transition-all hover:bg-red-500 hover:text-white",children:"Clear All"})]}),f.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar space-y-3 pb-safe-bottom",children:t.length===0?f.jsxs("div",{className:"flex flex-col items-center justify-center h-48 opacity-40",children:[f.jsx("svg",{className:"w-12 h-12 text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),f.jsx("p",{className:"text-xs font-black uppercase text-gray-500 tracking-widest",children:"No items scanned yet"})]}):t.map((a,l)=>{var c;return f.jsxs("div",{className:"flex items-center gap-4 bg-gray-800/40 p-3 rounded-2xl border border-white/5 shadow-sm",children:[f.jsx("div",{className:"w-12 h-12 bg-black rounded-xl overflow-hidden border border-white/10 flex-shrink-0 shadow-inner",children:a.product?f.jsx("img",{src:st(a.product.ImageURL),className:"w-full h-full object-cover",alt:""}):f.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 font-black text-xs",children:"?"})}),f.jsxs("div",{className:"flex-grow min-w-0",children:[f.jsx("h4",{className:"text-white font-bold text-sm truncate leading-tight",children:((c=a.product)==null?void 0:c.ProductName)||"Unknown Product"}),f.jsx("p",{className:"text-[10px] text-gray-500 font-mono mt-1 font-bold tracking-wider",children:a.code})]}),f.jsxs("div",{className:"text-right flex flex-col items-end",children:[f.jsxs("span",{className:"bg-blue-600/20 text-blue-400 text-xs font-black px-2 py-0.5 rounded-lg border border-blue-500/20 mb-1",children:["x",a.count]}),f.jsx("span",{className:"text-[9px] text-gray-600 font-bold",children:new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},l)})})]})]})},Hy=({onClose:t,onSwitchCamera:e,onToggleTorch:n,isTorchOn:r,isTorchSupported:i,isAutoZooming:o})=>{const s=!Ti()&&i;return f.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent pointer-events-none",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[f.jsxs("div",{className:"pointer-events-auto bg-black/40 backdrop-blur-md px-3 py-1.5 rounded-full border border-blue-500/30 flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),f.jsx("span",{className:"text-white font-black text-xs uppercase tracking-widest",children:"LIVE"}),o&&f.jsx("span",{className:"text-[9px] text-blue-400 font-bold ml-1 animate-pulse",children:"AUTO-ZOOM"})]}),f.jsxs("div",{className:"flex gap-3 pointer-events-auto",children:[f.jsx("button",{onClick:e,className:"w-10 h-10 bg-gray-800/60 backdrop-blur-md rounded-full text-white border border-white/10 flex items-center justify-center active:scale-90 transition-all hover:bg-gray-700/60",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s&&f.jsx("button",{onClick:n,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all backdrop-blur-md border ${r?"bg-yellow-500 text-black border-yellow-400 shadow-[0_0_15px_rgba(234,179,8,0.5)]":"bg-gray-800/60 text-gray-300 border-white/10"}`,children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),f.jsx("button",{onClick:t,className:"w-10 h-10 bg-gray-800/60 backdrop-blur-md rounded-full text-white border border-white/10 flex items-center justify-center active:scale-90 transition-all hover:bg-red-500/80 hover:border-red-500/50",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})]})},Vy=({zoom:t,zoomCapabilities:e,handleZoomChange:n,scanMode:r,setScanMode:i,onOpenHistory:o,onUpload:s})=>{const a=ve.useRef(null),l=e&&e.min<1,c=e&&e.max>=2,p=e&&e.max>=5,m=y=>{y.target.files&&y.target.files[0]&&(s(y.target.files[0]),y.target.value="")};return f.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 z-40 bg-gradient-to-t from-black via-black/90 to-transparent flex flex-col gap-5 pointer-events-none",style:{paddingBottom:"max(1.5rem, env(safe-area-inset-bottom))"},children:[e&&f.jsxs("div",{className:"flex justify-center items-center gap-4 pointer-events-auto mb-1 animate-fade-in-up",children:[l&&f.jsx("button",{onClick:()=>n(.5),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-.5)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:".5"}),f.jsx("button",{onClick:()=>n(1),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-1)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"1x"}),c&&f.jsx("button",{onClick:()=>n(2),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-2)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"2"}),p&&f.jsx("button",{onClick:()=>n(5),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-5)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"5"})]}),e&&f.jsxs("div",{className:"flex items-center gap-3 px-2 pointer-events-auto",children:[f.jsxs("span",{className:"text-[9px] font-black text-gray-500 w-6 text-center",children:[e.min,"x"]}),f.jsx("input",{type:"range",min:e.min,max:e.max,step:e.step,value:t,onChange:y=>n(parseFloat(y.target.value)),className:"flex-1 h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500"}),f.jsxs("span",{className:"text-[9px] font-black text-gray-500 w-6 text-center",children:[e.max,"x"]})]}),f.jsxs("div",{className:"flex justify-between items-center gap-3 pointer-events-auto px-2",children:[f.jsx("input",{type:"file",accept:"image/*",ref:a,className:"hidden",onChange:m}),f.jsx("button",{onClick:()=>{var y;return(y=a.current)==null?void 0:y.click()},className:"w-12 h-12 rounded-2xl bg-gray-800 border border-white/10 flex items-center justify-center text-gray-400 active:scale-90 transition-all shadow-lg hover:text-white",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsxs("div",{className:"flex bg-gray-800 p-1.5 rounded-2xl border border-white/10 shadow-lg flex-grow max-w-[200px]",children:[f.jsx("button",{onClick:()=>i("single"),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all duration-300 ${r==="single"?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,children:"Single"}),f.jsx("button",{onClick:()=>i("increment"),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all duration-300 ${r==="increment"?"bg-emerald-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,children:"Multi"})]}),f.jsx("div",{className:"w-12"})]}),f.jsx("div",{className:"w-full flex justify-center pb-2 cursor-pointer opacity-70 hover:opacity-100 transition-opacity pointer-events-auto",onClick:o,children:f.jsxs("div",{className:"flex flex-col items-center gap-1",children:[f.jsx("div",{className:"w-10 h-1 bg-gray-600 rounded-full"}),f.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase tracking-widest",children:"Swipe for History"})]})})]})},Gy=({onClose:t,onCodeScanned:e,scanMode:n,setScanMode:r,productsInOrder:i,masterProducts:o})=>{var X;const[s,a]=ve.useState([]),[l,c]=ve.useState(!1),[p,m]=ve.useState(null),[y,v]=ve.useState(!1),[N,A]=ve.useState(null),S=ve.useRef(null),w=ve.useRef(null),_=ve.useRef(null),C=ve.useRef(0),F=ve.useRef(1),D=ve.useRef(0);ve.useEffect(()=>(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[]);const M=ve.useCallback(Q=>{v(!0),setTimeout(()=>v(!1),400);const ee=o.find(oe=>oe.Barcode&&oe.Barcode.trim()===Q.trim());if(a(oe=>{const de=oe.findIndex(Ne=>Ne.code===Q),pe=Date.now();if(de>-1){const Ne=[...oe];return Ne[de]={...Ne[de],count:Ne[de].count+1,timestamp:pe},[Ne.splice(de,1)[0],...Ne]}return[{code:Q,product:ee,timestamp:pe,count:1},...oe]}),ee){const oe=i.find(de=>de.name===ee.ProductName);n==="single"&&oe?m({status:"warning",message:"មានក្នុងបញ្ជីរួចហើយ",product:ee}):(e(Q),m({status:"success",message:"បានបន្ថែមជោគជ័យ",product:ee}))}else m({status:"error",message:`រកមិនឃើញ: ${Q}`,product:void 0});setTimeout(()=>m(null),2e3)},[o,i,n,e]),{isInitializing:E,error:L,zoom:z,zoomCapabilities:H,handleZoomChange:I,isTorchOn:k,isTorchSupported:B,toggleTorch:J,trackingBox:re,isAutoZooming:j,triggerFocus:R,switchCamera:W,scanFromImage:K}=By("barcode-reader-container",M),te=Q=>{if(Q.touches.length===2){const ee=Math.hypot(Q.touches[0].pageX-Q.touches[1].pageX,Q.touches[0].pageY-Q.touches[1].pageY);S.current=ee,F.current=z}else if(Q.touches.length===1){w.current=Q.touches[0].clientY,_.current=Q.touches[0].clientX,C.current=Date.now();const ee=Date.now();ee-D.current<300&&H&&I(H.min||1),D.current=ee}},ae=Q=>{if(Q.touches.length===2&&S.current!==null&&H){const oe=Math.hypot(Q.touches[0].pageX-Q.touches[1].pageX,Q.touches[0].pageY-Q.touches[1].pageY)/S.current,de=H.max-H.min,pe=(oe-1)*de*.8;I(F.current+pe)}else if(Q.touches.length===1&&w.current!==null){const ee=Q.touches[0].clientY-w.current;ee<-50&&!l?(c(!0),w.current=null):ee>50&&l&&(c(!1),w.current=null)}},P=Q=>{if(_.current!==null&&w.current!==null){const ee=Q.changedTouches[0].clientX,oe=Q.changedTouches[0].clientY,de=Math.abs(ee-_.current),pe=Math.abs(oe-w.current);Date.now()-C.current<300&&de<15&&pe<15&&(A({x:ee,y:oe}),R(),setTimeout(()=>A(null),1e3))}S.current=null,w.current=null,_.current=null},G=async Q=>{try{const ee=await K(Q);M(ee)}catch{m({status:"error",message:"រកមិនឃើញ Barcode ក្នុងរូបភាព",product:void 0}),setTimeout(()=>m(null),2e3)}};return f.jsxs("div",{className:"fixed inset-0 bg-black z-[100] flex flex-col animate-fade-in touch-none overflow-hidden h-screen",style:{height:"100dvh"},onTouchStart:te,onTouchMove:ae,onTouchEnd:P,children:[f.jsx("style",{children:`
              #barcode-reader-container { width: 100%; height: 100%; background: #000; overflow: hidden; }
              #barcode-reader-container video { object-fit: cover; width: 100%; height: 100%; }
              @keyframes pop-in { 0% { transform: translate(-50%, -40%) scale(0.8); opacity: 0; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; } }
              .animate-pop-in { animation: pop-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
            `}),f.jsx(Hy,{onClose:t,onSwitchCamera:W,onToggleTorch:J,isTorchOn:k,isTorchSupported:B,isAutoZooming:j}),f.jsxs("div",{className:"relative flex-grow w-full overflow-hidden bg-black",children:[f.jsx("div",{id:"barcode-reader-container"}),f.jsx(qy,{isScanning:E,error:L,scanSuccessFlash:y,zoom:z,useSimulatedZoom:!1,trackingBox:re,focusPoint:N}),p&&f.jsx("div",{className:"absolute top-1/2 left-1/2 w-[85%] max-w-sm z-50 animate-pop-in transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",children:f.jsxs("div",{className:`
                            bg-gray-900/95 backdrop-blur-2xl border p-4 rounded-3xl shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex items-center gap-4
                            ${p.status==="success"?"border-emerald-500 shadow-emerald-900/30":p.status==="warning"?"border-yellow-500 shadow-yellow-900/30":"border-red-500 shadow-red-900/30"}
                        `,children:[p.product?f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-black border border-white/10 overflow-hidden flex-shrink-0",children:f.jsx("img",{src:st(p.product.ImageURL),className:"w-full h-full object-cover",alt:""})}):f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gray-800 flex items-center justify-center text-red-400",children:f.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:2})})}),f.jsxs("div",{className:"min-w-0 flex-grow",children:[f.jsx("p",{className:`text-[10px] font-black uppercase tracking-widest mb-0.5 ${p.status==="success"?"text-emerald-400":p.status==="warning"?"text-yellow-400":"text-red-400"}`,children:p.status==="success"?"SUCCESS":p.status==="warning"?"ALREADY ADDED":"ERROR"}),f.jsx("h3",{className:"text-white font-bold text-sm truncate",children:((X=p.product)==null?void 0:X.ProductName)||"Unknown Product"}),p.product&&f.jsxs("p",{className:"text-white font-mono font-black text-lg mt-0.5",children:["$",p.product.Price.toFixed(2)]})]})]})}),L&&f.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 z-30 p-6 text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-red-500/20 text-red-500 rounded-full flex items-center justify-center mb-4",children:f.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:2})})}),f.jsx("p",{className:"text-red-400 font-bold text-sm",children:L})]}),E&&f.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black z-30",children:[f.jsx(Pr,{size:"lg"}),f.jsx("p",{className:"text-blue-500 font-black text-[10px] uppercase tracking-widest mt-4 animate-pulse",children:"Initializing..."})]})]}),!l&&f.jsx(Vy,{zoom:z,zoomCapabilities:H,handleZoomChange:I,scanMode:n,setScanMode:r,onOpenHistory:()=>c(!0),onUpload:G}),f.jsx(Oy,{history:s,isOpen:l,setIsOpen:c,onClear:()=>a([])})]})},rx=({order:t,onSaveSuccess:e,onCancel:n})=>{const{appData:r,currentUser:i,previewImage:o,refreshData:s}=ve.useContext(mo),a=ve.useRef(t),[l,c]=ve.useState(t),[p,m]=ve.useState(!1),[y,v]=ve.useState(""),[N,A]=ve.useState(""),[S,w]=ve.useState(!1),[_,C]=ve.useState("increment"),[F,D]=ve.useState(""),[M,E]=ve.useState("");ve.useEffect(()=>{i&&Wd(i.UserName,"VIEW_EDIT_PAGE",`Opened Order #${t["Order ID"]} for editing`)},[]),ve.useEffect(()=>{c(t),a.current=t},[t]),ve.useEffect(()=>{var j;if(l["Payment Status"]==="Paid"&&l["Payment Info"]){const R=(j=r.bankAccounts)==null?void 0:j.find(W=>W.BankName===l["Payment Info"]);R&&A(st(R.LogoURL))}},[l["Payment Status"],l["Payment Info"],r.bankAccounts]);const L=j=>{if(!j.target.value)return;const R=new Date(j.target.value);isNaN(R.getTime())||c(W=>({...W,Timestamp:R.toISOString()}))},z=()=>{c(j=>{const R={id:Date.now()+Math.random(),name:"",quantity:1,originalPrice:0,finalPrice:0,total:0,discountPercent:0,colorInfo:"",image:"",cost:0,tags:""},W=[...j.Products,R],K=parseFloat(String(j["Shipping Fee (Customer)"]))||0,te=ao(W,K);return{...j,Products:W,...te}})},H=j=>{if(l.Products.length<=1){alert("មិនអាចលុបផលិតផលចុងក្រោយបានទេ (Cannot remove last item)");return}c(R=>{const W=R.Products.filter((ae,P)=>P!==j),K=Number(R["Shipping Fee (Customer)"])||0,te=ao(W,K);return{...R,Products:W,...te}})},I=j=>{const R=r.products.find(W=>W.Barcode&&W.Barcode.trim()===j.trim());R&&(c(W=>{const K=[...W.Products],te=K.findIndex(G=>G.name===R.ProductName);if(te>-1){if(_==="increment"){const G={...K[te]};G.quantity=(Number(G.quantity)||0)+1,G.total=G.quantity*(Number(G.finalPrice)||0),K[te]=G}}else{const G={id:Date.now(),name:R.ProductName,quantity:1,originalPrice:R.Price,finalPrice:R.Price,total:R.Price,discountPercent:0,colorInfo:"",image:R.ImageURL,cost:R.Cost,tags:R.Tags};K.push(G)}const ae=parseFloat(String(W["Shipping Fee (Customer)"]))||0,P=ao(K,ae);return{...W,Products:K,...P}}),_==="single"&&w(!1))},k=j=>{const{name:R,value:W}=j.target;c(K=>{let te=W;R==="Customer Phone"?(te=W.replace(/[^0-9]/g,""),te.length>0&&!te.startsWith("0")&&(te="0"+te)):(R==="Shipping Fee (Customer)"||R==="Internal Cost")&&(W===""||W.endsWith(".")?te=W:te=Math.max(0,parseFloat(W)||0));const ae={...K,[R]:te};if(R==="Shipping Fee (Customer)"){const P=parseFloat(String(te))||0,G=ao(ae.Products,P);return{...ae,...G}}return R==="Payment Status"&&te==="Unpaid"&&(ae["Payment Info"]="",A("")),ae})},B=(j,R,W,K)=>{c(te=>{const ae=[...te.Products],P={...ae[j]};if(R==="name"){P.name=W;const oe=r.products.find(de=>de.ProductName===W);oe?(P.originalPrice=oe.Price,P.finalPrice=oe.Price,P.cost=oe.Cost,P.image=oe.ImageURL,P.tags=K!==void 0?K:oe.Tags):(P.originalPrice=0,P.finalPrice=0,P.cost=0,P.image="",P.tags="")}else R==="finalPrice"||R==="quantity"?W===""||String(W).endsWith(".")?P[R]=W:P[R]=Math.max(R==="quantity"?1:0,parseFloat(W)||0):P[R]=W;const G=parseFloat(String(P.quantity))||0,X=parseFloat(String(P.finalPrice))||0;P.total=G*X,ae[j]=P;const Q=parseFloat(String(te["Shipping Fee (Customer)"]))||0,ee=ao(ae,Q);return{...te,Products:ae,...ee}})},J=async()=>{if(!window.confirm(`តើអ្នកពិតជាចង់លុបប្រតិបត្តិការណ៍ ID: ${l["Order ID"]} មែនទេ?`)||!i)return;const j=i.UserName||"Unknown User";try{const R=await fetch(`${ni}/api/admin/delete-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:l["Order ID"],team:l.Team,userName:j,telegramMessageId1:l["Telegram Message ID 1"],telegramMessageId2:l["Telegram Message ID 2"],telegramChatId:l.TelegramValue})}),W=await R.json();if(!R.ok||W.status!=="success")throw new Error(W.message||"Delete failed");await Wd(j,"DELETE_ORDER",`Deleted Order #${l["Order ID"]}`),await s(),e()}catch(R){v(`លុបមិនបានសម្រេច: ${R.message}`)}},re=async j=>{var K;if(j.preventDefault(),m(!0),v(""),!l.Products.every(te=>te.name&&parseFloat(String(te.quantity))>0)){v("សូមពិនិត្យព័ត៌មានផលិតផល (ឈ្មោះ និងចំនួន)។"),m(!1);return}const R=(K=r.shippingMethods)==null?void 0:K.find(te=>te.MethodName===l["Internal Shipping Method"]);if(R!=null&&R.RequireDriverSelection&&!l["Internal Shipping Details"]){v("សូមជ្រើសរើសអ្នកដឹក (Driver) សម្រាប់សេវាកម្មនេះ។"),m(!1);return}const W=(i==null?void 0:i.UserName)||"Unknown User";try{const te=parseFloat(String(l["Shipping Fee (Customer)"]))||0,ae=ao(l.Products,te),P={...l,"Shipping Fee (Customer)":te,Subtotal:ae.Subtotal,"Grand Total":ae["Grand Total"],"Internal Cost":parseFloat(String(l["Internal Cost"]))||0,"Discount ($)":ae["Discount ($)"],"Total Product Cost ($)":ae["Total Product Cost ($)"],IsVerified:!!l.IsVerified},G=l.Products.map(oe=>({...oe,quantity:parseFloat(String(oe.quantity))||0,finalPrice:parseFloat(String(oe.finalPrice))||0,total:(parseFloat(String(oe.quantity))||0)*(parseFloat(String(oe.finalPrice))||0)}));P["Products (JSON)"]=JSON.stringify(G);const X=Ty(a.current,P);X&&X.length>0&&await Promise.all(X.map(oe=>ky(l["Order ID"],W,oe.field,oe.oldValue,oe.newValue)));const Q=await fetch(`${ni}/api/admin/update-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:l["Order ID"],team:l.Team,userName:W,newData:P})}),ee=await Q.json();if(!Q.ok||ee.status!=="success")throw new Error(ee.message||"Update failed");await s(),e()}catch(te){v(`រក្សាទុកមិនបានសម្រេច: ${te.message}`)}finally{m(!1)}};return f.jsxs("div",{className:"w-full h-full lg:h-[calc(100vh-40px)] flex flex-col animate-fade-in lg:overflow-hidden",children:[S&&f.jsx(Gy,{onClose:()=>w(!1),onCodeScanned:I,scanMode:_,setScanMode:C,productsInOrder:l.Products,masterProducts:r.products}),f.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 px-1 lg:px-4 pt-2",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-2xl font-black text-white uppercase tracking-tighter italic flex items-center gap-3",children:[f.jsx("span",{className:"w-1.5 h-6 bg-blue-600 rounded-full"}),"Edit Order"]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[f.jsxs("span",{className:"text-[10px] font-mono font-bold text-gray-500 bg-gray-900 px-2 py-0.5 rounded border border-gray-800",children:["#",l["Order ID"]]}),f.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:l.Team}),f.jsxs("div",{className:"flex items-center gap-1 bg-gray-900 px-2 py-0.5 rounded border border-gray-800",children:[f.jsx("label",{htmlFor:"order-date",className:"text-[10px] font-black text-gray-600 uppercase cursor-pointer",children:"Date"}),f.jsx("input",{id:"order-date",type:"datetime-local",value:Cy(l.Timestamp),onChange:L,className:"bg-transparent border-none text-[10px] font-bold text-blue-400 p-0 focus:ring-0 h-4",style:{colorScheme:"dark"}})]})]})]}),f.jsx("button",{onClick:n,className:"px-6 py-2.5 bg-gray-800 border border-gray-700 hover:bg-gray-700 text-gray-400 font-black rounded-xl uppercase text-[10px] tracking-widest transition-all",children:"បោះបង់"})]}),y&&f.jsxs("div",{className:"flex-shrink-0 mb-4 mx-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 flex items-center gap-3 animate-shake",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:"2"})}),f.jsx("span",{className:"font-bold text-xs",children:y})]}),f.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-6 overflow-hidden px-1 lg:px-4 pb-4",children:[f.jsx("div",{className:"w-full lg:w-[380px] xl:w-[420px] flex-shrink-0 h-full overflow-hidden",children:f.jsx(Ry,{formData:l,appData:r,onChange:k,onProvinceSelect:j=>{c(R=>({...R,Location:j})),D(""),E("")},onDistrictChange:j=>{D(j),E("")},onSangkatChange:E,onShippingMethodSelect:j=>c(R=>({...R,"Internal Shipping Method":j.MethodName,"Internal Shipping Details":j.RequireDriverSelection?"":j.MethodName})),onDriverSelect:j=>c(R=>({...R,"Internal Shipping Details":j})),onBankChange:j=>{var K;const R=j.target.value;c(te=>({...te,"Payment Info":R}));const W=(K=r.bankAccounts)==null?void 0:K.find(te=>te.BankName===R);A(W?st(W.LogoURL):"")},selectedDistrict:F,selectedSangkat:M,bankLogo:N})}),f.jsxs("div",{className:"flex-1 flex flex-col gap-4 overflow-hidden h-full",children:[f.jsx(Dy,{products:l.Products,masterProducts:r.products,onProductChange:B,onAddProduct:z,onRemoveProduct:H,onPreviewImage:o,onScanBarcode:()=>w(!0)}),f.jsx(Fy,{subtotal:Number(l.Subtotal)||0,grandTotal:Number(l["Grand Total"])||0,shippingFee:l["Shipping Fee (Customer)"],onShippingFeeChange:k,onSave:re,onDelete:J,loading:p})]})]})]})},zy=t=>ve.useMemo(()=>t.reduce((e,n)=>({grandTotal:e.grandTotal+(Number(n["Grand Total"])||0),internalCost:e.internalCost+(Number(n["Internal Cost"])||0),count:e.count+1,paidCount:e.paidCount+(n["Payment Status"]==="Paid"?1:0),unpaidCount:e.unpaidCount+(n["Payment Status"]==="Unpaid"?1:0)}),{grandTotal:0,internalCost:0,count:0,paidCount:0,unpaidCount:0}),[t]),Wy=({totals:t,isVisible:e,showSelection:n})=>t.count===0?null:f.jsxs("tr",{className:"bg-blue-900/30 border-b-2 border-blue-500/20 sticky top-0 z-20 backdrop-blur-md shadow-lg",children:[n&&f.jsx("td",{className:"px-4 py-4"}),e("index")&&f.jsx("td",{className:"px-4 py-4 text-center font-black text-blue-400 text-[clamp(12px,0.9vw,14px)]",children:t.count}),e("actions")&&f.jsx("td",{className:"px-4 py-4"}),e("customerName")&&f.jsx("td",{className:"px-6 py-4",children:f.jsx("span",{className:"font-black text-white uppercase tracking-widest text-[clamp(11px,0.8vw,13px)]",children:"Grand Total (សរុបរួម)"})}),e("productInfo")&&f.jsx("td",{className:"px-6 py-4"}),e("location")&&f.jsx("td",{className:"px-6 py-4"}),e("pageInfo")&&f.jsx("td",{className:"px-6 py-4"}),e("fulfillment")&&f.jsx("td",{className:"px-6 py-4"}),e("total")&&f.jsx("td",{className:"px-6 py-4",children:f.jsxs("span",{className:"font-black text-emerald-400 tracking-tighter shadow-emerald-500/20 drop-shadow-sm text-[clamp(16px,1.2vw,20px)]",children:["$",t.grandTotal.toLocaleString(void 0,{minimumFractionDigits:2})]})}),e("shippingService")&&f.jsx("td",{className:"px-6 py-4"}),e("shippingCost")&&f.jsx("td",{className:"px-6 py-4",children:f.jsxs("span",{className:"font-black text-orange-400 font-mono text-[clamp(13px,0.9vw,15px)]",children:["$",t.internalCost.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3})]})}),e("status")&&f.jsx("td",{className:"px-6 py-4",children:f.jsxs("div",{className:"flex flex-col gap-1.5 items-start",children:[t.paidCount>0&&f.jsxs("span",{className:"font-black text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20 uppercase tracking-wider whitespace-nowrap text-[clamp(10px,0.7vw,12px)]",children:["Paid: ",t.paidCount]}),t.unpaidCount>0&&f.jsxs("span",{className:"font-black text-red-400 bg-red-500/10 px-2 py-0.5 rounded border border-red-500/20 uppercase tracking-wider whitespace-nowrap text-[clamp(10px,0.7vw,12px)]",children:["Unpaid: ",t.unpaidCount]})]})}),e("date")&&f.jsx("td",{className:"px-4 py-4"}),e("print")&&f.jsx("td",{className:"px-4 py-4"}),e("check")&&f.jsx("td",{className:"px-2 py-4"}),e("orderId")&&f.jsx("td",{className:"px-2 py-4"})]}),ah=({totals:t})=>t.count===0?null:f.jsxs("div",{className:"bg-blue-900/20 backdrop-blur-xl border border-blue-500/30 rounded-[2.2rem] p-5 shadow-2xl relative overflow-hidden animate-fade-in",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsxs("h3",{className:"text-sm font-black text-blue-300 uppercase tracking-widest flex items-center gap-2",children:[f.jsx("span",{className:"w-1.5 h-4 bg-blue-500 rounded-full"}),"Grand Total"]}),f.jsxs("span",{className:"text-[10px] font-bold text-gray-400 bg-black/30 px-3 py-1 rounded-full",children:[t.count," Orders"]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[f.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl border border-white/5",children:[f.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase mb-1",children:"Total Revenue"}),f.jsxs("p",{className:"text-xl font-black text-emerald-400 tracking-tighter",children:["$",t.grandTotal.toLocaleString()]})]}),f.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl border border-white/5",children:[f.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase mb-1",children:"Total Cost"}),f.jsxs("p",{className:"text-lg font-black text-orange-400 tracking-tighter",children:["$",t.internalCost.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3})]})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"flex-1 bg-emerald-500/10 p-2 rounded-xl border border-emerald-500/20 flex justify-between items-center px-3",children:[f.jsx("span",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-widest",children:"PAID"}),f.jsx("span",{className:"text-sm font-black text-white",children:t.paidCount})]}),f.jsxs("div",{className:"flex-1 bg-red-500/10 p-2 rounded-xl border border-red-500/20 flex justify-between items-center px-3",children:[f.jsx("span",{className:"text-[9px] font-black text-red-500 uppercase tracking-widest",children:"UNPAID"}),f.jsx("span",{className:"text-sm font-black text-white",children:t.unpaidCount})]})]})]}),$y=({orders:t,totals:e,visibleColumns:n,selectedIds:r,onToggleSelect:i,onToggleSelectAll:o,onEdit:s,handlePrint:a,handleCopy:l,handleCopyTemplate:c,copiedId:p,copiedTemplateId:m,toggleOrderVerified:y,updatingIds:v})=>{const{appData:N,previewImage:A}=ve.useContext(mo),S=ve.useRef(null),[w,_]=ve.useState(0),C=88,F=5,D=re=>!n||n.has(re),M=t.length>0&&t.every(re=>r.has(re["Order ID"])),{virtualItems:E,totalHeight:L,paddingTop:z}=ve.useMemo(()=>{var ae;const re=t.length*C,j=((ae=S.current)==null?void 0:ae.clientHeight)||800;let R=Math.floor(w/C),W=Math.min(t.length-1,Math.floor((w+j)/C));R=Math.max(0,R-F),W=Math.min(t.length-1,W+F);const K=[];for(let P=R;P<=W;P++)K.push({index:P,data:t[P]});const te=R*C;return{virtualItems:K,totalHeight:re,paddingTop:te}},[t,w]),H=re=>{_(re.currentTarget.scrollTop)},I=re=>{if(!re||!N.phoneCarriers)return null;const R=re.replace(/\s/g,"").substring(0,3),W=N.phoneCarriers.find(K=>K.Prefixes.split(",").map(te=>te.trim()).includes(R));return W?st(W.CarrierLogoURL):null},k=re=>{if(!re||!N.shippingMethods)return null;const j=N.shippingMethods.find(R=>R.MethodName===re);return j?st(j.LogosURL):null},B=re=>{let j=(re||"").replace(/[^0-9]/g,"");return j.length>0&&(j="0"+j.replace(/^0+/,"")),j},J=re=>{if(!re)return new Date;const j=re.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(j)return new Date(parseInt(j[1]),parseInt(j[2])-1,parseInt(j[3]),parseInt(j[4]),parseInt(j[5]));try{const R=new Date(re);return isNaN(R.getTime())?new Date:R}catch{return new Date}};return f.jsxs("div",{className:"page-card !p-0 shadow-2xl border-white/5 bg-gray-900/60 backdrop-blur-3xl rounded-[2.5rem] flex flex-col h-[calc(100vh-220px)]",children:[f.jsx("div",{className:"flex-shrink-0 z-20 bg-gray-900 rounded-t-[2.5rem] border-b border-white/10",children:f.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed"},children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-gray-800/80",children:[o&&f.jsx("th",{className:"px-4 py-6 w-12 text-center",children:f.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-600 bg-gray-900 text-blue-500 cursor-pointer focus:ring-blue-500/20",checked:M,onChange:()=>o(t.map(re=>re["Order ID"]))})}),D("index")&&f.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-12 text-[clamp(10px,0.8vw,12px)]",children:"#"}),D("actions")&&f.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-24 text-[clamp(10px,0.8vw,12px)]",children:"Command"}),D("customerName")&&f.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-56 text-[clamp(10px,0.8vw,12px)]",children:"Merchant/Client"}),D("productInfo")&&f.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-44 text-[clamp(10px,0.8vw,12px)]",children:"Assets"}),D("location")&&f.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-40 text-[clamp(10px,0.8vw,12px)]",children:"Geography"}),D("pageInfo")&&f.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-40 text-[clamp(10px,0.8vw,12px)]",children:"Source Page"}),D("fulfillment")&&f.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Fulfillment"}),D("total")&&f.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Valuation"}),D("shippingService")&&f.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-48 text-[clamp(10px,0.8vw,12px)]",children:"Logistics"}),D("shippingCost")&&f.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-28 text-[clamp(10px,0.8vw,12px)]",children:"Exp. Cost"}),D("status")&&f.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Status"}),D("date")&&f.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-24 text-[clamp(10px,0.8vw,12px)]",children:"Time"}),D("print")&&f.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Output"}),D("check")&&f.jsx("th",{className:"px-2 py-6 font-normal uppercase tracking-[0.15em] text-center text-emerald-500/80 w-14 text-[9px]",children:"VERIFIED"}),D("orderId")&&f.jsx("th",{className:"px-2 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-16 text-[clamp(10px,0.8vw,12px)]",children:"Node ID"})]})}),f.jsx("tbody",{className:"bg-[#0f172a]",children:f.jsx(Wy,{totals:e,isVisible:D,showSelection:!!i})})]})}),f.jsx("div",{ref:S,className:"flex-grow overflow-y-auto custom-scrollbar",onScroll:H,children:f.jsx("div",{style:{height:`${L}px`,position:"relative"},children:f.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed",transform:`translateY(${z}px)`},children:[f.jsx("thead",{className:"invisible h-0",children:f.jsxs("tr",{children:[o&&f.jsx("th",{className:"w-12"}),D("index")&&f.jsx("th",{className:"w-12"}),D("actions")&&f.jsx("th",{className:"w-24"}),D("customerName")&&f.jsx("th",{className:"w-56"}),D("productInfo")&&f.jsx("th",{className:"w-44"}),D("location")&&f.jsx("th",{className:"w-40"}),D("pageInfo")&&f.jsx("th",{className:"w-40"}),D("fulfillment")&&f.jsx("th",{className:"w-32"}),D("total")&&f.jsx("th",{className:"w-32"}),D("shippingService")&&f.jsx("th",{className:"w-48"}),D("shippingCost")&&f.jsx("th",{className:"w-28"}),D("status")&&f.jsx("th",{className:"w-32"}),D("date")&&f.jsx("th",{className:"w-24"}),D("print")&&f.jsx("th",{className:"w-32"}),D("check")&&f.jsx("th",{className:"w-14"}),D("orderId")&&f.jsx("th",{className:"w-16"})]})}),f.jsx("tbody",{className:"divide-y divide-white/5",children:E.map(({index:re,data:j})=>{var Ee;const R=(Ee=N.pages)==null?void 0:Ee.find(Ie=>Ie.PageName===j.Page),W=R?st(R.PageLogoURL):"",K=B(j["Customer Phone"]),te=I(K),ae=p===j["Order ID"],P=m===j["Order ID"],G=k(j["Internal Shipping Method"]),X=j["Order ID"],Q=j.IsVerified===!0||String(j.IsVerified).toUpperCase()==="TRUE",ee=v.has(X),oe=r.has(X),de=re>t.length-3&&t.length>4,pe=de?"bottom-full mb-3":"top-full mt-3",Ne=de?"-bottom-2 border-r border-b":"-top-2 border-t border-l",Ce=J(j.Timestamp);return f.jsxs("tr",{className:`${Q?"bg-emerald-500/[0.03]":oe?"bg-blue-500/10":"hover:bg-white/[0.02]"} transition-all group relative`,style:{height:`${C}px`},children:[i&&f.jsx("td",{className:"px-4 py-5 text-center",children:f.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-700 bg-gray-950 text-blue-500 cursor-pointer transition-all",checked:oe,onChange:()=>i(X)})}),D("index")&&f.jsx("td",{className:"px-4 py-5 text-center font-bold text-gray-600 text-[clamp(11px,0.8vw,13px)]",children:re+1}),D("actions")&&f.jsx("td",{className:"px-4 py-5 text-center",children:f.jsx("button",{onClick:()=>s&&s(j),className:"text-blue-400/80 hover:text-white bg-blue-400/5 hover:bg-blue-600 px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border border-blue-400/10 active:scale-95 shadow-md",children:"Edit"})}),D("customerName")&&f.jsxs("td",{className:"px-6 py-5",children:[f.jsx("div",{className:"font-black text-gray-100 truncate mb-1 leading-tight tracking-tight text-[clamp(14px,1.1vw,16px)]",children:j["Customer Name"]}),f.jsxs("div",{className:"flex items-center gap-2",children:[te&&f.jsx("img",{src:te,className:"w-4 h-4 object-contain opacity-80",alt:"carrier"}),f.jsx("div",{className:"text-blue-400/80 font-mono font-black tracking-tighter text-[clamp(12px,0.9vw,14px)]",children:K})]})]}),D("productInfo")&&f.jsx("td",{className:"px-6 py-5 relative overflow-visible",children:f.jsxs("div",{className:"group/prod flex flex-col gap-1 cursor-help",children:[j.Products.slice(0,2).map((Ie,He)=>f.jsxs("div",{className:"bg-black/40 p-1.5 rounded-lg border border-white/5 flex flex-col",children:[f.jsx("span",{className:"font-bold text-gray-300 line-clamp-1 text-[clamp(11px,0.8vw,12px)]",children:Ie.name}),f.jsxs("span",{className:"text-blue-400/80 font-black mt-0.5 text-[clamp(10px,0.7vw,11px)]",children:["x",Ie.quantity]})]},He)),j.Products.length>2&&f.jsxs("p",{className:"text-[8px] text-gray-600 font-black ml-1 uppercase tracking-widest",children:["+ ",j.Products.length-2," items"]}),f.jsxs("div",{className:`invisible group-hover/prod:visible opacity-0 group-hover/prod:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${pe} w-80 p-5 bg-[#1a2235] border border-white/10 rounded-[2.5rem] shadow-[0_40px_100px_rgba(0,0,0,0.8)] transition-all duration-300 pointer-events-none backdrop-blur-3xl`,children:[f.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-[0.3em] mb-4 border-b border-white/5 pb-3",children:"Operational Asset Data"}),f.jsx("div",{className:"space-y-3 max-h-[350px] overflow-y-auto custom-scrollbar pr-1",children:j.Products.map((Ie,He)=>{var Ke;const xe=(Ke=N.products)==null?void 0:Ke.find(Oe=>Oe.ProductName===Ie.name),ie=Ie.image||(xe==null?void 0:xe.ImageURL)||"";return f.jsxs("div",{className:"flex items-center gap-4 text-left p-2.5 bg-black/30 rounded-2xl border border-white/5",children:[f.jsx("div",{className:"w-14 h-14 flex-shrink-0 bg-gray-900 rounded-xl border border-gray-800 overflow-hidden shadow-inner",children:f.jsx("img",{src:st(ie),className:"w-full h-full object-cover",alt:Ie.name,onError:Oe=>Oe.currentTarget.src="https://placehold.co/100x100/1f2937/4b5563?text=N/A"})}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("p",{className:"font-black text-white leading-tight mb-1 line-clamp-2 text-xs",children:Ie.name}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2.5 py-0.5 rounded-lg border border-blue-500/10",children:["x",Ie.quantity]}),Ie.colorInfo&&f.jsxs("span",{className:"text-[9px] text-purple-400 font-bold uppercase",children:["Node: ",Ie.colorInfo]})]})]})]},He)})}),f.jsx("div",{className:`absolute ${Ne} left-1/2 -translate-x-1/2 w-5 h-5 bg-[#1a2235] border-white/10 rotate-45`})]})]})}),D("location")&&f.jsx("td",{className:"px-4 py-5 relative overflow-visible",children:f.jsxs("div",{className:"group/loc cursor-help",children:[f.jsx("div",{className:"font-black text-gray-200 leading-tight truncate text-[clamp(12px,0.9vw,14px)]",children:j.Location}),f.jsx("div",{className:"font-bold text-gray-600 mt-1 line-clamp-1 text-[clamp(10px,0.7vw,12px)]",children:j["Address Details"]}),f.jsxs("div",{className:`invisible group-hover/loc:visible opacity-0 group-hover/loc:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${pe} w-72 p-5 bg-[#1a2235] border border-white/10 rounded-[2.5rem] shadow-[0_40px_100px_rgba(0,0,0,0.8)] transition-all duration-300 pointer-events-none backdrop-blur-3xl`,children:[f.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-[0.3em] mb-3 border-b border-white/5 pb-2",children:"Geographic Assignment"}),f.jsxs("div",{className:"space-y-4 text-left",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-[8px] font-black text-gray-600 uppercase tracking-widest",children:"Region Node"}),f.jsx("p",{className:"text-sm font-black text-white mt-0.5",children:j.Location})]}),f.jsxs("div",{className:"bg-black/30 p-3.5 rounded-2xl border border-white/5",children:[f.jsx("span",{className:"text-[8px] font-black text-gray-600 uppercase block mb-1.5 tracking-widest",children:"Local Matrix"}),f.jsx("p",{className:"text-[11px] text-gray-300 leading-relaxed font-bold",children:j["Address Details"]||"No precise location data"})]})]}),f.jsx("div",{className:`absolute ${Ne} left-1/2 -translate-x-1/2 w-5 h-5 bg-[#1a2235] border-white/10 rotate-45`})]})]})}),D("pageInfo")&&f.jsx("td",{className:"px-4 py-5",children:f.jsxs("div",{className:"flex items-center gap-3",children:[W?f.jsx("img",{src:W,className:"w-8 h-8 rounded-full border border-white/10 shadow-sm object-cover",alt:"logo"}):f.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border border-white/5 flex items-center justify-center text-[7px] text-gray-600 font-bold uppercase",children:"Null"}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("span",{className:"font-black text-gray-300 block truncate leading-none mb-1 text-[clamp(12px,0.9vw,13px)]",children:j.Page}),f.jsx("span",{className:"text-[9px] text-gray-600 uppercase font-black tracking-widest",children:j.Team})]})]})}),D("fulfillment")&&f.jsx("td",{className:"px-6 py-5",children:f.jsx("span",{className:"font-bold text-gray-300 bg-gray-800 px-2 py-1 rounded border border-white/5 text-[clamp(11px,0.8vw,12px)]",children:j["Fulfillment Store"]})}),D("total")&&f.jsxs("td",{className:"px-6 py-5 font-black text-blue-400 tracking-tighter text-[clamp(16px,1.2vw,18px)]",children:["$",j["Grand Total"].toFixed(2)]}),D("shippingService")&&f.jsx("td",{className:"px-6 py-5",children:f.jsxs("div",{className:"flex items-center gap-2.5",children:[G&&f.jsx("img",{src:G,className:"w-5 h-5 rounded-lg object-contain bg-gray-950 p-0.5 border border-white/5",alt:"shipping"}),f.jsx("span",{className:"text-orange-400/80 font-black uppercase truncate tracking-tight text-[clamp(10px,0.8vw,12px)]",children:j["Internal Shipping Method"]||"-"})]})}),D("shippingCost")&&f.jsxs("td",{className:"px-6 py-5 text-gray-400 font-mono font-black tracking-tighter text-[clamp(13px,0.9vw,15px)]",children:["$",(Number(j["Internal Cost"])||0).toFixed(3)]}),D("status")&&f.jsx("td",{className:"px-6 py-5",children:f.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border ${j["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:j["Payment Status"]})}),D("date")&&f.jsx("td",{className:"px-4 py-5",children:f.jsxs("div",{className:"flex flex-col items-start",children:[f.jsx("span",{className:"font-bold text-gray-400 text-[clamp(11px,0.8vw,12px)]",children:Ce.toLocaleDateString("km-KH")}),f.jsx("span",{className:"font-mono text-blue-500/80 font-black text-[clamp(10px,0.7vw,11px)]",children:Ce.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]})}),D("print")&&f.jsx("td",{className:"px-4 py-5 text-center",children:f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[f.jsx("button",{onClick:()=>c(j),className:`p-2.5 rounded-xl transition-all border active:scale-90 ${P?"bg-indigo-500/20 border-indigo-500/50 text-indigo-400":"bg-gray-800 text-gray-400 border-white/10 hover:text-white hover:bg-gray-700"}`,title:"Copy Telegram Template",children:P?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})}),f.jsx("button",{onClick:()=>a(j),className:"text-emerald-400/60 hover:text-white bg-emerald-400/5 hover:bg-emerald-600 p-2.5 rounded-xl transition-all border border-emerald-400/10 active:scale-90",title:"Print Label",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:f.jsx("path",{d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})]})}),D("check")&&f.jsx("td",{className:"px-2 py-5 text-center",children:f.jsxs("div",{className:"relative flex items-center justify-center",children:[f.jsx("input",{type:"checkbox",checked:Q,onChange:()=>y(X,Q),className:`h-6 w-6 rounded-lg border-gray-700 bg-gray-950 text-emerald-500 focus:ring-emerald-500/10 transition-all ${ee?"opacity-20":"hover:scale-110 active:scale-150 cursor-pointer"}`}),ee&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:f.jsx(Pr,{size:"sm"})})]})}),D("orderId")&&f.jsx("td",{className:"px-2 py-5 text-center",children:f.jsx("button",{onClick:()=>l(j["Order ID"]),className:`p-2 rounded-xl transition-all border ${ae?"bg-green-500/20 border-green-500/40 text-green-400":"bg-gray-800 border-white/5 text-gray-500 hover:text-blue-400 active:scale-90"}`,children:f.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:ae?"✓":"ID"})})})]},X)})})]})})})]})},Jy=({orders:t,totals:e,visibleColumns:n,selectedIds:r,onToggleSelect:i,onEdit:o,handlePrint:s,handleCopy:a,handleCopyTemplate:l,copiedId:c,copiedTemplateId:p,toggleOrderVerified:m,updatingIds:y})=>{const{appData:v,previewImage:N}=ve.useContext(mo),[A,S]=ve.useState(()=>{const R=localStorage.getItem("mobile_view_preference");return R==="card"||R==="table"?R:"table"}),[w,_]=ve.useState(null),C=R=>{S(R),localStorage.setItem("mobile_view_preference",R)},[F,D]=ve.useState(20),M=ve.useMemo(()=>t.slice(0,F),[t,F]),E=()=>{D(R=>R+20)},L=!n||n.has("productInfo"),z=!n||n.has("actions"),H=!n||n.has("print"),I=!n||n.has("check"),k=!n||n.has("fulfillment"),B=R=>{if(!R||!v.phoneCarriers)return null;const K=R.replace(/\s/g,"").substring(0,3),te=v.phoneCarriers.find(ae=>ae.Prefixes.split(",").map(P=>P.trim()).includes(K));return te?st(te.CarrierLogoURL):null},J=R=>{if(!R||!v.shippingMethods)return null;const W=v.shippingMethods.find(K=>K.MethodName===R);return W?st(W.LogosURL):null},re=R=>{let W=(R||"").replace(/[^0-9]/g,"");return W.length>0&&(W="0"+W.replace(/^0+/,"")),W},j=R=>{if(!R)return"";const W=R.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(W)return new Date(parseInt(W[1]),parseInt(W[2])-1,parseInt(W[3]),parseInt(W[4]),parseInt(W[5])).toLocaleDateString("km-KH");try{const K=new Date(R);return isNaN(K.getTime())?R:K.toLocaleDateString("km-KH")}catch{return R}};return f.jsxs("div",{className:"space-y-5 pb-40",children:[f.jsx(ah,{totals:e}),f.jsxs("div",{className:"flex justify-between items-center px-2",children:[f.jsxs("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:[t.length," Entries"]}),f.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-xl border border-white/10",children:[f.jsx("button",{onClick:()=>C("card"),className:`p-2 rounded-lg transition-all ${A==="card"?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Card View",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4z"})})}),f.jsx("button",{onClick:()=>C("table"),className:`p-2 rounded-lg transition-all ${A==="table"?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Table View",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),A==="table"?f.jsx("div",{className:"bg-[#0f172a] border border-white/10 rounded-3xl overflow-hidden shadow-2xl animate-fade-in relative",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left border-collapse",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-[#0f172a] border-b border-white/10 text-[10px] text-gray-400 font-black uppercase tracking-wider",children:[f.jsx("th",{className:"p-3 sticky left-0 z-20 bg-[#0f172a] border-r border-white/10 min-w-[130px] shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)]",children:"Customer"}),k&&f.jsx("th",{className:"p-3 min-w-[100px] text-gray-400",children:"Store"}),f.jsx("th",{className:"p-3 text-right min-w-[80px]",children:"Total"}),f.jsx("th",{className:"p-3 text-center min-w-[90px]",children:"Status"}),f.jsx("th",{className:"p-3 text-center min-w-[50px]",children:"Act"}),f.jsx("th",{className:"p-3 min-w-[100px]",children:"Date"})]})}),f.jsx("tbody",{className:"divide-y divide-white/5 text-xs",children:M.map(R=>{const W=r.has(R["Order ID"]),K=R.IsVerified===!0||String(R.IsVerified).toUpperCase()==="TRUE",te=p===R["Order ID"];return f.jsxs("tr",{className:`${W?"bg-blue-900/20":K?"bg-emerald-900/5":"hover:bg-white/5"} transition-colors`,children:[f.jsx("td",{className:"p-3 sticky left-0 z-20 bg-gray-900 border-r border-white/10 shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)]",children:f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"font-bold text-white truncate max-w-[110px]",children:R["Customer Name"]}),f.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:R["Customer Phone"]})]})}),k&&f.jsx("td",{className:"p-3 text-gray-300 font-bold text-[10px]",children:R["Fulfillment Store"]}),f.jsxs("td",{className:"p-3 text-right font-black text-blue-400",children:["$",R["Grand Total"].toFixed(2)]}),f.jsx("td",{className:"p-3 text-center",children:f.jsx("span",{className:`px-2 py-0.5 rounded text-[8px] font-black uppercase border ${R["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:R["Payment Status"]})}),f.jsx("td",{className:"p-3 text-center",children:f.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[f.jsx("button",{onClick:()=>l(R),className:`text-gray-400 hover:text-white transition-all active:scale-90 ${te?"text-indigo-400":""}`,children:te?f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})}),o&&f.jsx("button",{onClick:()=>o(R),className:"text-gray-400 hover:text-white",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})}),f.jsx("td",{className:"p-3 text-[9px] text-gray-500 font-bold",children:j(R.Timestamp)})]},R["Order ID"])})})]})})}):M.map(R=>{var de,pe;const W=(de=v.pages)==null?void 0:de.find(Ne=>Ne.PageName===R.Page),K=W?st(W.PageLogoURL):"",te=re(R["Customer Phone"]),ae=B(te),P=R.IsVerified===!0||String(R.IsVerified).toUpperCase()==="TRUE",G=y.has(R["Order ID"]),X=r.has(R["Order ID"]),Q=J(R["Internal Shipping Method"]),ee=c===R["Order ID"],oe=p===R["Order ID"];return f.jsxs("div",{className:`
                                relative rounded-[2.5rem] p-5 shadow-2xl transition-all duration-300 overflow-hidden group
                                ${X?"bg-blue-900/20 border-2 border-blue-500/50 shadow-blue-900/30":P?"bg-emerald-900/10 border border-emerald-500/20 shadow-emerald-900/10":"bg-[#1e293b]/70 border border-white/5 shadow-black/40 backdrop-blur-xl"}
                            `,children:[X&&f.jsx("div",{className:"absolute inset-0 bg-blue-500/5 pointer-events-none"}),f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[i&&f.jsx("div",{className:"relative z-10",children:f.jsx("input",{type:"checkbox",className:"h-6 w-6 rounded-xl border-gray-600 bg-gray-800 text-blue-500 focus:ring-blue-500/20 cursor-pointer transition-all",checked:X,onChange:()=>i(R["Order ID"])})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>a(R["Order ID"]),className:`
                                                flex items-center gap-2 px-3 py-1 rounded-xl border transition-all active:scale-95
                                                ${ee?"bg-emerald-500/20 border-emerald-500/50 text-emerald-400":"bg-black/30 border-white/5 text-gray-400 hover:text-white"}
                                            `,children:[f.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest font-mono",children:["#",R["Order ID"].substring(0,8)]}),ee&&f.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})]}),f.jsx("button",{onClick:()=>l(R),className:`
                                                flex items-center justify-center w-8 h-8 rounded-xl border transition-all active:scale-95
                                                ${oe?"bg-indigo-500/20 border-indigo-500/50 text-indigo-400":"bg-black/30 border-white/5 text-gray-400 hover:text-white"}
                                            `,children:oe?f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]}),f.jsxs("div",{className:"flex flex-col items-end",children:[f.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[8px] font-black uppercase tracking-wider border ${R["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:R["Payment Status"]}),f.jsx("span",{className:"text-[9px] text-gray-600 font-bold mt-1",children:j(R.Timestamp)})]})]}),f.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[f.jsxs("div",{className:"relative w-14 h-14 rounded-2xl bg-black/40 border border-white/10 p-1 flex-shrink-0",children:[K?f.jsx("img",{src:K,className:"w-full h-full object-cover rounded-xl",alt:"page logo"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 text-[10px] font-black",children:"N/A"}),f.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-900 rounded-lg p-0.5 border border-gray-700",children:ae&&f.jsx("img",{src:ae,className:"w-4 h-4 object-contain",alt:"carrier"})})]}),f.jsxs("div",{className:"flex-grow min-w-0",children:[f.jsx("h3",{className:"text-white font-black text-sm truncate leading-tight mb-1",children:R["Customer Name"]}),f.jsx("p",{className:"text-blue-400 font-mono font-bold text-xs tracking-wide mb-1",children:te}),f.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-gray-500 font-bold truncate",children:[f.jsxs("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),f.jsx("span",{className:"truncate",children:R.Location||"N/A"})]})]})]}),L&&R.Products&&R.Products.length>0&&f.jsx("div",{className:"bg-black/20 rounded-2xl p-3 border border-white/5 mb-5 shadow-inner",children:f.jsxs("div",{className:"flex overflow-x-auto gap-3 pb-2 snap-x no-scrollbar",children:[R.Products.slice(0,4).map((Ne,Ce)=>{var He;const Ee=(He=v.products)==null?void 0:He.find(xe=>xe.ProductName===Ne.name),Ie=Ne.image||(Ee==null?void 0:Ee.ImageURL)||"";return f.jsxs("div",{className:"flex-shrink-0 w-[200px] snap-center bg-gray-800/50 rounded-xl p-2 border border-white/5 flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-lg bg-black/50 flex-shrink-0 overflow-hidden border border-white/5",onClick:()=>N(st(Ie)),children:f.jsx("img",{src:st(Ie),className:"w-full h-full object-cover",alt:""})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("p",{className:"text-[11px] font-bold text-gray-200 truncate",children:Ne.name}),f.jsxs("div",{className:"flex justify-between items-center mt-0.5",children:[f.jsxs("span",{className:"text-[9px] text-gray-500 font-bold",children:["Qty: ",f.jsx("span",{className:"text-white",children:Ne.quantity})]}),Ne.colorInfo&&f.jsx("span",{className:"text-[8px] bg-purple-500/10 text-purple-400 px-1.5 rounded uppercase font-bold",children:Ne.colorInfo})]})]})]},Ce)}),R.Products.length>4&&f.jsxs("button",{onClick:()=>_(R),className:"flex-shrink-0 w-[100px] snap-center bg-gray-800/80 rounded-xl p-2 border border-white/10 flex flex-col items-center justify-center gap-2 hover:bg-gray-700 transition-colors active:scale-95",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600/20 text-blue-400 flex items-center justify-center border border-blue-500/30",children:f.jsxs("span",{className:"font-black text-sm",children:["+",R.Products.length-4]})}),f.jsx("span",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-wider",children:"View All"})]})]})}),f.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[f.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:[f.jsx("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Total Amount"}),f.jsxs("p",{className:"text-lg font-black text-white tracking-tight",children:["$",R["Grand Total"].toFixed(2)]})]}),f.jsx("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Shipping"}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[Q&&f.jsx("img",{src:Q,className:"w-3.5 h-3.5 object-contain",alt:""}),f.jsx("span",{className:"text-xs font-bold text-orange-400",children:(pe=R["Internal Shipping Method"])==null?void 0:pe.substring(0,10)})]})]}),R["Internal Cost"]>0&&f.jsxs("span",{className:"text-[9px] font-mono text-gray-600 font-bold bg-black/20 px-1.5 py-0.5 rounded",children:["-$",(Number(R["Internal Cost"])||0).toFixed(3)]})]})})]}),f.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-white/5",children:[z&&f.jsx("button",{onClick:()=>o&&o(R),className:"flex-1 py-3 bg-blue-600/10 text-blue-400 rounded-xl border border-blue-500/20 font-black text-[10px] uppercase tracking-widest hover:bg-blue-600 hover:text-white transition-all active:scale-95",children:"Edit"}),H&&f.jsx("button",{onClick:()=>s(R),className:"w-12 h-12 flex items-center justify-center bg-gray-800 text-gray-400 rounded-xl border border-white/10 hover:text-white active:scale-90 transition-all",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})}),I&&f.jsxs("div",{className:"ml-auto relative",children:[f.jsx("input",{type:"checkbox",checked:P,onChange:()=>m(R["Order ID"],P),className:`w-12 h-12 rounded-xl appearance-none border transition-all cursor-pointer ${P?"bg-emerald-500 border-emerald-400":"bg-gray-800 border-gray-600"}`}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:G?f.jsx(Pr,{size:"sm"}):P?f.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):f.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase",children:"Check"})})]})]})]},R["Order ID"])}),F<t.length&&f.jsx("div",{className:"flex justify-center pt-4",children:f.jsxs("button",{onClick:E,className:"px-8 py-3 bg-gray-800 text-white rounded-full text-xs font-black uppercase tracking-widest border border-white/10 shadow-lg active:scale-95 transition-all",children:["Load More (",t.length-F," remaining)"]})}),w&&f.jsx(rc,{isOpen:!0,onClose:()=>_(null),maxWidth:"max-w-lg",children:f.jsxs("div",{className:"p-6 bg-[#0f172a] rounded-[2rem] border border-white/10 shadow-2xl",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/10 pb-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight",children:"Products List"}),f.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:["Order #",w["Order ID"].substring(0,8)]})]}),f.jsx("button",{onClick:()=>_(null),className:"p-2 bg-gray-800 rounded-full text-gray-400 hover:text-white transition-all active:scale-90",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:w.Products.map((R,W)=>{var ae,P;const K=(ae=v.products)==null?void 0:ae.find(G=>G.ProductName===R.name),te=R.image||(K==null?void 0:K.ImageURL)||"";return f.jsxs("div",{className:"flex items-start gap-4 p-3 bg-gray-800/50 rounded-2xl border border-white/5 hover:border-white/10 transition-colors",children:[f.jsx("div",{className:"w-16 h-16 rounded-xl bg-black/40 overflow-hidden border border-white/10 flex-shrink-0 shadow-inner",children:f.jsx("img",{src:st(te),className:"w-full h-full object-cover",alt:""})}),f.jsxs("div",{className:"flex-grow min-w-0 pt-1",children:[f.jsx("h4",{className:"text-sm font-bold text-white leading-tight mb-1 line-clamp-2",children:R.name}),f.jsxs("div",{className:"flex flex-wrap gap-2 text-[10px]",children:[f.jsxs("span",{className:"bg-blue-600/20 text-blue-400 px-2 py-0.5 rounded font-black border border-blue-500/20",children:["x",R.quantity]}),f.jsxs("span",{className:"text-gray-400 font-bold self-center",children:["Price: $",(P=R.finalPrice)==null?void 0:P.toFixed(2)]}),R.colorInfo&&f.jsx("span",{className:"bg-purple-600/20 text-purple-400 px-2 py-0.5 rounded font-bold border border-purple-500/20",children:R.colorInfo})]}),f.jsxs("p",{className:"text-xs font-black text-white mt-1.5 text-right tracking-tight",children:["$",(R.total||0).toFixed(2)]})]})]},W)})}),f.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 flex justify-between items-center",children:[f.jsx("span",{className:"text-gray-400 text-xs font-bold uppercase tracking-widest",children:"Total Items"}),f.jsx("span",{className:"text-white font-black text-lg",children:w.Products.reduce((R,W)=>R+(Number(W.quantity)||0),0)})]})]})}),f.jsx("style",{children:`
                .no-scrollbar::-webkit-scrollbar { display: none; }
                .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `})]})},Yy=({orders:t,totals:e,visibleColumns:n,selectedIds:r,onToggleSelect:i,onEdit:o,handlePrint:s,handleCopy:a,handleCopyTemplate:l,copiedId:c,copiedTemplateId:p,toggleOrderVerified:m,updatingIds:y})=>{const{appData:v,previewImage:N}=ve.useContext(mo),A=_=>{if(!_||!v.phoneCarriers)return null;const F=_.replace(/\s/g,"").substring(0,3),D=v.phoneCarriers.find(M=>M.Prefixes.split(",").map(E=>E.trim()).includes(F));return D?st(D.CarrierLogoURL):null},S=_=>{if(!_||!v.shippingMethods)return null;const C=v.shippingMethods.find(F=>F.MethodName===_);return C?st(C.LogosURL):null},w=_=>{let C=(_||"").replace(/[^0-9]/g,"");return C.length>0&&(C="0"+C.replace(/^0+/,"")),C};return f.jsxs("div",{className:"space-y-6 pb-20",children:[f.jsx("div",{className:"w-full",children:f.jsx(ah,{totals:e})}),f.jsx("div",{className:"grid grid-cols-2 gap-5",children:t.map(_=>{var B,J;const C=(B=v.pages)==null?void 0:B.find(re=>re.PageName===_.Page),F=C?st(C.PageLogoURL):"",D=w(_["Customer Phone"]),M=A(D),E=_.IsVerified===!0||String(_.IsVerified).toUpperCase()==="TRUE",L=y.has(_["Order ID"]),z=r.has(_["Order ID"]),H=S(_["Internal Shipping Method"]),I=c===_["Order ID"],k=p===_["Order ID"];return f.jsxs("div",{className:`
                                relative rounded-[2rem] p-5 shadow-xl transition-all duration-300 overflow-hidden group flex flex-col justify-between
                                ${z?"bg-blue-900/20 border-2 border-blue-500/50 shadow-blue-900/20":E?"bg-emerald-900/10 border border-emerald-500/20 shadow-emerald-900/10":"bg-[#1e293b]/60 border border-white/5 shadow-black/30 backdrop-blur-md hover:bg-[#1e293b]/80"}
                            `,children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[i&&f.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-lg border-gray-600 bg-gray-800 text-blue-500 cursor-pointer focus:ring-0",checked:z,onChange:()=>i(_["Order ID"])}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>a(_["Order ID"]),className:`flex items-center gap-2 px-3 py-1.5 rounded-xl border transition-all active:scale-95 ${I?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":"bg-black/30 text-gray-400 border-white/5 hover:text-white"}`,children:[f.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest font-mono",children:["#",_["Order ID"].substring(0,8)]}),I&&f.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})]}),f.jsx("button",{onClick:()=>l(_),className:`flex items-center justify-center w-8 h-8 rounded-xl border transition-all active:scale-95 ${k?"bg-indigo-500/20 border-indigo-500/50 text-indigo-400":"bg-black/30 border-white/5 text-gray-400 hover:text-white"}`,children:k?f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):f.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]}),f.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-wider border ${_["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:_["Payment Status"]})]}),f.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[f.jsx("div",{className:"relative w-12 h-12 rounded-xl bg-black/40 border border-white/10 p-0.5 flex-shrink-0",children:F?f.jsx("img",{src:F,className:"w-full h-full object-cover rounded-[10px]",alt:"logo"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center text-[9px]",children:"N/A"})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("h3",{className:"text-white font-black text-sm truncate",children:_["Customer Name"]}),f.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[M&&f.jsx("img",{src:M,className:"h-3 w-auto object-contain opacity-70",alt:"carrier"}),f.jsx("p",{className:"text-blue-400 font-mono font-bold text-xs",children:D})]}),f.jsxs("div",{className:"text-[10px] text-gray-500 font-bold truncate mt-1 flex items-center gap-1",children:[f.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),_.Location||"N/A"]})]})]}),f.jsx("div",{className:"bg-black/20 rounded-xl p-2.5 border border-white/5 mb-4 overflow-hidden",children:f.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:_.Products&&_.Products.length>0?_.Products.map((re,j)=>{var K;const R=(K=v.products)==null?void 0:K.find(te=>te.ProductName===re.name),W=re.image||(R==null?void 0:R.ImageURL)||"";return f.jsxs("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-gray-800 border border-white/5 overflow-hidden relative cursor-pointer",onClick:()=>N(st(W)),children:[f.jsx("img",{src:st(W),className:"w-full h-full object-cover",alt:""}),f.jsxs("div",{className:"absolute bottom-0 right-0 bg-blue-600 text-white text-[8px] font-black px-1 rounded-tl-md",children:["x",re.quantity]})]},j)}):f.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"No products"})})}),f.jsxs("div",{className:"mt-auto",children:[f.jsxs("div",{className:"flex justify-between items-end mb-4 pt-3 border-t border-white/5",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-wider",children:"Total"}),f.jsxs("p",{className:"text-xl font-black text-white tracking-tight",children:["$",_["Grand Total"].toFixed(2)]})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-wider",children:"Shipping"}),f.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[H&&f.jsx("img",{src:H,className:"w-3.5 h-3.5 object-contain",alt:""}),f.jsx("span",{className:"text-xs font-bold text-orange-400",children:(J=_["Internal Shipping Method"])==null?void 0:J.substring(0,10)})]})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[o&&f.jsx("button",{onClick:()=>o(_),className:"flex-1 py-2.5 bg-blue-600/10 text-blue-400 hover:bg-blue-600 hover:text-white rounded-xl border border-blue-500/20 font-black text-[10px] uppercase tracking-widest transition-all",children:"Edit"}),f.jsx("button",{onClick:()=>s(_),className:"w-10 h-10 flex items-center justify-center bg-gray-800 text-gray-400 hover:text-white rounded-xl border border-white/10 transition-all",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"checkbox",checked:E,onChange:()=>m(_["Order ID"],E),className:`w-10 h-10 rounded-xl appearance-none border transition-all cursor-pointer ${E?"bg-emerald-500 border-emerald-400":"bg-gray-800 border-gray-600"}`}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:L?f.jsx(Pr,{size:"sm"}):E?f.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):f.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase",children:"OK"})})]})]})]})]},_["Order ID"])})})]})},ix=({orders:t,onEdit:e,showActions:n,visibleColumns:r,selectedIds:i=new Set,onToggleSelect:o,onToggleSelectAll:s})=>{const{refreshData:a}=ve.useContext(mo),[l,c]=ve.useState(null),[p,m]=ve.useState(null),[y,v]=ve.useState(new Set),[N,A]=ve.useState(t);ve.useEffect(()=>{A(t)},[t]);const S=zy(t),w=async(L,z)=>{const H=!z;A(I=>I.map(k=>k["Order ID"]===L?{...k,IsVerified:H}:k)),v(I=>new Set(I).add(L));try{if(!(await fetch(`${ni}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"AllOrders",primaryKey:{"Order ID":L},newData:{IsVerified:H}})})).ok)throw new Error("Failed to save");a()}catch(I){console.error("Verification toggle failed:",I),A(k=>k.map(B=>B["Order ID"]===L?{...B,IsVerified:z}:B)),alert("រក្សាទុកស្ថានភាពមិនបានសម្រេច!")}finally{v(I=>{const k=new Set(I);return k.delete(L),k})}},_=L=>{let z=(L||"").replace(/[^0-9]/g,"");return z.length>0&&(z="0"+z.replace(/^0+/,"")),z},C=L=>{navigator.clipboard.writeText(L),c(L),setTimeout(()=>c(null),2e3)},F=L=>{const z=L.Products.map(B=>{const J=parseFloat(String(B.finalPrice||0)),re=Number.isInteger(J)?J:J.toFixed(2),j=B.colorInfo?`-${B.colorInfo}`:"";return`🛍️ ${B.name}(${re}$)${j} - x${B.quantity} ($${(B.total||0).toFixed(2)})`}).join(`
`),H=L["Payment Status"]==="Paid"?"🟩 Paid":"🟥 COD (Unpaid)";let I="";try{const B=new Date(L.Timestamp);isNaN(B.getTime())?I=String(L.Timestamp||"").split(" ")[0]:I=`${String(B.getDate()).padStart(2,"0")}/${String(B.getMonth()+1).padStart(2,"0")}/${B.getFullYear()}`}catch{I=String(L.Timestamp||"")}const k=L["Address Details"]||"(មិនបានបញ្ជាក់)";return`✅សូមបងពិនិត្យលេខទូរស័ព្ទ និងទីតាំងម្ដងទៀតបង 🙏
📃 Page: ${L.Page}
👤 អតិថិជន: ${L["Customer Name"]}
📞 លេខទូរស័ព្ទ: ${L["Customer Phone"]}
📍 ទីតាំង: ${L.Location}
🏠 អាសយដ្ឋាន: ${k}

 ----------- ផលិតផល -----------
${z}
--------------------------------------

💰 សរុប:
  - តម្លៃទំនិញ: $${(L.Subtotal||0).toFixed(2)}
  - សេវាដឹក: $${(L["Shipping Fee (Customer)"]||0).toFixed(2)}
  - សរុបចុងក្រោយ: $${(L["Grand Total"]||0).toFixed(2)}
 ${H}

🚚 វិធីសាស្រ្តដឹកជញ្ជូន: ${L["Internal Shipping Method"]}
${I}
--------------------------------------
អរគុណបង🙏🥰 | ID: ${L["Order ID"]}`},E={orders:N,totals:S,visibleColumns:r,selectedIds:i,onToggleSelect:o,onEdit:e,handlePrint:L=>{if(!L)return;const z=_(L["Customer Phone"]),H=new URLSearchParams({id:L["Order ID"],name:L["Customer Name"]||"",phone:z,location:L.Location||"",address:L["Address Details"]||"",total:(L["Grand Total"]||0).toString(),payment:L["Payment Status"]||"Unpaid",shipping:L["Internal Shipping Method"]||"N/A",page:L.Page||"",user:L.User||""}),k=(L.Note||"").match(/https?:\/\/(www\.)?(google\.com\/maps|maps\.app\.goo\.gl)\/[^\s]+/);k&&H.set("map",k[0]),window.open(`${Jh}?${H.toString()}`,"_blank")},handleCopy:C,handleCopyTemplate:L=>{const z=F(L);navigator.clipboard.writeText(z),m(L["Order ID"]),setTimeout(()=>m(null),2e3)},copiedId:l,copiedTemplateId:p,toggleOrderVerified:w,updatingIds:y};return f.jsxs("div",{className:"w-full flex flex-col",children:[f.jsxs("div",{className:"flex-grow space-y-4",children:[f.jsx("div",{className:"hidden xl:block",children:f.jsx($y,{...E,onToggleSelectAll:s})}),f.jsx("div",{className:"hidden md:block xl:hidden",children:f.jsx(Yy,{...E})}),f.jsx("div",{className:"md:hidden",children:f.jsx(Jy,{...E})})]}),f.jsx("div",{className:"h-64 md:h-[400px] w-full pointer-events-none opacity-0 shrink-0","aria-hidden":"true"})]})};export{Gy as B,Py as D,We as E,yv as G,ix as O,rp as P,Zs as S,bt as _,Qy as a,mv as b,Zy as c,ex as d,tx as e,nx as f,Ay as g,Ey as h,rx as i,My as j,Iy as k,Wd as l};
