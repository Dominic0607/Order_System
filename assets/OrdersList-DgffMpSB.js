const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-DEmo7y0D.js","assets/index-vEQuR0p0.js","assets/index-BXlZ-H93.css","assets/imageCompressor-D5vYYzIg.js"])))=>i.map(i=>d[i]);
import{j as l,r as ve,c as st,_ as Lo,g as Hc,b as Wc,S as Rn,A as za,M as Rl,W as qa,f as Vc,L as Gc}from"./index-vEQuR0p0.js";import{c as $c}from"./imageCompressor-D5vYYzIg.js";const kh=({label:n,value:e,icon:r,colorClass:a})=>l.jsxs("div",{className:"relative group overflow-hidden bg-gray-800/30 backdrop-blur-xl border border-white/5 p-6 rounded-[2rem] transition-all duration-500 hover:bg-gray-800/50 hover:border-white/10 hover:shadow-2xl",children:[l.jsxs("div",{className:"relative z-10 flex justify-between items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-400 text-xs lg:text-sm font-black uppercase tracking-widest mb-1.5 transition-all",children:n}),l.jsx("h3",{className:"text-3xl lg:text-4xl 2xl:text-5xl font-black text-white tracking-tighter transition-all",children:e})]}),l.jsx("div",{className:`w-12 h-12 lg:w-16 lg:h-16 rounded-2xl bg-gradient-to-br ${a} flex items-center justify-center text-white text-xl lg:text-2xl shadow-lg shadow-blue-900/20 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 flex-shrink-0`,children:r})]}),l.jsx("div",{className:`absolute -right-6 -bottom-6 w-32 h-32 lg:w-40 lg:h-40 rounded-full bg-gradient-to-br ${a} opacity-0 group-hover:opacity-10 blur-[40px] transition-opacity duration-700`})]}),Sh=({data:n,title:e})=>{const[r,a]=ve.useState(null);if(!n||n.length===0)return l.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 min-h-[300px]",children:"No data available for chart."});const o=350,i=500,h=50,c=100,d=40,g=10,w=o-d-10,m=i/n.length-g,v=Math.max(...n.map(j=>j.value),0),p=v===0?0:w/v,L=(j,y)=>{const C=j.currentTarget.getBoundingClientRect(),R=`${y.label}: $${y.value.toFixed(2)}`;a({visible:!0,x:C.left+window.scrollX,y:C.top+window.scrollY,content:R})},P=()=>{a(null)},x=(j=>{if(j===0)return[0];const y=5;let C=Math.ceil(j/y);const R=Math.pow(10,Math.floor(Math.log10(C||1))),B=C/R;return R>0&&(B>5?C=10*R:B>2?C=5*R:B>1&&(C=2*R)),C===0?[0,j]:Array.from({length:y+2},(_,M)=>M*C).filter(_=>_<=j*1.1)})(v);return l.jsxs("div",{className:"relative",children:[l.jsx("h3",{className:"text-lg font-bold mb-4 text-white text-center",children:e}),l.jsx("div",{className:"w-full overflow-x-auto",children:l.jsxs("svg",{viewBox:`0 0 ${i+h} ${o+c}`,className:"min-w-[500px]",preserveAspectRatio:"xMinYMin meet",children:[l.jsx("g",{className:"y-axis",children:x.map(j=>l.jsxs("g",{transform:`translate(0, ${o-j*p})`,children:[l.jsx("line",{x1:h-5,y1:"0",x2:i+h,y2:"0",stroke:"#374151"}),l.jsx("text",{x:h-10,y:"3",textAnchor:"end",fill:"#9ca3af",fontSize:"12",children:j>=1e3?`${(j/1e3).toFixed(0)}k`:j})]},j))}),l.jsx("g",{className:"bars",transform:`translate(${h}, 0)`,children:n.map((j,y)=>{const C=j.value*p,R=y*(m+g)+g/2,B=o-C,_=30;return l.jsxs("g",{children:[j.imageUrl&&l.jsx("image",{href:st(j.imageUrl),x:R+m/2-_/2,y:B-_-5,height:_,width:_,clipPath:`circle(${_/2}px at center)`}),l.jsx("rect",{x:R,y:B,width:m,height:C,fill:"#3b82f6",className:"transition-all duration-300 hover:opacity-80",onMouseOver:M=>L(M,j),onMouseOut:P}),l.jsx("text",{x:R+m/2,y:o+15,textAnchor:"end",fill:"#9ca3af",fontSize:"12",className:"select-none",transform:`rotate(-60 ${R+m/2},${o+15})`,children:j.label})]},y)})})]})}),r&&l.jsx("div",{className:"fixed p-2 text-xs text-white bg-gray-900 border border-gray-600 rounded-md shadow-lg z-50",style:{left:r.x,top:r.y-35,pointerEvents:"none",transform:"translateX(-50%)"},children:r.content})]})};function gt(n){"@babel/helpers - typeof";return gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt(n)}var nr=Uint8Array,vr=Uint16Array,Bo=Int32Array,Ss=new nr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ls=new nr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ao=new nr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bl=function(n,e){for(var r=new vr(31),a=0;a<31;++a)r[a]=e+=1<<n[a-1];for(var o=new Bo(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)o[i]=i-r[a]<<5|a;return{b:r,r:o}},El=Bl(Ss,2),ql=El.b,Po=El.r;ql[28]=258,Po[258]=28;var zl=Bl(Ls,0),Yc=zl.b,pl=zl.r,_o=new vr(32768);for(var jt=0;jt<32768;++jt){var In=(jt&43690)>>1|(jt&21845)<<1;In=(In&52428)>>2|(In&13107)<<2,In=(In&61680)>>4|(In&3855)<<4,_o[jt]=((In&65280)>>8|(In&255)<<8)>>1}var rn=(function(n,e,r){for(var a=n.length,o=0,i=new vr(e);o<a;++o)n[o]&&++i[n[o]-1];var h=new vr(e);for(o=1;o<e;++o)h[o]=h[o-1]+i[o-1]<<1;var c;if(r){c=new vr(1<<e);var d=15-e;for(o=0;o<a;++o)if(n[o])for(var g=o<<4|n[o],w=e-n[o],m=h[n[o]-1]++<<w,v=m|(1<<w)-1;m<=v;++m)c[_o[m]>>d]=g}else for(c=new vr(a),o=0;o<a;++o)n[o]&&(c[o]=_o[h[n[o]-1]++]>>15-n[o]);return c}),Bn=new nr(288);for(var jt=0;jt<144;++jt)Bn[jt]=8;for(var jt=144;jt<256;++jt)Bn[jt]=9;for(var jt=256;jt<280;++jt)Bn[jt]=7;for(var jt=280;jt<288;++jt)Bn[jt]=8;var Li=new nr(32);for(var jt=0;jt<32;++jt)Li[jt]=5;var Jc=rn(Bn,9,0),Xc=rn(Bn,9,1),Kc=rn(Li,5,0),Zc=rn(Li,5,1),bo=function(n){for(var e=n[0],r=1;r<n.length;++r)n[r]>e&&(e=n[r]);return e},Er=function(n,e,r){var a=e/8|0;return(n[a]|n[a+1]<<8)>>(e&7)&r},xo=function(n,e){var r=e/8|0;return(n[r]|n[r+1]<<8|n[r+2]<<16)>>(e&7)},Eo=function(n){return(n+7)/8|0},Ul=function(n,e,r){return(r==null||r>n.length)&&(r=n.length),new nr(n.subarray(e,r))},Qc=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zr=function(n,e,r){var a=new Error(e||Qc[n]);if(a.code=n,Error.captureStackTrace&&Error.captureStackTrace(a,zr),!r)throw a;return a},eu=function(n,e,r,a){var o=n.length,i=0;if(!o||e.f&&!e.l)return r||new nr(0);var h=!r,c=h||e.i!=2,d=e.i;h&&(r=new nr(o*3));var g=function(Se){var Ae=r.length;if(Se>Ae){var Pe=new nr(Math.max(Ae*2,Se));Pe.set(r),r=Pe}},w=e.f||0,m=e.p||0,v=e.b||0,p=e.l,L=e.d,P=e.m,A=e.n,x=o*8;do{if(!p){w=Er(n,m,1);var j=Er(n,m+1,3);if(m+=3,j)if(j==1)p=Xc,L=Zc,P=9,A=5;else if(j==2){var B=Er(n,m,31)+257,_=Er(n,m+10,15)+4,M=B+Er(n,m+5,31)+1;m+=14;for(var H=new nr(M),K=new nr(19),S=0;S<_;++S)K[Ao[S]]=Er(n,m+S*3,7);m+=_*3;for(var N=bo(K),U=(1<<N)-1,$=rn(K,N,1),S=0;S<M;){var ee=$[Er(n,m,U)];m+=ee&15;var y=ee>>4;if(y<16)H[S++]=y;else{var E=0,T=0;for(y==16?(T=3+Er(n,m,3),m+=2,E=H[S-1]):y==17?(T=3+Er(n,m,7),m+=3):y==18&&(T=11+Er(n,m,127),m+=7);T--;)H[S++]=E}}var G=H.subarray(0,B),V=H.subarray(B);P=bo(G),A=bo(V),p=rn(G,P,1),L=rn(V,A,1)}else zr(1);else{var y=Eo(m)+4,C=n[y-4]|n[y-3]<<8,R=y+C;if(R>o){d&&zr(0);break}c&&g(v+C),r.set(n.subarray(y,R),v),e.b=v+=C,e.p=m=R*8,e.f=w;continue}if(m>x){d&&zr(0);break}}c&&g(v+131072);for(var re=(1<<P)-1,se=(1<<A)-1,k=m;;k=m){var E=p[xo(n,m)&re],z=E>>4;if(m+=E&15,m>x){d&&zr(0);break}if(E||zr(2),z<256)r[v++]=z;else if(z==256){k=m,p=null;break}else{var Y=z-254;if(z>264){var S=z-257,J=Ss[S];Y=Er(n,m,(1<<J)-1)+ql[S],m+=J}var Z=L[xo(n,m)&se],le=Z>>4;Z||zr(3),m+=Z&15;var V=Yc[le];if(le>3){var J=Ls[le];V+=xo(n,m)&(1<<J)-1,m+=J}if(m>x){d&&zr(0);break}c&&g(v+131072);var ce=v+Y;if(v<V){var de=i-V,Ne=Math.min(V,ce);for(de+v<0&&zr(3);v<Ne;++v)r[v]=a[de+v]}for(;v<ce;++v)r[v]=r[v-V]}}e.l=p,e.p=k,e.b=v,e.f=w,p&&(w=1,e.m=P,e.d=L,e.n=A)}while(!w);return v!=r.length&&h?Ul(r,0,v):r.subarray(0,v)},mn=function(n,e,r){r<<=e&7;var a=e/8|0;n[a]|=r,n[a+1]|=r>>8},xi=function(n,e,r){r<<=e&7;var a=e/8|0;n[a]|=r,n[a+1]|=r>>8,n[a+2]|=r>>16},vo=function(n,e){for(var r=[],a=0;a<n.length;++a)n[a]&&r.push({s:a,f:n[a]});var o=r.length,i=r.slice();if(!o)return{t:Wl,l:0};if(o==1){var h=new nr(r[0].s+1);return h[r[0].s]=1,{t:h,l:1}}r.sort(function(R,B){return R.f-B.f}),r.push({s:-1,f:25001});var c=r[0],d=r[1],g=0,w=1,m=2;for(r[0]={s:-1,f:c.f+d.f,l:c,r:d};w!=o-1;)c=r[r[g].f<r[m].f?g++:m++],d=r[g!=w&&r[g].f<r[m].f?g++:m++],r[w++]={s:-1,f:c.f+d.f,l:c,r:d};for(var v=i[0].s,a=1;a<o;++a)i[a].s>v&&(v=i[a].s);var p=new vr(v+1),L=Co(r[w-1],p,0);if(L>e){var a=0,P=0,A=L-e,x=1<<A;for(i.sort(function(B,_){return p[_.s]-p[B.s]||B.f-_.f});a<o;++a){var j=i[a].s;if(p[j]>e)P+=x-(1<<L-p[j]),p[j]=e;else break}for(P>>=A;P>0;){var y=i[a].s;p[y]<e?P-=1<<e-p[y]++-1:++a}for(;a>=0&&P;--a){var C=i[a].s;p[C]==e&&(--p[C],++P)}L=e}return{t:new nr(p),l:L}},Co=function(n,e,r){return n.s==-1?Math.max(Co(n.l,e,r+1),Co(n.r,e,r+1)):e[n.s]=r},gl=function(n){for(var e=n.length;e&&!n[--e];);for(var r=new vr(++e),a=0,o=n[0],i=1,h=function(d){r[a++]=d},c=1;c<=e;++c)if(n[c]==o&&c!=e)++i;else{if(!o&&i>2){for(;i>138;i-=138)h(32754);i>2&&(h(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(h(o),--i;i>6;i-=6)h(8304);i>2&&(h(i-3<<5|8208),i=0)}for(;i--;)h(o);i=1,o=n[c]}return{c:r.subarray(0,a),n:e}},vi=function(n,e){for(var r=0,a=0;a<e.length;++a)r+=n[a]*e[a];return r},Hl=function(n,e,r){var a=r.length,o=Eo(e+2);n[o]=a&255,n[o+1]=a>>8,n[o+2]=n[o]^255,n[o+3]=n[o+1]^255;for(var i=0;i<a;++i)n[o+i+4]=r[i];return(o+4+a)*8},ml=function(n,e,r,a,o,i,h,c,d,g,w){mn(e,w++,r),++o[256];for(var m=vo(o,15),v=m.t,p=m.l,L=vo(i,15),P=L.t,A=L.l,x=gl(v),j=x.c,y=x.n,C=gl(P),R=C.c,B=C.n,_=new vr(19),M=0;M<j.length;++M)++_[j[M]&31];for(var M=0;M<R.length;++M)++_[R[M]&31];for(var H=vo(_,7),K=H.t,S=H.l,N=19;N>4&&!K[Ao[N-1]];--N);var U=g+5<<3,$=vi(o,Bn)+vi(i,Li)+h,ee=vi(o,v)+vi(i,P)+h+14+3*N+vi(_,K)+2*_[16]+3*_[17]+7*_[18];if(d>=0&&U<=$&&U<=ee)return Hl(e,w,n.subarray(d,d+g));var E,T,G,V;if(mn(e,w,1+(ee<$)),w+=2,ee<$){E=rn(v,p,0),T=v,G=rn(P,A,0),V=P;var re=rn(K,S,0);mn(e,w,y-257),mn(e,w+5,B-1),mn(e,w+10,N-4),w+=14;for(var M=0;M<N;++M)mn(e,w+3*M,K[Ao[M]]);w+=3*N;for(var se=[j,R],k=0;k<2;++k)for(var z=se[k],M=0;M<z.length;++M){var Y=z[M]&31;mn(e,w,re[Y]),w+=K[Y],Y>15&&(mn(e,w,z[M]>>5&127),w+=z[M]>>12)}}else E=Jc,T=Bn,G=Kc,V=Li;for(var M=0;M<c;++M){var J=a[M];if(J>255){var Y=J>>18&31;xi(e,w,E[Y+257]),w+=T[Y+257],Y>7&&(mn(e,w,J>>23&31),w+=Ss[Y]);var Z=J&31;xi(e,w,G[Z]),w+=V[Z],Z>3&&(xi(e,w,J>>5&8191),w+=Ls[Z])}else xi(e,w,E[J]),w+=T[J]}return xi(e,w,E[256]),w+T[256]},tu=new Bo([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Wl=new nr(0),ru=function(n,e,r,a,o,i){var h=i.z||n.length,c=new nr(a+h+5*(1+Math.ceil(h/7e3))+o),d=c.subarray(a,c.length-o),g=i.l,w=(i.r||0)&7;if(e){w&&(d[0]=i.r>>3);for(var m=tu[e-1],v=m>>13,p=m&8191,L=(1<<r)-1,P=i.p||new vr(32768),A=i.h||new vr(L+1),x=Math.ceil(r/3),j=2*x,y=function(We){return(n[We]^n[We+1]<<x^n[We+2]<<j)&L},C=new Bo(25e3),R=new vr(288),B=new vr(32),_=0,M=0,H=i.i||0,K=0,S=i.w||0,N=0;H+2<h;++H){var U=y(H),$=H&32767,ee=A[U];if(P[$]=ee,A[U]=$,S<=H){var E=h-H;if((_>7e3||K>24576)&&(E>423||!g)){w=ml(n,d,0,C,R,B,M,K,N,H-N,w),K=_=M=0,N=H;for(var T=0;T<286;++T)R[T]=0;for(var T=0;T<30;++T)B[T]=0}var G=2,V=0,re=p,se=$-ee&32767;if(E>2&&U==y(H-se))for(var k=Math.min(v,E)-1,z=Math.min(32767,H),Y=Math.min(258,E);se<=z&&--re&&$!=ee;){if(n[H+G]==n[H+G-se]){for(var J=0;J<Y&&n[H+J]==n[H+J-se];++J);if(J>G){if(G=J,V=se,J>k)break;for(var Z=Math.min(se,J-2),le=0,T=0;T<Z;++T){var ce=H-se+T&32767,de=P[ce],Ne=ce-de&32767;Ne>le&&(le=Ne,ee=ce)}}}$=ee,ee=P[$],se+=$-ee&32767}if(V){C[K++]=268435456|Po[G]<<18|pl[V];var Se=Po[G]&31,Ae=pl[V]&31;M+=Ss[Se]+Ls[Ae],++R[257+Se],++B[Ae],S=H+G,++_}else C[K++]=n[H],++R[n[H]]}}for(H=Math.max(H,S);H<h;++H)C[K++]=n[H],++R[n[H]];w=ml(n,d,g,C,R,B,M,K,N,H-N,w),g||(i.r=w&7|d[w/8|0]<<3,w-=7,i.h=A,i.p=P,i.i=H,i.w=S)}else{for(var H=i.w||0;H<h+g;H+=65535){var Pe=H+65535;Pe>=h&&(d[w/8|0]=g,Pe=h),w=Hl(d,w+1,n.subarray(H,Pe))}i.i=h}return Ul(c,0,a+Eo(w)+o)},Vl=function(){var n=1,e=0;return{p:function(r){for(var a=n,o=e,i=r.length|0,h=0;h!=i;){for(var c=Math.min(h+2655,i);h<c;++h)o+=a+=r[h];a=(a&65535)+15*(a>>16),o=(o&65535)+15*(o>>16)}n=a,e=o},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},nu=function(n,e,r,a,o){if(!o&&(o={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),h=new nr(i.length+n.length);h.set(i),h.set(n,i.length),n=h,o.w=i.length}return ru(n,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,r,a,o)},Gl=function(n,e,r){for(;r;++e)n[e]=r,r>>>=8},au=function(n,e){var r=e.level,a=r==0?0:r<6?1:r==9?3:2;if(n[0]=120,n[1]=a<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var o=Vl();o.p(e.dictionary),Gl(n,2,o.d())}},iu=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&zr(6,"invalid zlib data"),(n[1]>>5&1)==1&&zr(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Io(n,e){e||(e={});var r=Vl();r.p(n);var a=nu(n,e,e.dictionary?6:2,4);return au(a,e),Gl(a,a.length-4,r.d()),a}function su(n,e){return eu(n.subarray(iu(n),-4),{i:2},e,e)}var ou=typeof TextDecoder<"u"&&new TextDecoder,lu=0;try{ou.decode(Wl,{stream:!0}),lu=1}catch{}var Ve=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function wo(){Ve.console&&typeof Ve.console.log=="function"&&Ve.console.log.apply(Ve.console,arguments)}var wt={log:wo,warn:function(n){Ve.console&&(typeof Ve.console.warn=="function"?Ve.console.warn.apply(Ve.console,arguments):wo.call(null,arguments))},error:function(n){Ve.console&&(typeof Ve.console.error=="function"?Ve.console.error.apply(Ve.console,arguments):wo(n))}};function yo(n,e,r){var a=new XMLHttpRequest;a.open("GET",n),a.responseType="blob",a.onload=function(){Qn(a.response,e,r)},a.onerror=function(){wt.error("could not download file")},a.send()}function bl(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function xs(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var yi,Fo,Qn=Ve.saveAs||((typeof window>"u"?"undefined":gt(window))!=="object"||window!==Ve?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,r){var a=Ve.URL||Ve.webkitURL,o=document.createElement("a");e=e||n.name||"download",o.download=e,o.rel="noopener",typeof n=="string"?(o.href=n,o.origin!==location.origin?bl(o.href)?yo(n,e,r):xs(o,o.target="_blank"):xs(o)):(o.href=a.createObjectURL(n),setTimeout((function(){a.revokeObjectURL(o.href)}),4e4),setTimeout((function(){xs(o)}),0))}:"msSaveOrOpenBlob"in navigator?function(n,e,r){if(e=e||n.name||"download",typeof n=="string")if(bl(n))yo(n,e,r);else{var a=document.createElement("a");a.href=n,a.target="_blank",setTimeout((function(){xs(a)}))}else navigator.msSaveOrOpenBlob((function(o,i){return i===void 0?i={autoBom:!1}:gt(i)!=="object"&&(wt.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o})(n,r),e)}:function(n,e,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof n=="string")return yo(n,e,r);var o=n.type==="application/octet-stream",i=/constructor/i.test(Ve.HTMLElement)||Ve.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||o&&i)&&(typeof FileReader>"u"?"undefined":gt(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var w=c.result;w=h?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=w:location=w,a=null},c.readAsDataURL(n)}else{var d=Ve.URL||Ve.webkitURL,g=d.createObjectURL(n);a?a.location=g:location.href=g,a=null,setTimeout((function(){d.revokeObjectURL(g)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $l(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],a=0;a<r.length;a++){var o=r[a].re,i=r[a].process,h=o.exec(n);h&&(e=i(h),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),d=this.g.toString(16),g=this.b.toString(16);return c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),g.length==1&&(g="0"+g),"#"+c+d+g}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function No(n,e){var r=n[0],a=n[1],o=n[2],i=n[3];r=Qt(r,a,o,i,e[0],7,-680876936),i=Qt(i,r,a,o,e[1],12,-389564586),o=Qt(o,i,r,a,e[2],17,606105819),a=Qt(a,o,i,r,e[3],22,-1044525330),r=Qt(r,a,o,i,e[4],7,-176418897),i=Qt(i,r,a,o,e[5],12,1200080426),o=Qt(o,i,r,a,e[6],17,-1473231341),a=Qt(a,o,i,r,e[7],22,-45705983),r=Qt(r,a,o,i,e[8],7,1770035416),i=Qt(i,r,a,o,e[9],12,-1958414417),o=Qt(o,i,r,a,e[10],17,-42063),a=Qt(a,o,i,r,e[11],22,-1990404162),r=Qt(r,a,o,i,e[12],7,1804603682),i=Qt(i,r,a,o,e[13],12,-40341101),o=Qt(o,i,r,a,e[14],17,-1502002290),r=er(r,a=Qt(a,o,i,r,e[15],22,1236535329),o,i,e[1],5,-165796510),i=er(i,r,a,o,e[6],9,-1069501632),o=er(o,i,r,a,e[11],14,643717713),a=er(a,o,i,r,e[0],20,-373897302),r=er(r,a,o,i,e[5],5,-701558691),i=er(i,r,a,o,e[10],9,38016083),o=er(o,i,r,a,e[15],14,-660478335),a=er(a,o,i,r,e[4],20,-405537848),r=er(r,a,o,i,e[9],5,568446438),i=er(i,r,a,o,e[14],9,-1019803690),o=er(o,i,r,a,e[3],14,-187363961),a=er(a,o,i,r,e[8],20,1163531501),r=er(r,a,o,i,e[13],5,-1444681467),i=er(i,r,a,o,e[2],9,-51403784),o=er(o,i,r,a,e[7],14,1735328473),r=tr(r,a=er(a,o,i,r,e[12],20,-1926607734),o,i,e[5],4,-378558),i=tr(i,r,a,o,e[8],11,-2022574463),o=tr(o,i,r,a,e[11],16,1839030562),a=tr(a,o,i,r,e[14],23,-35309556),r=tr(r,a,o,i,e[1],4,-1530992060),i=tr(i,r,a,o,e[4],11,1272893353),o=tr(o,i,r,a,e[7],16,-155497632),a=tr(a,o,i,r,e[10],23,-1094730640),r=tr(r,a,o,i,e[13],4,681279174),i=tr(i,r,a,o,e[0],11,-358537222),o=tr(o,i,r,a,e[3],16,-722521979),a=tr(a,o,i,r,e[6],23,76029189),r=tr(r,a,o,i,e[9],4,-640364487),i=tr(i,r,a,o,e[12],11,-421815835),o=tr(o,i,r,a,e[15],16,530742520),r=rr(r,a=tr(a,o,i,r,e[2],23,-995338651),o,i,e[0],6,-198630844),i=rr(i,r,a,o,e[7],10,1126891415),o=rr(o,i,r,a,e[14],15,-1416354905),a=rr(a,o,i,r,e[5],21,-57434055),r=rr(r,a,o,i,e[12],6,1700485571),i=rr(i,r,a,o,e[3],10,-1894986606),o=rr(o,i,r,a,e[10],15,-1051523),a=rr(a,o,i,r,e[1],21,-2054922799),r=rr(r,a,o,i,e[8],6,1873313359),i=rr(i,r,a,o,e[15],10,-30611744),o=rr(o,i,r,a,e[6],15,-1560198380),a=rr(a,o,i,r,e[13],21,1309151649),r=rr(r,a,o,i,e[4],6,-145523070),i=rr(i,r,a,o,e[11],10,-1120210379),o=rr(o,i,r,a,e[2],15,718787259),a=rr(a,o,i,r,e[9],21,-343485551),n[0]=Tn(r,n[0]),n[1]=Tn(a,n[1]),n[2]=Tn(o,n[2]),n[3]=Tn(i,n[3])}function As(n,e,r,a,o,i){return e=Tn(Tn(e,n),Tn(a,i)),Tn(e<<o|e>>>32-o,r)}function Qt(n,e,r,a,o,i,h){return As(e&r|~e&a,n,e,o,i,h)}function er(n,e,r,a,o,i,h){return As(e&a|r&~a,n,e,o,i,h)}function tr(n,e,r,a,o,i,h){return As(e^r^a,n,e,o,i,h)}function rr(n,e,r,a,o,i,h){return As(r^(e|~a),n,e,o,i,h)}function Yl(n){var e,r=n.length,a=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)No(a,cu(n.substring(e-64,e)));n=n.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)o[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(No(a,o),e=0;e<16;e++)o[e]=0;return o[14]=8*r,No(a,o),a}function cu(n){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return r}yi=Ve.atob.bind(Ve),Fo=Ve.btoa.bind(Ve);var xl="0123456789abcdef".split("");function uu(n){for(var e="",r=0;r<4;r++)e+=xl[n>>8*r+4&15]+xl[n>>8*r&15];return e}function hu(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Mo(n){return Yl(n).map(hu).join("")}var du=(function(n){for(var e=0;e<n.length;e++)n[e]=uu(n[e]);return n.join("")})(Yl("hello"))!="5d41402abc4b2a76b9719d911017c592";function Tn(n,e){if(du){var r=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(r>>16)<<16|65535&r}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Do(n,e){var r,a,o,i;if(n!==r){for(var h=(o=n,i=1+(256/n.length>>0),new Array(i+1).join(o)),c=[],d=0;d<256;d++)c[d]=d;var g=0;for(d=0;d<256;d++){var w=c[d];g=(g+w+h.charCodeAt(d))%256,c[d]=c[g],c[g]=w}r=n,a=c}else c=a;var m=e.length,v=0,p=0,L="";for(d=0;d<m;d++)p=(p+(w=c[v=(v+1)%256]))%256,c[v]=c[p],c[p]=w,h=c[(c[v]+c[p])%256],L+=String.fromCharCode(e.charCodeAt(d)^h);return L}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var vl={print:4,modify:8,copy:16,"annot-forms":32};function Ba(n,e,r,a){this.v=1,this.r=2;var o=192;n.forEach((function(c){if(vl.perm!==void 0)throw new Error("Invalid permission: "+c);o+=vl[c]})),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(e+this.padding).substr(0,32),h=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,h),this.P=-(1+(255^o)),this.encryptionKey=Mo(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=Do(this.encryptionKey,this.padding)}function Ea(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",r=n.length,a=0;a<r;a++){var o=n.charCodeAt(a);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=n[a]}return e}function wl(n){if(gt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,a,o){if(o=o||!1,typeof r!="string"||typeof a!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[a,!!o],i},this.unsubscribe=function(r){for(var a in e)if(e[a][r])return delete e[a][r],Object.keys(e[a]).length===0&&delete e[a],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),o=[];for(var i in e[r]){var h=e[r][i];try{h[0].apply(n,a)}catch(c){Ve.console&&wt.error("jsPDF PubSub Error",c.message,c)}h[1]&&o.push(i)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Ai(n){if(!(this instanceof Ai))return new Ai(n);var e="opacity,stroke-opacity".split(",");for(var r in n)n.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=n[r]);this.id="",this.objectNumber=-1}function Jl(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Dn(n,e,r,a,o){if(!(this instanceof Dn))return new Dn(n,e,r,a,o);this.type=n==="axial"?2:3,this.coords=e,this.colors=r,Jl.call(this,a,o)}function ea(n,e,r,a,o){if(!(this instanceof ea))return new ea(n,e,r,a,o);this.boundingBox=n,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Jl.call(this,a,o)}function Ue(n){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],o=arguments[2],i=arguments[3],h=[],c=1,d=16,g="S",w=null;gt(n=n||{})==="object"&&(r=n.orientation,a=n.unit||a,o=n.format||o,i=n.compress||n.compressPdf||i,(w=n.encryption||null)!==null&&(w.userPassword=w.userPassword||"",w.ownerPassword=w.ownerPassword||"",w.userPermissions=w.userPermissions||[]),c=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(d=n.floatPrecision),g=n.defaultPathOperation||"S"),h=n.filters||(i===!0?["FlateEncode"]:h),a=a||"mm",r=(""+(r||"P")).toLowerCase();var m=n.putOnlyUsedFonts||!1,v={},p={internal:{},__private__:{}};p.__private__.PubSub=wl;var L="1.3",P=p.__private__.getPdfVersion=function(){return L};p.__private__.setPdfVersion=function(u){L=u};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return A};var x=p.__private__.getPageFormat=function(u){return A[u]};o=o||"a4";var j={COMPAT:"compat",ADVANCED:"advanced"},y=j.COMPAT;function C(){this.saveGraphicsState(),te(new He(De,0,0,-De,0,vn()*De).toString()+" cm"),this.setFontSize(this.getFontSize()/De),g="n",y=j.ADVANCED}function R(){this.restoreGraphicsState(),g="S",y=j.COMPAT}var B=p.__private__.combineFontStyleAndFontWeight=function(u,F){if(u=="bold"&&F=="normal"||u=="bold"&&F==400||u=="normal"&&F=="italic"||u=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(u=F==400||F==="normal"?u==="italic"?"italic":"normal":F!=700&&F!=="bold"||u!=="normal"?(F==700?"bold":F)+""+u:"bold"),u};p.advancedAPI=function(u){var F=y===j.COMPAT;return F&&C.call(this),typeof u!="function"||(u(this),F&&R.call(this)),this},p.compatAPI=function(u){var F=y===j.ADVANCED;return F&&R.call(this),typeof u!="function"||(u(this),F&&C.call(this)),this},p.isAdvancedAPI=function(){return y===j.ADVANCED};var _,M=function(u){if(y!==j.ADVANCED)throw new Error(u+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},H=p.roundToPrecision=p.__private__.roundToPrecision=function(u,F){var Q=e||F;if(isNaN(u)||isNaN(Q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return u.toFixed(Q).replace(/0+$/,"")};_=p.hpf=p.__private__.hpf=typeof d=="number"?function(u){if(isNaN(u))throw new Error("Invalid argument passed to jsPDF.hpf");return H(u,d)}:d==="smart"?function(u){if(isNaN(u))throw new Error("Invalid argument passed to jsPDF.hpf");return H(u,u>-1&&u<1?16:5)}:function(u){if(isNaN(u))throw new Error("Invalid argument passed to jsPDF.hpf");return H(u,16)};var K=p.f2=p.__private__.f2=function(u){if(isNaN(u))throw new Error("Invalid argument passed to jsPDF.f2");return H(u,2)},S=p.__private__.f3=function(u){if(isNaN(u))throw new Error("Invalid argument passed to jsPDF.f3");return H(u,3)},N=p.scale=p.__private__.scale=function(u){if(isNaN(u))throw new Error("Invalid argument passed to jsPDF.scale");return y===j.COMPAT?u*De:y===j.ADVANCED?u:void 0},U=function(u){return y===j.COMPAT?vn()-u:y===j.ADVANCED?u:void 0},$=function(u){return N(U(u))};p.__private__.setPrecision=p.setPrecision=function(u){typeof parseInt(u,10)=="number"&&(e=parseInt(u,10))};var ee,E="00000000000000000000000000000000",T=p.__private__.getFileId=function(){return E},G=p.__private__.setFileId=function(u){return E=u!==void 0&&/^[a-fA-F0-9]{32}$/.test(u)?u.toUpperCase():E.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),w!==null&&(Kt=new Ba(w.userPermissions,w.userPassword,w.ownerPassword,E)),E};p.setFileId=function(u){return G(u),this},p.getFileId=function(){return T()};var V=p.__private__.convertDateToPDFDate=function(u){var F=u.getTimezoneOffset(),Q=F<0?"+":"-",ne=Math.floor(Math.abs(F/60)),he=Math.abs(F%60),me=[Q,Y(ne),"'",Y(he),"'"].join("");return["D:",u.getFullYear(),Y(u.getMonth()+1),Y(u.getDate()),Y(u.getHours()),Y(u.getMinutes()),Y(u.getSeconds()),me].join("")},re=p.__private__.convertPDFDateToDate=function(u){var F=parseInt(u.substr(2,4),10),Q=parseInt(u.substr(6,2),10)-1,ne=parseInt(u.substr(8,2),10),he=parseInt(u.substr(10,2),10),me=parseInt(u.substr(12,2),10),ke=parseInt(u.substr(14,2),10);return new Date(F,Q,ne,he,me,ke,0)},se=p.__private__.setCreationDate=function(u){var F;if(u===void 0&&(u=new Date),u instanceof Date)F=V(u);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(u))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=u}return ee=F},k=p.__private__.getCreationDate=function(u){var F=ee;return u==="jsDate"&&(F=re(ee)),F};p.setCreationDate=function(u){return se(u),this},p.getCreationDate=function(u){return k(u)};var z,Y=p.__private__.padd2=function(u){return("0"+parseInt(u)).slice(-2)},J=p.__private__.padd2Hex=function(u){return("00"+(u=u.toString())).substr(u.length)},Z=0,le=[],ce=[],de=0,Ne=[],Se=[],Ae=!1,Pe=ce,We=function(){Z=0,de=0,ce=[],le=[],Ne=[],sn=Rt(),Ir=Rt()};p.__private__.setCustomOutputDestination=function(u){Ae=!0,Pe=u};var be=function(u){Ae||(Pe=u)};p.__private__.resetCustomOutputDestination=function(){Ae=!1,Pe=ce};var te=p.__private__.out=function(u){return u=u.toString(),de+=u.length+1,Pe.push(u),Pe},Ze=p.__private__.write=function(u){return te(arguments.length===1?u.toString():Array.prototype.join.call(arguments," "))},Be=p.__private__.getArrayBuffer=function(u){for(var F=u.length,Q=new ArrayBuffer(F),ne=new Uint8Array(Q);F--;)ne[F]=u.charCodeAt(F);return Q},Le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Le};var _e=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(u){return _e=y===j.ADVANCED?u/De:u,this};var Me,Fe=p.__private__.getFontSize=p.getFontSize=function(){return y===j.COMPAT?_e:_e*De},Ee=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(u){return Ee=u,this},p.__private__.getR2L=p.getR2L=function(){return Ee};var Ye,tt=p.__private__.setZoomMode=function(u){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(u))Me=u;else if(isNaN(u)){if(F.indexOf(u)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+u+'" is not recognized.');Me=u}else Me=parseInt(u,10)};p.__private__.getZoomMode=function(){return Me};var rt,ot=p.__private__.setPageMode=function(u){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(u)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+u+'" is not recognized.');Ye=u};p.__private__.getPageMode=function(){return Ye};var mt=p.__private__.setLayoutMode=function(u){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(u)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+u+'" is not recognized.');rt=u};p.__private__.getLayoutMode=function(){return rt},p.__private__.setDisplayMode=p.setDisplayMode=function(u,F,Q){return tt(u),mt(F),ot(Q),this};var Ge={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(u){if(Object.keys(Ge).indexOf(u)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ge[u]},p.__private__.getDocumentProperties=function(){return Ge},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(u){for(var F in Ge)Ge.hasOwnProperty(F)&&u[F]&&(Ge[F]=u[F]);return this},p.__private__.setDocumentProperty=function(u,F){if(Object.keys(Ge).indexOf(u)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ge[u]=F};var nt,De,Xt,ct,Pr,xt={},kt={},Wr=[],ht={},qn={},Lt={},_r={},an=null,At=0,Je=[],dt=new wl(p),zn=n.hotfixes||[],$t={},Vr={},Gr=[],He=function u(F,Q,ne,he,me,ke){if(!(this instanceof u))return new u(F,Q,ne,he,me,ke);isNaN(F)&&(F=1),isNaN(Q)&&(Q=0),isNaN(ne)&&(ne=0),isNaN(he)&&(he=1),isNaN(me)&&(me=0),isNaN(ke)&&(ke=0),this._matrix=[F,Q,ne,he,me,ke]};Object.defineProperty(He.prototype,"sx",{get:function(){return this._matrix[0]},set:function(u){this._matrix[0]=u}}),Object.defineProperty(He.prototype,"shy",{get:function(){return this._matrix[1]},set:function(u){this._matrix[1]=u}}),Object.defineProperty(He.prototype,"shx",{get:function(){return this._matrix[2]},set:function(u){this._matrix[2]=u}}),Object.defineProperty(He.prototype,"sy",{get:function(){return this._matrix[3]},set:function(u){this._matrix[3]=u}}),Object.defineProperty(He.prototype,"tx",{get:function(){return this._matrix[4]},set:function(u){this._matrix[4]=u}}),Object.defineProperty(He.prototype,"ty",{get:function(){return this._matrix[5]},set:function(u){this._matrix[5]=u}}),Object.defineProperty(He.prototype,"a",{get:function(){return this._matrix[0]},set:function(u){this._matrix[0]=u}}),Object.defineProperty(He.prototype,"b",{get:function(){return this._matrix[1]},set:function(u){this._matrix[1]=u}}),Object.defineProperty(He.prototype,"c",{get:function(){return this._matrix[2]},set:function(u){this._matrix[2]=u}}),Object.defineProperty(He.prototype,"d",{get:function(){return this._matrix[3]},set:function(u){this._matrix[3]=u}}),Object.defineProperty(He.prototype,"e",{get:function(){return this._matrix[4]},set:function(u){this._matrix[4]=u}}),Object.defineProperty(He.prototype,"f",{get:function(){return this._matrix[5]},set:function(u){this._matrix[5]=u}}),Object.defineProperty(He.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(He.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(He.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(He.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),He.prototype.join=function(u){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(u)},He.prototype.multiply=function(u){var F=u.sx*this.sx+u.shy*this.shx,Q=u.sx*this.shy+u.shy*this.sy,ne=u.shx*this.sx+u.sy*this.shx,he=u.shx*this.shy+u.sy*this.sy,me=u.tx*this.sx+u.ty*this.shx+this.tx,ke=u.tx*this.shy+u.ty*this.sy+this.ty;return new He(F,Q,ne,he,me,ke)},He.prototype.decompose=function(){var u=this.sx,F=this.shy,Q=this.shx,ne=this.sy,he=this.tx,me=this.ty,ke=Math.sqrt(u*u+F*F),Te=(u/=ke)*Q+(F/=ke)*ne;Q-=u*Te,ne-=F*Te;var qe=Math.sqrt(Q*Q+ne*ne);return Te/=qe,u*(ne/=qe)<F*(Q/=qe)&&(u=-u,F=-F,Te=-Te,ke=-ke),{scale:new He(ke,0,0,qe,0,0),translate:new He(1,0,0,1,he,me),rotate:new He(u,F,-F,u,0,0),skew:new He(1,0,Te,1,0,0)}},He.prototype.toString=function(u){return this.join(" ")},He.prototype.inversed=function(){var u=this.sx,F=this.shy,Q=this.shx,ne=this.sy,he=this.tx,me=this.ty,ke=1/(u*ne-F*Q),Te=ne*ke,qe=-F*ke,Qe=-Q*ke,Xe=u*ke;return new He(Te,qe,Qe,Xe,-Te*he-Qe*me,-qe*he-Xe*me)},He.prototype.applyToPoint=function(u){var F=u.x*this.sx+u.y*this.shx+this.tx,Q=u.x*this.shy+u.y*this.sy+this.ty;return new wa(F,Q)},He.prototype.applyToRectangle=function(u){var F=this.applyToPoint(u),Q=this.applyToPoint(new wa(u.x+u.w,u.y+u.h));return new Za(F.x,F.y,Q.x-F.x,Q.y-F.y)},He.prototype.clone=function(){var u=this.sx,F=this.shy,Q=this.shx,ne=this.sy,he=this.tx,me=this.ty;return new He(u,F,Q,ne,he,me)},p.Matrix=He;var Cr=p.matrixMult=function(u,F){return F.multiply(u)},$r=new He(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=$r;var or=function(u,F){if(!qn[u]){var Q=(F instanceof Dn?"Sh":"P")+(Object.keys(ht).length+1).toString(10);F.id=Q,qn[u]=Q,ht[Q]=F,dt.publish("addPattern",F)}};p.ShadingPattern=Dn,p.TilingPattern=ea,p.addShadingPattern=function(u,F){return M("addShadingPattern()"),or(u,F),this},p.beginTilingPattern=function(u){M("beginTilingPattern()"),Gi(u.boundingBox[0],u.boundingBox[1],u.boundingBox[2]-u.boundingBox[0],u.boundingBox[3]-u.boundingBox[1],u.matrix)},p.endTilingPattern=function(u,F){M("endTilingPattern()"),F.stream=Se[z].join(`
`),or(u,F),dt.publish("endTilingPattern",F),Gr.pop().restore()};var zt=p.__private__.newObject=function(){var u=Rt();return pr(u,!0),u},Rt=p.__private__.newObjectDeferred=function(){return Z++,le[Z]=function(){return de},Z},pr=function(u,F){return F=typeof F=="boolean"&&F,le[u]=de,F&&te(u+" 0 obj"),u},oa=p.__private__.newAdditionalObject=function(){var u={objId:Rt(),content:""};return Ne.push(u),u},sn=Rt(),Ir=Rt(),Fr=p.__private__.decodeColorString=function(u){var F=u.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var Q=parseFloat(F[0]);F=[Q,Q,Q,"r"]}for(var ne="#",he=0;he<3;he++)ne+=("0"+Math.floor(255*parseFloat(F[he])).toString(16)).slice(-2);return ne},Mr=p.__private__.encodeColorString=function(u){var F;typeof u=="string"&&(u={ch1:u});var Q=u.ch1,ne=u.ch2,he=u.ch3,me=u.ch4,ke=u.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Q=="string"&&Q.charAt(0)!=="#"){var Te=new $l(Q);if(Te.ok)Q=Te.toHex();else if(!/^\d*\.?\d*$/.test(Q))throw new Error('Invalid color "'+Q+'" passed to jsPDF.encodeColorString.')}if(typeof Q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Q)&&(Q="#"+Q[1]+Q[1]+Q[2]+Q[2]+Q[3]+Q[3]),typeof Q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Q)){var qe=parseInt(Q.substr(1),16);Q=qe>>16&255,ne=qe>>8&255,he=255&qe}if(ne===void 0||me===void 0&&Q===ne&&ne===he)if(typeof Q=="string")F=Q+" "+ke[0];else switch(u.precision){case 2:F=K(Q/255)+" "+ke[0];break;case 3:default:F=S(Q/255)+" "+ke[0]}else if(me===void 0||gt(me)==="object"){if(me&&!isNaN(me.a)&&me.a===0)return F=["1.","1.","1.",ke[1]].join(" ");if(typeof Q=="string")F=[Q,ne,he,ke[1]].join(" ");else switch(u.precision){case 2:F=[K(Q/255),K(ne/255),K(he/255),ke[1]].join(" ");break;default:case 3:F=[S(Q/255),S(ne/255),S(he/255),ke[1]].join(" ")}}else if(typeof Q=="string")F=[Q,ne,he,me,ke[2]].join(" ");else switch(u.precision){case 2:F=[K(Q),K(ne),K(he),K(me),ke[2]].join(" ");break;case 3:default:F=[S(Q),S(ne),S(he),S(me),ke[2]].join(" ")}return F},Yr=p.__private__.getFilters=function(){return h},wr=p.__private__.putStream=function(u){var F=(u=u||{}).data||"",Q=u.filters||Yr(),ne=u.alreadyAppliedFilters||[],he=u.addLength1||!1,me=F.length,ke=u.objectId,Te=function(Zt){return Zt};if(w!==null&&ke===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");w!==null&&(Te=Kt.encryptor(ke,0));var qe={};Q===!0&&(Q=["FlateEncode"]);var Qe=u.additionalKeyValues||[],Xe=(qe=Ue.API.processDataByFilters!==void 0?Ue.API.processDataByFilters(F,Q):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(ne)?ne.join(" "):ne.toString());if(qe.data.length!==0&&(Qe.push({key:"Length",value:qe.data.length}),he===!0&&Qe.push({key:"Length1",value:me})),Xe.length!=0)if(Xe.split("/").length-1==1)Qe.push({key:"Filter",value:Xe});else{Qe.push({key:"Filter",value:"["+Xe+"]"});for(var it=0;it<Qe.length;it+=1)if(Qe[it].key==="DecodeParms"){for(var St=[],Pt=0;Pt<qe.reverseChain.split("/").length-1;Pt+=1)St.push("null");St.push(Qe[it].value),Qe[it].value="["+St.join(" ")+"]"}}te("<<");for(var Bt=0;Bt<Qe.length;Bt++)te("/"+Qe[Bt].key+" "+Qe[Bt].value);te(">>"),qe.data.length!==0&&(te("stream"),te(Te(qe.data)),te("endstream"))},Jr=p.__private__.putPage=function(u){var F=u.number,Q=u.data,ne=u.objId,he=u.contentsObjId;pr(ne,!0),te("<</Type /Page"),te("/Parent "+u.rootDictionaryObjId+" 0 R"),te("/Resources "+u.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(_(u.mediaBox.bottomLeftX))+" "+parseFloat(_(u.mediaBox.bottomLeftY))+" "+_(u.mediaBox.topRightX)+" "+_(u.mediaBox.topRightY)+"]"),u.cropBox!==null&&te("/CropBox ["+_(u.cropBox.bottomLeftX)+" "+_(u.cropBox.bottomLeftY)+" "+_(u.cropBox.topRightX)+" "+_(u.cropBox.topRightY)+"]"),u.bleedBox!==null&&te("/BleedBox ["+_(u.bleedBox.bottomLeftX)+" "+_(u.bleedBox.bottomLeftY)+" "+_(u.bleedBox.topRightX)+" "+_(u.bleedBox.topRightY)+"]"),u.trimBox!==null&&te("/TrimBox ["+_(u.trimBox.bottomLeftX)+" "+_(u.trimBox.bottomLeftY)+" "+_(u.trimBox.topRightX)+" "+_(u.trimBox.topRightY)+"]"),u.artBox!==null&&te("/ArtBox ["+_(u.artBox.bottomLeftX)+" "+_(u.artBox.bottomLeftY)+" "+_(u.artBox.topRightX)+" "+_(u.artBox.topRightY)+"]"),typeof u.userUnit=="number"&&u.userUnit!==1&&te("/UserUnit "+u.userUnit),dt.publish("putPage",{objId:ne,pageContext:Je[F],pageNumber:F,page:Q}),te("/Contents "+he+" 0 R"),te(">>"),te("endobj");var me=Q.join(`
`);return y===j.ADVANCED&&(me+=`
Q`),pr(he,!0),wr({data:me,filters:Yr(),objectId:he}),te("endobj"),ne},Un=p.__private__.putPages=function(){var u,F,Q=[];for(u=1;u<=At;u++)Je[u].objId=Rt(),Je[u].contentsObjId=Rt();for(u=1;u<=At;u++)Q.push(Jr({number:u,data:Se[u],objId:Je[u].objId,contentsObjId:Je[u].contentsObjId,mediaBox:Je[u].mediaBox,cropBox:Je[u].cropBox,bleedBox:Je[u].bleedBox,trimBox:Je[u].trimBox,artBox:Je[u].artBox,userUnit:Je[u].userUnit,rootDictionaryObjId:sn,resourceDictionaryObjId:Ir}));pr(sn,!0),te("<</Type /Pages");var ne="/Kids [";for(F=0;F<At;F++)ne+=Q[F]+" 0 R ";te(ne+"]"),te("/Count "+At),te(">>"),te("endobj"),dt.publish("postPutPages")},la=function(u){dt.publish("putFont",{font:u,out:te,newObject:zt,putStream:wr}),u.isAlreadyPutted!==!0&&(u.objectNumber=zt(),te("<<"),te("/Type /Font"),te("/BaseFont /"+Ea(u.postScriptName)),te("/Subtype /Type1"),typeof u.encoding=="string"&&te("/Encoding /"+u.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},ca=function(){for(var u in xt)xt.hasOwnProperty(u)&&(m===!1||m===!0&&v.hasOwnProperty(u))&&la(xt[u])},ua=function(u){u.objectNumber=zt();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[_(u.x),_(u.y),_(u.x+u.width),_(u.y+u.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+u.matrix.toString()+"]"});var Q=u.pages[1].join(`
`);wr({data:Q,additionalKeyValues:F,objectId:u.objectNumber}),te("endobj")},ha=function(){for(var u in $t)$t.hasOwnProperty(u)&&ua($t[u])},Pi=function(u,F){var Q,ne=[],he=1/(F-1);for(Q=0;Q<1;Q+=he)ne.push(Q);if(ne.push(1),u[0].offset!=0){var me={offset:0,color:u[0].color};u.unshift(me)}if(u[u.length-1].offset!=1){var ke={offset:1,color:u[u.length-1].color};u.push(ke)}for(var Te="",qe=0,Qe=0;Qe<ne.length;Qe++){for(Q=ne[Qe];Q>u[qe+1].offset;)qe++;var Xe=u[qe].offset,it=(Q-Xe)/(u[qe+1].offset-Xe),St=u[qe].color,Pt=u[qe+1].color;Te+=J(Math.round((1-it)*St[0]+it*Pt[0]).toString(16))+J(Math.round((1-it)*St[1]+it*Pt[1]).toString(16))+J(Math.round((1-it)*St[2]+it*Pt[2]).toString(16))}return Te.trim()},Ps=function(u,F){F||(F=21);var Q=zt(),ne=Pi(u.colors,F),he=[];he.push({key:"FunctionType",value:"0"}),he.push({key:"Domain",value:"[0.0 1.0]"}),he.push({key:"Size",value:"["+F+"]"}),he.push({key:"BitsPerSample",value:"8"}),he.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),wr({data:ne,additionalKeyValues:he,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Q}),te("endobj"),u.objectNumber=zt(),te("<< /ShadingType "+u.type),te("/ColorSpace /DeviceRGB");var me="/Coords ["+_(parseFloat(u.coords[0]))+" "+_(parseFloat(u.coords[1]))+" ";u.type===2?me+=_(parseFloat(u.coords[2]))+" "+_(parseFloat(u.coords[3])):me+=_(parseFloat(u.coords[2]))+" "+_(parseFloat(u.coords[3]))+" "+_(parseFloat(u.coords[4]))+" "+_(parseFloat(u.coords[5])),te(me+="]"),u.matrix&&te("/Matrix ["+u.matrix.toString()+"]"),te("/Function "+Q+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},_s=function(u,F){var Q=Rt(),ne=zt();F.push({resourcesOid:Q,objectOid:ne}),u.objectNumber=ne;var he=[];he.push({key:"Type",value:"/Pattern"}),he.push({key:"PatternType",value:"1"}),he.push({key:"PaintType",value:"1"}),he.push({key:"TilingType",value:"1"}),he.push({key:"BBox",value:"["+u.boundingBox.map(_).join(" ")+"]"}),he.push({key:"XStep",value:_(u.xStep)}),he.push({key:"YStep",value:_(u.yStep)}),he.push({key:"Resources",value:Q+" 0 R"}),u.matrix&&he.push({key:"Matrix",value:"["+u.matrix.toString()+"]"}),wr({data:u.stream,additionalKeyValues:he,objectId:u.objectNumber}),te("endobj")},da=function(u){var F;for(F in ht)ht.hasOwnProperty(F)&&(ht[F]instanceof Dn?Ps(ht[F]):ht[F]instanceof ea&&_s(ht[F],u))},_i=function(u){for(var F in u.objectNumber=zt(),te("<<"),u)switch(F){case"opacity":te("/ca "+K(u[F]));break;case"stroke-opacity":te("/CA "+K(u[F]))}te(">>"),te("endobj")},Cs=function(){var u;for(u in Lt)Lt.hasOwnProperty(u)&&_i(Lt[u])},Ua=function(){for(var u in te("/XObject <<"),$t)$t.hasOwnProperty(u)&&$t[u].objectNumber>=0&&te("/"+u+" "+$t[u].objectNumber+" 0 R");dt.publish("putXobjectDict"),te(">>")},Is=function(){Kt.oid=zt(),te("<<"),te("/Filter /Standard"),te("/V "+Kt.v),te("/R "+Kt.r),te("/U <"+Kt.toHexString(Kt.U)+">"),te("/O <"+Kt.toHexString(Kt.O)+">"),te("/P "+Kt.P),te(">>"),te("endobj")},Ci=function(){for(var u in te("/Font <<"),xt)xt.hasOwnProperty(u)&&(m===!1||m===!0&&v.hasOwnProperty(u))&&te("/"+u+" "+xt[u].objectNumber+" 0 R");te(">>")},Fs=function(){if(Object.keys(ht).length>0){for(var u in te("/Shading <<"),ht)ht.hasOwnProperty(u)&&ht[u]instanceof Dn&&ht[u].objectNumber>=0&&te("/"+u+" "+ht[u].objectNumber+" 0 R");dt.publish("putShadingPatternDict"),te(">>")}},fa=function(u){if(Object.keys(ht).length>0){for(var F in te("/Pattern <<"),ht)ht.hasOwnProperty(F)&&ht[F]instanceof p.TilingPattern&&ht[F].objectNumber>=0&&ht[F].objectNumber<u&&te("/"+F+" "+ht[F].objectNumber+" 0 R");dt.publish("putTilingPatternDict"),te(">>")}},Ms=function(){if(Object.keys(Lt).length>0){var u;for(u in te("/ExtGState <<"),Lt)Lt.hasOwnProperty(u)&&Lt[u].objectNumber>=0&&te("/"+u+" "+Lt[u].objectNumber+" 0 R");dt.publish("putGStateDict"),te(">>")}},It=function(u){pr(u.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ci(),Fs(),fa(u.objectOid),Ms(),Ua(),te(">>"),te("endobj")},Ii=function(){var u=[];ca(),Cs(),ha(),da(u),dt.publish("putResources"),u.forEach(It),It({resourcesOid:Ir,objectOid:Number.MAX_SAFE_INTEGER}),dt.publish("postPutResources")},Fi=function(){dt.publish("putAdditionalObjects");for(var u=0;u<Ne.length;u++){var F=Ne[u];pr(F.objId,!0),te(F.content),te("endobj")}dt.publish("postPutAdditionalObjects")},Mi=function(u){kt[u.fontName]=kt[u.fontName]||{},kt[u.fontName][u.fontStyle]=u.id},Ha=function(u,F,Q,ne,he){var me={id:"F"+(Object.keys(xt).length+1).toString(10),postScriptName:u,fontName:F,fontStyle:Q,encoding:ne,isStandardFont:he||!1,metadata:{}};return dt.publish("addFont",{font:me,instance:this}),xt[me.id]=me,Mi(me),me.id},Ds=function(u){for(var F=0,Q=Le.length;F<Q;F++){var ne=Ha.call(this,u[F][0],u[F][1],u[F][2],Le[F][3],!0);m===!1&&(v[ne]=!0);var he=u[F][0].split("-");Mi({id:ne,fontName:he[0],fontStyle:he[1]||""})}dt.publish("addFonts",{fonts:xt,dictionary:kt})},Dr=function(u){return u.foo=function(){try{return u.apply(this,arguments)}catch(ne){var F=ne.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var Q="Error in function "+F.split(`
`)[0].split("<")[0]+": "+ne.message;if(!Ve.console)throw new Error(Q);Ve.console.error(Q,ne),Ve.alert&&alert(Q)}},u.foo.bar=u,u.foo},pa=function(u,F){var Q,ne,he,me,ke,Te,qe,Qe,Xe;if(he=(F=F||{}).sourceEncoding||"Unicode",ke=F.outputEncoding,(F.autoencode||ke)&&xt[nt].metadata&&xt[nt].metadata[he]&&xt[nt].metadata[he].encoding&&(me=xt[nt].metadata[he].encoding,!ke&&xt[nt].encoding&&(ke=xt[nt].encoding),!ke&&me.codePages&&(ke=me.codePages[0]),typeof ke=="string"&&(ke=me[ke]),ke)){for(qe=!1,Te=[],Q=0,ne=u.length;Q<ne;Q++)(Qe=ke[u.charCodeAt(Q)])?Te.push(String.fromCharCode(Qe)):Te.push(u[Q]),Te[Q].charCodeAt(0)>>8&&(qe=!0);u=Te.join("")}for(Q=u.length;qe===void 0&&Q!==0;)u.charCodeAt(Q-1)>>8&&(qe=!0),Q--;if(!qe)return u;for(Te=F.noBOM?[]:[254,255],Q=0,ne=u.length;Q<ne;Q++){if((Xe=(Qe=u.charCodeAt(Q))>>8)>>8)throw new Error("Character at position "+Q+" of string '"+u+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Te.push(Xe),Te.push(Qe-(Xe<<8))}return String.fromCharCode.apply(void 0,Te)},lr=p.__private__.pdfEscape=p.pdfEscape=function(u,F){return pa(u,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wa=p.__private__.beginPage=function(u){Se[++At]=[],Je[At]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(u[0]),topRightY:Number(u[1])}},Ti(At),be(Se[z])},Di=function(u,F){var Q,ne,he;switch(r=F||r,typeof u=="string"&&(Q=x(u.toLowerCase()),Array.isArray(Q)&&(ne=Q[0],he=Q[1])),Array.isArray(u)&&(ne=u[0]*De,he=u[1]*De),isNaN(ne)&&(ne=o[0],he=o[1]),(ne>14400||he>14400)&&(wt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ne=Math.min(14400,ne),he=Math.min(14400,he)),o=[ne,he],r.substr(0,1)){case"l":he>ne&&(o=[he,ne]);break;case"p":ne>he&&(o=[he,ne])}Wa(o),zi(Ya),te(Tr),Xa!==0&&te(Xa+" J"),Ka!==0&&te(Ka+" j"),dt.publish("addPage",{pageNumber:At})},Ts=function(u){u>0&&u<=At&&(Se.splice(u,1),Je.splice(u,1),At--,z>At&&(z=At),this.setPage(z))},Ti=function(u){u>0&&u<=At&&(z=u)},Os=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Se.length-1},Oi=function(u,F,Q){var ne,he=void 0;return Q=Q||{},u=u!==void 0?u:xt[nt].fontName,F=F!==void 0?F:xt[nt].fontStyle,ne=u.toLowerCase(),kt[ne]!==void 0&&kt[ne][F]!==void 0?he=kt[ne][F]:kt[u]!==void 0&&kt[u][F]!==void 0?he=kt[u][F]:Q.disableWarning===!1&&wt.warn("Unable to look up font label for font '"+u+"', '"+F+"'. Refer to getFontList() for available fonts."),he||Q.noFallback||(he=kt.times[F])==null&&(he=kt.times.normal),he},Rs=p.__private__.putInfo=function(){var u=zt(),F=function(ne){return ne};for(var Q in w!==null&&(F=Kt.encryptor(u,0)),te("<<"),te("/Producer ("+lr(F("jsPDF "+Ue.version))+")"),Ge)Ge.hasOwnProperty(Q)&&Ge[Q]&&te("/"+Q.substr(0,1).toUpperCase()+Q.substr(1)+" ("+lr(F(Ge[Q]))+")");te("/CreationDate ("+lr(F(ee))+")"),te(">>"),te("endobj")},Va=p.__private__.putCatalog=function(u){var F=(u=u||{}).rootDictionaryObjId||sn;switch(zt(),te("<<"),te("/Type /Catalog"),te("/Pages "+F+" 0 R"),Me||(Me="fullwidth"),Me){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Q=""+Me;Q.substr(Q.length-1)==="%"&&(Me=parseInt(Me)/100),typeof Me=="number"&&te("/OpenAction [3 0 R /XYZ null null "+K(Me)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}Ye&&te("/PageMode /"+Ye),dt.publish("putCatalog"),te(">>"),te("endobj")},Bs=p.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(Z+1)),te("/Root "+Z+" 0 R"),te("/Info "+(Z-1)+" 0 R"),w!==null&&te("/Encrypt "+Kt.oid+" 0 R"),te("/ID [ <"+E+"> <"+E+"> ]"),te(">>")},Es=p.__private__.putHeader=function(){te("%PDF-"+L),te("%ºß¬à")},qs=p.__private__.putXRef=function(){var u="0000000000";te("xref"),te("0 "+(Z+1)),te("0000000000 65535 f ");for(var F=1;F<=Z;F++)typeof le[F]=="function"?te((u+le[F]()).slice(-10)+" 00000 n "):le[F]!==void 0?te((u+le[F]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},on=p.__private__.buildDocument=function(){We(),be(ce),dt.publish("buildDocument"),Es(),Un(),Fi(),Ii(),w!==null&&Is(),Rs(),Va();var u=de;return qs(),Bs(),te("startxref"),te(""+u),te("%%EOF"),be(Se[z]),ce.join(`
`)},ga=p.__private__.getBlob=function(u){return new Blob([Be(u)],{type:"application/pdf"})},ma=p.output=p.__private__.output=Dr((function(u,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",u){case void 0:return on();case"save":p.save(F.filename);break;case"arraybuffer":return Be(on());case"blob":return ga(on());case"bloburi":case"bloburl":if(Ve.URL!==void 0&&typeof Ve.URL.createObjectURL=="function")return Ve.URL&&Ve.URL.createObjectURL(ga(on()))||void 0;wt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Q="",ne=on();try{Q=Fo(ne)}catch{Q=Fo(unescape(encodeURIComponent(ne)))}return"data:application/pdf;filename="+F.filename+";base64,"+Q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ve)==="[object Window]"){var he="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",me=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(he=F.pdfObjectUrl,me="");var ke='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+he+'"'+me+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",Te=Ve.open();return Te!==null&&Te.document.write(ke),Te}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ve)==="[object Window]"){var qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',Qe=Ve.open();if(Qe!==null){Qe.document.write(qe);var Xe=this;Qe.document.documentElement.querySelector("#pdfViewer").onload=function(){Qe.document.title=F.filename,Qe.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Xe.output("bloburl"))}}return Qe}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ve)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var it='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',St=Ve.open();if(St!==null&&(St.document.write(it),St.document.title=F.filename),St||typeof safari>"u")return St;break;case"datauri":case"dataurl":return Ve.document.location.href=this.output("datauristring",F);default:return null}})),Ri=function(u){return Array.isArray(zn)===!0&&zn.indexOf(u)>-1};switch(a){case"pt":De=1;break;case"mm":De=72/25.4;break;case"cm":De=72/2.54;break;case"in":De=72;break;case"px":De=Ri("px_scaling")==1?.75:96/72;break;case"pc":case"em":De=12;break;case"ex":De=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);De=a}var Kt=null;se(),G();var zs=function(u){return w!==null?Kt.encryptor(u,0):function(F){return F}},Bi=p.__private__.getPageInfo=p.getPageInfo=function(u){if(isNaN(u)||u%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Je[u].objId,pageNumber:u,pageContext:Je[u]}},$e=p.__private__.getPageInfoByObjId=function(u){if(isNaN(u)||u%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in Je)if(Je[F].objId===u)break;return Bi(F)},Us=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Je[z].objId,pageNumber:z,pageContext:Je[z]}};p.addPage=function(){return Di.apply(this,arguments),this},p.setPage=function(){return Ti.apply(this,arguments),be.call(this,Se[z]),this},p.insertPage=function(u){return this.addPage(),this.movePage(z,u),this},p.movePage=function(u,F){var Q,ne;if(u>F){Q=Se[u],ne=Je[u];for(var he=u;he>F;he--)Se[he]=Se[he-1],Je[he]=Je[he-1];Se[F]=Q,Je[F]=ne,this.setPage(F)}else if(u<F){Q=Se[u],ne=Je[u];for(var me=u;me<F;me++)Se[me]=Se[me+1],Je[me]=Je[me+1];Se[F]=Q,Je[F]=ne,this.setPage(F)}return this},p.deletePage=function(){return Ts.apply(this,arguments),this},p.__private__.text=p.text=function(u,F,Q,ne,he){var me,ke,Te,qe,Qe,Xe,it,St,Pt,Bt=(ne=ne||{}).scope||this;if(typeof u=="number"&&typeof F=="number"&&(typeof Q=="string"||Array.isArray(Q))){var Zt=Q;Q=F,F=u,u=Zt}if(arguments[3]instanceof He?(M("The transform parameter of text() with a Matrix value"),Pt=he):(Te=arguments[4],qe=arguments[5],gt(it=arguments[3])==="object"&&it!==null||(typeof Te=="string"&&(qe=Te,Te=null),typeof it=="string"&&(qe=it,it=null),typeof it=="number"&&(Te=it,it=null),ne={flags:it,angle:Te,align:qe})),isNaN(F)||isNaN(Q)||u==null)throw new Error("Invalid arguments passed to jsPDF.text");if(u.length===0)return Bt;var Wt="",Or=!1,gr=typeof ne.lineHeightFactor=="number"?ne.lineHeightFactor:Wn,Zr=Bt.internal.scaleFactor;function $i(yt){return yt=yt.split("	").join(Array(ne.TabLen||9).join(" ")),lr(yt,it)}function ri(yt){for(var Nt,Mt=yt.concat(),Ut=[],dn=Mt.length;dn--;)typeof(Nt=Mt.shift())=="string"?Ut.push(Nt):Array.isArray(yt)&&(Nt.length===1||Nt[1]===void 0&&Nt[2]===void 0)?Ut.push(Nt[0]):Ut.push([Nt[0],Nt[1],Nt[2]]);return Ut}function ni(yt,Nt){var Mt;if(typeof yt=="string")Mt=Nt(yt)[0];else if(Array.isArray(yt)){for(var Ut,dn,hi=yt.concat(),Ia=[],Zi=hi.length;Zi--;)typeof(Ut=hi.shift())=="string"?Ia.push(Nt(Ut)[0]):Array.isArray(Ut)&&typeof Ut[0]=="string"&&(dn=Nt(Ut[0],Ut[1],Ut[2]),Ia.push([dn[0],dn[1],dn[2]]));Mt=Ia}return Mt}var Na=!1,ai=!0;if(typeof u=="string")Na=!0;else if(Array.isArray(u)){var ii=u.concat();ke=[];for(var ja,Yt=ii.length;Yt--;)(typeof(ja=ii.shift())!="string"||Array.isArray(ja)&&typeof ja[0]!="string")&&(ai=!1);Na=ai}if(Na===!1)throw new Error('Type of text must be string or Array. "'+u+'" is not recognized.');typeof u=="string"&&(u=u.match(/[\r?\n]/)?u.split(/\r\n|\r|\n/g):[u]);var ka=_e/Bt.internal.scaleFactor,Sa=ka*(gr-1);switch(ne.baseline){case"bottom":Q-=Sa;break;case"top":Q+=ka-Sa;break;case"hanging":Q+=ka-2*Sa;break;case"middle":Q+=ka/2-Sa}if((Xe=ne.maxWidth||0)>0&&(typeof u=="string"?u=Bt.splitTextToSize(u,Xe):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce((function(yt,Nt){return yt.concat(Bt.splitTextToSize(Nt,Xe))}),[]))),me={text:u,x:F,y:Q,options:ne,mutex:{pdfEscape:lr,activeFontKey:nt,fonts:xt,activeFontSize:_e}},dt.publish("preProcessText",me),u=me.text,Te=(ne=me.options).angle,!(Pt instanceof He)&&Te&&typeof Te=="number"){Te*=Math.PI/180,ne.rotationDirection===0&&(Te=-Te),y===j.ADVANCED&&(Te=-Te);var La=Math.cos(Te),si=Math.sin(Te);Pt=new He(La,si,-si,La,0,0)}else Te&&Te instanceof He&&(Pt=Te);y!==j.ADVANCED||Pt||(Pt=$r),(Qe=ne.charSpace||va)!==void 0&&(Wt+=_(N(Qe))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(St=ne.horizontalScale)!==void 0&&(Wt+=_(100*St)+` Tz
`),ne.lang;var cr=-1,Zs=ne.renderingMode!==void 0?ne.renderingMode:ne.stroke,oi=Bt.internal.getCurrentPageInfo().pageContext;switch(Zs){case 0:case!1:case"fill":cr=0;break;case 1:case!0:case"stroke":cr=1;break;case 2:case"fillThenStroke":cr=2;break;case 3:case"invisible":cr=3;break;case 4:case"fillAndAddForClipping":cr=4;break;case 5:case"strokeAndAddPathForClipping":cr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":cr=6;break;case 7:case"addToPathForClipping":cr=7}var Yi=oi.usedRenderingMode!==void 0?oi.usedRenderingMode:-1;cr!==-1?Wt+=cr+` Tr
`:Yi!==-1&&(Wt+=`0 Tr
`),cr!==-1&&(oi.usedRenderingMode=cr),qe=ne.align||"left";var yr,Aa=_e*gr,Ji=Bt.internal.pageSize.getWidth(),Xi=xt[nt];Qe=ne.charSpace||va,Xe=ne.maxWidth||0,it=Object.assign({autoencode:!0,noBOM:!0},ne.flags);var wn=[],$n=function(yt){return Bt.getStringUnitWidth(yt,{font:Xi,charSpace:Qe,fontSize:_e,doKerning:!1})*_e/Zr};if(Object.prototype.toString.call(u)==="[object Array]"){var ur;ke=ri(u),qe!=="left"&&(yr=ke.map($n));var ar,yn=0;if(qe==="right"){F-=yr[0],u=[],Yt=ke.length;for(var cn=0;cn<Yt;cn++)cn===0?(ar=Kr(F),ur=ln(Q)):(ar=N(yn-yr[cn]),ur=-Aa),u.push([ke[cn],ar,ur]),yn=yr[cn]}else if(qe==="center"){F-=yr[0]/2,u=[],Yt=ke.length;for(var un=0;un<Yt;un++)un===0?(ar=Kr(F),ur=ln(Q)):(ar=N((yn-yr[un])/2),ur=-Aa),u.push([ke[un],ar,ur]),yn=yr[un]}else if(qe==="left"){u=[],Yt=ke.length;for(var Pa=0;Pa<Yt;Pa++)u.push(ke[Pa])}else if(qe==="justify"&&Xi.encoding==="Identity-H"){u=[],Yt=ke.length,Xe=Xe!==0?Xe:Ji;for(var hn=0,Ft=0;Ft<Yt;Ft++)if(ur=Ft===0?ln(Q):-Aa,ar=Ft===0?Kr(F):hn,Ft<Yt-1){var li=N((Xe-yr[Ft])/(ke[Ft].split(" ").length-1)),ir=ke[Ft].split(" ");u.push([ir[0]+" ",ar,ur]),hn=0;for(var Nr=1;Nr<ir.length;Nr++){var _a=($n(ir[Nr-1]+" "+ir[Nr])-$n(ir[Nr]))*Zr+li;Nr==ir.length-1?u.push([ir[Nr],_a,0]):u.push([ir[Nr]+" ",_a,0]),hn-=_a}}else u.push([ke[Ft],ar,ur]);u.push(["",hn,0])}else{if(qe!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(u=[],Yt=ke.length,Xe=Xe!==0?Xe:Ji,Ft=0;Ft<Yt;Ft++)ur=Ft===0?ln(Q):-Aa,ar=Ft===0?Kr(F):0,Ft<Yt-1?wn.push(_(N((Xe-yr[Ft])/(ke[Ft].split(" ").length-1)))):wn.push(0),u.push([ke[Ft],ar,ur])}}var Ki=typeof ne.R2L=="boolean"?ne.R2L:Ee;Ki===!0&&(u=ni(u,(function(yt,Nt,Mt){return[yt.split("").reverse().join(""),Nt,Mt]}))),me={text:u,x:F,y:Q,options:ne,mutex:{pdfEscape:lr,activeFontKey:nt,fonts:xt,activeFontSize:_e}},dt.publish("postProcessText",me),u=me.text,Or=me.mutex.isHex||!1;var ci=xt[nt].encoding;ci!=="WinAnsiEncoding"&&ci!=="StandardEncoding"||(u=ni(u,(function(yt,Nt,Mt){return[$i(yt),Nt,Mt]}))),ke=ri(u),u=[];for(var Yn,Jn,Nn,Xn=0,Ca=1,Kn=Array.isArray(ke[0])?Ca:Xn,jn="",ui=function(yt,Nt,Mt){var Ut="";return Mt instanceof He?(Mt=typeof ne.angle=="number"?Cr(Mt,new He(1,0,0,1,yt,Nt)):Cr(new He(1,0,0,1,yt,Nt),Mt),y===j.ADVANCED&&(Mt=Cr(new He(1,0,0,-1,0,0),Mt)),Ut=Mt.join(" ")+` Tm
`):Ut=_(yt)+" "+_(Nt)+` Td
`,Ut},jr=0;jr<ke.length;jr++){switch(jn="",Kn){case Ca:Nn=(Or?"<":"(")+ke[jr][0]+(Or?">":")"),Yn=parseFloat(ke[jr][1]),Jn=parseFloat(ke[jr][2]);break;case Xn:Nn=(Or?"<":"(")+ke[jr]+(Or?">":")"),Yn=Kr(F),Jn=ln(Q)}wn!==void 0&&wn[jr]!==void 0&&(jn=wn[jr]+` Tw
`),jr===0?u.push(jn+ui(Yn,Jn,Pt)+Nn):Kn===Xn?u.push(jn+Nn):Kn===Ca&&u.push(jn+ui(Yn,Jn,Pt)+Nn)}u=Kn===Xn?u.join(` Tj
T* `):u.join(` Tj
`),u+=` Tj
`;var kr=`BT
/`;return kr+=nt+" "+_e+` Tf
`,kr+=_(_e*gr)+` TL
`,kr+=Vn+`
`,kr+=Wt,kr+=u,te(kr+="ET"),v[nt]=!0,Bt};var Hs=p.__private__.clip=p.clip=function(u){return te(u==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Hs("evenodd")},p.__private__.discardPath=p.discardPath=function(){return te("n"),this};var Xr=p.__private__.isValidStyle=function(u){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(u)!==-1&&(F=!0),F};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(u){return Xr(u)&&(g=u),this};var Ei=p.__private__.getStyle=p.getStyle=function(u){var F=g;switch(u){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=u}return F},qi=p.close=function(){return te("h"),this};p.stroke=function(){return te("S"),this},p.fill=function(u){return ba("f",u),this},p.fillEvenOdd=function(u){return ba("f*",u),this},p.fillStroke=function(u){return ba("B",u),this},p.fillStrokeEvenOdd=function(u){return ba("B*",u),this};var ba=function(u,F){gt(F)==="object"?Vs(F,u):te(u)},Ga=function(u){u===null||y===j.ADVANCED&&u===void 0||(u=Ei(u),te(u))};function Ws(u,F,Q,ne,he){var me=new ea(F||this.boundingBox,Q||this.xStep,ne||this.yStep,this.gState,he||this.matrix);me.stream=this.stream;var ke=u+"$$"+this.cloneIndex+++"$$";return or(ke,me),me}var Vs=function(u,F){var Q=qn[u.key],ne=ht[Q];if(ne instanceof Dn)te("q"),te(Gs(F)),ne.gState&&p.setGState(ne.gState),te(u.matrix.toString()+" cm"),te("/"+Q+" sh"),te("Q");else if(ne instanceof ea){var he=new He(1,0,0,-1,0,vn());u.matrix&&(he=he.multiply(u.matrix||$r),Q=Ws.call(ne,u.key,u.boundingBox,u.xStep,u.yStep,he).id),te("q"),te("/Pattern cs"),te("/"+Q+" scn"),ne.gState&&p.setGState(ne.gState),te(F),te("Q")}},Gs=function(u){switch(u){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},$a=p.moveTo=function(u,F){return te(_(N(u))+" "+_($(F))+" m"),this},Hn=p.lineTo=function(u,F){return te(_(N(u))+" "+_($(F))+" l"),this},bn=p.curveTo=function(u,F,Q,ne,he,me){return te([_(N(u)),_($(F)),_(N(Q)),_($(ne)),_(N(he)),_($(me)),"c"].join(" ")),this};p.__private__.line=p.line=function(u,F,Q,ne,he){if(isNaN(u)||isNaN(F)||isNaN(Q)||isNaN(ne)||!Xr(he))throw new Error("Invalid arguments passed to jsPDF.line");return y===j.COMPAT?this.lines([[Q-u,ne-F]],u,F,[1,1],he||"S"):this.lines([[Q-u,ne-F]],u,F,[1,1]).stroke()},p.__private__.lines=p.lines=function(u,F,Q,ne,he,me){var ke,Te,qe,Qe,Xe,it,St,Pt,Bt,Zt,Wt,Or;if(typeof u=="number"&&(Or=Q,Q=F,F=u,u=Or),ne=ne||[1,1],me=me||!1,isNaN(F)||isNaN(Q)||!Array.isArray(u)||!Array.isArray(ne)||!Xr(he)||typeof me!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for($a(F,Q),ke=ne[0],Te=ne[1],Qe=u.length,Zt=F,Wt=Q,qe=0;qe<Qe;qe++)(Xe=u[qe]).length===2?(Zt=Xe[0]*ke+Zt,Wt=Xe[1]*Te+Wt,Hn(Zt,Wt)):(it=Xe[0]*ke+Zt,St=Xe[1]*Te+Wt,Pt=Xe[2]*ke+Zt,Bt=Xe[3]*Te+Wt,Zt=Xe[4]*ke+Zt,Wt=Xe[5]*Te+Wt,bn(it,St,Pt,Bt,Zt,Wt));return me&&qi(),Ga(he),this},p.path=function(u){for(var F=0;F<u.length;F++){var Q=u[F],ne=Q.c;switch(Q.op){case"m":$a(ne[0],ne[1]);break;case"l":Hn(ne[0],ne[1]);break;case"c":bn.apply(this,ne);break;case"h":qi()}}return this},p.__private__.rect=p.rect=function(u,F,Q,ne,he){if(isNaN(u)||isNaN(F)||isNaN(Q)||isNaN(ne)||!Xr(he))throw new Error("Invalid arguments passed to jsPDF.rect");return y===j.COMPAT&&(ne=-ne),te([_(N(u)),_($(F)),_(N(Q)),_(N(ne)),"re"].join(" ")),Ga(he),this},p.__private__.triangle=p.triangle=function(u,F,Q,ne,he,me,ke){if(isNaN(u)||isNaN(F)||isNaN(Q)||isNaN(ne)||isNaN(he)||isNaN(me)||!Xr(ke))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Q-u,ne-F],[he-Q,me-ne],[u-he,F-me]],u,F,[1,1],ke,!0),this},p.__private__.roundedRect=p.roundedRect=function(u,F,Q,ne,he,me,ke){if(isNaN(u)||isNaN(F)||isNaN(Q)||isNaN(ne)||isNaN(he)||isNaN(me)||!Xr(ke))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Te=4/3*(Math.SQRT2-1);return he=Math.min(he,.5*Q),me=Math.min(me,.5*ne),this.lines([[Q-2*he,0],[he*Te,0,he,me-me*Te,he,me],[0,ne-2*me],[0,me*Te,-he*Te,me,-he,me],[2*he-Q,0],[-he*Te,0,-he,-me*Te,-he,-me],[0,2*me-ne],[0,-me*Te,he*Te,-me,he,-me]],u+he,F,[1,1],ke,!0),this},p.__private__.ellipse=p.ellipse=function(u,F,Q,ne,he){if(isNaN(u)||isNaN(F)||isNaN(Q)||isNaN(ne)||!Xr(he))throw new Error("Invalid arguments passed to jsPDF.ellipse");var me=4/3*(Math.SQRT2-1)*Q,ke=4/3*(Math.SQRT2-1)*ne;return $a(u+Q,F),bn(u+Q,F-ke,u+me,F-ne,u,F-ne),bn(u-me,F-ne,u-Q,F-ke,u-Q,F),bn(u-Q,F+ke,u-me,F+ne,u,F+ne),bn(u+me,F+ne,u+Q,F+ke,u+Q,F),Ga(he),this},p.__private__.circle=p.circle=function(u,F,Q,ne){if(isNaN(u)||isNaN(F)||isNaN(Q)||!Xr(ne))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(u,F,Q,Q,ne)},p.setFont=function(u,F,Q){return Q&&(F=B(F,Q)),nt=Oi(u,F,{disableWarning:!1}),this};var $s=p.__private__.getFont=p.getFont=function(){return xt[Oi.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var u,F,Q={};for(u in kt)if(kt.hasOwnProperty(u))for(F in Q[u]=[],kt[u])kt[u].hasOwnProperty(F)&&Q[u].push(F);return Q},p.addFont=function(u,F,Q,ne,he){var me=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&me.indexOf(arguments[3])!==-1?he=arguments[3]:arguments[3]&&me.indexOf(arguments[3])==-1&&(Q=B(Q,ne)),he=he||"Identity-H",Ha.call(this,u,F,Q,he)};var Wn,Ya=n.lineWidth||.200025,xa=p.__private__.getLineWidth=p.getLineWidth=function(){return Ya},zi=p.__private__.setLineWidth=p.setLineWidth=function(u){return Ya=u,te(_(N(u))+" w"),this};p.__private__.setLineDash=Ue.API.setLineDash=Ue.API.setLineDashPattern=function(u,F){if(u=u||[],F=F||0,isNaN(F)||!Array.isArray(u))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return u=u.map((function(Q){return _(N(Q))})).join(" "),F=_(N(F)),te("["+u+"] "+F+" d"),this};var Ui=p.__private__.getLineHeight=p.getLineHeight=function(){return _e*Wn};p.__private__.getLineHeight=p.getLineHeight=function(){return _e*Wn};var Hi=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(u){return typeof(u=u||1.15)=="number"&&(Wn=u),this},Wi=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Wn};Hi(n.lineHeight);var Kr=p.__private__.getHorizontalCoordinate=function(u){return N(u)},ln=p.__private__.getVerticalCoordinate=function(u){return y===j.ADVANCED?u:Je[z].mediaBox.topRightY-Je[z].mediaBox.bottomLeftY-N(u)},Ys=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(u){return _(Kr(u))},xn=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(u){return _(ln(u))},Tr=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Fr(Tr)},p.__private__.setStrokeColor=p.setDrawColor=function(u,F,Q,ne){return Tr=Mr({ch1:u,ch2:F,ch3:Q,ch4:ne,pdfColorType:"draw",precision:2}),te(Tr),this};var Ja=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Fr(Ja)},p.__private__.setFillColor=p.setFillColor=function(u,F,Q,ne){return Ja=Mr({ch1:u,ch2:F,ch3:Q,ch4:ne,pdfColorType:"fill",precision:2}),te(Ja),this};var Vn=n.textColor||"0 g",Js=p.__private__.getTextColor=p.getTextColor=function(){return Fr(Vn)};p.__private__.setTextColor=p.setTextColor=function(u,F,Q,ne){return Vn=Mr({ch1:u,ch2:F,ch3:Q,ch4:ne,pdfColorType:"text",precision:3}),this};var va=n.charSpace,Xs=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(va||0)};p.__private__.setCharSpace=p.setCharSpace=function(u){if(isNaN(u))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return va=u,this};var Xa=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(u){var F=p.CapJoinStyles[u];if(F===void 0)throw new Error("Line cap style of '"+u+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xa=F,te(F+" J"),this};var Ka=0;p.__private__.setLineJoin=p.setLineJoin=function(u){var F=p.CapJoinStyles[u];if(F===void 0)throw new Error("Line join style of '"+u+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ka=F,te(F+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(u){if(u=u||0,isNaN(u))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(_(N(u))+" M"),this},p.GState=Ai,p.setGState=function(u){(u=typeof u=="string"?Lt[_r[u]]:Vi(null,u)).equals(an)||(te("/"+u.id+" gs"),an=u)};var Vi=function(u,F){if(!u||!_r[u]){var Q=!1;for(var ne in Lt)if(Lt.hasOwnProperty(ne)&&Lt[ne].equals(F)){Q=!0;break}if(Q)F=Lt[ne];else{var he="GS"+(Object.keys(Lt).length+1).toString(10);Lt[he]=F,F.id=he}return u&&(_r[u]=F.id),dt.publish("addGState",F),F}};p.addGState=function(u,F){return Vi(u,F),this},p.saveGraphicsState=function(){return te("q"),Wr.push({key:nt,size:_e,color:Vn}),this},p.restoreGraphicsState=function(){te("Q");var u=Wr.pop();return nt=u.key,_e=u.size,Vn=u.color,an=null,this},p.setCurrentTransformationMatrix=function(u){return te(u.toString()+" cm"),this},p.comment=function(u){return te("#"+u),this};var wa=function(u,F){var Q=u||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Q},set:function(me){isNaN(me)||(Q=parseFloat(me))}});var ne=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ne},set:function(me){isNaN(me)||(ne=parseFloat(me))}});var he="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return he},set:function(me){he=me.toString()}}),this},Za=function(u,F,Q,ne){wa.call(this,u,F),this.type="rect";var he=Q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return he},set:function(ke){isNaN(ke)||(he=parseFloat(ke))}});var me=ne||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return me},set:function(ke){isNaN(ke)||(me=parseFloat(ke))}}),this},Qa=function(){this.page=At,this.currentPage=z,this.pages=Se.slice(0),this.pagesContext=Je.slice(0),this.x=Xt,this.y=ct,this.matrix=Pr,this.width=Gn(z),this.height=vn(z),this.outputDestination=Pe,this.id="",this.objectNumber=-1};Qa.prototype.restore=function(){At=this.page,z=this.currentPage,Je=this.pagesContext,Se=this.pages,Xt=this.x,ct=this.y,Pr=this.matrix,ei(z,this.width),ti(z,this.height),Pe=this.outputDestination};var Gi=function(u,F,Q,ne,he){Gr.push(new Qa),At=z=0,Se=[],Xt=u,ct=F,Pr=he,Wa([Q,ne])},Ks=function(u){if(Vr[u])Gr.pop().restore();else{var F=new Qa,Q="Xo"+(Object.keys($t).length+1).toString(10);F.id=Q,Vr[u]=Q,$t[Q]=F,dt.publish("addFormObject",F),Gr.pop().restore()}};for(var ya in p.beginFormObject=function(u,F,Q,ne,he){return Gi(u,F,Q,ne,he),this},p.endFormObject=function(u){return Ks(u),this},p.doFormObject=function(u,F){var Q=$t[Vr[u]];return te("q"),te(F.toString()+" cm"),te("/"+Q.id+" Do"),te("Q"),this},p.getFormObject=function(u){var F=$t[Vr[u]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},p.save=function(u,F){return u=u||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(Qn(ga(on()),u),typeof Qn.unload=="function"&&Ve.setTimeout&&setTimeout(Qn.unload,911),this):new Promise((function(Q,ne){try{var he=Qn(ga(on()),u);typeof Qn.unload=="function"&&Ve.setTimeout&&setTimeout(Qn.unload,911),Q(he)}catch(me){ne(me.message)}}))},Ue.API)Ue.API.hasOwnProperty(ya)&&(ya==="events"&&Ue.API.events.length?(function(u,F){var Q,ne,he;for(he=F.length-1;he!==-1;he--)Q=F[he][0],ne=F[he][1],u.subscribe.apply(u,[Q].concat(typeof ne=="function"?[ne]:ne))})(dt,Ue.API.events):p[ya]=Ue.API[ya]);var Gn=p.getPageWidth=function(u){return(Je[u=u||z].mediaBox.topRightX-Je[u].mediaBox.bottomLeftX)/De},ei=p.setPageWidth=function(u,F){Je[u].mediaBox.topRightX=F*De+Je[u].mediaBox.bottomLeftX},vn=p.getPageHeight=function(u){return(Je[u=u||z].mediaBox.topRightY-Je[u].mediaBox.bottomLeftY)/De},ti=p.setPageHeight=function(u,F){Je[u].mediaBox.topRightY=F*De+Je[u].mediaBox.bottomLeftY};return p.internal={pdfEscape:lr,getStyle:Ei,getFont:$s,getFontSize:Fe,getCharSpace:Xs,getTextColor:Js,getLineHeight:Ui,getLineHeightFactor:Wi,getLineWidth:xa,write:Ze,getHorizontalCoordinate:Kr,getVerticalCoordinate:ln,getCoordinateString:Ys,getVerticalCoordinateString:xn,collections:{},newObject:zt,newAdditionalObject:oa,newObjectDeferred:Rt,newObjectDeferredBegin:pr,getFilters:Yr,putStream:wr,events:dt,scaleFactor:De,pageSize:{getWidth:function(){return Gn(z)},setWidth:function(u){ei(z,u)},getHeight:function(){return vn(z)},setHeight:function(u){ti(z,u)}},encryptionOptions:w,encryption:Kt,getEncryptor:zs,output:ma,getNumberOfPages:Os,pages:Se,out:te,f2:K,f3:S,getPageInfo:Bi,getPageInfoByObjId:$e,getCurrentPageInfo:Us,getPDFVersion:P,Point:wa,Rectangle:Za,Matrix:He,hasHotfix:Ri},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Gn(z)},set:function(u){ei(z,u)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return vn(z)},set:function(u){ti(z,u)},enumerable:!0,configurable:!0}),Ds.call(p,Le),nt="F1",Di(o,r),dt.publish("initialized"),p}Ba.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Ba.prototype.toHexString=function(n){return n.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Ba.prototype.hexToBytes=function(n){for(var e=[],r=0;r<n.length;r+=2)e.push(String.fromCharCode(parseInt(n.substr(r,2),16)));return e.join("")},Ba.prototype.processOwnerPassword=function(n,e){return Do(Mo(e).substr(0,5),n)},Ba.prototype.encryptor=function(n,e){var r=Mo(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(a){return Do(r,a)}},Ai.prototype.equals=function(n){var e,r="id,objectNumber,equals";if(!n||gt(n)!==gt(this))return!1;var a=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;a++}for(e in n)n.hasOwnProperty(e)&&r.indexOf(e)<0&&a--;return a===0},Ue.API={events:[]},Ue.version="2.5.2";var Ct=Ue.API,qo=1,sa=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Oa=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ke=function(n){return n.toFixed(2)},Fn=function(n){return n.toFixed(5)};Ct.__acroform__={};var fr=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},yl=function(n){return n*qo},en=function(n){var e=new Kl,r=Re.internal.getHeight(n)||0,a=Re.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Ke(a)),Number(Ke(r))],e},fu=Ct.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},pu=Ct.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},gu=Ct.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},Dt=Ct.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return gu(n,e-1)},Tt=Ct.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return fu(n,e-1)},Ot=Ct.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return pu(n,e-1)},mu=Ct.__acroform__.calculateCoordinates=function(n,e){var r=e.internal.getHorizontalCoordinate,a=e.internal.getVerticalCoordinate,o=n[0],i=n[1],h=n[2],c=n[3],d={};return d.lowerLeft_X=r(o)||0,d.lowerLeft_Y=a(i+c)||0,d.upperRight_X=r(o+h)||0,d.upperRight_Y=a(i)||0,[Number(Ke(d.lowerLeft_X)),Number(Ke(d.lowerLeft_Y)),Number(Ke(d.upperRight_X)),Number(Ke(d.upperRight_Y))]},bu=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],r=n._V||n.DV,a=To(n,r),o=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+o+" "+Ke(a.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(a.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=en(n);return i.scope=n.scope,i.stream=e.join(`
`),i}},To=function(n,e){var r=n.fontSize===0?n.maxFontSize:n.fontSize,a={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=n.multiline?o.map((function(S){return S.split(`
`)})):o.map((function(S){return[S]}));var i=r,h=Re.internal.getHeight(n)||0;h=h<0?-h:h;var c=Re.internal.getWidth(n)||0;c=c<0?-c:c;var d=function(S,N,U){if(S+1<o.length){var $=N+" "+o[S+1][0];return vs($,n,U).width<=c-4}return!1};i++;e:for(;i>0;){e="",i--;var g,w,m=vs("3",n,i).height,v=n.multiline?h-i:(h-m)/2,p=v+=2,L=0,P=0,A=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+vs(e,n,i=12).width+", FieldWidth:"+c+`
`;break}for(var x="",j=0,y=0;y<o.length;y++)if(o.hasOwnProperty(y)){var C=!1;if(o[y].length!==1&&A!==o[y].length-1){if((m+2)*(j+2)+2>h)continue e;x+=o[y][A],C=!0,P=y,y--}else{x=(x+=o[y][A]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var R=parseInt(y),B=d(R,x,i),_=y>=o.length-1;if(B&&!_){x+=" ",A=0;continue}if(B||_){if(_)P=R;else if(n.multiline&&(m+2)*(j+2)+2>h)continue e}else{if(!n.multiline||(m+2)*(j+2)+2>h)continue e;P=R}}for(var M="",H=L;H<=P;H++){var K=o[H];if(n.multiline){if(H===P){M+=K[A]+" ",A=(A+1)%K.length;continue}if(H===L){M+=K[K.length-1]+" ";continue}}M+=K[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,w=vs(M,n,i).width,n.textAlign){case"right":g=c-w-2;break;case"center":g=(c-w)/2;break;case"left":default:g=2}e+=Ke(g)+" "+Ke(p)+` Td
`,e+="("+sa(M)+`) Tj
`,e+=-Ke(g)+` 0 Td
`,p=-(i+2),w=0,L=C?P:P+1,j++,x=""}break}return a.text=e,a.fontSize=i,a},vs=function(n,e,r){var a=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(n,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:o}},xu={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vu=function(n,e){var r={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find((function(a){return a.type===r.type&&a.object===r.object}))===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(r)},wu=function(n,e){for(var r in n)if(n.hasOwnProperty(r)){var a=r,o=n[r];e.internal.newObjectDeferredBegin(o.objId,!0),gt(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete n[a]}},yu=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ur.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(xu)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");qo=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new Zl,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(n)})),n.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in a)if(a.hasOwnProperty(o)){var i=a[o];i.objId=void 0,i.hasAnnotation&&vu(i,r)}})(n)})),n.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)})),n.internal.events.subscribe("postPutPages",(function(r){(function(a,o){var i=!a;for(var h in a||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(h)){var c=a[h],d=[],g=c.Rect;if(c.Rect&&(c.Rect=mu(c.Rect,o)),o.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Re.createDefaultAppearanceStream(c),gt(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(d=c.getKeyValueListForStream()),c.Rect=g,c.hasAppearanceStream&&!c.appearanceStreamContent){var w=bu(c);d.push({key:"AP",value:"<</N "+w+">>"}),o.internal.acroformPlugin.xForms.push(w)}if(c.appearanceStreamContent){var m="";for(var v in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(v)){var p=c.appearanceStreamContent[v];if(m+="/"+v+" ",m+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var h in p)if(p.hasOwnProperty(h)){var L=p[h];typeof L=="function"&&(L=L.call(o,c)),m+="/"+h+" "+L+" ",o.internal.acroformPlugin.xForms.indexOf(L)>=0||o.internal.acroformPlugin.xForms.push(L)}}else typeof(L=p)=="function"&&(L=L.call(o,c)),m+="/"+h+" "+L,o.internal.acroformPlugin.xForms.indexOf(L)>=0||o.internal.acroformPlugin.xForms.push(L);m+=">>"}d.push({key:"AP",value:`<<
`+m+">>"})}o.internal.putStream({additionalKeyValues:d,objectId:c.objId}),o.internal.out("endobj")}i&&wu(o.internal.acroformPlugin.xForms,o)})(r,n)})),n.internal.acroformPlugin.isInitialized=!0}},Xl=Ct.__acroform__.arrayToPdfArray=function(n,e,r){var a=function(h){return h};if(Array.isArray(n)){for(var o="[",i=0;i<n.length;i++)switch(i!==0&&(o+=" "),gt(n[i])){case"boolean":case"number":case"object":o+=n[i].toString();break;case"string":n[i].substr(0,1)!=="/"?(e!==void 0&&r&&(a=r.internal.getEncryptor(e)),o+="("+sa(a(n[i].toString()))+")"):o+=n[i].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},jo=function(n,e,r){var a=function(o){return o};return e!==void 0&&r&&(a=r.internal.getEncryptor(e)),(n=n||"").toString(),n="("+sa(a(n))+")"},tn=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};tn.prototype.toString=function(){return this.objId+" 0 R"},tn.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},tn.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter((function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"}));for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var a=e[r],o=this[a];o&&(Array.isArray(o)?n.push({key:a,value:Xl(o,this.objId,this.scope)}):o instanceof tn?(o.scope=this.scope,n.push({key:a,value:o.objId+" 0 R"})):typeof o!="function"&&n.push({key:a,value:o}))}return n};var Kl=function(){tn.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){n=r.trim()},get:function(){return n||null}})};fr(Kl,tn);var Zl=function(){tn.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+sa(r(n))+")"}},set:function(r){n=r}})};fr(Zl,tn);var Ur=function n(){tn.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Dt(e,3)},set:function(x){x?this.F=Tt(e,3):this.F=Ot(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(x){a=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(x){a[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(x){a[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(x){a[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(x){a[3]=x}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof ks)return;i="FieldObject"+n.FieldNum++}var x=function(j){return j};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+sa(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(x){h=x}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var g=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return g===void 0?50/qo:g},set:function(x){g=x}});var w="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return w},set:function(x){w=x}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof ks||this instanceof On))return jo(m,this.objId,this.scope)},set:function(x){x=x.toString(),m=x}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Ht?v:jo(v,this.objId,this.scope)},set:function(x){x=x.toString(),v=this instanceof Ht?x:x.substr(0,1)==="("?Oa(x.substr(1,x.length-2)):Oa(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ht?Oa(v.substr(1,v.length-1)):v},set:function(x){x=x.toString(),v=this instanceof Ht?"/"+x:x}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ht?p:jo(p,this.objId,this.scope)},set:function(x){x=x.toString(),p=this instanceof Ht?x:x.substr(0,1)==="("?Oa(x.substr(1,x.length-2)):Oa(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ht?Oa(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof Ht?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var L,P=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return P},set:function(x){x=!!x,P=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(L)return L},set:function(x){L=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,1)},set:function(x){x?this.Ff=Tt(this.Ff,1):this.Ff=Ot(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,2)},set:function(x){x?this.Ff=Tt(this.Ff,2):this.Ff=Ot(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,3)},set:function(x){x?this.Ff=Tt(this.Ff,3):this.Ff=Ot(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(A!==null)return A},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');A=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(A){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:A=2;break;case"center":case 1:A=1;break;case"left":case 0:default:A=0}}})};fr(Ur,tn);var ta=function(){Ur.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(r){n=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Xl(e,this.objId,this.scope)},set:function(r){var a,o;o=[],typeof(a=r)=="string"&&(o=(function(i,h,c){c||(c=1);for(var d,g=[];d=h.exec(i);)g.push(d[c]);return g})(a,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,18)},set:function(r){r?this.Ff=Tt(this.Ff,18):this.Ff=Ot(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Tt(this.Ff,19):this.Ff=Ot(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,20)},set:function(r){r?(this.Ff=Tt(this.Ff,20),e.sort()):this.Ff=Ot(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,22)},set:function(r){r?this.Ff=Tt(this.Ff,22):this.Ff=Ot(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,23)},set:function(r){r?this.Ff=Tt(this.Ff,23):this.Ff=Ot(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,27)},set:function(r){r?this.Ff=Tt(this.Ff,27):this.Ff=Ot(this.Ff,27)}}),this.hasAppearanceStream=!1};fr(ta,Ur);var ra=function(){ta.call(this),this.fontName="helvetica",this.combo=!1};fr(ra,ta);var na=function(){ra.call(this),this.combo=!0};fr(na,ra);var Ni=function(){na.call(this),this.edit=!0};fr(Ni,na);var Ht=function(){Ur.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,15)},set:function(r){r?this.Ff=Tt(this.Ff,15):this.Ff=Ot(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,16)},set:function(r){r?this.Ff=Tt(this.Ff,16):this.Ff=Ot(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,17)},set:function(r){r?this.Ff=Tt(this.Ff,17):this.Ff=Ot(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,26)},set:function(r){r?this.Ff=Tt(this.Ff,26):this.Ff=Ot(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var a,o=[];for(a in o.push("<<"),e)o.push("/"+a+" ("+sa(r(e[a]))+")");return o.push(">>"),o.join(`
`)}},set:function(r){gt(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(r){n="/"+r}})};fr(Ht,Ur);var ji=function(){Ht.call(this),this.pushButton=!0};fr(ji,Ht);var aa=function(){Ht.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};fr(aa,Ht);var ks=function(){var n,e;Ur.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(c){return c};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var i,h=[];for(i in h.push("<<"),a)h.push("/"+i+" ("+sa(o(a[i]))+")");return h.push(">>"),h.join(`
`)},set:function(o){gt(o)==="object"&&(a=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(o){typeof o=="string"&&(a.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(o){r="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Re.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};fr(ks,Ur),aa.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=n.createAppearanceStream(r.optionName),r.caption=n.getCA()}},aa.prototype.createOption=function(n){var e=new ks;return e.Parent=this,e.optionName=n,this.Kids.push(e),Nu.call(this.scope,e),e};var ki=function(){Ht.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Re.CheckBox.createAppearanceStream()};fr(ki,Ht);var On=function(){Ur.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,13)},set:function(e){e?this.Ff=Tt(this.Ff,13):this.Ff=Ot(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,21)},set:function(e){e?this.Ff=Tt(this.Ff,21):this.Ff=Ot(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,23)},set:function(e){e?this.Ff=Tt(this.Ff,23):this.Ff=Ot(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,24)},set:function(e){e?this.Ff=Tt(this.Ff,24):this.Ff=Ot(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,25)},set:function(e){e?this.Ff=Tt(this.Ff,25):this.Ff=Ot(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,26)},set:function(e){e?this.Ff=Tt(this.Ff,26):this.Ff=Ot(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};fr(On,Ur);var Si=function(){On.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Dt(this.Ff,14)},set:function(n){n?this.Ff=Tt(this.Ff,14):this.Ff=Ot(this.Ff,14)}}),this.password=!0};fr(Si,On);var Re={CheckBox:{createAppearanceStream:function(){return{N:{On:Re.CheckBox.YesNormal},D:{On:Re.CheckBox.YesPushDown,Off:Re.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=en(n);e.scope=n.scope;var r=[],a=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color),i=To(n,n.caption);return r.push("0.749023 g"),r.push("0 0 "+Ke(Re.internal.getWidth(n))+" "+Ke(Re.internal.getHeight(n))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Ke(i.fontSize)+" Tf "+o),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(n){var e=en(n);e.scope=n.scope;var r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),o=[],i=Re.internal.getHeight(n),h=Re.internal.getWidth(n),c=To(n,n.caption);return o.push("1 g"),o.push("0 0 "+Ke(h)+" "+Ke(i)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Ke(h-1)+" "+Ke(i-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+r+" "+Ke(c.fontSize)+" Tf "+a),o.push(c.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(n){var e=en(n);e.scope=n.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ke(Re.internal.getWidth(n))+" "+Ke(Re.internal.getHeight(n))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Re.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Re.RadioButton.Circle.YesNormal,e.D[n]=Re.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=en(n);e.scope=n.scope;var r=[],a=Re.internal.getWidth(n)<=Re.internal.getHeight(n)?Re.internal.getWidth(n)/4:Re.internal.getHeight(n)/4;a=Number((.9*a).toFixed(5));var o=Re.internal.Bezier_C,i=Number((a*o).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Fn(Re.internal.getWidth(n)/2)+" "+Fn(Re.internal.getHeight(n)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(n){var e=en(n);e.scope=n.scope;var r=[],a=Re.internal.getWidth(n)<=Re.internal.getHeight(n)?Re.internal.getWidth(n)/4:Re.internal.getHeight(n)/4;a=Number((.9*a).toFixed(5));var o=Number((2*a).toFixed(5)),i=Number((o*Re.internal.Bezier_C).toFixed(5)),h=Number((a*Re.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Fn(Re.internal.getWidth(n)/2)+" "+Fn(Re.internal.getHeight(n)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+i+" "+i+" "+o+" 0 "+o+" c"),r.push("-"+i+" "+o+" -"+o+" "+i+" -"+o+" 0 c"),r.push("-"+o+" -"+i+" -"+i+" -"+o+" 0 -"+o+" c"),r.push(i+" -"+o+" "+o+" -"+i+" "+o+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Fn(Re.internal.getWidth(n)/2)+" "+Fn(Re.internal.getHeight(n)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+h+" "+h+" "+a+" 0 "+a+" c"),r.push("-"+h+" "+a+" -"+a+" "+h+" -"+a+" 0 c"),r.push("-"+a+" -"+h+" -"+h+" -"+a+" 0 -"+a+" c"),r.push(h+" -"+a+" "+a+" -"+h+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=en(n);e.scope=n.scope;var r=[],a=Re.internal.getWidth(n)<=Re.internal.getHeight(n)?Re.internal.getWidth(n)/4:Re.internal.getHeight(n)/4;a=Number((.9*a).toFixed(5));var o=Number((2*a).toFixed(5)),i=Number((o*Re.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Fn(Re.internal.getWidth(n)/2)+" "+Fn(Re.internal.getHeight(n)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+i+" "+i+" "+o+" 0 "+o+" c"),r.push("-"+i+" "+o+" -"+o+" "+i+" -"+o+" 0 c"),r.push("-"+o+" -"+i+" -"+i+" -"+o+" 0 -"+o+" c"),r.push(i+" -"+o+" "+o+" -"+i+" "+o+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Re.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Re.RadioButton.Cross.YesNormal,e.D[n]=Re.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=en(n);e.scope=n.scope;var r=[],a=Re.internal.calculateCross(n);return r.push("q"),r.push("1 1 "+Ke(Re.internal.getWidth(n)-2)+" "+Ke(Re.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Ke(a.x1.x)+" "+Ke(a.x1.y)+" m"),r.push(Ke(a.x2.x)+" "+Ke(a.x2.y)+" l"),r.push(Ke(a.x4.x)+" "+Ke(a.x4.y)+" m"),r.push(Ke(a.x3.x)+" "+Ke(a.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(n){var e=en(n);e.scope=n.scope;var r=Re.internal.calculateCross(n),a=[];return a.push("0.749023 g"),a.push("0 0 "+Ke(Re.internal.getWidth(n))+" "+Ke(Re.internal.getHeight(n))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Ke(Re.internal.getWidth(n)-2)+" "+Ke(Re.internal.getHeight(n)-2)+" re"),a.push("W"),a.push("n"),a.push(Ke(r.x1.x)+" "+Ke(r.x1.y)+" m"),a.push(Ke(r.x2.x)+" "+Ke(r.x2.y)+" l"),a.push(Ke(r.x4.x)+" "+Ke(r.x4.y)+" m"),a.push(Ke(r.x3.x)+" "+Ke(r.x3.y)+" l"),a.push("s"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(n){var e=en(n);e.scope=n.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ke(Re.internal.getWidth(n))+" "+Ke(Re.internal.getHeight(n))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+r}};Re.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Re.internal.getWidth(n),r=Re.internal.getHeight(n),a=Math.min(e,r);return{x1:{x:(e-a)/2,y:(r-a)/2+a},x2:{x:(e-a)/2+a,y:(r-a)/2},x3:{x:(e-a)/2,y:(r-a)/2},x4:{x:(e-a)/2+a,y:(r-a)/2+a}}}},Re.internal.getWidth=function(n){var e=0;return gt(n)==="object"&&(e=yl(n.Rect[2])),e},Re.internal.getHeight=function(n){var e=0;return gt(n)==="object"&&(e=yl(n.Rect[3])),e};var Nu=Ct.addField=function(n){if(yu(this,n),!(n instanceof Ur))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Ct.AcroFormChoiceField=ta,Ct.AcroFormListBox=ra,Ct.AcroFormComboBox=na,Ct.AcroFormEditBox=Ni,Ct.AcroFormButton=Ht,Ct.AcroFormPushButton=ji,Ct.AcroFormRadioButton=aa,Ct.AcroFormCheckBox=ki,Ct.AcroFormTextField=On,Ct.AcroFormPasswordField=Si,Ct.AcroFormAppearance=Re,Ct.AcroForm={ChoiceField:ta,ListBox:ra,ComboBox:na,EditBox:Ni,Button:Ht,PushButton:ji,RadioButton:aa,CheckBox:ki,TextField:On,PasswordField:Si,Appearance:Re},Ue.AcroForm={ChoiceField:ta,ListBox:ra,ComboBox:na,EditBox:Ni,Button:Ht,PushButton:ji,RadioButton:aa,CheckBox:ki,TextField:On,PasswordField:Si,Appearance:Re};var ju=Ue.AcroForm;function Ql(n){return n.reduce((function(e,r,a){return e[r]=a,e}),{})}(function(n){n.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=n.__addimage__.getImageFileTypeByImageData=function(S,N){var U,$,ee,E,T,G=e;if((N=N||e)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(B(S))for(T in r)for(ee=r[T],U=0;U<ee.length;U+=1){for(E=!0,$=0;$<ee[U].length;$+=1)if(ee[U][$]!==void 0&&ee[U][$]!==S[$]){E=!1;break}if(E===!0){G=T;break}}else for(T in r)for(ee=r[T],U=0;U<ee.length;U+=1){for(E=!0,$=0;$<ee[U].length;$+=1)if(ee[U][$]!==void 0&&ee[U][$]!==S.charCodeAt($)){E=!1;break}if(E===!0){G=T;break}}return G===e&&N!==e&&(G=N),G},o=function S(N){for(var U=this.internal.write,$=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var E=[];if(E.push({key:"Type",value:"/XObject"}),E.push({key:"Subtype",value:"/Image"}),E.push({key:"Width",value:N.width}),E.push({key:"Height",value:N.height}),N.colorSpace===A.INDEXED?E.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(E.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===A.DEVICE_CMYK&&E.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),E.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&E.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var T="",G=0,V=N.transparency.length;G<V;G++)T+=N.transparency[G]+" "+N.transparency[G]+" ";E.push({key:"Mask",value:"["+T+"]"})}N.sMask!==void 0&&E.push({key:"SMask",value:N.objectId+1+" 0 R"});var re=N.filter!==void 0?["/"+N.filter]:void 0;if($({data:N.data,additionalKeyValues:E,alreadyAppliedFilters:re,objectId:N.objectId}),U("endobj"),"sMask"in N&&N.sMask!==void 0){var se="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,k={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:se,data:N.sMask};"filter"in N&&(k.filter=N.filter),S.call(this,k)}if(N.colorSpace===A.INDEXED){var z=this.internal.newObject();$({data:M(new Uint8Array(N.palette)),objectId:z}),U("endobj")}},i=function(){var S=this.internal.collections.addImage_images;for(var N in S)o.call(this,S[N])},h=function(){var S,N=this.internal.collections.addImage_images,U=this.internal.write;for(var $ in N)U("/I"+(S=N[$]).index,S.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",h))},d=function(){var S=this.internal.collections.addImage_images;return c.call(this),S},g=function(){return Object.keys(this.internal.collections.addImage_images).length},w=function(S){return typeof n["process"+S.toUpperCase()]=="function"},m=function(S){return gt(S)==="object"&&S.nodeType===1},v=function(S,N){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var U=""+S.getAttribute("src");if(U.indexOf("data:image/")===0)return yi(unescape(U).split("base64,").pop());var $=n.loadFile(U,!0);if($!==void 0)return $}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var ee;switch(N){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;case"JPEG":case"JPG":default:ee="image/jpeg"}return yi(S.toDataURL(ee,1).split("base64,").pop())}},p=function(S){var N=this.internal.collections.addImage_images;if(N){for(var U in N)if(S===N[U].alias)return N[U]}},L=function(S,N,U){return S||N||(S=-96,N=-96),S<0&&(S=-1*U.width*72/S/this.internal.scaleFactor),N<0&&(N=-1*U.height*72/N/this.internal.scaleFactor),S===0&&(S=N*U.width/U.height),N===0&&(N=S*U.height/U.width),[S,N]},P=function(S,N,U,$,ee,E){var T=L.call(this,U,$,ee),G=this.internal.getCoordinateString,V=this.internal.getVerticalCoordinateString,re=d.call(this);if(U=T[0],$=T[1],re[ee.index]=ee,E){E*=Math.PI/180;var se=Math.cos(E),k=Math.sin(E),z=function(J){return J.toFixed(4)},Y=[z(se),z(k),z(-1*k),z(se),0,0,"cm"]}this.internal.write("q"),E?(this.internal.write([1,"0","0",1,G(S),V(N+$),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([G(U),"0","0",G($),"0","0","cm"].join(" "))):this.internal.write([G(U),"0","0",G($),G(S),V(N+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},A=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=n.__addimage__.sHashCode=function(S){var N,U,$=0;if(typeof S=="string")for(U=S.length,N=0;N<U;N++)$=($<<5)-$+S.charCodeAt(N),$|=0;else if(B(S))for(U=S.byteLength/2,N=0;N<U;N++)$=($<<5)-$+S[N],$|=0;return $},y=n.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var N=!0;return S.length===0&&(N=!1),S.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(N=!1),N},C=n.__addimage__.extractImageFromDataUrl=function(S){var N=(S=S||"").split("base64,"),U=null;if(N.length===2){var $=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(N[0]);Array.isArray($)&&(U={mimeType:$[1],charset:$[2],data:N[1]})}return U},R=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(S){return R()&&S instanceof ArrayBuffer};var B=n.__addimage__.isArrayBufferView=function(S){return R()&&typeof Uint32Array<"u"&&(S instanceof Int8Array||S instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array)},_=n.__addimage__.binaryStringToUint8Array=function(S){for(var N=S.length,U=new Uint8Array(N),$=0;$<N;$++)U[$]=S.charCodeAt($);return U},M=n.__addimage__.arrayBufferToBinaryString=function(S){for(var N="",U=B(S)?S:new Uint8Array(S),$=0;$<U.length;$+=8192)N+=String.fromCharCode.apply(null,U.subarray($,$+8192));return N};n.addImage=function(){var S,N,U,$,ee,E,T,G,V;if(typeof arguments[1]=="number"?(N=e,U=arguments[1],$=arguments[2],ee=arguments[3],E=arguments[4],T=arguments[5],G=arguments[6],V=arguments[7]):(N=arguments[1],U=arguments[2],$=arguments[3],ee=arguments[4],E=arguments[5],T=arguments[6],G=arguments[7],V=arguments[8]),gt(S=arguments[0])==="object"&&!m(S)&&"imageData"in S){var re=S;S=re.imageData,N=re.format||N||e,U=re.x||U||0,$=re.y||$||0,ee=re.w||re.width||ee,E=re.h||re.height||E,T=re.alias||T,G=re.compression||G,V=re.rotation||re.angle||V}var se=this.internal.getFilters();if(G===void 0&&se.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(U)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var k=H.call(this,S,N,T,G);return P.call(this,U,$,ee,E,k,V),this};var H=function(S,N,U,$){var ee,E,T;if(typeof S=="string"&&a(S)===e){S=unescape(S);var G=K(S,!1);(G!==""||(G=n.loadFile(S,!0))!==void 0)&&(S=G)}if(m(S)&&(S=v(S,N)),N=a(S,N),!w(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((T=U)==null||T.length===0)&&(U=(function(V){return typeof V=="string"||B(V)?j(V):B(V.data)?j(V.data):null})(S)),(ee=p.call(this,U))||(R()&&(S instanceof Uint8Array||N==="RGBA"||(E=S,S=_(S))),ee=this["process"+N.toUpperCase()](S,g.call(this),U,(function(V){return V&&typeof V=="string"&&(V=V.toUpperCase()),V in n.image_compression?V:x.NONE})($),E)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},K=n.__addimage__.convertBase64ToBinaryString=function(S,N){var U;N=typeof N!="boolean"||N;var $,ee="";if(typeof S=="string"){$=(U=C(S))!==null?U.data:S;try{ee=yi($)}catch(E){if(N)throw y($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+E.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};n.getImageProperties=function(S){var N,U,$="";if(m(S)&&(S=v(S)),typeof S=="string"&&a(S)===e&&(($=K(S,!1))===""&&($=n.loadFile(S)||""),S=$),U=a(S),!w(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!R()||S instanceof Uint8Array||(S=_(S)),!(N=this["process"+U.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=U,N}})(Ue.API),(function(n){var e=function(r){if(r!==void 0&&r!="")return!0};Ue.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(r){for(var a,o,i,h=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),g=r.pageContext.annotations,w=!1,m=0;m<g.length&&!w;m++)switch((a=g[m]).type){case"link":(e(a.options.url)||e(a.options.pageNumber))&&(w=!0);break;case"reference":case"text":case"freetext":w=!0}if(w!=0){this.internal.write("/Annots [");for(var v=0;v<g.length;v++){a=g[v];var p=this.internal.pdfEscape,L=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var P=this.internal.newAdditionalObject(),A=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(P.objId),j=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(o="/Rect ["+h(a.bounds.x)+" "+c(a.bounds.y+a.bounds.h)+" "+h(a.bounds.x+a.bounds.w)+" "+c(a.bounds.y)+"] ")+"/Contents ("+p(x(a.contents))+")",i+=" /Popup "+A.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+p(x(j))+") >>",P.content=i;var y=P.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+h(a.bounds.x+30)+" "+c(a.bounds.y+a.bounds.h)+" "+h(a.bounds.x+a.bounds.w+30)+" "+c(a.bounds.y)+"] ")+" /Parent "+y,a.open&&(i+=" /Open true"),i+=" >>",A.content=i,this.internal.write(P.objId,"0 R",A.objId,"0 R");break;case"freetext":o="/Rect ["+h(a.bounds.x)+" "+c(a.bounds.y)+" "+h(a.bounds.x+a.bounds.w)+" "+c(a.bounds.y+a.bounds.h)+"] ";var C=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+p(L(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var R=this.annotations._nameMap[a.options.name];a.options.pageNumber=R.page,a.options.top=R.y}else a.options.top||(a.options.top=0);if(o="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+p(L(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var B=c(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+B+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),n.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},n.link=function(r,a,o,i,h){var c=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:d(r),y:g(a),w:d(r+o),h:g(a+i)},options:h,type:"link"})},n.textWithLink=function(r,a,o,i){var h,c,d=this.getTextWidth(r),g=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){c=i.maxWidth;var w=this.splitTextToSize(r,c).length;h=Math.ceil(g*w)}else c=d,h=g;return this.text(r,a,o,i),o+=.2*g,i.align==="center"&&(a-=d/2),i.align==="right"&&(a-=d),this.link(a,o-g,c,h,i),d},n.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}})(Ue.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];n.__arabicParser__={};var i=n.__arabicParser__.isInArabicSubstitutionA=function(P){return e[P.charCodeAt(0)]!==void 0},h=n.__arabicParser__.isArabicLetter=function(P){return typeof P=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(P)},c=n.__arabicParser__.isArabicEndLetter=function(P){return h(P)&&i(P)&&e[P.charCodeAt(0)].length<=2},d=n.__arabicParser__.isArabicAlfLetter=function(P){return h(P)&&o.indexOf(P.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(P){return h(P)&&i(P)&&e[P.charCodeAt(0)].length>=1};var g=n.__arabicParser__.arabicLetterHasFinalForm=function(P){return h(P)&&i(P)&&e[P.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(P){return h(P)&&i(P)&&e[P.charCodeAt(0)].length>=3};var w=n.__arabicParser__.arabicLetterHasMedialForm=function(P){return h(P)&&i(P)&&e[P.charCodeAt(0)].length==4},m=n.__arabicParser__.resolveLigatures=function(P){var A=0,x=r,j="",y=0;for(A=0;A<P.length;A+=1)x[P.charCodeAt(A)]!==void 0?(y++,typeof(x=x[P.charCodeAt(A)])=="number"&&(j+=String.fromCharCode(x),x=r,y=0),A===P.length-1&&(x=r,j+=P.charAt(A-(y-1)),A-=y-1,y=0)):(x=r,j+=P.charAt(A-y),A-=y,y=0);return j};n.__arabicParser__.isArabicDiacritic=function(P){return P!==void 0&&a[P.charCodeAt(0)]!==void 0};var v=n.__arabicParser__.getCorrectForm=function(P,A,x){return h(P)?i(P)===!1?-1:!g(P)||!h(A)&&!h(x)||!h(x)&&c(A)||c(P)&&!h(A)||c(P)&&d(A)||c(P)&&c(A)?0:w(P)&&h(A)&&!c(A)&&h(x)&&g(x)?3:c(P)||!h(x)?1:2:-1},p=function(P){var A=0,x=0,j=0,y="",C="",R="",B=(P=P||"").split("\\s+"),_=[];for(A=0;A<B.length;A+=1){for(_.push(""),x=0;x<B[A].length;x+=1)y=B[A][x],C=B[A][x-1],R=B[A][x+1],h(y)?(j=v(y,C,R),_[A]+=j!==-1?String.fromCharCode(e[y.charCodeAt(0)][j]):y):_[A]+=y;_[A]=m(_[A])}return _.join(" ")},L=n.__arabicParser__.processArabic=n.processArabic=function(){var P,A=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(A)){var j=0;for(x=[],j=0;j<A.length;j+=1)Array.isArray(A[j])?x.push([p(A[j][0]),A[j][1],A[j][2]]):x.push([p(A[j])]);P=x}else P=p(A);return typeof arguments[0]=="string"?P:(arguments[0].text=P,arguments[0])};n.events.push(["preProcessText",L])})(Ue.API),Ue.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(n){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(c){r=c}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(c){o=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(c){i=c}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(c){h=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,a){var o;if((r=r||"2d")!=="2d")return null;for(o in a)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=a[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Ue.API),(function(n){var e={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(P){d=P}});var g=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return g},set:function(P){g=P}});var w=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return w},set:function(P){w=P}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(P){m=P}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(P){v=P}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(P){p=P}});var L=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return L},set:function(P){L=P}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(d){return a.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},n.getTextDimensions=function(d,g){a.call(this);var w=(g=g||{}).fontSize||this.getFontSize(),m=g.font||this.getFont(),v=g.scaleFactor||this.internal.scaleFactor,p=0,L=0,P=0,A=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var x=g.maxWidth;x>0?typeof d=="string"?d=this.splitTextToSize(d,x):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce((function(y,C){return y.concat(A.splitTextToSize(C,x))}),[])):d=Array.isArray(d)?d:[d];for(var j=0;j<d.length;j++)p<(P=this.getStringUnitWidth(d[j],{font:m})*w)&&(p=P);return p!==0&&(L=d.length),{w:p/=v,h:Math.max((L*w*this.getLineHeightFactor()-w*(this.getLineHeightFactor()-1))/v,0)}},n.cellAddPage=function(){a.call(this),this.addPage();var d=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=n.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var g=this.internal.__cell__.lastCell,w=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return g.lineNumber!==void 0&&(g.lineNumber===d.lineNumber?(d.x=(g.x||0)+(g.width||0),d.y=g.y||0):g.y+g.height+d.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=m.top,p&&v&&(this.printHeaderRow(d.lineNumber,!0),d.y+=v[0].height)):d.y=g.y+g.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-w,d.y+w,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+w,{align:"center",baseline:"top",maxWidth:d.width-w-w}):this.text(d.text,d.x+w,d.y+w,{align:"left",baseline:"top",maxWidth:d.width-w-w})),this.internal.__cell__.lastCell=d,this};n.table=function(d,g,w,m,v){if(a.call(this),!w)throw new Error("No data for PDF table.");var p,L,P,A,x=[],j=[],y=[],C={},R={},B=[],_=[],M=(v=v||{}).autoSize||!1,H=v.printHeaders!==!1,K=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,S=v.margins||Object.assign({width:this.getPageWidth()},e),N=typeof v.padding=="number"?v.padding:3,U=v.headerBackgroundColor||"#c8c8c8",$=v.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=H,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=$,this.setFontSize(K),m==null)j=x=Object.keys(w[0]),y=x.map((function(){return"left"}));else if(Array.isArray(m)&&gt(m[0])==="object")for(x=m.map((function(re){return re.name})),j=m.map((function(re){return re.prompt||re.name||""})),y=m.map((function(re){return re.align||"left"})),p=0;p<m.length;p+=1)R[m[p].name]=m[p].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(j=x=m,y=x.map((function(){return"left"})));if(M||Array.isArray(m)&&typeof m[0]=="string")for(p=0;p<x.length;p+=1){for(C[A=x[p]]=w.map((function(re){return re[A]})),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(j[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),L=C[A],this.setFont(void 0,"normal"),P=0;P<L.length;P+=1)B.push(this.getTextDimensions(L[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[A]=Math.max.apply(null,B)+N+N,B=[]}if(H){var ee={};for(p=0;p<x.length;p+=1)ee[x[p]]={},ee[x[p]].text=j[p],ee[x[p]].align=y[p];var E=c.call(this,ee,R);_=x.map((function(re){return new i(d,g,R[re],E,ee[re].text,void 0,ee[re].align)})),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var T=m.reduce((function(re,se){return re[se.name]=se.align,re}),{});for(p=0;p<w.length;p+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:p,data:w[p]},this);var G=c.call(this,w[p],R);for(P=0;P<x.length;P+=1){var V=w[p][x[P]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:p,col:P,data:V},this),h.call(this,new i(d,g,R[x[P]],G,V,p+2,T[x[P]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=g,this};var c=function(d,g){var w=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(d).map((function(p){var L=d[p];return this.splitTextToSize(L.hasOwnProperty("text")?L.text:L,g[p]-w-w)}),this).map((function(p){return this.getLineHeightFactor()*p.length*m/v+w+w}),this).reduce((function(p,L){return Math.max(p,L)}),0)};n.setTableHeaderRow=function(d){a.call(this),this.internal.__cell__.tableHeaderRow=d},n.printHeaderRow=function(d,g){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var w;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){w=this.internal.__cell__.tableHeaderRow[p].clone(),g&&(w.y=this.internal.__cell__.margins.top||0,v.push(w)),w.lineNumber=d;var L=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,w),this.setTextColor(L)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),r=!1}})(Ue.API);var ec={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},tc=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Oo=Ql(tc),rc=[100,200,300,400,500,600,700,800,900],ku=Ql(rc);function Ro(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return ec[i=i||"normal"]?i:"normal"})(n.style),a=(function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}})(n.weight),o=(function(i){return typeof Oo[i=i||"normal"]=="number"?i:"normal"})(n.stretch);return{family:e,style:r,weight:a,stretch:o,src:n.src||[],ref:n.ref||{name:e,style:[o,r,a].join(" ")}}}function Nl(n,e,r,a){var o;for(o=r;o>=0&&o<e.length;o+=a)if(n[e[o]])return n[e[o]];for(o=r;o>=0&&o<e.length;o-=a)if(n[e[o]])return n[e[o]]}var Su={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},jl={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function kl(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Lu(n,e,r){for(var a=(r=r||{}).defaultFontFamily||"times",o=Object.assign({},Su,r.genericFontFamilies||{}),i=null,h=null,c=0;c<e.length;++c)if(o[(i=Ro(e[c])).family]&&(i.family=o[i.family]),n.hasOwnProperty(i.family)){h=n[i.family];break}if(!(h=h||n[a]))throw new Error("Could not find a font-family for the rule '"+kl(i)+"' and default family '"+a+"'.");if(h=(function(d,g){if(g[d])return g[d];var w=Oo[d],m=w<=Oo.normal?-1:1,v=Nl(g,tc,w,m);if(!v)throw new Error("Could not find a matching font-stretch value for "+d);return v})(i.stretch,h),h=(function(d,g){if(g[d])return g[d];for(var w=ec[d],m=0;m<w.length;++m)if(g[w[m]])return g[w[m]];throw new Error("Could not find a matching font-style for "+d)})(i.style,h),!(h=(function(d,g){if(g[d])return g[d];if(d===400&&g[500])return g[500];if(d===500&&g[400])return g[400];var w=ku[d],m=Nl(g,rc,w,d<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+d);return m})(i.weight,h)))throw new Error("Failed to resolve a font for the rule '"+kl(i)+"'.");return h}function Sl(n){return n.trimLeft()}function Au(n,e){for(var r=0;r<n.length;){if(n.charAt(r)===e)return[n.substring(0,r),n.substring(r+1)];r+=1}return null}function Pu(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var ws,Ll,Al,ko=["times"];(function(n){var e,r,a,o,i,h,c,d,g,w=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new d,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new h,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new h,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,h=this.internal.Point,c=this.internal.Rectangle,d=this.internal.Matrix,g=new w}]);var m=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=k;Object.defineProperty(this,"pdf",{get:function(){return z}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(be){Y=!!be}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(be){J=!!be}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(be){isNaN(be)||(Z=be)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(be){isNaN(be)||(le=be)}}),Object.defineProperty(this,"margin",{get:function(){return g.margin},set:function(be){var te;typeof be=="number"?te=[be,be,be,be]:((te=new Array(4))[0]=be[0],te[1]=be.length>=2?be[1]:te[0],te[2]=be.length>=3?be[2]:te[0],te[3]=be.length>=4?be[3]:te[1]),g.margin=te}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(be){ce=be}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(be){de=be}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(be){Ne=be}}),Object.defineProperty(this,"ctx",{get:function(){return g},set:function(be){be instanceof w&&(g=be)}}),Object.defineProperty(this,"path",{get:function(){return g.path},set:function(be){g.path=be}});var Se=[];Object.defineProperty(this,"ctxStack",{get:function(){return Se},set:function(be){Se=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var te;te=v(be),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var te=v(be);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var Ae=null;function Pe(be,te){if(Ae===null){var Ze=(function(Be){var Le=[];return Object.keys(Be).forEach((function(_e){Be[_e].forEach((function(Me){var Fe=null;switch(Me){case"bold":Fe={family:_e,weight:"bold"};break;case"italic":Fe={family:_e,style:"italic"};break;case"bolditalic":Fe={family:_e,weight:"bold",style:"italic"};break;case"":case"normal":Fe={family:_e}}Fe!==null&&(Fe.ref={name:_e,style:Me},Le.push(Fe))}))})),Le})(be.getFontList());Ae=(function(Be){for(var Le={},_e=0;_e<Be.length;++_e){var Me=Ro(Be[_e]),Fe=Me.family,Ee=Me.stretch,Ye=Me.style,tt=Me.weight;Le[Fe]=Le[Fe]||{},Le[Fe][Ee]=Le[Fe][Ee]||{},Le[Fe][Ee][Ye]=Le[Fe][Ee][Ye]||{},Le[Fe][Ee][Ye][tt]=Me}return Le})(Ze.concat(te))}return Ae}var We=null;Object.defineProperty(this,"fontFaces",{get:function(){return We},set:function(be){Ae=null,We=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var te;if(this.ctx.font=be,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var Ze=te[1],Be=(te[2],te[3]),Le=te[4],_e=(te[5],te[6]),Me=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(Me==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:Me==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var Fe=(function(Ge){var nt,De,Xt=[],ct=Ge.trim();if(ct==="")return ko;if(ct in jl)return[jl[ct]];for(;ct!=="";){switch(De=null,nt=(ct=Sl(ct)).charAt(0)){case'"':case"'":De=Au(ct.substring(1),nt);break;default:De=Pu(ct)}if(De===null||(Xt.push(De[0]),(ct=Sl(De[1]))!==""&&ct.charAt(0)!==","))return ko;ct=ct.replace(/^,/,"")}return Xt})(_e);if(this.fontFaces){var Ee=Lu(Pe(this.pdf,this.fontFaces),Fe.map((function(Ge){return{family:Ge,stretch:"normal",weight:Be,style:Ze}})));this.pdf.setFont(Ee.ref.name,Ee.ref.style)}else{var Ye="";(Be==="bold"||parseInt(Be,10)>=700||Ze==="bold")&&(Ye="bold"),Ze==="italic"&&(Ye+="italic"),Ye.length===0&&(Ye="normal");for(var tt="",rt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<Fe.length;ot++){if(this.pdf.internal.getFont(Fe[ot],Ye,{noFallback:!0,disableWarning:!0})!==void 0){tt=Fe[ot];break}if(Ye==="bolditalic"&&this.pdf.internal.getFont(Fe[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)tt=Fe[ot],Ye="bold";else if(this.pdf.internal.getFont(Fe[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){tt=Fe[ot],Ye="normal";break}}if(tt===""){for(var mt=0;mt<Fe.length;mt++)if(rt[Fe[mt]]){tt=rt[Fe[mt]];break}}tt=tt===""?"Times":tt,this.pdf.setFont(tt,Ye)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};m.prototype.setLineDash=function(k){this.lineDash=k},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){C.call(this,"fill",!1)},m.prototype.stroke=function(){C.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(k,z){if(isNaN(k)||isNaN(z))throw wt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new h(k,z));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new h(k,z)},m.prototype.closePath=function(){var k=new h(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&gt(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){k=new h(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(k.x,k.y)},m.prototype.lineTo=function(k,z){if(isNaN(k)||isNaN(z))throw wt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new h(k,z));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new h(Y.x,Y.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},m.prototype.quadraticCurveTo=function(k,z,Y,J){if(isNaN(Y)||isNaN(J)||isNaN(k)||isNaN(z))throw wt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new h(Y,J)),le=this.ctx.transform.applyToPoint(new h(k,z));this.path.push({type:"qct",x1:le.x,y1:le.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new h(Z.x,Z.y)},m.prototype.bezierCurveTo=function(k,z,Y,J,Z,le){if(isNaN(Z)||isNaN(le)||isNaN(k)||isNaN(z)||isNaN(Y)||isNaN(J))throw wt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new h(Z,le)),de=this.ctx.transform.applyToPoint(new h(k,z)),Ne=this.ctx.transform.applyToPoint(new h(Y,J));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:Ne.x,y2:Ne.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new h(ce.x,ce.y)},m.prototype.arc=function(k,z,Y,J,Z,le){if(isNaN(k)||isNaN(z)||isNaN(Y)||isNaN(J)||isNaN(Z))throw wt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new h(k,z));k=ce.x,z=ce.y;var de=this.ctx.transform.applyToPoint(new h(0,Y)),Ne=this.ctx.transform.applyToPoint(new h(0,0));Y=Math.sqrt(Math.pow(de.x-Ne.x,2)+Math.pow(de.y-Ne.y,2))}Math.abs(Z-J)>=2*Math.PI&&(J=0,Z=2*Math.PI),this.path.push({type:"arc",x:k,y:z,radius:Y,startAngle:J,endAngle:Z,counterclockwise:le})},m.prototype.arcTo=function(k,z,Y,J,Z){throw new Error("arcTo not implemented.")},m.prototype.rect=function(k,z,Y,J){if(isNaN(k)||isNaN(z)||isNaN(Y)||isNaN(J))throw wt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,z),this.lineTo(k+Y,z),this.lineTo(k+Y,z+J),this.lineTo(k,z+J),this.lineTo(k,z),this.lineTo(k+Y,z),this.lineTo(k,z)},m.prototype.fillRect=function(k,z,Y,J){if(isNaN(k)||isNaN(z)||isNaN(Y)||isNaN(J))throw wt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,z,Y,J),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},m.prototype.strokeRect=function(k,z,Y,J){if(isNaN(k)||isNaN(z)||isNaN(Y)||isNaN(J))throw wt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");L.call(this)||(this.beginPath(),this.rect(k,z,Y,J),this.stroke())},m.prototype.clearRect=function(k,z,Y,J){if(isNaN(k)||isNaN(z)||isNaN(Y)||isNaN(J))throw wt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,z,Y,J))},m.prototype.save=function(k){k=typeof k!="boolean"||k;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new w(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},m.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(z),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(k){var z,Y,J,Z;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))z=0,Y=0,J=0,Z=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(le!==null)z=parseInt(le[1]),Y=parseInt(le[2]),J=parseInt(le[3]),Z=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)z=parseInt(le[1]),Y=parseInt(le[2]),J=parseInt(le[3]),Z=parseFloat(le[4]);else{if(Z=1,typeof k=="string"&&k.charAt(0)!=="#"){var ce=new $l(k);k=ce.ok?ce.toHex():"#000000"}k.length===4?(z=k.substring(1,2),z+=z,Y=k.substring(2,3),Y+=Y,J=k.substring(3,4),J+=J):(z=k.substring(1,3),Y=k.substring(3,5),J=k.substring(5,7)),z=parseInt(z,16),Y=parseInt(Y,16),J=parseInt(J,16)}}return{r:z,g:Y,b:J,a:Z,style:k}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},L=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(k,z,Y,J){if(isNaN(z)||isNaN(Y)||typeof k!="string")throw wt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!p.call(this)){var Z=G(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;N.call(this,{text:k,x:z,y:Y,scale:le,angle:Z,align:this.textAlign,maxWidth:J})}},m.prototype.strokeText=function(k,z,Y,J){if(isNaN(z)||isNaN(Y)||typeof k!="string")throw wt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!L.call(this)){J=isNaN(J)?void 0:J;var Z=G(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;N.call(this,{text:k,x:z,y:Y,scale:le,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:J})}},m.prototype.measureText=function(k){if(typeof k!="string")throw wt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,Y=this.pdf.internal.scaleFactor,J=z.internal.getFontSize(),Z=z.getStringUnitWidth(k)*J/z.internal.scaleFactor,le=function(ce){var de=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new le({width:Z*=Math.round(96*Y/72*1e4)/1e4})},m.prototype.scale=function(k,z){if(isNaN(k)||isNaN(z))throw wt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new d(k,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},m.prototype.rotate=function(k){if(isNaN(k))throw wt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new d(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},m.prototype.translate=function(k,z){if(isNaN(k)||isNaN(z))throw wt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new d(1,0,0,1,k,z);this.ctx.transform=this.ctx.transform.multiply(Y)},m.prototype.transform=function(k,z,Y,J,Z,le){if(isNaN(k)||isNaN(z)||isNaN(Y)||isNaN(J)||isNaN(Z)||isNaN(le))throw wt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new d(k,z,Y,J,Z,le);this.ctx.transform=this.ctx.transform.multiply(ce)},m.prototype.setTransform=function(k,z,Y,J,Z,le){k=isNaN(k)?1:k,z=isNaN(z)?0:z,Y=isNaN(Y)?0:Y,J=isNaN(J)?1:J,Z=isNaN(Z)?0:Z,le=isNaN(le)?0:le,this.ctx.transform=new d(k,z,Y,J,Z,le)};var P=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(k,z,Y,J,Z,le,ce,de,Ne){var Se=this.pdf.getImageProperties(k),Ae=1,Pe=1,We=1,be=1;J!==void 0&&de!==void 0&&(We=de/J,be=Ne/Z,Ae=Se.width/J*de/J,Pe=Se.height/Z*Ne/Z),le===void 0&&(le=z,ce=Y,z=0,Y=0),J!==void 0&&de===void 0&&(de=J,Ne=Z),J===void 0&&de===void 0&&(de=Se.width,Ne=Se.height);for(var te,Ze=this.ctx.transform.decompose(),Be=G(Ze.rotate.shx),Le=new d,_e=(Le=(Le=(Le=Le.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale)).applyToRectangle(new c(le-z*We,ce-Y*be,J*Ae,Z*Pe)),Me=A.call(this,_e),Fe=[],Ee=0;Ee<Me.length;Ee+=1)Fe.indexOf(Me[Ee])===-1&&Fe.push(Me[Ee]);if(y(Fe),this.autoPaging)for(var Ye=Fe[0],tt=Fe[Fe.length-1],rt=Ye;rt<tt+1;rt++){this.pdf.setPage(rt);var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mt=rt===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],De=rt===1?0:Ge+(rt-2)*nt;if(this.ctx.clip_path.length!==0){var Xt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(te,this.posX+this.margin[3],-De+mt+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=Xt}var ct=JSON.parse(JSON.stringify(_e));ct=j([ct],this.posX+this.margin[3],-De+mt+this.ctx.prevPageLastElemOffset)[0];var Pr=(rt>Ye||rt<tt)&&P.call(this);Pr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,nt,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",ct.x,ct.y,ct.w,ct.h,null,null,Be),Pr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(k,"JPEG",_e.x,_e.y,_e.w,_e.h,null,null,Be)};var A=function(k,z,Y){var J=[];z=z||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":J.push(Math.floor((k.y+Z)/Y)+1);break;case"arc":J.push(Math.floor((k.y+Z-k.radius)/Y)+1),J.push(Math.floor((k.y+Z+k.radius)/Y)+1);break;case"qct":var le=V(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);J.push(Math.floor((le.y+Z)/Y)+1),J.push(Math.floor((le.y+le.h+Z)/Y)+1);break;case"bct":var ce=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);J.push(Math.floor((ce.y+Z)/Y)+1),J.push(Math.floor((ce.y+ce.h+Z)/Y)+1);break;case"rect":J.push(Math.floor((k.y+Z)/Y)+1),J.push(Math.floor((k.y+k.h+Z)/Y)+1)}for(var de=0;de<J.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<J[de];)x.call(this);return J},x=function(){var k=this.fillStyle,z=this.strokeStyle,Y=this.font,J=this.lineCap,Z=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=z,this.font=Y,this.lineCap=J,this.lineWidth=Z,this.lineJoin=le},j=function(k,z,Y){for(var J=0;J<k.length;J++)switch(k[J].type){case"bct":k[J].x2+=z,k[J].y2+=Y;case"qct":k[J].x1+=z,k[J].y1+=Y;case"mt":case"lt":case"arc":default:k[J].x+=z,k[J].y+=Y}return k},y=function(k){return k.sort((function(z,Y){return z-Y}))},C=function(k,z){for(var Y,J,Z=this.fillStyle,le=this.strokeStyle,ce=this.lineCap,de=this.lineWidth,Ne=Math.abs(de*this.ctx.transform.scaleX),Se=this.lineJoin,Ae=JSON.parse(JSON.stringify(this.path)),Pe=JSON.parse(JSON.stringify(this.path)),We=[],be=0;be<Pe.length;be++)if(Pe[be].x!==void 0)for(var te=A.call(this,Pe[be]),Ze=0;Ze<te.length;Ze+=1)We.indexOf(te[Ze])===-1&&We.push(te[Ze]);for(var Be=0;Be<We.length;Be++)for(;this.pdf.internal.getNumberOfPages()<We[Be];)x.call(this);if(y(We),this.autoPaging)for(var Le=We[0],_e=We[We.length-1],Me=Le;Me<_e+1;Me++){this.pdf.setPage(Me),this.fillStyle=Z,this.strokeStyle=le,this.lineCap=ce,this.lineWidth=Ne,this.lineJoin=Se;var Fe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ee=Me===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=Me===1?0:Ye+(Me-2)*tt;if(this.ctx.clip_path.length!==0){var ot=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Y,this.posX+this.margin[3],-rt+Ee+this.ctx.prevPageLastElemOffset),R.call(this,k,!0),this.path=ot}if(J=JSON.parse(JSON.stringify(Ae)),this.path=j(J,this.posX+this.margin[3],-rt+Ee+this.ctx.prevPageLastElemOffset),z===!1||Me===0){var mt=(Me>Le||Me<_e)&&P.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fe,tt,null).clip().discardPath()),R.call(this,k,z),mt&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=Ne,R.call(this,k,z),this.lineWidth=de;this.path=Ae},R=function(k,z){if((k!=="stroke"||z||!L.call(this))&&(k==="stroke"||z||!p.call(this))){for(var Y,J,Z=[],le=this.path,ce=0;ce<le.length;ce++){var de=le[ce];switch(de.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:de,deltas:[],abs:[]});break;case"lt":var Ne=Z.length;if(le[ce-1]&&!isNaN(le[ce-1].x)&&(Y=[de.x-le[ce-1].x,de.y-le[ce-1].y],Ne>0)){for(;Ne>=0;Ne--)if(Z[Ne-1].close!==!0&&Z[Ne-1].begin!==!0){Z[Ne-1].deltas.push(Y),Z[Ne-1].abs.push(de);break}}break;case"bct":Y=[de.x1-le[ce-1].x,de.y1-le[ce-1].y,de.x2-le[ce-1].x,de.y2-le[ce-1].y,de.x-le[ce-1].x,de.y-le[ce-1].y],Z[Z.length-1].deltas.push(Y);break;case"qct":var Se=le[ce-1].x+2/3*(de.x1-le[ce-1].x),Ae=le[ce-1].y+2/3*(de.y1-le[ce-1].y),Pe=de.x+2/3*(de.x1-de.x),We=de.y+2/3*(de.y1-de.y),be=de.x,te=de.y;Y=[Se-le[ce-1].x,Ae-le[ce-1].y,Pe-le[ce-1].x,We-le[ce-1].y,be-le[ce-1].x,te-le[ce-1].y],Z[Z.length-1].deltas.push(Y);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(de)}}J=z?null:k==="stroke"?"stroke":"fill";for(var Ze=!1,Be=0;Be<Z.length;Be++)if(Z[Be].arc)for(var Le=Z[Be].abs,_e=0;_e<Le.length;_e++){var Me=Le[_e];Me.type==="arc"?M.call(this,Me.x,Me.y,Me.radius,Me.startAngle,Me.endAngle,Me.counterclockwise,void 0,z,!Ze):U.call(this,Me.x,Me.y),Ze=!0}else if(Z[Be].close===!0)this.pdf.internal.out("h"),Ze=!1;else if(Z[Be].begin!==!0){var Fe=Z[Be].start.x,Ee=Z[Be].start.y;$.call(this,Z[Be].deltas,Fe,Ee),Ze=!0}J&&H.call(this,J),z&&K.call(this)}},B=function(k){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-Y;case"top":return k+z-Y;case"hanging":return k+z-2*Y;case"middle":return k+z/2-Y;case"ideographic":return k;case"alphabetic":default:return k}},_=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(z,Y){this.colorStops.push([z,Y])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(k,z,Y,J,Z,le,ce,de,Ne){for(var Se=E.call(this,Y,J,Z,le),Ae=0;Ae<Se.length;Ae++){var Pe=Se[Ae];Ae===0&&(Ne?S.call(this,Pe.x1+k,Pe.y1+z):U.call(this,Pe.x1+k,Pe.y1+z)),ee.call(this,k,z,Pe.x2,Pe.y2,Pe.x3,Pe.y3,Pe.x4,Pe.y4)}de?K.call(this):H.call(this,ce)},H=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(k,z){this.pdf.internal.out(r(k)+" "+a(z)+" m")},N=function(k){var z;switch(k.align){case"right":case"end":z="right";break;case"center":z="center";break;case"left":case"start":default:z="left"}var Y=this.pdf.getTextDimensions(k.text),J=B.call(this,k.y),Z=_.call(this,J)-Y.h,le=this.ctx.transform.applyToPoint(new h(k.x,J)),ce=this.ctx.transform.decompose(),de=new d;de=(de=(de=de.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale);for(var Ne,Se,Ae,Pe=this.ctx.transform.applyToRectangle(new c(k.x,J,Y.w,Y.h)),We=de.applyToRectangle(new c(k.x,Z,Y.w,Y.h)),be=A.call(this,We),te=[],Ze=0;Ze<be.length;Ze+=1)te.indexOf(be[Ze])===-1&&te.push(be[Ze]);if(y(te),this.autoPaging)for(var Be=te[0],Le=te[te.length-1],_e=Be;_e<Le+1;_e++){this.pdf.setPage(_e);var Me=_e===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ee=this.pdf.internal.pageSize.height-this.margin[2],Ye=Ee-this.margin[0],tt=this.pdf.internal.pageSize.width-this.margin[1],rt=tt-this.margin[3],ot=_e===1?0:Fe+(_e-2)*Ye;if(this.ctx.clip_path.length!==0){var mt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Ne,this.posX+this.margin[3],-1*ot+Me),R.call(this,"fill",!0),this.path=mt}var Ge=j([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-ot+Me+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*k.scale),Ae=this.lineWidth,this.lineWidth=Ae*k.scale);var nt=this.autoPaging!=="text";if(nt||Ge.y+Ge.h<=Ee){if(nt||Ge.y>=Me&&Ge.x<=tt){var De=nt?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||tt-Ge.x)[0],Xt=j([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-ot+Me+this.ctx.prevPageLastElemOffset)[0],ct=nt&&(_e>Be||_e<Le)&&P.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rt,Ye,null).clip().discardPath()),this.pdf.text(De,Xt.x,Xt.y,{angle:k.angle,align:z,renderingMode:k.renderingMode}),ct&&this.pdf.restoreGraphicsState()}}else Ge.y<Ee&&(this.ctx.prevPageLastElemOffset+=Ee-Ge.y);k.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Ae)}else k.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*k.scale),Ae=this.lineWidth,this.lineWidth=Ae*k.scale),this.pdf.text(k.text,le.x+this.posX,le.y+this.posY,{angle:k.angle,align:z,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Ae)},U=function(k,z,Y,J){Y=Y||0,J=J||0,this.pdf.internal.out(r(k+Y)+" "+a(z+J)+" l")},$=function(k,z,Y){return this.pdf.lines(k,z,Y,null,null)},ee=function(k,z,Y,J,Z,le,ce,de){this.pdf.internal.out([e(o(Y+k)),e(i(J+z)),e(o(Z+k)),e(i(le+z)),e(o(ce+k)),e(i(de+z)),"c"].join(" "))},E=function(k,z,Y,J){for(var Z=2*Math.PI,le=Math.PI/2;z>Y;)z-=Z;var ce=Math.abs(Y-z);ce<Z&&J&&(ce=Z-ce);for(var de=[],Ne=J?-1:1,Se=z;ce>1e-5;){var Ae=Se+Ne*Math.min(ce,le);de.push(T.call(this,k,Se,Ae)),ce-=Math.abs(Ae-Se),Se=Ae}return de},T=function(k,z,Y){var J=(Y-z)/2,Z=k*Math.cos(J),le=k*Math.sin(J),ce=Z,de=-le,Ne=ce*ce+de*de,Se=Ne+ce*Z+de*le,Ae=4/3*(Math.sqrt(2*Ne*Se)-Se)/(ce*le-de*Z),Pe=ce-Ae*de,We=de+Ae*ce,be=Pe,te=-We,Ze=J+z,Be=Math.cos(Ze),Le=Math.sin(Ze);return{x1:k*Math.cos(z),y1:k*Math.sin(z),x2:Pe*Be-We*Le,y2:Pe*Le+We*Be,x3:be*Be-te*Le,y3:be*Le+te*Be,x4:k*Math.cos(Y),y4:k*Math.sin(Y)}},G=function(k){return 180*k/Math.PI},V=function(k,z,Y,J,Z,le){var ce=k+.5*(Y-k),de=z+.5*(J-z),Ne=Z+.5*(Y-Z),Se=le+.5*(J-le),Ae=Math.min(k,Z,ce,Ne),Pe=Math.max(k,Z,ce,Ne),We=Math.min(z,le,de,Se),be=Math.max(z,le,de,Se);return new c(Ae,We,Pe-Ae,be-We)},re=function(k,z,Y,J,Z,le,ce,de){var Ne,Se,Ae,Pe,We,be,te,Ze,Be,Le,_e,Me,Fe,Ee,Ye=Y-k,tt=J-z,rt=Z-Y,ot=le-J,mt=ce-Z,Ge=de-le;for(Se=0;Se<41;Se++)Be=(te=(Ae=k+(Ne=Se/40)*Ye)+Ne*((We=Y+Ne*rt)-Ae))+Ne*(We+Ne*(Z+Ne*mt-We)-te),Le=(Ze=(Pe=z+Ne*tt)+Ne*((be=J+Ne*ot)-Pe))+Ne*(be+Ne*(le+Ne*Ge-be)-Ze),Se==0?(_e=Be,Me=Le,Fe=Be,Ee=Le):(_e=Math.min(_e,Be),Me=Math.min(Me,Le),Fe=Math.max(Fe,Be),Ee=Math.max(Ee,Le));return new c(Math.round(_e),Math.round(Me),Math.round(Fe-_e),Math.round(Ee-Me))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,z,Y=(k=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:z}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(Ue.API),(function(n){var e=function(i){var h,c,d,g,w,m,v,p,L,P;for(c=[],d=0,g=(i+=h="\0\0\0\0".slice(i.length%4||4)).length;g>d;d+=4)(w=(i.charCodeAt(d)<<24)+(i.charCodeAt(d+1)<<16)+(i.charCodeAt(d+2)<<8)+i.charCodeAt(d+3))!==0?(m=(w=((w=((w=((w=(w-(P=w%85))/85)-(L=w%85))/85)-(p=w%85))/85)-(v=w%85))/85)%85,c.push(m+33,v+33,p+33,L+33,P+33)):c.push(122);return(function(A,x){for(var j=x;j>0;j--)A.pop()})(c,h.length),String.fromCharCode.apply(String,c)+"~>"},r=function(i){var h,c,d,g,w,m=String,v="length",p=255,L="charCodeAt",P="slice",A="replace";for(i[P](-2),i=i[P](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),d=[],g=0,w=(i+=h="uuuuu"[P](i[v]%5||5))[v];w>g;g+=5)c=52200625*(i[L](g)-33)+614125*(i[L](g+1)-33)+7225*(i[L](g+2)-33)+85*(i[L](g+3)-33)+(i[L](g+4)-33),d.push(p&c>>24,p&c>>16,p&c>>8,p&c);return(function(x,j){for(var y=j;y>0;y--)x.pop()})(d,h[v]),m.fromCharCode.apply(m,d)},a=function(i){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),h.test(i)===!1)return"";for(var c="",d=0;d<i.length;d+=2)c+=String.fromCharCode("0x"+(i[d]+i[d+1]));return c},o=function(i){for(var h=new Uint8Array(i.length),c=i.length;c--;)h[c]=i.charCodeAt(c);return i=(h=Io(h)).reduce((function(d,g){return d+String.fromCharCode(g)}),"")};n.processDataByFilters=function(i,h){var c=0,d=i||"",g=[];for(typeof(h=h||[])=="string"&&(h=[h]),c=0;c<h.length;c+=1)switch(h[c]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map((function(w){return("0"+w.charCodeAt().toString(16)).slice(-2)})).join("")+">",g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=o(d),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[c]+'" is not implemented')}return{data:d,reverseChain:g.reverse().join(" ")}}})(Ue.API),(function(n){n.loadFile=function(e,r,a){return(function(o,i,h){i=i!==!1,h=typeof h=="function"?h:function(){};var c=void 0;try{c=(function(d,g,w){var m=new XMLHttpRequest,v=0,p=function(L){var P=L.length,A=[],x=String.fromCharCode;for(v=0;v<P;v+=1)A.push(x(255&L.charCodeAt(v)));return A.join("")};if(m.open("GET",d,!g),m.overrideMimeType("text/plain; charset=x-user-defined"),g===!1&&(m.onload=function(){m.status===200?w(p(this.responseText)):w(void 0)}),m.send(null),g&&m.status===200)return p(m.responseText)})(o,i,h)}catch{}return c})(e,r,a)},n.loadImageFile=n.loadFile})(Ue.API),(function(n){function e(){return(Ve.html2canvas?Promise.resolve(Ve.html2canvas):Lo(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))})).then((function(h){return h.default?h.default:h}))}function r(){return(Ve.DOMPurify?Promise.resolve(Ve.DOMPurify):Lo(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(h){return Promise.reject(new Error("Could not load dompurify: "+h))})).then((function(h){return h.default?h.default:h}))}var a=function(h){var c=gt(h);return c==="undefined"?"undefined":c==="string"||h instanceof String?"string":c==="number"||h instanceof Number?"number":c==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":c==="object"?"object":"unknown"},o=function(h,c){var d=document.createElement(h);for(var g in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[g]=c.style[g];return d},i=function h(c){var d=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),g=h.convert(Promise.resolve(),d);return g=(g=g.setProgress(1,h,1,[h])).set(c)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(h,c){return h.__proto__=c||i.prototype,h},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(h,c){return this.then((function(){switch(c=c||(function(d){switch(a(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(h)){case"string":return this.then(r).then((function(d){return this.set({src:o("div",{innerHTML:h,dompurify:d})})}));case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}}))},i.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=(function d(g,w){for(var m=g.nodeType===3?document.createTextNode(g.nodeValue):g.cloneNode(!1),v=g.firstChild;v;v=v.nextSibling)w!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||m.appendChild(d(v,w));return g.nodeType===1&&(g.nodeName==="CANVAS"?(m.width=g.width,m.height=g.height,m.getContext("2d").drawImage(g,0,0)):g.nodeName!=="TEXTAREA"&&g.nodeName!=="SELECT"||(m.value=g.value),m.addEventListener("load",(function(){m.scrollTop=g.scrollTop,m.scrollLeft=g.scrollLeft}),!0)),m})(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},i.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(e).then((function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)})).then((function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)}))},i.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(e).then((function(c){var d=this.opt.jsPDF,g=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=g,g)for(var v=0;v<g.length;++v){var p=g[v],L=p.src.find((function(P){return P.format==="truetype"}));L&&d.addFont(L.url,p.ref.name,p.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,d.context2d.save(!0),c(this.prop.container,m)})).then((function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)}))},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h}))},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},i.prototype.output=function(h,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(h,c):this.outputPdf(h,c)},i.prototype.outputPdf=function(h,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(h,c)}))},i.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}}))},i.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},i.prototype.set=function(h){if(a(h)!=="object")return this;var c=Object.keys(h||{}).map((function(d){if(d in i.template.prop)return function(){this.prop[d]=h[d]};switch(d){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[d]=h[d]}}}),this);return this.then((function(){return this.thenList(c)}))},i.prototype.get=function(h,c){return this.then((function(){var d=h in i.template.prop?this.prop[h]:this.opt[h];return c?c(d):d}))},i.prototype.setMargin=function(h){return this.then((function(){switch(a(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h})).then(this.setPageSize)},i.prototype.setPageSize=function(h){function c(d,g){return Math.floor(d*g/72*96)}return this.then((function(){(h=h||Ue.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:c(h.inner.width,h.k),height:c(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h}))},i.prototype.setProgress=function(h,c,d,g){return h!=null&&(this.progress.val=h),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(h,c,d,g){return this.setProgress(h?this.progress.val+h:null,c||null,d?this.progress.n+d:null,g?this.progress.stack.concat(g):null)},i.prototype.then=function(h,c){var d=this;return this.thenCore(h,c,(function(g,w){return d.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,(function(m){return d.updateProgress(null,g),m})).then(g,w).then((function(m){return d.updateProgress(1),m}))}))},i.prototype.thenCore=function(h,c,d){d=d||Promise.prototype.then,h&&(h=h.bind(this)),c&&(c=c.bind(this));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),w=d.call(g,h,c);return i.convert(w,this.__proto__)},i.prototype.thenExternal=function(h,c){return Promise.prototype.then.call(this,h,c)},i.prototype.thenList=function(h){var c=this;return h.forEach((function(d){c=c.thenCore(d)})),c},i.prototype.catch=function(h){h&&(h=h.bind(this));var c=Promise.prototype.catch.call(this,h);return i.convert(c,this)},i.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},i.prototype.error=function(h){return this.then((function(){throw new Error(h)}))},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Ue.getPageSize=function(h,c,d){if(gt(h)==="object"){var g=h;h=g.orientation,c=g.unit||c,d=g.format||d}c=c||"mm",d=d||"a4",h=(""+(h||"P")).toLowerCase();var w,m=(""+d).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+c}var p,L=0,P=0;if(v.hasOwnProperty(m))L=v[m][1]/w,P=v[m][0]/w;else try{L=d[1],P=d[0]}catch{throw new Error("Invalid format: "+d)}if(h==="p"||h==="portrait")h="p",P>L&&(p=P,P=L,L=p);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",L>P&&(p=P,P=L,L=p)}return{width:P,height:L,unit:c,k:w,orientation:h}},n.html=function(h,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Ro):null;var d=new i(c);return c.worker?d:d.from(h).doCallback()}})(Ue.API),Ue.API.addJS=function(n){return Al=n,this.internal.events.subscribe("postPutResources",(function(){ws=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ws+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ll=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Al+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){ws!==void 0&&Ll!==void 0&&this.internal.out("/Names <</JavaScript "+ws+" 0 R>>")})),this},(function(n){var e;n.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=r.outline.render().split(/\r\n/),i=0;i<o.length;i++){var h=o[i],c=a.exec(h);if(c!=null){var d=c[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(h)}if(this.outline.createNamedDestinations){var g=this.internal.pages.length,w=[];for(i=0;i<g;i++){var m=r.internal.newObject();w.push(m);var v=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<w.length;i++)r.internal.write("(page_"+(i+1)+")"+w[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,o,i){var h={title:o,options:i,children:[]};return a==null&&(a=this.root),a.children.push(h),h},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var o=0;o<a.children.length;o++)this.genIds_r(a.children[o])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var h=a.children[i];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var c=this.count=this.count_r({count:0},h);if(c>0&&this.line("/Count "+c),h.options&&h.options.pageNumber){var d=r.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var g=0;g<a.children.length;g++)this.renderItems(a.children[g])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,o){for(var i=0;i<o.children.length;i++)a.count++,this.count_r(a,o.children[i]);return a.count}}])})(Ue.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(r,a,o,i,h,c){var d,g=this.decode.DCT_DECODE,w=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=h||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(d=(function(m){for(var v,p=256*m.charCodeAt(4)+m.charCodeAt(5),L=m.length,P={width:0,height:0,numcomponents:1},A=4;A<L;A+=2){if(A+=p,e.indexOf(m.charCodeAt(A+1))!==-1){v=256*m.charCodeAt(A+5)+m.charCodeAt(A+6),P={width:256*m.charCodeAt(A+7)+m.charCodeAt(A+8),height:v,numcomponents:m.charCodeAt(A+9)};break}p=256*m.charCodeAt(A+2)+m.charCodeAt(A+3)}return P})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}w={data:r,width:d.width,height:d.height,colorSpace:c,bitsPerComponent:8,filter:g,index:a,alias:o}}return w}})(Ue.API);var Ra,ys,Pl,_l,Cl,_u=(function(){var n,e,r;function a(i){var h,c,d,g,w,m,v,p,L,P,A,x,j,y;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(h=this.readUInt32(),L=(function(){var C,R;for(R=[],C=0;C<4;++C)R.push(String.fromCharCode(this.data[this.pos++]));return R}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(h);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},w=this.readUInt16(),g=this.readUInt16()||100,m.delay=1e3*w/g,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(L==="fdAT"&&(this.pos+=4,h-=4),i=(m!=null?m.data:void 0)||this.imgData,x=0;0<=h?x<h:x>h;0<=h?++x:--x)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(h),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((P=d-this.transparency.indexed.length)>0)for(j=0;0<=P?j<P:j>P;0<=P?++j:--j)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(h)[0];break;case 2:this.transparency.rgb=this.read(h)}break;case"tEXt":v=(A=this.read(h)).indexOf(0),p=String.fromCharCode.apply(String,A.slice(0,v)),this.text[p]=String.fromCharCode.apply(String,A.slice(v+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(y=this.colorType)===4||y===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=h}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var h,c;for(c=[],h=0;0<=i?h<i:h>i;0<=i?++h:--h)c.push(this.data[this.pos++]);return c},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var h=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*h),d=0,g=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function w(m,v,p,L){var P,A,x,j,y,C,R,B,_,M,H,K,S,N,U,$,ee,E,T,G,V,re=Math.ceil((g.width-m)/p),se=Math.ceil((g.height-v)/L),k=g.width==re&&g.height==se;for(N=h*re,K=k?c:new Uint8Array(N*se),C=i.length,S=0,A=0;S<se&&d<C;){switch(i[d++]){case 0:for(j=ee=0;ee<N;j=ee+=1)K[A++]=i[d++];break;case 1:for(j=E=0;E<N;j=E+=1)P=i[d++],y=j<h?0:K[A-h],K[A++]=(P+y)%256;break;case 2:for(j=T=0;T<N;j=T+=1)P=i[d++],x=(j-j%h)/h,U=S&&K[(S-1)*N+x*h+j%h],K[A++]=(U+P)%256;break;case 3:for(j=G=0;G<N;j=G+=1)P=i[d++],x=(j-j%h)/h,y=j<h?0:K[A-h],U=S&&K[(S-1)*N+x*h+j%h],K[A++]=(P+Math.floor((y+U)/2))%256;break;case 4:for(j=V=0;V<N;j=V+=1)P=i[d++],x=(j-j%h)/h,y=j<h?0:K[A-h],S===0?U=$=0:(U=K[(S-1)*N+x*h+j%h],$=x&&K[(S-1)*N+(x-1)*h+j%h]),R=y+U-$,B=Math.abs(R-y),M=Math.abs(R-U),H=Math.abs(R-$),_=B<=M&&B<=H?y:M<=H?U:$,K[A++]=(P+_)%256;break;default:throw new Error("Invalid filter algorithm: "+i[d-1])}if(!k){var z=((v+S*L)*g.width+m)*h,Y=S*N;for(j=0;j<re;j+=1){for(var J=0;J<h;J+=1)c[z++]=K[Y++];z+=(p-1)*h}}S++}}return i=su(i),g.interlaceMethod==1?(w(0,0,8,8),w(4,0,8,8),w(0,4,4,8),w(2,0,4,4),w(0,2,2,4),w(1,0,2,2),w(0,1,1,2)):w(0,0,1,1),c},a.prototype.decodePalette=function(){var i,h,c,d,g,w,m,v,p;for(c=this.palette,w=this.transparency.indexed||[],g=new Uint8Array((w.length||0)+c.length),d=0,i=0,h=m=0,v=c.length;m<v;h=m+=3)g[d++]=c[h],g[d++]=c[h+1],g[d++]=c[h+2],g[d++]=(p=w[i++])!=null?p:255;return g},a.prototype.copyToImageData=function(i,h){var c,d,g,w,m,v,p,L,P,A,x;if(d=this.colors,P=null,c=this.hasAlphaChannel,this.palette.length&&(P=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),d=4,c=!0),L=(g=i.data||i).length,m=P||h,w=v=0,d===1)for(;w<L;)p=P?4*h[w/4]:v,A=m[p++],g[w++]=A,g[w++]=A,g[w++]=A,g[w++]=c?m[p++]:255,v=p;else for(;w<L;)p=P?4*h[w/4]:v,g[w++]=m[p++],g[w++]=m[p++],g[w++]=m[p++],g[w++]=c?m[p++]:255,v=p},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var o=function(){if(Object.prototype.toString.call(Ve)==="[object Window]"){try{e=Ve.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),n=function(i){var h;if(o()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(h=new Image).src=e.toDataURL(),h;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var h,c,d,g,w,m,v,p;if(this.animation){for(p=[],c=w=0,m=(v=this.animation.frames).length;w<m;c=++w)h=v[c],d=i.createImageData(h.width,h.height),g=this.decodePixels(new Uint8Array(h.data)),this.copyToImageData(d,g),h.imageData=d,p.push(h.image=n(d));return p}},a.prototype.renderFrame=function(i,h){var c,d,g;return c=(d=this.animation.frames)[h],g=d[h-1],h===0&&i.clearRect(0,0,this.width,this.height),(g!=null?g.disposeOp:void 0)===1?i.clearRect(g.xOffset,g.yOffset,g.width,g.height):(g!=null?g.disposeOp:void 0)===2&&i.putImageData(g.imageData,g.xOffset,g.yOffset),c.blendOp===0&&i.clearRect(c.xOffset,c.yOffset,c.width,c.height),i.drawImage(c.image,c.xOffset,c.yOffset)},a.prototype.animate=function(i){var h,c,d,g,w,m,v=this;return c=0,m=this.animation,g=m.numFrames,d=m.frames,w=m.numPlays,(h=function(){var p,L;if(p=c++%g,L=d[p],v.renderFrame(i,p),g>1&&c/g<w)return v.animation._timeout=setTimeout(h,L.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var h,c;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,h=i.getContext("2d"),this.animation?(this.decodeFrames(h),this.animate(h)):(c=h.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),h.putImageData(c,0,0))},a})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Cu(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=n[e++]|n[e++]<<8,a=n[e++]|n[e++]<<8,o=n[e++],i=o>>7,h=1<<(7&o)+1;n[e++],n[e++];var c=null,d=null;i&&(c=e,d=h,e+=3*h);var g=!0,w=[],m=0,v=null,p=0,L=null;for(this.width=r,this.height=a;g&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,L=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var P=n[e++];m=n[e++]|n[e++]<<8,v=n[e++],(1&P)==0&&(v=null),p=P>>2&7,e++;break;case 254:for(;;){if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var A=n[e++]|n[e++]<<8,x=n[e++]|n[e++]<<8,j=n[e++]|n[e++]<<8,y=n[e++]|n[e++]<<8,C=n[e++],R=C>>6&1,B=1<<(7&C)+1,_=c,M=d,H=!1;C>>7&&(H=!0,_=e,M=B,e+=3*B);var K=e;for(e++;;){var S;if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}w.push({x:A,y:x,width:j,height:y,has_local_palette:H,palette_offset:_,palette_size:M,data_offset:K,data_length:e-K,transparent_index:v,interlaced:!!R,delay:m,disposal:p});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return w.length},this.loopCount=function(){return L},this.frameInfo=function(N){if(N<0||N>=w.length)throw new Error("Frame index out of range.");return w[N]},this.decodeAndBlitFrameBGRA=function(N,U){var $=this.frameInfo(N),ee=$.width*$.height,E=new Uint8Array(ee);Il(n,$.data_offset,E,ee);var T=$.palette_offset,G=$.transparent_index;G===null&&(G=256);var V=$.width,re=r-V,se=V,k=4*($.y*r+$.x),z=4*(($.y+$.height)*r+$.x),Y=k,J=4*re;$.interlaced===!0&&(J+=4*r*7);for(var Z=8,le=0,ce=E.length;le<ce;++le){var de=E[le];if(se===0&&(se=V,(Y+=J)>=z&&(J=4*re+4*r*(Z-1),Y=k+(V+re)*(Z<<1),Z>>=1)),de===G)Y+=4;else{var Ne=n[T+3*de],Se=n[T+3*de+1],Ae=n[T+3*de+2];U[Y++]=Ae,U[Y++]=Se,U[Y++]=Ne,U[Y++]=255}--se}},this.decodeAndBlitFrameRGBA=function(N,U){var $=this.frameInfo(N),ee=$.width*$.height,E=new Uint8Array(ee);Il(n,$.data_offset,E,ee);var T=$.palette_offset,G=$.transparent_index;G===null&&(G=256);var V=$.width,re=r-V,se=V,k=4*($.y*r+$.x),z=4*(($.y+$.height)*r+$.x),Y=k,J=4*re;$.interlaced===!0&&(J+=4*r*7);for(var Z=8,le=0,ce=E.length;le<ce;++le){var de=E[le];if(se===0&&(se=V,(Y+=J)>=z&&(J=4*re+4*r*(Z-1),Y=k+(V+re)*(Z<<1),Z>>=1)),de===G)Y+=4;else{var Ne=n[T+3*de],Se=n[T+3*de+1],Ae=n[T+3*de+2];U[Y++]=Ne,U[Y++]=Se,U[Y++]=Ae,U[Y++]=255}--se}}}function Il(n,e,r,a){for(var o=n[e++],i=1<<o,h=i+1,c=h+1,d=o+1,g=(1<<d)-1,w=0,m=0,v=0,p=n[e++],L=new Int32Array(4096),P=null;;){for(;w<16&&p!==0;)m|=n[e++]<<w,w+=8,p===1?p=n[e++]:--p;if(w<d)break;var A=m&g;if(m>>=d,w-=d,A!==i){if(A===h)break;for(var x=A<c?A:P,j=0,y=x;y>i;)y=L[y]>>8,++j;var C=y;if(v+j+(x!==A?1:0)>a)return void wt.log("Warning, gif stream longer than expected.");r[v++]=C;var R=v+=j;for(x!==A&&(r[v++]=C),y=x;j--;)y=L[y],r[--R]=255&y,y>>=8;P!==null&&c<4096&&(L[c++]=P<<8|C,c>=g+1&&d<12&&(++d,g=g<<1|1)),P=A}else c=h+1,g=(1<<(d=o+1))-1,P=null}return v!==a&&wt.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function So(n){var e,r,a,o,i,h=Math.floor,c=new Array(64),d=new Array(64),g=new Array(64),w=new Array(64),m=new Array(65535),v=new Array(65535),p=new Array(64),L=new Array(64),P=[],A=0,x=7,j=new Array(64),y=new Array(64),C=new Array(64),R=new Array(256),B=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function E(k,z){for(var Y=0,J=0,Z=new Array,le=1;le<=16;le++){for(var ce=1;ce<=k[le];ce++)Z[z[J]]=[],Z[z[J]][0]=Y,Z[z[J]][1]=le,J++,Y++;Y*=2}return Z}function T(k){for(var z=k[0],Y=k[1]-1;Y>=0;)z&1<<Y&&(A|=1<<x),Y--,--x<0&&(A==255?(G(255),G(0)):G(A),x=7,A=0)}function G(k){P.push(k)}function V(k){G(k>>8&255),G(255&k)}function re(k,z,Y,J,Z){for(var le,ce=Z[0],de=Z[240],Ne=(function(Le,_e){var Me,Fe,Ee,Ye,tt,rt,ot,mt,Ge,nt,De=0;for(Ge=0;Ge<8;++Ge){Me=Le[De],Fe=Le[De+1],Ee=Le[De+2],Ye=Le[De+3],tt=Le[De+4],rt=Le[De+5],ot=Le[De+6];var Xt=Me+(mt=Le[De+7]),ct=Me-mt,Pr=Fe+ot,xt=Fe-ot,kt=Ee+rt,Wr=Ee-rt,ht=Ye+tt,qn=Ye-tt,Lt=Xt+ht,_r=Xt-ht,an=Pr+kt,At=Pr-kt;Le[De]=Lt+an,Le[De+4]=Lt-an;var Je=.707106781*(At+_r);Le[De+2]=_r+Je,Le[De+6]=_r-Je;var dt=.382683433*((Lt=qn+Wr)-(At=xt+ct)),zn=.5411961*Lt+dt,$t=1.306562965*At+dt,Vr=.707106781*(an=Wr+xt),Gr=ct+Vr,He=ct-Vr;Le[De+5]=He+zn,Le[De+3]=He-zn,Le[De+1]=Gr+$t,Le[De+7]=Gr-$t,De+=8}for(De=0,Ge=0;Ge<8;++Ge){Me=Le[De],Fe=Le[De+8],Ee=Le[De+16],Ye=Le[De+24],tt=Le[De+32],rt=Le[De+40],ot=Le[De+48];var Cr=Me+(mt=Le[De+56]),$r=Me-mt,or=Fe+ot,zt=Fe-ot,Rt=Ee+rt,pr=Ee-rt,oa=Ye+tt,sn=Ye-tt,Ir=Cr+oa,Fr=Cr-oa,Mr=or+Rt,Yr=or-Rt;Le[De]=Ir+Mr,Le[De+32]=Ir-Mr;var wr=.707106781*(Yr+Fr);Le[De+16]=Fr+wr,Le[De+48]=Fr-wr;var Jr=.382683433*((Ir=sn+pr)-(Yr=zt+$r)),Un=.5411961*Ir+Jr,la=1.306562965*Yr+Jr,ca=.707106781*(Mr=pr+zt),ua=$r+ca,ha=$r-ca;Le[De+40]=ha+Un,Le[De+24]=ha-Un,Le[De+8]=ua+la,Le[De+56]=ua-la,De++}for(Ge=0;Ge<64;++Ge)nt=Le[Ge]*_e[Ge],p[Ge]=nt>0?nt+.5|0:nt-.5|0;return p})(k,z),Se=0;Se<64;++Se)L[_[Se]]=Ne[Se];var Ae=L[0]-Y;Y=L[0],Ae==0?T(J[0]):(T(J[v[le=32767+Ae]]),T(m[le]));for(var Pe=63;Pe>0&&L[Pe]==0;)Pe--;if(Pe==0)return T(ce),Y;for(var We,be=1;be<=Pe;){for(var te=be;L[be]==0&&be<=Pe;)++be;var Ze=be-te;if(Ze>=16){We=Ze>>4;for(var Be=1;Be<=We;++Be)T(de);Ze&=15}le=32767+L[be],T(Z[(Ze<<4)+v[le]]),T(m[le]),be++}return Pe!=63&&T(ce),Y}function se(k){k=Math.min(Math.max(k,1),100),i!=k&&((function(z){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var Z=h((Y[J]*z+50)/100);Z=Math.min(Math.max(Z,1),255),c[_[J]]=Z}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var de=h((le[ce]*z+50)/100);de=Math.min(Math.max(de,1),255),d[_[ce]]=de}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,Ae=0;Ae<8;Ae++)for(var Pe=0;Pe<8;Pe++)g[Se]=1/(c[_[Se]]*Ne[Ae]*Ne[Pe]*8),w[Se]=1/(d[_[Se]]*Ne[Ae]*Ne[Pe]*8),Se++})(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),i=k)}this.encode=function(k,z){z&&se(z),P=new Array,A=0,x=7,V(65496),V(65504),V(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),V(1),V(1),G(0),G(0),(function(){V(65499),V(132),G(0);for(var Fe=0;Fe<64;Fe++)G(c[Fe]);G(1);for(var Ee=0;Ee<64;Ee++)G(d[Ee])})(),(function(Fe,Ee){V(65472),V(17),G(8),V(Ee),V(Fe),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)})(k.width,k.height),(function(){V(65476),V(418),G(0);for(var Fe=0;Fe<16;Fe++)G(M[Fe+1]);for(var Ee=0;Ee<=11;Ee++)G(H[Ee]);G(16);for(var Ye=0;Ye<16;Ye++)G(K[Ye+1]);for(var tt=0;tt<=161;tt++)G(S[tt]);G(1);for(var rt=0;rt<16;rt++)G(N[rt+1]);for(var ot=0;ot<=11;ot++)G(U[ot]);G(17);for(var mt=0;mt<16;mt++)G($[mt+1]);for(var Ge=0;Ge<=161;Ge++)G(ee[Ge])})(),V(65498),V(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var Y=0,J=0,Z=0;A=0,x=7,this.encode.displayName="_encode_";for(var le,ce,de,Ne,Se,Ae,Pe,We,be,te=k.data,Ze=k.width,Be=k.height,Le=4*Ze,_e=0;_e<Be;){for(le=0;le<Le;){for(Se=Le*_e+le,Pe=-1,We=0,be=0;be<64;be++)Ae=Se+(We=be>>3)*Le+(Pe=4*(7&be)),_e+We>=Be&&(Ae-=Le*(_e+1+We-Be)),le+Pe>=Le&&(Ae-=le+Pe-Le+4),ce=te[Ae++],de=te[Ae++],Ne=te[Ae++],j[be]=(B[ce]+B[de+256>>0]+B[Ne+512>>0]>>16)-128,y[be]=(B[ce+768>>0]+B[de+1024>>0]+B[Ne+1280>>0]>>16)-128,C[be]=(B[ce+1280>>0]+B[de+1536>>0]+B[Ne+1792>>0]>>16)-128;Y=re(j,g,Y,e,a),J=re(y,w,J,r,o),Z=re(C,w,Z,r,o),le+=32}_e+=8}if(x>=0){var Me=[];Me[1]=x+1,Me[0]=(1<<x+1)-1,T(Me)}return V(65497),new Uint8Array(P)},n=n||50,(function(){for(var k=String.fromCharCode,z=0;z<256;z++)R[z]=k(z)})(),e=E(M,H),r=E(N,U),a=E(K,S),o=E($,ee),(function(){for(var k=1,z=2,Y=1;Y<=15;Y++){for(var J=k;J<z;J++)v[32767+J]=Y,m[32767+J]=[],m[32767+J][1]=Y,m[32767+J][0]=J;for(var Z=-(z-1);Z<=-k;Z++)v[32767+Z]=Y,m[32767+Z]=[],m[32767+Z][1]=Y,m[32767+Z][0]=z-1+Z;k<<=1,z<<=1}})(),(function(){for(var k=0;k<256;k++)B[k]=19595*k,B[k+256>>0]=38470*k,B[k+512>>0]=7471*k+32768,B[k+768>>0]=-11059*k,B[k+1024>>0]=-21709*k,B[k+1280>>0]=32768*k+8421375,B[k+1536>>0]=-27439*k,B[k+1792>>0]=-5329*k})(),se(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function qr(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Fl(n){function e(M){if(!M)throw Error("assert :P")}function r(M,H,K){for(var S=0;4>S;S++)if(M[H+S]!=K.charCodeAt(S))return!0;return!1}function a(M,H,K,S,N){for(var U=0;U<N;U++)M[H+U]=K[S+U]}function o(M,H,K,S){for(var N=0;N<S;N++)M[H+N]=K}function i(M){return new Int32Array(M)}function h(M,H){for(var K=[],S=0;S<M;S++)K.push(new H);return K}function c(M,H){var K=[];return(function S(N,U,$){for(var ee=$[U],E=0;E<ee&&(N.push($.length>U+1?[]:new H),!($.length<U+1));E++)S(N[E],U+1,$)})(K,0,M),K}var d=function(){var M=this;function H(t,s){for(var f=1<<s-1>>>0;t&f;)f>>>=1;return f?(t&f-1)+f:t}function K(t,s,f,b,I){e(!(b%f));do t[s+(b-=f)]=I;while(0<b)}function S(t,s,f,b,I){if(e(2328>=I),512>=I)var D=i(512);else if((D=i(I))==null)return 0;return(function(O,q,W,X,ae,fe){var pe,ue,ye=q,ge=1<<W,ie=i(16),oe=i(16);for(e(ae!=0),e(X!=null),e(O!=null),e(0<W),ue=0;ue<ae;++ue){if(15<X[ue])return 0;++ie[X[ue]]}if(ie[0]==ae)return 0;for(oe[1]=0,pe=1;15>pe;++pe){if(ie[pe]>1<<pe)return 0;oe[pe+1]=oe[pe]+ie[pe]}for(ue=0;ue<ae;++ue)pe=X[ue],0<X[ue]&&(fe[oe[pe]++]=ue);if(oe[15]==1)return(X=new N).g=0,X.value=fe[0],K(O,ye,1,ge,X),ge;var xe,je=-1,we=ge-1,Oe=0,Ce=1,ze=1,Ie=1<<W;for(ue=0,pe=1,ae=2;pe<=W;++pe,ae<<=1){if(Ce+=ze<<=1,0>(ze-=ie[pe]))return 0;for(;0<ie[pe];--ie[pe])(X=new N).g=pe,X.value=fe[ue++],K(O,ye+Oe,ae,Ie,X),Oe=H(Oe,pe)}for(pe=W+1,ae=2;15>=pe;++pe,ae<<=1){if(Ce+=ze<<=1,0>(ze-=ie[pe]))return 0;for(;0<ie[pe];--ie[pe]){if(X=new N,(Oe&we)!=je){for(ye+=Ie,xe=1<<(je=pe)-W;15>je&&!(0>=(xe-=ie[je]));)++je,xe<<=1;ge+=Ie=1<<(xe=je-W),O[q+(je=Oe&we)].g=xe+W,O[q+je].value=ye-q-je}X.g=pe-W,X.value=fe[ue++],K(O,ye+(Oe>>W),ae,Ie,X),Oe=H(Oe,pe)}}return Ce!=2*oe[15]-1?0:ge})(t,s,f,b,I,D)}function N(){this.value=this.g=0}function U(){this.value=this.g=0}function $(){this.G=h(5,N),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(Yt,U)}function ee(t,s,f,b){e(t!=null),e(s!=null),e(2147483648>b),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=s,t.pa=f,t.Jd=s,t.Yc=f+b,t.Zc=4<=b?f+b-4+1:f,le(t)}function E(t,s){for(var f=0;0<s--;)f|=de(t,128)<<s;return f}function T(t,s){var f=E(t,s);return ce(t)?-f:f}function G(t,s,f,b){var I,D=0;for(e(t!=null),e(s!=null),e(4294967288>b),t.Sb=b,t.Ra=0,t.u=0,t.h=0,4<b&&(b=4),I=0;I<b;++I)D+=s[f+I]<<8*I;t.Ra=D,t.bb=b,t.oa=s,t.pa=f}function V(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<La-8>>>0,++t.bb,t.u-=8;Y(t)&&(t.h=1,t.u=0)}function re(t,s){if(e(0<=s),!t.h&&s<=Sa){var f=z(t)&ka[s];return t.u+=s,V(t),f}return t.h=1,t.u=0}function se(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function k(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(t){return t.Ra>>>(t.u&La-1)>>>0}function Y(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>La}function J(t,s){t.u=s,t.h=Y(t)}function Z(t){t.u>=si&&(e(t.u>=si),V(t))}function le(t){e(t!=null&&t.oa!=null),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(t!=null&&t.oa!=null),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function ce(t){return E(t,1)}function de(t,s){var f=t.Ca;0>t.b&&le(t);var b=t.b,I=f*s>>>8,D=(t.I>>>b>I)+0;for(D?(f-=I,t.I-=I+1<<b>>>0):f=I+1,b=f,I=0;256<=b;)I+=8,b>>=8;return b=7^I+cr[b],t.b-=b,t.Ca=(f<<b)-1,D}function Ne(t,s,f){t[s+0]=f>>24&255,t[s+1]=f>>16&255,t[s+2]=f>>8&255,t[s+3]=f>>0&255}function Se(t,s){return t[s+0]<<0|t[s+1]<<8}function Ae(t,s){return Se(t,s)|t[s+2]<<16}function Pe(t,s){return Se(t,s)|Se(t,s+2)<<16}function We(t,s){var f=1<<s;return e(t!=null),e(0<s),t.X=i(f),t.X==null?0:(t.Mb=32-s,t.Xa=s,1)}function be(t,s){e(t!=null),e(s!=null),e(t.Xa==s.Xa),a(s.X,0,t.X,0,1<<s.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function Ze(t,s,f,b){e(f!=null),e(b!=null);var I=f[0],D=b[0];return I==0&&(I=(t*D+s/2)/s),D==0&&(D=(s*I+t/2)/t),0>=I||0>=D?0:(f[0]=I,b[0]=D,1)}function Be(t,s){return t+(1<<s)-1>>>s}function Le(t,s){return((4278255360&t)+(4278255360&s)>>>0&4278255360)+((16711935&t)+(16711935&s)>>>0&16711935)>>>0}function _e(t,s){M[s]=function(f,b,I,D,O,q,W){var X;for(X=0;X<O;++X){var ae=M[t](q[W+X-1],I,D+X);q[W+X]=Le(f[b+X],ae)}}}function Me(){this.ud=this.hd=this.jd=0}function Fe(t,s){return((4278124286&(t^s))>>>1)+(t&s)>>>0}function Ee(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function Ye(t,s){return Ee(t+(t-s+.5>>1))}function tt(t,s,f){return Math.abs(s-f)-Math.abs(t-f)}function rt(t,s,f,b,I,D,O){for(b=D[O-1],f=0;f<I;++f)D[O+f]=b=Le(t[s+f],b)}function ot(t,s,f,b,I){var D;for(D=0;D<f;++D){var O=t[s+D],q=O>>8&255,W=16711935&(W=(W=16711935&O)+((q<<16)+q));b[I+D]=(4278255360&O)+W>>>0}}function mt(t,s){s.jd=t>>0&255,s.hd=t>>8&255,s.ud=t>>16&255}function Ge(t,s,f,b,I,D){var O;for(O=0;O<b;++O){var q=s[f+O],W=q>>>8,X=q,ae=255&(ae=(ae=q>>>16)+((t.jd<<24>>24)*(W<<24>>24)>>>5));X=255&(X=(X=X+((t.hd<<24>>24)*(W<<24>>24)>>>5))+((t.ud<<24>>24)*(ae<<24>>24)>>>5)),I[D+O]=(4278255360&q)+(ae<<16)+X}}function nt(t,s,f,b,I){M[s]=function(D,O,q,W,X,ae,fe,pe,ue){for(W=fe;W<pe;++W)for(fe=0;fe<ue;++fe)X[ae++]=I(q[b(D[O++])])},M[t]=function(D,O,q,W,X,ae,fe){var pe=8>>D.b,ue=D.Ea,ye=D.K[0],ge=D.w;if(8>pe)for(D=(1<<D.b)-1,ge=(1<<pe)-1;O<q;++O){var ie,oe=0;for(ie=0;ie<ue;++ie)ie&D||(oe=b(W[X++])),ae[fe++]=I(ye[oe&ge]),oe>>=pe}else M["VP8LMapColor"+f](W,X,ye,ge,ae,fe,O,q,ue)}}function De(t,s,f,b,I){for(f=s+f;s<f;){var D=t[s++];b[I++]=D>>16&255,b[I++]=D>>8&255,b[I++]=D>>0&255}}function Xt(t,s,f,b,I){for(f=s+f;s<f;){var D=t[s++];b[I++]=D>>16&255,b[I++]=D>>8&255,b[I++]=D>>0&255,b[I++]=D>>24&255}}function ct(t,s,f,b,I){for(f=s+f;s<f;){var D=(O=t[s++])>>16&240|O>>12&15,O=O>>0&240|O>>28&15;b[I++]=D,b[I++]=O}}function Pr(t,s,f,b,I){for(f=s+f;s<f;){var D=(O=t[s++])>>16&248|O>>13&7,O=O>>5&224|O>>3&31;b[I++]=D,b[I++]=O}}function xt(t,s,f,b,I){for(f=s+f;s<f;){var D=t[s++];b[I++]=D>>0&255,b[I++]=D>>8&255,b[I++]=D>>16&255}}function kt(t,s,f,b,I,D){if(D==0)for(f=s+f;s<f;)Ne(b,((D=t[s++])[0]>>24|D[1]>>8&65280|D[2]<<8&16711680|D[3]<<24)>>>0),I+=32;else a(b,I,t,s,f)}function Wr(t,s){M[s][0]=M[t+"0"],M[s][1]=M[t+"1"],M[s][2]=M[t+"2"],M[s][3]=M[t+"3"],M[s][4]=M[t+"4"],M[s][5]=M[t+"5"],M[s][6]=M[t+"6"],M[s][7]=M[t+"7"],M[s][8]=M[t+"8"],M[s][9]=M[t+"9"],M[s][10]=M[t+"10"],M[s][11]=M[t+"11"],M[s][12]=M[t+"12"],M[s][13]=M[t+"13"],M[s][14]=M[t+"0"],M[s][15]=M[t+"0"]}function ht(t){return t==to||t==ro||t==as||t==no}function qn(){this.eb=[],this.size=this.A=this.fb=0}function Lt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function _r(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new qn,this.f.kb=new Lt,this.sd=null}function an(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function At(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Je(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function dt(t,s){var f=t.T,b=s.ba.f.RGBA,I=b.eb,D=b.fb+t.ka*b.A,O=Lr[s.ba.S],q=t.y,W=t.O,X=t.f,ae=t.N,fe=t.ea,pe=t.W,ue=s.cc,ye=s.dc,ge=s.Mc,ie=s.Nc,oe=t.ka,xe=t.ka+t.T,je=t.U,we=je+1>>1;for(oe==0?O(q,W,null,null,X,ae,fe,pe,X,ae,fe,pe,I,D,null,null,je):(O(s.ec,s.fc,q,W,ue,ye,ge,ie,X,ae,fe,pe,I,D-b.A,I,D,je),++f);oe+2<xe;oe+=2)ue=X,ye=ae,ge=fe,ie=pe,ae+=t.Rc,pe+=t.Rc,D+=2*b.A,O(q,(W+=2*t.fa)-t.fa,q,W,ue,ye,ge,ie,X,ae,fe,pe,I,D-b.A,I,D,je);return W+=t.fa,t.j+xe<t.o?(a(s.ec,s.fc,q,W,je),a(s.cc,s.dc,X,ae,we),a(s.Mc,s.Nc,fe,pe,we),f--):1&xe||O(q,W,null,null,X,ae,fe,pe,X,ae,fe,pe,I,D+b.A,null,null,je),f}function zn(t,s,f){var b=t.F,I=[t.J];if(b!=null){var D=t.U,O=s.ba.S,q=O==ns||O==as;s=s.ba.f.RGBA;var W=[0],X=t.ka;W[0]=t.T,t.Kb&&(X==0?--W[0]:(--X,I[0]-=t.width),t.j+t.ka+t.T==t.o&&(W[0]=t.o-t.j-X));var ae=s.eb;X=s.fb+X*s.A,t=Nt(b,I[0],t.width,D,W,ae,X+(q?0:3),s.A),e(f==W),t&&ht(O)&&kr(ae,X,q,D,W,s.A)}return 0}function $t(t){var s=t.ma,f=s.ba.S,b=11>f,I=f==ts||f==rs||f==ns||f==eo||f==12||ht(f);if(s.memory=null,s.Ib=null,s.Jb=null,s.Nd=null,!ai(s.Oa,t,I?11:12))return 0;if(I&&ht(f)&&ke(),t.da)alert("todo:use_scaling");else{if(b){if(s.Ib=Je,t.Kb){if(f=t.U+1>>1,s.memory=i(t.U+2*f),s.memory==null)return 0;s.ec=s.memory,s.fc=0,s.cc=s.ec,s.dc=s.fc+t.U,s.Mc=s.cc,s.Nc=s.dc+f,s.Ib=dt,ke()}}else alert("todo:EmitYUV");I&&(s.Jb=zn,b&&he())}if(b&&!Xo){for(t=0;256>t;++t)kc[t]=89858*(t-128)+ss>>is,Ac[t]=-22014*(t-128)+ss,Lc[t]=-45773*(t-128),Sc[t]=113618*(t-128)+ss>>is;for(t=fi;t<so;++t)s=76283*(t-16)+ss>>is,Pc[t-fi]=gr(s,255),_c[t-fi]=gr(s+8>>4,15);Xo=1}return 1}function Vr(t){var s=t.ma,f=t.U,b=t.T;return e(!(1&t.ka)),0>=f||0>=b?0:(f=s.Ib(t,s),s.Jb!=null&&s.Jb(t,s,f),s.Dc+=f,1)}function Gr(t){t.ma.memory=null}function He(t,s,f,b){return re(t,8)!=47?0:(s[0]=re(t,14)+1,f[0]=re(t,14)+1,b[0]=re(t,1),re(t,3)!=0?0:!t.h)}function Cr(t,s){if(4>t)return t+1;var f=t-2>>1;return(2+(1&t)<<f)+re(s,f)+1}function $r(t,s){return 120<s?s-120:1<=(f=((f=uc[s-1])>>4)*t+(8-(15&f)))?f:1;var f}function or(t,s,f){var b=z(f),I=t[s+=255&b].g-8;return 0<I&&(J(f,f.u+8),b=z(f),s+=t[s].value,s+=b&(1<<I)-1),J(f,f.u+t[s].g),t[s].value}function zt(t,s,f){return f.g+=t.g,f.value+=t.value<<s>>>0,e(8>=f.g),t.g}function Rt(t,s,f){var b=t.xc;return e((s=b==0?0:t.vc[t.md*(f>>b)+(s>>b)])<t.Wb),t.Ya[s]}function pr(t,s,f,b){var I=t.ab,D=t.c*s,O=t.C;s=O+s;var q=f,W=b;for(b=t.Ta,f=t.Ua;0<I--;){var X=t.gc[I],ae=O,fe=s,pe=q,ue=W,ye=(W=b,q=f,X.Ea);switch(e(ae<fe),e(fe<=X.nc),X.hc){case 2:Yi(pe,ue,(fe-ae)*ye,W,q);break;case 0:var ge=ae,ie=fe,oe=W,xe=q,je=(Ie=X).Ea;ge==0&&(Zs(pe,ue,null,null,1,oe,xe),rt(pe,ue+1,0,0,je-1,oe,xe+1),ue+=je,xe+=je,++ge);for(var we=1<<Ie.b,Oe=we-1,Ce=Be(je,Ie.b),ze=Ie.K,Ie=Ie.w+(ge>>Ie.b)*Ce;ge<ie;){var ut=ze,ft=Ie,lt=1;for(oi(pe,ue,oe,xe-je,1,oe,xe);lt<je;){var at=(lt&~Oe)+we;at>je&&(at=je),(0,wn[ut[ft++]>>8&15])(pe,ue+ +lt,oe,xe+lt-je,at-lt,oe,xe+lt),lt=at}ue+=je,xe+=je,++ge&Oe||(Ie+=Ce)}fe!=X.nc&&a(W,q-ye,W,q+(fe-ae-1)*ye,ye);break;case 1:for(ye=pe,ie=ue,je=(pe=X.Ea)-(xe=pe&~(oe=(ue=1<<X.b)-1)),ge=Be(pe,X.b),we=X.K,X=X.w+(ae>>X.b)*ge;ae<fe;){for(Oe=we,Ce=X,ze=new Me,Ie=ie+xe,ut=ie+pe;ie<Ie;)mt(Oe[Ce++],ze),$n(ze,ye,ie,ue,W,q),ie+=ue,q+=ue;ie<ut&&(mt(Oe[Ce++],ze),$n(ze,ye,ie,je,W,q),ie+=je,q+=je),++ae&oe||(X+=ge)}break;case 3:if(pe==W&&ue==q&&0<X.b){for(ie=W,pe=ye=q+(fe-ae)*ye-(xe=(fe-ae)*Be(X.Ea,X.b)),ue=W,oe=q,ge=[],xe=(je=xe)-1;0<=xe;--xe)ge[xe]=ue[oe+xe];for(xe=je-1;0<=xe;--xe)ie[pe+xe]=ge[xe];yr(X,ae,fe,W,ye,W,q)}else yr(X,ae,fe,pe,ue,W,q)}q=b,W=f}W!=f&&a(b,f,q,W,D)}function oa(t,s){var f=t.V,b=t.Ba+t.c*t.C,I=s-t.C;if(e(s<=t.l.o),e(16>=I),0<I){var D=t.l,O=t.Ta,q=t.Ua,W=D.width;if(pr(t,I,f,b),I=q=[q],e((f=t.C)<(b=s)),e(D.v<D.va),b>D.o&&(b=D.o),f<D.j){var X=D.j-f;f=D.j,I[0]+=X*W}if(f>=b?f=0:(I[0]+=4*D.v,D.ka=f-D.j,D.U=D.va-D.v,D.T=b-f,f=1),f){if(q=q[0],11>(f=t.ca).S){var ae=f.f.RGBA,fe=(b=f.S,I=D.U,D=D.T,X=ae.eb,ae.A),pe=D;for(ae=ae.fb+t.Ma*ae.A;0<pe--;){var ue=O,ye=q,ge=I,ie=X,oe=ae;switch(b){case es:ur(ue,ye,ge,ie,oe);break;case ts:ar(ue,ye,ge,ie,oe);break;case to:ar(ue,ye,ge,ie,oe),kr(ie,oe,0,ge,1,0);break;case zo:un(ue,ye,ge,ie,oe);break;case rs:kt(ue,ye,ge,ie,oe,1);break;case ro:kt(ue,ye,ge,ie,oe,1),kr(ie,oe,0,ge,1,0);break;case ns:kt(ue,ye,ge,ie,oe,0);break;case as:kt(ue,ye,ge,ie,oe,0),kr(ie,oe,1,ge,1,0);break;case eo:yn(ue,ye,ge,ie,oe);break;case no:yn(ue,ye,ge,ie,oe),yt(ie,oe,ge,1,0);break;case Uo:cn(ue,ye,ge,ie,oe);break;default:e(0)}q+=W,ae+=fe}t.Ma+=D}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=f.height)}}t.C=s,e(t.C<=t.i)}function sn(t){var s;if(0<t.ua)return 0;for(s=0;s<t.Wb;++s){var f=t.Ya[s].G,b=t.Ya[s].H;if(0<f[1][b[1]+0].g||0<f[2][b[2]+0].g||0<f[3][b[3]+0].g)return 0}return 1}function Ir(t,s,f,b,I,D){if(t.Z!=0){var O=t.qd,q=t.rd;for(e(Sn[t.Z]!=null);s<f;++s)Sn[t.Z](O,q,b,I,b,I,D),O=b,q=I,I+=D;t.qd=O,t.rd=q}}function Fr(t,s){var f=t.l.ma,b=f.Z==0||f.Z==1?t.l.j:t.C;if(b=t.C<b?b:t.C,e(s<=t.l.o),s>b){var I=t.l.width,D=f.ca,O=f.tb+I*b,q=t.V,W=t.Ba+t.c*b,X=t.gc;e(t.ab==1),e(X[0].hc==3),Ji(X[0],b,s,q,W,D,O),Ir(f,b,s,D,O,I)}t.C=t.Ma=s}function Mr(t,s,f,b,I,D,O){var q=t.$/b,W=t.$%b,X=t.m,ae=t.s,fe=f+t.$,pe=fe;I=f+b*I;var ue=f+b*D,ye=280+ae.ua,ge=t.Pb?q:16777216,ie=0<ae.ua?ae.Wa:null,oe=ae.wc,xe=fe<ue?Rt(ae,W,q):null;e(t.C<D),e(ue<=I);var je=!1;e:for(;;){for(;je||fe<ue;){var we=0;if(q>=ge){var Oe=fe-f;e((ge=t).Pb),ge.wd=ge.m,ge.xd=Oe,0<ge.s.ua&&be(ge.s.Wa,ge.s.vb),ge=q+dc}if(W&oe||(xe=Rt(ae,W,q)),e(xe!=null),xe.Qb&&(s[fe]=xe.qb,je=!0),!je)if(Z(X),xe.jc){we=X,Oe=s;var Ce=fe,ze=xe.pd[z(we)&Yt-1];e(xe.jc),256>ze.g?(J(we,we.u+ze.g),Oe[Ce]=ze.value,we=0):(J(we,we.u+ze.g-256),e(256<=ze.value),we=ze.value),we==0&&(je=!0)}else we=or(xe.G[0],xe.H[0],X);if(X.h)break;if(je||256>we){if(!je)if(xe.nd)s[fe]=(xe.qb|we<<8)>>>0;else{if(Z(X),je=or(xe.G[1],xe.H[1],X),Z(X),Oe=or(xe.G[2],xe.H[2],X),Ce=or(xe.G[3],xe.H[3],X),X.h)break;s[fe]=(Ce<<24|je<<16|we<<8|Oe)>>>0}if(je=!1,++fe,++W>=b&&(W=0,++q,O!=null&&q<=D&&!(q%16)&&O(t,q),ie!=null))for(;pe<fe;)we=s[pe++],ie.X[(506832829*we&4294967295)>>>ie.Mb]=we}else if(280>we){if(we=Cr(we-256,X),Oe=or(xe.G[4],xe.H[4],X),Z(X),Oe=$r(b,Oe=Cr(Oe,X)),X.h)break;if(fe-f<Oe||I-fe<we)break e;for(Ce=0;Ce<we;++Ce)s[fe+Ce]=s[fe+Ce-Oe];for(fe+=we,W+=we;W>=b;)W-=b,++q,O!=null&&q<=D&&!(q%16)&&O(t,q);if(e(fe<=I),W&oe&&(xe=Rt(ae,W,q)),ie!=null)for(;pe<fe;)we=s[pe++],ie.X[(506832829*we&4294967295)>>>ie.Mb]=we}else{if(!(we<ye))break e;for(je=we-280,e(ie!=null);pe<fe;)we=s[pe++],ie.X[(506832829*we&4294967295)>>>ie.Mb]=we;we=fe,e(!(je>>>(Oe=ie).Xa)),s[we]=Oe.X[je],je=!0}je||e(X.h==Y(X))}if(t.Pb&&X.h&&fe<I)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&be(t.s.vb,t.s.Wa);else{if(X.h)break e;O!=null&&O(t,q>D?D:q),t.a=0,t.$=fe-f}return 1}return t.a=3,0}function Yr(t){e(t!=null),t.vc=null,t.yc=null,t.Ya=null;var s=t.Wa;s!=null&&(s.X=null),t.vb=null,e(t!=null)}function wr(){var t=new Ks;return t==null?null:(t.a=0,t.xb=Vo,Wr("Predictor","VP8LPredictors"),Wr("Predictor","VP8LPredictors_C"),Wr("PredictorAdd","VP8LPredictorsAdd"),Wr("PredictorAdd","VP8LPredictorsAdd_C"),Yi=ot,$n=Ge,ur=De,ar=Xt,yn=ct,cn=Pr,un=xt,M.VP8LMapColor32b=Aa,M.VP8LMapColor8b=Xi,t)}function Jr(t,s,f,b,I){var D=1,O=[t],q=[s],W=b.m,X=b.s,ae=null,fe=0;e:for(;;){if(f)for(;D&&re(W,1);){var pe=O,ue=q,ye=b,ge=1,ie=ye.m,oe=ye.gc[ye.ab],xe=re(ie,2);if(ye.Oc&1<<xe)D=0;else{switch(ye.Oc|=1<<xe,oe.hc=xe,oe.Ea=pe[0],oe.nc=ue[0],oe.K=[null],++ye.ab,e(4>=ye.ab),xe){case 0:case 1:oe.b=re(ie,3)+2,ge=Jr(Be(oe.Ea,oe.b),Be(oe.nc,oe.b),0,ye,oe.K),oe.K=oe.K[0];break;case 3:var je,we=re(ie,8)+1,Oe=16<we?0:4<we?1:2<we?2:3;if(pe[0]=Be(oe.Ea,Oe),oe.b=Oe,je=ge=Jr(we,1,0,ye,oe.K)){var Ce,ze=we,Ie=oe,ut=1<<(8>>Ie.b),ft=i(ut);if(ft==null)je=0;else{var lt=Ie.K[0],at=Ie.w;for(ft[0]=Ie.K[0][0],Ce=1;Ce<1*ze;++Ce)ft[Ce]=Le(lt[at+Ce],ft[Ce-1]);for(;Ce<4*ut;++Ce)ft[Ce]=0;Ie.K[0]=null,Ie.K[0]=ft,je=1}}ge=je;break;case 2:break;default:e(0)}D=ge}}if(O=O[0],q=q[0],D&&re(W,1)&&!(D=1<=(fe=re(W,4))&&11>=fe)){b.a=3;break e}var vt;if(vt=D)t:{var bt,et,Et,hr=b,qt=O,dr=q,pt=fe,br=f,xr=hr.m,Vt=hr.s,Jt=[null],sr=1,Ar=0,Qr=hc[pt];r:for(;;){if(br&&re(xr,1)){var Gt=re(xr,3)+2,pn=Be(qt,Gt),Zn=Be(dr,Gt),Fa=pn*Zn;if(!Jr(pn,Zn,0,hr,Jt))break r;for(Jt=Jt[0],Vt.xc=Gt,bt=0;bt<Fa;++bt){var Ln=Jt[bt]>>8&65535;Jt[bt]=Ln,Ln>=sr&&(sr=Ln+1)}}if(xr.h)break r;for(et=0;5>et;++et){var _t=Ho[et];!et&&0<pt&&(_t+=1<<pt),Ar<_t&&(Ar=_t)}var oo=h(sr*Qr,N),Qo=sr,el=h(Qo,$);if(el==null)var ls=null;else e(65536>=Qo),ls=el;var pi=i(Ar);if(ls==null||pi==null||oo==null){hr.a=1;break r}var cs=oo;for(bt=Et=0;bt<sr;++bt){var Br=ls[bt],Ma=Br.G,Da=Br.H,tl=0,us=1,rl=0;for(et=0;5>et;++et){_t=Ho[et],Ma[et]=cs,Da[et]=Et,!et&&0<pt&&(_t+=1<<pt);a:{var hs,lo=_t,ds=hr,gi=pi,Fc=cs,Mc=Et,co=0,An=ds.m,Dc=re(An,1);if(o(gi,0,0,lo),Dc){var Tc=re(An,1)+1,Oc=re(An,1),nl=re(An,Oc==0?1:8);gi[nl]=1,Tc==2&&(gi[nl=re(An,8)]=1);var fs=1}else{var al=i(19),il=re(An,4)+4;if(19<il){ds.a=3;var ps=0;break a}for(hs=0;hs<il;++hs)al[cc[hs]]=re(An,3);var uo=void 0,mi=void 0,sl=ds,Rc=al,gs=lo,ol=gi,ho=0,Pn=sl.m,ll=8,cl=h(128,N);n:for(;S(cl,0,7,Rc,19);){if(re(Pn,1)){var Bc=2+2*re(Pn,3);if((uo=2+re(Pn,Bc))>gs)break n}else uo=gs;for(mi=0;mi<gs&&uo--;){Z(Pn);var ul=cl[0+(127&z(Pn))];J(Pn,Pn.u+ul.g);var Ta=ul.value;if(16>Ta)ol[mi++]=Ta,Ta!=0&&(ll=Ta);else{var Ec=Ta==16,hl=Ta-16,qc=oc[hl],dl=re(Pn,sc[hl])+qc;if(mi+dl>gs)break n;for(var zc=Ec?ll:0;0<dl--;)ol[mi++]=zc}}ho=1;break n}ho||(sl.a=3),fs=ho}(fs=fs&&!An.h)&&(co=S(Fc,Mc,8,gi,lo)),fs&&co!=0?ps=co:(ds.a=3,ps=0)}if(ps==0)break r;if(us&&lc[et]==1&&(us=cs[Et].g==0),tl+=cs[Et].g,Et+=ps,3>=et){var bi,fo=pi[0];for(bi=1;bi<_t;++bi)pi[bi]>fo&&(fo=pi[bi]);rl+=fo}}if(Br.nd=us,Br.Qb=0,us&&(Br.qb=(Ma[3][Da[3]+0].value<<24|Ma[1][Da[1]+0].value<<16|Ma[2][Da[2]+0].value)>>>0,tl==0&&256>Ma[0][Da[0]+0].value&&(Br.Qb=1,Br.qb+=Ma[0][Da[0]+0].value<<8)),Br.jc=!Br.Qb&&6>rl,Br.jc){var ms,gn=Br;for(ms=0;ms<Yt;++ms){var _n=ms,Cn=gn.pd[_n],bs=gn.G[0][gn.H[0]+_n];256<=bs.value?(Cn.g=bs.g+256,Cn.value=bs.value):(Cn.g=0,Cn.value=0,_n>>=zt(bs,8,Cn),_n>>=zt(gn.G[1][gn.H[1]+_n],16,Cn),_n>>=zt(gn.G[2][gn.H[2]+_n],0,Cn),zt(gn.G[3][gn.H[3]+_n],24,Cn))}}}Vt.vc=Jt,Vt.Wb=sr,Vt.Ya=ls,Vt.yc=oo,vt=1;break t}vt=0}if(!(D=vt)){b.a=3;break e}if(0<fe){if(X.ua=1<<fe,!We(X.Wa,fe)){b.a=1,D=0;break e}}else X.ua=0;var po=b,fl=O,Uc=q,go=po.s,mo=go.xc;if(po.c=fl,po.i=Uc,go.md=Be(fl,mo),go.wc=mo==0?-1:(1<<mo)-1,f){b.xb=vc;break e}if((ae=i(O*q))==null){b.a=1,D=0;break e}D=(D=Mr(b,ae,0,O,q,q,null))&&!W.h;break e}return D?(I!=null?I[0]=ae:(e(ae==null),e(f)),b.$=0,f||Yr(X)):Yr(X),D}function Un(t,s){var f=t.c*t.i,b=f+s+16*s;return e(t.c<=s),t.V=i(b),t.V==null?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+f+s,1)}function la(t,s){var f=t.C,b=s-f,I=t.V,D=t.Ba+t.c*f;for(e(s<=t.l.o);0<b;){var O=16<b?16:b,q=t.l.ma,W=t.l.width,X=W*O,ae=q.ca,fe=q.tb+W*f,pe=t.Ta,ue=t.Ua;pr(t,O,I,D),Mt(pe,ue,ae,fe,X),Ir(q,f,f+O,ae,fe,W),b-=O,I+=O*t.c,f+=O}e(f==s),t.C=t.Ma=s}function ca(){this.ub=this.yd=this.td=this.Rb=0}function ua(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ha(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Pi(){this.Yb=(function(){var t=[];return(function s(f,b,I){for(var D=I[b],O=0;O<D&&(f.push(I.length>b+1?[]:0),!(I.length<b+1));O++)s(f[O],b+1,I)})(t,0,[3,11]),t})()}function Ps(){this.jb=i(3),this.Wc=c([4,8],Pi),this.Xc=c([4,17],Pi)}function _s(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function da(){this.ld=this.La=this.dd=this.tc=0}function _i(){this.Na=this.la=0}function Cs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ua(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Is(){this.uc=this.M=this.Nb=0,this.wa=Array(new da),this.Y=0,this.ya=Array(new Ua),this.aa=0,this.l=new fa}function Ci(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Fs(){this.cb=this.a=0,this.sc="",this.m=new se,this.Od=new ca,this.Kc=new ua,this.ed=new _s,this.Qa=new ha,this.Ic=this.$c=this.Aa=0,this.D=new Is,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,se),this.ia=0,this.pb=h(4,Cs),this.Pa=new Ps,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ci),this.Hd=0,this.rb=Array(new _i),this.sb=0,this.wa=Array(new da),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ua),this.L=this.aa=0,this.gd=c([4,2],da),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function fa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ms(){var t=new Fs;return t!=null&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,di||(di=Mi)),t}function It(t,s,f){return t.a==0&&(t.a=s,t.sc=f,t.cb=0),0}function Ii(t,s,f){return 3<=f&&t[s+0]==157&&t[s+1]==1&&t[s+2]==42}function Fi(t,s){if(t==null)return 0;if(t.a=0,t.sc="OK",s==null)return It(t,2,"null VP8Io passed to VP8GetHeaders()");var f=s.data,b=s.w,I=s.ha;if(4>I)return It(t,7,"Truncated header.");var D=f[b+0]|f[b+1]<<8|f[b+2]<<16,O=t.Od;if(O.Rb=!(1&D),O.td=D>>1&7,O.yd=D>>4&1,O.ub=D>>5,3<O.td)return It(t,3,"Incorrect keyframe parameters.");if(!O.yd)return It(t,4,"Frame not displayable.");b+=3,I-=3;var q=t.Kc;if(O.Rb){if(7>I)return It(t,7,"cannot parse picture header");if(!Ii(f,b,I))return It(t,3,"Bad code word");q.c=16383&(f[b+4]<<8|f[b+3]),q.Td=f[b+4]>>6,q.i=16383&(f[b+6]<<8|f[b+5]),q.Ud=f[b+6]>>6,b+=7,I-=7,t.za=q.c+15>>4,t.Ub=q.i+15>>4,s.width=q.c,s.height=q.i,s.Da=0,s.j=0,s.v=0,s.va=s.width,s.o=s.height,s.da=0,s.ib=s.width,s.hb=s.height,s.U=s.width,s.T=s.height,o((D=t.Pa).jb,0,255,D.jb.length),e((D=t.Qa)!=null),D.Cb=0,D.Bb=0,D.Fb=1,o(D.Zb,0,0,D.Zb.length),o(D.Lb,0,0,D.Lb)}if(O.ub>I)return It(t,7,"bad partition length");ee(D=t.m,f,b,O.ub),b+=O.ub,I-=O.ub,O.Rb&&(q.Ld=ce(D),q.Kd=ce(D)),q=t.Qa;var W,X=t.Pa;if(e(D!=null),e(q!=null),q.Cb=ce(D),q.Cb){if(q.Bb=ce(D),ce(D)){for(q.Fb=ce(D),W=0;4>W;++W)q.Zb[W]=ce(D)?T(D,7):0;for(W=0;4>W;++W)q.Lb[W]=ce(D)?T(D,6):0}if(q.Bb)for(W=0;3>W;++W)X.jb[W]=ce(D)?E(D,8):255}else q.Bb=0;if(D.Ka)return It(t,3,"cannot parse segment header");if((q=t.ed).zd=ce(D),q.Tb=E(D,6),q.wb=E(D,3),q.Pc=ce(D),q.Pc&&ce(D)){for(X=0;4>X;++X)ce(D)&&(q.vd[X]=T(D,6));for(X=0;4>X;++X)ce(D)&&(q.od[X]=T(D,6))}if(t.L=q.Tb==0?0:q.zd?1:2,D.Ka)return It(t,3,"cannot parse filter header");var ae=I;if(I=W=b,b=W+ae,q=ae,t.Xb=(1<<E(t.m,2))-1,ae<3*(X=t.Xb))f=7;else{for(W+=3*X,q-=3*X,ae=0;ae<X;++ae){var fe=f[I+0]|f[I+1]<<8|f[I+2]<<16;fe>q&&(fe=q),ee(t.Jc[+ae],f,W,fe),W+=fe,q-=fe,I+=3}ee(t.Jc[+X],f,W,q),f=W<b?0:5}if(f!=0)return It(t,f,"cannot parse partitions");for(f=E(W=t.m,7),I=ce(W)?T(W,4):0,b=ce(W)?T(W,4):0,q=ce(W)?T(W,4):0,X=ce(W)?T(W,4):0,W=ce(W)?T(W,4):0,ae=t.Qa,fe=0;4>fe;++fe){if(ae.Cb){var pe=ae.Zb[fe];ae.Fb||(pe+=f)}else{if(0<fe){t.pb[fe]=t.pb[0];continue}pe=f}var ue=t.pb[fe];ue.Sc[0]=ao[gr(pe+I,127)],ue.Sc[1]=io[gr(pe+0,127)],ue.Eb[0]=2*ao[gr(pe+b,127)],ue.Eb[1]=101581*io[gr(pe+q,127)]>>16,8>ue.Eb[1]&&(ue.Eb[1]=8),ue.Qc[0]=ao[gr(pe+X,117)],ue.Qc[1]=io[gr(pe+W,127)],ue.lc=pe+W}if(!O.Rb)return It(t,4,"Not a key frame.");for(ce(D),O=t.Pa,f=0;4>f;++f){for(I=0;8>I;++I)for(b=0;3>b;++b)for(q=0;11>q;++q)X=de(D,bc[f][I][b][q])?E(D,8):gc[f][I][b][q],O.Wc[f][I].Yb[b][q]=X;for(I=0;17>I;++I)O.Xc[f][I]=O.Wc[f][xc[I]]}return t.kc=ce(D),t.kc&&(t.Bd=E(D,8)),t.cb=1}function Mi(t,s,f,b,I,D,O){var q=s[I].Yb[f];for(f=0;16>I;++I){if(!de(t,q[f+0]))return I;for(;!de(t,q[f+1]);)if(q=s[++I].Yb[0],f=0,I==16)return 16;var W=s[I+1].Yb;if(de(t,q[f+2])){var X=t,ae=0;if(de(X,(pe=q)[(fe=f)+3]))if(de(X,pe[fe+6])){for(q=0,fe=2*(ae=de(X,pe[fe+8]))+(pe=de(X,pe[fe+9+ae])),ae=0,pe=fc[fe];pe[q];++q)ae+=ae+de(X,pe[q]);ae+=3+(8<<fe)}else de(X,pe[fe+7])?(ae=7+2*de(X,165),ae+=de(X,145)):ae=5+de(X,159);else ae=de(X,pe[fe+4])?3+de(X,pe[fe+5]):2;q=W[2]}else ae=1,q=W[1];W=O+pc[I],0>(X=t).b&&le(X);var fe,pe=X.b,ue=(fe=X.Ca>>1)-(X.I>>pe)>>31;--X.b,X.Ca+=ue,X.Ca|=1,X.I-=(fe+1&ue)<<pe,D[W]=((ae^ue)-ue)*b[(0<I)+0]}return 16}function Ha(t){var s=t.rb[t.sb-1];s.la=0,s.Na=0,o(t.zc,0,0,t.zc.length),t.ja=0}function Ds(t,s){if(t==null)return 0;if(s==null)return It(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!Fi(t,s))return 0;if(e(t.cb),s.ac==null||s.ac(s)){s.ob&&(t.L=0);var f=os[t.L];if(t.L==2?(t.yb=0,t.zb=0):(t.yb=s.v-f>>4,t.zb=s.j-f>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0)),t.Va=s.o+15+f>>4,t.Hb=s.va+15+f>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var b=t.ed;for(f=0;4>f;++f){var I;if(t.Qa.Cb){var D=t.Qa.Lb[f];t.Qa.Fb||(D+=b.Tb)}else D=b.Tb;for(I=0;1>=I;++I){var O=t.gd[f][I],q=D;if(b.Pc&&(q+=b.vd[0],I&&(q+=b.od[0])),0<(q=0>q?0:63<q?63:q)){var W=q;0<b.wb&&(W=4<b.wb?W>>2:W>>1)>9-b.wb&&(W=9-b.wb),1>W&&(W=1),O.dd=W,O.tc=2*q+W,O.ld=40<=q?2:15<=q?1:0}else O.tc=0;O.La=I}}}f=0}else It(t,6,"Frame setup failed"),f=t.a;if(f=f==0){if(f){t.$c=0,0<t.Aa||(t.Ic=Ic);e:{f=t.Ic,b=4*(W=t.za);var X=32*W,ae=W+1,fe=0<t.L?W*(0<t.Aa?2:1):0,pe=(t.Aa==2?2:1)*W;if((O=b+832+(I=3*(16*f+os[t.L])/2*X)+(D=t.Fa!=null&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=O)f=0;else{if(O>t.Vb){if(t.Vb=0,t.Ec=i(O),t.Fc=0,t.Ec==null){f=It(t,1,"no memory during frame initialization.");break e}t.Vb=O}O=t.Ec,q=t.Fc,t.Ac=O,t.Bc=q,q+=b,t.Gd=h(X,Ci),t.Hd=0,t.rb=h(ae+1,_i),t.sb=1,t.wa=fe?h(fe,da):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=W),e(!0),t.oc=O,t.pc=q,q+=832,t.ya=h(pe,Ua),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,t.Aa==2&&(t.D.aa+=W),t.R=16*W,t.B=8*W,W=(X=os[t.L])*t.R,X=X/2*t.B,t.sa=O,t.ta=q+W,t.qa=t.sa,t.ra=t.ta+16*f*t.R+X,t.Ha=t.qa,t.Ia=t.ra+8*f*t.B+X,t.$c=0,q+=I,t.mb=D?O:null,t.nb=D?q:null,e(q+D<=t.Fc+t.Vb),Ha(t),o(t.Ac,t.Bc,0,b),f=1}}if(f){if(s.ka=0,s.y=t.sa,s.O=t.ta,s.f=t.qa,s.N=t.ra,s.ea=t.Ha,s.Vd=t.Ia,s.fa=t.R,s.Rc=t.B,s.F=null,s.J=0,!Zi){for(f=-255;255>=f;++f)Ut[255+f]=0>f?-f:f;for(f=-1020;1020>=f;++f)dn[1020+f]=-128>f?-128:127<f?127:f;for(f=-112;112>=f;++f)hi[112+f]=-16>f?-16:15<f?15:f;for(f=-255;510>=f;++f)Ia[255+f]=0>f?0:255<f?255:f;Zi=1}Pa=Rs,hn=Ts,li=Ti,ir=Os,Nr=Oi,Ft=Di,_a=Ja,Ki=Vn,ci=Xs,Yn=Xa,Jn=Js,Nn=va,Xn=Ka,Ca=Vi,Kn=Wi,jn=Kr,ui=ln,jr=Ys,Rr[0]=Xr,Rr[1]=Bs,Rr[2]=Us,Rr[3]=Hs,Rr[4]=Ei,Rr[5]=ba,Rr[6]=qi,Rr[7]=Ga,Rr[8]=Vs,Rr[9]=Ws,kn[0]=Ri,kn[1]=qs,kn[2]=on,kn[3]=ga,kn[4]=Kt,kn[5]=zs,kn[6]=Bi,fn[0]=bn,fn[1]=Es,fn[2]=Gs,fn[3]=$a,fn[4]=Wn,fn[5]=$s,fn[6]=Ya,f=1}else f=0}f&&(f=(function(ue,ye){for(ue.M=0;ue.M<ue.Va;++ue.M){var ge,ie=ue.Jc[ue.M&ue.Xb],oe=ue.m,xe=ue;for(ge=0;ge<xe.za;++ge){var je=oe,we=xe,Oe=we.Ac,Ce=we.Bc+4*ge,ze=we.zc,Ie=we.ya[we.aa+ge];if(we.Qa.Bb?Ie.$b=de(je,we.Pa.jb[0])?2+de(je,we.Pa.jb[2]):de(je,we.Pa.jb[1]):Ie.$b=0,we.kc&&(Ie.Ad=de(je,we.Bd)),Ie.Za=!de(je,145)+0,Ie.Za){var ut=Ie.Ob,ft=0;for(we=0;4>we;++we){var lt,at=ze[0+we];for(lt=0;4>lt;++lt){at=mc[Oe[Ce+lt]][at];for(var vt=Wo[de(je,at[0])];0<vt;)vt=Wo[2*vt+de(je,at[vt])];at=-vt,Oe[Ce+lt]=at}a(ut,ft,Oe,Ce,4),ft+=4,ze[0+we]=at}}else at=de(je,156)?de(je,128)?1:3:de(je,163)?2:0,Ie.Ob[0]=at,o(Oe,Ce,at,4),o(ze,0,at,4);Ie.Dd=de(je,142)?de(je,114)?de(je,183)?1:3:2:0}if(xe.m.Ka)return It(ue,7,"Premature end-of-partition0 encountered.");for(;ue.ja<ue.za;++ue.ja){if(xe=ie,je=(oe=ue).rb[oe.sb-1],Oe=oe.rb[oe.sb+oe.ja],ge=oe.ya[oe.aa+oe.ja],Ce=oe.kc?ge.Ad:0)je.la=Oe.la=0,ge.Za||(je.Na=Oe.Na=0),ge.Hc=0,ge.Gc=0,ge.ia=0;else{var bt,et;if(je=Oe,Oe=xe,Ce=oe.Pa.Xc,ze=oe.ya[oe.aa+oe.ja],Ie=oe.pb[ze.$b],we=ze.ad,ut=0,ft=oe.rb[oe.sb-1],at=lt=0,o(we,ut,0,384),ze.Za)var Et=0,hr=Ce[3];else{vt=i(16);var qt=je.Na+ft.Na;if(qt=di(Oe,Ce[1],qt,Ie.Eb,0,vt,0),je.Na=ft.Na=(0<qt)+0,1<qt)Pa(vt,0,we,ut);else{var dr=vt[0]+3>>3;for(vt=0;256>vt;vt+=16)we[ut+vt]=dr}Et=1,hr=Ce[0]}var pt=15&je.la,br=15&ft.la;for(vt=0;4>vt;++vt){var xr=1&br;for(dr=et=0;4>dr;++dr)pt=pt>>1|(xr=(qt=di(Oe,hr,qt=xr+(1&pt),Ie.Sc,Et,we,ut))>Et)<<7,et=et<<2|(3<qt?3:1<qt?2:we[ut+0]!=0),ut+=16;pt>>=4,br=br>>1|xr<<7,lt=(lt<<8|et)>>>0}for(hr=pt,Et=br>>4,bt=0;4>bt;bt+=2){for(et=0,pt=je.la>>4+bt,br=ft.la>>4+bt,vt=0;2>vt;++vt){for(xr=1&br,dr=0;2>dr;++dr)qt=xr+(1&pt),pt=pt>>1|(xr=0<(qt=di(Oe,Ce[2],qt,Ie.Qc,0,we,ut)))<<3,et=et<<2|(3<qt?3:1<qt?2:we[ut+0]!=0),ut+=16;pt>>=2,br=br>>1|xr<<5}at|=et<<4*bt,hr|=pt<<4<<bt,Et|=(240&br)<<bt}je.la=hr,ft.la=Et,ze.Hc=lt,ze.Gc=at,ze.ia=43690&at?0:Ie.ia,Ce=!(lt|at)}if(0<oe.L&&(oe.wa[oe.Y+oe.ja]=oe.gd[ge.$b][ge.Za],oe.wa[oe.Y+oe.ja].La|=!Ce),xe.Ka)return It(ue,7,"Premature end-of-file encountered.")}if(Ha(ue),oe=ye,xe=1,ge=(ie=ue).D,je=0<ie.L&&ie.M>=ie.zb&&ie.M<=ie.Va,ie.Aa==0)e:{if(ge.M=ie.M,ge.uc=je,ni(ie,ge),xe=1,ge=(et=ie.D).Nb,je=(at=os[ie.L])*ie.R,Oe=at/2*ie.B,vt=16*ge*ie.R,dr=8*ge*ie.B,Ce=ie.sa,ze=ie.ta-je+vt,Ie=ie.qa,we=ie.ra-Oe+dr,ut=ie.Ha,ft=ie.Ia-Oe+dr,br=(pt=et.M)==0,lt=pt>=ie.Va-1,ie.Aa==2&&ni(ie,et),et.uc)for(xr=(qt=ie).D.M,e(qt.D.uc),et=qt.yb;et<qt.Hb;++et){Et=et,hr=xr;var Vt=(Jt=(_t=qt).D).Nb;bt=_t.R;var Jt=Jt.wa[Jt.Y+Et],sr=_t.sa,Ar=_t.ta+16*Vt*bt+16*Et,Qr=Jt.dd,Gt=Jt.tc;if(Gt!=0)if(e(3<=Gt),_t.L==1)0<Et&&jn(sr,Ar,bt,Gt+4),Jt.La&&jr(sr,Ar,bt,Gt),0<hr&&Kn(sr,Ar,bt,Gt+4),Jt.La&&ui(sr,Ar,bt,Gt);else{var pn=_t.B,Zn=_t.qa,Fa=_t.ra+8*Vt*pn+8*Et,Ln=_t.Ha,_t=_t.Ia+8*Vt*pn+8*Et;Vt=Jt.ld,0<Et&&(Ki(sr,Ar,bt,Gt+4,Qr,Vt),Yn(Zn,Fa,Ln,_t,pn,Gt+4,Qr,Vt)),Jt.La&&(Nn(sr,Ar,bt,Gt,Qr,Vt),Ca(Zn,Fa,Ln,_t,pn,Gt,Qr,Vt)),0<hr&&(_a(sr,Ar,bt,Gt+4,Qr,Vt),ci(Zn,Fa,Ln,_t,pn,Gt+4,Qr,Vt)),Jt.La&&(Jn(sr,Ar,bt,Gt,Qr,Vt),Xn(Zn,Fa,Ln,_t,pn,Gt,Qr,Vt))}}if(ie.ia&&alert("todo:DitherRow"),oe.put!=null){if(et=16*pt,pt=16*(pt+1),br?(oe.y=ie.sa,oe.O=ie.ta+vt,oe.f=ie.qa,oe.N=ie.ra+dr,oe.ea=ie.Ha,oe.W=ie.Ia+dr):(et-=at,oe.y=Ce,oe.O=ze,oe.f=Ie,oe.N=we,oe.ea=ut,oe.W=ft),lt||(pt-=at),pt>oe.o&&(pt=oe.o),oe.F=null,oe.J=null,ie.Fa!=null&&0<ie.Fa.length&&et<pt&&(oe.J=ti(ie,oe,et,pt-et),oe.F=ie.mb,oe.F==null&&oe.F.length==0)){xe=It(ie,3,"Could not decode alpha data.");break e}et<oe.j&&(at=oe.j-et,et=oe.j,e(!(1&at)),oe.O+=ie.R*at,oe.N+=ie.B*(at>>1),oe.W+=ie.B*(at>>1),oe.F!=null&&(oe.J+=oe.width*at)),et<pt&&(oe.O+=oe.v,oe.N+=oe.v>>1,oe.W+=oe.v>>1,oe.F!=null&&(oe.J+=oe.v),oe.ka=et-oe.j,oe.U=oe.va-oe.v,oe.T=pt-et,xe=oe.put(oe))}ge+1!=ie.Ic||lt||(a(ie.sa,ie.ta-je,Ce,ze+16*ie.R,je),a(ie.qa,ie.ra-Oe,Ie,we+8*ie.B,Oe),a(ie.Ha,ie.Ia-Oe,ut,ft+8*ie.B,Oe))}if(!xe)return It(ue,6,"Output aborted.")}return 1})(t,s)),s.bc!=null&&s.bc(s),f&=1}return f?(t.cb=0,f):0}function Dr(t,s,f,b,I){I=t[s+f+32*b]+(I>>3),t[s+f+32*b]=-256&I?0>I?0:255:I}function pa(t,s,f,b,I,D){Dr(t,s,0,f,b+I),Dr(t,s,1,f,b+D),Dr(t,s,2,f,b-D),Dr(t,s,3,f,b-I)}function lr(t){return(20091*t>>16)+t}function Wa(t,s,f,b){var I,D=0,O=i(16);for(I=0;4>I;++I){var q=t[s+0]+t[s+8],W=t[s+0]-t[s+8],X=(35468*t[s+4]>>16)-lr(t[s+12]),ae=lr(t[s+4])+(35468*t[s+12]>>16);O[D+0]=q+ae,O[D+1]=W+X,O[D+2]=W-X,O[D+3]=q-ae,D+=4,s++}for(I=D=0;4>I;++I)q=(t=O[D+0]+4)+O[D+8],W=t-O[D+8],X=(35468*O[D+4]>>16)-lr(O[D+12]),Dr(f,b,0,0,q+(ae=lr(O[D+4])+(35468*O[D+12]>>16))),Dr(f,b,1,0,W+X),Dr(f,b,2,0,W-X),Dr(f,b,3,0,q-ae),D++,b+=32}function Di(t,s,f,b){var I=t[s+0]+4,D=35468*t[s+4]>>16,O=lr(t[s+4]),q=35468*t[s+1]>>16;pa(f,b,0,I+O,t=lr(t[s+1]),q),pa(f,b,1,I+D,t,q),pa(f,b,2,I-D,t,q),pa(f,b,3,I-O,t,q)}function Ts(t,s,f,b,I){Wa(t,s,f,b),I&&Wa(t,s+16,f,b+4)}function Ti(t,s,f,b){hn(t,s+0,f,b,1),hn(t,s+32,f,b+128,1)}function Os(t,s,f,b){var I;for(t=t[s+0]+4,I=0;4>I;++I)for(s=0;4>s;++s)Dr(f,b,s,I,t)}function Oi(t,s,f,b){t[s+0]&&ir(t,s+0,f,b),t[s+16]&&ir(t,s+16,f,b+4),t[s+32]&&ir(t,s+32,f,b+128),t[s+48]&&ir(t,s+48,f,b+128+4)}function Rs(t,s,f,b){var I,D=i(16);for(I=0;4>I;++I){var O=t[s+0+I]+t[s+12+I],q=t[s+4+I]+t[s+8+I],W=t[s+4+I]-t[s+8+I],X=t[s+0+I]-t[s+12+I];D[0+I]=O+q,D[8+I]=O-q,D[4+I]=X+W,D[12+I]=X-W}for(I=0;4>I;++I)O=(t=D[0+4*I]+3)+D[3+4*I],q=D[1+4*I]+D[2+4*I],W=D[1+4*I]-D[2+4*I],X=t-D[3+4*I],f[b+0]=O+q>>3,f[b+16]=X+W>>3,f[b+32]=O-q>>3,f[b+48]=X-W>>3,b+=64}function Va(t,s,f){var b,I=s-32,D=mr,O=255-t[I-1];for(b=0;b<f;++b){var q,W=D,X=O+t[s-1];for(q=0;q<f;++q)t[s+q]=W[X+t[I+q]];s+=32}}function Bs(t,s){Va(t,s,4)}function Es(t,s){Va(t,s,8)}function qs(t,s){Va(t,s,16)}function on(t,s){var f;for(f=0;16>f;++f)a(t,s+32*f,t,s-32,16)}function ga(t,s){var f;for(f=16;0<f;--f)o(t,s,t[s-1],16),s+=32}function ma(t,s,f){var b;for(b=0;16>b;++b)o(s,f+32*b,t,16)}function Ri(t,s){var f,b=16;for(f=0;16>f;++f)b+=t[s-1+32*f]+t[s+f-32];ma(b>>5,t,s)}function Kt(t,s){var f,b=8;for(f=0;16>f;++f)b+=t[s-1+32*f];ma(b>>4,t,s)}function zs(t,s){var f,b=8;for(f=0;16>f;++f)b+=t[s+f-32];ma(b>>4,t,s)}function Bi(t,s){ma(128,t,s)}function $e(t,s,f){return t+2*s+f+2>>2}function Us(t,s){var f,b=s-32;for(b=new Uint8Array([$e(t[b-1],t[b+0],t[b+1]),$e(t[b+0],t[b+1],t[b+2]),$e(t[b+1],t[b+2],t[b+3]),$e(t[b+2],t[b+3],t[b+4])]),f=0;4>f;++f)a(t,s+32*f,b,0,b.length)}function Hs(t,s){var f=t[s-1],b=t[s-1+32],I=t[s-1+64],D=t[s-1+96];Ne(t,s+0,16843009*$e(t[s-1-32],f,b)),Ne(t,s+32,16843009*$e(f,b,I)),Ne(t,s+64,16843009*$e(b,I,D)),Ne(t,s+96,16843009*$e(I,D,D))}function Xr(t,s){var f,b=4;for(f=0;4>f;++f)b+=t[s+f-32]+t[s-1+32*f];for(b>>=3,f=0;4>f;++f)o(t,s+32*f,b,4)}function Ei(t,s){var f=t[s-1+0],b=t[s-1+32],I=t[s-1+64],D=t[s-1-32],O=t[s+0-32],q=t[s+1-32],W=t[s+2-32],X=t[s+3-32];t[s+0+96]=$e(b,I,t[s-1+96]),t[s+1+96]=t[s+0+64]=$e(f,b,I),t[s+2+96]=t[s+1+64]=t[s+0+32]=$e(D,f,b),t[s+3+96]=t[s+2+64]=t[s+1+32]=t[s+0+0]=$e(O,D,f),t[s+3+64]=t[s+2+32]=t[s+1+0]=$e(q,O,D),t[s+3+32]=t[s+2+0]=$e(W,q,O),t[s+3+0]=$e(X,W,q)}function qi(t,s){var f=t[s+1-32],b=t[s+2-32],I=t[s+3-32],D=t[s+4-32],O=t[s+5-32],q=t[s+6-32],W=t[s+7-32];t[s+0+0]=$e(t[s+0-32],f,b),t[s+1+0]=t[s+0+32]=$e(f,b,I),t[s+2+0]=t[s+1+32]=t[s+0+64]=$e(b,I,D),t[s+3+0]=t[s+2+32]=t[s+1+64]=t[s+0+96]=$e(I,D,O),t[s+3+32]=t[s+2+64]=t[s+1+96]=$e(D,O,q),t[s+3+64]=t[s+2+96]=$e(O,q,W),t[s+3+96]=$e(q,W,W)}function ba(t,s){var f=t[s-1+0],b=t[s-1+32],I=t[s-1+64],D=t[s-1-32],O=t[s+0-32],q=t[s+1-32],W=t[s+2-32],X=t[s+3-32];t[s+0+0]=t[s+1+64]=D+O+1>>1,t[s+1+0]=t[s+2+64]=O+q+1>>1,t[s+2+0]=t[s+3+64]=q+W+1>>1,t[s+3+0]=W+X+1>>1,t[s+0+96]=$e(I,b,f),t[s+0+64]=$e(b,f,D),t[s+0+32]=t[s+1+96]=$e(f,D,O),t[s+1+32]=t[s+2+96]=$e(D,O,q),t[s+2+32]=t[s+3+96]=$e(O,q,W),t[s+3+32]=$e(q,W,X)}function Ga(t,s){var f=t[s+0-32],b=t[s+1-32],I=t[s+2-32],D=t[s+3-32],O=t[s+4-32],q=t[s+5-32],W=t[s+6-32],X=t[s+7-32];t[s+0+0]=f+b+1>>1,t[s+1+0]=t[s+0+64]=b+I+1>>1,t[s+2+0]=t[s+1+64]=I+D+1>>1,t[s+3+0]=t[s+2+64]=D+O+1>>1,t[s+0+32]=$e(f,b,I),t[s+1+32]=t[s+0+96]=$e(b,I,D),t[s+2+32]=t[s+1+96]=$e(I,D,O),t[s+3+32]=t[s+2+96]=$e(D,O,q),t[s+3+64]=$e(O,q,W),t[s+3+96]=$e(q,W,X)}function Ws(t,s){var f=t[s-1+0],b=t[s-1+32],I=t[s-1+64],D=t[s-1+96];t[s+0+0]=f+b+1>>1,t[s+2+0]=t[s+0+32]=b+I+1>>1,t[s+2+32]=t[s+0+64]=I+D+1>>1,t[s+1+0]=$e(f,b,I),t[s+3+0]=t[s+1+32]=$e(b,I,D),t[s+3+32]=t[s+1+64]=$e(I,D,D),t[s+3+64]=t[s+2+64]=t[s+0+96]=t[s+1+96]=t[s+2+96]=t[s+3+96]=D}function Vs(t,s){var f=t[s-1+0],b=t[s-1+32],I=t[s-1+64],D=t[s-1+96],O=t[s-1-32],q=t[s+0-32],W=t[s+1-32],X=t[s+2-32];t[s+0+0]=t[s+2+32]=f+O+1>>1,t[s+0+32]=t[s+2+64]=b+f+1>>1,t[s+0+64]=t[s+2+96]=I+b+1>>1,t[s+0+96]=D+I+1>>1,t[s+3+0]=$e(q,W,X),t[s+2+0]=$e(O,q,W),t[s+1+0]=t[s+3+32]=$e(f,O,q),t[s+1+32]=t[s+3+64]=$e(b,f,O),t[s+1+64]=t[s+3+96]=$e(I,b,f),t[s+1+96]=$e(D,I,b)}function Gs(t,s){var f;for(f=0;8>f;++f)a(t,s+32*f,t,s-32,8)}function $a(t,s){var f;for(f=0;8>f;++f)o(t,s,t[s-1],8),s+=32}function Hn(t,s,f){var b;for(b=0;8>b;++b)o(s,f+32*b,t,8)}function bn(t,s){var f,b=8;for(f=0;8>f;++f)b+=t[s+f-32]+t[s-1+32*f];Hn(b>>4,t,s)}function $s(t,s){var f,b=4;for(f=0;8>f;++f)b+=t[s+f-32];Hn(b>>3,t,s)}function Wn(t,s){var f,b=4;for(f=0;8>f;++f)b+=t[s-1+32*f];Hn(b>>3,t,s)}function Ya(t,s){Hn(128,t,s)}function xa(t,s,f){var b=t[s-f],I=t[s+0],D=3*(I-b)+Qs[1020+t[s-2*f]-t[s+f]],O=Qi[112+(D+4>>3)];t[s-f]=mr[255+b+Qi[112+(D+3>>3)]],t[s+0]=mr[255+I-O]}function zi(t,s,f,b){var I=t[s+0],D=t[s+f];return Sr[255+t[s-2*f]-t[s-f]]>b||Sr[255+D-I]>b}function Ui(t,s,f,b){return 4*Sr[255+t[s-f]-t[s+0]]+Sr[255+t[s-2*f]-t[s+f]]<=b}function Hi(t,s,f,b,I){var D=t[s-3*f],O=t[s-2*f],q=t[s-f],W=t[s+0],X=t[s+f],ae=t[s+2*f],fe=t[s+3*f];return 4*Sr[255+q-W]+Sr[255+O-X]>b?0:Sr[255+t[s-4*f]-D]<=I&&Sr[255+D-O]<=I&&Sr[255+O-q]<=I&&Sr[255+fe-ae]<=I&&Sr[255+ae-X]<=I&&Sr[255+X-W]<=I}function Wi(t,s,f,b){var I=2*b+1;for(b=0;16>b;++b)Ui(t,s+b,f,I)&&xa(t,s+b,f)}function Kr(t,s,f,b){var I=2*b+1;for(b=0;16>b;++b)Ui(t,s+b*f,1,I)&&xa(t,s+b*f,1)}function ln(t,s,f,b){var I;for(I=3;0<I;--I)Wi(t,s+=4*f,f,b)}function Ys(t,s,f,b){var I;for(I=3;0<I;--I)Kr(t,s+=4,f,b)}function xn(t,s,f,b,I,D,O,q){for(D=2*D+1;0<I--;){if(Hi(t,s,f,D,O))if(zi(t,s,f,q))xa(t,s,f);else{var W=t,X=s,ae=f,fe=W[X-2*ae],pe=W[X-ae],ue=W[X+0],ye=W[X+ae],ge=W[X+2*ae],ie=27*(xe=Qs[1020+3*(ue-pe)+Qs[1020+fe-ye]])+63>>7,oe=18*xe+63>>7,xe=9*xe+63>>7;W[X-3*ae]=mr[255+W[X-3*ae]+xe],W[X-2*ae]=mr[255+fe+oe],W[X-ae]=mr[255+pe+ie],W[X+0]=mr[255+ue-ie],W[X+ae]=mr[255+ye-oe],W[X+2*ae]=mr[255+ge-xe]}s+=b}}function Tr(t,s,f,b,I,D,O,q){for(D=2*D+1;0<I--;){if(Hi(t,s,f,D,O))if(zi(t,s,f,q))xa(t,s,f);else{var W=t,X=s,ae=f,fe=W[X-ae],pe=W[X+0],ue=W[X+ae],ye=Qi[112+((ge=3*(pe-fe))+4>>3)],ge=Qi[112+(ge+3>>3)],ie=ye+1>>1;W[X-2*ae]=mr[255+W[X-2*ae]+ie],W[X-ae]=mr[255+fe+ge],W[X+0]=mr[255+pe-ye],W[X+ae]=mr[255+ue-ie]}s+=b}}function Ja(t,s,f,b,I,D){xn(t,s,f,1,16,b,I,D)}function Vn(t,s,f,b,I,D){xn(t,s,1,f,16,b,I,D)}function Js(t,s,f,b,I,D){var O;for(O=3;0<O;--O)Tr(t,s+=4*f,f,1,16,b,I,D)}function va(t,s,f,b,I,D){var O;for(O=3;0<O;--O)Tr(t,s+=4,1,f,16,b,I,D)}function Xs(t,s,f,b,I,D,O,q){xn(t,s,I,1,8,D,O,q),xn(f,b,I,1,8,D,O,q)}function Xa(t,s,f,b,I,D,O,q){xn(t,s,1,I,8,D,O,q),xn(f,b,1,I,8,D,O,q)}function Ka(t,s,f,b,I,D,O,q){Tr(t,s+4*I,I,1,8,D,O,q),Tr(f,b+4*I,I,1,8,D,O,q)}function Vi(t,s,f,b,I,D,O,q){Tr(t,s+4,1,I,8,D,O,q),Tr(f,b+4,1,I,8,D,O,q)}function wa(){this.ba=new _r,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new At,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Za(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Qa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Gi(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new N}function Ks(){this.xb=this.a=0,this.l=new fa,this.ca=new _r,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new k,this.Pb=0,this.wd=new k,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Gi,this.ab=0,this.gc=h(4,Qa),this.Oc=0}function ya(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new fa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Gn(t,s,f,b,I,D,O){for(t=t==null?0:t[s+0],s=0;s<O;++s)I[D+s]=t+f[b+s]&255,t=I[D+s]}function ei(t,s,f,b,I,D,O){var q;if(t==null)Gn(null,null,f,b,I,D,O);else for(q=0;q<O;++q)I[D+q]=t[s+q]+f[b+q]&255}function vn(t,s,f,b,I,D,O){if(t==null)Gn(null,null,f,b,I,D,O);else{var q,W=t[s+0],X=W,ae=W;for(q=0;q<O;++q)X=ae+(W=t[s+q])-X,ae=f[b+q]+(-256&X?0>X?0:255:X)&255,X=W,I[D+q]=ae}}function ti(t,s,f,b){var I=s.width,D=s.o;if(e(t!=null&&s!=null),0>f||0>=b||f+b>D)return null;if(!t.Cc){if(t.ga==null){var O;if(t.ga=new ya,(O=t.ga==null)||(O=s.width*s.o,e(t.Gb.length==0),t.Gb=i(O),t.Uc=0,t.Gb==null?O=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,O=1),O=!O),!O){O=t.ga;var q=t.Fa,W=t.P,X=t.qc,ae=t.mb,fe=t.nb,pe=W+1,ue=X-1,ye=O.l;if(e(q!=null&&ae!=null&&s!=null),Sn[0]=null,Sn[1]=Gn,Sn[2]=ei,Sn[3]=vn,O.ca=ae,O.tb=fe,O.c=s.width,O.i=s.height,e(0<O.c&&0<O.i),1>=X)s=0;else if(O.$a=q[W+0]>>0&3,O.Z=q[W+0]>>2&3,O.Lc=q[W+0]>>4&3,W=q[W+0]>>6&3,0>O.$a||1<O.$a||4<=O.Z||1<O.Lc||W)s=0;else if(ye.put=Vr,ye.ac=$t,ye.bc=Gr,ye.ma=O,ye.width=s.width,ye.height=s.height,ye.Da=s.Da,ye.v=s.v,ye.va=s.va,ye.j=s.j,ye.o=s.o,O.$a)e:{e(O.$a==1),s=wr();t:for(;;){if(s==null){s=0;break e}if(e(O!=null),O.mc=s,s.c=O.c,s.i=O.i,s.l=O.l,s.l.ma=O,s.l.width=O.c,s.l.height=O.i,s.a=0,G(s.m,q,pe,ue),!Jr(O.c,O.i,1,s,null)||(s.ab==1&&s.gc[0].hc==3&&sn(s.s)?(O.ic=1,q=s.c*s.i,s.Ta=null,s.Ua=0,s.V=i(q),s.Ba=0,s.V==null?(s.a=1,s=0):s=1):(O.ic=0,s=Un(s,O.c)),!s))break t;s=1;break e}O.mc=null,s=0}else s=ue>=O.c*O.i;O=!s}if(O)return null;t.ga.Lc!=1?t.Ga=0:b=D-f}e(t.ga!=null),e(f+b<=D);e:{if(s=(q=t.ga).c,D=q.l.o,q.$a==0){if(pe=t.rc,ue=t.Vc,ye=t.Fa,W=t.P+1+f*s,X=t.mb,ae=t.nb+f*s,e(W<=t.P+t.qc),q.Z!=0)for(e(Sn[q.Z]!=null),O=0;O<b;++O)Sn[q.Z](pe,ue,ye,W,X,ae,s),pe=X,ue=ae,ae+=s,W+=s;else for(O=0;O<b;++O)a(X,ae,ye,W,s),pe=X,ue=ae,ae+=s,W+=s;t.rc=pe,t.Vc=ue}else{if(e(q.mc!=null),s=f+b,e((O=q.mc)!=null),e(s<=O.i),O.C>=s)s=1;else if(q.ic||he(),q.ic){q=O.V,pe=O.Ba,ue=O.c;var ge=O.i,ie=(ye=1,W=O.$/ue,X=O.$%ue,ae=O.m,fe=O.s,O.$),oe=ue*ge,xe=ue*s,je=fe.wc,we=ie<xe?Rt(fe,X,W):null;e(ie<=oe),e(s<=ge),e(sn(fe));t:for(;;){for(;!ae.h&&ie<xe;){if(X&je||(we=Rt(fe,X,W)),e(we!=null),Z(ae),256>(ge=or(we.G[0],we.H[0],ae)))q[pe+ie]=ge,++ie,++X>=ue&&(X=0,++W<=s&&!(W%16)&&Fr(O,W));else{if(!(280>ge)){ye=0;break t}ge=Cr(ge-256,ae);var Oe,Ce=or(we.G[4],we.H[4],ae);if(Z(ae),!(ie>=(Ce=$r(ue,Ce=Cr(Ce,ae)))&&oe-ie>=ge)){ye=0;break t}for(Oe=0;Oe<ge;++Oe)q[pe+ie+Oe]=q[pe+ie+Oe-Ce];for(ie+=ge,X+=ge;X>=ue;)X-=ue,++W<=s&&!(W%16)&&Fr(O,W);ie<xe&&X&je&&(we=Rt(fe,X,W))}e(ae.h==Y(ae))}Fr(O,W>s?s:W);break t}!ye||ae.h&&ie<oe?(ye=0,O.a=ae.h?5:3):O.$=ie,s=ye}else s=Mr(O,O.V,O.Ba,O.c,O.i,s,la);if(!s){b=0;break e}}f+b>=D&&(t.Cc=1),b=1}if(!b)return null;if(t.Cc&&((b=t.ga)!=null&&(b.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+f*I}function u(t,s,f,b,I,D){for(;0<I--;){var O,q=t,W=s+(f?1:0),X=t,ae=s+(f?0:3);for(O=0;O<b;++O){var fe=X[ae+4*O];fe!=255&&(fe*=32897,q[W+4*O+0]=q[W+4*O+0]*fe>>23,q[W+4*O+1]=q[W+4*O+1]*fe>>23,q[W+4*O+2]=q[W+4*O+2]*fe>>23)}s+=D}}function F(t,s,f,b,I){for(;0<b--;){var D;for(D=0;D<f;++D){var O=t[s+2*D+0],q=15&(X=t[s+2*D+1]),W=4369*q,X=(240&X|X>>4)*W>>16;t[s+2*D+0]=(240&O|O>>4)*W>>16&240|(15&O|O<<4)*W>>16>>4&15,t[s+2*D+1]=240&X|q}s+=I}}function Q(t,s,f,b,I,D,O,q){var W,X,ae=255;for(X=0;X<I;++X){for(W=0;W<b;++W){var fe=t[s+W];D[O+4*W]=fe,ae&=fe}s+=f,O+=q}return ae!=255}function ne(t,s,f,b,I){var D;for(D=0;D<I;++D)f[b+D]=t[s+D]>>8}function he(){kr=u,yt=F,Nt=Q,Mt=ne}function me(t,s,f){M[t]=function(b,I,D,O,q,W,X,ae,fe,pe,ue,ye,ge,ie,oe,xe,je){var we,Oe=je-1>>1,Ce=q[W+0]|X[ae+0]<<16,ze=fe[pe+0]|ue[ye+0]<<16;e(b!=null);var Ie=3*Ce+ze+131074>>2;for(s(b[I+0],255&Ie,Ie>>16,ge,ie),D!=null&&(Ie=3*ze+Ce+131074>>2,s(D[O+0],255&Ie,Ie>>16,oe,xe)),we=1;we<=Oe;++we){var ut=q[W+we]|X[ae+we]<<16,ft=fe[pe+we]|ue[ye+we]<<16,lt=Ce+ut+ze+ft+524296,at=lt+2*(ut+ze)>>3;Ie=at+Ce>>1,Ce=(lt=lt+2*(Ce+ft)>>3)+ut>>1,s(b[I+2*we-1],255&Ie,Ie>>16,ge,ie+(2*we-1)*f),s(b[I+2*we-0],255&Ce,Ce>>16,ge,ie+(2*we-0)*f),D!=null&&(Ie=lt+ze>>1,Ce=at+ft>>1,s(D[O+2*we-1],255&Ie,Ie>>16,oe,xe+(2*we-1)*f),s(D[O+2*we+0],255&Ce,Ce>>16,oe,xe+(2*we+0)*f)),Ce=ut,ze=ft}1&je||(Ie=3*Ce+ze+131074>>2,s(b[I+je-1],255&Ie,Ie>>16,ge,ie+(je-1)*f),D!=null&&(Ie=3*ze+Ce+131074>>2,s(D[O+je-1],255&Ie,Ie>>16,oe,xe+(je-1)*f)))}}function ke(){Lr[es]=wc,Lr[ts]=Go,Lr[zo]=yc,Lr[rs]=$o,Lr[ns]=Yo,Lr[eo]=Jo,Lr[Uo]=Nc,Lr[to]=Go,Lr[ro]=$o,Lr[as]=Yo,Lr[no]=Jo}function Te(t){return t&-16384?0>t?0:255:t>>jc}function qe(t,s){return Te((19077*t>>8)+(26149*s>>8)-14234)}function Qe(t,s,f){return Te((19077*t>>8)-(6419*s>>8)-(13320*f>>8)+8708)}function Xe(t,s){return Te((19077*t>>8)+(33050*s>>8)-17685)}function it(t,s,f,b,I){b[I+0]=qe(t,f),b[I+1]=Qe(t,s,f),b[I+2]=Xe(t,s)}function St(t,s,f,b,I){b[I+0]=Xe(t,s),b[I+1]=Qe(t,s,f),b[I+2]=qe(t,f)}function Pt(t,s,f,b,I){var D=Qe(t,s,f);s=D<<3&224|Xe(t,s)>>3,b[I+0]=248&qe(t,f)|D>>5,b[I+1]=s}function Bt(t,s,f,b,I){var D=240&Xe(t,s)|15;b[I+0]=240&qe(t,f)|Qe(t,s,f)>>4,b[I+1]=D}function Zt(t,s,f,b,I){b[I+0]=255,it(t,s,f,b,I+1)}function Wt(t,s,f,b,I){St(t,s,f,b,I),b[I+3]=255}function Or(t,s,f,b,I){it(t,s,f,b,I),b[I+3]=255}function gr(t,s){return 0>t?0:t>s?s:t}function Zr(t,s,f){M[t]=function(b,I,D,O,q,W,X,ae,fe){for(var pe=ae+(-2&fe)*f;ae!=pe;)s(b[I+0],D[O+0],q[W+0],X,ae),s(b[I+1],D[O+0],q[W+0],X,ae+f),I+=2,++O,++W,ae+=2*f;1&fe&&s(b[I+0],D[O+0],q[W+0],X,ae)}}function $i(t,s,f){return f==0?t==0?s==0?6:5:s==0?4:0:f}function ri(t,s,f,b,I){switch(t>>>30){case 3:hn(s,f,b,I,0);break;case 2:Ft(s,f,b,I);break;case 1:ir(s,f,b,I)}}function ni(t,s){var f,b,I=s.M,D=s.Nb,O=t.oc,q=t.pc+40,W=t.oc,X=t.pc+584,ae=t.oc,fe=t.pc+600;for(f=0;16>f;++f)O[q+32*f-1]=129;for(f=0;8>f;++f)W[X+32*f-1]=129,ae[fe+32*f-1]=129;for(0<I?O[q-1-32]=W[X-1-32]=ae[fe-1-32]=129:(o(O,q-32-1,127,21),o(W,X-32-1,127,9),o(ae,fe-32-1,127,9)),b=0;b<t.za;++b){var pe=s.ya[s.aa+b];if(0<b){for(f=-1;16>f;++f)a(O,q+32*f-4,O,q+32*f+12,4);for(f=-1;8>f;++f)a(W,X+32*f-4,W,X+32*f+4,4),a(ae,fe+32*f-4,ae,fe+32*f+4,4)}var ue=t.Gd,ye=t.Hd+b,ge=pe.ad,ie=pe.Hc;if(0<I&&(a(O,q-32,ue[ye].y,0,16),a(W,X-32,ue[ye].f,0,8),a(ae,fe-32,ue[ye].ea,0,8)),pe.Za){var oe=O,xe=q-32+16;for(0<I&&(b>=t.za-1?o(oe,xe,ue[ye].y[15],4):a(oe,xe,ue[ye+1].y,0,4)),f=0;4>f;f++)oe[xe+128+f]=oe[xe+256+f]=oe[xe+384+f]=oe[xe+0+f];for(f=0;16>f;++f,ie<<=2)oe=O,xe=q+Ko[f],Rr[pe.Ob[f]](oe,xe),ri(ie,ge,16*+f,oe,xe)}else if(oe=$i(b,I,pe.Ob[0]),kn[oe](O,q),ie!=0)for(f=0;16>f;++f,ie<<=2)ri(ie,ge,16*+f,O,q+Ko[f]);for(f=pe.Gc,oe=$i(b,I,pe.Dd),fn[oe](W,X),fn[oe](ae,fe),ie=ge,oe=W,xe=X,255&(pe=f>>0)&&(170&pe?li(ie,256,oe,xe):Nr(ie,256,oe,xe)),pe=ae,ie=fe,255&(f>>=8)&&(170&f?li(ge,320,pe,ie):Nr(ge,320,pe,ie)),I<t.Ub-1&&(a(ue[ye].y,0,O,q+480,16),a(ue[ye].f,0,W,X+224,8),a(ue[ye].ea,0,ae,fe+224,8)),f=8*D*t.B,ue=t.sa,ye=t.ta+16*b+16*D*t.R,ge=t.qa,pe=t.ra+8*b+f,ie=t.Ha,oe=t.Ia+8*b+f,f=0;16>f;++f)a(ue,ye+f*t.R,O,q+32*f,16);for(f=0;8>f;++f)a(ge,pe+f*t.B,W,X+32*f,8),a(ie,oe+f*t.B,ae,fe+32*f,8)}}function Na(t,s,f,b,I,D,O,q,W){var X=[0],ae=[0],fe=0,pe=W!=null?W.kd:0,ue=W??new Za;if(t==null||12>f)return 7;ue.data=t,ue.w=s,ue.ha=f,s=[s],f=[f],ue.gb=[ue.gb];e:{var ye=s,ge=f,ie=ue.gb;if(e(t!=null),e(ge!=null),e(ie!=null),ie[0]=0,12<=ge[0]&&!r(t,ye[0],"RIFF")){if(r(t,ye[0]+8,"WEBP")){ie=3;break e}var oe=Pe(t,ye[0]+4);if(12>oe||4294967286<oe){ie=3;break e}if(pe&&oe>ge[0]-8){ie=7;break e}ie[0]=oe,ye[0]+=12,ge[0]-=12}ie=0}if(ie!=0)return ie;for(oe=0<ue.gb[0],f=f[0];;){e:{var xe=t;ge=s,ie=f;var je=X,we=ae,Oe=ye=[0];if((Ie=fe=[fe])[0]=0,8>ie[0])ie=7;else{if(!r(xe,ge[0],"VP8X")){if(Pe(xe,ge[0]+4)!=10){ie=3;break e}if(18>ie[0]){ie=7;break e}var Ce=Pe(xe,ge[0]+8),ze=1+Ae(xe,ge[0]+12);if(2147483648<=ze*(xe=1+Ae(xe,ge[0]+15))){ie=3;break e}Oe!=null&&(Oe[0]=Ce),je!=null&&(je[0]=ze),we!=null&&(we[0]=xe),ge[0]+=18,ie[0]-=18,Ie[0]=1}ie=0}}if(fe=fe[0],ye=ye[0],ie!=0)return ie;if(ge=!!(2&ye),!oe&&fe)return 3;if(D!=null&&(D[0]=!!(16&ye)),O!=null&&(O[0]=ge),q!=null&&(q[0]=0),O=X[0],ye=ae[0],fe&&ge&&W==null){ie=0;break}if(4>f){ie=7;break}if(oe&&fe||!oe&&!fe&&!r(t,s[0],"ALPH")){f=[f],ue.na=[ue.na],ue.P=[ue.P],ue.Sa=[ue.Sa];e:{Ce=t,ie=s,oe=f;var Ie=ue.gb;je=ue.na,we=ue.P,Oe=ue.Sa,ze=22,e(Ce!=null),e(oe!=null),xe=ie[0];var ut=oe[0];for(e(je!=null),e(Oe!=null),je[0]=null,we[0]=null,Oe[0]=0;;){if(ie[0]=xe,oe[0]=ut,8>ut){ie=7;break e}var ft=Pe(Ce,xe+4);if(4294967286<ft){ie=3;break e}var lt=8+ft+1&-2;if(ze+=lt,0<Ie&&ze>Ie){ie=3;break e}if(!r(Ce,xe,"VP8 ")||!r(Ce,xe,"VP8L")){ie=0;break e}if(ut[0]<lt){ie=7;break e}r(Ce,xe,"ALPH")||(je[0]=Ce,we[0]=xe+8,Oe[0]=ft),xe+=lt,ut-=lt}}if(f=f[0],ue.na=ue.na[0],ue.P=ue.P[0],ue.Sa=ue.Sa[0],ie!=0)break}f=[f],ue.Ja=[ue.Ja],ue.xa=[ue.xa];e:if(Ie=t,ie=s,oe=f,je=ue.gb[0],we=ue.Ja,Oe=ue.xa,Ce=ie[0],xe=!r(Ie,Ce,"VP8 "),ze=!r(Ie,Ce,"VP8L"),e(Ie!=null),e(oe!=null),e(we!=null),e(Oe!=null),8>oe[0])ie=7;else{if(xe||ze){if(Ie=Pe(Ie,Ce+4),12<=je&&Ie>je-12){ie=3;break e}if(pe&&Ie>oe[0]-8){ie=7;break e}we[0]=Ie,ie[0]+=8,oe[0]-=8,Oe[0]=ze}else Oe[0]=5<=oe[0]&&Ie[Ce+0]==47&&!(Ie[Ce+4]>>5),we[0]=oe[0];ie=0}if(f=f[0],ue.Ja=ue.Ja[0],ue.xa=ue.xa[0],s=s[0],ie!=0)break;if(4294967286<ue.Ja)return 3;if(q==null||ge||(q[0]=ue.xa?2:1),O=[O],ye=[ye],ue.xa){if(5>f){ie=7;break}q=O,pe=ye,ge=D,t==null||5>f?t=0:5<=f&&t[s+0]==47&&!(t[s+4]>>5)?(oe=[0],Ie=[0],je=[0],G(we=new k,t,s,f),He(we,oe,Ie,je)?(q!=null&&(q[0]=oe[0]),pe!=null&&(pe[0]=Ie[0]),ge!=null&&(ge[0]=je[0]),t=1):t=0):t=0}else{if(10>f){ie=7;break}q=ye,t==null||10>f||!Ii(t,s+3,f-3)?t=0:(pe=t[s+0]|t[s+1]<<8|t[s+2]<<16,ge=16383&(t[s+7]<<8|t[s+6]),t=16383&(t[s+9]<<8|t[s+8]),1&pe||3<(pe>>1&7)||!(pe>>4&1)||pe>>5>=ue.Ja||!ge||!t?t=0:(O&&(O[0]=ge),q&&(q[0]=t),t=1))}if(!t||(O=O[0],ye=ye[0],fe&&(X[0]!=O||ae[0]!=ye)))return 3;W!=null&&(W[0]=ue,W.offset=s-W.w,e(4294967286>s-W.w),e(W.offset==W.ha-f));break}return ie==0||ie==7&&fe&&W==null?(D!=null&&(D[0]|=ue.na!=null&&0<ue.na.length),b!=null&&(b[0]=O),I!=null&&(I[0]=ye),0):ie}function ai(t,s,f){var b=s.width,I=s.height,D=0,O=0,q=b,W=I;if(s.Da=t!=null&&0<t.Da,s.Da&&(q=t.cd,W=t.bd,D=t.v,O=t.j,11>f||(D&=-2,O&=-2),0>D||0>O||0>=q||0>=W||D+q>b||O+W>I))return 0;if(s.v=D,s.j=O,s.va=D+q,s.o=O+W,s.U=q,s.T=W,s.da=t!=null&&0<t.da,s.da){if(!Ze(q,W,f=[t.ib],D=[t.hb]))return 0;s.ib=f[0],s.hb=D[0]}return s.ob=t!=null&&t.ob,s.Kb=t==null||!t.Sd,s.da&&(s.ob=s.ib<3*b/4&&s.hb<3*I/4,s.Kb=0),1}function ii(t){if(t==null)return 2;if(11>t.S){var s=t.f.RGBA;s.fb+=(t.height-1)*s.A,s.A=-s.A}else s=t.f.kb,t=t.height,s.O+=(t-1)*s.fa,s.fa=-s.fa,s.N+=(t-1>>1)*s.Ab,s.Ab=-s.Ab,s.W+=(t-1>>1)*s.Db,s.Db=-s.Db,s.F!=null&&(s.J+=(t-1)*s.lb,s.lb=-s.lb);return 0}function ja(t,s,f,b){if(b==null||0>=t||0>=s)return 2;if(f!=null){if(f.Da){var I=f.cd,D=f.bd,O=-2&f.v,q=-2&f.j;if(0>O||0>q||0>=I||0>=D||O+I>t||q+D>s)return 2;t=I,s=D}if(f.da){if(!Ze(t,s,I=[f.ib],D=[f.hb]))return 2;t=I[0],s=D[0]}}b.width=t,b.height=s;e:{var W=b.width,X=b.height;if(t=b.S,0>=W||0>=X||!(t>=es&&13>t))t=2;else{if(0>=b.Rd&&b.sd==null){O=D=I=s=0;var ae=(q=W*Zo[t])*X;if(11>t||(D=(X+1)/2*(s=(W+1)/2),t==12&&(O=(I=W)*X)),(X=i(ae+2*D+O))==null){t=1;break e}b.sd=X,11>t?((W=b.f.RGBA).eb=X,W.fb=0,W.A=q,W.size=ae):((W=b.f.kb).y=X,W.O=0,W.fa=q,W.Fd=ae,W.f=X,W.N=0+ae,W.Ab=s,W.Cd=D,W.ea=X,W.W=0+ae+D,W.Db=s,W.Ed=D,t==12&&(W.F=X,W.J=0+ae+2*D),W.Tc=O,W.lb=I)}if(s=1,I=b.S,D=b.width,O=b.height,I>=es&&13>I)if(11>I)t=b.f.RGBA,s&=(q=Math.abs(t.A))*(O-1)+D<=t.size,s&=q>=D*Zo[I],s&=t.eb!=null;else{t=b.f.kb,q=(D+1)/2,ae=(O+1)/2,W=Math.abs(t.fa),X=Math.abs(t.Ab);var fe=Math.abs(t.Db),pe=Math.abs(t.lb),ue=pe*(O-1)+D;s&=W*(O-1)+D<=t.Fd,s&=X*(ae-1)+q<=t.Cd,s=(s&=fe*(ae-1)+q<=t.Ed)&W>=D&X>=q&fe>=q,s&=t.y!=null,s&=t.f!=null,s&=t.ea!=null,I==12&&(s&=pe>=D,s&=ue<=t.Tc,s&=t.F!=null)}else s=0;t=s?0:2}}return t!=0||f!=null&&f.fd&&(t=ii(b)),t}var Yt=64,ka=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Sa=24,La=32,si=8,cr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];_e("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(t){return t},M.Predictor2=function(t,s,f){return s[f+0]},M.Predictor3=function(t,s,f){return s[f+1]},M.Predictor4=function(t,s,f){return s[f-1]},M.Predictor5=function(t,s,f){return Fe(Fe(t,s[f+1]),s[f+0])},M.Predictor6=function(t,s,f){return Fe(t,s[f-1])},M.Predictor7=function(t,s,f){return Fe(t,s[f+0])},M.Predictor8=function(t,s,f){return Fe(s[f-1],s[f+0])},M.Predictor9=function(t,s,f){return Fe(s[f+0],s[f+1])},M.Predictor10=function(t,s,f){return Fe(Fe(t,s[f-1]),Fe(s[f+0],s[f+1]))},M.Predictor11=function(t,s,f){var b=s[f+0];return 0>=tt(b>>24&255,t>>24&255,(s=s[f-1])>>24&255)+tt(b>>16&255,t>>16&255,s>>16&255)+tt(b>>8&255,t>>8&255,s>>8&255)+tt(255&b,255&t,255&s)?b:t},M.Predictor12=function(t,s,f){var b=s[f+0];return(Ee((t>>24&255)+(b>>24&255)-((s=s[f-1])>>24&255))<<24|Ee((t>>16&255)+(b>>16&255)-(s>>16&255))<<16|Ee((t>>8&255)+(b>>8&255)-(s>>8&255))<<8|Ee((255&t)+(255&b)-(255&s)))>>>0},M.Predictor13=function(t,s,f){var b=s[f-1];return(Ye((t=Fe(t,s[f+0]))>>24&255,b>>24&255)<<24|Ye(t>>16&255,b>>16&255)<<16|Ye(t>>8&255,b>>8&255)<<8|Ye(t>>0&255,b>>0&255))>>>0};var Zs=M.PredictorAdd0;M.PredictorAdd1=rt,_e("Predictor2","PredictorAdd2"),_e("Predictor3","PredictorAdd3"),_e("Predictor4","PredictorAdd4"),_e("Predictor5","PredictorAdd5"),_e("Predictor6","PredictorAdd6"),_e("Predictor7","PredictorAdd7"),_e("Predictor8","PredictorAdd8"),_e("Predictor9","PredictorAdd9"),_e("Predictor10","PredictorAdd10"),_e("Predictor11","PredictorAdd11"),_e("Predictor12","PredictorAdd12"),_e("Predictor13","PredictorAdd13");var oi=M.PredictorAdd2;nt("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var Yi,yr=M.ColorIndexInverseTransform,Aa=M.MapARGB,Ji=M.VP8LColorIndexInverseTransformAlpha,Xi=M.MapAlpha,wn=M.VP8LPredictorsAdd=[];wn.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var $n,ur,ar,yn,cn,un,Pa,hn,Ft,li,ir,Nr,_a,Ki,ci,Yn,Jn,Nn,Xn,Ca,Kn,jn,ui,jr,kr,yt,Nt,Mt,Ut=i(511),dn=i(2041),hi=i(225),Ia=i(767),Zi=0,Qs=dn,Qi=hi,mr=Ia,Sr=Ut,es=0,ts=1,zo=2,rs=3,ns=4,eo=5,Uo=6,to=7,ro=8,as=9,no=10,sc=[2,3,7],oc=[3,3,11],Ho=[280,256,256,256,40],lc=[0,1,1,1,0],cc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],hc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],dc=8,ao=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],io=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],di=null,fc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],pc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Wo=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],mc=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],bc=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],kn=[],Rr=[],fn=[],vc=1,Vo=2,Sn=[],Lr=[];me("UpsampleRgbLinePair",it,3),me("UpsampleBgrLinePair",St,3),me("UpsampleRgbaLinePair",Or,4),me("UpsampleBgraLinePair",Wt,4),me("UpsampleArgbLinePair",Zt,4),me("UpsampleRgba4444LinePair",Bt,2),me("UpsampleRgb565LinePair",Pt,2);var wc=M.UpsampleRgbLinePair,yc=M.UpsampleBgrLinePair,Go=M.UpsampleRgbaLinePair,$o=M.UpsampleBgraLinePair,Yo=M.UpsampleArgbLinePair,Jo=M.UpsampleRgba4444LinePair,Nc=M.UpsampleRgb565LinePair,is=16,ss=1<<is-1,fi=-227,so=482,jc=6,Xo=0,kc=i(256),Sc=i(256),Lc=i(256),Ac=i(256),Pc=i(so-fi),_c=i(so-fi);Zr("YuvToRgbRow",it,3),Zr("YuvToBgrRow",St,3),Zr("YuvToRgbaRow",Or,4),Zr("YuvToBgraRow",Wt,4),Zr("YuvToArgbRow",Zt,4),Zr("YuvToRgba4444Row",Bt,2),Zr("YuvToRgb565Row",Pt,2);var Ko=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],os=[0,2,8],Cc=[8,7,6,4,4,2,2,2,1,1,1,1],Ic=1;this.WebPDecodeRGBA=function(t,s,f,b,I){var D=ts,O=new wa,q=new _r;O.ba=q,q.S=D,q.width=[q.width],q.height=[q.height];var W=q.width,X=q.height,ae=new an;if(ae==null||t==null)var fe=2;else e(ae!=null),fe=Na(t,s,f,ae.width,ae.height,ae.Pd,ae.Qd,ae.format,null);if(fe!=0?W=0:(W!=null&&(W[0]=ae.width[0]),X!=null&&(X[0]=ae.height[0]),W=1),W){q.width=q.width[0],q.height=q.height[0],b!=null&&(b[0]=q.width),I!=null&&(I[0]=q.height);e:{if(b=new fa,(I=new Za).data=t,I.w=s,I.ha=f,I.kd=1,s=[0],e(I!=null),((t=Na(I.data,I.w,I.ha,null,null,null,s,null,I))==0||t==7)&&s[0]&&(t=4),(s=t)==0){if(e(O!=null),b.data=I.data,b.w=I.w+I.offset,b.ha=I.ha-I.offset,b.put=Vr,b.ac=$t,b.bc=Gr,b.ma=O,I.xa){if((t=wr())==null){O=1;break e}if((function(pe,ue){var ye=[0],ge=[0],ie=[0];t:for(;;){if(pe==null)return 0;if(ue==null)return pe.a=2,0;if(pe.l=ue,pe.a=0,G(pe.m,ue.data,ue.w,ue.ha),!He(pe.m,ye,ge,ie)){pe.a=3;break t}if(pe.xb=Vo,ue.width=ye[0],ue.height=ge[0],!Jr(ye[0],ge[0],1,pe,null))break t;return 1}return e(pe.a!=0),0})(t,b)){if(b=(s=ja(b.width,b.height,O.Oa,O.ba))==0){t:{b=t;r:for(;;){if(b==null){b=0;break t}if(e(b.s.yc!=null),e(b.s.Ya!=null),e(0<b.s.Wb),e((f=b.l)!=null),e((I=f.ma)!=null),b.xb!=0){if(b.ca=I.ba,b.tb=I.tb,e(b.ca!=null),!ai(I.Oa,f,rs)){b.a=2;break r}if(!Un(b,f.width)||f.da)break r;if((f.da||ht(b.ca.S))&&he(),11>b.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),b.ca.f.kb.F!=null&&he()),b.Pb&&0<b.s.ua&&b.s.vb.X==null&&!We(b.s.vb,b.s.Wa.Xa)){b.a=1;break r}b.xb=0}if(!Mr(b,b.V,b.Ba,b.c,b.i,f.o,oa))break r;I.Dc=b.Ma,b=1;break t}e(b.a!=0),b=0}b=!b}b&&(s=t.a)}else s=t.a}else{if((t=new Ms)==null){O=1;break e}if(t.Fa=I.na,t.P=I.P,t.qc=I.Sa,Fi(t,b)){if((s=ja(b.width,b.height,O.Oa,O.ba))==0){if(t.Aa=0,f=O.Oa,e((I=t)!=null),f!=null){if(0<(W=0>(W=f.Md)?0:100<W?255:255*W/100)){for(X=ae=0;4>X;++X)12>(fe=I.pb[X]).lc&&(fe.ia=W*Cc[0>fe.lc?0:fe.lc]>>3),ae|=fe.ia;ae&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=f.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}Ds(t,b)||(s=t.a)}}else s=t.a}s==0&&O.Oa!=null&&O.Oa.fd&&(s=ii(O.ba))}O=s}D=O!=0?null:11>D?q.f.RGBA.eb:q.f.kb.y}else D=null;return D};var Zo=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function g(M,H){for(var K="",S=0;S<4;S++)K+=String.fromCharCode(M[H++]);return K}function w(M,H){return(M[H+0]<<0|M[H+1]<<8|M[H+2]<<16)>>>0}function m(M,H){return(M[H+0]<<0|M[H+1]<<8|M[H+2]<<16|M[H+3]<<24)>>>0}new d;var v=[0],p=[0],L=[],P=new d,A=n,x=(function(M,H){var K={},S=0,N=!1,U=0,$=0;if(K.frames=[],!(function(z,Y,J,Z){for(var le=0;le<Z;le++)if(z[Y+le]!=J.charCodeAt(le))return!0;return!1})(M,H,"RIFF",4)){var ee,E;for(m(M,H+=4),H+=8;H<M.length;){var T=g(M,H),G=m(M,H+=4);H+=4;var V=G+(1&G);switch(T){case"VP8 ":case"VP8L":K.frames[S]===void 0&&(K.frames[S]={}),(k=K.frames[S]).src_off=N?$:H-8,k.src_size=U+G+8,S++,N&&(N=!1,U=0,$=0);break;case"VP8X":(k=K.header={}).feature_flags=M[H];var re=H+4;k.canvas_width=1+w(M,re),re+=3,k.canvas_height=1+w(M,re),re+=3;break;case"ALPH":N=!0,U=V+8,$=H-8;break;case"ANIM":(k=K.header).bgcolor=m(M,H),re=H+4,k.loop_count=(ee=M)[(E=re)+0]<<0|ee[E+1]<<8,re+=2;break;case"ANMF":var se,k;(k=K.frames[S]={}).offset_x=2*w(M,H),H+=3,k.offset_y=2*w(M,H),H+=3,k.width=1+w(M,H),H+=3,k.height=1+w(M,H),H+=3,k.duration=w(M,H),H+=3,se=M[H++],k.dispose=1&se,k.blend=se>>1&1}T!="ANMF"&&(H+=V)}return K}})(A,0);x.response=A,x.rgbaoutput=!0,x.dataurl=!1;var j=x.header?x.header:null,y=x.frames?x.frames:null;if(j){j.loop_counter=j.loop_count,v=[j.canvas_height],p=[j.canvas_width];for(var C=0;C<y.length&&y[C].blend!=0;C++);}var R=y[0],B=P.WebPDecodeRGBA(A,R.src_off,R.src_size,p,v);R.rgba=B,R.imgwidth=p[0],R.imgheight=v[0];for(var _=0;_<p[0]*v[0]*4;_++)L[_]=B[_];return this.width=p,this.height=v,this.data=L,this}(function(n){var e=function(){return typeof Io=="function"},r=function(v,p,L,P){var A=4,x=h;switch(P){case n.image_compression.FAST:A=1,x=i;break;case n.image_compression.MEDIUM:A=6,x=c;break;case n.image_compression.SLOW:A=9,x=d}v=a(v,p,L,x);var j=Io(v,{level:A});return n.__addimage__.arrayBufferToBinaryString(j)},a=function(v,p,L,P){for(var A,x,j,y=v.length/p,C=new Uint8Array(v.length+y),R=w(),B=0;B<y;B+=1){if(j=B*p,A=v.subarray(j,j+p),P)C.set(P(A,L,x),j+B);else{for(var _,M=R.length,H=[];_<M;_+=1)H[_]=R[_](A,L,x);var K=m(H.concat());C.set(H[K],j+B)}x=A}return C},o=function(v){var p=Array.apply([],v);return p.unshift(0),p},i=function(v,p){var L,P=[],A=v.length;P[0]=1;for(var x=0;x<A;x+=1)L=v[x-p]||0,P[x+1]=v[x]-L+256&255;return P},h=function(v,p,L){var P,A=[],x=v.length;A[0]=2;for(var j=0;j<x;j+=1)P=L&&L[j]||0,A[j+1]=v[j]-P+256&255;return A},c=function(v,p,L){var P,A,x=[],j=v.length;x[0]=3;for(var y=0;y<j;y+=1)P=v[y-p]||0,A=L&&L[y]||0,x[y+1]=v[y]+256-(P+A>>>1)&255;return x},d=function(v,p,L){var P,A,x,j,y=[],C=v.length;y[0]=4;for(var R=0;R<C;R+=1)P=v[R-p]||0,A=L&&L[R]||0,x=L&&L[R-p]||0,j=g(P,A,x),y[R+1]=v[R]-j+256&255;return y},g=function(v,p,L){if(v===p&&p===L)return v;var P=Math.abs(p-L),A=Math.abs(v-L),x=Math.abs(v+p-L-L);return P<=A&&P<=x?v:A<=x?p:L},w=function(){return[o,i,h,c,d]},m=function(v){var p=v.map((function(L){return L.reduce((function(P,A){return P+Math.abs(A)}),0)}));return p.indexOf(Math.min.apply(null,p))};n.processPNG=function(v,p,L,P){var A,x,j,y,C,R,B,_,M,H,K,S,N,U,$,ee=this.decode.FLATE_DECODE,E="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(j=new _u(v)).imgData,x=j.bits,A=j.colorSpace,C=j.colors,[4,6].indexOf(j.colorType)!==-1){if(j.bits===8){M=(_=j.pixelBitlength==32?new Uint32Array(j.decodePixels().buffer):j.pixelBitlength==16?new Uint16Array(j.decodePixels().buffer):new Uint8Array(j.decodePixels().buffer)).length,K=new Uint8Array(M*j.colors),H=new Uint8Array(M);var T,G=j.pixelBitlength-j.bits;for(U=0,$=0;U<M;U++){for(N=_[U],T=0;T<G;)K[$++]=N>>>T&255,T+=j.bits;H[U]=N>>>T&255}}if(j.bits===16){M=(_=new Uint32Array(j.decodePixels().buffer)).length,K=new Uint8Array(M*(32/j.pixelBitlength)*j.colors),H=new Uint8Array(M*(32/j.pixelBitlength)),S=j.colors>1,U=0,$=0;for(var V=0;U<M;)N=_[U++],K[$++]=N>>>0&255,S&&(K[$++]=N>>>16&255,N=_[U++],K[$++]=N>>>0&255),H[V++]=N>>>16&255;x=8}P!==n.image_compression.NONE&&e()?(v=r(K,j.width*j.colors,j.colors,P),B=r(H,j.width,1,P)):(v=K,B=H,ee=void 0)}if(j.colorType===3&&(A=this.color_spaces.INDEXED,R=j.palette,j.transparency.indexed)){var re=j.transparency.indexed,se=0;for(U=0,M=re.length;U<M;++U)se+=re[U];if((se/=255)===M-1&&re.indexOf(0)!==-1)y=[re.indexOf(0)];else if(se!==M){for(_=j.decodePixels(),H=new Uint8Array(_.length),U=0,M=_.length;U<M;U++)H[U]=re[_[U]];B=r(H,j.width,1)}}var k=(function(z){var Y;switch(z){case n.image_compression.FAST:Y=11;break;case n.image_compression.MEDIUM:Y=13;break;case n.image_compression.SLOW:Y=14;break;default:Y=12}return Y})(P);return ee===this.decode.FLATE_DECODE&&(E="/Predictor "+k+" "),E+="/Colors "+C+" /BitsPerComponent "+x+" /Columns "+j.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(B&&this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),{alias:L,data:v,index:p,filter:ee,decodeParameters:E,transparency:y,palette:R,sMask:B,predictor:k,width:j.width,height:j.height,bitsPerComponent:x,colorSpace:A}}}})(Ue.API),(function(n){n.processGIF89A=function(e,r,a,o){var i=new Cu(e),h=i.width,c=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var g={data:d,width:h,height:c},w=new So(100).encode(g,100);return n.processJPEG.call(this,w,r,a,o)},n.processGIF87A=n.processGIF89A})(Ue.API),qr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},qr.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(r){wt.log("bit decode error:"+r)}},qr.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),r=e%4;for(n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,o=0;o<e;o++)for(var i=this.datav.getUint8(this.pos++,!0),h=a*this.width*4+8*o*4,c=0;c<8&&8*o+c<this.width;c++){var d=this.palette[i>>7-c&1];this.data[h+4*c]=d.blue,this.data[h+4*c+1]=d.green,this.data[h+4*c+2]=d.red,this.data[h+4*c+3]=255}r!==0&&(this.pos+=4-r)}},qr.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,o=0;o<n;o++){var i=this.datav.getUint8(this.pos++,!0),h=a*this.width*4+2*o*4,c=i>>4,d=15&i,g=this.palette[c];if(this.data[h]=g.blue,this.data[h+1]=g.green,this.data[h+2]=g.red,this.data[h+3]=255,2*o+1>=this.width)break;g=this.palette[d],this.data[h+4]=g.blue,this.data[h+4+1]=g.green,this.data[h+4+2]=g.red,this.data[h+4+3]=255}e!==0&&(this.pos+=4-e)}},qr.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,a=0;a<this.width;a++){var o=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(o<this.palette.length){var h=this.palette[o];this.data[i]=h.red,this.data[i+1]=h.green,this.data[i+2]=h.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}n!==0&&(this.pos+=4-n)}},qr.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(i&e)/e*255|0,c=(i>>5&e)/e*255|0,d=(i>>10&e)/e*255|0,g=i>>15?255:0,w=a*this.width*4+4*o;this.data[w]=d,this.data[w+1]=c,this.data[w+2]=h,this.data[w+3]=g}this.pos+=n}},qr.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var o=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(h&e)/e*255|0,d=(h>>5&r)/r*255|0,g=(h>>11)/e*255|0,w=o*this.width*4+4*i;this.data[w]=g,this.data[w+1]=d,this.data[w+2]=c,this.data[w+3]=255}this.pos+=n}},qr.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),h=e*this.width*4+4*r;this.data[h]=i,this.data[h+1]=o,this.data[h+2]=a,this.data[h+3]=255}this.pos+=this.width%4}},qr.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*r;this.data[c]=i,this.data[c+1]=o,this.data[c+2]=a,this.data[c+3]=h}},qr.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,r,a,o){var i=new qr(e,!1),h=i.width,c=i.height,d={data:i.getData(),width:h,height:c},g=new So(100).encode(d,100);return n.processJPEG.call(this,g,r,a,o)}})(Ue.API),Fl.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,r,a,o){var i=new Fl(e),h=i.width,c=i.height,d={data:i.getData(),width:h,height:c},g=new So(100).encode(d,100);return n.processJPEG.call(this,g,r,a,o)}})(Ue.API),Ue.API.processRGBA=function(n,e,r){for(var a=n.data,o=a.length,i=new Uint8Array(o/4*3),h=new Uint8Array(o/4),c=0,d=0,g=0;g<o;g+=4){var w=a[g],m=a[g+1],v=a[g+2],p=a[g+3];i[c++]=w,i[c++]=m,i[c++]=v,h[d++]=p}var L=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:L,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ue.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Ra=Ue.API,ys=Ra.getCharWidthsArray=function(n,e){var r,a,o=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),h=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:o.metadata.Unicode.widths,d=c.fof?c.fof:1,g=e.kerning?e.kerning:o.metadata.Unicode.kerning,w=g.fof?g.fof:1,m=e.doKerning!==!1,v=0,p=n.length,L=0,P=c[0]||d,A=[];for(r=0;r<p;r++)a=n.charCodeAt(r),typeof o.metadata.widthOfString=="function"?A.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(a))+h*(1e3/i)||0)/1e3):(v=m&&gt(g[a])==="object"&&!isNaN(parseInt(g[a][L],10))?g[a][L]/w:0,A.push((c[a]||P)/d+v)),L=a;return A},Pl=Ra.getStringUnitWidth=function(n,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),a=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Ra.processArabic&&(n=Ra.processArabic(n)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(n,r,o)/r:ys.apply(this,arguments).reduce((function(i,h){return i+h}),0)},_l=function(n,e,r,a){for(var o=[],i=0,h=n.length,c=0;i!==h&&c+e[i]<r;)c+=e[i],i++;o.push(n.slice(0,i));var d=i;for(c=0;i!==h;)c+e[i]>a&&(o.push(n.slice(d,i)),c=0,d=i),c+=e[i],i++;return d!==i&&o.push(n.slice(d,i)),o},Cl=function(n,e,r){r||(r={});var a,o,i,h,c,d,g,w=[],m=[w],v=r.textIndent||0,p=0,L=0,P=n.split(" "),A=ys.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?P[0].length+2:r.lineIndent||0){var x=Array(d).join(" "),j=[];P.map((function(C){(C=C.split(/\s*\n/)).length>1?j=j.concat(C.map((function(R,B){return(B&&R.length?`
`:"")+R}))):j.push(C[0])})),P=j,d=Pl.apply(this,[x,r])}for(i=0,h=P.length;i<h;i++){var y=0;if(a=P[i],d&&a[0]==`
`&&(a=a.substr(1),y=1),v+p+(L=(o=ys.apply(this,[a,r])).reduce((function(C,R){return C+R}),0))>e||y){if(L>e){for(c=_l.apply(this,[a,o,e-(v+p),e]),w.push(c.shift()),w=[c.pop()];c.length;)m.push([c.shift()]);L=o.slice(a.length-(w[0]?w[0].length:0)).reduce((function(C,R){return C+R}),0)}else w=[a];m.push(w),v=L+d,p=A}else w.push(a),v+=p+L,p=A}return g=d?function(C,R){return(R?x:"")+C.join(" ")}:function(C){return C.join(" ")},m.map(g)},Ra.splitTextToSize=function(n,e,r){var a,o=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(w){if(w.widths&&w.kerning)return{widths:w.widths,kerning:w.kerning};var m=this.internal.getFont(w.fontName,w.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(n)?n:String(n).split(/\r?\n/);var h=1*this.internal.scaleFactor*e/o;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/o:0,i.lineIndent=r.lineIndent;var c,d,g=[];for(c=0,d=a.length;c<d;c++)g=g.concat(Cl.apply(this,[a[c],h,i]));return g},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},a={},o=0;o<e.length;o++)r[e[o]]="0123456789abcdef"[o],a["0123456789abcdef"[o]]=e[o];var i=function(m){return"0x"+parseInt(m,10).toString(16)},h=n.__fontmetrics__.compress=function(m){var v,p,L,P,A=["{"];for(var x in m){if(v=m[x],isNaN(parseInt(x,10))?p="'"+x+"'":(x=parseInt(x,10),p=(p=i(x).slice(2)).slice(0,-1)+a[p.slice(-1)]),typeof v=="number")v<0?(L=i(v).slice(3),P="-"):(L=i(v).slice(2),P=""),L=P+L.slice(0,-1)+a[L.slice(-1)];else{if(gt(v)!=="object")throw new Error("Don't know what to do with value type "+gt(v)+".");L=h(v)}A.push(p+L)}return A.push("}"),A.join("")},c=n.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,p,L,P,A={},x=1,j=A,y=[],C="",R="",B=m.length-1,_=1;_<B;_+=1)(P=m[_])=="'"?v?(L=v.join(""),v=void 0):v=[]:v?v.push(P):P=="{"?(y.push([j,L]),j={},L=void 0):P=="}"?((p=y.pop())[0][p[1]]=j,L=void 0,j=p[0]):P=="-"?x=-1:L===void 0?r.hasOwnProperty(P)?(C+=r[P],L=parseInt(C,16)*x,x=1,C=""):C+=P:r.hasOwnProperty(P)?(R+=r[P],j[L]=parseInt(R,16)*x,x=1,L=void 0,R=""):R+=P;return A},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},w={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(m){var v=m.font,p=w.Unicode[v.postScriptName];p&&(v.metadata.Unicode={},v.metadata.Unicode.widths=p.widths,v.metadata.Unicode.kerning=p.kerning);var L=g.Unicode[v.postScriptName];L&&(v.metadata.Unicode.encoding=L,v.encoding=L.codePages[0])}])})(Ue.API),(function(n){var e=function(r){for(var a=r.length,o=new Uint8Array(a),i=0;i<a;i++)o[i]=r.charCodeAt(i);return o};n.API.events.push(["addFont",function(r){var a=void 0,o=r.font,i=r.instance;if(!o.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(a=i.existsFileInVFS(o.postScriptName)===!1?i.loadFile(o.postScriptName):i.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(h,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(yi(c)),h.metadata=n.API.TTFFont.open(c),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(o,a)}}])})(Ue),(function(n){function e(){return(Ve.canvg?Promise.resolve(Ve.canvg):Lo(()=>import("./index.es-DEmo7y0D.js"),__vite__mapDeps([0,1,2,3]))).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}Ue.API.addSvgAsImage=function(r,a,o,i,h,c,d,g){if(isNaN(a)||isNaN(o))throw wt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(h))throw wt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=i,w.height=h;var m=w.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,w.width,w.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then((function(L){return L.fromString(m,r,v)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(L){return L.render(v)})).then((function(){p.addImage(w.toDataURL("image/jpeg",1),a,o,i,h,d,g)}))}})(),Ue.API.putTotalPages=function(n){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var o=0;o<this.internal.pages[a].length;o++)this.internal.pages[a][o]=this.internal.pages[a][o].replace(e,r);return this},Ue.API.viewerPreferences=function(n,e){var r;n=n||{},e=e||!1;var a,o,i,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(h),d=[],g=0,w=0,m=0;function v(L,P){var A,x=!1;for(A=0;A<L.length;A+=1)L[A]===P&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var p=c.length;for(m=0;m<p;m+=1)r[c[m]].value=r[c[m]].defaultValue,r[c[m]].explicitSet=!1}if(gt(n)==="object"){for(o in n)if(i=n[o],v(c,o)&&i!==void 0){if(r[o].type==="boolean"&&typeof i=="boolean")r[o].value=i;else if(r[o].type==="name"&&v(r[o].valueSet,i))r[o].value=i;else if(r[o].type==="integer"&&Number.isInteger(i))r[o].value=i;else if(r[o].type==="array"){for(g=0;g<i.length;g+=1)if(a=!0,i[g].length===1&&typeof i[g][0]=="number")d.push(String(i[g]-1));else if(i[g].length>1){for(w=0;w<i[g].length;w+=1)typeof i[g][w]!="number"&&(a=!1);a===!0&&d.push([i[g][0]-1,i[g][1]-1].join(" "))}r[o].value="["+d.join(" ")+"]"}else r[o].value=r[o].defaultValue;r[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var L,P=[];for(L in r)r[L].explicitSet===!0&&(r[L].type==="name"?P.push("/"+L+" /"+r[L].value):P.push("/"+L+" "+r[L].value));P.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+P.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(n){var e=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),g=i.length+h.length+c.length+o.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+g+" >>"),this.internal.write("stream"),this.internal.write(o+i+h+c+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(a,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}})(Ue.API),(function(n){var e=n.API,r=e.pdfEscape16=function(i,h){for(var c,d=h.metadata.Unicode.widths,g=["","0","00","000","0000"],w=[""],m=0,v=i.length;m<v;++m){if(c=h.metadata.characterToGlyph(i.charCodeAt(m)),h.metadata.glyIdsUsed.push(c),h.metadata.toUnicode[c]=i.charCodeAt(m),d.indexOf(c)==-1&&(d.push(c),d.push([parseInt(h.metadata.widthOfGlyph(c),10)])),c=="0")return w.join("");c=c.toString(16),w.push(g[4-c.length],c)}return w.join("")},a=function(i){var h,c,d,g,w,m,v;for(w=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],m=0,v=(c=Object.keys(i).sort((function(p,L){return p-L}))).length;m<v;m++)h=c[m],d.length>=100&&(w+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[h]!==void 0&&i[h]!==null&&typeof i[h].toString=="function"&&(g=("0000"+i[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),d.push("<"+h+"><"+g+">"));return d.length&&(w+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),w+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(h){var c=h.font,d=h.out,g=h.newObject,w=h.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="Identity-H"){for(var m=c.metadata.Unicode.widths,v=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),p="",L=0;L<v.length;L++)p+=String.fromCharCode(v[L]);var P=g();w({data:p,addLength1:!0,objectId:P}),d("endobj");var A=g();w({data:a(c.metadata.toUnicode),addLength1:!0,objectId:A}),d("endobj");var x=g();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Ea(c.fontName)),d("/FontFile2 "+P+" 0 R"),d("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),d("/Flags "+c.metadata.flags),d("/StemV "+c.metadata.stemV),d("/ItalicAngle "+c.metadata.italicAngle),d("/Ascent "+c.metadata.ascender),d("/Descent "+c.metadata.decender),d("/CapHeight "+c.metadata.capHeight),d(">>"),d("endobj");var j=g();d("<<"),d("/Type /Font"),d("/BaseFont /"+Ea(c.fontName)),d("/FontDescriptor "+x+" 0 R"),d("/W "+n.API.PDFObject.convert(m)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+c.encoding+")"),d(">>"),d(">>"),d("endobj"),c.objectNumber=g(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+A+" 0 R"),d("/BaseFont /"+Ea(c.fontName)),d("/Encoding /"+c.encoding),d("/DescendantFonts ["+j+" 0 R]"),d(">>"),d("endobj"),c.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(h){var c=h.font,d=h.out,g=h.newObject,w=h.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var m=c.metadata.rawData,v="",p=0;p<m.length;p++)v+=String.fromCharCode(m[p]);var L=g();w({data:v,addLength1:!0,objectId:L}),d("endobj");var P=g();w({data:a(c.metadata.toUnicode),addLength1:!0,objectId:P}),d("endobj");var A=g();d("<<"),d("/Descent "+c.metadata.decender),d("/CapHeight "+c.metadata.capHeight),d("/StemV "+c.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+L+" 0 R"),d("/Flags 96"),d("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),d("/FontName /"+Ea(c.fontName)),d("/ItalicAngle "+c.metadata.italicAngle),d("/Ascent "+c.metadata.ascender),d(">>"),d("endobj"),c.objectNumber=g();for(var x=0;x<c.metadata.hmtx.widths.length;x++)c.metadata.hmtx.widths[x]=parseInt(c.metadata.hmtx.widths[x]*(1e3/c.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+P+" 0 R/BaseFont/"+Ea(c.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),d("endobj"),c.isAlreadyPutted=!0}})(i)}]);var o=function(i){var h,c=i.text||"",d=i.x,g=i.y,w=i.options||{},m=i.mutex||{},v=m.pdfEscape,p=m.activeFontKey,L=m.fonts,P=p,A="",x=0,j="",y=L[P].encoding;if(L[P].encoding!=="Identity-H")return{text:c,x:d,y:g,options:w,mutex:m};for(j=c,P=p,Array.isArray(c)&&(j=c[0]),x=0;x<j.length;x+=1)L[P].metadata.hasOwnProperty("cmap")&&(h=L[P].metadata.cmap.unicode.codeMap[j[x].charCodeAt(0)]),h||j[x].charCodeAt(0)<256&&L[P].metadata.hasOwnProperty("Unicode")?A+=j[x]:A+="";var C="";return parseInt(P.slice(1))<14||y==="WinAnsiEncoding"?C=v(A,P).split("").map((function(R){return R.charCodeAt(0).toString(16)})).join(""):y==="Identity-H"&&(C=r(A,L[P])),m.isHex=!0,{text:C,x:d,y:g,options:w,mutex:m}};e.events.push(["postProcessText",function(i){var h=i.text||"",c=[],d={text:h,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(h)){var g=0;for(g=0;g<h.length;g+=1)Array.isArray(h[g])&&h[g].length===3?c.push([o(Object.assign({},d,{text:h[g][0]})).text,h[g][1],h[g][2]]):c.push(o(Object.assign({},d,{text:h[g]})).text);i.text=c}else i.text=o(Object.assign({},d,{text:h})).text}])})(Ue),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},n.addFileToVFS=function(r,a){return e.call(this),this.internal.vFS[r]=a,this},n.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Ue.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(a){var o,i,h,c,d,g,w,m=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],L={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},P={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,y=0;this.__bidiEngine__={};var C=function(S){var N=S.charCodeAt(),U=N>>8,$=P[U];return $!==void 0?m[256*$+(255&N)]:U===252||U===253?"AL":x.test(U)?"L":U===8?"R":"N"},R=function(S){for(var N,U=0;U<S.length;U++){if((N=C(S.charAt(U)))==="L")return!1;if(N==="R")return!0}return!1},B=function(S,N,U,$){var ee,E,T,G,V=N[$];switch(V){case"L":case"R":j=!1;break;case"N":case"AN":break;case"EN":j&&(V="AN");break;case"AL":j=!0,V="R";break;case"WS":V="N";break;case"CS":$<1||$+1>=N.length||(ee=U[$-1])!=="EN"&&ee!=="AN"||(E=N[$+1])!=="EN"&&E!=="AN"?V="N":j&&(E="AN"),V=E===ee?E:"N";break;case"ES":V=(ee=$>0?U[$-1]:"B")==="EN"&&$+1<N.length&&N[$+1]==="EN"?"EN":"N";break;case"ET":if($>0&&U[$-1]==="EN"){V="EN";break}if(j){V="N";break}for(T=$+1,G=N.length;T<G&&N[T]==="ET";)T++;V=T<G&&N[T]==="EN"?"EN":"N";break;case"NSM":if(h&&!c){for(G=N.length,T=$+1;T<G&&N[T]==="NSM";)T++;if(T<G){var re=S[$],se=re>=1425&&re<=2303||re===64286;if(ee=N[T],se&&(ee==="R"||ee==="AL")){V="R";break}}}V=$<1||(ee=N[$-1])==="B"?"N":U[$-1];break;case"B":j=!1,o=!0,V=y;break;case"S":i=!0,V="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"BN":V="N"}return V},_=function(S,N,U){var $=S.split("");return U&&M($,U,{hiLevel:y}),$.reverse(),N&&N.reverse(),$.join("")},M=function(S,N,U){var $,ee,E,T,G,V=-1,re=S.length,se=0,k=[],z=y?p:v,Y=[];for(j=!1,o=!1,i=!1,ee=0;ee<re;ee++)Y[ee]=C(S[ee]);for(E=0;E<re;E++){if(G=se,k[E]=B(S,Y,k,E),$=240&(se=z[G][L[k[E]]]),se&=15,N[E]=T=z[se][5],$>0)if($===16){for(ee=V;ee<E;ee++)N[ee]=1;V=-1}else V=-1;if(z[se][6])V===-1&&(V=E);else if(V>-1){for(ee=V;ee<E;ee++)N[ee]=T;V=-1}Y[E]==="B"&&(N[E]=0),U.hiLevel|=T}i&&(function(J,Z,le){for(var ce=0;ce<le;ce++)if(J[ce]==="S"){Z[ce]=y;for(var de=ce-1;de>=0&&J[de]==="WS";de--)Z[de]=y}})(Y,N,re)},H=function(S,N,U,$,ee){if(!(ee.hiLevel<S)){if(S===1&&y===1&&!o)return N.reverse(),void(U&&U.reverse());for(var E,T,G,V,re=N.length,se=0;se<re;){if($[se]>=S){for(G=se+1;G<re&&$[G]>=S;)G++;for(V=se,T=G-1;V<T;V++,T--)E=N[V],N[V]=N[T],N[T]=E,U&&(E=U[V],U[V]=U[T],U[T]=E);se=G}se++}}},K=function(S,N,U){var $=S.split(""),ee={hiLevel:y};return U||(U=[]),M($,U,ee),(function(E,T,G){if(G.hiLevel!==0&&w)for(var V,re=0;re<E.length;re++)T[re]===1&&(V=A.indexOf(E[re]))>=0&&(E[re]=A[V+1])})($,U,ee),H(2,$,N,U,ee),H(1,$,N,U,ee),$.join("")};return this.__bidiEngine__.doBidiReorder=function(S,N,U){if((function(ee,E){if(E)for(var T=0;T<ee.length;T++)E[T]=T;c===void 0&&(c=R(ee)),g===void 0&&(g=R(ee))})(S,N),h||!d||g)if(h&&d&&c^g)y=c?1:0,S=_(S,N,U);else if(!h&&d&&g)y=c?1:0,S=K(S,N,U),S=_(S,N);else if(!h||c||d||g){if(h&&!d&&c^g)S=_(S,N),c?(y=0,S=K(S,N,U)):(y=1,S=K(S,N,U),S=_(S,N));else if(h&&c&&!d&&g)y=1,S=K(S,N,U),S=_(S,N);else if(!h&&!d&&c^g){var $=w;c?(y=1,S=K(S,N,U),y=0,w=!1,S=K(S,N,U),w=$):(y=0,S=K(S,N,U),S=_(S,N),y=1,w=!1,S=K(S,N,U),w=$,S=_(S,N))}}else y=0,S=K(S,N,U);else y=c?1:0,S=K(S,N,U);return S},this.__bidiEngine__.setOptions=function(S){S&&(h=S.isInputVisual,d=S.isOutputVisual,c=S.isInputRtl,g=S.isOutputRtl,w=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(a){var o=a.text,i=(a.x,a.y,a.options||{}),h=(a.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(o)==="[object Array]"){var c=0;for(h=[],c=0;c<o.length;c+=1)Object.prototype.toString.call(o[c])==="[object Array]"?h.push([r.doBidiReorder(o[c][0]),o[c][1],o[c][2]]):h.push([r.doBidiReorder(o[c])]);a.text=h}else a.text=r.doBidiReorder(o);r.setOptions({isInputVisual:!0})}])})(Ue),Ue.API.TTFFont=(function(){function n(e){var r;if(this.rawData=e,r=this.contents=new En(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Vu(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Iu(this.contents),this.head=new Mu(this),this.name=new Bu(this),this.cmap=new nc(this),this.toUnicode={},this.hhea=new Du(this),this.maxp=new Eu(this),this.hmtx=new qu(this),this.post=new Ou(this),this.os2=new Tu(this),this.loca=new Wu(this),this.glyf=new zu(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,r,a,o,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var h,c,d,g;for(g=[],h=0,c=(d=this.bbox).length;h<c;h++)e=d[h],g.push(Math.round(e*this.scaleFactor));return g}).call(this),this.stemV=0,this.post.exists?(a=255&(o=this.post.italic_angle),(32768&(r=o>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},n.prototype.widthOfString=function(e,r,a){var o,i,h,c;for(h=0,i=0,c=(e=""+e).length;0<=c?i<c:i>c;i=0<=c?++i:--i)o=e.charCodeAt(i),h+=this.widthOfGlyph(this.characterToGlyph(o))+a*(1e3/r)||0;return h*(r/1e3)},n.prototype.lineHeight=function(e,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*e},n})();var Hr,En=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var r,a;for(a=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},n.prototype.writeString=function(e){var r,a,o;for(o=[],r=0,a=e.length;0<=a?r<a:r>a;r=0<=a?++r:--r)o.push(this.writeByte(e.charCodeAt(r)));return o},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,r,a,o,i,h,c,d;return e=this.readByte(),r=this.readByte(),a=this.readByte(),o=this.readByte(),i=this.readByte(),h=this.readByte(),c=this.readByte(),d=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^o)+16777216*(255^i)+65536*(255^h)+256*(255^c)+(255^d)+1):72057594037927940*e+281474976710656*r+1099511627776*a+4294967296*o+16777216*i+65536*h+256*c+d},n.prototype.writeLongLong=function(e){var r,a;return r=Math.floor(e/4294967296),a=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var r,a;for(r=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)r.push(this.readByte());return r},n.prototype.write=function(e){var r,a,o,i;for(i=[],a=0,o=e.length;a<o;a++)r=e[a],i.push(this.writeByte(r));return i},n})(),Iu=(function(){var n;function e(r){var a,o,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},o=0,i=this.tableCount;0<=i?o<i:o>i;o=0<=i?++o:--o)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return e.prototype.encode=function(r){var a,o,i,h,c,d,g,w,m,v,p,L,P;for(P in p=Object.keys(r).length,d=Math.log(2),m=16*Math.floor(Math.log(p)/d),h=Math.floor(m/d),w=16*p-m,(o=new En).writeInt(this.scalarType),o.writeShort(p),o.writeShort(m),o.writeShort(h),o.writeShort(w),i=16*p,g=o.pos+i,c=null,L=[],r)for(v=r[P],o.writeString(P),o.writeInt(n(v)),o.writeInt(g),o.writeInt(v.length),L=L.concat(v),P==="head"&&(c=g),g+=v.length;g%4;)L.push(0),g++;return o.write(L),a=2981146554-n(o.data),o.pos=c+8,o.writeUInt32(a),o.data},n=function(r){var a,o,i,h;for(r=ac.call(r);r.length%4;)r.push(0);for(i=new En(r),o=0,a=0,h=r.length;a<h;a=a+=4)o+=i.readUInt32();return 4294967295&o},e})(),Fu={}.hasOwnProperty,nn=function(n,e){for(var r in e)Fu.call(e,r)&&(n[r]=e[r]);function a(){this.constructor=n}return a.prototype=e.prototype,n.prototype=new a,n.__super__=e.prototype,n};Hr=(function(){function n(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var Mu=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Hr),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var a;return(a=new En).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},e})(),Ml=(function(){function n(e,r){var a,o,i,h,c,d,g,w,m,v,p,L,P,A,x,j,y;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=e.readByte();break;case 4:for(p=e.readUInt16(),v=p/2,e.pos+=6,i=(function(){var C,R;for(R=[],d=C=0;0<=v?C<v:C>v;d=0<=v?++C:--C)R.push(e.readUInt16());return R})(),e.pos+=2,P=(function(){var C,R;for(R=[],d=C=0;0<=v?C<v:C>v;d=0<=v?++C:--C)R.push(e.readUInt16());return R})(),g=(function(){var C,R;for(R=[],d=C=0;0<=v?C<v:C>v;d=0<=v?++C:--C)R.push(e.readUInt16());return R})(),w=(function(){var C,R;for(R=[],d=C=0;0<=v?C<v:C>v;d=0<=v?++C:--C)R.push(e.readUInt16());return R})(),o=(this.length-e.pos+this.offset)/2,c=(function(){var C,R;for(R=[],d=C=0;0<=o?C<o:C>o;d=0<=o?++C:--C)R.push(e.readUInt16());return R})(),d=x=0,y=i.length;x<y;d=++x)for(A=i[d],a=j=L=P[d];L<=A?j<=A:j>=A;a=L<=A?++j:--j)w[d]===0?h=a+g[d]:(h=c[w[d]/2+(a-L)-(v-d)]||0)!==0&&(h+=g[d]),this.codeMap[a]=65535&h}e.pos=m}return n.encode=function(e,r){var a,o,i,h,c,d,g,w,m,v,p,L,P,A,x,j,y,C,R,B,_,M,H,K,S,N,U,$,ee,E,T,G,V,re,se,k,z,Y,J,Z,le,ce,de,Ne,Se,Ae;switch($=new En,h=Object.keys(e).sort((function(Pe,We){return Pe-We})),r){case"macroman":for(P=0,A=(function(){var Pe=[];for(L=0;L<256;++L)Pe.push(0);return Pe})(),j={0:0},i={},ee=0,V=h.length;ee<V;ee++)j[de=e[o=h[ee]]]==null&&(j[de]=++P),i[o]={old:e[o],new:j[e[o]]},A[o]=j[e[o]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(A),{charMap:i,subtable:$.data,maxGlyphID:P+1};case"unicode":for(N=[],m=[],y=0,j={},a={},x=g=null,E=0,re=h.length;E<re;E++)j[R=e[o=h[E]]]==null&&(j[R]=++y),a[o]={old:R,new:j[R]},c=j[R]-o,x!=null&&c===g||(x&&m.push(x),N.push(o),g=c),x=o;for(x&&m.push(x),m.push(65535),N.push(65535),K=2*(H=N.length),M=2*Math.pow(Math.log(H)/Math.LN2,2),v=Math.log(M/2)/Math.LN2,_=2*H-M,d=[],B=[],p=[],L=T=0,se=N.length;T<se;L=++T){if(S=N[L],w=m[L],S===65535){d.push(0),B.push(0);break}if(S-(U=a[S].new)>=32768)for(d.push(0),B.push(2*(p.length+H-L)),o=G=S;S<=w?G<=w:G>=w;o=S<=w?++G:--G)p.push(a[o].new);else d.push(U-S),B.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*H+2*p.length),$.writeUInt16(0),$.writeUInt16(K),$.writeUInt16(M),$.writeUInt16(v),$.writeUInt16(_),le=0,k=m.length;le<k;le++)o=m[le],$.writeUInt16(o);for($.writeUInt16(0),ce=0,z=N.length;ce<z;ce++)o=N[ce],$.writeUInt16(o);for(Ne=0,Y=d.length;Ne<Y;Ne++)c=d[Ne],$.writeUInt16(c);for(Se=0,J=B.length;Se<J;Se++)C=B[Se],$.writeUInt16(C);for(Ae=0,Z=p.length;Ae<Z;Ae++)P=p[Ae],$.writeUInt16(P);return{charMap:a,subtable:$.data,maxGlyphID:y+1}}},n})(),nc=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Hr),e.prototype.tag="cmap",e.prototype.parse=function(r){var a,o,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)a=new Ml(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},e.encode=function(r,a){var o,i;return a==null&&(a="macroman"),o=Ml.encode(r,a),(i=new En).writeUInt16(0),i.writeUInt16(1),o.table=i.data.concat(o.subtable),o},e})(),Du=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Hr),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e})(),Tu=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Hr),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var a,o;for(o=[],a=0;a<10;++a)o.push(r.readByte());return o})(),this.charRange=(function(){var a,o;for(o=[],a=0;a<4;++a)o.push(r.readInt());return o})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var a,o;for(o=[],a=0;a<2;a=++a)o.push(r.readInt());return o})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e})(),Ou=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Hr),e.prototype.tag="post",e.prototype.parse=function(r){var a,o,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var h;for(o=r.readUInt16(),this.glyphNameIndex=[],h=0;0<=o?h<o:h>o;h=0<=o?++h:--h)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)a=r.readByte(),i.push(this.names.push(r.readString(a)));return i;case 151552:return o=r.readUInt16(),this.offsets=r.read(o);case 196608:break;case 262144:return this.map=(function(){var c,d,g;for(g=[],h=c=0,d=this.file.maxp.numGlyphs;0<=d?c<d:c>d;h=0<=d?++c:--c)g.push(r.readUInt32());return g}).call(this)}},e})(),Ru=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Bu=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Hr),e.prototype.tag="name",e.prototype.parse=function(r){var a,o,i,h,c,d,g,w,m,v,p;for(r.pos=this.offset,r.readShort(),a=r.readShort(),d=r.readShort(),o=[],h=0;0<=a?h<a:h>a;h=0<=a?++h:--h)o.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+d+r.readShort()});for(g={},h=m=0,v=o.length;m<v;h=++m)i=o[h],r.pos=i.offset,w=r.readString(i.length),c=new Ru(w,i),g[p=i.nameID]==null&&(g[p]=[]),g[i.nameID].push(c);this.strings=g,this.copyright=g[0],this.fontFamily=g[1],this.fontSubfamily=g[2],this.uniqueSubfamily=g[3],this.fontName=g[4],this.version=g[5];try{this.postscriptName=g[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=g[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=g[7],this.manufacturer=g[8],this.designer=g[9],this.description=g[10],this.vendorUrl=g[11],this.designerUrl=g[12],this.license=g[13],this.licenseUrl=g[14],this.preferredFamily=g[15],this.preferredSubfamily=g[17],this.compatibleFull=g[18],this.sampleText=g[19]},e})(),Eu=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Hr),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e})(),qu=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Hr),e.prototype.tag="hmtx",e.prototype.parse=function(r){var a,o,i,h,c,d,g;for(r.pos=this.offset,this.metrics=[],a=0,d=this.file.hhea.numberOfMetrics;0<=d?a<d:a>d;a=0<=d?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var w,m;for(m=[],a=w=0;0<=i?w<i:w>i;a=0<=i?++w:--w)m.push(r.readInt16());return m})(),this.widths=(function(){var w,m,v,p;for(p=[],w=0,m=(v=this.metrics).length;w<m;w++)h=v[w],p.push(h.advance);return p}).call(this),o=this.widths[this.widths.length-1],g=[],a=c=0;0<=i?c<i:c>i;a=0<=i?++c:--c)g.push(this.widths.push(o));return g},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e})(),ac=[].slice,zu=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Hr),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var a,o,i,h,c,d,g,w,m,v;return r in this.cache?this.cache[r]:(h=this.file.loca,a=this.file.contents,o=h.indexOf(r),(i=h.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+o,c=(d=new En(a.read(i))).readShort(),w=d.readShort(),v=d.readShort(),g=d.readShort(),m=d.readShort(),this.cache[r]=c===-1?new Hu(d,w,v,g,m):new Uu(d,c,w,v,g,m),this.cache[r]))},e.prototype.encode=function(r,a,o){var i,h,c,d,g;for(c=[],h=[],d=0,g=a.length;d<g;d++)i=r[a[d]],h.push(c.length),i&&(c=c.concat(i.encode(o)));return h.push(c.length),{table:c,offsets:h}},e})(),Uu=(function(){function n(e,r,a,o,i,h){this.raw=e,this.numberOfContours=r,this.xMin=a,this.yMin=o,this.xMax=i,this.yMax=h,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),Hu=(function(){function n(e,r,a,o,i){var h,c;for(this.raw=e,this.xMin=r,this.yMin=a,this.xMax=o,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;c=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&c;)h.pos+=1&c?4:2,128&c?h.pos+=8:64&c?h.pos+=4:8&c&&(h.pos+=2)}return n.prototype.encode=function(){var e,r,a;for(r=new En(ac.call(this.raw.data)),e=0,a=this.glyphIDs.length;e<a;++e)r.pos=this.glyphOffsets[e];return r.data},n})(),Wu=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Hr),e.prototype.tag="loca",e.prototype.parse=function(r){var a,o;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var i,h;for(h=[],o=0,i=this.length;o<i;o+=2)h.push(2*r.readUInt16());return h}).call(this):(function(){var i,h;for(h=[],o=0,i=this.length;o<i;o+=4)h.push(r.readUInt32());return h}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,a){for(var o=new Uint32Array(this.offsets.length),i=0,h=0,c=0;c<o.length;++c)if(o[c]=i,h<a.length&&a[h]==c){++h,o[c]=i;var d=this.offsets[c],g=this.offsets[c+1]-d;g>0&&(i+=g)}for(var w=new Array(4*o.length),m=0;m<o.length;++m)w[4*m+3]=255&o[m],w[4*m+2]=(65280&o[m])>>8,w[4*m+1]=(16711680&o[m])>>16,w[4*m]=(4278190080&o[m])>>24;return w},e})(),Vu=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,r,a,o,i;for(r in o=this.font.cmap.tables[0].codeMap,e={},i=this.subset)a=i[r],e[r]=o[a];return e},n.prototype.glyphsFor=function(e){var r,a,o,i,h,c,d;for(o={},h=0,c=e.length;h<c;h++)o[i=e[h]]=this.font.glyf.glyphFor(i);for(i in r=[],o)(a=o[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in d=this.glyphsFor(r))a=d[i],o[i]=a;return o},n.prototype.encode=function(e,r){var a,o,i,h,c,d,g,w,m,v,p,L,P,A,x;for(o in a=nc.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(e),p={0:0},x=a.charMap)p[(d=x[o]).old]=d.new;for(L in v=a.maxGlyphID,h)L in p||(p[L]=v++);return w=(function(j){var y,C;for(y in C={},j)C[j[y]]=y;return C})(p),m=Object.keys(w).sort((function(j,y){return j-y})),P=(function(){var j,y,C;for(C=[],j=0,y=m.length;j<y;j++)c=m[j],C.push(w[c]);return C})(),i=this.font.glyf.encode(h,P,p),g=this.font.loca.encode(i.offsets,P),A={cmap:this.font.cmap.raw(),glyf:i.table,loca:g,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(A["OS/2"]=this.font.os2.raw()),this.font.directory.encode(A)},n})();Ue.API.PDFObject=(function(){var n;function e(){}return n=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},e.convert=function(r){var a,o,i,h;if(Array.isArray(r))return"["+(function(){var c,d,g;for(g=[],c=0,d=r.length;c<d;c++)a=r[c],g.push(e.convert(a));return g})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+n(r.getUTCFullYear(),4)+n(r.getUTCMonth(),2)+n(r.getUTCDate(),2)+n(r.getUTCHours(),2)+n(r.getUTCMinutes(),2)+n(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(o in i=["<<"],r)h=r[o],i.push("/"+o+" "+e.convert(h));return i.push(">>"),i.join(`
`)}return""+r},e})();const Gu=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:ju,AcroFormAppearance:Re,AcroFormButton:Ht,AcroFormCheckBox:ki,AcroFormChoiceField:ta,AcroFormComboBox:na,AcroFormEditBox:Ni,AcroFormListBox:ra,AcroFormPasswordField:Si,AcroFormPushButton:ji,AcroFormRadioButton:aa,AcroFormTextField:On,GState:Ai,ShadingPattern:Dn,TilingPattern:ea,default:Ue,jsPDF:Ue},Symbol.toStringTag,{value:"Module"}));var js={exports:{}};const $u=Hc(Gu);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var Dl=js.exports,Tl;function Yu(){return Tl||(Tl=1,(function(n,e){(function(a,o){n.exports=o((function(){try{return $u}catch{}})())})(typeof globalThis<"u"?globalThis:typeof Dl<"u"?Dl:typeof window<"u"?window:typeof self<"u"?self:Wc,function(r){return(function(){var a={172:(function(c,d){var g=this&&this.__extends||(function(){var v=function(p,L){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,A){P.__proto__=A}||function(P,A){for(var x in A)Object.prototype.hasOwnProperty.call(A,x)&&(P[x]=A[x])},v(p,L)};return function(p,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");v(p,L);function P(){this.constructor=p}p.prototype=L===null?Object.create(L):(P.prototype=L.prototype,new P)}})();Object.defineProperty(d,"__esModule",{value:!0}),d.CellHookData=d.HookData=void 0;var w=(function(){function v(p,L,P){this.table=L,this.pageNumber=L.pageNumber,this.pageCount=this.pageNumber,this.settings=L.settings,this.cursor=P,this.doc=p.getDocument()}return v})();d.HookData=w;var m=(function(v){g(p,v);function p(L,P,A,x,j,y){var C=v.call(this,L,P,y)||this;return C.cell=A,C.row=x,C.column=j,C.section=x.section,C}return p})(w);d.CellHookData=m}),340:(function(c,d,g){Object.defineProperty(d,"__esModule",{value:!0});var w=g(4),m=g(136),v=g(744),p=g(776),L=g(664),P=g(972);function A(x){x.API.autoTable=function(){for(var j=[],y=0;y<arguments.length;y++)j[y]=arguments[y];var C;j.length===1?C=j[0]:(console.error("Use of deprecated autoTable initiation"),C=j[2]||{},C.columns=j[0],C.body=j[1]);var R=(0,p.parseInput)(this,C),B=(0,P.createTable)(this,R);return(0,L.drawTable)(this,B),this},x.API.lastAutoTable=!1,x.API.previousAutoTable=!1,x.API.autoTable.previous=!1,x.API.autoTableText=function(j,y,C,R){(0,m.default)(j,y,C,R,this)},x.API.autoTableSetDefaults=function(j){return v.DocHandler.setDefaults(j,this),this},x.autoTableSetDefaults=function(j,y){v.DocHandler.setDefaults(j,y)},x.API.autoTableHtmlToJson=function(j,y){var C;if(y===void 0&&(y=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var R=new v.DocHandler(this),B=(0,w.parseHtml)(R,j,window,y,!1),_=B.head,M=B.body,H=((C=_[0])===null||C===void 0?void 0:C.map(function(K){return K.content}))||[];return{columns:H,rows:M,data:M}},x.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var j=this.lastAutoTable;return j&&j.finalY?j.finalY:0},x.API.autoTableAddPageContent=function(j){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),x.API.autoTable.globalDefaults||(x.API.autoTable.globalDefaults={}),x.API.autoTable.globalDefaults.addPageContent=j,this},x.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}d.default=A}),136:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0});function g(w,m,v,p,L){p=p||{};var P=1.15,A=L.internal.scaleFactor,x=L.internal.getFontSize()/A,j=L.getLineHeightFactor?L.getLineHeightFactor():P,y=x*j,C=/\r\n|\r|\n/g,R="",B=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(R=typeof w=="string"?w.split(C):w,B=R.length||1),v+=x*(2-P),p.valign==="middle"?v-=B/2*y:p.valign==="bottom"&&(v-=B*y),p.halign==="center"||p.halign==="right"){var _=x;if(p.halign==="center"&&(_*=.5),R&&B>=1){for(var M=0;M<R.length;M++)L.text(R[M],m-L.getStringUnitWidth(R[M])*_,v),v+=y;return L}m-=L.getStringUnitWidth(w)*_}return p.halign==="justify"?L.text(w,m,v,{maxWidth:p.maxWidth||100,align:"justify"}):L.text(w,m,v),L}d.default=g}),420:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.getPageAvailableWidth=d.parseSpacing=d.getFillStyle=d.addTableBorder=d.getStringWidth=void 0;function g(L,P,A){A.applyStyles(P,!0);var x=Array.isArray(L)?L:[L],j=x.map(function(y){return A.getTextWidth(y)}).reduce(function(y,C){return Math.max(y,C)},0);return j}d.getStringWidth=g;function w(L,P,A,x){var j=P.settings.tableLineWidth,y=P.settings.tableLineColor;L.applyStyles({lineWidth:j,lineColor:y});var C=m(j,!1);C&&L.rect(A.x,A.y,P.getWidth(L.pageSize().width),x.y-A.y,C)}d.addTableBorder=w;function m(L,P){var A=L>0,x=P||P===0;return A&&x?"DF":A?"S":x?"F":null}d.getFillStyle=m;function v(L,P){var A,x,j,y;if(L=L||P,Array.isArray(L)){if(L.length>=4)return{top:L[0],right:L[1],bottom:L[2],left:L[3]};if(L.length===3)return{top:L[0],right:L[1],bottom:L[2],left:L[1]};if(L.length===2)return{top:L[0],right:L[1],bottom:L[0],left:L[1]};L.length===1?L=L[0]:L=P}return typeof L=="object"?(typeof L.vertical=="number"&&(L.top=L.vertical,L.bottom=L.vertical),typeof L.horizontal=="number"&&(L.right=L.horizontal,L.left=L.horizontal),{left:(A=L.left)!==null&&A!==void 0?A:P,top:(x=L.top)!==null&&x!==void 0?x:P,right:(j=L.right)!==null&&j!==void 0?j:P,bottom:(y=L.bottom)!==null&&y!==void 0?y:P}):(typeof L!="number"&&(L=P),{top:L,right:L,bottom:L,left:L})}d.parseSpacing=v;function p(L,P){var A=v(P.settings.margin,0);return L.pageSize().width-(A.left+A.right)}d.getPageAvailableWidth=p}),796:(function(c,d){var g=this&&this.__extends||(function(){var p=function(L,P){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,x){A.__proto__=x}||function(A,x){for(var j in x)Object.prototype.hasOwnProperty.call(x,j)&&(A[j]=x[j])},p(L,P)};return function(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");p(L,P);function A(){this.constructor=L}L.prototype=P===null?Object.create(P):(A.prototype=P.prototype,new A)}})();Object.defineProperty(d,"__esModule",{value:!0}),d.getTheme=d.defaultStyles=d.HtmlRowInput=void 0;var w=(function(p){g(L,p);function L(P){var A=p.call(this)||this;return A._element=P,A}return L})(Array);d.HtmlRowInput=w;function m(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}d.defaultStyles=m;function v(p){var L={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return L[p]}d.getTheme=v}),903:(function(c,d,g){Object.defineProperty(d,"__esModule",{value:!0}),d.parseCss=void 0;var w=g(420);function m(A,x,j,y,C){var R={},B=1.3333333333333333,_=p(x,function(V){return C.getComputedStyle(V).backgroundColor});_!=null&&(R.fillColor=_);var M=p(x,function(V){return C.getComputedStyle(V).color});M!=null&&(R.textColor=M);var H=P(y,j);H&&(R.cellPadding=H);var K="borderTopColor",S=B*j,N=y.borderTopWidth;if(y.borderBottomWidth===N&&y.borderRightWidth===N&&y.borderLeftWidth===N){var U=(parseFloat(N)||0)/S;U&&(R.lineWidth=U)}else R.lineWidth={top:(parseFloat(y.borderTopWidth)||0)/S,right:(parseFloat(y.borderRightWidth)||0)/S,bottom:(parseFloat(y.borderBottomWidth)||0)/S,left:(parseFloat(y.borderLeftWidth)||0)/S},R.lineWidth.top||(R.lineWidth.right?K="borderRightColor":R.lineWidth.bottom?K="borderBottomColor":R.lineWidth.left&&(K="borderLeftColor"));var $=p(x,function(V){return C.getComputedStyle(V)[K]});$!=null&&(R.lineColor=$);var ee=["left","right","center","justify"];ee.indexOf(y.textAlign)!==-1&&(R.halign=y.textAlign),ee=["middle","bottom","top"],ee.indexOf(y.verticalAlign)!==-1&&(R.valign=y.verticalAlign);var E=parseInt(y.fontSize||"");isNaN(E)||(R.fontSize=E/B);var T=v(y);T&&(R.fontStyle=T);var G=(y.fontFamily||"").toLowerCase();return A.indexOf(G)!==-1&&(R.font=G),R}d.parseCss=m;function v(A){var x="";return(A.fontWeight==="bold"||A.fontWeight==="bolder"||parseInt(A.fontWeight)>=700)&&(x="bold"),(A.fontStyle==="italic"||A.fontStyle==="oblique")&&(x+="italic"),x}function p(A,x){var j=L(A,x);if(!j)return null;var y=j.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!y||!Array.isArray(y))return null;var C=[parseInt(y[1]),parseInt(y[2]),parseInt(y[3])],R=parseInt(y[4]);return R===0||isNaN(C[0])||isNaN(C[1])||isNaN(C[2])?null:C}function L(A,x){var j=x(A);return j==="rgba(0, 0, 0, 0)"||j==="transparent"||j==="initial"||j==="inherit"?A.parentElement==null?null:L(A.parentElement,x):j}function P(A,x){var j=[A.paddingTop,A.paddingRight,A.paddingBottom,A.paddingLeft],y=96/(72/x),C=(parseInt(A.lineHeight)-parseInt(A.fontSize))/x/2,R=j.map(function(_){return parseInt(_||"0")/y}),B=(0,w.parseSpacing)(R,0);return C>B.top&&(B.top=C),C>B.bottom&&(B.bottom=C),B}}),744:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.DocHandler=void 0;var g={},w=(function(){function m(v){this.jsPDFDocument=v,this.userStyles={textColor:v.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:v.internal.getFontSize(),fontStyle:v.internal.getFont().fontStyle,font:v.internal.getFont().fontName,lineWidth:v.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:v.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return m.setDefaults=function(v,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=v:g=v},m.unifyColor=function(v){return Array.isArray(v)?v:typeof v=="number"?[v,v,v]:typeof v=="string"?[v]:null},m.prototype.applyStyles=function(v,p){var L,P,A;p===void 0&&(p=!1),v.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(v.fontStyle);var x=this.jsPDFDocument.internal.getFont(),j=x.fontStyle,y=x.fontName;if(v.font&&(y=v.font),v.fontStyle){j=v.fontStyle;var C=this.getFontList()[y];C&&C.indexOf(j)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(C[0]),j=C[0])}if(this.jsPDFDocument.setFont(y,j),v.fontSize&&this.jsPDFDocument.setFontSize(v.fontSize),!p){var R=m.unifyColor(v.fillColor);R&&(L=this.jsPDFDocument).setFillColor.apply(L,R),R=m.unifyColor(v.textColor),R&&(P=this.jsPDFDocument).setTextColor.apply(P,R),R=m.unifyColor(v.lineColor),R&&(A=this.jsPDFDocument).setDrawColor.apply(A,R),typeof v.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(v.lineWidth)}},m.prototype.splitTextToSize=function(v,p,L){return this.jsPDFDocument.splitTextToSize(v,p,L)},m.prototype.rect=function(v,p,L,P,A){return this.jsPDFDocument.rect(v,p,L,P,A)},m.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},m.prototype.getTextWidth=function(v){return this.jsPDFDocument.getTextWidth(v)},m.prototype.getDocument=function(){return this.jsPDFDocument},m.prototype.setPage=function(v){this.jsPDFDocument.setPage(v)},m.prototype.addPage=function(){return this.jsPDFDocument.addPage()},m.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},m.prototype.getGlobalOptions=function(){return g||{}},m.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},m.prototype.pageSize=function(){var v=this.jsPDFDocument.internal.pageSize;return v.width==null&&(v={width:v.getWidth(),height:v.getHeight()}),v},m.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},m.prototype.getLineHeightFactor=function(){var v=this.jsPDFDocument;return v.getLineHeightFactor?v.getLineHeightFactor():1.15},m.prototype.getLineHeight=function(v){return v/this.scaleFactor()*this.getLineHeightFactor()},m.prototype.pageNumber=function(){var v=this.jsPDFDocument.internal.getCurrentPageInfo();return v?v.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},m})();d.DocHandler=w}),4:(function(c,d,g){Object.defineProperty(d,"__esModule",{value:!0}),d.parseHtml=void 0;var w=g(903),m=g(796);function v(P,A,x,j,y){var C,R;j===void 0&&(j=!1),y===void 0&&(y=!1);var B;typeof A=="string"?B=x.document.querySelector(A):B=A;var _=Object.keys(P.getFontList()),M=P.scaleFactor(),H=[],K=[],S=[];if(!B)return console.error("Html table could not be found with input: ",A),{head:H,body:K,foot:S};for(var N=0;N<B.rows.length;N++){var U=B.rows[N],$=(R=(C=U==null?void 0:U.parentElement)===null||C===void 0?void 0:C.tagName)===null||R===void 0?void 0:R.toLowerCase(),ee=p(_,M,x,U,j,y);ee&&($==="thead"?H.push(ee):$==="tfoot"?S.push(ee):K.push(ee))}return{head:H,body:K,foot:S}}d.parseHtml=v;function p(P,A,x,j,y,C){for(var R=new m.HtmlRowInput(j),B=0;B<j.cells.length;B++){var _=j.cells[B],M=x.getComputedStyle(_);if(y||M.display!=="none"){var H=void 0;C&&(H=(0,w.parseCss)(P,_,A,M,x)),R.push({rowSpan:_.rowSpan,colSpan:_.colSpan,styles:H,_element:_,content:L(_)})}}var K=x.getComputedStyle(j);if(R.length>0&&(y||K.display!=="none"))return R}function L(P){var A=P.cloneNode(!0);return A.innerHTML=A.innerHTML.replace(/\n/g,"").replace(/ +/g," "),A.innerHTML=A.innerHTML.split(/<br.*?>/).map(function(x){return x.trim()}).join(`
`),A.innerText||A.textContent||""}}),776:(function(c,d,g){Object.defineProperty(d,"__esModule",{value:!0}),d.parseInput=void 0;var w=g(4),m=g(356),v=g(420),p=g(744),L=g(792);function P(B,_){var M=new p.DocHandler(B),H=M.getDocumentOptions(),K=M.getGlobalOptions();(0,L.default)(M,K,H,_);var S=(0,m.assign)({},K,H,_),N;typeof window<"u"&&(N=window);var U=A(K,H,_),$=x(K,H,_),ee=j(M,S),E=C(M,S,N);return{id:_.tableId,content:E,hooks:$,styles:U,settings:ee}}d.parseInput=P;function A(B,_,M){for(var H={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},K=function($){if($==="columnStyles"){var ee=B[$],E=_[$],T=M[$];H.columnStyles=(0,m.assign)({},ee,E,T)}else{var G=[B,_,M],V=G.map(function(re){return re[$]||{}});H[$]=(0,m.assign)({},V[0],V[1],V[2])}},S=0,N=Object.keys(H);S<N.length;S++){var U=N[S];K(U)}return H}function x(B,_,M){for(var H=[B,_,M],K={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},S=0,N=H;S<N.length;S++){var U=N[S];U.didParseCell&&K.didParseCell.push(U.didParseCell),U.willDrawCell&&K.willDrawCell.push(U.willDrawCell),U.didDrawCell&&K.didDrawCell.push(U.didDrawCell),U.willDrawPage&&K.willDrawPage.push(U.willDrawPage),U.didDrawPage&&K.didDrawPage.push(U.didDrawPage)}return K}function j(B,_){var M,H,K,S,N,U,$,ee,E,T,G,V,re=(0,v.parseSpacing)(_.margin,40/B.scaleFactor()),se=(M=y(B,_.startY))!==null&&M!==void 0?M:re.top,k;_.showFoot===!0?k="everyPage":_.showFoot===!1?k="never":k=(H=_.showFoot)!==null&&H!==void 0?H:"everyPage";var z;_.showHead===!0?z="everyPage":_.showHead===!1?z="never":z=(K=_.showHead)!==null&&K!==void 0?K:"everyPage";var Y=(S=_.useCss)!==null&&S!==void 0?S:!1,J=_.theme||(Y?"plain":"striped"),Z=!!_.horizontalPageBreak,le=(N=_.horizontalPageBreakRepeat)!==null&&N!==void 0?N:null;return{includeHiddenHtml:(U=_.includeHiddenHtml)!==null&&U!==void 0?U:!1,useCss:Y,theme:J,startY:se,margin:re,pageBreak:($=_.pageBreak)!==null&&$!==void 0?$:"auto",rowPageBreak:(ee=_.rowPageBreak)!==null&&ee!==void 0?ee:"auto",tableWidth:(E=_.tableWidth)!==null&&E!==void 0?E:"auto",showHead:z,showFoot:k,tableLineWidth:(T=_.tableLineWidth)!==null&&T!==void 0?T:0,tableLineColor:(G=_.tableLineColor)!==null&&G!==void 0?G:200,horizontalPageBreak:Z,horizontalPageBreakRepeat:le,horizontalPageBreakBehaviour:(V=_.horizontalPageBreakBehaviour)!==null&&V!==void 0?V:"afterAllRows"}}function y(B,_){var M=B.getLastAutoTable(),H=B.scaleFactor(),K=B.pageNumber(),S=!1;if(M&&M.startPageNumber){var N=M.startPageNumber+M.pageNumber-1;S=N===K}return typeof _=="number"?_:(_==null||_===!1)&&S&&(M==null?void 0:M.finalY)!=null?M.finalY+20/H:null}function C(B,_,M){var H=_.head||[],K=_.body||[],S=_.foot||[];if(_.html){var N=_.includeHiddenHtml;if(M){var U=(0,w.parseHtml)(B,_.html,M,N,_.useCss)||{};H=U.head||H,K=U.body||H,S=U.foot||H}else console.error("Cannot parse html in non browser environment")}var $=_.columns||R(H,K,S);return{columns:$,head:H,body:K,foot:S}}function R(B,_,M){var H=B[0]||_[0]||M[0]||[],K=[];return Object.keys(H).filter(function(S){return S!=="_element"}).forEach(function(S){var N=1,U;Array.isArray(H)?U=H[parseInt(S)]:U=H[S],typeof U=="object"&&!Array.isArray(U)&&(N=(U==null?void 0:U.colSpan)||1);for(var $=0;$<N;$++){var ee=void 0;Array.isArray(H)?ee=K.length:ee=S+($>0?"_".concat($):"");var E={dataKey:ee};K.push(E)}}),K}}),792:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0});function g(m,v,p,L){for(var P=function(y){y&&typeof y!="object"&&console.error("The options parameter should be of type object, is: "+typeof y),typeof y.extendWidth<"u"&&(y.tableWidth=y.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof y.margins<"u"&&(typeof y.margin>"u"&&(y.margin=y.margins),console.error("Use of deprecated option: margins, use margin instead.")),y.startY&&typeof y.startY!="number"&&(console.error("Invalid value for startY option",y.startY),delete y.startY),!y.didDrawPage&&(y.afterPageContent||y.beforePageContent||y.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),y.didDrawPage=function(S){m.applyStyles(m.userStyles),y.beforePageContent&&y.beforePageContent(S),m.applyStyles(m.userStyles),y.afterPageContent&&y.afterPageContent(S),m.applyStyles(m.userStyles),y.afterPageAdd&&S.pageNumber>1&&S.afterPageAdd(S),m.applyStyles(m.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(S){y[S]&&console.error('The "'.concat(S,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(S){var N=S[0],U=S[1];y[U]&&(console.error("Use of deprecated option ".concat(U,". Use ").concat(N," instead")),y[N]=y[U])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(S){var N=typeof S=="string"?S:S[0],U=typeof S=="string"?S:S[1];typeof y[N]<"u"&&(typeof y.styles[U]>"u"&&(y.styles[U]=y[N]),console.error("Use of deprecated option: "+N+", use the style "+U+" instead."))});for(var C=0,R=["styles","bodyStyles","headStyles","footStyles"];C<R.length;C++){var B=R[C];w(y[B]||{})}for(var _=y.columnStyles||{},M=0,H=Object.keys(_);M<H.length;M++){var K=H[M];w(_[K]||{})}},A=0,x=[v,p,L];A<x.length;A++){var j=x[A];P(j)}}d.default=g;function w(m){m.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),m.minCellHeight||(m.minCellHeight=m.rowHeight)):m.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),m.cellWidth||(m.cellWidth=m.columnWidth))}}),260:(function(c,d,g){Object.defineProperty(d,"__esModule",{value:!0}),d.Column=d.Cell=d.Row=d.Table=void 0;var w=g(796),m=g(172),v=g(420),p=(function(){function x(j,y){this.pageNumber=1,this.pageCount=1,this.id=j.id,this.settings=j.settings,this.styles=j.styles,this.hooks=j.hooks,this.columns=y.columns,this.head=y.head,this.body=y.body,this.foot=y.foot}return x.prototype.getHeadHeight=function(j){return this.head.reduce(function(y,C){return y+C.getMaxCellHeight(j)},0)},x.prototype.getFootHeight=function(j){return this.foot.reduce(function(y,C){return y+C.getMaxCellHeight(j)},0)},x.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},x.prototype.callCellHooks=function(j,y,C,R,B,_){for(var M=0,H=y;M<H.length;M++){var K=H[M],S=new m.CellHookData(j,this,C,R,B,_),N=K(S)===!1;if(C.text=Array.isArray(C.text)?C.text:[C.text],N)return!1}return!0},x.prototype.callEndPageHooks=function(j,y){j.applyStyles(j.userStyles);for(var C=0,R=this.hooks.didDrawPage;C<R.length;C++){var B=R[C];B(new m.HookData(j,this,y))}},x.prototype.callWillDrawPageHooks=function(j,y){for(var C=0,R=this.hooks.willDrawPage;C<R.length;C++){var B=R[C];B(new m.HookData(j,this,y))}},x.prototype.getWidth=function(j){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var y=this.columns.reduce(function(R,B){return R+B.wrappedWidth},0);return y}else{var C=this.settings.margin;return j-C.left-C.right}},x})();d.Table=p;var L=(function(){function x(j,y,C,R,B){B===void 0&&(B=!1),this.height=0,this.raw=j,j instanceof w.HtmlRowInput&&(this.raw=j._element,this.element=j._element),this.index=y,this.section=C,this.cells=R,this.spansMultiplePages=B}return x.prototype.getMaxCellHeight=function(j){var y=this;return j.reduce(function(C,R){var B;return Math.max(C,((B=y.cells[R.index])===null||B===void 0?void 0:B.height)||0)},0)},x.prototype.hasRowSpan=function(j){var y=this;return j.filter(function(C){var R=y.cells[C.index];return R?R.rowSpan>1:!1}).length>0},x.prototype.canEntireRowFit=function(j,y){return this.getMaxCellHeight(y)<=j},x.prototype.getMinimumRowHeight=function(j,y){var C=this;return j.reduce(function(R,B){var _=C.cells[B.index];if(!_)return 0;var M=y.getLineHeight(_.styles.fontSize),H=_.padding("vertical"),K=H+M;return K>R?K:R},0)},x})();d.Row=L;var P=(function(){function x(j,y,C){var R,B;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=y,this.section=C,this.raw=j;var _=j;j!=null&&typeof j=="object"&&!Array.isArray(j)?(this.rowSpan=j.rowSpan||1,this.colSpan=j.colSpan||1,_=(B=(R=j.content)!==null&&R!==void 0?R:j.title)!==null&&B!==void 0?B:j,j._element&&(this.raw=j._element)):(this.rowSpan=1,this.colSpan=1);var M=_!=null?""+_:"",H=/\r\n|\r|\n/g;this.text=M.split(H)}return x.prototype.getTextPos=function(){var j;if(this.styles.valign==="top")j=this.y+this.padding("top");else if(this.styles.valign==="bottom")j=this.y+this.height-this.padding("bottom");else{var y=this.height-this.padding("vertical");j=this.y+y/2+this.padding("top")}var C;if(this.styles.halign==="right")C=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var R=this.width-this.padding("horizontal");C=this.x+R/2+this.padding("left")}else C=this.x+this.padding("left");return{x:C,y:j}},x.prototype.getContentHeight=function(j,y){y===void 0&&(y=1.15);var C=Array.isArray(this.text)?this.text.length:1,R=this.styles.fontSize/j*y,B=C*R+this.padding("vertical");return Math.max(B,this.styles.minCellHeight)},x.prototype.padding=function(j){var y=(0,v.parseSpacing)(this.styles.cellPadding,0);return j==="vertical"?y.top+y.bottom:j==="horizontal"?y.left+y.right:y[j]},x})();d.Cell=P;var A=(function(){function x(j,y,C){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=j,this.raw=y,this.index=C}return x.prototype.getMaxCustomCellWidth=function(j){for(var y=0,C=0,R=j.allRows();C<R.length;C++){var B=R[C],_=B.cells[this.index];_&&typeof _.styles.cellWidth=="number"&&(y=Math.max(y,_.styles.cellWidth))}return y},x})();d.Column=A}),356:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.assign=void 0;function g(w,m,v,p,L){if(w==null)throw new TypeError("Cannot convert undefined or null to object");for(var P=Object(w),A=1;A<arguments.length;A++){var x=arguments[A];if(x!=null)for(var j in x)Object.prototype.hasOwnProperty.call(x,j)&&(P[j]=x[j])}return P}d.assign=g}),972:(function(c,d,g){Object.defineProperty(d,"__esModule",{value:!0}),d.createTable=void 0;var w=g(744),m=g(260),v=g(324),p=g(796),L=g(356);function P(B,_){var M=new w.DocHandler(B),H=A(_,M.scaleFactor()),K=new m.Table(_,H);return(0,v.calculateWidths)(M,K),M.applyStyles(M.userStyles),K}d.createTable=P;function A(B,_){var M=B.content,H=C(M.columns);if(M.head.length===0){var K=j(H,"head");K&&M.head.push(K)}if(M.foot.length===0){var K=j(H,"foot");K&&M.foot.push(K)}var S=B.settings.theme,N=B.styles;return{columns:H,head:x("head",M.head,H,N,S,_),body:x("body",M.body,H,N,S,_),foot:x("foot",M.foot,H,N,S,_)}}function x(B,_,M,H,K,S){var N={},U=_.map(function($,ee){for(var E=0,T={},G=0,V=0,re=0,se=M;re<se.length;re++){var k=se[re];if(N[k.index]==null||N[k.index].left===0)if(V===0){var z=void 0;Array.isArray($)?z=$[k.index-G-E]:z=$[k.dataKey];var Y={};typeof z=="object"&&!Array.isArray(z)&&(Y=(z==null?void 0:z.styles)||{});var J=R(B,k,ee,K,H,S,Y),Z=new m.Cell(z,J,B);T[k.dataKey]=Z,T[k.index]=Z,V=Z.colSpan-1,N[k.index]={left:Z.rowSpan-1,times:V}}else V--,G++;else N[k.index].left--,V=N[k.index].times,E++}return new m.Row($,ee,B,T)});return U}function j(B,_){var M={};return B.forEach(function(H){if(H.raw!=null){var K=y(_,H.raw);K!=null&&(M[H.dataKey]=K)}}),Object.keys(M).length>0?M:null}function y(B,_){if(B==="head"){if(typeof _=="object")return _.header||_.title||null;if(typeof _=="string"||typeof _=="number")return _}else if(B==="foot"&&typeof _=="object")return _.footer;return null}function C(B){return B.map(function(_,M){var H,K,S;return typeof _=="object"?S=(K=(H=_.dataKey)!==null&&H!==void 0?H:_.key)!==null&&K!==void 0?K:M:S=M,new m.Column(S,_,M)})}function R(B,_,M,H,K,S,N){var U=(0,p.getTheme)(H),$;B==="head"?$=K.headStyles:B==="body"?$=K.bodyStyles:B==="foot"&&($=K.footStyles);var ee=(0,L.assign)({},U.table,U[B],K.styles,$),E=K.columnStyles[_.dataKey]||K.columnStyles[_.index]||{},T=B==="body"?E:{},G=B==="body"&&M%2===0?(0,L.assign)({},U.alternateRow,K.alternateRowStyles):{},V=(0,p.defaultStyles)(S),re=(0,L.assign)({},V,ee,G,T);return(0,L.assign)(re,N)}}),664:(function(c,d,g){Object.defineProperty(d,"__esModule",{value:!0}),d.addPage=d.drawTable=void 0;var w=g(420),m=g(260),v=g(744),p=g(356),L=g(136),P=g(224);function A(E,T){var G=T.settings,V=G.startY,re=G.margin,se={x:re.left,y:V},k=T.getHeadHeight(T.columns)+T.getFootHeight(T.columns),z=V+re.bottom+k;if(G.pageBreak==="avoid"){var Y=T.body,J=Y.reduce(function(ce,de){return ce+de.height},0);z+=J}var Z=new v.DocHandler(E);(G.pageBreak==="always"||G.startY!=null&&z>Z.pageSize().height)&&(ee(Z),se.y=re.top),T.callWillDrawPageHooks(Z,se);var le=(0,p.assign)({},se);T.startPageNumber=Z.pageNumber(),G.horizontalPageBreak?x(Z,T,le,se):(Z.applyStyles(Z.userStyles),(G.showHead==="firstPage"||G.showHead==="everyPage")&&T.head.forEach(function(ce){return K(Z,T,ce,se,T.columns)}),Z.applyStyles(Z.userStyles),T.body.forEach(function(ce,de){var Ne=de===T.body.length-1;H(Z,T,ce,Ne,le,se,T.columns)}),Z.applyStyles(Z.userStyles),(G.showFoot==="lastPage"||G.showFoot==="everyPage")&&T.foot.forEach(function(ce){return K(Z,T,ce,se,T.columns)})),(0,w.addTableBorder)(Z,T,le,se),T.callEndPageHooks(Z,se),T.finalY=se.y,E.lastAutoTable=T,E.previousAutoTable=T,E.autoTable&&(E.autoTable.previous=T),Z.applyStyles(Z.userStyles)}d.drawTable=A;function x(E,T,G,V){var re=(0,P.calculateAllColumnsCanFitInPage)(E,T),se=T.settings;if(se.horizontalPageBreakBehaviour==="afterAllRows")re.forEach(function(J,Z){E.applyStyles(E.userStyles),Z>0?$(E,T,G,V,J.columns,!0):j(E,T,V,J.columns),y(E,T,G,V,J.columns),R(E,T,V,J.columns)});else for(var k=-1,z=re[0],Y=function(){var J=k;if(z){E.applyStyles(E.userStyles);var Z=z.columns;k>=0?$(E,T,G,V,Z,!0):j(E,T,V,Z),J=C(E,T,k+1,V,Z),R(E,T,V,Z)}var le=J-k;re.slice(1).forEach(function(ce){E.applyStyles(E.userStyles),$(E,T,G,V,ce.columns,!0),C(E,T,k+1,V,ce.columns,le),R(E,T,V,ce.columns)}),k=J};k<T.body.length-1;)Y()}function j(E,T,G,V){var re=T.settings;E.applyStyles(E.userStyles),(re.showHead==="firstPage"||re.showHead==="everyPage")&&T.head.forEach(function(se){return K(E,T,se,G,V)})}function y(E,T,G,V,re){E.applyStyles(E.userStyles),T.body.forEach(function(se,k){var z=k===T.body.length-1;H(E,T,se,z,G,V,re)})}function C(E,T,G,V,re,se){E.applyStyles(E.userStyles),se=se??T.body.length;var k=Math.min(G+se,T.body.length),z=-1;return T.body.slice(G,k).forEach(function(Y,J){var Z=G+J===T.body.length-1,le=U(E,T,Z,V);Y.canEntireRowFit(le,re)&&(K(E,T,Y,V,re),z=G+J)}),z}function R(E,T,G,V){var re=T.settings;E.applyStyles(E.userStyles),(re.showFoot==="lastPage"||re.showFoot==="everyPage")&&T.foot.forEach(function(se){return K(E,T,se,G,V)})}function B(E,T,G){var V=G.getLineHeight(E.styles.fontSize),re=E.padding("vertical"),se=Math.floor((T-re)/V);return Math.max(0,se)}function _(E,T,G,V){var re={};E.spansMultiplePages=!0,E.height=0;for(var se=0,k=0,z=G.columns;k<z.length;k++){var Y=z[k],J=E.cells[Y.index];if(J){Array.isArray(J.text)||(J.text=[J.text]);var Z=new m.Cell(J.raw,J.styles,J.section);Z=(0,p.assign)(Z,J),Z.text=[];var le=B(J,T,V);J.text.length>le&&(Z.text=J.text.splice(le,J.text.length));var ce=V.scaleFactor(),de=V.getLineHeightFactor();J.contentHeight=J.getContentHeight(ce,de),J.contentHeight>=T&&(J.contentHeight=T,Z.styles.minCellHeight-=T),J.contentHeight>E.height&&(E.height=J.contentHeight),Z.contentHeight=Z.getContentHeight(ce,de),Z.contentHeight>se&&(se=Z.contentHeight),re[Y.index]=Z}}var Ne=new m.Row(E.raw,-1,E.section,re,!0);Ne.height=se;for(var Se=0,Ae=G.columns;Se<Ae.length;Se++){var Y=Ae[Se],Z=Ne.cells[Y.index];Z&&(Z.height=Ne.height);var J=E.cells[Y.index];J&&(J.height=E.height)}return Ne}function M(E,T,G,V){var re=E.pageSize().height,se=V.settings.margin,k=se.top+se.bottom,z=re-k;T.section==="body"&&(z-=V.getHeadHeight(V.columns)+V.getFootHeight(V.columns));var Y=T.getMinimumRowHeight(V.columns,E),J=Y<G;if(Y>z)return console.error("Will not be able to print row ".concat(T.index," correctly since it's minimum height is larger than page height")),!0;if(!J)return!1;var Z=T.hasRowSpan(V.columns),le=T.getMaxCellHeight(V.columns)>z;return le?(Z&&console.error("The content of row ".concat(T.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(Z||V.settings.rowPageBreak==="avoid")}function H(E,T,G,V,re,se,k){var z=U(E,T,V,se);if(G.canEntireRowFit(z,k))K(E,T,G,se,k);else if(M(E,G,z,T)){var Y=_(G,z,T,E);K(E,T,G,se,k),$(E,T,re,se,k),H(E,T,Y,V,re,se,k)}else $(E,T,re,se,k),H(E,T,G,V,re,se,k)}function K(E,T,G,V,re){V.x=T.settings.margin.left;for(var se=0,k=re;se<k.length;se++){var z=k[se],Y=G.cells[z.index];if(!Y){V.x+=z.width;continue}E.applyStyles(Y.styles),Y.x=V.x,Y.y=V.y;var J=T.callCellHooks(E,T.hooks.willDrawCell,Y,G,z,V);if(J===!1){V.x+=z.width;continue}S(E,Y,V);var Z=Y.getTextPos();(0,L.default)(Y.text,Z.x,Z.y,{halign:Y.styles.halign,valign:Y.styles.valign,maxWidth:Math.ceil(Y.width-Y.padding("left")-Y.padding("right"))},E.getDocument()),T.callCellHooks(E,T.hooks.didDrawCell,Y,G,z,V),V.x+=z.width}V.y+=G.height}function S(E,T,G){var V=T.styles;if(E.getDocument().setFillColor(E.getDocument().getFillColor()),typeof V.lineWidth=="number"){var re=(0,w.getFillStyle)(V.lineWidth,V.fillColor);re&&E.rect(T.x,G.y,T.width,T.height,re)}else typeof V.lineWidth=="object"&&(V.fillColor&&E.rect(T.x,G.y,T.width,T.height,"F"),N(E,T,G,V.lineWidth))}function N(E,T,G,V){var re,se,k,z;V.top&&(re=G.x,se=G.y,k=G.x+T.width,z=G.y,V.right&&(k+=.5*V.right),V.left&&(re-=.5*V.left),Y(V.top,re,se,k,z)),V.bottom&&(re=G.x,se=G.y+T.height,k=G.x+T.width,z=G.y+T.height,V.right&&(k+=.5*V.right),V.left&&(re-=.5*V.left),Y(V.bottom,re,se,k,z)),V.left&&(re=G.x,se=G.y,k=G.x,z=G.y+T.height,V.top&&(se-=.5*V.top),V.bottom&&(z+=.5*V.bottom),Y(V.left,re,se,k,z)),V.right&&(re=G.x+T.width,se=G.y,k=G.x+T.width,z=G.y+T.height,V.top&&(se-=.5*V.top),V.bottom&&(z+=.5*V.bottom),Y(V.right,re,se,k,z));function Y(J,Z,le,ce,de){E.getDocument().setLineWidth(J),E.getDocument().line(Z,le,ce,de,"S")}}function U(E,T,G,V){var re=T.settings.margin.bottom,se=T.settings.showFoot;return(se==="everyPage"||se==="lastPage"&&G)&&(re+=T.getFootHeight(T.columns)),E.pageSize().height-V.y-re}function $(E,T,G,V,re,se){re===void 0&&(re=[]),se===void 0&&(se=!1),E.applyStyles(E.userStyles),T.settings.showFoot==="everyPage"&&!se&&T.foot.forEach(function(z){return K(E,T,z,V,re)}),T.callEndPageHooks(E,V);var k=T.settings.margin;(0,w.addTableBorder)(E,T,G,V),ee(E),T.pageNumber++,T.pageCount++,V.x=k.left,V.y=k.top,G.y=k.top,T.callWillDrawPageHooks(E,V),T.settings.showHead==="everyPage"&&(T.head.forEach(function(z){return K(E,T,z,V,re)}),E.applyStyles(E.userStyles))}d.addPage=$;function ee(E){var T=E.pageNumber();E.setPage(T+1);var G=E.pageNumber();return G===T?(E.addPage(),!0):!1}}),224:(function(c,d,g){Object.defineProperty(d,"__esModule",{value:!0}),d.calculateAllColumnsCanFitInPage=void 0;var w=g(420);function m(p,L,P){var A;P===void 0&&(P={});var x=(0,w.getPageAvailableWidth)(p,L),j=new Map,y=[],C=[],R=[];L.settings.horizontalPageBreakRepeat,Array.isArray(L.settings.horizontalPageBreakRepeat)?R=L.settings.horizontalPageBreakRepeat:(typeof L.settings.horizontalPageBreakRepeat=="string"||typeof L.settings.horizontalPageBreakRepeat=="number")&&(R=[L.settings.horizontalPageBreakRepeat]),R.forEach(function(H){var K=L.columns.find(function(S){return S.dataKey===H||S.index===H});K&&!j.has(K.index)&&(j.set(K.index,!0),y.push(K.index),C.push(L.columns[K.index]),x-=K.wrappedWidth)});for(var B=!0,_=(A=P==null?void 0:P.start)!==null&&A!==void 0?A:0;_<L.columns.length;){if(j.has(_)){_++;continue}var M=L.columns[_].wrappedWidth;if(B||x>=M)B=!1,y.push(_),C.push(L.columns[_]),x-=M;else break;_++}return{colIndexes:y,columns:C,lastIndex:_-1}}function v(p,L){for(var P=[],A=0;A<L.columns.length;A++){var x=m(p,L,{start:A});x.columns.length&&(P.push(x),A=x.lastIndex)}return P}d.calculateAllColumnsCanFitInPage=v}),324:(function(c,d,g){Object.defineProperty(d,"__esModule",{value:!0}),d.ellipsize=d.resizeColumns=d.calculateWidths=void 0;var w=g(420);function m(y,C){v(y,C);var R=[],B=0;C.columns.forEach(function(M){var H=M.getMaxCustomCellWidth(C);H?M.width=H:(M.width=M.wrappedWidth,R.push(M)),B+=M.width});var _=C.getWidth(y.pageSize().width)-B;_&&(_=p(R,_,function(M){return Math.max(M.minReadableWidth,M.minWidth)})),_&&(_=p(R,_,function(M){return M.minWidth})),_=Math.abs(_),!C.settings.horizontalPageBreak&&_>.1/y.scaleFactor()&&(_=_<1?_:Math.round(_),console.warn("Of the table content, ".concat(_," units width could not fit page"))),P(C),A(C,y),L(C)}d.calculateWidths=m;function v(y,C){var R=y.scaleFactor(),B=C.settings.horizontalPageBreak,_=(0,w.getPageAvailableWidth)(y,C);C.allRows().forEach(function(M){for(var H=0,K=C.columns;H<K.length;H++){var S=K[H],N=M.cells[S.index];if(N){var U=C.hooks.didParseCell;C.callCellHooks(y,U,N,M,S,null);var $=N.padding("horizontal");N.contentWidth=(0,w.getStringWidth)(N.text,N.styles,y)+$;var ee=(0,w.getStringWidth)(N.text.join(" ").split(/[^\S\u00A0]+/),N.styles,y);if(N.minReadableWidth=ee+N.padding("horizontal"),typeof N.styles.cellWidth=="number")N.minWidth=N.styles.cellWidth,N.wrappedWidth=N.styles.cellWidth;else if(N.styles.cellWidth==="wrap"||B===!0)N.contentWidth>_?(N.minWidth=_,N.wrappedWidth=_):(N.minWidth=N.contentWidth,N.wrappedWidth=N.contentWidth);else{var E=10/R;N.minWidth=N.styles.minCellWidth||E,N.wrappedWidth=N.contentWidth,N.minWidth>N.wrappedWidth&&(N.wrappedWidth=N.minWidth)}}}}),C.allRows().forEach(function(M){for(var H=0,K=C.columns;H<K.length;H++){var S=K[H],N=M.cells[S.index];if(N&&N.colSpan===1)S.wrappedWidth=Math.max(S.wrappedWidth,N.wrappedWidth),S.minWidth=Math.max(S.minWidth,N.minWidth),S.minReadableWidth=Math.max(S.minReadableWidth,N.minReadableWidth);else{var U=C.styles.columnStyles[S.dataKey]||C.styles.columnStyles[S.index]||{},$=U.cellWidth||U.minCellWidth;$&&typeof $=="number"&&(S.minWidth=$,S.wrappedWidth=$)}N&&(N.colSpan>1&&!S.minWidth&&(S.minWidth=N.minWidth),N.colSpan>1&&!S.wrappedWidth&&(S.wrappedWidth=N.minWidth))}})}function p(y,C,R){for(var B=C,_=y.reduce(function(E,T){return E+T.wrappedWidth},0),M=0;M<y.length;M++){var H=y[M],K=H.wrappedWidth/_,S=B*K,N=H.width+S,U=R(H),$=N<U?U:N;C-=$-H.width,H.width=$}if(C=Math.round(C*1e10)/1e10,C){var ee=y.filter(function(E){return C<0?E.width>R(E):!0});ee.length&&(C=p(ee,C,R))}return C}d.resizeColumns=p;function L(y){for(var C={},R=1,B=y.allRows(),_=0;_<B.length;_++)for(var M=B[_],H=0,K=y.columns;H<K.length;H++){var S=K[H],N=C[S.index];if(R>1)R--,delete M.cells[S.index];else if(N)N.cell.height+=M.height,R=N.cell.colSpan,delete M.cells[S.index],N.left--,N.left<=1&&delete C[S.index];else{var U=M.cells[S.index];if(!U)continue;if(U.height=M.height,U.rowSpan>1){var $=B.length-_,ee=U.rowSpan>$?$:U.rowSpan;C[S.index]={cell:U,left:ee,row:M}}}}}function P(y){for(var C=y.allRows(),R=0;R<C.length;R++)for(var B=C[R],_=null,M=0,H=0,K=0;K<y.columns.length;K++){var S=y.columns[K];if(H-=1,H>1&&y.columns[K+1])M+=S.width,delete B.cells[S.index];else if(_){var N=_;delete B.cells[S.index],_=null,N.width=S.width+M}else{var N=B.cells[S.index];if(!N)continue;if(H=N.colSpan,M=0,N.colSpan>1){_=N,M+=S.width;continue}N.width=S.width+M}}}function A(y,C){for(var R={count:0,height:0},B=0,_=y.allRows();B<_.length;B++){for(var M=_[B],H=0,K=y.columns;H<K.length;H++){var S=K[H],N=M.cells[S.index];if(N){C.applyStyles(N.styles,!0);var U=N.width-N.padding("horizontal");if(N.styles.overflow==="linebreak")N.text=C.splitTextToSize(N.text,U+1/C.scaleFactor(),{fontSize:N.styles.fontSize});else if(N.styles.overflow==="ellipsize")N.text=x(N.text,U,N.styles,C,"...");else if(N.styles.overflow==="hidden")N.text=x(N.text,U,N.styles,C,"");else if(typeof N.styles.overflow=="function"){var $=N.styles.overflow(N.text,U);typeof $=="string"?N.text=[$]:N.text=$}N.contentHeight=N.getContentHeight(C.scaleFactor(),C.getLineHeightFactor());var ee=N.contentHeight/N.rowSpan;N.rowSpan>1&&R.count*R.height<ee*N.rowSpan?R={height:ee,count:N.rowSpan}:R&&R.count>0&&R.height>ee&&(ee=R.height),ee>M.height&&(M.height=ee)}}R.count--}}function x(y,C,R,B,_){return y.map(function(M){return j(M,C,R,B,_)})}d.ellipsize=x;function j(y,C,R,B,_){var M=1e4*B.scaleFactor();if(C=Math.ceil(C*M)/M,C>=(0,w.getStringWidth)(y,R,B))return y;for(;C<(0,w.getStringWidth)(y+_,R,B)&&!(y.length<=1);)y=y.substring(0,y.length-1);return y.trim()+_}}),964:(function(c){if(typeof r>"u"){var d=new Error("Cannot find module 'undefined'");throw d.code="MODULE_NOT_FOUND",d}c.exports=r})},o={};function i(c){var d=o[c];if(d!==void 0)return d.exports;var g=o[c]={exports:{}};return a[c].call(g.exports,g,g.exports,i),g.exports}var h={};return(function(){var c=h;Object.defineProperty(c,"__esModule",{value:!0}),c.Cell=c.Column=c.Row=c.Table=c.CellHookData=c.__drawTable=c.__createTable=c.applyPlugin=void 0;var d=i(340),g=i(776),w=i(664),m=i(972),v=i(260);Object.defineProperty(c,"Table",{enumerable:!0,get:function(){return v.Table}});var p=i(172);Object.defineProperty(c,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var L=i(260);Object.defineProperty(c,"Cell",{enumerable:!0,get:function(){return L.Cell}}),Object.defineProperty(c,"Column",{enumerable:!0,get:function(){return L.Column}}),Object.defineProperty(c,"Row",{enumerable:!0,get:function(){return L.Row}});function P(C){(0,d.default)(C)}c.applyPlugin=P;function A(C,R){var B=(0,g.parseInput)(C,R),_=(0,m.createTable)(C,B);(0,w.drawTable)(C,_)}function x(C,R){var B=(0,g.parseInput)(C,R);return(0,m.createTable)(C,B)}c.__createTable=x;function j(C,R){(0,w.drawTable)(C,R)}c.__drawTable=j;try{var y=i(964);y.jsPDF&&(y=y.jsPDF),P(y)}catch{}c.default=A})(),h})()})})(js)),js.exports}Yu();const Ol=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Lh=({data:n,grandTotals:e,sortConfig:r,onToggleSort:a,showAllPages:o,setShowAllPages:i,onExportPDF:h,isExporting:c,onPreviewImage:d,onNavigate:g,onMonthClick:w})=>{const[m,v]=ve.useState(!0),[p,L]=ve.useState(!1),[P,A]=ve.useState(!0),[x,j]=ve.useState(!0),{rowSpans:y,displayRow:C}=ve.useMemo(()=>{const B=new Array(n.length).fill(0),_=new Array(n.length).fill(!0);let M=0;for(;M<n.length;){const H=n[M].teamName;let K=1;for(;M+K<n.length&&n[M+K].teamName===H;)K++;B[M]=K,_[M]=!0;for(let S=1;S<K;S++)B[M+S]=0,_[M+S]=!1;M+=K}return{rowSpans:B,displayRow:_}},[n]),R=(B,_)=>{const M=[{key:"index",label:"#"},{key:"teamName",label:"ក្រុម (Team)",sortable:!0,sortKey:"teamName"},{key:"logo",label:"Logo"},{key:"pageName",label:"ឈ្មោះ Page",sortable:!0,sortKey:"pageName"},{key:`total${B}`,label:`សរុប (${B})`,sortable:!0,sortKey:B.toLowerCase()},...Ol.map(H=>({key:`${_}_${H}`,label:H}))];return l.jsxs("div",{className:"hidden xl:flex page-card flex-col mb-8 !p-6 border-gray-700/50 shadow-xl overflow-hidden bg-gray-900/40",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h3",{className:`text-xl font-black flex items-center gap-2 ${B==="Revenue"?"text-blue-300":"text-green-400"}`,children:[l.jsx("span",{className:`w-2 h-6 rounded-full ${B==="Revenue"?"bg-blue-600":"bg-green-600"}`}),"តារាង",B==="Revenue"?"ចំណូល":"ប្រាក់ចំណេញ","តាម Page (Desktop)"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[B==="Revenue"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>i(!o),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${o?"bg-purple-600 border-purple-500 text-white shadow-lg shadow-purple-900/20":"bg-gray-800 border-gray-700 text-gray-400"}`,children:o?"ALL PAGES":"ACTIVE ONLY"}),l.jsxs("button",{onClick:h,disabled:c,className:"btn !py-1 !px-4 text-[10px] font-black bg-red-600/20 border border-red-500/30 text-red-400 hover:bg-red-600 hover:text-white transition-all flex items-center gap-2",children:[c?l.jsx(Rn,{size:"sm"}):l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"EXPORT PDF"]})]}),l.jsx("button",{onClick:()=>j(!x),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${x?"bg-indigo-600 border-indigo-500 text-white":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"MERGE"}),l.jsx("button",{onClick:()=>A(!P),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${P?"bg-orange-600 border-orange-500 text-white":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"COLOR"}),l.jsx("button",{onClick:()=>L(!p),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${p?"bg-blue-600 border-blue-500 text-white shadow-lg":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"FREEZE"}),l.jsx("button",{onClick:()=>v(!m),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${m?"bg-gray-700 border-gray-600 text-white shadow-lg":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"BORDER"})]})]}),l.jsx("div",{className:`overflow-x-auto custom-scrollbar pb-2 ${m?"border-2 border-white/20 rounded-2xl shadow-[0_0_40px_rgba(0,0,0,0.6)]":""}`,children:l.jsxs("table",{className:`report-table w-full border-separate border-spacing-0 text-sm ${m?"border-collapse":""}`,children:[l.jsx("thead",{className:"bg-[#0f172a] backdrop-blur-md",children:l.jsx("tr",{className:"border-b-2 border-white/20",children:M.map(H=>{let K="",S={};p&&(H.key==="index"?(K="sticky left-0 z-30 bg-[#0f172a]",S={width:"45px",minWidth:"45px"}):H.key==="teamName"?(K="sticky left-[45px] z-30 bg-[#0f172a] border-r border-white/20 shadow-md",S={minWidth:"130px"}):H.key==="logo"?(K="sticky z-30 bg-[#0f172a]",S={left:"175px",width:"50px",minWidth:"50px"}):H.key==="pageName"?(K="sticky z-30 bg-[#0f172a] shadow-md",S={left:"225px",minWidth:"160px"}):H.key.includes("total")&&(K="sticky z-30 bg-[#0f172a] border-r border-white/20 shadow-lg",S={left:"385px",width:"100px",minWidth:"100px"}));const N=H.key.includes("total")?B==="Revenue"?"bg-blue-900/80":"bg-green-900/80":"";return l.jsx("th",{onClick:()=>H.sortable&&a(H.sortKey),className:`px-4 py-5 whitespace-nowrap text-left font-black uppercase tracking-wider border-b-2 border-white/20 ${m?"border-x border-white/10":""} ${K} ${N} ${H.sortable?"cursor-pointer hover:bg-gray-700":""}`,style:S,children:l.jsxs("div",{className:"flex items-center gap-1",children:[H.label," ",H.sortable&&r.key===H.sortKey&&l.jsx("span",{children:r.direction==="asc"?"↑":"↓"})]})},H.key)})})}),l.jsx("tbody",{className:"divide-y divide-white/10",children:n.map((H,K)=>{const S=x?C[K]:!0,N=x?y[K]:1,U=Array.from(String(H.teamName)).reduce((T,G)=>T+G.charCodeAt(0),0)%5,ee=[{bg:"bg-blue-500/5",border:"border-l-4 border-l-blue-500"},{bg:"bg-purple-500/5",border:"border-l-4 border-l-purple-500"},{bg:"bg-emerald-500/5",border:"border-l-4 border-l-emerald-500"},{bg:"bg-orange-500/5",border:"border-l-4 border-l-orange-500"},{bg:"bg-pink-500/5",border:"border-l-4 border-l-pink-500"}][U],E=P?ee.bg:"hover:bg-blue-500/5";return l.jsx("tr",{className:`${E} transition-colors group border-b border-white/10`,children:M.map(T=>{const G=`px-4 py-4 lg:py-5 whitespace-nowrap border-white/10 ${m?"border-x border-white/10":""}`;let V="",re={};if(p&&(T.key==="index"?(V="sticky left-0 z-10 bg-[#020617]",re={width:"45px",minWidth:"45px"}):T.key==="teamName"?(V="sticky left-[45px] z-10 bg-[#020617] border-r border-white/20 shadow-md",re={width:"130px",minWidth:"130px"}):T.key==="logo"?(V="sticky z-10 bg-[#020617]",re={left:"175px",width:"50px",minWidth:"50px"}):T.key==="pageName"?(V="sticky z-10 bg-[#020617] shadow-md",re={left:"225px",minWidth:"160px"}):T.key.includes("total")&&(V="sticky z-10 bg-[#020617] border-r border-white/20 shadow-lg",re={left:"385px",width:"100px",minWidth:"100px"})),T.key==="index")return l.jsx("td",{className:`${G} text-center font-bold text-gray-500 ${V}`,style:re,children:K+1},T.key);if(T.key==="teamName")return S?l.jsx("td",{rowSpan:N,className:`${G} font-black text-white bg-gray-900/95 align-middle text-center ${V} ${P?ee.border:""} border-b border-white/10 cursor-pointer hover:text-blue-400`,style:re,onClick:()=>g("team",H.teamName),children:l.jsx("div",{className:"bg-gray-800/80 py-1 px-3 rounded-xl border border-white/5 shadow-sm inline-block",children:H.teamName})},T.key):null;if(T.key==="logo")return l.jsx("td",{className:`${G} text-center ${V} border-b border-white/10`,style:re,children:l.jsx("img",{src:st(H.logoUrl),className:"w-9 h-9 rounded-full border border-gray-700 mx-auto shadow-md cursor-pointer hover:scale-110 transition-transform",alt:"logo",onClick:()=>d(st(H.logoUrl))})},T.key);if(T.key==="pageName")return l.jsx("td",{className:`${G} font-black text-white ${V} border-b border-white/10 cursor-pointer hover:text-blue-400 hover:underline transition-colors`,style:re,onClick:()=>g("page",H.pageName),children:H.pageName},T.key);if(T.key.includes("total"))return l.jsxs("td",{className:`${G} text-right font-black ${V} ${B==="Revenue"?"text-blue-100 bg-blue-600/10 hover:text-blue-300":"text-green-100 bg-green-600/10"} border-b border-white/10 cursor-pointer`,style:re,onClick:()=>g("page",H.pageName),children:["$",(B==="Revenue"?H.revenue:H.profit).toLocaleString(void 0,{minimumFractionDigits:2})]},T.key);if(T.key.startsWith(_)){const se=H[T.key]||0,k=B==="Profit"?se>0?"text-green-400":se<0?"text-red-400":"text-gray-500":se>0?"text-blue-300":"text-gray-500",z=Ol.indexOf(T.key.split("_")[1]);return l.jsx("td",{className:`${G} text-right font-bold font-mono ${k} border-b border-white/10 cursor-pointer hover:bg-gray-800 transition-colors`,onClick:()=>w(H.pageName,z),children:se!==0?`$${se.toLocaleString(void 0,{minimumFractionDigits:2})}`:"-"},T.key)}return l.jsx("td",{className:`${G} border-b border-white/10`,children:"-"},T.key)})},H.pageName)})}),l.jsx("tfoot",{className:"bg-[#0f172a] font-black border-t-2 border-white/20",children:l.jsx("tr",{className:"border-t-2 border-white/20",children:M.map((H,K)=>{const S=`px-4 py-5 whitespace-nowrap border-t-2 border-white/20 ${m?"border-x border-white/10":""}`;let N="",U={};return p&&(H.key==="index"?(N="sticky left-0 z-30 bg-[#0f172a]",U={width:"45px",minWidth:"45px"}):H.key==="teamName"?(N="sticky left-[45px] z-30 bg-[#0f172a] border-r border-white/20 shadow-md",U={minWidth:"130px"}):H.key==="logo"?(N="sticky z-30 bg-[#0f172a]",U={left:"175px",width:"50px",minWidth:"50px"}):H.key==="pageName"?(N="sticky z-30 bg-[#0f172a] shadow-md",U={left:"225px",minWidth:"160px"}):H.key.includes("total")&&(N="sticky z-30 bg-[#0f172a] border-r border-white/20 shadow-lg",U={left:"385px",width:"100px",minWidth:"100px"})),K===0?l.jsx("td",{className:`${S} uppercase tracking-widest text-white font-black ${N}`,style:U,colSpan:4,children:"សរុបរួម (GRAND TOTAL)"},H.key):["teamName","logo","pageName"].includes(H.key)?null:H.key.includes("total")?l.jsxs("td",{className:`${S} text-right ${N} ${B==="Revenue"?"text-blue-300 bg-blue-600/10":"text-green-300 bg-green-600/10"}`,style:U,children:["$",(B==="Revenue"?e.revenue:e.profit).toLocaleString(void 0,{minimumFractionDigits:2})]},H.key):H.key.startsWith(_)?l.jsxs("td",{className:`${S} text-right text-gray-300 font-mono`,children:["$",e[H.key].toLocaleString(void 0,{minimumFractionDigits:2})]},H.key):l.jsx("td",{className:S},H.key)})})})]})})]})};return l.jsxs(l.Fragment,{children:[R("Revenue","rev"),R("Profit","prof")]})},Ju=({data:n,dataType:e,rowSpans:r,displayRow:a,MONTHS:o,grandTotals:i,onNavigate:h,onPreviewImage:c,onMonthClick:d})=>l.jsx("div",{className:"bg-[#0f172a] border border-white/10 rounded-[2.5rem] overflow-hidden shadow-2xl animate-fade-in flex flex-col w-full relative",children:l.jsx("div",{className:"overflow-x-auto custom-scrollbar w-full relative",children:l.jsxs("table",{className:"w-max min-w-full text-sm border-separate border-spacing-0",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"h-16 bg-[#0f172a]",children:[l.jsx("th",{className:"sticky left-0 z-30 bg-[#0f172a] px-2 text-center text-gray-500 font-black border-b border-white/10 w-[50px] min-w-[50px] border-r border-white/5",children:"#"}),l.jsx("th",{className:"sticky left-[50px] z-30 bg-[#0f172a] px-4 text-left text-white font-black uppercase tracking-wider border-b border-white/10 w-[110px] min-w-[110px] border-r border-white/5",children:"Team"}),l.jsx("th",{className:"sticky left-[160px] z-30 bg-[#0f172a] px-4 text-left text-white font-black uppercase tracking-wider border-b border-white/10 w-[200px] min-w-[200px] shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] border-r border-white/5",children:"Page Name"}),l.jsxs("th",{className:`px-6 text-right font-black uppercase tracking-wider border-b border-white/10 ${e==="revenue"?"text-blue-300 bg-blue-900/10":"text-green-300 bg-green-900/10"} min-w-[140px]`,children:["Total ",e==="revenue"?"Rev":"Prof"]}),o.map(g=>l.jsx("th",{className:"px-4 text-right text-gray-400 font-bold uppercase border-b border-white/10 min-w-[90px]",children:g},g))]})}),l.jsx("tbody",{className:"divide-y divide-white/5",children:n.map((g,w)=>{const m=Array.from(String(g.teamName)).reduce((A,x)=>A+x.charCodeAt(0),0)%5,p=["bg-blue-500/[0.02]","bg-purple-500/[0.02]","bg-emerald-500/[0.02]","bg-orange-500/[0.02]","bg-pink-500/[0.02]"][m],L="bg-[#111827]",P=e==="revenue"?"rev":"prof";return l.jsxs("tr",{className:`${p} hover:bg-white/5 transition-colors h-16 group`,children:[l.jsx("td",{className:`sticky left-0 z-20 ${L} border-r border-white/5 border-b border-white/5 text-center font-bold text-gray-600`,children:w+1}),a[w]?l.jsx("td",{rowSpan:r[w],className:`sticky left-[50px] z-20 ${L} border-r border-white/5 border-b border-white/5 align-middle px-4 cursor-pointer hover:bg-gray-800`,onClick:()=>h("team",g.teamName),children:l.jsx("div",{className:"font-black text-white bg-gray-800 border border-white/10 px-2.5 py-1.5 rounded-xl inline-block shadow-sm text-[10px] tracking-wide truncate max-w-[90px]",children:g.teamName})}):null,l.jsx("td",{className:`sticky left-[160px] z-20 ${L} border-r border-white/5 border-b border-white/5 shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] px-4 cursor-pointer hover:bg-gray-800`,onClick:()=>h("page",g.pageName),children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg p-0.5 bg-gray-800 border border-white/10 flex-shrink-0",onClick:A=>{A.stopPropagation(),c(st(g.logoUrl))},children:l.jsx("img",{src:st(g.logoUrl),className:"w-full h-full rounded-md object-cover",alt:""})}),l.jsx("span",{className:"truncate max-w-[140px] text-xs font-bold text-gray-200 group-hover:text-blue-300 transition-colors",title:g.pageName,children:g.pageName})]})}),l.jsxs("td",{className:`px-6 text-right font-black ${e==="revenue"?"text-blue-400 bg-blue-900/5 group-hover:bg-blue-900/20":"text-emerald-400 bg-emerald-900/5 group-hover:bg-emerald-900/20"} border-r border-white/5 border-b border-white/5 text-sm cursor-pointer`,onClick:()=>h("page",g.pageName),children:["$",(e==="revenue"?g.revenue:g.profit).toLocaleString()]}),o.map((A,x)=>{const j=g[`${P}_${A}`]||0;return l.jsx("td",{className:`px-4 text-right font-mono text-xs border-b border-white/5 cursor-pointer hover:bg-gray-800 transition-colors ${j>0?"text-gray-300 font-bold":"text-gray-700"}`,onClick:()=>d(g.pageName,x),children:j!==0?j.toLocaleString():"-"},A)})]},g.pageName)})}),i&&l.jsx("tfoot",{className:"bg-[#0f172a] font-black border-t-2 border-white/20",children:l.jsxs("tr",{className:"h-16",children:[l.jsx("td",{className:"sticky left-0 bg-[#0f172a] z-30 border-r border-white/5 border-b border-white/5"}),l.jsx("td",{className:"sticky left-[50px] bg-[#0f172a] z-30 border-r border-white/5 border-b border-white/5"}),l.jsx("td",{className:"sticky left-[160px] bg-[#0f172a] z-30 px-4 text-right uppercase tracking-widest text-white shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] border-r border-white/5 border-b border-white/5 text-xs flex items-center justify-end h-16",children:"Grand Total"}),l.jsxs("td",{className:`px-6 text-right ${e==="revenue"?"text-blue-300":"text-green-300"} border-r border-white/5 border-b border-white/5 text-base bg-[#1e293b]`,children:["$",(e==="revenue"?i.revenue:i.profit).toLocaleString()]}),o.map(g=>{const m=i[`${e==="revenue"?"rev":"prof"}_${g}`]||0;return l.jsx("td",{className:"px-4 text-right text-gray-400 font-mono text-[10px] border-b border-white/5 bg-[#0f172a]",children:m!==0?m.toLocaleString():"-"},g)})]})})]})})}),Xu=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ah=({data:n,grandTotals:e,onPreviewImage:r,onNavigate:a,onMonthClick:o})=>{const[i,h]=ve.useState("table"),[c,d]=ve.useState("revenue"),{rowSpans:g,displayRow:w}=ve.useMemo(()=>{if(i!=="table")return{rowSpans:[],displayRow:[]};const m=new Array(n.length).fill(0),v=new Array(n.length).fill(!0);let p=0;for(;p<n.length;){const L=n[p].teamName;let P=1;for(;p+P<n.length&&n[p+P].teamName===L;)P++;m[p]=P,v[p]=!0;for(let A=1;A<P;A++)m[p+A]=0,v[p+A]=!1;p+=P}return{rowSpans:m,displayRow:v}},[n,i]);return l.jsxs("div",{className:"hidden md:block xl:hidden space-y-5 pb-12 px-1",children:[l.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl p-4 rounded-3xl border border-white/10 shadow-2xl flex flex-col sm:flex-row justify-between items-center gap-4 sticky top-20 z-40",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-900/30",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight",children:"Tablet Report"}),l.jsxs("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),n.length," Active Pages"]})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"bg-black/40 p-1.5 rounded-2xl border border-white/5 flex",children:[l.jsx("button",{onClick:()=>d("revenue"),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${c==="revenue"?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:"Revenue"}),l.jsx("button",{onClick:()=>d("profit"),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${c==="profit"?"bg-emerald-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:"Profit"})]}),l.jsxs("div",{className:"bg-black/40 p-1.5 rounded-2xl border border-white/5 flex",children:[l.jsx("button",{onClick:()=>h("table"),className:`p-2.5 rounded-xl transition-all ${i==="table"?"bg-gray-700 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),l.jsx("button",{onClick:()=>h("grid"),className:`p-2.5 rounded-xl transition-all ${i==="grid"?"bg-gray-700 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2z"})})})]})]})]}),i==="grid"?l.jsx("div",{className:"grid grid-cols-2 gap-5 animate-fade-in",children:n.map(m=>l.jsxs("div",{className:"bg-gray-800/40 border border-white/10 rounded-[2.5rem] p-6 shadow-xl flex flex-col relative overflow-hidden group hover:border-blue-500/30 transition-all cursor-pointer",onClick:()=>a("page",m.pageName),children:[l.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-white/5 to-transparent rounded-bl-[100px] pointer-events-none transition-opacity group-hover:opacity-100 opacity-50"}),l.jsxs("div",{className:"flex items-center gap-5 mb-5 relative z-10",children:[l.jsx("div",{className:"w-14 h-14 rounded-2xl overflow-hidden border-2 border-gray-700 bg-gray-950 p-0.5 flex-shrink-0 shadow-2xl group-hover:scale-105 transition-transform",onClick:v=>{v.stopPropagation(),r(st(m.logoUrl))},children:l.jsx("img",{src:st(m.logoUrl),className:"w-full h-full object-cover rounded-xl",alt:""})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h4",{className:"text-base font-black text-white truncate leading-tight uppercase tracking-tight group-hover:text-blue-300 transition-colors",children:m.pageName}),l.jsx("span",{className:"text-[10px] bg-blue-900/30 text-blue-300 px-3 py-1 rounded-full border border-blue-500/20 font-black uppercase mt-1.5 inline-block tracking-widest",children:m.teamName})]})]}),l.jsxs("div",{className:"space-y-3 flex-grow relative z-10",children:[l.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-2xl border border-white/5 group-hover:bg-blue-600/10 transition-colors",children:[l.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Revenue"}),l.jsxs("span",{className:"text-base font-black text-blue-400 tracking-tight",children:["$",m.revenue.toLocaleString()]})]}),l.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-2xl border border-white/5",children:[l.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Profit"}),l.jsxs("span",{className:"text-base font-black text-emerald-400 tracking-tight",children:["$",m.profit.toLocaleString()]})]})]})]},m.pageName))}):l.jsx(Ju,{data:n,dataType:c,rowSpans:g,displayRow:w,MONTHS:Xu,grandTotals:e,onNavigate:a,onPreviewImage:r,onMonthClick:o})]})},Ph=({data:n,onPreviewImage:e})=>l.jsxs("div",{className:"md:hidden space-y-4 pb-12 px-1",children:[l.jsxs("h3",{className:"text-lg font-black text-white px-2 flex items-center gap-2 mb-4",children:[l.jsx("span",{className:"w-1.5 h-5 bg-indigo-500 rounded-full"}),"របាយការណ៍តាម Page (Mobile)"]}),n.map(r=>{const a=r.orderCount>0?r.revenue/r.orderCount:0;return l.jsxs("div",{className:"bg-gray-800/40 border border-white/10 rounded-[2.5rem] p-6 shadow-xl space-y-5 animate-fade-in-up group relative overflow-hidden",children:[l.jsx("div",{className:"flex justify-between items-center border-b border-white/5 pb-4",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden border border-gray-700 bg-gray-950 shadow-inner p-0.5",children:l.jsx("img",{src:st(r.logoUrl),className:"w-full h-full object-cover rounded-lg",alt:"",onClick:()=>e(st(r.logoUrl))})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h4",{className:"text-base font-black text-white truncate leading-tight uppercase tracking-tight",children:r.pageName}),l.jsx("p",{className:"text-[10px] text-indigo-400 font-black uppercase tracking-[0.2em] mt-1",children:r.teamName})]})]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl border border-white/5",children:[l.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1.5",children:"ចំណូលសរុប"}),l.jsxs("p",{className:"text-lg font-black text-blue-400 tracking-tighter",children:["$",r.revenue.toLocaleString()]})]}),l.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl border border-white/5",children:[l.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1.5",children:"ប្រាក់ចំណេញ"}),l.jsxs("p",{className:"text-lg font-black text-emerald-400 tracking-tighter",children:["$",r.profit.toLocaleString()]})]})]}),l.jsxs("div",{className:"flex items-center justify-between px-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),l.jsxs("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:[r.orderCount," Orders"]})]}),l.jsxs("span",{className:"text-[10px] font-black text-purple-400 uppercase tracking-widest",children:["AOV: $",a.toFixed(0)]})]}),l.jsx("div",{className:"absolute -right-8 -bottom-8 w-24 h-24 bg-indigo-600/10 rounded-full blur-[40px] pointer-events-none group-hover:bg-indigo-600/20 transition-all duration-700"})]},r.pageName)})]}),Ku=({product:n,isOpen:e,onClose:r,onConfirm:a,showTagEditor:o=!0})=>{const{refreshData:i}=ve.useContext(za),[h,c]=ve.useState(""),[d,g]=ve.useState(window.innerWidth<768),[w,m]=ve.useState(!1),[v,p]=ve.useState(!1),[L,P]=ve.useState(!1),[A,x]=ve.useState(null),j=ve.useRef(null);ve.useEffect(()=>{const _=()=>g(window.innerWidth<768);return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),ve.useEffect(()=>{n&&e&&(c(n.Tags||""),x(n.ImageURL),p(!1))},[n,e]);const y=ve.useMemo(()=>{if(!n)return!1;const _=A||n.ImageURL;return _&&!_.includes("placehold.co")&&!_.includes("text=N/A")},[n,A]),C=_=>{if(_.key==="Enter"){_.preventDefault();const M=h.trim();M&&!M.endsWith(",")&&c(M+", ")}},R=async()=>{if(n){P(!0);try{const _=h.split(",").map(M=>M.trim()).filter(M=>M!=="").join(", ");if(_!==(n.Tags||"")){if(!(await fetch(`${qa}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:n.ProductName},newData:{Tags:_}})})).ok)throw new Error("Failed to update product tags");await i(),a(n.ProductName,_)}else a(n.ProductName,_)}catch(_){console.error(_),alert(`Save failed: ${_.message}`),a(n.ProductName,h)}finally{P(!1)}}},B=async _=>{var H;const M=(H=_.target.files)==null?void 0:H[0];if(!(!M||!n)){m(!0),p(!1);try{const K=await $c(M,.7,1024),S=await Vc(K),N=await fetch(`${qa}/api/upload-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileData:S,fileName:M.name,mimeType:K.type})}),U=await N.json();if(!N.ok||U.status!=="success")throw new Error(U.message);const $=U.url;await fetch(`${qa}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:n.ProductName},newData:{ImageURL:$}})}),x($),p(!0),setTimeout(()=>p(!1),2500),await i()}catch(K){alert(`Update Error: ${K.message}`)}finally{m(!1),j.current&&(j.current.value="")}}};return n?l.jsx(Rl,{isOpen:e,onClose:r,maxWidth:d?"max-w-[95vw]":"max-w-4xl",children:l.jsxs("div",{className:`
                bg-[#09090b] border border-white/10 overflow-hidden relative flex flex-col
                ${d?"h-[85vh] rounded-[2rem]":"h-[500px] rounded-[2rem] md:flex-row"}
                shadow-2xl transition-all duration-300
            `,children:[l.jsx("div",{className:`
                    relative group flex items-center justify-center bg-black/20
                    ${d?"h-[40%] w-full border-b border-white/5":"w-[40%] h-full border-r border-white/5"}
                `,children:l.jsxs("div",{className:"relative w-full h-full flex items-center justify-center cursor-pointer p-6",onClick:()=>{var _;return!w&&((_=j.current)==null?void 0:_.click())},children:[y?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:st(A||n.ImageURL),className:`
                                        w-full h-full object-contain relative z-10 transition-all duration-500 rounded-xl
                                        ${w?"opacity-30 grayscale blur-sm":"group-hover:scale-105"}
                                    `,alt:n.ProductName}),!w&&!v&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/40 backdrop-blur-[2px] z-20",children:l.jsxs("div",{className:"bg-white/10 px-3 py-1.5 rounded-full border border-white/20 backdrop-blur-md flex items-center gap-2",children:[l.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),l.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-wider",children:"Change"})]})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 text-gray-600 group-hover:text-blue-400 transition-colors",children:[l.jsx("div",{className:"p-4 rounded-full border-2 border-dashed border-gray-700 group-hover:border-blue-500/50 transition-all",children:l.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Upload Image"})]}),w&&l.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center",children:[l.jsx(Rn,{size:"md"}),l.jsx("span",{className:"text-[9px] font-bold text-gray-400 mt-2 uppercase tracking-wider",children:"Uploading..."})]}),v&&l.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center shadow-lg mb-2 animate-scale-in",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),l.jsx("span",{className:"text-[9px] font-bold text-emerald-400 uppercase tracking-widest",children:"Success"})]})]})}),l.jsxs("div",{className:`
                    flex flex-col p-6 md:p-10 relative
                    ${d?"h-[60%] justify-between":"w-[60%] h-full justify-center gap-8"}
                `,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"px-2 py-1 bg-white/5 rounded text-[10px] font-mono text-gray-400 border border-white/5",children:["#",n.Barcode||"NO-CODE"]}),l.jsxs("span",{className:"px-2 py-1 bg-emerald-500/10 text-emerald-400 rounded text-[10px] font-bold border border-emerald-500/20",children:["$",n.Price.toFixed(2)]})]}),l.jsx("h2",{className:`font-black text-white leading-tight ${d?"text-2xl line-clamp-2":"text-4xl line-clamp-3"}`,children:n.ProductName}),o&&l.jsxs("div",{className:"space-y-2 pt-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:"Operational Tags"}),l.jsxs("div",{className:"relative group",children:[l.jsx("input",{type:"text",value:h,onChange:_=>c(_.target.value),onKeyDown:C,className:"w-full bg-transparent border-b border-gray-700 py-2 text-sm font-medium text-gray-200 focus:border-blue-500 outline-none transition-colors placeholder:text-gray-700",placeholder:"Add tags..."}),l.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 text-[9px] font-bold text-gray-600 opacity-0 group-focus-within:opacity-100 transition-opacity",children:"ENTER"})]})]})]}),l.jsxs("div",{className:"flex gap-3 mt-4",children:[l.jsx("button",{onClick:r,className:"px-6 py-4 rounded-xl border border-white/10 text-gray-400 font-bold text-xs uppercase tracking-wider hover:bg-white/5 hover:text-white transition-all active:scale-95",children:"Cancel"}),l.jsxs("button",{onClick:R,disabled:L,className:"flex-1 px-6 py-4 rounded-xl bg-blue-600 text-white font-bold text-xs uppercase tracking-wider hover:bg-blue-500 transition-all active:scale-95 shadow-lg shadow-blue-900/20 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[L?l.jsx(Rn,{size:"sm"}):"Confirm Selection",!L&&l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:l.jsx("path",{d:"M5 12h14M12 5l7 7-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),l.jsx("input",{type:"file",ref:j,className:"hidden",accept:"image/*",onChange:B}),l.jsx("style",{children:`
                    @keyframes scale-in {
                        0% { transform: scale(0); opacity: 0; }
                        60% { transform: scale(1.1); opacity: 1; }
                        100% { transform: scale(1); }
                    }
                    .animate-scale-in { animation: scale-in 0.3s ease-out forwards; }
                `})]})}):null},Zu=(n,e)=>{if(!e||!n)return l.jsx("span",{children:n});const r=e.split(" ").filter(Boolean).map(o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));if(r.length===0)return l.jsx("span",{children:n});const a=new RegExp(`(${r.join("|")})`,"gi");return l.jsx(l.Fragment,{children:n.split(a).map((o,i)=>a.test(o)&&o.trim()!==""?l.jsx("strong",{className:"text-yellow-300 bg-yellow-900/50 rounded-sm px-0.5",children:o},i):o)})},Qu=(n,e)=>{const r=(n.ProductName||"").toLowerCase(),a=(n.Barcode||"").toLowerCase(),o=`${r} ${a}`,i=e.toLowerCase().trim();if(!i)return 1;const h=i.split(" ").filter(Boolean);if(!h.every(g=>o.includes(g)))return 0;let d=10;return h.forEach(g=>{r.includes(g)&&(d+=20),a.includes(g)&&(d+=10)}),r.startsWith(i)&&(d+=500),d},eh=({products:n,selectedProductName:e,onSelect:r,showTagEditor:a=!0})=>{const[o,i]=ve.useState(!1),[h,c]=ve.useState(""),[d,g]=ve.useState(0),[w,m]=ve.useState(null),v=ve.useRef(null),p=ve.useRef(null);ve.useEffect(()=>{c(e)},[e]),ve.useEffect(()=>{const R=B=>{v.current&&!v.current.contains(B.target)&&(i(!1),c(e))};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[e]);const L=ve.useMemo(()=>{const R=h||"";return R.trim()?n.map(B=>({product:B,score:Qu(B,R)})).filter(B=>B.score>0).sort((B,_)=>_.score-B.score||B.product.ProductName.localeCompare(_.product.ProductName)).map(B=>B.product):[]},[n,h]),P=ve.useMemo(()=>{const R=h.trim();return R?!n.some(B=>B.ProductName.trim().toLowerCase()===R.toLowerCase()):!1},[h,n]),A=ve.useMemo(()=>{const R=[...L];return P&&R.unshift({isAddNew:!0,ProductName:h.trim()}),R},[L,P,h]),x=ve.useCallback((R,B)=>{var _;r(R,B),c(R),i(!1),m(null),g(0),(_=p.current)==null||_.blur()},[r]),j=R=>{R.isAddNew?x(R.ProductName):(m(R),i(!1))},y=ve.useCallback(()=>{var R;r("",""),c(""),i(!0),g(0),(R=p.current)==null||R.focus()},[r]),C=R=>{var _;const B=A.length;if(B!==0)switch(R.key){case"ArrowDown":R.preventDefault(),o||i(!0),g(M=>(M+1)%B);break;case"ArrowUp":R.preventDefault(),o||i(!0),g(M=>(M-1+B)%B);break;case"Enter":if(R.preventDefault(),!o)return;d>-1&&A[d]&&j(A[d]);break;case"Escape":i(!1),c(e),(_=p.current)==null||_.blur();break}};return l.jsxs("div",{className:"relative",ref:v,children:[l.jsxs("div",{className:"relative group",children:[l.jsx("input",{ref:p,type:"text",className:"form-input !pr-16 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:"ស្វែងរកផលិតផល...",value:h,onChange:R=>{c(R.target.value),i(!0),g(0)},onFocus:()=>i(!0),onKeyDown:C}),l.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[h&&l.jsx("button",{type:"button",onClick:y,className:"text-gray-500 hover:text-white text-2xl",children:"×"}),l.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),o&&l.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden animate-fade-in-down max-h-80 overflow-y-auto custom-scrollbar",children:l.jsx("ul",{className:"p-2 space-y-1",children:A.length===0?l.jsx("li",{className:"p-4 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"រកមិនឃើញផលិតផលទេ"}):A.map((R,B)=>{if("isAddNew"in R&&R.isAddNew)return l.jsxs("li",{className:`p-3.5 rounded-2xl cursor-pointer flex items-center gap-4 transition-all ${d===B?"bg-blue-600 text-white":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>j(R),children:[l.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center border border-blue-500/30",children:l.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"})})}),l.jsx("div",{className:"min-w-0",children:l.jsxs("p",{className:"font-black text-sm leading-tight",children:["បន្ថែមថ្មី៖ ",l.jsxs("span",{className:"text-yellow-400",children:['"',R.ProductName,'"']})]})})]},"add-new");const _=R;return l.jsxs("li",{className:`p-2.5 rounded-2xl cursor-pointer flex items-center gap-3 transition-all ${d===B?"bg-blue-600 text-white shadow-lg":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>j(_),children:[l.jsx("img",{src:st(_.ImageURL),className:"w-12 h-12 rounded-xl object-cover border border-white/10",alt:""}),l.jsxs("div",{className:"min-w-0 flex-grow",children:[l.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:Zu(_.ProductName,h)}),l.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:l.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-md border border-blue-500/10",children:["$",_.Price.toFixed(2)]})})]})]},_.ProductName)})})}),l.jsx(Ku,{product:w,isOpen:!!w,onClose:()=>m(null),onConfirm:x,showTagEditor:a})]})},th=({provinces:n,selectedProvince:e,onSelect:r})=>{const[a,o]=ve.useState(!1),[i,h]=ve.useState(""),c=ve.useRef(null);ve.useEffect(()=>{h(e)},[e]),ve.useEffect(()=>{const g=w=>{c.current&&!c.current.contains(w.target)&&(o(!1),h(e))};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[e]);const d=ve.useMemo(()=>{const g=n.filter(L=>L.toLowerCase().includes(i.toLowerCase())),w=g.filter(L=>!L.includes("ភ្នំពេញ")&&!L.includes("កណ្ដាល")).sort((L,P)=>L.localeCompare(P,"km")),m=[],v=g.find(L=>L.includes("ភ្នំពេញ")),p=g.find(L=>L.includes("កណ្ដាល"));return v&&m.push(v),p&&m.push(p),[...m,...w]},[n,i]);return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{className:"relative group",children:[l.jsx("input",{type:"text",className:"form-input !pl-10 !py-3 rounded-xl border-gray-700 bg-gray-900 focus:border-blue-500/50 transition-all font-bold text-gray-200",placeholder:"ស្វែងរក ខេត្ត/រាជធានី...",value:i,onChange:g=>{h(g.target.value),o(!0)},onFocus:()=>o(!0)}),l.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:l.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),a&&l.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800 border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-down max-h-60 overflow-y-auto custom-scrollbar",children:d.length>0?d.map((g,w)=>l.jsx("button",{type:"button",onClick:()=>{r(g),h(g),o(!1)},className:`w-full text-left px-4 py-3 text-sm font-bold transition-colors border-b border-white/5 last:border-0 ${e===g?"bg-blue-600 text-white":"text-gray-300 hover:bg-white/5"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{children:g}),w<2&&i===""&&l.jsx("span",{className:"text-[8px] bg-white/10 px-1.5 py-0.5 rounded uppercase tracking-widest opacity-50",children:"Priority"})]})},g)):l.jsx("div",{className:"p-4 text-center text-xs text-gray-500",children:"រកមិនឃើញខេត្តនេះទេ"})})]})},rh=({methods:n,selectedMethodName:e,onSelect:r})=>l.jsxs("div",{className:"w-full",children:[l.jsx("style",{children:`
                @keyframes spin-border {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }
                .card-flux {
                    position: relative;
                    background: #0f172a; /* Slate 900 */
                    border-radius: 1rem;
                    z-index: 1;
                }
                /* The spinning border effect */
                .card-flux-active::after, .card-flux-active::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    background: conic-gradient(from var(--angle), transparent 70%, #3b82f6, #8b5cf6, #ec4899, #3b82f6);
                    border-radius: inherit;
                    animation: spin-border 3s linear infinite;
                }
                .card-flux-active::before {
                    filter: blur(10px);
                    opacity: 0.7;
                }
                
                @keyframes float-y {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-5px); }
                }
                .animate-float-y {
                    animation: float-y 3s ease-in-out infinite;
                }
                
                @keyframes pulse-soft {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.6; }
                }
                .animate-pulse-soft {
                    animation: pulse-soft 2s ease-in-out infinite;
                }
            `}),l.jsx("div",{className:"grid grid-cols-2 gap-4 max-h-80 overflow-y-auto custom-scrollbar px-2 pb-2 pt-2",children:n.map(a=>{const o=e===a.MethodName;return l.jsx("button",{type:"button",onClick:()=>r(a),className:`
                                relative group rounded-2xl transition-all duration-300 min-h-[140px] flex flex-col
                                ${o?"card-flux card-flux-active scale-[1.02]":"bg-gray-900 border border-gray-800 hover:bg-gray-800"}
                            `,children:l.jsxs("div",{className:`
                                w-full h-full rounded-2xl flex flex-col items-center justify-center p-4 relative overflow-hidden
                                ${o?"bg-[#0f172a]":"bg-transparent"}
                            `,children:[o&&l.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-blue-500/10 via-purple-500/5 to-transparent pointer-events-none"}),l.jsx("div",{className:"absolute top-3 right-3 flex gap-1",children:o&&l.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[l.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),l.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-blue-500"})]})}),l.jsx("div",{className:`
                                    relative z-10 w-14 h-14 mb-3 transition-all duration-300
                                    ${o?"animate-float-y drop-shadow-[0_0_15px_rgba(59,130,246,0.5)]":"opacity-80 group-hover:opacity-100"}
                                `,children:l.jsx("img",{src:st(a.LogosURL),className:"w-full h-full object-contain",alt:a.MethodName})}),l.jsxs("div",{className:"relative z-10 text-center w-full",children:[l.jsx("p",{className:`
                                        text-xs font-black uppercase tracking-widest transition-all
                                        ${o?"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-pink-400 animate-pulse-soft":"text-gray-400 group-hover:text-gray-200"}
                                    `,children:a.MethodName}),a.RequireDriverSelection&&l.jsxs("div",{className:`
                                            mt-2 inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-[8px] font-bold uppercase tracking-wider
                                            ${o?"bg-purple-900/30 text-purple-300 border border-purple-500/30":"bg-gray-800 text-gray-500"}
                                        `,children:[l.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Driver Req"]})]})]})},a.MethodName)})}),n.length===0&&l.jsx("div",{className:"p-8 text-center border border-dashed border-gray-700 rounded-2xl bg-gray-900/50",children:l.jsx("p",{className:"text-xs text-gray-500 font-black uppercase tracking-widest animate-pulse",children:"No Signal"})})]}),nh=({drivers:n,selectedDriverName:e,onSelect:r})=>{const a=ve.useRef(null),o=ve.useRef(null);ve.useEffect(()=>{a.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"),o.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2570/2570-preview.mp3"),a.current&&(a.current.volume=.2),o.current&&(o.current.volume=.4)},[]);const i=()=>{a.current&&(a.current.currentTime=0,a.current.play().catch(()=>{}))},h=c=>{e!==c&&(o.current&&(o.current.currentTime=0,o.current.play().catch(()=>{})),r(c))};return l.jsxs("div",{className:"w-full py-4",children:[l.jsx("style",{children:`
                /* CSS Variable for Rotation */
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }

                /* Flux Animation Keyframes */
                @keyframes spin-flux {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }

                /* Base Card Style */
                .flux-card {
                    position: relative;
                    background: #0f172a; /* Slate 900 */
                    border-radius: 1rem;
                    z-index: 1;
                }

                /* Electric Flux Effect (Active State) */
                .flux-card.selected::after, .flux-card.selected::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    /* Electric Gradient Colors: Cyan -> Blue -> Purple -> Cyan */
                    background: conic-gradient(from var(--angle), transparent 70%, #22d3ee, #3b82f6, #a855f7, #22d3ee);
                    border-radius: inherit;
                    animation: spin-flux 2.5s linear infinite;
                }

                /* Outer Glow (Blur) */
                .flux-card.selected::before {
                    filter: blur(12px);
                    opacity: 0.6;
                }

                /* Floating Text Animation */
                @keyframes float-text {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-3px); }
                }
                .animate-float-text {
                    animation: float-text 3s ease-in-out infinite;
                }
            `}),n.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-gray-800 rounded-2xl bg-gray-900/30",children:[l.jsx("div",{className:"w-10 h-10 border-2 border-gray-700 border-t-cyan-500 rounded-full animate-spin mb-3"}),l.jsx("p",{className:"text-gray-500 font-black uppercase tracking-[0.2em] text-[10px]",children:"NO DRIVERS DETECTED"})]}):l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5 p-1",children:n.map(c=>l.jsx(ah,{driver:c,isSelected:e===c.DriverName,onSelect:()=>h(c.DriverName),onHover:i},c.DriverName))})]})},ah=({driver:n,isSelected:e,onSelect:r,onHover:a})=>l.jsxs("div",{onClick:r,onMouseEnter:a,className:`
                flux-card relative h-48 cursor-pointer transition-all duration-300 group overflow-visible
                flex flex-col items-center justify-end pb-3
                ${e?"selected scale-[1.03]":"border border-white/5 hover:border-blue-500/30 grayscale opacity-70 hover:opacity-100 hover:grayscale-0"}
            `,children:[l.jsxs("div",{className:"absolute inset-0 rounded-2xl overflow-hidden bg-gray-900",children:[l.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(#3b82f6 1px, transparent 1px)",backgroundSize:"10px 10px"}}),e&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/2 bg-gradient-to-t from-blue-900/40 to-transparent"})]}),l.jsx("div",{className:`
                absolute inset-x-0 transition-all duration-500 z-10 flex justify-center
                ${e?"top-2 bottom-12":"top-3 bottom-10"}
            `,children:l.jsx("div",{className:`
                    relative w-full h-full max-w-[85%] rounded-xl overflow-hidden transition-all duration-500
                    ${e?"shadow-[0_0_20px_rgba(59,130,246,0.4)] ring-1 ring-blue-400/30":"shadow-none"}
                `,children:l.jsx("img",{src:st(n.ImageURL),className:"w-full h-full object-cover object-top",alt:n.DriverName})})}),l.jsxs("div",{className:"relative z-20 w-full px-2 text-center",children:[l.jsx("div",{className:`
                    transition-all duration-300 transform
                    ${e?"translate-y-0 animate-float-text":"translate-y-1"}
                `,children:l.jsx("h3",{className:`
                        text-[11px] font-black uppercase tracking-widest leading-tight
                        ${e?"text-white drop-shadow-[0_0_5px_rgba(34,211,238,0.8)]":"text-gray-400"}
                    `,children:n.DriverName})}),l.jsxs("div",{className:`
                    mt-2 flex items-center justify-center gap-1.5 transition-all duration-300
                    ${e?"opacity-100":"opacity-0 scale-0"}
                `,children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse shadow-[0_0_5px_#22d3ee]"}),l.jsx("span",{className:"text-[7px] font-bold text-cyan-300 uppercase tracking-[0.2em] border border-cyan-500/30 px-1.5 py-0.5 rounded bg-cyan-950/50",children:"ONLINE"})]})]})]}),ih=({formData:n,appData:e,onChange:r,onProvinceSelect:a,onDistrictChange:o,onSangkatChange:i,onShippingMethodSelect:h,onDriverSelect:c,onBankChange:d,selectedDistrict:g,selectedSangkat:w,bankLogo:m})=>{var y,C,R;const[v,p]=ve.useState(!1),L=[...new Set(e.locations.map(B=>B.Province))],P=[...new Set(e.locations.filter(B=>B.Province===n.Location).map(B=>B.District))].sort(),A=[...new Set(e.locations.filter(B=>B.Province===n.Location&&B.District===g).map(B=>B.Sangkat))].sort(),x=(y=e.shippingMethods)==null?void 0:y.find(B=>B.MethodName===n["Internal Shipping Method"]),j=(C=e.drivers)==null?void 0:C.find(B=>B.DriverName===n["Internal Shipping Details"]);return l.jsxs("div",{className:"flex flex-col gap-4 h-full overflow-y-auto custom-scrollbar pr-2 pb-20 lg:pb-2",children:[l.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg relative overflow-hidden flex-shrink-0",children:[l.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:l.jsx("svg",{className:"w-24 h-24 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),l.jsxs("h3",{className:"text-xs font-black text-blue-400 uppercase tracking-[0.25em] mb-4 relative z-10 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-4 bg-blue-500 rounded-full"}),"ព័ត៌មានអតិថិជន"]}),l.jsxs("div",{className:"space-y-3 relative z-10",children:[l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsx("input",{type:"text",name:"Customer Name",value:n["Customer Name"]||"",onChange:r,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl font-bold text-sm text-white placeholder-gray-600 focus:border-blue-500",placeholder:"ឈ្មោះអតិថិជន",required:!0}),l.jsx("input",{type:"tel",name:"Customer Phone",value:n["Customer Phone"]||"",onChange:r,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl font-mono font-black text-sm text-blue-300 placeholder-gray-600 focus:border-blue-500",placeholder:"លេខទូរស័ព្ទ",required:!0})]}),l.jsxs("div",{className:"space-y-3 pt-2",children:[l.jsx(th,{provinces:L,selectedProvince:n.Location||"",onSelect:a}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("select",{value:g,onChange:B=>o(B.target.value),className:"form-select bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-gray-300 h-12",disabled:!n.Location,children:[l.jsx("option",{value:"",children:"ស្រុក/ខណ្ឌ"}),P.map(B=>l.jsx("option",{value:B,children:B},B))]}),l.jsxs("select",{value:w,onChange:B=>i(B.target.value),className:"form-select bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-gray-300 h-12",disabled:!g,children:[l.jsx("option",{value:"",children:"ឃុំ/សង្កាត់"}),A.map(B=>l.jsx("option",{value:B,children:B},B))]})]}),l.jsx("input",{type:"text",name:"Address Details",value:n["Address Details"]||"",onChange:r,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-white placeholder-gray-600 focus:border-blue-500",placeholder:"ផ្ទះលេខ, ផ្លូវ..."})]})]})]}),l.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg relative overflow-hidden flex-shrink-0",children:[l.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:l.jsx("svg",{className:"w-24 h-24 text-orange-500",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"})})}),l.jsxs("h3",{className:"text-xs font-black text-orange-400 uppercase tracking-[0.25em] mb-4 relative z-10 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-4 bg-orange-500 rounded-full"}),"ដឹកជញ្ជូន & ទូទាត់"]}),l.jsxs("div",{className:"space-y-4 relative z-10",children:[l.jsx(rh,{methods:e.shippingMethods||[],selectedMethodName:n["Internal Shipping Method"]||"",onSelect:h}),(x==null?void 0:x.RequireDriverSelection)&&l.jsxs("div",{className:"space-y-3 pt-2 border-t border-white/5 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"ជ្រើសរើសអ្នកដឹក"}),!n["Internal Shipping Details"]&&l.jsx("span",{className:"text-[9px] text-red-400 font-bold animate-pulse",children:"* Required"})]}),l.jsx("div",{onClick:()=>p(!0),className:`
                                    relative p-3 rounded-2xl border transition-all cursor-pointer group flex items-center gap-4 shadow-lg
                                    ${j?"bg-gradient-to-r from-gray-800 to-gray-900 border-blue-500/30 hover:border-blue-500/50":"bg-red-500/5 border-red-500/20 hover:bg-red-500/10 border-dashed"}
                                `,children:j?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:st(j.ImageURL),alt:j.DriverName,className:"w-12 h-12 rounded-xl object-cover border border-white/10 shadow-sm"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-white font-black text-sm truncate",children:j.DriverName}),l.jsx("p",{className:"text-[9px] text-blue-400 font-bold uppercase tracking-wider mt-0.5",children:"Driver Selected"})]}),l.jsx("div",{className:"bg-black/40 p-2.5 rounded-xl border border-white/10 group-hover:bg-blue-600 group-hover:text-white group-hover:border-blue-500 transition-colors text-gray-500 shadow-inner",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})})]}):l.jsxs("div",{className:"w-full py-2 flex items-center justify-center gap-3 text-gray-500 group-hover:text-red-400 transition-colors",children:[l.jsx("span",{className:"bg-gray-800 p-2 rounded-full border border-gray-700 group-hover:border-red-500/50 transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),l.jsx("span",{className:"font-bold text-xs uppercase tracking-wider",children:"Tap to Select Driver"})]})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[l.jsxs("div",{className:"relative group",children:[l.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase absolute -top-2 left-2 bg-[#161f32] px-1 group-focus-within:text-orange-400 transition-colors",children:"Cost ($)"}),l.jsx("input",{type:"text",inputMode:"decimal",name:"Internal Cost",value:n["Internal Cost"],onChange:r,className:"form-input !py-2.5 !px-3 bg-gray-900/80 border-gray-700 rounded-xl font-black text-orange-400 text-sm text-center focus:border-orange-500"})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase absolute -top-2 left-2 bg-[#161f32] px-1 group-focus-within:text-white transition-colors",children:"Status"}),l.jsxs("select",{name:"Payment Status",value:n["Payment Status"],onChange:r,className:`form-select !py-2.5 !px-2 rounded-xl font-black text-xs uppercase border-none w-full ${n["Payment Status"]==="Paid"?"bg-emerald-600 text-white shadow-lg shadow-emerald-900/50":"bg-red-900/40 text-red-400 border border-red-500/20"}`,children:[l.jsx("option",{value:"Unpaid",children:"Unpaid"}),l.jsx("option",{value:"Paid",children:"Paid"})]})]})]}),n["Payment Status"]==="Paid"&&l.jsxs("div",{className:"flex items-center gap-3 animate-fade-in bg-black/30 p-2 rounded-2xl border border-white/5",children:[l.jsxs("select",{value:n["Payment Info"],onChange:d,className:"form-select bg-transparent border-none text-xs font-bold flex-grow text-white focus:ring-0",children:[l.jsx("option",{value:"",children:"Select Bank..."}),(R=e.bankAccounts)==null?void 0:R.map(B=>l.jsx("option",{value:B.BankName,children:B.BankName},B.BankName))]}),m&&l.jsx("img",{src:m,className:"w-10 h-10 object-contain bg-white/10 p-1 rounded-xl border border-white/10",alt:""})]})]})]}),l.jsx("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg mt-auto flex-shrink-0",children:l.jsx("textarea",{name:"Note",value:n.Note||"",onChange:r,rows:3,className:"form-textarea bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold w-full resize-none text-gray-300 placeholder-gray-600 focus:border-blue-500",placeholder:"ចំណាំ..."})}),v&&l.jsx(Rl,{isOpen:!0,onClose:()=>p(!1),maxWidth:"max-w-3xl",children:l.jsxs("div",{className:"p-6 sm:p-8 bg-[#0f172a] rounded-[2.5rem] border border-white/10",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h3",{className:"text-xl sm:text-2xl font-black text-white uppercase tracking-tighter flex items-center gap-3",children:[l.jsx("span",{className:"w-2 h-8 bg-blue-600 rounded-full"}),"Select Driver"]}),l.jsx("button",{onClick:()=>p(!1),className:"w-10 h-10 rounded-2xl bg-gray-800 text-gray-400 hover:text-white flex items-center justify-center transition-all hover:bg-gray-700 active:scale-90",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar pr-2 bg-black/20 rounded-3xl p-2 border border-white/5",children:l.jsx(nh,{drivers:e.drivers||[],selectedDriverName:n["Internal Shipping Details"]||"",onSelect:B=>{c(B),p(!1)}})})]})})]})},sh=({value:n,onChange:e,label:r="ចំនួន*",min:a=1,max:o=99})=>{var P;const i=ve.useRef(null),[h,c]=ve.useState(!1),d=()=>{const A=Math.min(o,n+1);e(A)},g=()=>{const A=Math.max(a,n-1);e(A)},w=A=>{const x=A.target.value;if(x===""){c(!0);return}const j=parseInt(x,10);isNaN(j)||(j<a||j>o?c(!0):(e(j),c(!1)))},m=()=>{if(h){const A=i.current;if(A&&A.value){let x=parseInt(A.value,10);isNaN(x)||x<a?x=a:x>o&&(x=o),e(x)}else e(a);c(!1)}},v=A=>{var x;A.key==="Enter"?(A.preventDefault(),m(),(x=i.current)==null||x.blur()):A.key==="ArrowUp"?(A.preventDefault(),d()):A.key==="ArrowDown"&&(A.preventDefault(),g())},p=()=>{c(!0)},L=h?((P=i.current)==null?void 0:P.value)||"":n;return l.jsxs("div",{className:"space-y-1.5 w-full",children:[l.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:r}),l.jsxs("div",{className:"flex items-center bg-black/40 rounded-2xl border border-gray-700 h-12 w-full overflow-hidden focus-within:border-blue-500/50 transition-all focus-within:shadow-[0_0_20px_rgba(59,130,246,0.15)] ring-1 ring-white/5",children:[l.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${n<=a?"text-gray-600 cursor-not-allowed opacity-50":"text-gray-400 hover:text-white hover:bg-white/5 active:scale-90"}
                        transition-all border-r border-gray-700/50
                    `,onClick:g,disabled:n<=a,"aria-label":"ថយចំនួន",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:l.jsx("path",{d:"M20 12H4"})})}),l.jsx("input",{ref:i,type:"number",inputMode:"numeric",value:L,onChange:w,onBlur:m,onFocus:p,onKeyDown:v,min:a,max:o,step:"1",className:"flex-1 h-full bg-transparent text-center text-white font-black text-base outline-none border-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:a.toString(),"aria-label":"ចំនួន"}),l.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${n>=o?"text-gray-600 cursor-not-allowed opacity-50":"text-blue-400 hover:text-white hover:bg-blue-600/10 active:scale-90"}
                        transition-all border-l border-gray-700/50
                    `,onClick:d,disabled:n>=o,"aria-label":"បន្ថែមចំនួន",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:l.jsx("path",{d:"M12 4v16m8-8H4"})})})]}),l.jsxs("div",{className:"text-xs text-gray-500 px-1 flex justify-between",children:[l.jsxs("span",{children:["អប្បបរមា: ",a]}),l.jsxs("span",{children:["អតិបរមា: ",o]})]})]})},oh=({products:n,masterProducts:e,onProductChange:r,onAddProduct:a,onRemoveProduct:o,onPreviewImage:i,onScanBarcode:h})=>l.jsxs("div",{className:"flex-1 bg-gray-800/30 border border-white/5 rounded-[2rem] p-4 lg:p-6 overflow-y-auto custom-scrollbar flex flex-col relative shadow-inner",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 z-20 bg-[#121a2b]/95 backdrop-blur-md p-3 -mx-2 -mt-2 rounded-2xl border border-white/5 shadow-lg",children:[l.jsxs("h3",{className:"text-xs font-black text-white uppercase tracking-widest pl-2 flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Items List (",n.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{type:"button",onClick:h,className:"px-4 py-2.5 bg-blue-600/10 border border-blue-500/30 text-blue-400 rounded-xl shadow-lg hover:bg-blue-600 hover:text-white transition-all active:scale-95 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"Scan"]}),l.jsxs("button",{type:"button",onClick:a,className:"px-5 py-2.5 bg-blue-600 text-white rounded-xl shadow-lg shadow-blue-600/30 text-[10px] font-black uppercase hover:bg-blue-500 transition-all active:scale-95 flex items-center gap-2",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:l.jsx("path",{d:"M12 4v16m8-8H4"})})," Add"]})]})]}),l.jsx("div",{className:"space-y-4 pb-4",children:n.map((c,d)=>l.jsxs("div",{className:"group relative bg-[#0f1523] rounded-[1.5rem] p-4 border border-white/5 hover:border-blue-500/30 transition-all flex flex-col sm:flex-row gap-5 items-start shadow-md hover:shadow-xl",children:[l.jsx("button",{type:"button",onClick:()=>o(d),className:"absolute top-3 right-3 text-gray-600 hover:text-red-500 hover:bg-red-500/10 rounded-full w-8 h-8 flex items-center justify-center transition-all opacity-0 group-hover:opacity-100 focus:opacity-100",children:"×"}),l.jsx("div",{className:"w-20 h-20 bg-gray-900 rounded-2xl border border-white/10 overflow-hidden flex-shrink-0 cursor-pointer shadow-lg group-hover:scale-105 transition-transform",onClick:()=>c.image&&i(st(c.image)),children:l.jsx("img",{src:st(c.image),className:"w-full h-full object-cover",alt:""})}),l.jsxs("div",{className:"flex-1 w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-4 items-center",children:[l.jsxs("div",{className:"lg:col-span-6 space-y-3",children:[l.jsx(eh,{products:e,selectedProductName:c.name,onSelect:(g,w)=>r(d,"name",g,w)}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:c.colorInfo,onChange:g=>r(d,"colorInfo",g.target.value),className:"bg-gray-800/50 border-none rounded-lg py-1.5 px-3 text-[10px] font-bold text-white w-full focus:ring-1 focus:ring-blue-500 placeholder-gray-600",placeholder:"Color/Size..."}),l.jsx("input",{type:"text",value:c.tags||"",onChange:g=>r(d,"tags",g.target.value),className:"bg-gray-800/50 border-none rounded-lg py-1.5 px-3 text-[10px] font-bold text-blue-300 w-full focus:ring-1 focus:ring-blue-500 placeholder-gray-600",placeholder:"Tags..."})]})]}),l.jsx("div",{className:"lg:col-span-3 flex justify-center",children:l.jsx("div",{className:"w-32",children:l.jsx(sh,{value:Number(c.quantity)||1,onChange:g=>r(d,"quantity",g),label:""})})}),l.jsxs("div",{className:"lg:col-span-3 flex flex-row lg:flex-col justify-between items-center lg:items-end gap-2 h-full",children:[l.jsxs("div",{className:"relative group/price",children:[l.jsx("label",{className:"absolute -top-3 right-0 text-[8px] font-black text-gray-500 uppercase opacity-0 group-hover/price:opacity-100 transition-opacity",children:"Unit Price"}),l.jsx("input",{type:"text",inputMode:"decimal",value:c.finalPrice,onChange:g=>r(d,"finalPrice",g.target.value),className:"w-24 bg-transparent border-b border-gray-700 py-1 font-black text-right text-emerald-400 focus:border-emerald-500 outline-none text-sm transition-all"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-[9px] text-gray-500 uppercase font-black tracking-wider",children:"Total"}),l.jsxs("p",{className:"text-lg font-black text-white tracking-tight",children:["$",(Number(c.total)||0).toFixed(2)]})]})]})]})]},c.id||d))})]}),lh=({subtotal:n,grandTotal:e,shippingFee:r,onShippingFeeChange:a,onSave:o,onDelete:i,loading:h})=>l.jsxs("div",{className:"flex-shrink-0 bg-[#0f1523]/80 backdrop-blur-xl border border-white/5 rounded-[2.5rem] p-5 lg:p-6 flex flex-col lg:flex-row gap-6 items-center justify-between shadow-[0_-10px_40px_rgba(0,0,0,0.3)] relative z-30",children:[l.jsxs("div",{className:"flex flex-wrap gap-8 items-center justify-center lg:justify-start w-full lg:w-auto",children:[l.jsxs("div",{className:"text-center lg:text-left",children:[l.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1",children:"Subtotal"}),l.jsxs("p",{className:"text-xl font-bold text-gray-300",children:["$",n.toFixed(2)]})]}),l.jsx("div",{className:"w-px h-10 bg-white/10 hidden lg:block"}),l.jsxs("div",{className:"text-center lg:text-left relative group",children:[l.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1 group-focus-within:text-blue-400 transition-colors",children:"Shipping Fee"}),l.jsxs("div",{className:"relative inline-flex items-center",children:[l.jsx("input",{type:"text",inputMode:"decimal",name:"Shipping Fee (Customer)",value:r,onChange:a,className:"w-20 bg-transparent border-b-2 border-gray-600 text-center font-black text-xl text-white outline-none focus:border-blue-500 transition-all py-0.5"}),l.jsx("span",{className:"text-gray-500 font-black ml-1 text-sm",children:"$"})]})]}),l.jsx("div",{className:"w-px h-10 bg-white/10 hidden lg:block"}),l.jsxs("div",{className:"text-center lg:text-left",children:[l.jsx("p",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-[0.2em] mb-1",children:"Grand Total"}),l.jsxs("p",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-emerald-200 tracking-tighter drop-shadow-md",children:["$",e.toFixed(2)]})]})]}),l.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 w-full lg:w-auto items-center",children:[l.jsxs("button",{type:"button",onClick:i,disabled:h,className:"w-full lg:w-auto px-8 py-5 bg-red-500/10 hover:bg-red-600 text-red-500 hover:text-white rounded-[1.5rem] font-black uppercase text-xs tracking-[0.2em] transition-all flex items-center justify-center gap-3 border border-red-500/20 active:scale-95 group order-last lg:order-first",children:[l.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:rotate-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",strokeWidth:"2.5"})}),"Delete"]}),l.jsx("button",{onClick:o,disabled:h,className:"w-full lg:w-auto px-12 py-5 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white rounded-[1.5rem] font-black uppercase text-xs tracking-[0.2em] shadow-[0_10px_30px_rgba(37,99,235,0.4)] transform active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50 disabled:cursor-not-allowed group border border-white/10",children:h?l.jsx(Rn,{size:"sm"}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"relative z-10",children:"Save Changes"}),l.jsx("div",{className:"w-8 h-8 bg-white/10 rounded-full flex items-center justify-center group-hover:bg-white/20 transition-colors",children:l.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]})})]})]}),ia=()=>{if(typeof window>"u"||typeof navigator>"u")return!1;const n=navigator.userAgent||navigator.vendor||window.opera;return!!(/iPad|iPhone|iPod/.test(n)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)};let wi=null,Ns=null;const ch=n=>{if(!n||n.videoWidth===0)return null;const e=80,r=80;if(wi||(wi=document.createElement("canvas"),wi.width=e,wi.height=r,Ns=wi.getContext("2d",{willReadFrequently:!0})),!Ns)return null;Ns.drawImage(n,0,0,e,r);const o=Ns.getImageData(0,0,e,r).data,i=new Float32Array(r).fill(0),h=new Float32Array(e).fill(0);let c=0;for(let P=1;P<r-1;P++)for(let A=1;A<e-1;A++){const x=(P*e+A)*4,j=(o[x]+o[x+1]+o[x+2])/3,y=(o[x-4]+o[x-3]+o[x-2])/3,C=(o[x-e*4]+o[x-e*4+1]+o[x-e*4+2])/3,R=Math.abs(j-y),B=Math.abs(j-C);let _=R+B>30?R+B:0;i[P]+=_,h[A]+=_,c+=_}if(c<15e3)return null;const d=(P,A)=>{const x=new Float32Array(A);for(let _=2;_<A-2;_++)x[_]=(P[_-2]+P[_-1]+P[_]+P[_+1]+P[_+2])/5;let j=0,y=A/2;for(let _=0;_<A;_++)x[_]>j&&(j=x[_],y=_);const C=j*.25;let R=y,B=y;for(;R>0&&x[R]>C;)R--;for(;B<A-1&&x[B]>C;)B++;return{min:Math.max(0,R-2),max:Math.min(A,B+2)}},g=d(h,e),w=d(i,r),m=(g.max-g.min)/e*100,v=(w.max-w.min)/r*100,p=(g.min+g.max)/2/e*100,L=(w.min+w.max)/2/r*100;return m>90||v>90||m<5||v<5?null:{x:p,y:L,width:m,height:v,score:Math.min(1,c/2e5)}},Mn=(n,e,r)=>n+(e-n)*r,uh=(n,e,r,a,o)=>{const[i,h]=ve.useState(null),[c,d]=ve.useState(!1),g=ve.useRef(0),w=ve.useRef(0),m=ve.useRef(0),v=ve.useRef(null),p=ve.useRef(0),L=ve.useRef(!1),P=ve.useRef(!1),A=ve.useRef(null);ve.useEffect(()=>{if("BarcodeDetector"in window&&!ia())try{console.log("Initializing Native BarcodeDetector..."),A.current=new window.BarcodeDetector({formats:["qr_code","ean_13","code_128","code_39"]})}catch(y){console.warn("Native BarcodeDetector failed to init:",y)}},[]);const x=()=>{p.current=Date.now()+3e3,d(!1)},j=ve.useCallback(async()=>{if(ia())return;if(!n||n.paused||n.ended){g.current=requestAnimationFrame(j);return}let y=null;if(A.current)if(P.current)v.current;else{P.current=!0;try{const C=await A.current.detect(n);if(C.length>0){const B=C.sort((H,K)=>K.boundingBox.width*K.boundingBox.height-H.boundingBox.width*H.boundingBox.height)[0].boundingBox,_=n.videoWidth,M=n.videoHeight;_>0&&M>0&&(y={x:(B.x+B.width/2)/_*100,y:(B.y+B.height/2)/M*100,width:B.width/_*100,height:B.height/M*100})}}catch{}finally{P.current=!1}}else y=ch(n);if(y){if(m.current=0,v.current?v.current={x:Mn(v.current.x,y.x,.4),y:Mn(v.current.y,y.y,.4),width:Mn(v.current.width,y.width,.4),height:Mn(v.current.height,y.height,.4)}:v.current=y,h(C=>C?{x:Mn(C.x,v.current.x,.25),y:Mn(C.y,v.current.y,.25),width:Mn(C.width,v.current.width,.2),height:Mn(C.height,v.current.height,.2)}:v.current),Date.now()>p.current){const C=y.x>30&&y.x<70&&y.y>30&&y.y<70,R=60,B=y.width<R;if(C&&B?w.current++:w.current=Math.max(0,w.current-1),w.current>3){let _=5;try{const K=e!=null&&e.getCapabilities?e.getCapabilities():{};K.zoom&&K.zoom.max&&(_=K.zoom.max)}catch{}const M=Math.min(_,8),H=R-y.width;if(Math.abs(H)>2&&r<M&&!L.current){d(!0);let S=H*.01*r;S=Math.max(-.2,Math.min(S,.2));const N=Math.min(Math.max(r+S,1),M);Math.abs(N-r)>.02&&(L.current=!0,a(N),o(N).catch(U=>{}).finally(()=>{L.current=!1}))}}}}else m.current++,m.current>10&&(h(null),v.current=null,d(!1),w.current=0);g.current=requestAnimationFrame(j)},[n,r,a,o,e]);return ve.useEffect(()=>(ia()||(g.current=requestAnimationFrame(j)),()=>{g.current&&cancelAnimationFrame(g.current)}),[j]),{trackingBox:i,isAutoZooming:c,notifyManualZoom:x}},hh=(n,e,r)=>{const a=ve.useRef(null),[o,i]=ve.useState(!0),[h,c]=ve.useState(null),[d,g]=ve.useState(1),[w,m]=ve.useState(null),[v,p]=ve.useState(!1),[L,P]=ve.useState(!1),[A,x]=ve.useState("environment"),j=ve.useRef(null),y=ve.useRef(null),C=ve.useRef(new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3")),R=ve.useCallback(()=>{x(E=>E==="environment"?"user":"environment")},[]),B=()=>{var T,G,V;if(y.current&&y.current.readyState==="live")return y.current;if((T=a.current)!=null&&T.html5QrCode){const re=(V=(G=a.current.html5QrCode).getRunningTrackCamera)==null?void 0:V.call(G);if(re)return re}const E=document.querySelector(`#${n} video`);if(E&&E.srcObject){const se=E.srcObject.getVideoTracks()[0];if(se)return se}return null},_=ve.useCallback(async E=>{const T=B();if(!T)return;const G=ia();try{await T.applyConstraints(E)}catch{if(E.zoom&&G)try{await T.applyConstraints({advanced:[{zoom:E.zoom}]})}catch{}}},[]),M=ve.useCallback(async E=>{if(!B())return;let G=E;w&&(G=Math.max(w.min,Math.min(E,w.max))),g(G),await _({zoom:G})},[w,_]),{trackingBox:H,isAutoZooming:K,notifyManualZoom:S}=uh(j.current,y.current,d,g,E=>_({zoom:E})),N=ve.useCallback(E=>{S(),M(E)},[S,M]),U=ve.useCallback(async()=>{const E=B();if(!E||ia())return;const T=!v;try{await E.applyConstraints({advanced:[{torch:T}]}),p(T)}catch{try{await E.applyConstraints({torch:T}),p(T)}catch{}}},[v]),$=ve.useCallback(async()=>{const E=B();if(E){try{await _({focusMode:"continuous"})}catch{}try{const T=E.getCapabilities?E.getCapabilities():{};T.focusMode&&T.focusMode.includes("single-shot")&&await _({focusMode:"single-shot"})}catch{}}},[_]),ee=ve.useCallback(async E=>{if(!a.current)throw new Error("Scanner not initialized");return await a.current.scanFile(E,!0)},[]);return ve.useEffect(()=>{if(!window.Html5Qrcode){c("Scanner library missing.");return}return(async()=>{i(!0),p(!1),g(1);const T=new window.Html5Qrcode(n);a.current=T;const G=ia(),re={fps:30,qrbox:{width:280,height:280},...G?{}:{aspectRatio:1.777777778},disableFlip:!1,experimentalFeatures:{useBarCodeDetectorIfSupported:!G},videoConstraints:G?{facingMode:"environment",width:{min:1280,ideal:1920},height:{min:720,ideal:1080}}:{facingMode:A,width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080},frameRate:{ideal:60,min:30},aspectRatio:1.777777778,focusMode:"continuous"}};let se=0;const k=z=>{const Y=Date.now();Y-se<1500||(se=Y,C.current.currentTime=0,C.current.play().catch(()=>{}),navigator.vibrate&&navigator.vibrate(50),e(z))};try{await T.start({facingMode:A},re,k,void 0);const z=document.querySelector(`#${n} video`);z&&(j.current=z,z.setAttribute("playsinline","true"),z.style.objectFit="cover");const Y=B();if(Y){y.current=Y;const J=Y.getCapabilities?Y.getCapabilities():{},Z=Y.getSettings();if(!G&&"torch"in J?P(!0):P(!1),G){const le=Z.zoom?Math.min(Z.zoom,1):1;m({min:le>=1?1:.5,max:5,step:.1}),g(Z.zoom||1)}else J.zoom?(m({min:J.zoom.min,max:J.zoom.max,step:J.zoom.step}),g(Z.zoom||J.zoom.min)):m(null)}i(!1)}catch(z){console.error("Camera Start Error:",z),c(z.name==="NotAllowedError"?"Camera permission denied.":"Camera error."),i(!1)}})(),()=>{a.current&&a.current.isScanning&&a.current.stop().then(()=>a.current.clear()).catch(console.error)}},[A]),{isInitializing:o,error:h,zoom:d,zoomCapabilities:w,handleZoomChange:N,isTorchOn:v,isTorchSupported:L,toggleTorch:U,trackingBox:H,isAutoZooming:K,triggerFocus:$,switchCamera:R,facingMode:A,scanFromImage:ee}},dh=({isScanning:n,error:e,scanSuccessFlash:r,zoom:a,useSimulatedZoom:o,trackingBox:i,focusPoint:h})=>l.jsxs(l.Fragment,{children:[l.jsx("style",{children:`
              .hud-grid {
                background-size: 40px 40px;
                background-image: linear-gradient(to right, rgba(59, 130, 246, 0.1) 1px, transparent 1px), linear-gradient(to bottom, rgba(59, 130, 246, 0.1) 1px, transparent 1px);
              }
              .scanner-laser {
                position: absolute; left: 0; width: 100%; height: 2px; background: #3b82f6; box-shadow: 0 0 15px #3b82f6; animation: laser-scan 2s ease-in-out infinite;
              }
              @keyframes laser-scan { 0% { top: 0%; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
              
              /* Enhanced Success Animation */
              .scan-flash-overlay { animation: flash-screen 0.4s ease-out forwards; }
              @keyframes flash-screen { 
                  0% { background-color: rgba(16, 185, 129, 0); } 
                  20% { background-color: rgba(16, 185, 129, 0.4); } 
                  100% { background-color: rgba(16, 185, 129, 0); } 
              }
              
              .tracking-box {
                  position: absolute;
                  border: 2px solid #10b981;
                  background-color: rgba(16, 185, 129, 0.1);
                  box-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
                  border-radius: 8px;
                  transition: all 0.1s linear; /* Smooth movement */
                  pointer-events: none;
                  z-index: 10;
                  transform: translate(-50%, -50%); /* Center based on x, y */
              }

              /* Focus Reticle Animation */
              @keyframes focus-ping {
                  0% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; border-color: white; }
                  20% { opacity: 1; }
                  100% { transform: translate(-50%, -50%) scale(1); opacity: 0; border-color: #f59e0b; }
              }
              .focus-reticle {
                  position: absolute;
                  width: 60px;
                  height: 60px;
                  border: 2px solid white;
                  border-radius: 50%;
                  pointer-events: none;
                  animation: focus-ping 0.6s ease-out forwards;
                  z-index: 20;
                  box-shadow: 0 0 10px rgba(255,255,255,0.5);
              }
            `}),l.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[!n&&!e&&l.jsx("div",{className:"absolute inset-0 hud-grid opacity-30"}),r&&l.jsx("div",{className:"absolute inset-0 z-50 scan-flash-overlay"}),h&&l.jsx("div",{className:"focus-reticle",style:{left:h.x,top:h.y}}),i&&l.jsx("div",{className:"tracking-box",style:{left:`${i.x}%`,top:`${i.y}%`,width:`${i.width}%`,height:`${i.height}%`},children:l.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-emerald-500 text-white text-[9px] font-black px-2 py-0.5 rounded uppercase tracking-wider shadow-lg whitespace-nowrap animate-pulse",children:"AI TRACKING"})}),!n&&!e&&!i&&l.jsxs("div",{className:`
                        absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 
                        w-[260px] h-[260px] border-2 transition-all duration-300
                        ${r?"border-emerald-500 scale-110 shadow-[0_0_50px_rgba(16,185,129,0.8)]":"border-white/30"}
                        rounded-[2rem]
                    `,children:[l.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-blue-500 rounded-tl-2xl -translate-x-1 -translate-y-1"}),l.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-blue-500 rounded-tr-2xl translate-x-1 -translate-y-1"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-blue-500 rounded-bl-2xl -translate-x-1 translate-y-1"}),l.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-blue-500 rounded-br-2xl translate-x-1 translate-y-1"}),l.jsx("div",{className:"scanner-laser"})]}),l.jsxs("div",{className:"absolute top-[18%] right-4 flex flex-col gap-2 items-end",children:[l.jsxs("div",{className:"text-[9px] font-mono text-blue-400 bg-black/60 px-2 py-1 rounded border border-blue-500/20 flex items-center gap-2 backdrop-blur-md",children:[l.jsxs("span",{children:[a.toFixed(1),"x"]}),o&&l.jsx("span",{className:"bg-white/10 px-1 rounded text-[8px] text-white",children:"DIGITAL"})]}),i&&l.jsx("div",{className:"text-[9px] font-mono text-emerald-400 bg-black/60 px-2 py-1 rounded border border-emerald-500/20 flex items-center gap-2 backdrop-blur-md animate-pulse",children:l.jsx("span",{children:"SMART-ZOOM"})})]})]})]}),fh=({history:n,isOpen:e,setIsOpen:r,onClear:a})=>{const o=ve.useRef(null),i=c=>{o.current=c.touches[0].clientY},h=c=>{o.current!==null&&c.touches[0].clientY-o.current>50&&(r(!1),o.current=null)};return l.jsxs("div",{className:`
                absolute bottom-0 left-0 right-0 bg-[#0f172a] rounded-t-[2.5rem] border-t border-white/10 shadow-[0_-20px_60px_rgba(0,0,0,0.9)] z-50 transition-all duration-300 ease-out flex flex-col
                ${e?"h-[80vh]":"h-0 overflow-hidden"}
            `,onTouchStart:i,onTouchMove:h,onTouchEnd:()=>{o.current=null},children:[l.jsx("div",{className:"w-full flex justify-center py-5 cursor-pointer active:bg-white/5 transition-colors rounded-t-[2.5rem]",onClick:()=>r(!e),children:l.jsx("div",{className:"w-16 h-1.5 bg-gray-600 rounded-full"})}),l.jsxs("div",{className:"flex-grow flex flex-col overflow-hidden px-5 pb-6 animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-1.5 h-6 bg-blue-500 rounded-full"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-black text-white uppercase tracking-tight",children:"Scanned History"}),l.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:[n.length," items logged"]})]})]}),l.jsx("button",{onClick:a,className:"text-[10px] text-red-400 font-black uppercase tracking-widest bg-red-500/10 px-4 py-2 rounded-xl border border-red-500/20 active:scale-95 transition-all hover:bg-red-500 hover:text-white",children:"Clear All"})]}),l.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar space-y-3 pb-safe-bottom",children:n.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center h-48 opacity-40",children:[l.jsx("svg",{className:"w-12 h-12 text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),l.jsx("p",{className:"text-xs font-black uppercase text-gray-500 tracking-widest",children:"No items scanned yet"})]}):n.map((c,d)=>{var g;return l.jsxs("div",{className:"flex items-center gap-4 bg-gray-800/40 p-3 rounded-2xl border border-white/5 shadow-sm",children:[l.jsx("div",{className:"w-12 h-12 bg-black rounded-xl overflow-hidden border border-white/10 flex-shrink-0 shadow-inner",children:c.product?l.jsx("img",{src:st(c.product.ImageURL),className:"w-full h-full object-cover",alt:""}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 font-black text-xs",children:"?"})}),l.jsxs("div",{className:"flex-grow min-w-0",children:[l.jsx("h4",{className:"text-white font-bold text-sm truncate leading-tight",children:((g=c.product)==null?void 0:g.ProductName)||"Unknown Product"}),l.jsx("p",{className:"text-[10px] text-gray-500 font-mono mt-1 font-bold tracking-wider",children:c.code})]}),l.jsxs("div",{className:"text-right flex flex-col items-end",children:[l.jsxs("span",{className:"bg-blue-600/20 text-blue-400 text-xs font-black px-2 py-0.5 rounded-lg border border-blue-500/20 mb-1",children:["x",c.count]}),l.jsx("span",{className:"text-[9px] text-gray-600 font-bold",children:new Date(c.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},d)})})]})]})},ph=({onClose:n,onSwitchCamera:e,onToggleTorch:r,isTorchOn:a,isTorchSupported:o,isAutoZooming:i})=>{const h=!ia()&&o;return l.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent pointer-events-none",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsxs("div",{className:"pointer-events-auto bg-black/40 backdrop-blur-md px-3 py-1.5 rounded-full border border-blue-500/30 flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-white font-black text-xs uppercase tracking-widest",children:"LIVE"}),i&&l.jsx("span",{className:"text-[9px] text-blue-400 font-bold ml-1 animate-pulse",children:"AUTO-ZOOM"})]}),l.jsxs("div",{className:"flex gap-3 pointer-events-auto",children:[l.jsx("button",{onClick:e,className:"w-10 h-10 bg-gray-800/60 backdrop-blur-md rounded-full text-white border border-white/10 flex items-center justify-center active:scale-90 transition-all hover:bg-gray-700/60",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),h&&l.jsx("button",{onClick:r,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all backdrop-blur-md border ${a?"bg-yellow-500 text-black border-yellow-400 shadow-[0_0_15px_rgba(234,179,8,0.5)]":"bg-gray-800/60 text-gray-300 border-white/10"}`,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),l.jsx("button",{onClick:n,className:"w-10 h-10 bg-gray-800/60 backdrop-blur-md rounded-full text-white border border-white/10 flex items-center justify-center active:scale-90 transition-all hover:bg-red-500/80 hover:border-red-500/50",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})]})},gh=({zoom:n,zoomCapabilities:e,handleZoomChange:r,scanMode:a,setScanMode:o,onOpenHistory:i,onUpload:h})=>{const c=ve.useRef(null),d=e&&e.min<1,g=e&&e.max>=2,w=e&&e.max>=5,m=v=>{v.target.files&&v.target.files[0]&&(h(v.target.files[0]),v.target.value="")};return l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 z-40 bg-gradient-to-t from-black via-black/90 to-transparent flex flex-col gap-5 pointer-events-none",style:{paddingBottom:"max(1.5rem, env(safe-area-inset-bottom))"},children:[e&&l.jsxs("div",{className:"flex justify-center items-center gap-4 pointer-events-auto mb-1 animate-fade-in-up",children:[d&&l.jsx("button",{onClick:()=>r(.5),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(n-.5)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:".5"}),l.jsx("button",{onClick:()=>r(1),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(n-1)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"1x"}),g&&l.jsx("button",{onClick:()=>r(2),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(n-2)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"2"}),w&&l.jsx("button",{onClick:()=>r(5),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(n-5)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"5"})]}),e&&l.jsxs("div",{className:"flex items-center gap-3 px-2 pointer-events-auto",children:[l.jsxs("span",{className:"text-[9px] font-black text-gray-500 w-6 text-center",children:[e.min,"x"]}),l.jsx("input",{type:"range",min:e.min,max:e.max,step:e.step,value:n,onChange:v=>r(parseFloat(v.target.value)),className:"flex-1 h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500"}),l.jsxs("span",{className:"text-[9px] font-black text-gray-500 w-6 text-center",children:[e.max,"x"]})]}),l.jsxs("div",{className:"flex justify-between items-center gap-3 pointer-events-auto px-2",children:[l.jsx("input",{type:"file",accept:"image/*",ref:c,className:"hidden",onChange:m}),l.jsx("button",{onClick:()=>{var v;return(v=c.current)==null?void 0:v.click()},className:"w-12 h-12 rounded-2xl bg-gray-800 border border-white/10 flex items-center justify-center text-gray-400 active:scale-90 transition-all shadow-lg hover:text-white",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),l.jsxs("div",{className:"flex bg-gray-800 p-1.5 rounded-2xl border border-white/10 shadow-lg flex-grow max-w-[200px]",children:[l.jsx("button",{onClick:()=>o("single"),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all duration-300 ${a==="single"?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,children:"Single"}),l.jsx("button",{onClick:()=>o("increment"),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all duration-300 ${a==="increment"?"bg-emerald-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,children:"Multi"})]}),l.jsx("div",{className:"w-12"})]}),l.jsx("div",{className:"w-full flex justify-center pb-2 cursor-pointer opacity-70 hover:opacity-100 transition-opacity pointer-events-auto",onClick:i,children:l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("div",{className:"w-10 h-1 bg-gray-600 rounded-full"}),l.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase tracking-widest",children:"Swipe for History"})]})})]})},mh=({onClose:n,onCodeScanned:e,scanMode:r,setScanMode:a,productsInOrder:o,masterProducts:i})=>{var Y;const[h,c]=ve.useState([]),[d,g]=ve.useState(!1),[w,m]=ve.useState(null),[v,p]=ve.useState(!1),[L,P]=ve.useState(null),A=ve.useRef(null),x=ve.useRef(null),j=ve.useRef(null),y=ve.useRef(0),C=ve.useRef(1),R=ve.useRef(0);ve.useEffect(()=>(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[]);const B=ve.useCallback(J=>{p(!0),setTimeout(()=>p(!1),400);const Z=i.find(le=>le.Barcode&&le.Barcode.trim()===J.trim());if(c(le=>{const ce=le.findIndex(Ne=>Ne.code===J),de=Date.now();if(ce>-1){const Ne=[...le];return Ne[ce]={...Ne[ce],count:Ne[ce].count+1,timestamp:de},[Ne.splice(ce,1)[0],...Ne]}return[{code:J,product:Z,timestamp:de,count:1},...le]}),Z){const le=o.find(ce=>ce.name===Z.ProductName);r==="single"&&le?m({status:"warning",message:"មានក្នុងបញ្ជីរួចហើយ",product:Z}):(e(J),m({status:"success",message:"បានបន្ថែមជោគជ័យ",product:Z}))}else m({status:"error",message:`រកមិនឃើញ: ${J}`,product:void 0});setTimeout(()=>m(null),2e3)},[i,o,r,e]),{isInitializing:_,error:M,zoom:H,zoomCapabilities:K,handleZoomChange:S,isTorchOn:N,isTorchSupported:U,toggleTorch:$,trackingBox:ee,isAutoZooming:E,triggerFocus:T,switchCamera:G,scanFromImage:V}=hh("barcode-reader-container",B),re=J=>{if(J.touches.length===2){const Z=Math.hypot(J.touches[0].pageX-J.touches[1].pageX,J.touches[0].pageY-J.touches[1].pageY);A.current=Z,C.current=H}else if(J.touches.length===1){x.current=J.touches[0].clientY,j.current=J.touches[0].clientX,y.current=Date.now();const Z=Date.now();Z-R.current<300&&K&&S(K.min||1),R.current=Z}},se=J=>{if(J.touches.length===2&&A.current!==null&&K){const le=Math.hypot(J.touches[0].pageX-J.touches[1].pageX,J.touches[0].pageY-J.touches[1].pageY)/A.current,ce=K.max-K.min,de=(le-1)*ce*.8;S(C.current+de)}else if(J.touches.length===1&&x.current!==null){const Z=J.touches[0].clientY-x.current;Z<-50&&!d?(g(!0),x.current=null):Z>50&&d&&(g(!1),x.current=null)}},k=J=>{if(j.current!==null&&x.current!==null){const Z=J.changedTouches[0].clientX,le=J.changedTouches[0].clientY,ce=Math.abs(Z-j.current),de=Math.abs(le-x.current);Date.now()-y.current<300&&ce<15&&de<15&&(P({x:Z,y:le}),T(),setTimeout(()=>P(null),1e3))}A.current=null,x.current=null,j.current=null},z=async J=>{try{const Z=await V(J);B(Z)}catch{m({status:"error",message:"រកមិនឃើញ Barcode ក្នុងរូបភាព",product:void 0}),setTimeout(()=>m(null),2e3)}};return l.jsxs("div",{className:"fixed inset-0 bg-black z-[100] flex flex-col animate-fade-in touch-none overflow-hidden h-screen",style:{height:"100dvh"},onTouchStart:re,onTouchMove:se,onTouchEnd:k,children:[l.jsx("style",{children:`
              #barcode-reader-container { width: 100%; height: 100%; background: #000; overflow: hidden; }
              #barcode-reader-container video { object-fit: cover; width: 100%; height: 100%; }
              @keyframes pop-in { 0% { transform: translate(-50%, -40%) scale(0.8); opacity: 0; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; } }
              .animate-pop-in { animation: pop-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
            `}),l.jsx(ph,{onClose:n,onSwitchCamera:G,onToggleTorch:$,isTorchOn:N,isTorchSupported:U,isAutoZooming:E}),l.jsxs("div",{className:"relative flex-grow w-full overflow-hidden bg-black",children:[l.jsx("div",{id:"barcode-reader-container"}),l.jsx(dh,{isScanning:_,error:M,scanSuccessFlash:v,zoom:H,useSimulatedZoom:!1,trackingBox:ee,focusPoint:L}),w&&l.jsx("div",{className:"absolute top-1/2 left-1/2 w-[85%] max-w-sm z-50 animate-pop-in transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",children:l.jsxs("div",{className:`
                            bg-gray-900/95 backdrop-blur-2xl border p-4 rounded-3xl shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex items-center gap-4
                            ${w.status==="success"?"border-emerald-500 shadow-emerald-900/30":w.status==="warning"?"border-yellow-500 shadow-yellow-900/30":"border-red-500 shadow-red-900/30"}
                        `,children:[w.product?l.jsx("div",{className:"w-14 h-14 rounded-2xl bg-black border border-white/10 overflow-hidden flex-shrink-0",children:l.jsx("img",{src:st(w.product.ImageURL),className:"w-full h-full object-cover",alt:""})}):l.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gray-800 flex items-center justify-center text-red-400",children:l.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:2})})}),l.jsxs("div",{className:"min-w-0 flex-grow",children:[l.jsx("p",{className:`text-[10px] font-black uppercase tracking-widest mb-0.5 ${w.status==="success"?"text-emerald-400":w.status==="warning"?"text-yellow-400":"text-red-400"}`,children:w.status==="success"?"SUCCESS":w.status==="warning"?"ALREADY ADDED":"ERROR"}),l.jsx("h3",{className:"text-white font-bold text-sm truncate",children:((Y=w.product)==null?void 0:Y.ProductName)||"Unknown Product"}),w.product&&l.jsxs("p",{className:"text-white font-mono font-black text-lg mt-0.5",children:["$",w.product.Price.toFixed(2)]})]})]})}),M&&l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 z-30 p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-500/20 text-red-500 rounded-full flex items-center justify-center mb-4",children:l.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:2})})}),l.jsx("p",{className:"text-red-400 font-bold text-sm",children:M})]}),_&&l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black z-30",children:[l.jsx(Rn,{size:"lg"}),l.jsx("p",{className:"text-blue-500 font-black text-[10px] uppercase tracking-widest mt-4 animate-pulse",children:"Initializing..."})]})]}),!d&&l.jsx(gh,{zoom:H,zoomCapabilities:K,handleZoomChange:S,scanMode:r,setScanMode:a,onOpenHistory:()=>g(!0),onUpload:z}),l.jsx(fh,{history:h,isOpen:d,setIsOpen:g,onClear:()=>c([])})]})},_h=({order:n,onSaveSuccess:e,onCancel:r})=>{const{appData:a,currentUser:o,previewImage:i,refreshData:h}=ve.useContext(za),[c,d]=ve.useState(n),[g,w]=ve.useState(!1),[m,v]=ve.useState(""),[p,L]=ve.useState(""),[P,A]=ve.useState(!1),[x,j]=ve.useState("increment"),[y,C]=ve.useState(""),[R,B]=ve.useState("");ve.useEffect(()=>{d(n)},[n]),ve.useEffect(()=>{var ee;if(c["Payment Status"]==="Paid"&&c["Payment Info"]){const E=(ee=a.bankAccounts)==null?void 0:ee.find(T=>T.BankName===c["Payment Info"]);E&&L(st(E.LogoURL))}},[c["Payment Status"],c["Payment Info"],a.bankAccounts]);const _=(ee,E)=>{const T=ee.reduce((se,k)=>se+(k.total||0),0),G=T+E,V=ee.reduce((se,k)=>se+(k.cost||0)*(k.quantity||0),0),re=ee.reduce((se,k)=>se+(k.originalPrice-k.finalPrice)*k.quantity,0);return{Subtotal:T,"Grand Total":G,"Total Product Cost ($)":V,"Discount ($)":re}},M=()=>{d(ee=>{const E={id:Date.now()+Math.random(),name:"",quantity:1,originalPrice:0,finalPrice:0,total:0,discountPercent:0,colorInfo:"",image:"",cost:0,tags:""},T=[...ee.Products,E],G=parseFloat(String(ee["Shipping Fee (Customer)"]))||0,V=_(T,G);return{...ee,Products:T,...V}})},H=ee=>{if(c.Products.length<=1){alert("មិនអាចលុបផលិតផលចុងក្រោយបានទេ (Cannot remove last item)");return}d(E=>{const T=E.Products.filter((re,se)=>se!==ee),G=Number(E["Shipping Fee (Customer)"])||0,V=_(T,G);return{...E,Products:T,...V}})},K=ee=>{const E=a.products.find(T=>T.Barcode&&T.Barcode.trim()===ee.trim());E&&(d(T=>{const G=[...T.Products],V=G.findIndex(k=>k.name===E.ProductName);if(V>-1){if(x==="increment"){const k={...G[V]};k.quantity=(Number(k.quantity)||0)+1,k.total=k.quantity*(Number(k.finalPrice)||0),G[V]=k}}else{const k={id:Date.now(),name:E.ProductName,quantity:1,originalPrice:E.Price,finalPrice:E.Price,total:E.Price,discountPercent:0,colorInfo:"",image:E.ImageURL,cost:E.Cost,tags:E.Tags};G.push(k)}const re=parseFloat(String(T["Shipping Fee (Customer)"]))||0,se=_(G,re);return{...T,Products:G,...se}}),x==="single"&&A(!1))},S=ee=>{const{name:E,value:T}=ee.target;d(G=>{let V=T;E==="Customer Phone"?(V=T.replace(/[^0-9]/g,""),V.length>0&&!V.startsWith("0")&&(V="0"+V)):(E==="Shipping Fee (Customer)"||E==="Internal Cost")&&(T===""||T.endsWith(".")?V=T:V=Math.max(0,parseFloat(T)||0));const re={...G,[E]:V};if(E==="Shipping Fee (Customer)"){const se=parseFloat(String(V))||0,k=_(re.Products,se);return{...re,...k}}return E==="Payment Status"&&V==="Unpaid"&&(re["Payment Info"]="",L("")),re})},N=(ee,E,T,G)=>{d(V=>{const re=[...V.Products],se={...re[ee]};if(E==="name"){se.name=T;const Z=a.products.find(le=>le.ProductName===T);Z?(se.originalPrice=Z.Price,se.finalPrice=Z.Price,se.cost=Z.Cost,se.image=Z.ImageURL,se.tags=G!==void 0?G:Z.Tags):(se.originalPrice=0,se.finalPrice=0,se.cost=0,se.image="",se.tags="")}else E==="finalPrice"||E==="quantity"?T===""||String(T).endsWith(".")?se[E]=T:se[E]=Math.max(E==="quantity"?1:0,parseFloat(T)||0):se[E]=T;const k=parseFloat(String(se.quantity))||0,z=parseFloat(String(se.finalPrice))||0;se.total=k*z,re[ee]=se;const Y=parseFloat(String(V["Shipping Fee (Customer)"]))||0,J=_(re,Y);return{...V,Products:re,...J}})},U=async()=>{if(window.confirm(`តើអ្នកពិតជាចង់លុបប្រតិបត្តិការណ៍ ID: ${c["Order ID"]} មែនទេ?`)&&o)try{const ee=await fetch(`${qa}/api/admin/delete-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:c["Order ID"],team:c.Team,userName:o.UserName,telegramMessageId1:c["Telegram Message ID 1"],telegramMessageId2:c["Telegram Message ID 2"],telegramChatId:c.TelegramValue})}),E=await ee.json();if(!ee.ok||E.status!=="success")throw new Error(E.message||"Delete failed");await h(),e()}catch(ee){v(`លុបមិនបានសម្រេច: ${ee.message}`)}},$=async ee=>{var T;if(ee.preventDefault(),w(!0),v(""),!c.Products.every(G=>G.name&&parseFloat(String(G.quantity))>0)){v("សូមពិនិត្យព័ត៌មានផលិតផល (ឈ្មោះ និងចំនួន)។"),w(!1);return}const E=(T=a.shippingMethods)==null?void 0:T.find(G=>G.MethodName===c["Internal Shipping Method"]);if(E!=null&&E.RequireDriverSelection&&!c["Internal Shipping Details"]){v("សូមជ្រើសរើសអ្នកដឹក (Driver) សម្រាប់សេវាកម្មនេះ។"),w(!1);return}try{const G=parseFloat(String(c["Shipping Fee (Customer)"]))||0,V=_(c.Products,G),re={...c,"Shipping Fee (Customer)":G,Subtotal:V.Subtotal,"Grand Total":V["Grand Total"],"Internal Cost":parseFloat(String(c["Internal Cost"]))||0,"Discount ($)":V["Discount ($)"],"Total Product Cost ($)":V["Total Product Cost ($)"],IsVerified:!!c.IsVerified},se=c.Products.map(Y=>({...Y,quantity:parseFloat(String(Y.quantity))||0,finalPrice:parseFloat(String(Y.finalPrice))||0,total:(parseFloat(String(Y.quantity))||0)*(parseFloat(String(Y.finalPrice))||0)}));re["Products (JSON)"]=JSON.stringify(se);const k=await fetch(`${qa}/api/admin/update-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:c["Order ID"],team:c.Team,userName:o==null?void 0:o.UserName,newData:re})}),z=await k.json();if(!k.ok||z.status!=="success")throw new Error(z.message||"Update failed");await h(),e()}catch(G){v(`រក្សាទុកមិនបានសម្រេច: ${G.message}`)}finally{w(!1)}};return l.jsxs("div",{className:"w-full h-full lg:h-[calc(100vh-40px)] flex flex-col animate-fade-in lg:overflow-hidden",children:[P&&l.jsx(mh,{onClose:()=>A(!1),onCodeScanned:K,scanMode:x,setScanMode:j,productsInOrder:c.Products,masterProducts:a.products}),l.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 px-1 lg:px-4 pt-2",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-black text-white uppercase tracking-tighter italic flex items-center gap-3",children:[l.jsx("span",{className:"w-1.5 h-6 bg-blue-600 rounded-full"}),"Edit Order"]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsxs("span",{className:"text-[10px] font-mono font-bold text-gray-500 bg-gray-900 px-2 py-0.5 rounded border border-gray-800",children:["#",c["Order ID"]]}),l.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:c.Team})]})]}),l.jsx("button",{onClick:r,className:"px-6 py-2.5 bg-gray-800 border border-gray-700 hover:bg-gray-700 text-gray-400 font-black rounded-xl uppercase text-[10px] tracking-widest transition-all",children:"បោះបង់"})]}),m&&l.jsxs("div",{className:"flex-shrink-0 mb-4 mx-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 flex items-center gap-3 animate-shake",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:"2"})}),l.jsx("span",{className:"font-bold text-xs",children:m})]}),l.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-6 overflow-hidden px-1 lg:px-4 pb-4",children:[l.jsx("div",{className:"w-full lg:w-[380px] xl:w-[420px] flex-shrink-0 h-full overflow-hidden",children:l.jsx(ih,{formData:c,appData:a,onChange:S,onProvinceSelect:ee=>{d(E=>({...E,Location:ee})),C(""),B("")},onDistrictChange:ee=>{C(ee),B("")},onSangkatChange:B,onShippingMethodSelect:ee=>d(E=>({...E,"Internal Shipping Method":ee.MethodName,"Internal Shipping Details":ee.RequireDriverSelection?"":ee.MethodName})),onDriverSelect:ee=>d(E=>({...E,"Internal Shipping Details":ee})),onBankChange:ee=>{var G;const E=ee.target.value;d(V=>({...V,"Payment Info":E}));const T=(G=a.bankAccounts)==null?void 0:G.find(V=>V.BankName===E);L(T?st(T.LogoURL):"")},selectedDistrict:y,selectedSangkat:R,bankLogo:p})}),l.jsxs("div",{className:"flex-1 flex flex-col gap-4 overflow-hidden h-full",children:[l.jsx(oh,{products:c.Products,masterProducts:a.products,onProductChange:N,onAddProduct:M,onRemoveProduct:H,onPreviewImage:i,onScanBarcode:()=>A(!0)}),l.jsx(lh,{subtotal:Number(c.Subtotal)||0,grandTotal:Number(c["Grand Total"])||0,shippingFee:c["Shipping Fee (Customer)"],onShippingFeeChange:S,onSave:$,onDelete:U,loading:g})]})]})]})},bh=n=>ve.useMemo(()=>n.reduce((e,r)=>({grandTotal:e.grandTotal+(Number(r["Grand Total"])||0),internalCost:e.internalCost+(Number(r["Internal Cost"])||0),count:e.count+1,paidCount:e.paidCount+(r["Payment Status"]==="Paid"?1:0),unpaidCount:e.unpaidCount+(r["Payment Status"]==="Unpaid"?1:0)}),{grandTotal:0,internalCost:0,count:0,paidCount:0,unpaidCount:0}),[n]),xh=({totals:n,isVisible:e,showSelection:r})=>n.count===0?null:l.jsxs("tr",{className:"bg-blue-900/30 border-b-2 border-blue-500/20 sticky top-0 z-20 backdrop-blur-md shadow-lg",children:[r&&l.jsx("td",{className:"px-4 py-4"}),e("index")&&l.jsx("td",{className:"px-4 py-4 text-center font-black text-blue-400 text-[clamp(12px,0.9vw,14px)]",children:n.count}),e("actions")&&l.jsx("td",{className:"px-4 py-4"}),e("customerName")&&l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:"font-black text-white uppercase tracking-widest text-[clamp(11px,0.8vw,13px)]",children:"Grand Total (សរុបរួម)"})}),e("productInfo")&&l.jsx("td",{className:"px-6 py-4"}),e("location")&&l.jsx("td",{className:"px-6 py-4"}),e("pageInfo")&&l.jsx("td",{className:"px-6 py-4"}),e("fulfillment")&&l.jsx("td",{className:"px-6 py-4"}),e("total")&&l.jsx("td",{className:"px-6 py-4",children:l.jsxs("span",{className:"font-black text-emerald-400 tracking-tighter shadow-emerald-500/20 drop-shadow-sm text-[clamp(16px,1.2vw,20px)]",children:["$",n.grandTotal.toLocaleString(void 0,{minimumFractionDigits:2})]})}),e("shippingService")&&l.jsx("td",{className:"px-6 py-4"}),e("shippingCost")&&l.jsx("td",{className:"px-6 py-4",children:l.jsxs("span",{className:"font-black text-orange-400 font-mono text-[clamp(13px,0.9vw,15px)]",children:["$",n.internalCost.toLocaleString(void 0,{minimumFractionDigits:2})]})}),e("status")&&l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex flex-col gap-1.5 items-start",children:[n.paidCount>0&&l.jsxs("span",{className:"font-black text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20 uppercase tracking-wider whitespace-nowrap text-[clamp(10px,0.7vw,12px)]",children:["Paid: ",n.paidCount]}),n.unpaidCount>0&&l.jsxs("span",{className:"font-black text-red-400 bg-red-500/10 px-2 py-0.5 rounded border border-red-500/20 uppercase tracking-wider whitespace-nowrap text-[clamp(10px,0.7vw,12px)]",children:["Unpaid: ",n.unpaidCount]})]})}),e("date")&&l.jsx("td",{className:"px-4 py-4"}),e("print")&&l.jsx("td",{className:"px-4 py-4"}),e("check")&&l.jsx("td",{className:"px-2 py-4"}),e("orderId")&&l.jsx("td",{className:"px-2 py-4"})]}),ic=({totals:n})=>n.count===0?null:l.jsxs("div",{className:"bg-blue-900/20 backdrop-blur-xl border border-blue-500/30 rounded-[2.2rem] p-5 shadow-2xl relative overflow-hidden animate-fade-in",children:[l.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h3",{className:"text-sm font-black text-blue-300 uppercase tracking-widest flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-4 bg-blue-500 rounded-full"}),"Grand Total"]}),l.jsxs("span",{className:"text-[10px] font-bold text-gray-400 bg-black/30 px-3 py-1 rounded-full",children:[n.count," Orders"]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl border border-white/5",children:[l.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase mb-1",children:"Total Revenue"}),l.jsxs("p",{className:"text-xl font-black text-emerald-400 tracking-tighter",children:["$",n.grandTotal.toLocaleString()]})]}),l.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl border border-white/5",children:[l.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase mb-1",children:"Total Cost"}),l.jsxs("p",{className:"text-lg font-black text-orange-400 tracking-tighter",children:["$",n.internalCost.toLocaleString()]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex-1 bg-emerald-500/10 p-2 rounded-xl border border-emerald-500/20 flex justify-between items-center px-3",children:[l.jsx("span",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-widest",children:"PAID"}),l.jsx("span",{className:"text-sm font-black text-white",children:n.paidCount})]}),l.jsxs("div",{className:"flex-1 bg-red-500/10 p-2 rounded-xl border border-red-500/20 flex justify-between items-center px-3",children:[l.jsx("span",{className:"text-[9px] font-black text-red-500 uppercase tracking-widest",children:"UNPAID"}),l.jsx("span",{className:"text-sm font-black text-white",children:n.unpaidCount})]})]})]}),vh=({orders:n,totals:e,visibleColumns:r,selectedIds:a,onToggleSelect:o,onToggleSelectAll:i,onEdit:h,handlePrint:c,handleCopy:d,copiedId:g,toggleOrderVerified:w,updatingIds:m})=>{const{appData:v,previewImage:p}=ve.useContext(za),L=ve.useRef(null),[P,A]=ve.useState(0),x=88,j=5,y=N=>!r||r.has(N),C=n.length>0&&n.every(N=>a.has(N["Order ID"])),{virtualItems:R,totalHeight:B,paddingTop:_}=ve.useMemo(()=>{var G;const N=n.length*x,U=((G=L.current)==null?void 0:G.clientHeight)||800;let $=Math.floor(P/x),ee=Math.min(n.length-1,Math.floor((P+U)/x));$=Math.max(0,$-j),ee=Math.min(n.length-1,ee+j);const E=[];for(let V=$;V<=ee;V++)E.push({index:V,data:n[V]});const T=$*x;return{virtualItems:E,totalHeight:N,paddingTop:T}},[n,P]),M=N=>{A(N.currentTarget.scrollTop)},H=N=>{if(!N||!v.phoneCarriers)return null;const $=N.replace(/\s/g,"").substring(0,3),ee=v.phoneCarriers.find(E=>E.Prefixes.split(",").map(T=>T.trim()).includes($));return ee?st(ee.CarrierLogoURL):null},K=N=>{if(!N||!v.shippingMethods)return null;const U=v.shippingMethods.find($=>$.MethodName===N);return U?st(U.LogosURL):null},S=N=>{let U=(N||"").replace(/[^0-9]/g,"");return U.length>0&&(U="0"+U.replace(/^0+/,"")),U};return l.jsxs("div",{className:"page-card !p-0 shadow-2xl border-white/5 bg-gray-900/60 backdrop-blur-3xl rounded-[2.5rem] flex flex-col h-[calc(100vh-220px)]",children:[l.jsx("div",{className:"flex-shrink-0 z-20 bg-gray-900 rounded-t-[2.5rem] border-b border-white/10",children:l.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed"},children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-800/80",children:[i&&l.jsx("th",{className:"px-4 py-6 w-12 text-center",children:l.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-600 bg-gray-900 text-blue-500 cursor-pointer focus:ring-blue-500/20",checked:C,onChange:()=>i(n.map(N=>N["Order ID"]))})}),y("index")&&l.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-12 text-[clamp(10px,0.8vw,12px)]",children:"#"}),y("actions")&&l.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-24 text-[clamp(10px,0.8vw,12px)]",children:"Command"}),y("customerName")&&l.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-56 text-[clamp(10px,0.8vw,12px)]",children:"Merchant/Client"}),y("productInfo")&&l.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-44 text-[clamp(10px,0.8vw,12px)]",children:"Assets"}),y("location")&&l.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-52 text-[clamp(10px,0.8vw,12px)]",children:"Geography"}),y("pageInfo")&&l.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-44 text-[clamp(10px,0.8vw,12px)]",children:"Source Page"}),y("fulfillment")&&l.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Fulfillment"}),y("total")&&l.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Valuation"}),y("shippingService")&&l.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-48 text-[clamp(10px,0.8vw,12px)]",children:"Logistics"}),y("shippingCost")&&l.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-28 text-[clamp(10px,0.8vw,12px)]",children:"Exp. Cost"}),y("status")&&l.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Status"}),y("date")&&l.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-24 text-[clamp(10px,0.8vw,12px)]",children:"Time"}),y("print")&&l.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-16 text-[clamp(10px,0.8vw,12px)]",children:"P"}),y("check")&&l.jsx("th",{className:"px-2 py-6 font-normal uppercase tracking-[0.15em] text-center text-emerald-500/80 w-14 text-[9px]",children:"VERIFIED"}),y("orderId")&&l.jsx("th",{className:"px-2 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-16 text-[clamp(10px,0.8vw,12px)]",children:"Node ID"})]})}),l.jsx("tbody",{className:"bg-[#0f172a]",children:l.jsx(xh,{totals:e,isVisible:y,showSelection:!!o})})]})}),l.jsx("div",{ref:L,className:"flex-grow overflow-y-auto custom-scrollbar",onScroll:M,children:l.jsx("div",{style:{height:`${B}px`,position:"relative"},children:l.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed",transform:`translateY(${_}px)`},children:[l.jsx("thead",{className:"invisible h-0",children:l.jsxs("tr",{children:[i&&l.jsx("th",{className:"w-12"}),y("index")&&l.jsx("th",{className:"w-12"}),y("actions")&&l.jsx("th",{className:"w-24"}),y("customerName")&&l.jsx("th",{className:"w-56"}),y("productInfo")&&l.jsx("th",{className:"w-44"}),y("location")&&l.jsx("th",{className:"w-52"}),y("pageInfo")&&l.jsx("th",{className:"w-44"}),y("fulfillment")&&l.jsx("th",{className:"w-32"}),y("total")&&l.jsx("th",{className:"w-32"}),y("shippingService")&&l.jsx("th",{className:"w-48"}),y("shippingCost")&&l.jsx("th",{className:"w-28"}),y("status")&&l.jsx("th",{className:"w-32"}),y("date")&&l.jsx("th",{className:"w-24"}),y("print")&&l.jsx("th",{className:"w-16"}),y("check")&&l.jsx("th",{className:"w-14"}),y("orderId")&&l.jsx("th",{className:"w-16"})]})}),l.jsx("tbody",{className:"divide-y divide-white/5",children:R.map(({index:N,data:U})=>{var le;const $=(le=v.pages)==null?void 0:le.find(ce=>ce.PageName===U.Page),ee=$?st($.PageLogoURL):"",E=S(U["Customer Phone"]),T=H(E),G=g===U["Order ID"],V=K(U["Internal Shipping Method"]),re=U["Order ID"],se=U.IsVerified===!0||String(U.IsVerified).toUpperCase()==="TRUE",k=m.has(re),z=a.has(re),Y=N>n.length-3&&n.length>4,J=Y?"bottom-full mb-3":"top-full mt-3",Z=Y?"-bottom-2 border-r border-b":"-top-2 border-t border-l";return l.jsxs("tr",{className:`${se?"bg-emerald-500/[0.03]":z?"bg-blue-500/10":"hover:bg-white/[0.02]"} transition-all group relative`,style:{height:`${x}px`},children:[o&&l.jsx("td",{className:"px-4 py-5 text-center",children:l.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-700 bg-gray-950 text-blue-500 cursor-pointer transition-all",checked:z,onChange:()=>o(re)})}),y("index")&&l.jsx("td",{className:"px-4 py-5 text-center font-bold text-gray-600 text-[clamp(11px,0.8vw,13px)]",children:N+1}),y("actions")&&l.jsx("td",{className:"px-4 py-5 text-center",children:l.jsx("button",{onClick:()=>h&&h(U),className:"text-blue-400/80 hover:text-white bg-blue-400/5 hover:bg-blue-600 px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border border-blue-400/10 active:scale-95 shadow-md",children:"Edit"})}),y("customerName")&&l.jsxs("td",{className:"px-6 py-5",children:[l.jsx("div",{className:"font-black text-gray-100 truncate mb-1 leading-tight tracking-tight text-[clamp(14px,1.1vw,16px)]",children:U["Customer Name"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[T&&l.jsx("img",{src:T,className:"w-4 h-4 object-contain opacity-80",alt:"carrier"}),l.jsx("div",{className:"text-blue-400/80 font-mono font-black tracking-tighter text-[clamp(12px,0.9vw,14px)]",children:E})]})]}),y("productInfo")&&l.jsx("td",{className:"px-6 py-5 relative overflow-visible",children:l.jsxs("div",{className:"group/prod flex flex-col gap-1 cursor-help",children:[U.Products.slice(0,2).map((ce,de)=>l.jsxs("div",{className:"bg-black/40 p-1.5 rounded-lg border border-white/5 flex flex-col",children:[l.jsx("span",{className:"font-bold text-gray-300 line-clamp-1 text-[clamp(11px,0.8vw,12px)]",children:ce.name}),l.jsxs("span",{className:"text-blue-400/80 font-black mt-0.5 text-[clamp(10px,0.7vw,11px)]",children:["x",ce.quantity]})]},de)),U.Products.length>2&&l.jsxs("p",{className:"text-[8px] text-gray-600 font-black ml-1 uppercase tracking-widest",children:["+ ",U.Products.length-2," items"]}),l.jsxs("div",{className:`invisible group-hover/prod:visible opacity-0 group-hover/prod:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${J} w-80 p-5 bg-[#1a2235] border border-white/10 rounded-[2.5rem] shadow-[0_40px_100px_rgba(0,0,0,0.8)] transition-all duration-300 pointer-events-none backdrop-blur-3xl`,children:[l.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-[0.3em] mb-4 border-b border-white/5 pb-3",children:"Operational Asset Data"}),l.jsx("div",{className:"space-y-3 max-h-[350px] overflow-y-auto custom-scrollbar pr-1",children:U.Products.map((ce,de)=>{var Ae;const Ne=(Ae=v.products)==null?void 0:Ae.find(Pe=>Pe.ProductName===ce.name),Se=ce.image||(Ne==null?void 0:Ne.ImageURL)||"";return l.jsxs("div",{className:"flex items-center gap-4 text-left p-2.5 bg-black/30 rounded-2xl border border-white/5",children:[l.jsx("div",{className:"w-14 h-14 flex-shrink-0 bg-gray-900 rounded-xl border border-gray-800 overflow-hidden shadow-inner",children:l.jsx("img",{src:st(Se),className:"w-full h-full object-cover",alt:ce.name,onError:Pe=>Pe.currentTarget.src="https://placehold.co/100x100/1f2937/4b5563?text=N/A"})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"font-black text-white leading-tight mb-1 line-clamp-2 text-xs",children:ce.name}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2.5 py-0.5 rounded-lg border border-blue-500/10",children:["x",ce.quantity]}),ce.colorInfo&&l.jsxs("span",{className:"text-[9px] text-purple-400 font-bold uppercase",children:["Node: ",ce.colorInfo]})]})]})]},de)})}),l.jsx("div",{className:`absolute ${Z} left-1/2 -translate-x-1/2 w-5 h-5 bg-[#1a2235] border-white/10 rotate-45`})]})]})}),y("location")&&l.jsx("td",{className:"px-6 py-5 relative overflow-visible",children:l.jsxs("div",{className:"group/loc cursor-help",children:[l.jsx("div",{className:"font-black text-gray-200 leading-tight truncate text-[clamp(12px,0.9vw,14px)]",children:U.Location}),l.jsx("div",{className:"font-bold text-gray-600 mt-1 line-clamp-1 text-[clamp(10px,0.7vw,12px)]",children:U["Address Details"]}),l.jsxs("div",{className:`invisible group-hover/loc:visible opacity-0 group-hover/loc:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${J} w-72 p-5 bg-[#1a2235] border border-white/10 rounded-[2.5rem] shadow-[0_40px_100px_rgba(0,0,0,0.8)] transition-all duration-300 pointer-events-none backdrop-blur-3xl`,children:[l.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-[0.3em] mb-3 border-b border-white/5 pb-2",children:"Geographic Assignment"}),l.jsxs("div",{className:"space-y-4 text-left",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-[8px] font-black text-gray-600 uppercase tracking-widest",children:"Region Node"}),l.jsx("p",{className:"text-sm font-black text-white mt-0.5",children:U.Location})]}),l.jsxs("div",{className:"bg-black/30 p-3.5 rounded-2xl border border-white/5",children:[l.jsx("span",{className:"text-[8px] font-black text-gray-600 uppercase block mb-1.5 tracking-widest",children:"Local Matrix"}),l.jsx("p",{className:"text-[11px] text-gray-300 leading-relaxed font-bold",children:U["Address Details"]||"No precise location data"})]})]}),l.jsx("div",{className:`absolute ${Z} left-1/2 -translate-x-1/2 w-5 h-5 bg-[#1a2235] border-white/10 rotate-45`})]})]})}),y("pageInfo")&&l.jsx("td",{className:"px-6 py-5",children:l.jsxs("div",{className:"flex items-center gap-3",children:[ee?l.jsx("img",{src:ee,className:"w-8 h-8 rounded-full border border-white/10 shadow-sm object-cover",alt:"logo"}):l.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border border-white/5 flex items-center justify-center text-[7px] text-gray-600 font-bold uppercase",children:"Null"}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("span",{className:"font-black text-gray-300 block truncate leading-none mb-1 text-[clamp(12px,0.9vw,13px)]",children:U.Page}),l.jsx("span",{className:"text-[9px] text-gray-600 uppercase font-black tracking-widest",children:U.Team})]})]})}),y("fulfillment")&&l.jsx("td",{className:"px-6 py-5",children:l.jsx("span",{className:"font-bold text-gray-300 bg-gray-800 px-2 py-1 rounded border border-white/5 text-[clamp(11px,0.8vw,12px)]",children:U["Fulfillment Store"]})}),y("total")&&l.jsxs("td",{className:"px-6 py-5 font-black text-blue-400 tracking-tighter text-[clamp(16px,1.2vw,18px)]",children:["$",U["Grand Total"].toFixed(2)]}),y("shippingService")&&l.jsx("td",{className:"px-6 py-5",children:l.jsxs("div",{className:"flex items-center gap-2.5",children:[V&&l.jsx("img",{src:V,className:"w-5 h-5 rounded-lg object-contain bg-gray-950 p-0.5 border border-white/5",alt:"shipping"}),l.jsx("span",{className:"text-orange-400/80 font-black uppercase truncate tracking-tight text-[clamp(10px,0.8vw,12px)]",children:U["Internal Shipping Method"]||"-"})]})}),y("shippingCost")&&l.jsxs("td",{className:"px-6 py-5 text-gray-400 font-mono font-black tracking-tighter text-[clamp(13px,0.9vw,15px)]",children:["$",(Number(U["Internal Cost"])||0).toFixed(2)]}),y("status")&&l.jsx("td",{className:"px-6 py-5",children:l.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border ${U["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:U["Payment Status"]})}),y("date")&&l.jsx("td",{className:"px-4 py-5",children:l.jsxs("div",{className:"flex flex-col items-start",children:[l.jsx("span",{className:"font-bold text-gray-400 text-[clamp(11px,0.8vw,12px)]",children:new Date(U.Timestamp).toLocaleDateString("km-KH")}),l.jsx("span",{className:"font-mono text-blue-500/80 font-black text-[clamp(10px,0.7vw,11px)]",children:new Date(U.Timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]})}),y("print")&&l.jsx("td",{className:"px-4 py-5 text-center",children:l.jsx("button",{onClick:()=>c(U),className:"text-emerald-400/60 hover:text-white bg-emerald-400/5 hover:bg-emerald-600 p-2.5 rounded-xl transition-all border border-emerald-400/10 active:scale-90",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:l.jsx("path",{d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})}),y("check")&&l.jsx("td",{className:"px-2 py-5 text-center",children:l.jsxs("div",{className:"relative flex items-center justify-center",children:[l.jsx("input",{type:"checkbox",checked:se,onChange:()=>w(re,se),className:`h-6 w-6 rounded-lg border-gray-700 bg-gray-950 text-emerald-500 focus:ring-emerald-500/10 transition-all ${k?"opacity-20":"hover:scale-110 active:scale-150 cursor-pointer"}`}),k&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx(Rn,{size:"sm"})})]})}),y("orderId")&&l.jsx("td",{className:"px-2 py-5 text-center",children:l.jsx("button",{onClick:()=>d(U["Order ID"]),className:`p-2 rounded-xl transition-all border ${G?"bg-green-500/20 border-green-500/40 text-green-400":"bg-gray-800 border-white/5 text-gray-500 hover:text-blue-400 active:scale-90"}`,children:l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:G?"✓":"ID"})})})]},re)})})]})})})]})},wh=({orders:n,totals:e,visibleColumns:r,selectedIds:a,onToggleSelect:o,onEdit:i,handlePrint:h,handleCopy:c,copiedId:d,toggleOrderVerified:g,updatingIds:w})=>{const{appData:m,previewImage:v}=ve.useContext(za),p=!r||r.has("productInfo"),L=!r||r.has("actions"),P=!r||r.has("print"),A=!r||r.has("check"),x=C=>{if(!C||!m.phoneCarriers)return null;const B=C.replace(/\s/g,"").substring(0,3),_=m.phoneCarriers.find(M=>M.Prefixes.split(",").map(H=>H.trim()).includes(B));return _?st(_.CarrierLogoURL):null},j=C=>{if(!C||!m.shippingMethods)return null;const R=m.shippingMethods.find(B=>B.MethodName===C);return R?st(R.LogosURL):null},y=C=>{let R=(C||"").replace(/[^0-9]/g,"");return R.length>0&&(R="0"+R.replace(/^0+/,"")),R};return l.jsxs("div",{className:"space-y-5 pb-40",children:[l.jsx(ic,{totals:e}),n.map(C=>{var $;const R=($=m.pages)==null?void 0:$.find(ee=>ee.PageName===C.Page),B=R?st(R.PageLogoURL):"",_=y(C["Customer Phone"]),M=x(_),H=C.IsVerified===!0||String(C.IsVerified).toUpperCase()==="TRUE",K=w.has(C["Order ID"]),S=a.has(C["Order ID"]),N=j(C["Internal Shipping Method"]),U=d===C["Order ID"];return l.jsxs("div",{className:`
                            relative rounded-[2.5rem] p-5 shadow-2xl transition-all duration-300 overflow-hidden group
                            ${S?"bg-blue-900/20 border-2 border-blue-500/50 shadow-blue-900/30":H?"bg-emerald-900/10 border border-emerald-500/20 shadow-emerald-900/10":"bg-[#1e293b]/70 border border-white/5 shadow-black/40 backdrop-blur-xl"}
                        `,children:[S&&l.jsx("div",{className:"absolute inset-0 bg-blue-500/5 pointer-events-none"}),l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[o&&l.jsx("div",{className:"relative z-10",children:l.jsx("input",{type:"checkbox",className:"h-6 w-6 rounded-xl border-gray-600 bg-gray-800 text-blue-500 focus:ring-blue-500/20 cursor-pointer transition-all",checked:S,onChange:()=>o(C["Order ID"])})}),l.jsx("div",{children:l.jsxs("button",{onClick:()=>c(C["Order ID"]),className:`
                                            flex items-center gap-2 px-3 py-1 rounded-xl border transition-all active:scale-95
                                            ${U?"bg-emerald-500/20 border-emerald-500/50 text-emerald-400":"bg-black/30 border-white/5 text-gray-400 hover:text-white"}
                                        `,children:[l.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest font-mono",children:["#",C["Order ID"].substring(0,8)]}),U&&l.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})]})})]}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[8px] font-black uppercase tracking-wider border ${C["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:C["Payment Status"]}),l.jsx("span",{className:"text-[9px] text-gray-600 font-bold mt-1",children:new Date(C.Timestamp).toLocaleDateString("km-KH")})]})]}),l.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[l.jsxs("div",{className:"relative w-14 h-14 rounded-2xl bg-black/40 border border-white/10 p-1 flex-shrink-0",children:[B?l.jsx("img",{src:B,className:"w-full h-full object-cover rounded-xl",alt:"page logo"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 text-[10px] font-black",children:"N/A"}),l.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-900 rounded-lg p-0.5 border border-gray-700",children:M&&l.jsx("img",{src:M,className:"w-4 h-4 object-contain",alt:"carrier"})})]}),l.jsxs("div",{className:"flex-grow min-w-0",children:[l.jsx("h3",{className:"text-white font-black text-sm truncate leading-tight mb-1",children:C["Customer Name"]}),l.jsx("p",{className:"text-blue-400 font-mono font-bold text-xs tracking-wide mb-1",children:_}),l.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-gray-500 font-bold truncate",children:[l.jsxs("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),l.jsx("span",{className:"truncate",children:C.Location||"N/A"})]})]})]}),p&&C.Products&&C.Products.length>0&&l.jsx("div",{className:"bg-black/20 rounded-2xl p-3 border border-white/5 mb-5 shadow-inner",children:l.jsx("div",{className:"flex overflow-x-auto gap-3 pb-2 snap-x no-scrollbar",children:C.Products.map((ee,E)=>{var V;const T=(V=m.products)==null?void 0:V.find(re=>re.ProductName===ee.name),G=ee.image||(T==null?void 0:T.ImageURL)||"";return l.jsxs("div",{className:"flex-shrink-0 w-[200px] snap-center bg-gray-800/50 rounded-xl p-2 border border-white/5 flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-black/50 flex-shrink-0 overflow-hidden border border-white/5",onClick:()=>v(st(G)),children:l.jsx("img",{src:st(G),className:"w-full h-full object-cover",alt:""})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-[11px] font-bold text-gray-200 truncate",children:ee.name}),l.jsxs("div",{className:"flex justify-between items-center mt-0.5",children:[l.jsxs("span",{className:"text-[9px] text-gray-500 font-bold",children:["Qty: ",l.jsx("span",{className:"text-white",children:ee.quantity})]}),ee.colorInfo&&l.jsx("span",{className:"text-[8px] bg-purple-500/10 text-purple-400 px-1.5 rounded uppercase font-bold",children:ee.colorInfo})]})]})]},E)})})}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[l.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:[l.jsx("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Total Amount"}),l.jsxs("p",{className:"text-lg font-black text-white tracking-tight",children:["$",C["Grand Total"].toFixed(2)]})]}),l.jsx("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Shipping"}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[N&&l.jsx("img",{src:N,className:"w-3.5 h-3.5 object-contain",alt:""}),l.jsx("p",{className:"text-xs font-bold text-orange-400 truncate max-w-[80px]",children:C["Internal Shipping Method"]})]})]}),C["Internal Cost"]>0&&l.jsxs("span",{className:"text-[9px] font-mono text-gray-600 font-bold bg-black/20 px-1.5 py-0.5 rounded",children:["-$",C["Internal Cost"]]})]})})]}),l.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-white/5",children:[L&&l.jsx("button",{onClick:()=>i&&i(C),className:"flex-1 py-3 bg-blue-600/10 text-blue-400 rounded-xl border border-blue-500/20 font-black text-[10px] uppercase tracking-widest hover:bg-blue-600 hover:text-white transition-all active:scale-95",children:"Edit"}),P&&l.jsx("button",{onClick:()=>h(C),className:"w-12 h-12 flex items-center justify-center bg-gray-800 text-gray-400 rounded-xl border border-white/10 hover:text-white active:scale-90 transition-all",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})}),A&&l.jsxs("div",{className:"ml-auto relative",children:[l.jsx("input",{type:"checkbox",checked:H,onChange:()=>g(C["Order ID"],H),className:`w-12 h-12 rounded-xl appearance-none border transition-all cursor-pointer ${H?"bg-emerald-500 border-emerald-400":"bg-gray-800 border-gray-600"}`}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:K?l.jsx(Rn,{size:"sm"}):H?l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):l.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase",children:"Check"})})]})]})]},C["Order ID"])}),l.jsx("style",{children:`
                .no-scrollbar::-webkit-scrollbar { display: none; }
                .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `})]})},yh=({orders:n,totals:e,visibleColumns:r,selectedIds:a,onToggleSelect:o,onEdit:i,handlePrint:h,handleCopy:c,copiedId:d,toggleOrderVerified:g,updatingIds:w})=>{const{appData:m,previewImage:v}=ve.useContext(za),p=A=>{if(!A||!m.phoneCarriers)return null;const j=A.replace(/\s/g,"").substring(0,3),y=m.phoneCarriers.find(C=>C.Prefixes.split(",").map(R=>R.trim()).includes(j));return y?st(y.CarrierLogoURL):null},L=A=>{if(!A||!m.shippingMethods)return null;const x=m.shippingMethods.find(j=>j.MethodName===A);return x?st(x.LogosURL):null},P=A=>{let x=(A||"").replace(/[^0-9]/g,"");return x.length>0&&(x="0"+x.replace(/^0+/,"")),x};return l.jsxs("div",{className:"space-y-6 pb-20",children:[l.jsx("div",{className:"w-full",children:l.jsx(ic,{totals:e})}),l.jsx("div",{className:"grid grid-cols-2 gap-5",children:n.map(A=>{var K,S;const x=(K=m.pages)==null?void 0:K.find(N=>N.PageName===A.Page),j=x?st(x.PageLogoURL):"",y=P(A["Customer Phone"]),C=p(y),R=A.IsVerified===!0||String(A.IsVerified).toUpperCase()==="TRUE",B=w.has(A["Order ID"]),_=a.has(A["Order ID"]),M=L(A["Internal Shipping Method"]),H=d===A["Order ID"];return l.jsxs("div",{className:`
                                relative rounded-[2rem] p-5 shadow-xl transition-all duration-300 overflow-hidden group flex flex-col justify-between
                                ${_?"bg-blue-900/20 border-2 border-blue-500/50 shadow-blue-900/20":R?"bg-emerald-900/10 border border-emerald-500/20 shadow-emerald-900/10":"bg-[#1e293b]/60 border border-white/5 shadow-black/30 backdrop-blur-md hover:bg-[#1e293b]/80"}
                            `,children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[o&&l.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-lg border-gray-600 bg-gray-800 text-blue-500 cursor-pointer focus:ring-0",checked:_,onChange:()=>o(A["Order ID"])}),l.jsxs("button",{onClick:()=>c(A["Order ID"]),className:`flex items-center gap-2 px-3 py-1.5 rounded-xl border transition-all active:scale-95 ${H?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":"bg-black/30 text-gray-400 border-white/5 hover:text-white"}`,children:[l.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest font-mono",children:["#",A["Order ID"].substring(0,8)]}),H&&l.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})]})]}),l.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-wider border ${A["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:A["Payment Status"]})]}),l.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[l.jsx("div",{className:"relative w-12 h-12 rounded-xl bg-black/40 border border-white/10 p-0.5 flex-shrink-0",children:j?l.jsx("img",{src:j,className:"w-full h-full object-cover rounded-[10px]",alt:"logo"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-[9px]",children:"N/A"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h3",{className:"text-white font-black text-sm truncate",children:A["Customer Name"]}),l.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[C&&l.jsx("img",{src:C,className:"h-3 w-auto object-contain opacity-70",alt:"carrier"}),l.jsx("p",{className:"text-blue-400 font-mono font-bold text-xs",children:y})]}),l.jsxs("div",{className:"text-[10px] text-gray-500 font-bold truncate mt-1 flex items-center gap-1",children:[l.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),A.Location||"N/A"]})]})]}),l.jsx("div",{className:"bg-black/20 rounded-xl p-2.5 border border-white/5 mb-4 overflow-hidden",children:l.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:A.Products&&A.Products.length>0?A.Products.map((N,U)=>{var E;const $=(E=m.products)==null?void 0:E.find(T=>T.ProductName===N.name),ee=N.image||($==null?void 0:$.ImageURL)||"";return l.jsxs("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-gray-800 border border-white/5 overflow-hidden relative cursor-pointer",onClick:()=>v(st(ee)),children:[l.jsx("img",{src:st(ee),className:"w-full h-full object-cover",alt:""}),l.jsxs("div",{className:"absolute bottom-0 right-0 bg-blue-600 text-white text-[8px] font-black px-1 rounded-tl-md",children:["x",N.quantity]})]},U)}):l.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"No products"})})}),l.jsxs("div",{className:"mt-auto",children:[l.jsxs("div",{className:"flex justify-between items-end mb-4 pt-3 border-t border-white/5",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-wider",children:"Total"}),l.jsxs("p",{className:"text-xl font-black text-white tracking-tight",children:["$",A["Grand Total"].toFixed(2)]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-wider",children:"Shipping"}),l.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[M&&l.jsx("img",{src:M,className:"w-3.5 h-3.5 object-contain",alt:""}),l.jsx("span",{className:"text-xs font-bold text-orange-400",children:(S=A["Internal Shipping Method"])==null?void 0:S.substring(0,10)})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[i&&l.jsx("button",{onClick:()=>i(A),className:"flex-1 py-2.5 bg-blue-600/10 text-blue-400 hover:bg-blue-600 hover:text-white rounded-xl border border-blue-500/20 font-black text-[10px] uppercase tracking-widest transition-all",children:"Edit"}),l.jsx("button",{onClick:()=>h(A),className:"w-10 h-10 flex items-center justify-center bg-gray-800 text-gray-400 hover:text-white rounded-xl border border-white/10 transition-all",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"checkbox",checked:R,onChange:()=>g(A["Order ID"],R),className:`w-10 h-10 rounded-xl appearance-none border transition-all cursor-pointer ${R?"bg-emerald-500 border-emerald-400":"bg-gray-800 border-gray-600"}`}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:B?l.jsx(Rn,{size:"sm"}):R?l.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):l.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase",children:"OK"})})]})]})]})]},A["Order ID"])})})]})},Ch=({orders:n,onEdit:e,showActions:r,visibleColumns:a,selectedIds:o=new Set,onToggleSelect:i,onToggleSelectAll:h})=>{const{refreshData:c}=ve.useContext(za),[d,g]=ve.useState(null),[w,m]=ve.useState(new Set),[v,p]=ve.useState(n);ve.useEffect(()=>{p(n)},[n]);const L=bh(n),P=async(C,R)=>{const B=!R;p(_=>_.map(M=>M["Order ID"]===C?{...M,IsVerified:B}:M)),m(_=>new Set(_).add(C));try{if(!(await fetch(`${qa}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"AllOrders",primaryKey:{"Order ID":C},newData:{IsVerified:B}})})).ok)throw new Error("Failed to save");c()}catch(_){console.error("Verification toggle failed:",_),p(M=>M.map(H=>H["Order ID"]===C?{...H,IsVerified:R}:H)),alert("រក្សាទុកស្ថានភាពមិនបានសម្រេច!")}finally{m(_=>{const M=new Set(_);return M.delete(C),M})}},A=C=>{let R=(C||"").replace(/[^0-9]/g,"");return R.length>0&&(R="0"+R.replace(/^0+/,"")),R},y={orders:v,totals:L,visibleColumns:a,selectedIds:o,onToggleSelect:i,onEdit:e,handlePrint:C=>{if(!C)return;const R=A(C["Customer Phone"]),B=new URLSearchParams({id:C["Order ID"],name:C["Customer Name"]||"",phone:R,location:C.Location||"",address:C["Address Details"]||"",total:(C["Grand Total"]||0).toString(),payment:C["Payment Status"]||"Unpaid",shipping:C["Internal Shipping Method"]||"N/A",page:C.Page||"",user:C.User||""}),M=(C.Note||"").match(/https?:\/\/(www\.)?(google\.com\/maps|maps\.app\.goo\.gl)\/[^\s]+/);M&&B.set("map",M[0]),window.open(`${Gc}?${B.toString()}`,"_blank")},handleCopy:C=>{navigator.clipboard.writeText(C),g(C),setTimeout(()=>g(null),2e3)},copiedId:d,toggleOrderVerified:P,updatingIds:w};return l.jsxs("div",{className:"w-full flex flex-col",children:[l.jsxs("div",{className:"flex-grow space-y-4",children:[l.jsx("div",{className:"hidden xl:block",children:l.jsx(vh,{...y,onToggleSelectAll:h})}),l.jsx("div",{className:"hidden md:block xl:hidden",children:l.jsx(yh,{...y})}),l.jsx("div",{className:"md:hidden",children:l.jsx(wh,{...y})})]}),l.jsx("div",{className:"h-64 md:h-[400px] w-full pointer-events-none opacity-0 shrink-0","aria-hidden":"true"})]})};export{mh as B,nh as D,Ue as E,Ch as O,kh as S,gt as _,Sh as a,Lh as b,Ah as c,Ph as d,eh as e,rh as f,_h as g,sh as h,th as i};
