const a=async()=>{if(!("Notification"in window))return console.warn("This browser does not support desktop notification"),!1;if(Notification.permission==="granted")return!0;if(Notification.permission!=="denied")try{return await Notification.requestPermission()==="granted"}catch(o){return console.error("Permission request failed",o),!1}return!1},s=async(o,n)=>{if(!("Notification"in window)||Notification.permission!=="granted")return;const e="https://cdn-icons-png.flaticon.com/512/1827/1827404.png",r="osystem-alert-"+Date.now(),t={body:n,icon:e,badge:e,vibrate:[200,100,200],tag:r,renotify:!0,requireInteraction:!0,data:{url:window.location.href},silent:!1};if("serviceWorker"in navigator)try{const i=await navigator.serviceWorker.ready;if(i&&i.active){await i.showNotification(o,t),console.log("Notification sent via Service Worker");return}else console.warn("Service Worker ready but not active/found.")}catch(i){console.warn("Service Worker notification failed, falling back to legacy API...",i)}try{const i=new Notification(o,t);i.onclick=function(){window.focus(),i.close()},console.log("Notification sent via Legacy Web API")}catch(i){console.error("All notification methods failed:",i)}};export{a as r,s};
