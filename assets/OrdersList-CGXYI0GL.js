const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-Cji0Znj0.js","assets/index-Bser2ImG.js","assets/index-CWjR_wEZ.css","assets/dateUtils-cpsDkxhO.js","assets/imageCompressor-D5vYYzIg.js"])))=>i.map(i=>d[i]);
import{j as h,r as ve,S as Pr,c as at,_ as Ll,g as zh,b as Wh,A as mo,M as ic,W as ni,f as $h,L as Jh}from"./index-Bser2ImG.js";import{s as Yh}from"./dateUtils-cpsDkxhO.js";import{c as Kh}from"./imageCompressor-D5vYYzIg.js";const Qs=({label:t,value:e,icon:n,colorClass:r})=>h.jsxs("div",{className:"relative group overflow-hidden bg-gray-800/30 backdrop-blur-xl border border-white/5 p-6 rounded-[2rem] transition-all duration-500 hover:bg-gray-800/50 hover:border-white/10 hover:shadow-2xl",children:[h.jsxs("div",{className:"relative z-10 flex justify-between items-center gap-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-400 text-xs lg:text-sm font-black uppercase tracking-widest mb-1.5 transition-all",children:t}),h.jsx("h3",{className:"text-3xl lg:text-4xl 2xl:text-5xl font-black text-white tracking-tighter transition-all",children:e})]}),h.jsx("div",{className:`w-12 h-12 lg:w-16 lg:h-16 rounded-2xl bg-gradient-to-br ${r} flex items-center justify-center text-white text-xl lg:text-2xl shadow-lg shadow-blue-900/20 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 flex-shrink-0`,children:n})]}),h.jsx("div",{className:`absolute -right-6 -bottom-6 w-32 h-32 lg:w-40 lg:h-40 rounded-full bg-gradient-to-br ${r} opacity-0 group-hover:opacity-10 blur-[40px] transition-opacity duration-700`})]}),Xh="/Order_System/",Zh=[`${Xh}cambodia-provinces.geojson`,"https://raw.githubusercontent.com/seanghai/cambodia-geojson/master/cambodia-provinces.geojson","https://raw.githubusercontent.com/romnea/cambodia-geojson/master/provinces.geojson","https://raw.githubusercontent.com/kheang-hong/cambodia-geojson/master/provinces.geojson"],ea=t=>{if(!t)return"";const e=String(t).toLowerCase().replace(/\s/g,"").replace(/province|city|krong|khan|ážšáž¶áž‡áž’áž¶áž“áž¸|ážáŸážáŸ’áž|ážáŸážáŸ’ážŠ|áž€áŸ’ážšáž»áž„/g,"").trim();return{áž—áŸ’áž“áŸ†áž–áŸáž‰:"phnompenh",áž€ážŽáŸ’ážáž¶áž›:"kandal",áž€ážŽáŸ’ážŠáž¶áž›:"kandal",áž€áŸ†áž–áž„áŸ‹áž…áž¶áž˜:"kampongcham",áž€áŸ†áž–áž„áŸ‹áž†áŸ’áž“áž¶áŸ†áž„:"kampongchhnang",áž€áŸ†áž–áž„áŸ‹áž’áŸ†:"kampongthom",áž€áŸ†áž–áž„áŸ‹ážŸáŸ’áž–ážº:"kampongspeu",áž€áŸ†áž–áž:"kampot",áž€áŸ‚áž”:"kep",áž€áŸ„áŸ‡áž€áž»áž„:"kohkong",áž€áŸ’ážšáž…áŸáŸ‡:"kratie",ážáž¶áž€áŸ‚ážœ:"takeo",ážáŸ’áž”áž¼áž„ážƒáŸ’áž˜áž»áŸ†:"tbongkhmum",áž”áž“áŸ’áž‘áž¶áž™áž˜áž¶áž“áž‡áŸáž™:"banteymeanchey",áž”áž¶ážáŸ‹ážŠáŸ†áž”áž„:"battambang",áž”áŸ‰áŸƒáž›áž·áž“:"pailin",áž–áŸ„áž’áž·áŸážŸáž¶ážáŸ‹:"pursat",áž–áŸ’ážšáŸƒážœáŸ‚áž„:"preyveng",áž–áŸ’ážšáŸ‡ážœáž·áž áž¶ážš:"preahvihear",áž–áŸ’ážšáŸ‡ážŸáž¸áž áž“áž»:"preahsihanouk",áž˜ážŽáŸ’ážŒáž›áž‚áž·ážšáž¸:"mondulkiri",ážšážáž“áž‚áž·ážšáž¸:"ratanakiri",ážŸáŸ€áž˜ážšáž¶áž”:"siemreap",ážŸáŸ’áž‘áž¹áž„ážáŸ’ážšáŸ‚áž„:"stungtreng",ážŸáŸ’ážœáž¶áž™ážšáŸ€áž„:"svayrieng",áž§ážáŸ’ážážšáž˜áž¶áž“áž‡áŸáž™:"oddarmeanchey"}[e]||e},Qh=()=>{const[t,e]=ve.useState(null),[n,r]=ve.useState(null),[i,o]=ve.useState(!0);return ve.useEffect(()=>{let s=!0;return(async()=>{for(const l of Zh)try{const c=await fetch(l);if(c.ok){const p=await c.json();if(p&&p.type==="FeatureCollection"&&Array.isArray(p.features)){s&&(e(p),o(!1));return}else console.warn(`Fetched data from ${l} is not valid GeoJSON`)}}catch(c){console.warn(`Failed to load ${l}`,c)}s&&(r("áž˜áž·áž“áž¢áž¶áž…áž‘áž¶áž‰áž™áž€áž‘áž·áž“áŸ’áž“áž“áŸáž™áž•áŸ‚áž“áž‘áž¸áž”áž¶áž“áž‘áŸ"),o(!1))})().catch(l=>{console.error("GeoJSON Fetch Fatal Error:",l),s&&(r("Error loading map data"),o(!1))}),()=>{s=!1}},[]),{geoJson:t,loading:i,error:n}},ep={levels:["#001015","#00202b","#003547","#004d61","#006880","#0085a1","#00a6c2"]},Zr=[0,500,2e3,5e3,1e4,25e3],zc=["interpolate",["linear"],["get","revenue"],0,50,500,500,5e3,2e3,1e4,5e3,5e4,15e3],tp=["case",["!=",["get","revenue"],0],["step",["get","revenue"],"#001015",Zr[1],"#001820",Zr[2],"#00202b",Zr[3],"#002a38",Zr[4],"#003547",Zr[5],"#00455c"],"#000000"],np=()=>h.jsxs("div",{className:"absolute bottom-6 left-6 bg-black/90 p-4 border border-cyan-500/30 z-10 shadow-lg pointer-events-none min-w-[180px] font-mono",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-cyan-900 pb-2",children:[h.jsx("h5",{className:"text-[10px] font-bold text-cyan-500 uppercase tracking-widest",children:"DENSITY INDEX"}),h.jsx("div",{className:"w-2 h-2 bg-cyan-500 animate-pulse"})]}),h.jsx("div",{className:"space-y-1",children:Zr.map((t,e)=>{if(e===0)return null;const n=ep.levels[e],r=Zr[e-1],i=e===Zr.length-1?`> ${(t/1e3).toFixed(0)}k`:`${(r/1e3).toFixed(0)}k-${(t/1e3).toFixed(0)}k`;return h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-2 h-2 border border-cyan-500/50",style:{backgroundColor:n}}),h.jsx("span",{className:"text-[9px] text-cyan-300",children:i})]},e)})}),h.jsxs("div",{className:"mt-3 pt-2 border-t border-cyan-900 flex items-center gap-2",children:[h.jsx("div",{className:"h-8 w-1 bg-gradient-to-t from-black via-cyan-900 to-cyan-500"}),h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[8px] text-cyan-600 uppercase",children:"Z-AXIS"}),h.jsx("span",{className:"text-[8px] text-cyan-400",children:"VOLUME"})]})]})]}),rp=t=>{const e=ve.useRef(null),[n,r]=ve.useState(!1),[i,o]=ve.useState(null);return ve.useEffect(()=>{let s=!0,a=null;return(async()=>{if(t.current&&!e.current)try{let c=0;for(;!window.maplibregl&&c<50;)await new Promise(m=>setTimeout(m,100)),c++;if(!s)return;const p=window.maplibregl;if(!p)throw new Error("MapLibre GL library not found.");a=new p.Map({container:t.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://a.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}@2x.png"],tileSize:256,attribution:"&copy; OpenStreetMap & CartoDB"}},layers:[{id:"background",type:"background",paint:{"background-color":"#020617"}},{id:"osm-layer",type:"raster",source:"osm",paint:{"raster-opacity":.3,"raster-saturation":-1,"raster-contrast":.1}}]},center:[104.916,12.5657],zoom:6.6,pitch:45,bearing:-10,minZoom:5,maxZoom:12}),a.addControl(new p.NavigationControl({showCompass:!0,visualizePitch:!0}),"top-right"),a.on("load",()=>{s&&(e.current=a,r(!0),console.log("Map Engine Ready in 3D Mode"))}),a.on("error",m=>{console.error("Map Internal Error:",m)})}catch(c){console.error("Map Engine Initialization Failed:",c),s&&o(c.message)}})().catch(c=>{console.error("Uncaught Map Engine Error:",c),s&&o("Failed to initialize map engine.")}),()=>{s=!1,a&&(a.remove(),e.current=null)}},[]),{map:e.current,isMapReady:n,mapError:i}},ip=({data:t,onProvinceClick:e})=>{const n=ve.useRef(null),r=ve.useRef(null),i=ve.useRef([]),o=ve.useRef([]),s=ve.useRef(null),a=ve.useRef(null),[l,c]=ve.useState("revenue"),[p,m]=ve.useState("km"),y=ve.useRef(!1),{geoJson:v,loading:S,error:_}=Qh(),{map:w,isMapReady:N,mapError:A}=rp(n),I={phnompenh:"ážšáž¶áž‡áž’áž¶áž“áž¸áž—áŸ’áž“áŸ†áž–áŸáž‰",kandal:"ážáŸážáŸ’ážŠáž€ážŽáŸ’ážáž¶áž›",kampongcham:"ážáŸážáŸ’ážŠáž€áŸ†áž–áž„áŸ‹áž…áž¶áž˜",kampongchhnang:"ážáŸážáŸ’ážŠáž€áŸ†áž–áž„áŸ‹áž†áŸ’áž“áž¶áŸ†áž„",kampongthom:"ážáŸážáŸ’ážŠáž€áŸ†áž–áž„áŸ‹áž’áŸ†",kampongspeu:"ážáŸážáŸ’ážŠáž€áŸ†áž–áž„áŸ‹ážŸáŸ’áž–ážº",kampot:"ážáŸážáŸ’ážŠáž€áŸ†áž–áž",kep:"ážáŸážáŸ’ážŠáž€áŸ‚áž”",kohkong:"ážáŸážáŸ’ážŠáž€áŸ„áŸ‡áž€áž»áž„",kratie:"ážáŸážáŸ’ážŠáž€áŸ’ážšáž…áŸáŸ‡",takeo:"ážáŸážáŸ’ážŠážáž¶áž€áŸ‚ážœ",tbongkhmum:"ážáŸážáŸ’ážŠážáŸ’áž”áž¼áž„ážƒáŸ’áž˜áž»áŸ†",banteymeanchey:"ážáŸážáŸ’ážŠáž”áž“áŸ’áž‘áž¶áž™áž˜áž¶áž“áž‡áŸáž™",battambang:"ážáŸážáŸ’ážŠáž”áž¶ážáŸ‹ážŠáŸ†áž”áž„",pailin:"ážáŸážáŸ’ážŠáž”áŸ‰áŸƒáž›áž·áž“",pursat:"ážáŸážáŸ’ážŠáž–áŸ„áž’áž·áŸážŸáž¶ážáŸ‹",preyveng:"ážáŸážáŸ’ážŠáž–áŸ’ážšáŸƒážœáŸ‚áž„",preahvihear:"ážáŸážáŸ’ážŠáž–áŸ’ážšáŸ‡ážœáž·áž áž¶ážš",preahsihanouk:"ážáŸážáŸ’ážŠáž–áŸ’ážšáŸ‡ážŸáž¸áž áž“áž»",mondulkiri:"ážáŸážáŸ’ážŠáž˜ážŽáŸ’ážŒáž›áž‚áž·ážšáž¸",ratanakiri:"ážáŸážáŸ’ážŠážšážáž“áž‚áž·ážšáž¸",siemreap:"ážáŸážáŸ’ážŠážŸáŸ€áž˜ážšáž¶áž”",stungtreng:"ážáŸážáŸ’ážŠážŸáŸ’áž‘áž¹áž„ážáŸ’ážšáŸ‚áž„",svayrieng:"ážáŸážáŸ’ážŠážŸáŸ’ážœáž¶áž™ážšáŸ€áž„",oddarmeanchey:"ážáŸážáŸ’ážŠáž§ážáŸ’ážážšáž˜áž¶áž“áž‡áŸáž™"},D=ve.useMemo(()=>{const k={};return Array.isArray(t)&&t.forEach(R=>{if(!R||!R.name)return;const $=ea(R.name);$&&(k[$]?(k[$].revenue+=Number(R.revenue)||0,k[$].orders+=Number(R.orders)||0,k[$].shippingCost=(k[$].shippingCost||0)+(Number(R.shippingCost)||0)):k[$]={...R,shippingCost:Number(R.shippingCost)||0})}),k},[t]),M=ve.useMemo(()=>{const k=Object.values(D).sort(($,q)=>{const E=$[l]||0;return(q[l]||0)-E}),R={};return k.forEach(($,q)=>{const E=ea($.name);E&&(R[E]=q+1)}),R},[D,l]),T=()=>{switch(l){case"revenue":return"#00bcd4";case"orders":return"#8b5cf6";case"shipping":return"#10b981";default:return"#00bcd4"}};return ve.useEffect(()=>{if(!(!N||!w||!v)){try{const k=window.maplibregl,R=()=>{y.current=!0},$=()=>{y.current=!1};w.on("mousedown",R),w.on("touchstart",R),w.on("dragstart",R),w.on("mouseup",$),w.on("touchend",$),w.on("dragend",$),w.on("zoomstart",R),w.on("zoomend",$),a.current||w.flyTo({center:[104.916,12.6],zoom:7.2,pitch:50,bearing:-5,speed:.8,curve:1.2,essential:!0});const q=z=>{if(w.setLight({anchor:"map",color:"#ffffff",intensity:.6,position:[1.5,1.5,80]}),!y.current){const ne=z/2e4,H=-5+Math.sin(ne)*3;w.jumpTo({bearing:H})}a.current=requestAnimationFrame(q)};a.current&&cancelAnimationFrame(a.current),a.current=requestAnimationFrame(q),w.setFog&&w.setFog({range:[1,10],color:"#0f172a","horizon-blend":.2,"high-color":"#1e293b","space-color":"#0f172a","star-intensity":0});const E=v.features.map(z=>{const ne=z.properties||{},H=[ne.name_kh,ne.Name_KH,ne.name_en,ne.Name_EN,ne.name,ne.shapeName];let F=0,G=0,Z=0,J=999,ie="";for(const K of H){if(!K)continue;const Q=ea(String(K));if(D[Q]){ie=Q,F=D[ie].revenue,G=D[ie].orders,Z=D[ie].shippingCost||0,M[ie]&&(J=M[ie]);break}else I[Q]&&(ie=Q)}!ie&&ne.shapeName&&(ie=ea(ne.shapeName));let P=ne.name_en||ne.shapeName||"Province";p==="km"&&ie&&I[ie]?P=I[ie]:p==="en"&&ne.shapeName&&(P=ne.shapeName);let O=F;return l==="orders"&&(O=G*80),l==="shipping"&&(O=Z*25),{...z,properties:{...ne,revenue:O,realRevenue:F,orders:G,shippingCost:Z,displayName:P,rank:J}}}),L={type:"FeatureCollection",features:E},B=w.getSource("cambodia-3d-source");B?B.setData(L):(w.addSource("cambodia-3d-source",{type:"geojson",data:L,generateId:!0}),w.addLayer({id:"province-3d",type:"fill-extrusion",source:"cambodia-3d-source",paint:{"fill-extrusion-color":tp,"fill-extrusion-height":zc,"fill-extrusion-base":0,"fill-extrusion-opacity":1,"fill-extrusion-vertical-gradient":!0}}),w.addLayer({id:"province-outlines",type:"line",source:"cambodia-3d-source",paint:{"line-color":T(),"line-width":1.5,"line-opacity":.5}}),w.addLayer({id:"province-highlight",type:"fill-extrusion",source:"cambodia-3d-source",paint:{"fill-extrusion-color":T(),"fill-extrusion-height":["+",zc,100],"fill-extrusion-opacity":["case",["boolean",["feature-state","hover"],!1],.8,0]}}),r.current=new k.Popup({closeButton:!1,closeOnClick:!1,className:"custom-map-popup",offset:80,maxWidth:"300px"}),w.on("mousemove","province-3d",z=>{if(z.features.length>0){w.getCanvas().style.cursor="pointer";const ne=z.features[0];s.current!==null&&w.setFeatureState({source:"cambodia-3d-source",id:s.current},{hover:!1}),s.current=ne.id,w.setFeatureState({source:"cambodia-3d-source",id:ne.id},{hover:!0});const{displayName:H,realRevenue:F,orders:G,shippingCost:Z}=ne.properties;let J=`$${Number(F).toLocaleString()}`,ie=`${G}`;r.current.setLngLat(z.lngLat).setHTML(`
                                <div class="bg-slate-900 border border-slate-700 p-3 shadow-xl rounded-lg min-w-[160px]">
                                    <div class="flex items-center justify-between border-b border-slate-800 pb-2 mb-2">
                                        <h4 class="text-white font-bold text-xs uppercase">${H}</h4>
                                    </div>
                                    <div class="flex flex-col gap-2">
                                        <div class="flex justify-between items-center">
                                            <span class="text-[10px] text-gray-400 uppercase">ORDERS</span>
                                            <span class="text-sm font-bold text-violet-400">${ie}</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="text-[10px] text-gray-400 uppercase">REVENUE</span>
                                            <span class="text-sm font-bold text-cyan-400">${J}</span>
                                        </div>
                                        <div class="pt-1 mt-1 border-t border-slate-800 text-[10px] text-center text-cyan-500 font-bold uppercase cursor-pointer">
                                            Click to view details
                                        </div>
                                    </div>
                                </div>
                            `).addTo(w)}}),w.on("click","province-3d",z=>{if(z.features.length>0){const ne=z.features[0],{displayName:H}=ne.properties;e&&e(H)}}),w.on("mouseleave","province-3d",()=>{w.getCanvas().style.cursor="",s.current!==null&&w.setFeatureState({source:"cambodia-3d-source",id:s.current},{hover:!1}),s.current=null,r.current.remove()})),w.getLayer("province-outlines")&&w.setPaintProperty("province-outlines","line-color",T()),w.getLayer("province-highlight")&&w.setPaintProperty("province-highlight","fill-extrusion-color",T()),o.current.forEach(z=>z.remove()),o.current=[],E.forEach(z=>{const{displayName:ne}=z.properties,H=z.geometry.type==="Polygon"?z.geometry.coordinates[0]:z.geometry.coordinates.flat(1)[0];if(!H)return;const F=new k.LngLatBounds(H[0],H[0]);H.forEach(ie=>F.extend(ie));const G=F.getCenter(),Z=document.createElement("div");Z.className="province-label-marker",Z.innerHTML=`<span class="text-[8px] font-bold text-white/50 uppercase tracking-wider drop-shadow-md select-none hover:text-white transition-colors">${ne}</span>`;const J=new k.Marker({element:Z,anchor:"center"}).setLngLat(G).addTo(w);o.current.push(J)}),i.current.forEach(z=>z.remove()),i.current=[],E.forEach(z=>{const{rank:ne,displayName:H,realRevenue:F,orders:G,shippingCost:Z}=z.properties;if(ne&&ne<=3){const J=z.geometry.type==="Polygon"?z.geometry.coordinates[0]:z.geometry.coordinates.flat(1)[0];if(!J)return;const ie=new k.LngLatBounds(J[0],J[0]);J.forEach(te=>ie.extend(te));const P=ie.getCenter(),O=document.createElement("div");O.className="province-rank-marker";let K=`$${(F/1e3).toFixed(1)}k`;l==="orders"&&(K=`${G}`),l==="shipping"&&(K=`$${(Z/1e3).toFixed(1)}k`),O.innerHTML=`
                        <div class="flex flex-col items-center group cursor-pointer animate-float hover:z-50">
                            <div class="px-3 py-1 bg-slate-900/90 border border-white/20 rounded-lg flex items-center gap-2 shadow-lg mb-1 backdrop-blur-sm">
                                <span class="text-[10px] font-black text-yellow-400">#${ne}</span>
                                <span class="text-[9px] font-bold text-white uppercase">${H}</span>
                            </div>
                            <div class="w-0.5 h-10 bg-white/50"></div>
                            <div class="w-2 h-2 bg-white rounded-full"></div>
                        </div>
                    `;const Q=new k.Marker({element:O,anchor:"bottom",offset:[0,-10]}).setLngLat(P).addTo(w);i.current.push(Q)}})}catch(k){console.error("Layer Update Error:",k)}return()=>{a.current&&cancelAnimationFrame(a.current)}}},[N,v,D,M,l,p,e]),_||A?h.jsx("div",{className:"w-full h-[500px] flex items-center justify-center bg-gray-900/50 rounded-3xl border border-red-500/20 text-red-400",children:h.jsxs("p",{children:["Map Error: ",_||A]})}):h.jsxs("div",{className:"relative w-full h-[650px] xl:h-[750px] bg-slate-950 rounded-lg border border-slate-800 shadow-2xl overflow-hidden group",children:[h.jsx("div",{className:"absolute top-6 left-6 z-10 pointer-events-none",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"w-2 h-2 bg-cyan-500 animate-pulse rounded-full"}),h.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"3D Visualization"})]}),h.jsxs("h2",{className:"text-xl font-black text-white uppercase tracking-tight",children:["Cambodia ",h.jsx("span",{className:"text-cyan-400",children:"Map"})]})]})}),h.jsxs("div",{className:"absolute top-6 right-6 flex flex-col gap-2 z-10",children:[[{id:"revenue",label:"Revenue",color:"bg-cyan-600"},{id:"orders",label:"Orders",color:"bg-violet-600"},{id:"shipping",label:"Shipping",color:"bg-emerald-600"}].map(k=>h.jsx("button",{onClick:()=>c(k.id),className:`px-3 py-1.5 rounded text-[10px] font-bold uppercase tracking-widest transition-all w-24 text-center ${l===k.id?`${k.color} text-white shadow-lg`:"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:k.label},k.id)),h.jsx("div",{className:"mt-2 pt-2 border-t border-slate-700 flex flex-col gap-1",children:h.jsx("button",{onClick:()=>m(k=>k==="km"?"en":"km"),className:"px-3 py-1.5 rounded text-[10px] font-bold uppercase tracking-widest transition-all w-24 text-center bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white border border-slate-700 hover:border-slate-600",children:p==="km"?"ðŸ‡°ðŸ‡­ KHM":"ðŸ‡ºðŸ‡¸ ENG"})})]}),h.jsx("div",{ref:n,className:"w-full h-full relative z-1"}),(!N||S)&&h.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-950 z-20",children:h.jsx("div",{className:"text-slate-500 font-bold text-xs animate-pulse",children:"LOADING MAP..."})}),h.jsx(np,{}),h.jsx("style",{children:`
                .maplibregl-popup { z-index: 100; }
                .maplibregl-popup-content { background: transparent !important; box-shadow: none !important; padding: 0 !important; border: none !important; }
                .maplibregl-popup-tip { display: none !important; }
                .province-rank-marker { z-index: 10; pointer-events: none; }
                .province-label-marker { z-index: 5; pointer-events: none; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
                
                @keyframes float {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-5px); }
                }
                .animate-float {
                    animation: float 4s ease-in-out infinite;
                }
            `})]})};var op={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let sp,ap;function lp(){return{geminiUrl:sp,vertexUrl:ap}}function cp(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=lp();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rr{}function De(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const p=l[c];f(p,e.slice(o+1),n[c])}else for(const c of l)f(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];f(l[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function u(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(a=>u(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function up(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){const c=o[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}Rl(t,i,o,0,s)}}function Rl(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const l of a[s])Rl(l,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(const c of a)l[c]=s[c];for(const[c,p]of Object.entries(l)){const m=[];for(const y of n.slice(r))y==="*"?m.push(c):m.push(y);f(s,m,p)}for(const c of a)delete s[c]}}else{const s=t;o in s&&Rl(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oc(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dp(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["operationName"],n);const r=u(t,["resourceName"]);return r!=null&&f(e,["_url","resourceName"],r),e}function fp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response","generateVideoResponse"]);return s!=null&&f(e,["response"],pp(s)),e}function hp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],gp(s)),e}function pp(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>mp(s))),f(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function gp(t){const e={},n=u(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>vp(s))),f(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function mp(t){const e={},n=u(t,["video"]);return n!=null&&f(e,["video"],Sp(n)),e}function vp(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],_p(n)),e}function yp(t){const e={},n=u(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function xp(t){const e={},n=u(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function bp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],wp(s)),e}function wp(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&f(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function $d(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],Np(s)),e}function Np(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&f(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function Sp(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["uri"],n);const r=u(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],oc(r));const i=u(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function _p(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],oc(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wc;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Wc||(Wc={}));var $c;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})($c||($c={}));var Jc;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Jc||(Jc={}));var ei;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ei||(ei={}));var Yc;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Yc||(Yc={}));var Kc;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Kc||(Kc={}));var Xc;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Xc||(Xc={}));var Zc;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Zc||(Zc={}));var Qc;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Qc||(Qc={}));var eu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(eu||(eu={}));var tu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(tu||(tu={}));var nu;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(nu||(nu={}));var ru;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ru||(ru={}));var iu;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(iu||(iu={}));var ou;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ou||(ou={}));var su;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(su||(su={}));var au;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(au||(au={}));var lu;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(lu||(lu={}));var cu;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(cu||(cu={}));var uu;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(uu||(uu={}));var du;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(du||(du={}));var ga;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ga||(ga={}));var fu;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(fu||(fu={}));var hu;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(hu||(hu={}));var pu;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(pu||(pu={}));var Ml;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ml||(Ml={}));var gu;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(gu||(gu={}));var mu;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(mu||(mu={}));var vu;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(vu||(vu={}));var yu;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(yu||(yu={}));var xu;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(xu||(xu={}));var bu;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(bu||(bu={}));var wu;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(wu||(wu={}));var Nu;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Nu||(Nu={}));var Su;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Su||(Su={}));var _u;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(_u||(_u={}));var Au;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Au||(Au={}));var Cu;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Cu||(Cu={}));var Tu;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Tu||(Tu={}));var ku;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(ku||(ku={}));var Iu;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Iu||(Iu={}));var Eu;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Eu||(Eu={}));var Pu;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Pu||(Pu={}));var Lu;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Lu||(Lu={}));var Ru;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Ru||(Ru={}));var Mu;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Mu||(Mu={}));var Du;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Du||(Du={}));var Fu;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Fu||(Fu={}));var ju;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ju||(ju={}));var Uu;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Uu||(Uu={}));var Bu;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Bu||(Bu={}));var qu;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(qu||(qu={}));var Ou;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ou||(Ou={}));var Hu;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Hu||(Hu={}));var fo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(fo||(fo={}));class Dl{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ko{get text(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",p=!1;const m=[];for(const y of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[v,S]of Object.entries(y))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(S!==null||S!==void 0)&&m.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;p=!0,c+=y.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?c:void 0}get data(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const p=[];for(const m of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,v]of Object.entries(m))y!=="inlineData"&&(v!==null||v!==void 0)&&p.push(y);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,o,s,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(c=p==null?void 0:p[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,o,s,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(c=p==null?void 0:p[0])===null||c===void 0?void 0:c.output}}class Vu{}class Gu{}class Ap{}class Cp{}class Tp{}class kp{}class zu{}class Wu{}class $u{}class Ip{}class ma{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ma;let i;const o=e;return n?i=hp(o):i=fp(o),Object.assign(r,i),r}}class Ju{}class Yu{}class Ku{}class Xu{}class Ep{}class Pp{}class Lp{}class sc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new sc,o=bp(e);return Object.assign(r,o),r}}class Rp{}class Mp{}class Dp{}class Zu{}class Fp{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class jp{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ac{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ac,o=$d(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Jd(t,e){const n=pt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Yd(t){return Array.isArray(t)?t.map(e=>va(e)):[va(t)]}function va(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Kd(t){const e=va(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Xd(t){const e=va(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Qu(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Zd(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Qu(e)):[Qu(t)]}function Fl(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function ed(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function td(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function dn(t){if(t==null)throw new Error("ContentUnion is required");return Fl(t)?t:{role:"user",parts:Zd(t)}}function lc(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=dn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=dn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>dn(n)):[dn(e)]}function Un(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(ed(t)||td(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dn(t)]}const e=[],n=[],r=Fl(t[0]);for(const i of t){const o=Fl(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(ed(i)||td(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Zd(n)}),e}function Up(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ei).includes(n[0].toUpperCase())?n[0].toUpperCase():ei.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ei).includes(r.toUpperCase())?r.toUpperCase():ei.TYPE_UNSPECIFIED})}}function po(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&Up(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(ei).includes(a.toUpperCase())?a.toUpperCase():ei.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=po(a);else if(r.includes(s)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(po(c))}e[s]=l}else if(i.includes(s)){const l={};for(const[c,p]of Object.entries(a))l[c]=po(p);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function cc(t){return po(t)}function uc(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function dc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function vo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=po(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=po(e.response));return t}function yo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Bp(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Mr(t,e){if(typeof e!="string")throw new Error("name must be a string");return Bp(t,e,"cachedContents")}function Qd(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function si(t){return oc(t)}function qp(t){return t!=null&&typeof t=="object"&&"name"in t}function Op(t){return t!=null&&typeof t=="object"&&"video"in t}function Hp(t){return t!=null&&typeof t=="object"&&"uri"in t}function ef(t){var e;let n;if(qp(t)&&(n=t.name),!(Hp(t)&&(n=t.uri,n===void 0))&&!(Op(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function tf(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function nf(t){for(const e of["models","tunedModels","publisherModels"])if(Vp(t,e))return t[e];return[]}function Vp(t,e){return t!==null&&typeof t=="object"&&e in t}function Gp(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function zp(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=Gp(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function rf(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Wp(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function of(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function xo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function sf(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $p(t){const e={},n=u(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const r=u(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>T0(s))),f(e,["inlinedResponses"],o)}const i=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["inlinedEmbedContentResponses"],o)}return e}function Jp(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const r=u(t,["gcsDestination","outputUriPrefix"]);r!=null&&f(e,["gcsUri"],r);const i=u(t,["bigqueryDestination","outputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function Yp(t){const e={},n=u(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const r=u(t,["gcsUri"]);r!=null&&f(e,["gcsDestination","outputUriPrefix"],r);const i=u(t,["bigqueryUri"]);if(i!=null&&f(e,["bigqueryDestination","outputUri"],i),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function fa(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata","displayName"]);r!=null&&f(e,["displayName"],r);const i=u(t,["metadata","state"]);i!=null&&f(e,["state"],sf(i));const o=u(t,["metadata","createTime"]);o!=null&&f(e,["createTime"],o);const s=u(t,["metadata","endTime"]);s!=null&&f(e,["endTime"],s);const a=u(t,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);const l=u(t,["metadata","model"]);l!=null&&f(e,["model"],l);const c=u(t,["metadata","output"]);return c!=null&&f(e,["dest"],$p(of(c))),e}function jl(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=u(t,["state"]);i!=null&&f(e,["state"],sf(i));const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["createTime"]);s!=null&&f(e,["createTime"],s);const a=u(t,["startTime"]);a!=null&&f(e,["startTime"],a);const l=u(t,["endTime"]);l!=null&&f(e,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const p=u(t,["model"]);p!=null&&f(e,["model"],p);const m=u(t,["inputConfig"]);m!=null&&f(e,["src"],Kp(m));const y=u(t,["outputConfig"]);y!=null&&f(e,["dest"],Jp(of(y)));const v=u(t,["completionStats"]);return v!=null&&f(e,["completionStats"],v),e}function Kp(t){const e={},n=u(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const r=u(t,["gcsSource","uris"]);r!=null&&f(e,["gcsUri"],r);const i=u(t,["bigquerySource","inputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function Xp(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=u(e,["fileName"]);r!=null&&f(n,["fileName"],r);const i=u(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>C0(t,s))),f(n,["requests","requests"],o)}return n}function Zp(t){const e={},n=u(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const r=u(t,["gcsUri"]);r!=null&&f(e,["gcsSource","uris"],r);const i=u(t,["bigqueryUri"]);if(i!=null&&f(e,["bigquerySource","inputUri"],i),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Qp(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function e0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],xo(t,r)),n}function t0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],xo(t,r)),n}function n0(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],n);const r=u(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],r0(r));const i=u(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const o=u(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const s=u(t,["avgLogprobs"]);s!=null&&f(e,["avgLogprobs"],s);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&f(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const p=u(t,["safetyRatings"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(v=>v)),f(e,["safetyRatings"],y)}const m=u(t,["urlContextMetadata"]);return m!=null&&f(e,["urlContextMetadata"],m),e}function r0(t){const e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function af(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>M0(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function i0(t,e){const n={},r=u(t,["displayName"]);if(e!==void 0&&r!=null&&f(e,["batch","displayName"],r),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function o0(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=u(t,["dest"]);return e!==void 0&&i!=null&&f(e,["outputConfig"],Yp(Wp(i))),n}function nd(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["src"]);i!=null&&f(n,["batch","inputConfig"],Xp(t,rf(t,i)));const o=u(e,["config"]);return o!=null&&i0(o,n),n}function s0(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["model"],pt(t,r));const i=u(e,["src"]);i!=null&&f(n,["inputConfig"],Zp(rf(t,i)));const o=u(e,["config"]);return o!=null&&o0(o,n),n}function a0(t,e){const n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["batch","displayName"],r),n}function l0(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["src"]);i!=null&&f(n,["batch","inputConfig"],g0(t,i));const o=u(e,["config"]);return o!=null&&a0(o,n),n}function c0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],xo(t,r)),n}function u0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],xo(t,r)),n}function d0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);return o!=null&&f(e,["error"],o),e}function f0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);return o!=null&&f(e,["error"],o),e}function h0(t,e){const n={},r=u(e,["contents"]);if(r!=null){let o=lc(t,r);Array.isArray(o)&&(o=o.map(s=>s)),f(n,["requests[]","request","content"],o)}const i=u(e,["config"]);return i!=null&&(f(n,["_self"],p0(i,n)),up(n,{"requests[].*":"requests[].request.*"})),n}function p0(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const o=u(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function g0(t,e){const n={},r=u(e,["fileName"]);r!=null&&f(n,["file_name"],r);const i=u(e,["inlinedRequests"]);return i!=null&&f(n,["requests"],h0(t,i)),n}function m0(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function v0(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function y0(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&f(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function x0(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],af(dn(i)));const o=u(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&f(r,["topP"],s);const a=u(e,["topK"]);a!=null&&f(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);const p=u(e,["stopSequences"]);p!=null&&f(r,["stopSequences"],p);const m=u(e,["responseLogprobs"]);m!=null&&f(r,["responseLogprobs"],m);const y=u(e,["logprobs"]);y!=null&&f(r,["logprobs"],y);const v=u(e,["presencePenalty"]);v!=null&&f(r,["presencePenalty"],v);const S=u(e,["frequencyPenalty"]);S!=null&&f(r,["frequencyPenalty"],S);const _=u(e,["seed"]);_!=null&&f(r,["seed"],_);const w=u(e,["responseMimeType"]);w!=null&&f(r,["responseMimeType"],w);const N=u(e,["responseSchema"]);N!=null&&f(r,["responseSchema"],cc(N));const A=u(e,["responseJsonSchema"]);if(A!=null&&f(r,["responseJsonSchema"],A),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=u(e,["safetySettings"]);if(n!==void 0&&I!=null){let B=I;Array.isArray(B)&&(B=B.map(z=>D0(z))),f(n,["safetySettings"],B)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let B=yo(D);Array.isArray(B)&&(B=B.map(z=>j0(vo(z)))),f(n,["tools"],B)}const M=u(e,["toolConfig"]);if(n!==void 0&&M!=null&&f(n,["toolConfig"],F0(M)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=u(e,["cachedContent"]);n!==void 0&&T!=null&&f(n,["cachedContent"],Mr(t,T));const k=u(e,["responseModalities"]);k!=null&&f(r,["responseModalities"],k);const R=u(e,["mediaResolution"]);R!=null&&f(r,["mediaResolution"],R);const $=u(e,["speechConfig"]);if($!=null&&f(r,["speechConfig"],uc($)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=u(e,["thinkingConfig"]);q!=null&&f(r,["thinkingConfig"],q);const E=u(e,["imageConfig"]);E!=null&&f(r,["imageConfig"],A0(E));const L=u(e,["enableEnhancedCivicAnswers"]);return L!=null&&f(r,["enableEnhancedCivicAnswers"],L),r}function b0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>n0(c))),f(e,["candidates"],l)}const i=u(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const s=u(t,["responseId"]);s!=null&&f(e,["responseId"],s);const a=u(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function w0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],xo(t,r)),n}function N0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],xo(t,r)),n}function S0(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function _0(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function A0(t){const e={},n=u(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const r=u(t,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function C0(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["request","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let a=Un(i);Array.isArray(a)&&(a=a.map(l=>af(l))),f(n,["request","contents"],a)}const o=u(e,["metadata"]);o!=null&&f(n,["metadata"],o);const s=u(e,["config"]);return s!=null&&f(n,["request","generationConfig"],x0(t,s,u(n,["request"],{}))),n}function T0(t){const e={},n=u(t,["response"]);n!=null&&f(e,["response"],b0(n));const r=u(t,["error"]);return r!=null&&f(e,["error"],r),e}function k0(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);if(e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function I0(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),n}function E0(t){const e={},n=u(t,["config"]);return n!=null&&k0(n,e),e}function P0(t){const e={},n=u(t,["config"]);return n!=null&&I0(n,e),e}function L0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>fa(s))),f(e,["batchJobs"],o)}return e}function R0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>jl(s))),f(e,["batchJobs"],o)}return e}function M0(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],m0(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],v0(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],Qp(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const p=u(t,["thought"]);p!=null&&f(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&f(e,["videoMetadata"],y),e}function D0(t){const e={},n=u(t,["category"]);if(n!=null&&f(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function F0(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],y0(r)),e}function j0(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],S0(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],_0(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Lr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Lr||(Lr={}));class ki{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U0 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ki(Lr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=nd(this.apiClient,e),r=n._url,i=De("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const p of l){const m=Object.assign({},p);if(m.systemInstruction){const y=m.systemInstruction;delete m.systemInstruction;const v=m.request;v.systemInstruction=y,m.request=v}c.push(m)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=s0(this.apiClient,e);return a=De("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>jl(p))}else{const c=nd(this.apiClient,e);return a=De("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>fa(p))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=l0(this.apiClient,e);return o=De("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>fa(l))}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=N0(this.apiClient,e);return a=De("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>jl(p))}else{const c=w0(this.apiClient,e);return a=De("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>fa(p))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const l=t0(this.apiClient,e);s=De("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=e0(this.apiClient,e);s=De("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=P0(e);return a=De("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=R0(p),y=new Zu;return Object.assign(y,m),y})}else{const c=E0(e);return a=De("batches",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=L0(p),y=new Zu;return Object.assign(y,m),y})}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=u0(this.apiClient,e);return a=De("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>f0(p))}else{const c=c0(this.apiClient,e);return a=De("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>d0(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B0(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function rd(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>lg(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function q0(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=u(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const o=u(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const s=u(t,["contents"]);if(e!==void 0&&s!=null){let p=Un(s);Array.isArray(p)&&(p=p.map(m=>rd(m))),f(e,["contents"],p)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],rd(dn(a)));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>ug(m))),f(e,["tools"],p)}const c=u(t,["toolConfig"]);if(e!==void 0&&c!=null&&f(e,["toolConfig"],cg(c)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function O0(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=u(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const o=u(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const s=u(t,["contents"]);if(e!==void 0&&s!=null){let m=Un(s);Array.isArray(m)&&(m=m.map(y=>y)),f(e,["contents"],m)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],dn(a));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>dg(y))),f(e,["tools"],m)}const c=u(t,["toolConfig"]);e!==void 0&&c!=null&&f(e,["toolConfig"],c);const p=u(t,["kmsKeyName"]);return e!==void 0&&p!=null&&f(e,["encryption_spec","kmsKeyName"],p),n}function H0(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["model"],Jd(t,r));const i=u(e,["config"]);return i!=null&&q0(i,n),n}function V0(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["model"],Jd(t,r));const i=u(e,["config"]);return i!=null&&O0(i,n),n}function G0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],Mr(t,r)),n}function z0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],Mr(t,r)),n}function W0(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function $0(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function J0(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Y0(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function K0(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&f(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function X0(t){const e={},n=u(t,["description"]);n!=null&&f(e,["description"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["parameters"]);i!=null&&f(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&f(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Z0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],Mr(t,r)),n}function Q0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],Mr(t,r)),n}function eg(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function tg(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function ng(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function rg(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function ig(t){const e={},n=u(t,["config"]);return n!=null&&ng(n,e),e}function og(t){const e={},n=u(t,["config"]);return n!=null&&rg(n,e),e}function sg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["cachedContents"],o)}return e}function ag(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["cachedContents"],o)}return e}function lg(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],J0(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],Y0(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],B0(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const p=u(t,["thought"]);p!=null&&f(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&f(e,["videoMetadata"],y),e}function cg(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],K0(r)),e}function ug(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],eg(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],tg(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function dg(t){const e={},n=u(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(y=>X0(y))),f(e,["functionDeclarations"],m)}const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);const p=u(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function fg(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=u(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function hg(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=u(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function pg(t,e){const n={},r=u(e,["name"]);r!=null&&f(n,["_url","name"],Mr(t,r));const i=u(e,["config"]);return i!=null&&fg(i,n),n}function gg(t,e){const n={},r=u(e,["name"]);r!=null&&f(n,["_url","name"],Mr(t,r));const i=u(e,["config"]);return i!=null&&hg(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mg extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ki(Lr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=V0(this.apiClient,e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const c=H0(this.apiClient,e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Q0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const c=Z0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=z0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=$0(p),y=new Ku;return Object.assign(y,m),y})}else{const c=G0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=W0(p),y=new Ku;return Object.assign(y,m),y})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=gg(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const c=pg(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=og(e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=ag(p),y=new Xu;return Object.assign(y,m),y})}else{const c=ig(e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=sg(p),y=new Xu;return Object.assign(y,m),y})}}}function ya(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function id(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ze(t){return this instanceof Ze?(this.v=t,this):new Ze(t)}function er(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(S){return Promise.resolve(S).then(v,m)}}function a(v,S){r[v]&&(i[v]=function(_){return new Promise(function(w,N){o.push([v,_,w,N])>1||l(v,_)})},S&&(i[v]=S(i[v])))}function l(v,S){try{c(r[v](S))}catch(_){y(o[0][3],_)}}function c(v){v.value instanceof Ze?Promise.resolve(v.value.v).then(p,m):y(o[0][2],v)}function p(v){l("next",v)}function m(v){l("throw",v)}function y(v,S){v(S),o.shift(),o.length&&l(o[0][0],o[0][1])}}function tr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof id=="function"?id(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vg(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:lf(n)}function lf(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function yg(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function od(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!lf(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class xg{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new bg(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class bg{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),yg(o)}async sendMessage(e){var n;await this.sendPromise;const r=dn(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const l=await i,c=(s=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,p=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let y=[];p!=null&&(y=(a=p.slice(m))!==null&&a!==void 0?a:[]);const v=c?[c]:[];this.recordHistory(r,v,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=dn(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?od(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return er(this,arguments,function*(){var i,o,s,a,l,c;const p=[];try{for(var m=!0,y=tr(e),v;v=yield Ze(y.next()),i=v.done,!i;m=!0){a=v.value,m=!1;const S=a;if(vg(S)){const _=(c=(l=S.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;_!==void 0&&p.push(_)}yield yield Ze(S)}}catch(S){o={error:S}}finally{try{!m&&!i&&(s=y.return)&&(yield Ze(s.call(y)))}finally{if(o)throw o.error}}this.recordHistory(n,p)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...od(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Na extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Na.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wg(t){const e={},n=u(t,["file"]);return n!=null&&f(e,["file"],n),e}function Ng(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Sg(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","file"],ef(n)),e}function _g(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Ag(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","file"],ef(n)),e}function Cg(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function Tg(t){const e={},n=u(t,["config"]);return n!=null&&Cg(n,e),e}function kg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ig extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ki(Lr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Tg(e);return o=De("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=kg(l),p=new Rp;return Object.assign(p,c),p})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=wg(e);return o=De("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Ng(l),p=new Mp;return Object.assign(p,c),p})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ag(e);return o=De("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Sg(e);return o=De("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=_g(l),p=new Dp;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ha(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Eg(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Wg(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function Pg(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Lg(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Rg(t){const e={},n=u(t,["description"]);n!=null&&f(e,["description"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["parameters"]);i!=null&&f(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&f(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Mg(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const r=u(t,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const i=u(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const o=u(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const s=u(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);const a=u(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const p=u(t,["mediaResolution"]);p!=null&&f(e,["mediaResolution"],p);const m=u(t,["presencePenalty"]);m!=null&&f(e,["presencePenalty"],m);const y=u(t,["responseLogprobs"]);y!=null&&f(e,["responseLogprobs"],y);const v=u(t,["responseMimeType"]);v!=null&&f(e,["responseMimeType"],v);const S=u(t,["responseModalities"]);S!=null&&f(e,["responseModalities"],S);const _=u(t,["responseSchema"]);_!=null&&f(e,["responseSchema"],_);const w=u(t,["routingConfig"]);w!=null&&f(e,["routingConfig"],w);const N=u(t,["seed"]);N!=null&&f(e,["seed"],N);const A=u(t,["speechConfig"]);A!=null&&f(e,["speechConfig"],A);const I=u(t,["stopSequences"]);I!=null&&f(e,["stopSequences"],I);const D=u(t,["temperature"]);D!=null&&f(e,["temperature"],D);const M=u(t,["thinkingConfig"]);M!=null&&f(e,["thinkingConfig"],M);const T=u(t,["topK"]);T!=null&&f(e,["topK"],T);const k=u(t,["topP"]);if(k!=null&&f(e,["topP"],k),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Dg(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Fg(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function jg(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const p=u(t,["seed"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","seed"],p);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","speechConfig"],dc(m));const y=u(t,["thinkingConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","thinkingConfig"],y);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],v);const S=u(t,["systemInstruction"]);e!==void 0&&S!=null&&f(e,["setup","systemInstruction"],Eg(dn(S)));const _=u(t,["tools"]);if(e!==void 0&&_!=null){let T=yo(_);Array.isArray(T)&&(T=T.map(k=>Jg(vo(k)))),f(e,["setup","tools"],T)}const w=u(t,["sessionResumption"]);e!==void 0&&w!=null&&f(e,["setup","sessionResumption"],$g(w));const N=u(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&f(e,["setup","inputAudioTranscription"],N);const A=u(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&f(e,["setup","outputAudioTranscription"],A);const I=u(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&f(e,["setup","contextWindowCompression"],D);const M=u(t,["proactivity"]);if(e!==void 0&&M!=null&&f(e,["setup","proactivity"],M),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Ug(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],Mg(r));const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const p=u(t,["seed"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","seed"],p);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","speechConfig"],dc(m));const y=u(t,["thinkingConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","thinkingConfig"],y);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],v);const S=u(t,["systemInstruction"]);e!==void 0&&S!=null&&f(e,["setup","systemInstruction"],dn(S));const _=u(t,["tools"]);if(e!==void 0&&_!=null){let k=yo(_);Array.isArray(k)&&(k=k.map(R=>Yg(vo(R)))),f(e,["setup","tools"],k)}const w=u(t,["sessionResumption"]);e!==void 0&&w!=null&&f(e,["setup","sessionResumption"],w);const N=u(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&f(e,["setup","inputAudioTranscription"],N);const A=u(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&f(e,["setup","outputAudioTranscription"],A);const I=u(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&f(e,["setup","contextWindowCompression"],D);const M=u(t,["proactivity"]);e!==void 0&&M!=null&&f(e,["setup","proactivity"],M);const T=u(t,["explicitVadSignal"]);return e!==void 0&&T!=null&&f(e,["setup","explicitVadSignal"],T),n}function Bg(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["setup","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&f(n,["config"],jg(i,n)),n}function qg(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["setup","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&f(n,["config"],Ug(i,n)),n}function Og(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function Hg(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["weightedPrompts"],r)}return e}function Vg(t){const e={},n=u(t,["media"]);if(n!=null){let c=Yd(n);Array.isArray(c)&&(c=c.map(p=>ha(p))),f(e,["mediaChunks"],c)}const r=u(t,["audio"]);r!=null&&f(e,["audio"],ha(Xd(r)));const i=u(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const o=u(t,["video"]);o!=null&&f(e,["video"],ha(Kd(o)));const s=u(t,["text"]);s!=null&&f(e,["text"],s);const a=u(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function Gg(t){const e={},n=u(t,["media"]);if(n!=null){let c=Yd(n);Array.isArray(c)&&(c=c.map(p=>p)),f(e,["mediaChunks"],c)}const r=u(t,["audio"]);r!=null&&f(e,["audio"],Xd(r));const i=u(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const o=u(t,["video"]);o!=null&&f(e,["video"],Kd(o));const s=u(t,["text"]);s!=null&&f(e,["text"],s);const a=u(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function zg(t){const e={},n=u(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const r=u(t,["serverContent"]);r!=null&&f(e,["serverContent"],r);const i=u(t,["toolCall"]);i!=null&&f(e,["toolCall"],i);const o=u(t,["toolCallCancellation"]);o!=null&&f(e,["toolCallCancellation"],o);const s=u(t,["usageMetadata"]);s!=null&&f(e,["usageMetadata"],Kg(s));const a=u(t,["goAway"]);a!=null&&f(e,["goAway"],a);const l=u(t,["sessionResumptionUpdate"]);l!=null&&f(e,["sessionResumptionUpdate"],l);const c=u(t,["voiceActivityDetectionSignal"]);return c!=null&&f(e,["voiceActivityDetectionSignal"],c),e}function Wg(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],Pg(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],Lg(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],ha(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const p=u(t,["thought"]);p!=null&&f(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&f(e,["videoMetadata"],y),e}function $g(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Jg(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],Dg(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],Fg(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function Yg(t){const e={},n=u(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(y=>Rg(y))),f(e,["functionDeclarations"],m)}const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);const p=u(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function Kg(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const r=u(t,["cachedContentTokenCount"]);r!=null&&f(e,["cachedContentTokenCount"],r);const i=u(t,["candidatesTokenCount"]);i!=null&&f(e,["responseTokenCount"],i);const o=u(t,["toolUsePromptTokenCount"]);o!=null&&f(e,["toolUsePromptTokenCount"],o);const s=u(t,["thoughtsTokenCount"]);s!=null&&f(e,["thoughtsTokenCount"],s);const a=u(t,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);const l=u(t,["promptTokensDetails"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["promptTokensDetails"],v)}const c=u(t,["cacheTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["cacheTokensDetails"],v)}const p=u(t,["candidatesTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["responseTokensDetails"],v)}const m=u(t,["toolUsePromptTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["toolUsePromptTokensDetails"],v)}const y=u(t,["trafficType"]);return y!=null&&f(e,["trafficType"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xg(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Zg(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],n);const r=u(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],Qg(r));const i=u(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const o=u(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const s=u(t,["avgLogprobs"]);s!=null&&f(e,["avgLogprobs"],s);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&f(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const p=u(t,["safetyRatings"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(v=>v)),f(e,["safetyRatings"],y)}const m=u(t,["urlContextMetadata"]);return m!=null&&f(e,["urlContextMetadata"],m),e}function Qg(t){const e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function em(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let o=Un(i);Array.isArray(o)&&(o=o.map(s=>s)),f(n,["contents"],o)}return n}function tm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["tokensInfo"],i)}return e}function nm(t){const e={},n=u(t,["values"]);n!=null&&f(e,["values"],n);const r=u(t,["statistics"]);return r!=null&&f(e,["statistics"],rm(r)),e}function rm(t){const e={},n=u(t,["truncated"]);n!=null&&f(e,["truncated"],n);const r=u(t,["token_count"]);return r!=null&&f(e,["tokenCount"],r),e}function Sa(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>f1(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function im(t){const e={},n=u(t,["controlType"]);n!=null&&f(e,["controlType"],n);const r=u(t,["enableControlImageComputation"]);return r!=null&&f(e,["computeControl"],r),e}function om(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function sm(t,e){const n={},r=u(t,["systemInstruction"]);e!==void 0&&r!=null&&f(e,["systemInstruction"],dn(r));const i=u(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>ff(a))),f(e,["tools"],s)}const o=u(t,["generationConfig"]);return e!==void 0&&o!=null&&f(e,["generationConfig"],Xm(o)),n}function am(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=Un(i);Array.isArray(s)&&(s=s.map(a=>Sa(a))),f(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&om(o),n}function lm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=Un(i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&sm(o,n),n}function cm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["totalTokens"]);r!=null&&f(e,["totalTokens"],r);const i=u(t,["cachedContentTokenCount"]);return i!=null&&f(e,["cachedContentTokenCount"],i),e}function um(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["totalTokens"]);return r!=null&&f(e,["totalTokens"],r),e}function dm(t,e){const n={},r=u(e,["model"]);return r!=null&&f(n,["_url","name"],pt(t,r)),n}function fm(t,e){const n={},r=u(e,["model"]);return r!=null&&f(n,["_url","name"],pt(t,r)),n}function hm(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function pm(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function gm(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=u(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const o=u(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const y=u(t,["includeRaiReason"]);e!==void 0&&y!=null&&f(e,["parameters","includeRaiReason"],y);const v=u(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const S=u(t,["outputMimeType"]);e!==void 0&&S!=null&&f(e,["parameters","outputOptions","mimeType"],S);const _=u(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","compressionQuality"],_);const w=u(t,["addWatermark"]);e!==void 0&&w!=null&&f(e,["parameters","addWatermark"],w);const N=u(t,["labels"]);e!==void 0&&N!=null&&f(e,["labels"],N);const A=u(t,["editMode"]);e!==void 0&&A!=null&&f(e,["parameters","editMode"],A);const I=u(t,["baseSteps"]);return e!==void 0&&I!=null&&f(e,["parameters","editConfig","baseSteps"],I),n}function mm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>y1(l))),f(n,["instances[0]","referenceImages"],a)}const s=u(e,["config"]);return s!=null&&gm(s,n),n}function vm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>_a(o))),f(e,["generatedImages"],i)}return e}function ym(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const o=u(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function xm(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&f(e,["instances[]","task_type"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&f(e,["instances[]","title"],i);const o=u(t,["outputDimensionality"]);e!==void 0&&o!=null&&f(e,["parameters","outputDimensionality"],o);const s=u(t,["mimeType"]);e!==void 0&&s!=null&&f(e,["instances[]","mimeType"],s);const a=u(t,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),n}function bm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let a=lc(t,i);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}const o=u(e,["config"]);o!=null&&ym(o,n);const s=u(e,["model"]);return s!==void 0&&f(n,["requests[]","model"],pt(t,s)),n}function wm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=lc(t,i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["instances[]","content"],s)}const o=u(e,["config"]);return o!=null&&xm(o,n),n}function Nm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["embeddings"],o)}const i=u(t,["metadata"]);return i!=null&&f(e,["metadata"],i),e}function Sm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>nm(s))),f(e,["embeddings"],o)}const i=u(t,["metadata"]);return i!=null&&f(e,["metadata"],i),e}function _m(t){const e={},n=u(t,["endpoint"]);n!=null&&f(e,["name"],n);const r=u(t,["deployedModelId"]);return r!=null&&f(e,["deployedModelId"],r),e}function Am(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Cm(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Tm(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&f(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function km(t){const e={},n=u(t,["description"]);n!=null&&f(e,["description"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["parameters"]);i!=null&&f(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&f(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Im(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],Sa(dn(i)));const o=u(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&f(r,["topP"],s);const a=u(e,["topK"]);a!=null&&f(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);const p=u(e,["stopSequences"]);p!=null&&f(r,["stopSequences"],p);const m=u(e,["responseLogprobs"]);m!=null&&f(r,["responseLogprobs"],m);const y=u(e,["logprobs"]);y!=null&&f(r,["logprobs"],y);const v=u(e,["presencePenalty"]);v!=null&&f(r,["presencePenalty"],v);const S=u(e,["frequencyPenalty"]);S!=null&&f(r,["frequencyPenalty"],S);const _=u(e,["seed"]);_!=null&&f(r,["seed"],_);const w=u(e,["responseMimeType"]);w!=null&&f(r,["responseMimeType"],w);const N=u(e,["responseSchema"]);N!=null&&f(r,["responseSchema"],cc(N));const A=u(e,["responseJsonSchema"]);if(A!=null&&f(r,["responseJsonSchema"],A),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=u(e,["safetySettings"]);if(n!==void 0&&I!=null){let B=I;Array.isArray(B)&&(B=B.map(z=>x1(z))),f(n,["safetySettings"],B)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let B=yo(D);Array.isArray(B)&&(B=B.map(z=>C1(vo(z)))),f(n,["tools"],B)}const M=u(e,["toolConfig"]);if(n!==void 0&&M!=null&&f(n,["toolConfig"],A1(M)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=u(e,["cachedContent"]);n!==void 0&&T!=null&&f(n,["cachedContent"],Mr(t,T));const k=u(e,["responseModalities"]);k!=null&&f(r,["responseModalities"],k);const R=u(e,["mediaResolution"]);R!=null&&f(r,["mediaResolution"],R);const $=u(e,["speechConfig"]);if($!=null&&f(r,["speechConfig"],uc($)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=u(e,["thinkingConfig"]);q!=null&&f(r,["thinkingConfig"],q);const E=u(e,["imageConfig"]);E!=null&&f(r,["imageConfig"],n1(E));const L=u(e,["enableEnhancedCivicAnswers"]);return L!=null&&f(r,["enableEnhancedCivicAnswers"],L),r}function Em(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],dn(i));const o=u(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&f(r,["topP"],s);const a=u(e,["topK"]);a!=null&&f(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);const p=u(e,["stopSequences"]);p!=null&&f(r,["stopSequences"],p);const m=u(e,["responseLogprobs"]);m!=null&&f(r,["responseLogprobs"],m);const y=u(e,["logprobs"]);y!=null&&f(r,["logprobs"],y);const v=u(e,["presencePenalty"]);v!=null&&f(r,["presencePenalty"],v);const S=u(e,["frequencyPenalty"]);S!=null&&f(r,["frequencyPenalty"],S);const _=u(e,["seed"]);_!=null&&f(r,["seed"],_);const w=u(e,["responseMimeType"]);w!=null&&f(r,["responseMimeType"],w);const N=u(e,["responseSchema"]);N!=null&&f(r,["responseSchema"],cc(N));const A=u(e,["responseJsonSchema"]);A!=null&&f(r,["responseJsonSchema"],A);const I=u(e,["routingConfig"]);I!=null&&f(r,["routingConfig"],I);const D=u(e,["modelSelectionConfig"]);D!=null&&f(r,["modelConfig"],D);const M=u(e,["safetySettings"]);if(n!==void 0&&M!=null){let H=M;Array.isArray(H)&&(H=H.map(F=>F)),f(n,["safetySettings"],H)}const T=u(e,["tools"]);if(n!==void 0&&T!=null){let H=yo(T);Array.isArray(H)&&(H=H.map(F=>ff(vo(F)))),f(n,["tools"],H)}const k=u(e,["toolConfig"]);n!==void 0&&k!=null&&f(n,["toolConfig"],k);const R=u(e,["labels"]);n!==void 0&&R!=null&&f(n,["labels"],R);const $=u(e,["cachedContent"]);n!==void 0&&$!=null&&f(n,["cachedContent"],Mr(t,$));const q=u(e,["responseModalities"]);q!=null&&f(r,["responseModalities"],q);const E=u(e,["mediaResolution"]);E!=null&&f(r,["mediaResolution"],E);const L=u(e,["speechConfig"]);L!=null&&f(r,["speechConfig"],uc(L));const B=u(e,["audioTimestamp"]);B!=null&&f(r,["audioTimestamp"],B);const z=u(e,["thinkingConfig"]);z!=null&&f(r,["thinkingConfig"],z);const ne=u(e,["imageConfig"]);if(ne!=null&&f(r,["imageConfig"],r1(ne)),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function sd(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=Un(i);Array.isArray(s)&&(s=s.map(a=>Sa(a))),f(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&f(n,["generationConfig"],Im(t,o,n)),n}function ad(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=Un(i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&f(n,["generationConfig"],Em(t,o,n)),n}function ld(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Zg(c))),f(e,["candidates"],l)}const i=u(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const s=u(t,["responseId"]);s!=null&&f(e,["responseId"],s);const a=u(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function cd(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(p=>p)),f(e,["candidates"],c)}const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const o=u(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const s=u(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const a=u(t,["responseId"]);a!=null&&f(e,["responseId"],a);const l=u(t,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function Pm(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=u(t,["aspectRatio"]);e!==void 0&&i!=null&&f(e,["parameters","aspectRatio"],i);const o=u(t,["guidanceScale"]);if(e!==void 0&&o!=null&&f(e,["parameters","guidanceScale"],o),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=u(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&f(e,["parameters","safetySetting"],s);const a=u(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const l=u(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&f(e,["parameters","includeSafetyAttributes"],l);const c=u(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const p=u(t,["language"]);e!==void 0&&p!=null&&f(e,["parameters","language"],p);const m=u(t,["outputMimeType"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","mimeType"],m);const y=u(t,["outputCompressionQuality"]);if(e!==void 0&&y!=null&&f(e,["parameters","outputOptions","compressionQuality"],y),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=u(t,["imageSize"]);if(e!==void 0&&v!=null&&f(e,["parameters","sampleImageSize"],v),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Lm(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=u(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const o=u(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const y=u(t,["includeRaiReason"]);e!==void 0&&y!=null&&f(e,["parameters","includeRaiReason"],y);const v=u(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const S=u(t,["outputMimeType"]);e!==void 0&&S!=null&&f(e,["parameters","outputOptions","mimeType"],S);const _=u(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","compressionQuality"],_);const w=u(t,["addWatermark"]);e!==void 0&&w!=null&&f(e,["parameters","addWatermark"],w);const N=u(t,["labels"]);e!==void 0&&N!=null&&f(e,["labels"],N);const A=u(t,["imageSize"]);e!==void 0&&A!=null&&f(e,["parameters","sampleImageSize"],A);const I=u(t,["enhancePrompt"]);return e!==void 0&&I!=null&&f(e,["parameters","enhancePrompt"],I),n}function Rm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["config"]);return o!=null&&Pm(o,n),n}function Mm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["config"]);return o!=null&&Lm(o,n),n}function Dm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>$m(s))),f(e,["generatedImages"],o)}const i=u(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],uf(i)),e}function Fm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>_a(s))),f(e,["generatedImages"],o)}const i=u(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],df(i)),e}function jm(t,e){const n={},r=u(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=u(t,["durationSeconds"]);if(e!==void 0&&i!=null&&f(e,["parameters","durationSeconds"],i),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const s=u(t,["resolution"]);e!==void 0&&s!=null&&f(e,["parameters","resolution"],s);const a=u(t,["personGeneration"]);if(e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=u(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const c=u(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&f(e,["parameters","enhancePrompt"],c),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=u(t,["lastFrame"]);e!==void 0&&p!=null&&f(e,["instances[0]","lastFrame"],Aa(p));const m=u(t,["referenceImages"]);if(e!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(v=>B1(v))),f(e,["instances[0]","referenceImages"],y)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Um(t,e){const n={},r=u(t,["numberOfVideos"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=u(t,["fps"]);e!==void 0&&o!=null&&f(e,["parameters","fps"],o);const s=u(t,["durationSeconds"]);e!==void 0&&s!=null&&f(e,["parameters","durationSeconds"],s);const a=u(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const l=u(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=u(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);const m=u(t,["pubsubTopic"]);e!==void 0&&m!=null&&f(e,["parameters","pubsubTopic"],m);const y=u(t,["negativePrompt"]);e!==void 0&&y!=null&&f(e,["parameters","negativePrompt"],y);const v=u(t,["enhancePrompt"]);e!==void 0&&v!=null&&f(e,["parameters","enhancePrompt"],v);const S=u(t,["generateAudio"]);e!==void 0&&S!=null&&f(e,["parameters","generateAudio"],S);const _=u(t,["lastFrame"]);e!==void 0&&_!=null&&f(e,["instances[0]","lastFrame"],nr(_));const w=u(t,["referenceImages"]);if(e!==void 0&&w!=null){let I=w;Array.isArray(I)&&(I=I.map(D=>q1(D))),f(e,["instances[0]","referenceImages"],I)}const N=u(t,["mask"]);e!==void 0&&N!=null&&f(e,["instances[0]","mask"],U1(N));const A=u(t,["compressionQuality"]);return e!==void 0&&A!=null&&f(e,["parameters","compressionQuality"],A),n}function Bm(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response","generateVideoResponse"]);return s!=null&&f(e,["response"],Vm(s)),e}function qm(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],Gm(s)),e}function Om(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["image"]);o!=null&&f(n,["instances[0]","image"],Aa(o));const s=u(e,["video"]);s!=null&&f(n,["instances[0]","video"],hf(s));const a=u(e,["source"]);a!=null&&zm(a,n);const l=u(e,["config"]);return l!=null&&jm(l,n),n}function Hm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["image"]);o!=null&&f(n,["instances[0]","image"],nr(o));const s=u(e,["video"]);s!=null&&f(n,["instances[0]","video"],pf(s));const a=u(e,["source"]);a!=null&&Wm(a,n);const l=u(e,["config"]);return l!=null&&Um(l,n),n}function Vm(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ym(s))),f(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function Gm(t){const e={},n=u(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Km(s))),f(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function zm(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=u(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],Aa(i));const o=u(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],hf(o)),n}function Wm(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=u(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],nr(i));const o=u(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],pf(o)),n}function $m(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],i1(n));const r=u(t,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const i=u(t,["_self"]);return i!=null&&f(e,["safetyAttributes"],uf(i)),e}function _a(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],cf(n));const r=u(t,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const i=u(t,["_self"]);i!=null&&f(e,["safetyAttributes"],df(i));const o=u(t,["prompt"]);return o!=null&&f(e,["enhancedPrompt"],o),e}function Jm(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["mask"],cf(n));const r=u(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["labels"],i)}return e}function Ym(t){const e={},n=u(t,["video"]);return n!=null&&f(e,["video"],F1(n)),e}function Km(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],j1(n)),e}function Xm(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const r=u(t,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const i=u(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const o=u(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const s=u(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);const a=u(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const p=u(t,["mediaResolution"]);p!=null&&f(e,["mediaResolution"],p);const m=u(t,["presencePenalty"]);m!=null&&f(e,["presencePenalty"],m);const y=u(t,["responseLogprobs"]);y!=null&&f(e,["responseLogprobs"],y);const v=u(t,["responseMimeType"]);v!=null&&f(e,["responseMimeType"],v);const S=u(t,["responseModalities"]);S!=null&&f(e,["responseModalities"],S);const _=u(t,["responseSchema"]);_!=null&&f(e,["responseSchema"],_);const w=u(t,["routingConfig"]);w!=null&&f(e,["routingConfig"],w);const N=u(t,["seed"]);N!=null&&f(e,["seed"],N);const A=u(t,["speechConfig"]);A!=null&&f(e,["speechConfig"],A);const I=u(t,["stopSequences"]);I!=null&&f(e,["stopSequences"],I);const D=u(t,["temperature"]);D!=null&&f(e,["temperature"],D);const M=u(t,["thinkingConfig"]);M!=null&&f(e,["thinkingConfig"],M);const T=u(t,["topK"]);T!=null&&f(e,["topK"],T);const k=u(t,["topP"]);if(k!=null&&f(e,["topP"],k),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Zm(t,e){const n={},r=u(e,["model"]);return r!=null&&f(n,["_url","name"],pt(t,r)),n}function Qm(t,e){const n={},r=u(e,["model"]);return r!=null&&f(n,["_url","name"],pt(t,r)),n}function e1(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function t1(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function n1(t){const e={},n=u(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const r=u(t,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function r1(t){const e={},n=u(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const r=u(t,["imageSize"]);r!=null&&f(e,["imageSize"],r);const i=u(t,["personGeneration"]);i!=null&&f(e,["personGeneration"],i);const o=u(t,["outputMimeType"]);o!=null&&f(e,["imageOutputOptions","mimeType"],o);const s=u(t,["outputCompressionQuality"]);return s!=null&&f(e,["imageOutputOptions","compressionQuality"],s),e}function i1(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],si(n));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function cf(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&f(e,["imageBytes"],si(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Aa(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],si(n));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function nr(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const r=u(t,["imageBytes"]);r!=null&&f(e,["bytesBase64Encoded"],si(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function o1(t,e,n){const r={},i=u(e,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const o=u(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const s=u(e,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);const a=u(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],tf(t,a)),r}function s1(t,e,n){const r={},i=u(e,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const o=u(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const s=u(e,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);const a=u(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],tf(t,a)),r}function a1(t,e){const n={},r=u(e,["config"]);return r!=null&&o1(t,r,n),n}function l1(t,e){const n={},r=u(e,["config"]);return r!=null&&s1(t,r,n),n}function c1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["_self"]);if(i!=null){let o=nf(i);Array.isArray(o)&&(o=o.map(s=>Ul(s))),f(e,["models"],o)}return e}function u1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["_self"]);if(i!=null){let o=nf(i);Array.isArray(o)&&(o=o.map(s=>Bl(s))),f(e,["models"],o)}return e}function d1(t){const e={},n=u(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const r=u(t,["segmentationClasses"]);r!=null&&f(e,["maskClasses"],r);const i=u(t,["maskDilation"]);return i!=null&&f(e,["dilation"],i),e}function Ul(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const o=u(t,["version"]);o!=null&&f(e,["version"],o);const s=u(t,["_self"]);s!=null&&f(e,["tunedModelInfo"],T1(s));const a=u(t,["inputTokenLimit"]);a!=null&&f(e,["inputTokenLimit"],a);const l=u(t,["outputTokenLimit"]);l!=null&&f(e,["outputTokenLimit"],l);const c=u(t,["supportedGenerationMethods"]);c!=null&&f(e,["supportedActions"],c);const p=u(t,["temperature"]);p!=null&&f(e,["temperature"],p);const m=u(t,["maxTemperature"]);m!=null&&f(e,["maxTemperature"],m);const y=u(t,["topP"]);y!=null&&f(e,["topP"],y);const v=u(t,["topK"]);v!=null&&f(e,["topK"],v);const S=u(t,["thinking"]);return S!=null&&f(e,["thinking"],S),e}function Bl(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const o=u(t,["versionId"]);o!=null&&f(e,["version"],o);const s=u(t,["deployedModels"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(y=>_m(y))),f(e,["endpoints"],m)}const a=u(t,["labels"]);a!=null&&f(e,["labels"],a);const l=u(t,["_self"]);l!=null&&f(e,["tunedModelInfo"],k1(l));const c=u(t,["defaultCheckpointId"]);c!=null&&f(e,["defaultCheckpointId"],c);const p=u(t,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(y=>y)),f(e,["checkpoints"],m)}return e}function f1(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],Am(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],Cm(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],Xg(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const p=u(t,["thought"]);p!=null&&f(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&f(e,["videoMetadata"],y),e}function h1(t){const e={},n=u(t,["productImage"]);return n!=null&&f(e,["image"],nr(n)),e}function p1(t,e){const n={},r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=u(t,["baseSteps"]);e!==void 0&&i!=null&&f(e,["parameters","baseSteps"],i);const o=u(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const s=u(t,["seed"]);e!==void 0&&s!=null&&f(e,["parameters","seed"],s);const a=u(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=u(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=u(t,["addWatermark"]);e!==void 0&&c!=null&&f(e,["parameters","addWatermark"],c);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const m=u(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m);const y=u(t,["enhancePrompt"]);e!==void 0&&y!=null&&f(e,["parameters","enhancePrompt"],y);const v=u(t,["labels"]);return e!==void 0&&v!=null&&f(e,["labels"],v),n}function g1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["source"]);i!=null&&v1(i,n);const o=u(e,["config"]);return o!=null&&p1(o,n),n}function m1(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>_a(i))),f(e,["generatedImages"],r)}return e}function v1(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=u(t,["personImage"]);e!==void 0&&i!=null&&f(e,["instances[0]","personImage","image"],nr(i));const o=u(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>h1(a))),f(e,["instances[0]","productImages"],s)}return n}function y1(t){const e={},n=u(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],nr(n));const r=u(t,["referenceId"]);r!=null&&f(e,["referenceId"],r);const i=u(t,["referenceType"]);i!=null&&f(e,["referenceType"],i);const o=u(t,["maskImageConfig"]);o!=null&&f(e,["maskImageConfig"],d1(o));const s=u(t,["controlImageConfig"]);s!=null&&f(e,["controlImageConfig"],im(s));const a=u(t,["styleImageConfig"]);a!=null&&f(e,["styleImageConfig"],a);const l=u(t,["subjectImageConfig"]);return l!=null&&f(e,["subjectImageConfig"],l),e}function uf(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const r=u(t,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const i=u(t,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function df(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const r=u(t,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const i=u(t,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function x1(t){const e={},n=u(t,["category"]);if(n!=null&&f(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function b1(t){const e={},n=u(t,["image"]);return n!=null&&f(e,["image"],nr(n)),e}function w1(t,e){const n={},r=u(t,["mode"]);e!==void 0&&r!=null&&f(e,["parameters","mode"],r);const i=u(t,["maxPredictions"]);e!==void 0&&i!=null&&f(e,["parameters","maxPredictions"],i);const o=u(t,["confidenceThreshold"]);e!==void 0&&o!=null&&f(e,["parameters","confidenceThreshold"],o);const s=u(t,["maskDilation"]);e!==void 0&&s!=null&&f(e,["parameters","maskDilation"],s);const a=u(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","binaryColorThreshold"],a);const l=u(t,["labels"]);return e!==void 0&&l!=null&&f(e,["labels"],l),n}function N1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["source"]);i!=null&&_1(i,n);const o=u(e,["config"]);return o!=null&&w1(o,n),n}function S1(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Jm(i))),f(e,["generatedMasks"],r)}return e}function _1(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=u(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],nr(i));const o=u(t,["scribbleImage"]);return e!==void 0&&o!=null&&f(e,["instances[0]","scribble"],b1(o)),n}function A1(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],Tm(r)),e}function C1(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],e1(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],t1(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function ff(t){const e={},n=u(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(y=>km(y))),f(e,["functionDeclarations"],m)}const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);const p=u(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function T1(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const r=u(t,["createTime"]);r!=null&&f(e,["createTime"],r);const i=u(t,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function k1(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const r=u(t,["createTime"]);r!=null&&f(e,["createTime"],r);const i=u(t,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function I1(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=u(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const o=u(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function E1(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=u(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const o=u(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function P1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","name"],pt(t,r));const i=u(e,["config"]);return i!=null&&I1(i,n),n}function L1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&E1(i,n),n}function R1(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=u(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&f(e,["parameters","safetySetting"],i);const o=u(t,["personGeneration"]);e!==void 0&&o!=null&&f(e,["parameters","personGeneration"],o);const s=u(t,["includeRaiReason"]);e!==void 0&&s!=null&&f(e,["parameters","includeRaiReason"],s);const a=u(t,["outputMimeType"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","mimeType"],a);const l=u(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&f(e,["parameters","outputOptions","compressionQuality"],l);const c=u(t,["enhanceInputImage"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],c);const p=u(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=u(t,["labels"]);e!==void 0&&m!=null&&f(e,["labels"],m);const y=u(t,["numberOfImages"]);e!==void 0&&y!=null&&f(e,["parameters","sampleCount"],y);const v=u(t,["mode"]);return e!==void 0&&v!=null&&f(e,["parameters","mode"],v),n}function M1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["image"]);i!=null&&f(n,["instances[0]","image"],nr(i));const o=u(e,["upscaleFactor"]);o!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=u(e,["config"]);return s!=null&&R1(s,n),n}function D1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>_a(o))),f(e,["generatedImages"],i)}return e}function F1(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["uri"],n);const r=u(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],si(r));const i=u(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function j1(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],si(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function U1(t){const e={},n=u(t,["image"]);n!=null&&f(e,["_self"],nr(n));const r=u(t,["maskMode"]);return r!=null&&f(e,["maskMode"],r),e}function B1(t){const e={},n=u(t,["image"]);n!=null&&f(e,["image"],Aa(n));const r=u(t,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function q1(t){const e={},n=u(t,["image"]);n!=null&&f(e,["image"],nr(n));const r=u(t,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function hf(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["uri"],n);const r=u(t,["videoBytes"]);r!=null&&f(e,["encodedVideo"],si(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["encoding"],i),e}function pf(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const r=u(t,["videoBytes"]);r!=null&&f(e,["bytesBase64Encoded"],si(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O1(t,e){const n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["displayName"],r),n}function H1(t){const e={},n=u(t,["config"]);return n!=null&&O1(n,e),e}function V1(t,e){const n={},r=u(t,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),n}function G1(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const r=u(t,["config"]);return r!=null&&V1(r,e),e}function z1(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function W1(t,e){const n={},r=u(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["customMetadata"],o)}const i=u(t,["chunkingConfig"]);return e!==void 0&&i!=null&&f(e,["chunkingConfig"],i),n}function $1(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],Y1(s)),e}function J1(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const r=u(t,["fileName"]);r!=null&&f(e,["fileName"],r);const i=u(t,["config"]);return i!=null&&W1(i,e),e}function Y1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&f(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function K1(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function X1(t){const e={},n=u(t,["config"]);return n!=null&&K1(n,e),e}function Z1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["fileSearchStores"],o)}return e}function gf(t,e){const n={},r=u(t,["mimeType"]);e!==void 0&&r!=null&&f(e,["mimeType"],r);const i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=u(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["customMetadata"],a)}const s=u(t,["chunkingConfig"]);return e!==void 0&&s!=null&&f(e,["chunkingConfig"],s),n}function Q1(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const r=u(t,["config"]);return r!=null&&gf(r,e),e}function e2(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t2="Content-Type",n2="X-Server-Timeout",r2="User-Agent",ql="x-goog-api-client",i2="1.35.0",o2=`google-genai-sdk/${i2}`,s2="v1beta1",a2="v1beta";class l2{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:s2,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:a2,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&c2(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await ud(i),new Dl(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await ud(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return er(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:p}=yield Ze(i.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=o.decode(p,{stream:!0});try{const S=JSON.parse(m);if("error"in S){const _=JSON.parse(JSON.stringify(S.error)),w=_.status,N=_.code,A=`got status: ${w}. ${JSON.stringify(S)}`;if(N>=400&&N<600)throw new Na({message:A,status:N})}}catch(S){if(S.name==="ApiError")throw S}s+=m;let y=-1,v=0;for(;;){y=-1,v=0;for(const w of l){const N=s.indexOf(w);N!==-1&&(y===-1||N<y)&&(y=N,v=w.length)}if(y===-1)break;const S=s.substring(0,y);s=s.substring(y+v);const _=S.trim();if(_.startsWith(a)){const w=_.substring(a.length).trim();try{const N=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ze(new Dl(N))}catch(N){throw new Error(`exception parsing stream chunk ${w}. ${N}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=o2+" "+this.clientOptions.userAgentExtra;return e[r2]=n,e[ql]=n,e[t2]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(n2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},c=this.getFileName(e),p=De("upload/v1beta/files",l._url),m=await this.fetchUploadUrl(p,i.sizeBytes,i.mimeType,c,l,n==null?void 0:n.httpOptions);return o.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),a=String(s.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),m={};r!=null&&gf(r,m);const y=await this.fetchUploadUrl(c,a,l,p,m,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function ud(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Na({message:i,status:n}):new Error(i)}}function c2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const c=s[l],p=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&p&&typeof p=="object"&&!Array.isArray(p)?a[l]=r(p,c):(p&&c&&typeof p!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof p}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u2="mcp_used/unknown";let d2=!1;function mf(t){for(const e of t)if(f2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return d2}function vf(t){var e;const n=(e=t[ql])!==null&&e!==void 0?e:"";t[ql]=(n+` ${u2}`).trimStart()}function f2(t){return t!==null&&typeof t=="object"&&t instanceof fc}function h2(t){return er(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const s=yield Ze(n.listTools({cursor:i}));for(const a of s.tools)yield yield Ze(a),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class fc{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new fc(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const p of this.mcpClients)try{for(var a=!0,l=(n=void 0,tr(h2(p))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const m=i;s.push(m);const y=m.name;if(o[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);o[y]=p}}catch(m){n={error:m}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),zp(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function p2(t,e,n){const r=new jp;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class g2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=y2(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const p=new Promise(I=>{c=I}),m=e.callbacks,y=function(){c({})},v=this.apiClient,S={onopen:y,onmessage:I=>{p2(v,m.onmessage,I)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(I){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(I){}},_=this.webSocketFactory.create(l,v2(s),S);_.connect(),await p;const A={setup:{model:pt(this.apiClient,e.model)}};return _.send(JSON.stringify(A)),new m2(_,this.apiClient)}}class m2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Hg(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Og(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(fo.PLAY)}pause(){this.sendPlaybackControl(fo.PAUSE)}stop(){this.sendPlaybackControl(fo.STOP)}resetContext(){this.sendPlaybackControl(fo.RESET_CONTEXT)}close(){this.conn.close()}}function v2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function y2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function b2(t,e,n){const r=new Fp;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=zg(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class w2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new g2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let p;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&mf(e.config.tools)&&vf(m);const y=A2(m);if(this.apiClient.isVertexAI())p=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y,p);else{const $=this.apiClient.getApiKey();let q="BidiGenerateContent",E="key";$!=null&&$.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),q="BidiGenerateContentConstrained",E="access_token"),p=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${q}?${E}=${$}`}let v=()=>{};const S=new Promise($=>{v=$}),_=e.callbacks,w=function(){var $;($=_==null?void 0:_.onopen)===null||$===void 0||$.call(_),v({})},N=this.apiClient,A={onopen:w,onmessage:$=>{b2(N,_.onmessage,$)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function($){},onclose:(r=_==null?void 0:_.onclose)!==null&&r!==void 0?r:function($){}},I=this.webSocketFactory.create(p,_2(y),A);I.connect(),await S;let D=pt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const $=this.apiClient.getProject(),q=this.apiClient.getLocation();D=`projects/${$}/locations/${q}/`+D}let M={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ga.AUDIO]}:e.config.responseModalities=[ga.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const T=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],k=[];for(const $ of T)if(this.isCallableTool($)){const q=$;k.push(await q.tool())}else k.push($);k.length>0&&(e.config.tools=k);const R={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?M=qg(this.apiClient,R):M=Bg(this.apiClient,R),delete M.config,I.send(JSON.stringify(M)),new S2(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const N2={turnComplete:!0};class S2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Un(n.turns),e.isVertexAI()||(r=r.map(i=>Sa(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(x2)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},N2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Gg(e)}:n={realtimeInput:Vg(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function _2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function A2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dd=10;function fd(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(go(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function go(t){return"callTool"in t&&typeof t.callTool=="function"}function C2(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>go(i)))!==null&&r!==void 0?r:!1}function hd(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(go(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function pd(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T2 extends Rr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!C2(n)||fd(n.config))return await this.generateContentInternal(l);const c=hd(n);if(c.length>0){const _=c.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${_}.`)}let p,m;const y=Un(l.contents),v=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:dd;let S=0;for(;S<v&&(p=await this.generateContentInternal(l),!(!p.functionCalls||p.functionCalls.length===0));){const _=p.candidates[0].content,w=[];for(const N of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(go(N)){const I=await N.callTool(p.functionCalls);w.push(...I)}S++,m={role:"user",parts:w},l.contents=Un(l.contents),l.contents.push(_),l.contents.push(m),pd(l.config)&&(y.push(_),y.push(m))}return pd(l.config)&&(p.automaticFunctionCallingHistory=y),p},this.generateContentStream=async n=>{var r,i,o,s,a;if(this.maybeMoveToResponseJsonSchem(n),fd(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const l=hd(n);if(l.length>0){const m=l.map(y=>`tools[${y}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,p=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:s.push(l);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new ki(Lr.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async l=>go(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&mf(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),vf(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(go(s)){const a=s,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:dd;let s=!1,a=0;const l=await this.initAfcToolsMap(e);return(function(c,p,m){return er(this,arguments,function*(){for(var y,v,S,_,w,N;a<o;){s&&(a++,s=!1);const M=yield Ze(c.processParamsMaybeAddMcpUsage(m)),T=yield Ze(c.generateContentStreamInternal(M)),k=[],R=[];try{for(var A=!0,I=(v=void 0,tr(T)),D;D=yield Ze(I.next()),y=D.done,!y;A=!0){_=D.value,A=!1;const $=_;if(yield yield Ze($),$.candidates&&(!((w=$.candidates[0])===null||w===void 0)&&w.content)){R.push($.candidates[0].content);for(const q of(N=$.candidates[0].content.parts)!==null&&N!==void 0?N:[])if(a<o&&q.functionCall){if(!q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(q.functionCall.name)){const E=yield Ze(p.get(q.functionCall.name).callTool([q.functionCall]));k.push(...E)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${q.functionCall.name}`)}}}}catch($){v={error:$}}finally{try{!A&&!y&&(S=I.return)&&(yield Ze(S.call(I)))}finally{if(v)throw v.error}}if(k.length>0){s=!0;const $=new Ko;$.candidates=[{content:{role:"user",parts:k}}],yield yield Ze($);const q=[];q.push(...R),q.push({role:"user",parts:k});const E=Un(m.contents).concat(q);m.contents=E}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=ad(this.apiClient,e);return a=De("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=cd(p),y=new Ko;return Object.assign(y,m),y})}else{const c=sd(this.apiClient,e);return a=De("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=ld(p),y=new Ko;return Object.assign(y,m),y})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=ad(this.apiClient,e);return a=De("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(m){return er(this,arguments,function*(){var y,v,S,_;try{for(var w=!0,N=tr(m),A;A=yield Ze(N.next()),y=A.done,!y;w=!0){_=A.value,w=!1;const I=_,D=cd(yield Ze(I.json()));D.sdkHttpResponse={headers:I.headers};const M=new Ko;Object.assign(M,D),yield yield Ze(M)}}catch(I){v={error:I}}finally{try{!w&&!y&&(S=N.return)&&(yield Ze(S.call(N)))}finally{if(v)throw v.error}}})})}else{const c=sd(this.apiClient,e);return a=De("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(m){return er(this,arguments,function*(){var y,v,S,_;try{for(var w=!0,N=tr(m),A;A=yield Ze(N.next()),y=A.done,!y;w=!0){_=A.value,w=!1;const I=_,D=ld(yield Ze(I.json()));D.sdkHttpResponse={headers:I.headers};const M=new Ko;Object.assign(M,D),yield yield Ze(M)}}catch(I){v={error:I}}finally{try{!w&&!y&&(S=N.return)&&(yield Ze(S.call(N)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=wm(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Sm(p),y=new Vu;return Object.assign(y,m),y})}else{const c=bm(this.apiClient,e);return a=De("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Nm(p),y=new Vu;return Object.assign(y,m),y})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Mm(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Fm(p),y=new Gu;return Object.assign(y,m),y})}else{const c=Rm(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Dm(p),y=new Gu;return Object.assign(y,m),y})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=mm(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=vm(l),p=new Ap;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=M1(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=D1(l),p=new Cp;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=g1(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=m1(l),p=new Tp;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=N1(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=S1(l),p=new kp;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Qm(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>Bl(p))}else{const c=Zm(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>Ul(p))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=l1(this.apiClient,e);return a=De("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=u1(p),y=new zu;return Object.assign(y,m),y})}else{const c=a1(this.apiClient,e);return a=De("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=c1(p),y=new zu;return Object.assign(y,m),y})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=L1(this.apiClient,e);return a=De("{model}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>Bl(p))}else{const c=P1(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>Ul(p))}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=fm(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=pm(p),y=new Wu;return Object.assign(y,m),y})}else{const c=dm(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=hm(p),y=new Wu;return Object.assign(y,m),y})}}async countTokens(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=lm(this.apiClient,e);return a=De("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=um(p),y=new $u;return Object.assign(y,m),y})}else{const c=am(this.apiClient,e);return a=De("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=cm(p),y=new $u;return Object.assign(y,m),y})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=em(this.apiClient,e);return o=De("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=tm(l),p=new Ip;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Hm(this.apiClient,e);return a=De("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>{const m=qm(p),y=new ma;return Object.assign(y,m),y})}else{const c=Om(this.apiClient,e);return a=De("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=Bm(p),y=new ma;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k2 extends Rr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=xp(e);return a=De("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s}else{const c=yp(e);return a=De("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=dp(e);return o=De("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I2(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function E2(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>B2(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function P2(t,e,n){const r={},i=u(e,["expireTime"]);n!==void 0&&i!=null&&f(n,["expireTime"],i);const o=u(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&f(n,["newSessionExpireTime"],o);const s=u(e,["uses"]);n!==void 0&&s!=null&&f(n,["uses"],s);const a=u(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],U2(t,a));const l=u(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),r}function L2(t,e){const n={},r=u(e,["config"]);return r!=null&&f(n,["config"],P2(t,r,n)),n}function R2(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function M2(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function D2(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function F2(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function j2(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const p=u(t,["seed"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","seed"],p);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","speechConfig"],dc(m));const y=u(t,["thinkingConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","thinkingConfig"],y);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],v);const S=u(t,["systemInstruction"]);e!==void 0&&S!=null&&f(e,["setup","systemInstruction"],E2(dn(S)));const _=u(t,["tools"]);if(e!==void 0&&_!=null){let T=yo(_);Array.isArray(T)&&(T=T.map(k=>O2(vo(k)))),f(e,["setup","tools"],T)}const w=u(t,["sessionResumption"]);e!==void 0&&w!=null&&f(e,["setup","sessionResumption"],q2(w));const N=u(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&f(e,["setup","inputAudioTranscription"],N);const A=u(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&f(e,["setup","outputAudioTranscription"],A);const I=u(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&f(e,["setup","contextWindowCompression"],D);const M=u(t,["proactivity"]);if(e!==void 0&&M!=null&&f(e,["setup","proactivity"],M),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function U2(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["setup","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&f(n,["config"],j2(i,n)),n}function B2(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],R2(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],M2(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],I2(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const p=u(t,["thought"]);p!=null&&f(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&f(e,["videoMetadata"],y),e}function q2(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function O2(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],D2(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],F2(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H2(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function V2(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=H2(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>s.includes(c)?`generationConfig.${c}`:c));const l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class G2 extends Rr{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=L2(this.apiClient,e);o=De("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const l=V2(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z2(t,e){const n={},r=u(t,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),n}function W2(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const r=u(t,["config"]);return r!=null&&z2(r,e),e}function $2(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function J2(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function Y2(t){const e={},n=u(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const r=u(t,["config"]);return r!=null&&J2(r,e),e}function K2(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X2 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async n=>new ki(Lr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$2(e);return o=De("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=W2(e);i=De("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Y2(e);return o=De("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=K2(l),p=new Ep;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z2 extends Rr{constructor(e,n=new X2(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new ki(Lr.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=H1(e);return o=De("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=z1(e);return o=De("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=G1(e);i=De("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=X1(e);return o=De("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Z1(l),p=new Pp;return Object.assign(p,c),p})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Q1(e);return o=De("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=e2(l),p=new Lp;return Object.assign(p,c),p})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=J1(e);return o=De("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=$1(l),p=new sc;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yf=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return yf=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const Q2=()=>yf();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ol(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Hl=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bn extends Error{}class mn extends Bn{constructor(e,n,r,i){super(`${mn.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Ca({message:r,cause:Hl(n)});const o=n;return e===400?new bf(e,o,r,i):e===401?new wf(e,o,r,i):e===403?new Nf(e,o,r,i):e===404?new Sf(e,o,r,i):e===409?new _f(e,o,r,i):e===422?new Af(e,o,r,i):e===429?new Cf(e,o,r,i):e>=500?new Tf(e,o,r,i):new mn(e,o,r,i)}}class Vl extends mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ca extends mn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class xf extends Ca{constructor({message:e}={}){super({message:e??"Request timed out."})}}class bf extends mn{}class wf extends mn{}class Nf extends mn{}class Sf extends mn{}class _f extends mn{}class Af extends mn{}class Cf extends mn{}class Tf extends mn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e5=/^[a-z][a-z0-9+.-]*:/i,t5=t=>e5.test(t);let Gl=t=>(Gl=Array.isArray,Gl(t));const n5=Gl;let r5=n5;const gd=r5;function i5(t){if(!t)return!0;for(const e in t)return!1;return!0}function o5(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const s5=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Bn(`${t} must be an integer`);if(e<0)throw new Bn(`${t} must be a positive integer`);return e},a5=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const l5=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c5(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const u5=()=>{var t,e,n,r,i;const o=c5();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lo,"X-Stainless-OS":vd(Deno.build.os),"X-Stainless-Arch":md(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lo,"X-Stainless-OS":vd((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":md((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=d5();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function d5(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const md=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",vd=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ta;const f5=()=>ta??(ta=u5());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h5(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function kf(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function p5(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return kf({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function If(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function g5(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m5=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ef=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function bl(t,e,n){return Ef(),new File(t,e??"unknown_file",n)}function v5(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const y5=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pf=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",x5=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Pf(t),b5=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function w5(t,e,n){if(Ef(),t=await t,x5(t))return t instanceof File?t:bl([await t.arrayBuffer()],t.name);if(b5(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),bl(await zl(i),e,n)}const r=await zl(t);if(e||(e=v5(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return bl(r,e,n)}async function zl(t){var e,n,r,i,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(Pf(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(y5(t))try{for(var a=!0,l=tr(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const p=i;s.push(...await zl(p))}}catch(p){n={error:p}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const p=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${p?`; constructor: ${p}`:""}${N5(t)}`)}return s}function N5(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lf{constructor(e){this._client=e}}Lf._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rf(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const yd=Object.freeze(Object.create(null)),S5=(t=Rf)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],s=n.reduce((p,m,y)=>{var v,S,_;/[?#]/.test(m)&&(i=!0);const w=r[y];let N=(i?encodeURIComponent:t)(""+w);return y!==r.length&&(w==null||typeof w=="object"&&w.toString===((_=Object.getPrototypeOf((S=Object.getPrototypeOf((v=w.hasOwnProperty)!==null&&v!==void 0?v:yd))!==null&&S!==void 0?S:yd))===null||_===void 0?void 0:_.toString))&&(N=w+"",o.push({start:p.length+m.length,length:N.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),p+m+(y===r.length?"":N)},""),a=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)o.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(o.sort((p,m)=>p.start-m.start),o.length>0){let p=0;const m=o.reduce((y,v)=>{const S=" ".repeat(v.start-p),_="^".repeat(v.length);return p=v.start+v.length,y+S+_},"");throw new Bn(`Path parameters result in path with invalid segments:
${o.map(y=>y.error).join(`
`)}
${s}
${m}`)}return s}),na=S5(Rf);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mf extends Lf{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=ya(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Bn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Bn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(na`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(na`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(na`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:s=this._client.apiVersion}=o,a=ya(o,["api_version"]);return this._client.get(na`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}Mf._key=Object.freeze(["interactions"]);class Df extends Mf{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _5(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let ra;function hc(t){let e;return(ra??(e=new globalThis.TextEncoder,ra=e.encode.bind(e)))(t)}let ia;function xd(t){let e;return(ia??(e=new globalThis.TextDecoder,ia=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ta{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?hc(e):e;this.buffer=_5([this.buffer,n]);const r=[];let i;for(;(i=A5(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(xd(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=xd(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Ta.NEWLINE_CHARS=new Set([`
`,"\r"]);Ta.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function A5(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function C5(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xa={off:0,error:200,warn:300,info:400,debug:500},bd=(t,e,n)=>{if(t){if(o5(xa,t))return t;gn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(xa))}`)}};function ts(){}function oa(t,e,n){return!e||xa[t]>xa[n]?ts:e[t].bind(e)}const T5={error:ts,warn:ts,info:ts,debug:ts};let wd=new WeakMap;function gn(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return T5;const i=wd.get(n);if(i&&i[0]===r)return i[1];const o={error:oa("error",n,r),warn:oa("warn",n,r),info:oa("info",n,r),debug:oa("debug",n,r)};return wd.set(n,[r,o]),o}const bi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ho{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?gn(r):console;function s(){return er(this,arguments,function*(){var l,c,p,m;if(i)throw new Bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let y=!1;try{try{for(var v=!0,S=tr(k5(e,n)),_;_=yield Ze(S.next()),l=_.done,!l;v=!0){m=_.value,v=!1;const w=m;if(!y)if(w.data.startsWith("[DONE]")){y=!0;continue}else try{yield yield Ze(JSON.parse(w.data))}catch(N){throw o.error("Could not parse message into JSON:",w.data),o.error("From chunk:",w.raw),N}}}catch(w){c={error:w}}finally{try{!v&&!l&&(p=S.return)&&(yield Ze(p.call(S)))}finally{if(c)throw c.error}}y=!0}catch(w){if(Ol(w))return yield Ze(void 0);throw w}finally{y||n.abort()}})}return new ho(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return er(this,arguments,function*(){var l,c,p,m;const y=new Ta,v=If(e);try{for(var S=!0,_=tr(v),w;w=yield Ze(_.next()),l=w.done,!l;S=!0){m=w.value,S=!1;const N=m;for(const A of y.decode(N))yield yield Ze(A)}}catch(N){c={error:N}}finally{try{!S&&!l&&(p=_.return)&&(yield Ze(p.call(_)))}finally{if(c)throw c.error}}for(const N of y.flush())yield yield Ze(N)})}function s(){return er(this,arguments,function*(){var l,c,p,m;if(i)throw new Bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let y=!1;try{try{for(var v=!0,S=tr(o()),_;_=yield Ze(S.next()),l=_.done,!l;v=!0){m=_.value,v=!1;const w=m;y||w&&(yield yield Ze(JSON.parse(w)))}}catch(w){c={error:w}}finally{try{!v&&!l&&(p=S.return)&&(yield Ze(p.call(S)))}finally{if(c)throw c.error}}y=!0}catch(w){if(Ol(w))return yield Ze(void 0);throw w}finally{y||n.abort()}})}return new ho(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new ho(()=>i(e),this.controller,this.client),new ho(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return kf({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const s=hc(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function k5(t,e){return er(this,arguments,function*(){var r,i,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Bn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Bn("Attempted to iterate over a response with no body");const a=new E5,l=new Ta,c=If(t.body);try{for(var p=!0,m=tr(I5(c)),y;y=yield Ze(m.next()),r=y.done,!r;p=!0){s=y.value,p=!1;const v=s;for(const S of l.decode(v)){const _=a.decode(S);_&&(yield yield Ze(_))}}}catch(v){i={error:v}}finally{try{!p&&!r&&(o=m.return)&&(yield Ze(o.call(m)))}finally{if(i)throw i.error}}for(const v of l.flush()){const S=a.decode(v);S&&(yield yield Ze(S))}})}function I5(t){return er(this,arguments,function*(){var n,r,i,o;let s=new Uint8Array;try{for(var a=!0,l=tr(t),c;c=yield Ze(l.next()),n=c.done,!n;a=!0){o=c.value,a=!1;const p=o;if(p==null)continue;const m=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?hc(p):p;let y=new Uint8Array(s.length+m.length);y.set(s),y.set(m,s.length),s=y;let v;for(;(v=C5(s))!==-1;)yield yield Ze(s.slice(0,v)),s=s.slice(v)}}catch(p){r={error:p}}finally{try{!a&&!n&&(i=l.return)&&(yield Ze(i.call(l)))}finally{if(r)throw r.error}}s.length>0&&(yield yield Ze(s))})}class E5{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=P5(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function P5(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function L5(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=await(async()=>{var a;if(e.options.stream)return gn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ho.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return gn(t).debug(`[${r}] response parsed`,bi({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pc extends Promise{constructor(e,n,r=L5){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new pc(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ff=Symbol("brand.privateNullableHeaders");function*R5(t){if(!t)return;if(Ff in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():gd(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=gd(r[1])?r[1]:[r[1]];let s=!1;for(const a of o)a!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,a])}}const Xo=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,s]of R5(r)){const a=o.toLowerCase();i.has(a)||(e.delete(o),i.add(a)),s===null?(e.delete(o),n.add(a)):(e.append(o,s),n.delete(a))}}return{[Ff]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wl=t=>{var e,n,r,i,o,s;if(typeof globalThis.process<"u")return(r=(n=(e=op)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jf;class ka{constructor(e){var n,r,i,o,s,a,l,{baseURL:c=wl("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(n=wl("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,y=ya(e,["baseURL","apiKey","apiVersion"]);const v=Object.assign(Object.assign({apiKey:p,apiVersion:m},y),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=v.baseURL,this.timeout=(r=v.timeout)!==null&&r!==void 0?r:ka.DEFAULT_TIMEOUT,this.logger=(i=v.logger)!==null&&i!==void 0?i:console;const S="warn";this.logLevel=S,this.logLevel=(s=(o=bd(v.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:bd(wl("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:S,this.fetchOptions=v.fetchOptions,this.maxRetries=(a=v.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=v.fetch)!==null&&l!==void 0?l:h5(),this.encoder=m5,this._options=v,this.apiKey=p,this.apiVersion=m,this.clientAdapter=v.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Xo([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Xo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Xo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Bn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${lo}`}defaultIdempotencyKey(){return`stainless-node-retry-${Q2()}`}makeStatusError(e,n,r,i){return mn.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=t5(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return i5(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new pc(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,s;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:p,timeout:m}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:p,options:a});const y="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=r===void 0?"":`, retryOf: ${r}`,S=Date.now();if(gn(this).debug(`[${y}] sending request`,bi({retryOfRequestLogID:r,method:a.method,url:p,options:a,headers:c.headers})),!((o=a.signal)===null||o===void 0)&&o.aborted)throw new Vl;const _=new AbortController,w=await this.fetchWithTimeout(p,c,m,_).catch(Hl),N=Date.now();if(w instanceof globalThis.Error){const I=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Vl;const D=Ol(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(n)return gn(this).info(`[${y}] connection ${D?"timed out":"failed"} - ${I}`),gn(this).debug(`[${y}] connection ${D?"timed out":"failed"} (${I})`,bi({retryOfRequestLogID:r,url:p,durationMs:N-S,message:w.message})),this.retryRequest(a,n,r??y);throw gn(this).info(`[${y}] connection ${D?"timed out":"failed"} - error; no more retries left`),gn(this).debug(`[${y}] connection ${D?"timed out":"failed"} (error; no more retries left)`,bi({retryOfRequestLogID:r,url:p,durationMs:N-S,message:w.message})),D?new xf:new Ca({cause:w})}const A=`[${y}${v}] ${c.method} ${p} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${N-S}ms`;if(!w.ok){const I=await this.shouldRetry(w);if(n&&I){const $=`retrying, ${n} attempts remaining`;return await g5(w.body),gn(this).info(`${A} - ${$}`),gn(this).debug(`[${y}] response error (${$})`,bi({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:N-S})),this.retryRequest(a,n,r??y,w.headers)}const D=I?"error; no more retries left":"error; not retryable";gn(this).info(`${A} - ${D}`);const M=await w.text().catch($=>Hl($).message),T=a5(M),k=T?void 0:M;throw gn(this).debug(`[${y}] response error (${D})`,bi({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,message:k,durationMs:Date.now()-S})),this.makeStatusError(w.status,T,k,w.headers)}return gn(this).info(A),gn(this).debug(`[${y}] response start`,bi({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:N-S})),{response:w,options:a,controller:_,requestLogID:y,retryOfRequestLogID:r,startTime:S}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:s,method:a}=o,l=ya(o,["signal","method"]);s&&s.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),p=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m=Object.assign(Object.assign(Object.assign({signal:i.signal},p?{duplex:"half"}:{}),{method:"GET"}),l);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let s;const a=i==null?void 0:i.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(s=c)}const l=i==null?void 0:i.get("retry-after");if(l&&!s){const c=parseFloat(l);Number.isNaN(c)?s=Date.parse(l)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await l5(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const s=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:p}=s,m=this.buildURL(l,c,p);"timeout"in s&&s5("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:y,body:v}=this.buildBody({options:s}),S=await this.buildHeaders({options:e,method:a,bodyHeaders:y,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:S},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"}),v&&{body:v}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:m,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let a=Xo([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),f5()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Xo([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:p5(e)}:this.encoder({body:e,headers:r})}}ka.DEFAULT_TIMEOUT=6e4;class Zt extends ka{constructor(){super(...arguments),this.interactions=new Df(this)}}jf=Zt;Zt.GeminiNextGenAPIClient=jf;Zt.GeminiNextGenAPIClientError=Bn;Zt.APIError=mn;Zt.APIConnectionError=Ca;Zt.APIConnectionTimeoutError=xf;Zt.APIUserAbortError=Vl;Zt.NotFoundError=Sf;Zt.ConflictError=_f;Zt.RateLimitError=Cf;Zt.BadRequestError=bf;Zt.AuthenticationError=wf;Zt.InternalServerError=Tf;Zt.PermissionDeniedError=Nf;Zt.UnprocessableEntityError=Af;Zt.toFile=w5;Zt.Interactions=Df;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M5(t,e){const n={},r=u(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function D5(t,e){const n={},r=u(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function F5(t,e){const n={},r=u(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function j5(t,e){const n={},r=u(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function U5(t,e,n){const r={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=u(t,["epochCount"]);e!==void 0&&o!=null&&f(e,["tuningTask","hyperparameters","epochCount"],o);const s=u(t,["learningRateMultiplier"]);if(s!=null&&f(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=u(t,["batchSize"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","batchSize"],a);const l=u(t,["learningRate"]);if(e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","learningRate"],l),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function B5(t,e,n){const r={};let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const v=u(t,["validationDataset"]);e!==void 0&&v!=null&&f(e,["supervisedTuningSpec"],Nd(v))}else if(i==="PREFERENCE_TUNING"){const v=u(t,["validationDataset"]);e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec"],Nd(v))}const o=u(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&f(e,["tunedModelDisplayName"],o);const s=u(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const v=u(t,["epochCount"]);e!==void 0&&v!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],v)}else if(a==="PREFERENCE_TUNING"){const v=u(t,["epochCount"]);e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],v)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const v=u(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],v)}else if(l==="PREFERENCE_TUNING"){const v=u(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],v)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const v=u(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],v)}else if(c==="PREFERENCE_TUNING"){const v=u(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],v)}let p=u(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const v=u(t,["adapterSize"]);e!==void 0&&v!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v)}else if(p==="PREFERENCE_TUNING"){const v=u(t,["adapterSize"]);e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],v)}if(u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=u(t,["labels"]);e!==void 0&&m!=null&&f(e,["labels"],m);const y=u(t,["beta"]);return e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],y),r}function q5(t,e){const n={},r=u(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);const i=u(t,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);const o=u(t,["trainingDataset"]);o!=null&&X5(o);const s=u(t,["config"]);return s!=null&&U5(s,n),n}function O5(t,e){const n={},r=u(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);const i=u(t,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);const o=u(t,["trainingDataset"]);o!=null&&Z5(o,n,e);const s=u(t,["config"]);return s!=null&&B5(s,n,e),n}function H5(t,e){const n={},r=u(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function V5(t,e){const n={},r=u(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function G5(t,e,n){const r={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const s=u(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),r}function z5(t,e,n){const r={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const s=u(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),r}function W5(t,e){const n={},r=u(t,["config"]);return r!=null&&G5(r,n),n}function $5(t,e){const n={},r=u(t,["config"]);return r!=null&&z5(r,n),n}function J5(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);const o=u(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Uf(a))),f(n,["tuningJobs"],s)}return n}function Y5(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);const o=u(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Wl(a))),f(n,["tuningJobs"],s)}return n}function K5(t,e){const n={},r=u(t,["name"]);r!=null&&f(n,["model"],r);const i=u(t,["name"]);return i!=null&&f(n,["endpoint"],i),n}function X5(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=u(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(n,["examples","examples"],i)}return n}function Z5(t,e,n){const r={};let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=u(t,["gcsUri"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=u(t,["gcsUri"]);e!==void 0&&s!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Uf(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&f(n,["name"],i);const o=u(t,["state"]);o!=null&&f(n,["state"],Qd(o));const s=u(t,["createTime"]);s!=null&&f(n,["createTime"],s);const a=u(t,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);const l=u(t,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);const p=u(t,["description"]);p!=null&&f(n,["description"],p);const m=u(t,["baseModel"]);m!=null&&f(n,["baseModel"],m);const y=u(t,["_self"]);return y!=null&&f(n,["tunedModel"],K5(y)),n}function Wl(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&f(n,["name"],i);const o=u(t,["state"]);o!=null&&f(n,["state"],Qd(o));const s=u(t,["createTime"]);s!=null&&f(n,["createTime"],s);const a=u(t,["startTime"]);a!=null&&f(n,["startTime"],a);const l=u(t,["endTime"]);l!=null&&f(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);const p=u(t,["error"]);p!=null&&f(n,["error"],p);const m=u(t,["description"]);m!=null&&f(n,["description"],m);const y=u(t,["baseModel"]);y!=null&&f(n,["baseModel"],y);const v=u(t,["tunedModel"]);v!=null&&f(n,["tunedModel"],v);const S=u(t,["preTunedModel"]);S!=null&&f(n,["preTunedModel"],S);const _=u(t,["supervisedTuningSpec"]);_!=null&&f(n,["supervisedTuningSpec"],_);const w=u(t,["preferenceOptimizationSpec"]);w!=null&&f(n,["preferenceOptimizationSpec"],w);const N=u(t,["tuningDataStats"]);N!=null&&f(n,["tuningDataStats"],N);const A=u(t,["encryptionSpec"]);A!=null&&f(n,["encryptionSpec"],A);const I=u(t,["partnerModelTuningSpec"]);I!=null&&f(n,["partnerModelTuningSpec"],I);const D=u(t,["customBaseModel"]);D!=null&&f(n,["customBaseModel"],D);const M=u(t,["experiment"]);M!=null&&f(n,["experiment"],M);const T=u(t,["labels"]);T!=null&&f(n,["labels"],T);const k=u(t,["outputUri"]);k!=null&&f(n,["outputUri"],k);const R=u(t,["pipelineJob"]);R!=null&&f(n,["pipelineJob"],R);const $=u(t,["serviceAccount"]);$!=null&&f(n,["serviceAccount"],$);const q=u(t,["tunedModelDisplayName"]);q!=null&&f(n,["tunedModelDisplayName"],q);const E=u(t,["veoTuningSpec"]);return E!=null&&f(n,["veoTuningSpec"],E),n}function Q5(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&f(n,["name"],i);const o=u(t,["metadata"]);o!=null&&f(n,["metadata"],o);const s=u(t,["done"]);s!=null&&f(n,["done"],s);const a=u(t,["error"]);return a!=null&&f(n,["error"],a),n}function Nd(t,e){const n={},r=u(t,["gcsUri"]);r!=null&&f(n,["validationDatasetUri"],r);const i=u(t,["vertexDatasetResource"]);return i!=null&&f(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ev extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ki(Lr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Ml.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=V5(e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>Wl(p))}else{const c=H5(e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>Uf(p))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=$5(e);return a=De("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Y5(p),y=new Ju;return Object.assign(y,m),y})}else{const c=W5(e);return a=De("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=J5(p),y=new Ju;return Object.assign(y,m),y})}}async cancel(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=D5(e);return a=De("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=j5(p),y=new Yu;return Object.assign(y,m),y})}else{const c=M5(e);return a=De("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=F5(p),y=new Yu;return Object.assign(y,m),y})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=O5(e,e);return o=De("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>Wl(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=q5(e);return o=De("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>Q5(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tv{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const nv=1024*1024*8,rv=3,iv=1e3,ov=2,ba="x-goog-upload-status";async function sv(t,e,n){var r;const i=await Bf(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ba])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function av(t,e,n){var r;const i=await Bf(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ba])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=$d(o),a=new ac;return Object.assign(a,s),a}async function Bf(t,e,n){var r,i;let o=0,s=0,a=new Dl(new Response),l="upload";for(o=t.size;s<o;){const c=Math.min(nv,o-s),p=t.slice(s,s+c);s+c>=o&&(l+=", finalize");let m=0,y=iv;for(;m<rv&&(a=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[ba]));)m++,await cv(y),y=y*ov;if(s+=c,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[ba])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function lv(t){return{size:t.size,type:t.type}}function cv(t){return new Promise(e=>setTimeout(e,t))}class uv{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sv(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await av(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lv(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dv{create(e,n,r){return new fv(e,n,r)}}class fv{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sd="x-goog-api-key";class hv{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Sd)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Sd,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pv="gl-node/";class gv{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Zt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=cp(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new hv(this.apiKey);this.apiClient=new l2({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:pv+"web",uploader:new uv,downloader:new tv}),this.models=new T2(this.apiClient),this.live=new w2(this.apiClient,i,new dv),this.batches=new U0(this.apiClient),this.chats=new xg(this.models,this.apiClient),this.caches=new mg(this.apiClient),this.files=new Ig(this.apiClient),this.operations=new k2(this.apiClient),this.authTokens=new G2(this.apiClient),this.tunings=new ev(this.apiClient),this.fileSearchStores=new Z2(this.apiClient)}}const mv=t=>t.text||"",vv=async(t,e)=>{var r;const n=new gv({apiKey:"PLACEHOLDER_API_KEY"});try{const o=`
            As a business data analyst, review the following sales data for an online business in Cambodia. Provide a concise summary of key insights and actionable recommendations, **written in clear Khmer language**.

            **Filters Applied for this Report:** ${[`Date Range: ${e.datePreset==="all"?"All Time":`${e.startDate} to ${e.endDate}`}`,`Team: ${e.team||"All"}`,`User: ${e.user||"All"}`,`Payment Status: ${e.paymentStatus||"All"}`].join("; ")}

            **Key Metrics Summary:**
            - Total Revenue: $${((r=t.revenue)==null?void 0:r.toFixed(2))||0}
            - Total Orders: ${t.totalOrders||0}

            **Your analysis should be a bulleted list covering:**
            1.  An overall summary of business performance.
            2.  Identify potential areas of concern or opportunities for growth.
            3.  Provide one strategic recommendation to improve sales.
        `,s=await n.models.generateContent({model:"gemini-3-pro-preview",contents:o});return mv(s)||"Could not generate analysis from Gemini."}catch(i){return console.error("Gemini report analysis error:",i),"Could not generate analysis from Gemini."}},yv=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-2",children:[h.jsx("path",{d:"M12 2C11.4696 2 10.9609 2.21071 10.5858 2.58579C10.2107 2.96086 10 3.46957 10 4V4.53C8.7 5.2 7.64 6.27 7 7.53L6.5 7.03C6.12275 6.65624 5.6122 6.44963 5.08003 6.44963C4.54786 6.44963 4.03731 6.65624 3.65997 7.03C3.28263 7.40376 3.07602 7.91431 3.07602 8.44648C3.07602 8.97865 3.28263 9.4892 3.65997 9.86297L4.16 10.3C3.5 11.56 2.82 12.98 2.59 14.5H2C1.46957 14.5 0.960859 14.7107 0.585786 15.0858C0.210714 15.4609 0 15.9696 0 16.5C0 17.0304 0.210714 17.5391 0.585786 17.9142C0.960859 18.2893 1.46957 18.5 2 18.5H2.59C3.12 20.31 4.28 21.88 5.84 22.95C6.34 23.23 6.94 23.09 7.22 22.59C7.5 22.09 7.36 21.49 6.86 21.21C5.7 20.41 4.81 19.24 4.34 17.87L12 14.01L19.66 17.87C19.19 19.24 18.3 20.41 17.14 21.21C16.64 21.5 16.5 22.1 16.78 22.59C17.06 23.09 17.66 23.23 18.16 22.95C19.72 21.88 20.88 20.31 21.41 18.5H22C22.5304 18.5 23.0391 18.2893 23.4142 17.9142C23.7893 17.5391 24 17.0304 24 16.5C24 15.9696 23.7893 15.4609 23.4142 15.0858C23.0391 14.7107 22.5304 14.5 22 14.5H21.41C21.18 12.98 20.5 11.56 19.84 10.3L20.34 9.86297C20.7174 9.4892 20.924 8.97865 20.924 8.44648C20.924 7.91431 20.7174 7.40376 20.34 7.03C19.9627 6.65624 19.4521 6.44963 18.92 6.44963C18.3878 6.44963 17.8773 6.65624 17.5 7.03L17 7.53C16.36 6.27 15.3 5.2 14 4.53V4C14 3.46957 13.7893 2.96086 13.4142 2.58579C13.0391 2.21071 12.5304 2 12 2Z",fill:"url(#paint0_linear_1_2)"}),h.jsx("defs",{children:h.jsxs("linearGradient",{id:"paint0_linear_1_2",x1:"12",y1:"2",x2:"12",y2:"22.95",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#93c5fd"}),h.jsx("stop",{offset:"1",stopColor:"#3b82f6"})]})})]}),xv=({onClick:t,isLoading:e,disabled:n=!1,children:r,className:i=""})=>h.jsxs("button",{type:"button",onClick:t,disabled:e||n,className:`btn btn-secondary flex items-center justify-center !p-2 text-sm transition-all duration-300 ease-in-out border border-blue-500/50 bg-gray-700 hover:bg-blue-800/40 hover:border-blue-500 disabled:cursor-not-allowed disabled:bg-gray-800 disabled:opacity-50 ${i}`,children:[e?h.jsx(Pr,{size:"sm"}):h.jsx(yv,{}),h.jsx("span",{className:"ml-1",children:r})]}),ex=({orders:t,appData:e,dateFilter:n,startDate:r,endDate:i,onNavigate:o,contextFilters:s,onBack:a})=>{var M;const[l,c]=ve.useState(""),[p,m]=ve.useState(!1),[y,v]=ve.useState("All"),S=(T,k)=>{if(o){const R={};s&&(s.team&&(R.team=s.team),s.store&&(R.store=s.store),s.paymentStatus&&(R.paymentStatus=s.paymentStatus),s.user&&(R.user=s.user),s.page&&(R.page=s.page),s.bank&&(R.bank=s.bank),s.product&&(R.product=s.product),s.internalCost&&(R.internalCost=s.internalCost),s.location&&(R.location=s.location)),T==="shippingFilter"&&(R.shipping=k),T==="driverFilter"&&(R.driver=k),T==="fulfillmentStore"&&(R.fulfillmentStore=k),y!=="All"&&T!=="fulfillmentStore"&&(R.fulfillmentStore=y),R.datePreset=n,R.startDate=r,R.endDate=i,o(R)}},_=ve.useMemo(()=>y==="All"?t:t.filter(T=>T["Fulfillment Store"]===y),[t,y]),w=ve.useMemo(()=>{const T=_.reduce((L,B)=>L+(Number(B["Internal Cost"])||0),0),k=_.reduce((L,B)=>L+(Number(B["Shipping Fee (Customer)"])||0),0),R=k-T,$={},q={},E={};return _.forEach(L=>{var H,F;const B=L["Internal Shipping Method"]||"Other";if(!$[B]){const G=(H=e.shippingMethods)==null?void 0:H.find(Z=>Z.MethodName===B);$[B]={name:B,cost:0,orders:0,logo:(G==null?void 0:G.LogosURL)||""}}$[B].cost+=Number(L["Internal Cost"])||0,$[B].orders+=1;const z=L["Internal Shipping Details"]||"N/A";if(z!=="N/A"){if(!q[z]){const G=(F=e.drivers)==null?void 0:F.find(Z=>Z.DriverName===z);q[z]={name:z,cost:0,orders:0,photo:(G==null?void 0:G.ImageURL)||""}}q[z].cost+=Number(L["Internal Cost"])||0,q[z].orders+=1}const ne=L["Fulfillment Store"]||"Unassigned";E[ne]||(E[ne]={name:ne,cost:0,orders:0}),E[ne].cost+=Number(L["Internal Cost"])||0,E[ne].orders+=1}),{totalInternalCost:T,totalCustomerFee:k,netShipping:R,totalOrders:_.length,methods:Object.values($).sort((L,B)=>B.cost-L.cost),drivers:Object.values(q).sort((L,B)=>B.cost-L.cost),stores:Object.values(E).sort((L,B)=>B.cost-L.cost)}},[_,e]),N=ve.useMemo(()=>{const T={};return _.forEach(k=>{const R=(k.Location||"").split(/[,|\-|/]/)[0].trim();!R||R.toUpperCase()==="N/A"||(T[R]||(T[R]={name:R,revenue:0,orders:0}),T[R].revenue+=Number(k["Internal Cost"])||0,T[R].orders+=1)}),Object.values(T).sort((k,R)=>R.revenue-k.revenue)},[_]),A=async()=>{m(!0);try{const T=await vv(w,{reportType:"shipping"});c(T)}catch{c("AI Analysis error.")}finally{m(!1)}},I=()=>{let T="\uFEFF";T+=`SHIPPING COST REPORT SUMMARY
`,T+=`Generated Date,${new Date().toLocaleDateString()}
`,T+=`Period,${n==="custom"?`${r} to ${i}`:n}
`,T+=`Filter Store,${y}

`,T+=`Metric,Value
`,T+=`Total Internal Cost,${w.totalInternalCost.toFixed(2)}
`,T+=`Total Customer Fee,${w.totalCustomerFee.toFixed(2)}
`,T+=`Net Shipping,${w.netShipping.toFixed(2)}
`,T+=`Total Orders,${w.totalOrders}

`,T+=`SHIPPING METHODS (COMPANIES)
`,T+=`Company Name,Total Orders,Total Cost ($)
`,w.methods.forEach(q=>{T+=`"${q.name}",${q.orders},${q.cost.toFixed(2)}
`}),T+=`
`,T+=`DRIVERS
`,T+=`Driver Name,Total Orders,Total Cost ($)
`,w.drivers.forEach(q=>{T+=`"${q.name}",${q.orders},${q.cost.toFixed(2)}
`}),T+=`
`,T+=`FULFILLMENT STORES (STOCK)
`,T+=`Store Name,Total Orders,Total Cost ($)
`,w.stores.forEach(q=>{T+=`"${q.name}",${q.orders},${q.cost.toFixed(2)}
`});const k=new Blob([T],{type:"text/csv;charset=utf-8;"}),R=document.createElement("a"),$=URL.createObjectURL(k);R.setAttribute("href",$),R.setAttribute("download",`Shipping_Report_${y}_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(R),R.click(),document.body.removeChild(R)},D=()=>{const T=window.open("","_blank");if(!T){alert("Please allow popups to view the report.");return}const k=n==="custom"?`${r} to ${i}`:n.toUpperCase(),R=(q,E)=>q.map((L,B)=>`
                <tr class="border-b border-gray-200 hover:bg-gray-50">
                    <td class="py-3 px-4 text-sm text-gray-700 font-bold">${B+1}</td>
                    <td class="py-3 px-4 text-sm font-bold text-gray-800">${L.name}</td>
                    <td class="py-3 px-4 text-center text-sm font-mono font-bold text-blue-600">${L.orders}</td>
                    <td class="py-3 px-4 text-right text-sm font-mono font-bold text-gray-800">$${L.cost.toLocaleString(void 0,{minimumFractionDigits:2})}</td>
                </tr>
            `).join(""),$=`
            <!DOCTYPE html>
            <html lang="km">
            <head>
                <meta charset="UTF-8">
                <title>Shipping Report - ${y}</title>
                <script src="https://cdn.tailwindcss.com"><\/script>
                <link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
                <style>
                    body { font-family: 'Kantumruy Pro', sans-serif; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
                    @media print { 
                        .no-print { display: none !important; } 
                        body { background: white; }
                        .page-break { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body class="bg-gray-100 min-h-screen py-10 print:py-0">
                
                <!-- Action Bar (Hidden on Print) -->
                <div class="no-print fixed top-0 left-0 right-0 bg-gray-900 text-white p-4 shadow-lg flex justify-between items-center z-50">
                    <div class="font-bold text-lg">Shipping Report Preview</div>
                    <div class="flex gap-3">
                        <button onclick="window.close()" class="px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 transition">Close</button>
                        <button onclick="window.print()" class="px-6 py-2 rounded bg-blue-600 hover:bg-blue-500 font-bold transition shadow-lg flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"></path></svg>
                            Print / Save as PDF
                        </button>
                    </div>
                </div>

                <!-- Report Container (A4 Style) -->
                <div class="max-w-[210mm] mx-auto bg-white p-10 shadow-2xl print:shadow-none print:w-full mt-10 print:mt-0 mb-10">
                    
                    <!-- Header -->
                    <div class="flex justify-between items-start border-b-2 border-black pb-6 mb-8">
                        <div>
                            <h1 class="text-3xl font-black text-gray-900 uppercase tracking-tight">ážšáž”áž¶áž™áž€áž¶ážšážŽáŸážŠáž¹áž€áž‡áž‰áŸ’áž‡áž¼áž“</h1>
                            <p class="text-sm text-gray-500 font-bold mt-1 uppercase tracking-widest">Shipping & Fulfillment Cost</p>
                        </div>
                        <div class="text-right">
                            <p class="text-xs font-bold text-gray-500 uppercase">Period</p>
                            <p class="text-sm font-black text-gray-900">${k}</p>
                            <p class="text-xs font-bold text-gray-500 uppercase mt-2">Filter Store</p>
                            <p class="text-sm font-black text-blue-600">${y}</p>
                        </div>
                    </div>

                    <!-- Summary Cards -->
                    <div class="grid grid-cols-3 gap-6 mb-10">
                        <div class="p-4 bg-red-50 rounded-xl border border-red-100 text-center">
                            <p class="text-xs font-black text-red-400 uppercase tracking-widest mb-1">Total Internal Cost</p>
                            <p class="text-2xl font-black text-gray-800">$${w.totalInternalCost.toLocaleString()}</p>
                        </div>
                        <div class="p-4 bg-green-50 rounded-xl border border-green-100 text-center">
                            <p class="text-xs font-black text-green-500 uppercase tracking-widest mb-1">Customer Fees</p>
                            <p class="text-2xl font-black text-gray-800">$${w.totalCustomerFee.toLocaleString()}</p>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-xl border border-gray-200 text-center">
                            <p class="text-xs font-black text-gray-500 uppercase tracking-widest mb-1">Total Orders</p>
                            <p class="text-2xl font-black text-gray-800">${w.totalOrders}</p>
                        </div>
                    </div>

                    <!-- Table 1: Companies -->
                    <div class="mb-10 page-break">
                        <h2 class="text-lg font-black text-blue-800 border-l-4 border-blue-600 pl-3 mb-4 uppercase">1. áž€áŸ’ážšáž»áž˜áž áŸŠáž»áž“ážŠáž¹áž€áž‡áž‰áŸ’áž‡áž¼áž“ (Companies)</h2>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-blue-600 text-white">
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase w-12">#</th>
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase">Company Name</th>
                                    <th class="py-2 px-4 text-center text-xs font-black uppercase w-24">Orders</th>
                                    <th class="py-2 px-4 text-right text-xs font-black uppercase w-32">Cost ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${R(w.methods)}
                            </tbody>
                            <tfoot class="bg-gray-100 font-black">
                                <tr>
                                    <td colspan="2" class="py-3 px-4 text-right uppercase text-xs tracking-widest text-gray-500">Total</td>
                                    <td class="py-3 px-4 text-center text-blue-600">${w.methods.reduce((q,E)=>q+E.orders,0)}</td>
                                    <td class="py-3 px-4 text-right text-gray-900">$${w.methods.reduce((q,E)=>q+E.cost,0).toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <!-- Table 2: Drivers -->
                    <div class="mb-10 page-break">
                        <h2 class="text-lg font-black text-emerald-700 border-l-4 border-emerald-600 pl-3 mb-4 uppercase">2. áž¢áŸ’áž“áž€ážŠáž¹áž€ (Drivers)</h2>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-emerald-600 text-white">
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase w-12">#</th>
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase">Driver Name</th>
                                    <th class="py-2 px-4 text-center text-xs font-black uppercase w-24">Orders</th>
                                    <th class="py-2 px-4 text-right text-xs font-black uppercase w-32">Cost ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${R(w.drivers)}
                            </tbody>
                            <tfoot class="bg-gray-100 font-black">
                                <tr>
                                    <td colspan="2" class="py-3 px-4 text-right uppercase text-xs tracking-widest text-gray-500">Total</td>
                                    <td class="py-3 px-4 text-center text-blue-600">${w.drivers.reduce((q,E)=>q+E.orders,0)}</td>
                                    <td class="py-3 px-4 text-right text-gray-900">$${w.drivers.reduce((q,E)=>q+E.cost,0).toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <!-- Table 3: Stores -->
                    <div class="page-break">
                        <h2 class="text-lg font-black text-orange-700 border-l-4 border-orange-500 pl-3 mb-4 uppercase">3. ážƒáŸ’áž›áž¶áŸ†áž„ (Fulfillment Stores)</h2>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-orange-500 text-white">
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase w-12">#</th>
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase">Store Name</th>
                                    <th class="py-2 px-4 text-center text-xs font-black uppercase w-24">Orders</th>
                                    <th class="py-2 px-4 text-right text-xs font-black uppercase w-32">Cost ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${R(w.stores)}
                            </tbody>
                            <tfoot class="bg-gray-100 font-black">
                                <tr>
                                    <td colspan="2" class="py-3 px-4 text-right uppercase text-xs tracking-widest text-gray-500">Total</td>
                                    <td class="py-3 px-4 text-center text-blue-600">${w.stores.reduce((q,E)=>q+E.orders,0)}</td>
                                    <td class="py-3 px-4 text-right text-gray-900">$${w.stores.reduce((q,E)=>q+E.cost,0).toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <div class="mt-12 pt-6 border-t border-gray-200 text-center text-xs text-gray-400">
                        Generated by O-System on ${new Date().toLocaleString("km-KH")}
                    </div>

                </div>
            </body>
            </html>
        `;T.document.write($),T.document.close()};return h.jsxs("div",{className:"space-y-8 animate-fade-in pb-12",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-gray-900/40 p-4 rounded-3xl border border-white/5",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[a&&h.jsx("button",{onClick:a,className:"bg-gray-800 p-3 rounded-2xl border border-gray-700 hover:bg-gray-700 active:scale-95 transition-all",children:h.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tight",children:"ážšáž”áž¶áž™áž€áž¶ážšážŽáŸážŠáž¹áž€áž‡áž‰áŸ’áž‡áž¼áž“"}),h.jsx("p",{className:"text-xs text-gray-500 font-bold mt-1",children:"Shipping & Fulfillment Cost Analysis"})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center w-full sm:w-auto",children:[h.jsxs("div",{className:"bg-gray-800 p-1 rounded-xl border border-white/10 flex items-center w-full sm:w-auto",children:[h.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase px-3 whitespace-nowrap",children:"View:"}),h.jsxs("select",{value:y,onChange:T=>v(T.target.value),className:"bg-transparent border-none text-xs font-black text-white focus:ring-0 cursor-pointer py-1.5 pr-8 pl-1 w-full",children:[h.jsx("option",{value:"All",children:"All Stores"}),(M=e.stores)==null?void 0:M.map(T=>h.jsx("option",{value:T.StoreName,children:T.StoreName},T.StoreName))]})]}),h.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[h.jsxs("button",{onClick:I,className:"flex-1 sm:flex-none justify-center px-4 py-2.5 bg-emerald-600/10 border border-emerald-500/30 text-emerald-400 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-emerald-600 hover:text-white transition-all flex items-center gap-2 active:scale-95",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Excel"]}),h.jsxs("button",{onClick:D,className:"flex-1 sm:flex-none justify-center px-4 py-2.5 bg-red-600/10 border border-red-500/30 text-red-400 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-red-600 hover:text-white transition-all flex items-center gap-2 active:scale-95",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"View & Print"]})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsx(Qs,{label:"áž…áŸ†ážŽáž¶áž™ážŠáž¹áž€áž‡áž‰áŸ’áž‡áž¼áž“ážŸážšáž»áž”",value:`$${w.totalInternalCost.toLocaleString()}`,icon:"ðŸšš",colorClass:"from-orange-600 to-red-500"}),h.jsx(Qs,{label:"ážáŸ’áž›áŸƒážŠáž¹áž€áž–áž¸áž¢ážáž·ážáž·áž‡áž“",value:`$${w.totalCustomerFee.toLocaleString()}`,icon:"ðŸ’°",colorClass:"from-blue-600 to-indigo-500"}),h.jsx(Qs,{label:"ážáž»áž›áŸ’áž™áž—áž¶áž– (Net)",value:`$${w.netShipping.toLocaleString()}`,icon:"âš–ï¸",colorClass:w.netShipping>=0?"from-emerald-600 to-teal-500":"from-red-600 to-pink-500"}),h.jsx(Qs,{label:"áž…áŸ†áž“áž½áž“áž€áž‰áŸ’áž…áž”áŸ‹ážŸážšáž»áž”",value:w.totalOrders,icon:"ðŸ“¦",colorClass:"from-purple-600 to-blue-500"})]}),h.jsx("div",{className:"w-full",children:h.jsx(ip,{data:N,valueLabel:"Cost"})}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[h.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[h.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5",children:[h.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-2",children:"ážŸáž„áŸ’ážáŸáž”ážáž¶áž˜áž€áŸ’ážšáž»áž˜áž áŸŠáž»áž“ážŠáž¹áž€áž‡áž‰áŸ’áž‡áž¼áž“"}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest border-b border-gray-800",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3",children:"áž€áŸ’ážšáž»áž˜áž áŸŠáž»áž“"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"áž…áŸ†áž“áž½áž“ Orders"}),h.jsx("th",{className:"px-4 py-3 text-right",children:"áž‘áž¹áž€áž”áŸ’ážšáž¶áž€áŸ‹áž”áž„áŸ‹ ($)"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-800",children:w.methods.map((T,k)=>h.jsxs("tr",{className:"hover:bg-white/5",children:[h.jsxs("td",{className:"px-4 py-3 font-bold text-gray-200 flex items-center gap-3",children:[h.jsx("img",{src:at(T.logo),className:"w-8 h-8 rounded-lg object-contain bg-gray-800 p-1 border border-gray-700",alt:""}),T.name]}),h.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-400 cursor-pointer hover:underline hover:text-blue-300 transition-colors",onClick:()=>S("shippingFilter",T.name),children:T.orders}),h.jsxs("td",{className:"px-4 py-3 text-right font-black text-white cursor-pointer hover:underline hover:text-gray-300 transition-colors",onClick:()=>S("shippingFilter",T.name),children:["$",T.cost.toLocaleString(void 0,{minimumFractionDigits:2})]})]},k))}),h.jsx("tfoot",{className:"bg-white/5 border-t-2 border-white/10",children:h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Grand Total"}),h.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-300 text-base",children:w.methods.reduce((T,k)=>T+k.orders,0)}),h.jsxs("td",{className:"px-4 py-3 text-right font-black text-emerald-400 text-base",children:["$",w.methods.reduce((T,k)=>T+k.cost,0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})})]}),h.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5",children:[h.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-2",children:"ážŸáž„áŸ’ážáŸáž”ážáž¶áž˜áž¢áŸ’áž“áž€ážŠáž¹áž€ (Drivers)"}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest border-b border-gray-800",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3",children:"áž¢áŸ’áž“áž€ážŠáž¹áž€"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"áž…áŸ†áž“áž½áž“ Orders"}),h.jsx("th",{className:"px-4 py-3 text-right",children:"áž‘áž¹áž€áž”áŸ’ážšáž¶áž€áŸ‹áž”áž„áŸ‹ ($)"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-800",children:w.drivers.map((T,k)=>h.jsxs("tr",{className:"hover:bg-white/5",children:[h.jsxs("td",{className:"px-4 py-3 font-bold text-gray-200 flex items-center gap-3",children:[h.jsx("img",{src:at(T.photo),className:"w-8 h-8 rounded-full object-cover bg-gray-800 border border-gray-700",alt:""}),T.name]}),h.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-400 cursor-pointer hover:underline hover:text-blue-300 transition-colors",onClick:()=>S("driverFilter",T.name),children:T.orders}),h.jsxs("td",{className:"px-4 py-3 text-right font-black text-white cursor-pointer hover:underline hover:text-gray-300 transition-colors",onClick:()=>S("driverFilter",T.name),children:["$",T.cost.toLocaleString(void 0,{minimumFractionDigits:2})]})]},k))}),h.jsx("tfoot",{className:"bg-white/5 border-t-2 border-white/10",children:h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Grand Total"}),h.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-300 text-base",children:w.drivers.reduce((T,k)=>T+k.orders,0)}),h.jsxs("td",{className:"px-4 py-3 text-right font-black text-emerald-400 text-base",children:["$",w.drivers.reduce((T,k)=>T+k.cost,0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})})]}),h.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5",children:[h.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-2",children:"ážŸáž„áŸ’ážáŸáž”ážáž¶áž˜ Fulfillment Store (Stock)"}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest border-b border-gray-800",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3",children:"ážˆáŸ’áž˜áŸ„áŸ‡ážƒáŸ’áž›áž¶áŸ†áž„ (Store)"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"áž…áŸ†áž“áž½áž“ Orders"}),h.jsx("th",{className:"px-4 py-3 text-right",children:"áž‘áž¹áž€áž”áŸ’ážšáž¶áž€áŸ‹áž”áž„áŸ‹ ($)"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-800",children:w.stores.map((T,k)=>h.jsxs("tr",{className:"hover:bg-white/5",children:[h.jsxs("td",{className:"px-4 py-3 font-bold text-gray-200 flex items-center gap-3",children:[h.jsxs("span",{className:"w-8 h-8 rounded-lg bg-gray-800 text-gray-400 flex items-center justify-center text-[10px] border border-gray-700",children:["#",k+1]}),T.name]}),h.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-400 cursor-pointer hover:underline hover:text-blue-300 transition-colors",onClick:()=>S("fulfillmentStore",T.name),children:T.orders}),h.jsxs("td",{className:"px-4 py-3 text-right font-black text-white cursor-pointer hover:underline hover:text-gray-300 transition-colors",onClick:()=>S("fulfillmentStore",T.name),children:["$",T.cost.toLocaleString(void 0,{minimumFractionDigits:2})]})]},k))}),h.jsx("tfoot",{className:"bg-white/5 border-t-2 border-white/10",children:h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Grand Total"}),h.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-300 text-base",children:w.stores.reduce((T,k)=>T+k.orders,0)}),h.jsxs("td",{className:"px-4 py-3 text-right font-black text-emerald-400 text-base",children:["$",w.stores.reduce((T,k)=>T+k.cost,0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})})]})]}),h.jsx("div",{className:"lg:col-span-4",children:h.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5 h-full flex flex-col shadow-2xl relative overflow-hidden group",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8 relative z-10",children:[h.jsx("div",{children:h.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest",children:"áž€áž¶ážšážœáž·áž—áž¶áž‚ážŠáŸ„áž™ AI"})}),h.jsx(xv,{onClick:A,isLoading:p,children:"Analyze"})]}),h.jsx("div",{className:"flex-grow bg-black/40 rounded-3xl p-6 border border-white/5 overflow-y-auto custom-scrollbar min-h-[300px] relative z-10",children:l?h.jsx("div",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:l}):h.jsx("div",{className:"flex flex-col items-center justify-center h-full opacity-20 text-center",children:h.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:'áž…áž»áž… "Analyze" ážŠáž¾áž˜áŸ’áž”áž¸ážœáž·áž—áž¶áž‚'})})})]})})]})]})},tx=({data:t,title:e})=>{const[n,r]=ve.useState(null);if(!t||t.length===0)return h.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 min-h-[300px]",children:"No data available for chart."});const i=350,o=500,s=50,a=100,l=40,c=10,p=i-l-10,m=o/t.length-c,y=Math.max(...t.map(A=>A.value),0),v=y===0?0:p/y,S=(A,I)=>{const D=A.currentTarget.getBoundingClientRect(),M=`${I.label}: $${I.value.toFixed(2)}`;r({visible:!0,x:D.left+window.scrollX,y:D.top+window.scrollY,content:M})},_=()=>{r(null)},N=(A=>{if(A===0)return[0];const I=5;let D=Math.ceil(A/I);const M=Math.pow(10,Math.floor(Math.log10(D||1))),T=D/M;return M>0&&(T>5?D=10*M:T>2?D=5*M:T>1&&(D=2*M)),D===0?[0,A]:Array.from({length:I+2},(k,R)=>R*D).filter(k=>k<=A*1.1)})(y);return h.jsxs("div",{className:"relative",children:[h.jsx("h3",{className:"text-lg font-bold mb-4 text-white text-center",children:e}),h.jsx("div",{className:"w-full overflow-x-auto",children:h.jsxs("svg",{viewBox:`0 0 ${o+s} ${i+a}`,className:"min-w-[500px]",preserveAspectRatio:"xMinYMin meet",children:[h.jsx("g",{className:"y-axis",children:N.map(A=>h.jsxs("g",{transform:`translate(0, ${i-A*v})`,children:[h.jsx("line",{x1:s-5,y1:"0",x2:o+s,y2:"0",stroke:"#374151"}),h.jsx("text",{x:s-10,y:"3",textAnchor:"end",fill:"#9ca3af",fontSize:"12",children:A>=1e3?`${(A/1e3).toFixed(0)}k`:A})]},A))}),h.jsx("g",{className:"bars",transform:`translate(${s}, 0)`,children:t.map((A,I)=>{const D=A.value*v,M=I*(m+c)+c/2,T=i-D,k=30;return h.jsxs("g",{children:[A.imageUrl&&h.jsx("image",{href:at(A.imageUrl),x:M+m/2-k/2,y:T-k-5,height:k,width:k,clipPath:`circle(${k/2}px at center)`}),h.jsx("rect",{x:M,y:T,width:m,height:D,fill:"#3b82f6",className:"transition-all duration-300 hover:opacity-80",onMouseOver:R=>S(R,A),onMouseOut:_}),h.jsx("text",{x:M+m/2,y:i+15,textAnchor:"end",fill:"#9ca3af",fontSize:"12",className:"select-none",transform:`rotate(-60 ${M+m/2},${i+15})`,children:A.label})]},I)})})]})}),n&&h.jsx("div",{className:"fixed p-2 text-xs text-white bg-gray-900 border border-gray-600 rounded-md shadow-lg z-50",style:{left:n.x,top:n.y-35,pointerEvents:"none",transform:"translateX(-50%)"},children:n.content})]})};function bt(t){"@babel/helpers - typeof";return bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(t)}var un=Uint8Array,In=Uint16Array,gc=Int32Array,Ia=new un([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ea=new un([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$l=new un([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qf=function(t,e){for(var n=new In(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new gc(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},Of=qf(Ia,2),Hf=Of.b,Jl=Of.r;Hf[28]=258,Jl[258]=28;var Vf=qf(Ea,0),bv=Vf.b,_d=Vf.r,Yl=new In(32768);for(var kt=0;kt<32768;++kt){var Yr=(kt&43690)>>1|(kt&21845)<<1;Yr=(Yr&52428)>>2|(Yr&13107)<<2,Yr=(Yr&61680)>>4|(Yr&3855)<<4,Yl[kt]=((Yr&65280)>>8|(Yr&255)<<8)>>1}var vr=(function(t,e,n){for(var r=t.length,i=0,o=new In(e);i<r;++i)t[i]&&++o[t[i]-1];var s=new In(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(n){a=new In(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],p=e-t[i],m=s[t[i]-1]++<<p,y=m|(1<<p)-1;m<=y;++m)a[Yl[m]>>l]=c}else for(a=new In(r),i=0;i<r;++i)t[i]&&(a[i]=Yl[s[t[i]-1]++]>>15-t[i]);return a}),ii=new un(288);for(var kt=0;kt<144;++kt)ii[kt]=8;for(var kt=144;kt<256;++kt)ii[kt]=9;for(var kt=256;kt<280;++kt)ii[kt]=7;for(var kt=280;kt<288;++kt)ii[kt]=8;var as=new un(32);for(var kt=0;kt<32;++kt)as[kt]=5;var wv=vr(ii,9,0),Nv=vr(ii,9,1),Sv=vr(as,5,0),_v=vr(as,5,1),Nl=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Xn=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Sl=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},mc=function(t){return(t+7)/8|0},Gf=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new un(t.subarray(e,n))},Av=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Qn=function(t,e,n){var r=new Error(e||Av[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Qn),!n)throw r;return r},Cv=function(t,e,n,r){var i=t.length,o=0;if(!i||e.f&&!e.l)return n||new un(0);var s=!n,a=s||e.i!=2,l=e.i;s&&(n=new un(i*3));var c=function(Ce){var Ee=n.length;if(Ce>Ee){var Ie=new un(Math.max(Ee*2,Ce));Ie.set(n),n=Ie}},p=e.f||0,m=e.p||0,y=e.b||0,v=e.l,S=e.d,_=e.m,w=e.n,N=i*8;do{if(!v){p=Xn(t,m,1);var A=Xn(t,m+1,3);if(m+=3,A)if(A==1)v=Nv,S=_v,_=9,w=5;else if(A==2){var T=Xn(t,m,31)+257,k=Xn(t,m+10,15)+4,R=T+Xn(t,m+5,31)+1;m+=14;for(var $=new un(R),q=new un(19),E=0;E<k;++E)q[$l[E]]=Xn(t,m+E*3,7);m+=k*3;for(var L=Nl(q),B=(1<<L)-1,z=vr(q,L,1),E=0;E<R;){var ne=z[Xn(t,m,B)];m+=ne&15;var I=ne>>4;if(I<16)$[E++]=I;else{var H=0,F=0;for(I==16?(F=3+Xn(t,m,3),m+=2,H=$[E-1]):I==17?(F=3+Xn(t,m,7),m+=3):I==18&&(F=11+Xn(t,m,127),m+=7);F--;)$[E++]=H}}var G=$.subarray(0,T),Z=$.subarray(T);_=Nl(G),w=Nl(Z),v=vr(G,_,1),S=vr(Z,w,1)}else Qn(1);else{var I=mc(m)+4,D=t[I-4]|t[I-3]<<8,M=I+D;if(M>i){l&&Qn(0);break}a&&c(y+D),n.set(t.subarray(I,M),y),e.b=y+=D,e.p=m=M*8,e.f=p;continue}if(m>N){l&&Qn(0);break}}a&&c(y+131072);for(var J=(1<<_)-1,ie=(1<<w)-1,P=m;;P=m){var H=v[Sl(t,m)&J],O=H>>4;if(m+=H&15,m>N){l&&Qn(0);break}if(H||Qn(2),O<256)n[y++]=O;else if(O==256){P=m,v=null;break}else{var K=O-254;if(O>264){var E=O-257,Q=Ia[E];K=Xn(t,m,(1<<Q)-1)+Hf[E],m+=Q}var te=S[Sl(t,m)&ie],se=te>>4;te||Qn(3),m+=te&15;var Z=bv[se];if(se>3){var Q=Ea[se];Z+=Sl(t,m)&(1<<Q)-1,m+=Q}if(m>N){l&&Qn(0);break}a&&c(y+131072);var de=y+K;if(y<Z){var pe=o-Z,_e=Math.min(Z,de);for(pe+y<0&&Qn(3);y<_e;++y)n[y]=r[pe+y]}for(;y<de;++y)n[y]=n[y-Z]}}e.l=v,e.p=P,e.b=y,e.f=p,v&&(p=1,e.m=_,e.d=S,e.n=w)}while(!p);return y!=n.length&&s?Gf(n,0,y):n.subarray(0,y)},Er=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Zo=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},_l=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,o=n.slice();if(!i)return{t:Wf,l:0};if(i==1){var s=new un(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(M,T){return M.f-T.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,p=1,m=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};p!=i-1;)a=n[n[c].f<n[m].f?c++:m++],l=n[c!=p&&n[c].f<n[m].f?c++:m++],n[p++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=o[0].s,r=1;r<i;++r)o[r].s>y&&(y=o[r].s);var v=new In(y+1),S=Kl(n[p-1],v,0);if(S>e){var r=0,_=0,w=S-e,N=1<<w;for(o.sort(function(T,k){return v[k.s]-v[T.s]||T.f-k.f});r<i;++r){var A=o[r].s;if(v[A]>e)_+=N-(1<<S-v[A]),v[A]=e;else break}for(_>>=w;_>0;){var I=o[r].s;v[I]<e?_-=1<<e-v[I]++-1:++r}for(;r>=0&&_;--r){var D=o[r].s;v[D]==e&&(--v[D],++_)}S=e}return{t:new un(v),l:S}},Kl=function(t,e,n){return t.s==-1?Math.max(Kl(t.l,e,n+1),Kl(t.r,e,n+1)):e[t.s]=n},Ad=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new In(++e),r=0,i=t[0],o=1,s=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Qo=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},zf=function(t,e,n){var r=n.length,i=mc(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var o=0;o<r;++o)t[i+o+4]=n[o];return(i+4+r)*8},Cd=function(t,e,n,r,i,o,s,a,l,c,p){Er(e,p++,n),++i[256];for(var m=_l(i,15),y=m.t,v=m.l,S=_l(o,15),_=S.t,w=S.l,N=Ad(y),A=N.c,I=N.n,D=Ad(_),M=D.c,T=D.n,k=new In(19),R=0;R<A.length;++R)++k[A[R]&31];for(var R=0;R<M.length;++R)++k[M[R]&31];for(var $=_l(k,7),q=$.t,E=$.l,L=19;L>4&&!q[$l[L-1]];--L);var B=c+5<<3,z=Qo(i,ii)+Qo(o,as)+s,ne=Qo(i,y)+Qo(o,_)+s+14+3*L+Qo(k,q)+2*k[16]+3*k[17]+7*k[18];if(l>=0&&B<=z&&B<=ne)return zf(e,p,t.subarray(l,l+c));var H,F,G,Z;if(Er(e,p,1+(ne<z)),p+=2,ne<z){H=vr(y,v,0),F=y,G=vr(_,w,0),Z=_;var J=vr(q,E,0);Er(e,p,I-257),Er(e,p+5,T-1),Er(e,p+10,L-4),p+=14;for(var R=0;R<L;++R)Er(e,p+3*R,q[$l[R]]);p+=3*L;for(var ie=[A,M],P=0;P<2;++P)for(var O=ie[P],R=0;R<O.length;++R){var K=O[R]&31;Er(e,p,J[K]),p+=q[K],K>15&&(Er(e,p,O[R]>>5&127),p+=O[R]>>12)}}else H=wv,F=ii,G=Sv,Z=as;for(var R=0;R<a;++R){var Q=r[R];if(Q>255){var K=Q>>18&31;Zo(e,p,H[K+257]),p+=F[K+257],K>7&&(Er(e,p,Q>>23&31),p+=Ia[K]);var te=Q&31;Zo(e,p,G[te]),p+=Z[te],te>3&&(Zo(e,p,Q>>5&8191),p+=Ea[te])}else Zo(e,p,H[Q]),p+=F[Q]}return Zo(e,p,H[256]),p+F[256]},Tv=new gc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Wf=new un(0),kv=function(t,e,n,r,i,o){var s=o.z||t.length,a=new un(r+s+5*(1+Math.ceil(s/7e3))+i),l=a.subarray(r,a.length-i),c=o.l,p=(o.r||0)&7;if(e){p&&(l[0]=o.r>>3);for(var m=Tv[e-1],y=m>>13,v=m&8191,S=(1<<n)-1,_=o.p||new In(32768),w=o.h||new In(S+1),N=Math.ceil(n/3),A=2*N,I=function(He){return(t[He]^t[He+1]<<N^t[He+2]<<A)&S},D=new gc(25e3),M=new In(288),T=new In(32),k=0,R=0,$=o.i||0,q=0,E=o.w||0,L=0;$+2<s;++$){var B=I($),z=$&32767,ne=w[B];if(_[z]=ne,w[B]=z,E<=$){var H=s-$;if((k>7e3||q>24576)&&(H>423||!c)){p=Cd(t,l,0,D,M,T,R,q,L,$-L,p),q=k=R=0,L=$;for(var F=0;F<286;++F)M[F]=0;for(var F=0;F<30;++F)T[F]=0}var G=2,Z=0,J=v,ie=z-ne&32767;if(H>2&&B==I($-ie))for(var P=Math.min(y,H)-1,O=Math.min(32767,$),K=Math.min(258,H);ie<=O&&--J&&z!=ne;){if(t[$+G]==t[$+G-ie]){for(var Q=0;Q<K&&t[$+Q]==t[$+Q-ie];++Q);if(Q>G){if(G=Q,Z=ie,Q>P)break;for(var te=Math.min(ie,Q-2),se=0,F=0;F<te;++F){var de=$-ie+F&32767,pe=_[de],_e=de-pe&32767;_e>se&&(se=_e,ne=de)}}}z=ne,ne=_[z],ie+=z-ne&32767}if(Z){D[q++]=268435456|Jl[G]<<18|_d[Z];var Ce=Jl[G]&31,Ee=_d[Z]&31;R+=Ia[Ce]+Ea[Ee],++M[257+Ce],++T[Ee],E=$+G,++k}else D[q++]=t[$],++M[t[$]]}}for($=Math.max($,E);$<s;++$)D[q++]=t[$],++M[t[$]];p=Cd(t,l,c,D,M,T,R,q,L,$-L,p),c||(o.r=p&7|l[p/8|0]<<3,p-=7,o.h=w,o.p=_,o.i=$,o.w=E)}else{for(var $=o.w||0;$<s+c;$+=65535){var Ie=$+65535;Ie>=s&&(l[p/8|0]=c,Ie=s),p=zf(l,p+1,t.subarray($,Ie))}o.i=s}return Gf(a,0,r+mc(p)+i)},$f=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,o=n.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=n[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Iv=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new un(o.length+t.length);s.set(o),s.set(t,o.length),t=s,i.w=o.length}return kv(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},Jf=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Ev=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=$f();i.p(e.dictionary),Jf(t,2,i.d())}},Pv=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Qn(6,"invalid zlib data"),(t[1]>>5&1)==1&&Qn(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Xl(t,e){e||(e={});var n=$f();n.p(t);var r=Iv(t,e,e.dictionary?6:2,4);return Ev(r,e),Jf(r,r.length-4,n.d()),r}function Lv(t,e){return Cv(t.subarray(Pv(t),-4),{i:2},e,e)}var Rv=typeof TextDecoder<"u"&&new TextDecoder,Mv=0;try{Rv.decode(Wf,{stream:!0}),Mv=1}catch{}var Je=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Al(){Je.console&&typeof Je.console.log=="function"&&Je.console.log.apply(Je.console,arguments)}var At={log:Al,warn:function(t){Je.console&&(typeof Je.console.warn=="function"?Je.console.warn.apply(Je.console,arguments):Al.call(null,arguments))},error:function(t){Je.console&&(typeof Je.console.error=="function"?Je.console.error.apply(Je.console,arguments):Al(t))}};function Cl(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){wi(r.response,e,n)},r.onerror=function(){At.error("could not download file")},r.send()}function Td(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function sa(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var ns,Zl,wi=Je.saveAs||((typeof window>"u"?"undefined":bt(window))!=="object"||window!==Je?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Je.URL||Je.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Td(i.href)?Cl(t,e,n):sa(i,i.target="_blank"):sa(i)):(i.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){sa(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Td(t))Cl(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){sa(r)}))}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:bt(o)!=="object"&&(At.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Cl(t,e,n);var i=t.type==="application/octet-stream",o=/constructor/i.test(Je.HTMLElement)||Je.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":bt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var p=a.result;p=s?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},a.readAsDataURL(t)}else{var l=Je.URL||Je.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout((function(){l.revokeObjectURL(c)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Yf(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,s=i.exec(t);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Tl(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];n=sn(n,r,i,o,e[0],7,-680876936),o=sn(o,n,r,i,e[1],12,-389564586),i=sn(i,o,n,r,e[2],17,606105819),r=sn(r,i,o,n,e[3],22,-1044525330),n=sn(n,r,i,o,e[4],7,-176418897),o=sn(o,n,r,i,e[5],12,1200080426),i=sn(i,o,n,r,e[6],17,-1473231341),r=sn(r,i,o,n,e[7],22,-45705983),n=sn(n,r,i,o,e[8],7,1770035416),o=sn(o,n,r,i,e[9],12,-1958414417),i=sn(i,o,n,r,e[10],17,-42063),r=sn(r,i,o,n,e[11],22,-1990404162),n=sn(n,r,i,o,e[12],7,1804603682),o=sn(o,n,r,i,e[13],12,-40341101),i=sn(i,o,n,r,e[14],17,-1502002290),n=an(n,r=sn(r,i,o,n,e[15],22,1236535329),i,o,e[1],5,-165796510),o=an(o,n,r,i,e[6],9,-1069501632),i=an(i,o,n,r,e[11],14,643717713),r=an(r,i,o,n,e[0],20,-373897302),n=an(n,r,i,o,e[5],5,-701558691),o=an(o,n,r,i,e[10],9,38016083),i=an(i,o,n,r,e[15],14,-660478335),r=an(r,i,o,n,e[4],20,-405537848),n=an(n,r,i,o,e[9],5,568446438),o=an(o,n,r,i,e[14],9,-1019803690),i=an(i,o,n,r,e[3],14,-187363961),r=an(r,i,o,n,e[8],20,1163531501),n=an(n,r,i,o,e[13],5,-1444681467),o=an(o,n,r,i,e[2],9,-51403784),i=an(i,o,n,r,e[7],14,1735328473),n=ln(n,r=an(r,i,o,n,e[12],20,-1926607734),i,o,e[5],4,-378558),o=ln(o,n,r,i,e[8],11,-2022574463),i=ln(i,o,n,r,e[11],16,1839030562),r=ln(r,i,o,n,e[14],23,-35309556),n=ln(n,r,i,o,e[1],4,-1530992060),o=ln(o,n,r,i,e[4],11,1272893353),i=ln(i,o,n,r,e[7],16,-155497632),r=ln(r,i,o,n,e[10],23,-1094730640),n=ln(n,r,i,o,e[13],4,681279174),o=ln(o,n,r,i,e[0],11,-358537222),i=ln(i,o,n,r,e[3],16,-722521979),r=ln(r,i,o,n,e[6],23,76029189),n=ln(n,r,i,o,e[9],4,-640364487),o=ln(o,n,r,i,e[12],11,-421815835),i=ln(i,o,n,r,e[15],16,530742520),n=cn(n,r=ln(r,i,o,n,e[2],23,-995338651),i,o,e[0],6,-198630844),o=cn(o,n,r,i,e[7],10,1126891415),i=cn(i,o,n,r,e[14],15,-1416354905),r=cn(r,i,o,n,e[5],21,-57434055),n=cn(n,r,i,o,e[12],6,1700485571),o=cn(o,n,r,i,e[3],10,-1894986606),i=cn(i,o,n,r,e[10],15,-1051523),r=cn(r,i,o,n,e[1],21,-2054922799),n=cn(n,r,i,o,e[8],6,1873313359),o=cn(o,n,r,i,e[15],10,-30611744),i=cn(i,o,n,r,e[6],15,-1560198380),r=cn(r,i,o,n,e[13],21,1309151649),n=cn(n,r,i,o,e[4],6,-145523070),o=cn(o,n,r,i,e[11],10,-1120210379),i=cn(i,o,n,r,e[2],15,718787259),r=cn(r,i,o,n,e[9],21,-343485551),t[0]=ti(n,t[0]),t[1]=ti(r,t[1]),t[2]=ti(i,t[2]),t[3]=ti(o,t[3])}function Pa(t,e,n,r,i,o){return e=ti(ti(e,t),ti(r,o)),ti(e<<i|e>>>32-i,n)}function sn(t,e,n,r,i,o,s){return Pa(e&n|~e&r,t,e,i,o,s)}function an(t,e,n,r,i,o,s){return Pa(e&r|n&~r,t,e,i,o,s)}function ln(t,e,n,r,i,o,s){return Pa(e^n^r,t,e,i,o,s)}function cn(t,e,n,r,i,o,s){return Pa(n^(e|~r),t,e,i,o,s)}function Kf(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Tl(r,Dv(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Tl(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,Tl(r,i),r}function Dv(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}ns=Je.atob.bind(Je),Zl=Je.btoa.bind(Je);var kd="0123456789abcdef".split("");function Fv(t){for(var e="",n=0;n<4;n++)e+=kd[t>>8*n+4&15]+kd[t>>8*n&15];return e}function jv(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Ql(t){return Kf(t).map(jv).join("")}var Uv=(function(t){for(var e=0;e<t.length;e++)t[e]=Fv(t[e]);return t.join("")})(Kf("hello"))!="5d41402abc4b2a76b9719d911017c592";function ti(t,e){if(Uv){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ec(t,e){var n,r,i,o;if(t!==n){for(var s=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var p=a[l];c=(c+p+s.charCodeAt(l))%256,a[l]=a[c],a[c]=p}n=t,r=a}else a=r;var m=e.length,y=0,v=0,S="";for(l=0;l<m;l++)v=(v+(p=a[y=(y+1)%256]))%256,a[y]=a[v],a[v]=p,s=a[(a[y]+a[v])%256],S+=String.fromCharCode(e.charCodeAt(l)^s);return S}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Id={print:4,modify:8,copy:16,"annot-forms":32};function co(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach((function(a){if(Id.perm!==void 0)throw new Error("Invalid permission: "+a);i+=Id[a]})),this.padding="(Â¿N^NuÂŠAd\0NVÃ¿Ãº\b..\0Â¶Ãh>Â€/\fÂ©Ã¾dSiz";var o=(e+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=Ql(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=ec(this.encryptionKey,this.padding)}function uo(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function Ed(t){if(bt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[r,!!i],o},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[n]){var s=e[n][o];try{s[0].apply(t,r)}catch(a){Je.console&&At.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function ls(t){if(!(this instanceof ls))return new ls(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Xf(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Qr(t,e,n,r,i){if(!(this instanceof Qr))return new Qr(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Xf.call(this,r,i)}function Ni(t,e,n,r,i){if(!(this instanceof Ni))return new Ni(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Xf.call(this,r,i)}function We(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,l=16,c="S",p=null;bt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,o=t.compress||t.compressPdf||o,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),s=t.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,y={},v={internal:{},__private__:{}};v.__private__.PubSub=Ed;var S="1.3",_=v.__private__.getPdfVersion=function(){return S};v.__private__.setPdfVersion=function(x){S=x};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return w};var N=v.__private__.getPageFormat=function(x){return w[x]};i=i||"a4";var A={COMPAT:"compat",ADVANCED:"advanced"},I=A.COMPAT;function D(){this.saveGraphicsState(),oe(new $e(je,0,0,-je,0,jr()*je).toString()+" cm"),this.setFontSize(this.getFontSize()/je),c="n",I=A.ADVANCED}function M(){this.restoreGraphicsState(),c="S",I=A.COMPAT}var T=v.__private__.combineFontStyleAndFontWeight=function(x,U){if(x=="bold"&&U=="normal"||x=="bold"&&U==400||x=="normal"&&U=="italic"||x=="bold"&&U=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return U&&(x=U==400||U==="normal"?x==="italic"?"italic":"normal":U!=700&&U!=="bold"||x!=="normal"?(U==700?"bold":U)+""+x:"bold"),x};v.advancedAPI=function(x){var U=I===A.COMPAT;return U&&D.call(this),typeof x!="function"||(x(this),U&&M.call(this)),this},v.compatAPI=function(x){var U=I===A.ADVANCED;return U&&M.call(this),typeof x!="function"||(x(this),U&&D.call(this)),this},v.isAdvancedAPI=function(){return I===A.ADVANCED};var k,R=function(x){if(I!==A.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=v.roundToPrecision=v.__private__.roundToPrecision=function(x,U){var re=e||U;if(isNaN(x)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(re).replace(/0+$/,"")};k=v.hpf=v.__private__.hpf=typeof l=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return $(x,l)}:l==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return $(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return $(x,16)};var q=v.f2=v.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return $(x,2)},E=v.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return $(x,3)},L=v.scale=v.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return I===A.COMPAT?x*je:I===A.ADVANCED?x:void 0},B=function(x){return I===A.COMPAT?jr()-x:I===A.ADVANCED?x:void 0},z=function(x){return L(B(x))};v.__private__.setPrecision=v.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(e=parseInt(x,10))};var ne,H="00000000000000000000000000000000",F=v.__private__.getFileId=function(){return H},G=v.__private__.setFileId=function(x){return H=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():H.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),p!==null&&(rn=new co(p.userPermissions,p.userPassword,p.ownerPassword,H)),H};v.setFileId=function(x){return G(x),this},v.getFileId=function(){return F()};var Z=v.__private__.convertDateToPDFDate=function(x){var U=x.getTimezoneOffset(),re=U<0?"+":"-",ae=Math.floor(Math.abs(U/60)),he=Math.abs(U%60),xe=[re,K(ae),"'",K(he),"'"].join("");return["D:",x.getFullYear(),K(x.getMonth()+1),K(x.getDate()),K(x.getHours()),K(x.getMinutes()),K(x.getSeconds()),xe].join("")},J=v.__private__.convertPDFDateToDate=function(x){var U=parseInt(x.substr(2,4),10),re=parseInt(x.substr(6,2),10)-1,ae=parseInt(x.substr(8,2),10),he=parseInt(x.substr(10,2),10),xe=parseInt(x.substr(12,2),10),Te=parseInt(x.substr(14,2),10);return new Date(U,re,ae,he,xe,Te,0)},ie=v.__private__.setCreationDate=function(x){var U;if(x===void 0&&(x=new Date),x instanceof Date)U=Z(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");U=x}return ne=U},P=v.__private__.getCreationDate=function(x){var U=ne;return x==="jsDate"&&(U=J(ne)),U};v.setCreationDate=function(x){return ie(x),this},v.getCreationDate=function(x){return P(x)};var O,K=v.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},Q=v.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},te=0,se=[],de=[],pe=0,_e=[],Ce=[],Ee=!1,Ie=de,He=function(){te=0,pe=0,de=[],se=[],_e=[],br=Ht(),Vn=Ht()};v.__private__.setCustomOutputDestination=function(x){Ee=!0,Ie=x};var be=function(x){Ee||(Ie=x)};v.__private__.resetCustomOutputDestination=function(){Ee=!1,Ie=de};var oe=v.__private__.out=function(x){return x=x.toString(),pe+=x.length+1,Ie.push(x),Ie},Ke=v.__private__.write=function(x){return oe(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Oe=v.__private__.getArrayBuffer=function(x){for(var U=x.length,re=new ArrayBuffer(U),ae=new Uint8Array(re);U--;)ae[U]=x.charCodeAt(U);return re},ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return ke};var Pe=t.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(x){return Pe=I===A.ADVANCED?x/je:x,this};var Fe,Me=v.__private__.getFontSize=v.getFontSize=function(){return I===A.COMPAT?Pe:Pe*je},Ve=t.R2L||!1;v.__private__.setR2L=v.setR2L=function(x){return Ve=x,this},v.__private__.getR2L=v.getR2L=function(){return Ve};var Qe,ot=v.__private__.setZoomMode=function(x){var U=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Fe=x;else if(isNaN(x)){if(U.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Fe=x}else Fe=parseInt(x,10)};v.__private__.getZoomMode=function(){return Fe};var st,dt=v.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');Qe=x};v.__private__.getPageMode=function(){return Qe};var wt=v.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');st=x};v.__private__.getLayoutMode=function(){return st},v.__private__.setDisplayMode=v.setDisplayMode=function(x,U,re){return ot(x),wt(U),dt(re),this};var Ye={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(x){if(Object.keys(Ye).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ye[x]},v.__private__.getDocumentProperties=function(){return Ye},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(x){for(var U in Ye)Ye.hasOwnProperty(U)&&x[U]&&(Ye[U]=x[U]);return this},v.__private__.setDocumentProperty=function(x,U){if(Object.keys(Ye).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ye[x]=U};var lt,je,nn,ht,qn,St={},It={},or=[],mt={},ai={},Pt={},On={},xr=null,Lt=0,et=[],vt=new Ed(v),li=t.hotfixes||[],Qt={},sr={},ar=[],$e=function x(U,re,ae,he,xe,Te){if(!(this instanceof x))return new x(U,re,ae,he,xe,Te);isNaN(U)&&(U=1),isNaN(re)&&(re=0),isNaN(ae)&&(ae=0),isNaN(he)&&(he=1),isNaN(xe)&&(xe=0),isNaN(Te)&&(Te=0),this._matrix=[U,re,ae,he,xe,Te]};Object.defineProperty($e.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty($e.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty($e.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty($e.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty($e.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty($e.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty($e.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty($e.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty($e.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty($e.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty($e.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty($e.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty($e.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty($e.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty($e.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty($e.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),$e.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(x)},$e.prototype.multiply=function(x){var U=x.sx*this.sx+x.shy*this.shx,re=x.sx*this.shy+x.shy*this.sy,ae=x.shx*this.sx+x.sy*this.shx,he=x.shx*this.shy+x.sy*this.sy,xe=x.tx*this.sx+x.ty*this.shx+this.tx,Te=x.tx*this.shy+x.ty*this.sy+this.ty;return new $e(U,re,ae,he,xe,Te)},$e.prototype.decompose=function(){var x=this.sx,U=this.shy,re=this.shx,ae=this.sy,he=this.tx,xe=this.ty,Te=Math.sqrt(x*x+U*U),Ue=(x/=Te)*re+(U/=Te)*ae;re-=x*Ue,ae-=U*Ue;var Ge=Math.sqrt(re*re+ae*ae);return Ue/=Ge,x*(ae/=Ge)<U*(re/=Ge)&&(x=-x,U=-U,Ue=-Ue,Te=-Te),{scale:new $e(Te,0,0,Ge,0,0),translate:new $e(1,0,0,1,he,xe),rotate:new $e(x,U,-U,x,0,0),skew:new $e(1,0,Ue,1,0,0)}},$e.prototype.toString=function(x){return this.join(" ")},$e.prototype.inversed=function(){var x=this.sx,U=this.shy,re=this.shx,ae=this.sy,he=this.tx,xe=this.ty,Te=1/(x*ae-U*re),Ue=ae*Te,Ge=-U*Te,rt=-re*Te,tt=x*Te;return new $e(Ue,Ge,rt,tt,-Ue*he-rt*xe,-Ge*he-tt*xe)},$e.prototype.applyToPoint=function(x){var U=x.x*this.sx+x.y*this.shx+this.tx,re=x.x*this.shy+x.y*this.sy+this.ty;return new Vi(U,re)},$e.prototype.applyToRectangle=function(x){var U=this.applyToPoint(x),re=this.applyToPoint(new Vi(x.x+x.w,x.y+x.h));return new Eo(U.x,U.y,re.x-U.x,re.y-U.y)},$e.prototype.clone=function(){var x=this.sx,U=this.shy,re=this.shx,ae=this.sy,he=this.tx,xe=this.ty;return new $e(x,U,re,ae,he,xe)},v.Matrix=$e;var Hn=v.matrixMult=function(x,U){return U.multiply(x)},lr=new $e(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=lr;var vn=function(x,U){if(!ai[x]){var re=(U instanceof Qr?"Sh":"P")+(Object.keys(mt).length+1).toString(10);U.id=re,ai[x]=re,mt[re]=U,vt.publish("addPattern",U)}};v.ShadingPattern=Qr,v.TilingPattern=Ni,v.addShadingPattern=function(x,U){return R("addShadingPattern()"),vn(x,U),this},v.beginTilingPattern=function(x){R("beginTilingPattern()"),Ts(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},v.endTilingPattern=function(x,U){R("endTilingPattern()"),U.stream=Ce[O].join(`
`),vn(x,U),vt.publish("endTilingPattern",U),ar.pop().restore()};var Wt=v.__private__.newObject=function(){var x=Ht();return _n(x,!0),x},Ht=v.__private__.newObjectDeferred=function(){return te++,se[te]=function(){return pe},te},_n=function(x,U){return U=typeof U=="boolean"&&U,se[x]=pe,U&&oe(x+" 0 obj"),x},Ei=v.__private__.newAdditionalObject=function(){var x={objId:Ht(),content:""};return _e.push(x),x},br=Ht(),Vn=Ht(),Gn=v.__private__.decodeColorString=function(x){var U=x.split(" ");if(U.length!==2||U[1]!=="g"&&U[1]!=="G")U.length===5&&(U[4]==="k"||U[4]==="K")&&(U=[(1-U[0])*(1-U[3]),(1-U[1])*(1-U[3]),(1-U[2])*(1-U[3]),"r"]);else{var re=parseFloat(U[0]);U=[re,re,re,"r"]}for(var ae="#",he=0;he<3;he++)ae+=("0"+Math.floor(255*parseFloat(U[he])).toString(16)).slice(-2);return ae},zn=v.__private__.encodeColorString=function(x){var U;typeof x=="string"&&(x={ch1:x});var re=x.ch1,ae=x.ch2,he=x.ch3,xe=x.ch4,Te=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var Ue=new Yf(re);if(Ue.ok)re=Ue.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var Ge=parseInt(re.substr(1),16);re=Ge>>16&255,ae=Ge>>8&255,he=255&Ge}if(ae===void 0||xe===void 0&&re===ae&&ae===he)if(typeof re=="string")U=re+" "+Te[0];else switch(x.precision){case 2:U=q(re/255)+" "+Te[0];break;case 3:default:U=E(re/255)+" "+Te[0]}else if(xe===void 0||bt(xe)==="object"){if(xe&&!isNaN(xe.a)&&xe.a===0)return U=["1.","1.","1.",Te[1]].join(" ");if(typeof re=="string")U=[re,ae,he,Te[1]].join(" ");else switch(x.precision){case 2:U=[q(re/255),q(ae/255),q(he/255),Te[1]].join(" ");break;default:case 3:U=[E(re/255),E(ae/255),E(he/255),Te[1]].join(" ")}}else if(typeof re=="string")U=[re,ae,he,xe,Te[2]].join(" ");else switch(x.precision){case 2:U=[q(re),q(ae),q(he),q(xe),Te[2]].join(" ");break;case 3:default:U=[E(re),E(ae),E(he),E(xe),Te[2]].join(" ")}return U},cr=v.__private__.getFilters=function(){return s},En=v.__private__.putStream=function(x){var U=(x=x||{}).data||"",re=x.filters||cr(),ae=x.alreadyAppliedFilters||[],he=x.addLength1||!1,xe=U.length,Te=x.objectId,Ue=function(on){return on};if(p!==null&&Te===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Ue=rn.encryptor(Te,0));var Ge={};re===!0&&(re=["FlateEncode"]);var rt=x.additionalKeyValues||[],tt=(Ge=We.API.processDataByFilters!==void 0?We.API.processDataByFilters(U,re):{data:U,reverseChain:[]}).reverseChain+(Array.isArray(ae)?ae.join(" "):ae.toString());if(Ge.data.length!==0&&(rt.push({key:"Length",value:Ge.data.length}),he===!0&&rt.push({key:"Length1",value:xe})),tt.length!=0)if(tt.split("/").length-1==1)rt.push({key:"Filter",value:tt});else{rt.push({key:"Filter",value:"["+tt+"]"});for(var ut=0;ut<rt.length;ut+=1)if(rt[ut].key==="DecodeParms"){for(var Et=[],Rt=0;Rt<Ge.reverseChain.split("/").length-1;Rt+=1)Et.push("null");Et.push(rt[ut].value),rt[ut].value="["+Et.join(" ")+"]"}}oe("<<");for(var Vt=0;Vt<rt.length;Vt++)oe("/"+rt[Vt].key+" "+rt[Vt].value);oe(">>"),Ge.data.length!==0&&(oe("stream"),oe(Ue(Ge.data)),oe("endstream"))},ur=v.__private__.putPage=function(x){var U=x.number,re=x.data,ae=x.objId,he=x.contentsObjId;_n(ae,!0),oe("<</Type /Page"),oe("/Parent "+x.rootDictionaryObjId+" 0 R"),oe("/Resources "+x.resourceDictionaryObjId+" 0 R"),oe("/MediaBox ["+parseFloat(k(x.mediaBox.bottomLeftX))+" "+parseFloat(k(x.mediaBox.bottomLeftY))+" "+k(x.mediaBox.topRightX)+" "+k(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&oe("/CropBox ["+k(x.cropBox.bottomLeftX)+" "+k(x.cropBox.bottomLeftY)+" "+k(x.cropBox.topRightX)+" "+k(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&oe("/BleedBox ["+k(x.bleedBox.bottomLeftX)+" "+k(x.bleedBox.bottomLeftY)+" "+k(x.bleedBox.topRightX)+" "+k(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&oe("/TrimBox ["+k(x.trimBox.bottomLeftX)+" "+k(x.trimBox.bottomLeftY)+" "+k(x.trimBox.topRightX)+" "+k(x.trimBox.topRightY)+"]"),x.artBox!==null&&oe("/ArtBox ["+k(x.artBox.bottomLeftX)+" "+k(x.artBox.bottomLeftY)+" "+k(x.artBox.topRightX)+" "+k(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&oe("/UserUnit "+x.userUnit),vt.publish("putPage",{objId:ae,pageContext:et[U],pageNumber:U,page:re}),oe("/Contents "+he+" 0 R"),oe(">>"),oe("endobj");var xe=re.join(`
`);return I===A.ADVANCED&&(xe+=`
Q`),_n(he,!0),En({data:xe,filters:cr(),objectId:he}),oe("endobj"),ae},ci=v.__private__.putPages=function(){var x,U,re=[];for(x=1;x<=Lt;x++)et[x].objId=Ht(),et[x].contentsObjId=Ht();for(x=1;x<=Lt;x++)re.push(ur({number:x,data:Ce[x],objId:et[x].objId,contentsObjId:et[x].contentsObjId,mediaBox:et[x].mediaBox,cropBox:et[x].cropBox,bleedBox:et[x].bleedBox,trimBox:et[x].trimBox,artBox:et[x].artBox,userUnit:et[x].userUnit,rootDictionaryObjId:br,resourceDictionaryObjId:Vn}));_n(br,!0),oe("<</Type /Pages");var ae="/Kids [";for(U=0;U<Lt;U++)ae+=re[U]+" 0 R ";oe(ae+"]"),oe("/Count "+Lt),oe(">>"),oe("endobj"),vt.publish("postPutPages")},Pi=function(x){vt.publish("putFont",{font:x,out:oe,newObject:Wt,putStream:En}),x.isAlreadyPutted!==!0&&(x.objectNumber=Wt(),oe("<<"),oe("/Type /Font"),oe("/BaseFont /"+uo(x.postScriptName)),oe("/Subtype /Type1"),typeof x.encoding=="string"&&oe("/Encoding /"+x.encoding),oe("/FirstChar 32"),oe("/LastChar 255"),oe(">>"),oe("endobj"))},Li=function(){for(var x in St)St.hasOwnProperty(x)&&(m===!1||m===!0&&y.hasOwnProperty(x))&&Pi(St[x])},Ri=function(x){x.objectNumber=Wt();var U=[];U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Form"}),U.push({key:"BBox",value:"["+[k(x.x),k(x.y),k(x.x+x.width),k(x.y+x.height)].join(" ")+"]"}),U.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var re=x.pages[1].join(`
`);En({data:re,additionalKeyValues:U,objectId:x.objectNumber}),oe("endobj")},Mi=function(){for(var x in Qt)Qt.hasOwnProperty(x)&&Ri(Qt[x])},cs=function(x,U){var re,ae=[],he=1/(U-1);for(re=0;re<1;re+=he)ae.push(re);if(ae.push(1),x[0].offset!=0){var xe={offset:0,color:x[0].color};x.unshift(xe)}if(x[x.length-1].offset!=1){var Te={offset:1,color:x[x.length-1].color};x.push(Te)}for(var Ue="",Ge=0,rt=0;rt<ae.length;rt++){for(re=ae[rt];re>x[Ge+1].offset;)Ge++;var tt=x[Ge].offset,ut=(re-tt)/(x[Ge+1].offset-tt),Et=x[Ge].color,Rt=x[Ge+1].color;Ue+=Q(Math.round((1-ut)*Et[0]+ut*Rt[0]).toString(16))+Q(Math.round((1-ut)*Et[1]+ut*Rt[1]).toString(16))+Q(Math.round((1-ut)*Et[2]+ut*Rt[2]).toString(16))}return Ue.trim()},La=function(x,U){U||(U=21);var re=Wt(),ae=cs(x.colors,U),he=[];he.push({key:"FunctionType",value:"0"}),he.push({key:"Domain",value:"[0.0 1.0]"}),he.push({key:"Size",value:"["+U+"]"}),he.push({key:"BitsPerSample",value:"8"}),he.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),En({data:ae,additionalKeyValues:he,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),oe("endobj"),x.objectNumber=Wt(),oe("<< /ShadingType "+x.type),oe("/ColorSpace /DeviceRGB");var xe="/Coords ["+k(parseFloat(x.coords[0]))+" "+k(parseFloat(x.coords[1]))+" ";x.type===2?xe+=k(parseFloat(x.coords[2]))+" "+k(parseFloat(x.coords[3])):xe+=k(parseFloat(x.coords[2]))+" "+k(parseFloat(x.coords[3]))+" "+k(parseFloat(x.coords[4]))+" "+k(parseFloat(x.coords[5])),oe(xe+="]"),x.matrix&&oe("/Matrix ["+x.matrix.toString()+"]"),oe("/Function "+re+" 0 R"),oe("/Extend [true true]"),oe(">>"),oe("endobj")},Ra=function(x,U){var re=Ht(),ae=Wt();U.push({resourcesOid:re,objectOid:ae}),x.objectNumber=ae;var he=[];he.push({key:"Type",value:"/Pattern"}),he.push({key:"PatternType",value:"1"}),he.push({key:"PaintType",value:"1"}),he.push({key:"TilingType",value:"1"}),he.push({key:"BBox",value:"["+x.boundingBox.map(k).join(" ")+"]"}),he.push({key:"XStep",value:k(x.xStep)}),he.push({key:"YStep",value:k(x.yStep)}),he.push({key:"Resources",value:re+" 0 R"}),x.matrix&&he.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),En({data:x.stream,additionalKeyValues:he,objectId:x.objectNumber}),oe("endobj")},Di=function(x){var U;for(U in mt)mt.hasOwnProperty(U)&&(mt[U]instanceof Qr?La(mt[U]):mt[U]instanceof Ni&&Ra(mt[U],x))},us=function(x){for(var U in x.objectNumber=Wt(),oe("<<"),x)switch(U){case"opacity":oe("/ca "+q(x[U]));break;case"stroke-opacity":oe("/CA "+q(x[U]))}oe(">>"),oe("endobj")},Ma=function(){var x;for(x in Pt)Pt.hasOwnProperty(x)&&us(Pt[x])},bo=function(){for(var x in oe("/XObject <<"),Qt)Qt.hasOwnProperty(x)&&Qt[x].objectNumber>=0&&oe("/"+x+" "+Qt[x].objectNumber+" 0 R");vt.publish("putXobjectDict"),oe(">>")},Da=function(){rn.oid=Wt(),oe("<<"),oe("/Filter /Standard"),oe("/V "+rn.v),oe("/R "+rn.r),oe("/U <"+rn.toHexString(rn.U)+">"),oe("/O <"+rn.toHexString(rn.O)+">"),oe("/P "+rn.P),oe(">>"),oe("endobj")},ds=function(){for(var x in oe("/Font <<"),St)St.hasOwnProperty(x)&&(m===!1||m===!0&&y.hasOwnProperty(x))&&oe("/"+x+" "+St[x].objectNumber+" 0 R");oe(">>")},Fa=function(){if(Object.keys(mt).length>0){for(var x in oe("/Shading <<"),mt)mt.hasOwnProperty(x)&&mt[x]instanceof Qr&&mt[x].objectNumber>=0&&oe("/"+x+" "+mt[x].objectNumber+" 0 R");vt.publish("putShadingPatternDict"),oe(">>")}},Fi=function(x){if(Object.keys(mt).length>0){for(var U in oe("/Pattern <<"),mt)mt.hasOwnProperty(U)&&mt[U]instanceof v.TilingPattern&&mt[U].objectNumber>=0&&mt[U].objectNumber<x&&oe("/"+U+" "+mt[U].objectNumber+" 0 R");vt.publish("putTilingPatternDict"),oe(">>")}},ja=function(){if(Object.keys(Pt).length>0){var x;for(x in oe("/ExtGState <<"),Pt)Pt.hasOwnProperty(x)&&Pt[x].objectNumber>=0&&oe("/"+x+" "+Pt[x].objectNumber+" 0 R");vt.publish("putGStateDict"),oe(">>")}},Ft=function(x){_n(x.resourcesOid,!0),oe("<<"),oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ds(),Fa(),Fi(x.objectOid),ja(),bo(),oe(">>"),oe("endobj")},fs=function(){var x=[];Li(),Ma(),Mi(),Di(x),vt.publish("putResources"),x.forEach(Ft),Ft({resourcesOid:Vn,objectOid:Number.MAX_SAFE_INTEGER}),vt.publish("postPutResources")},hs=function(){vt.publish("putAdditionalObjects");for(var x=0;x<_e.length;x++){var U=_e[x];_n(U.objId,!0),oe(U.content),oe("endobj")}vt.publish("postPutAdditionalObjects")},ps=function(x){It[x.fontName]=It[x.fontName]||{},It[x.fontName][x.fontStyle]=x.id},wo=function(x,U,re,ae,he){var xe={id:"F"+(Object.keys(St).length+1).toString(10),postScriptName:x,fontName:U,fontStyle:re,encoding:ae,isStandardFont:he||!1,metadata:{}};return vt.publish("addFont",{font:xe,instance:this}),St[xe.id]=xe,ps(xe),xe.id},Ua=function(x){for(var U=0,re=ke.length;U<re;U++){var ae=wo.call(this,x[U][0],x[U][1],x[U][2],ke[U][3],!0);m===!1&&(y[ae]=!0);var he=x[U][0].split("-");ps({id:ae,fontName:he[0],fontStyle:he[1]||""})}vt.publish("addFonts",{fonts:St,dictionary:It})},Wn=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(ae){var U=ae.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var re="Error in function "+U.split(`
`)[0].split("<")[0]+": "+ae.message;if(!Je.console)throw new Error(re);Je.console.error(re,ae),Je.alert&&alert(re)}},x.foo.bar=x,x.foo},ji=function(x,U){var re,ae,he,xe,Te,Ue,Ge,rt,tt;if(he=(U=U||{}).sourceEncoding||"Unicode",Te=U.outputEncoding,(U.autoencode||Te)&&St[lt].metadata&&St[lt].metadata[he]&&St[lt].metadata[he].encoding&&(xe=St[lt].metadata[he].encoding,!Te&&St[lt].encoding&&(Te=St[lt].encoding),!Te&&xe.codePages&&(Te=xe.codePages[0]),typeof Te=="string"&&(Te=xe[Te]),Te)){for(Ge=!1,Ue=[],re=0,ae=x.length;re<ae;re++)(rt=Te[x.charCodeAt(re)])?Ue.push(String.fromCharCode(rt)):Ue.push(x[re]),Ue[re].charCodeAt(0)>>8&&(Ge=!0);x=Ue.join("")}for(re=x.length;Ge===void 0&&re!==0;)x.charCodeAt(re-1)>>8&&(Ge=!0),re--;if(!Ge)return x;for(Ue=U.noBOM?[]:[254,255],re=0,ae=x.length;re<ae;re++){if((tt=(rt=x.charCodeAt(re))>>8)>>8)throw new Error("Character at position "+re+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ue.push(tt),Ue.push(rt-(tt<<8))}return String.fromCharCode.apply(void 0,Ue)},yn=v.__private__.pdfEscape=v.pdfEscape=function(x,U){return ji(x,U).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},No=v.__private__.beginPage=function(x){Ce[++Lt]=[],et[Lt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},ms(Lt),be(Ce[O])},gs=function(x,U){var re,ae,he;switch(n=U||n,typeof x=="string"&&(re=N(x.toLowerCase()),Array.isArray(re)&&(ae=re[0],he=re[1])),Array.isArray(x)&&(ae=x[0]*je,he=x[1]*je),isNaN(ae)&&(ae=i[0],he=i[1]),(ae>14400||he>14400)&&(At.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ae=Math.min(14400,ae),he=Math.min(14400,he)),i=[ae,he],n.substr(0,1)){case"l":he>ae&&(i=[he,ae]);break;case"p":ae>he&&(i=[he,ae])}No(i),Ns(Co),oe($n),ko!==0&&oe(ko+" J"),Io!==0&&oe(Io+" j"),vt.publish("addPage",{pageNumber:Lt})},Ba=function(x){x>0&&x<=Lt&&(Ce.splice(x,1),et.splice(x,1),Lt--,O>Lt&&(O=Lt),this.setPage(O))},ms=function(x){x>0&&x<=Lt&&(O=x)},qa=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Ce.length-1},vs=function(x,U,re){var ae,he=void 0;return re=re||{},x=x!==void 0?x:St[lt].fontName,U=U!==void 0?U:St[lt].fontStyle,ae=x.toLowerCase(),It[ae]!==void 0&&It[ae][U]!==void 0?he=It[ae][U]:It[x]!==void 0&&It[x][U]!==void 0?he=It[x][U]:re.disableWarning===!1&&At.warn("Unable to look up font label for font '"+x+"', '"+U+"'. Refer to getFontList() for available fonts."),he||re.noFallback||(he=It.times[U])==null&&(he=It.times.normal),he},Oa=v.__private__.putInfo=function(){var x=Wt(),U=function(ae){return ae};for(var re in p!==null&&(U=rn.encryptor(x,0)),oe("<<"),oe("/Producer ("+yn(U("jsPDF "+We.version))+")"),Ye)Ye.hasOwnProperty(re)&&Ye[re]&&oe("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+yn(U(Ye[re]))+")");oe("/CreationDate ("+yn(U(ne))+")"),oe(">>"),oe("endobj")},So=v.__private__.putCatalog=function(x){var U=(x=x||{}).rootDictionaryObjId||br;switch(Wt(),oe("<<"),oe("/Type /Catalog"),oe("/Pages "+U+" 0 R"),Fe||(Fe="fullwidth"),Fe){case"fullwidth":oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":oe("/OpenAction [3 0 R /Fit]");break;case"original":oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+Fe;re.substr(re.length-1)==="%"&&(Fe=parseInt(Fe)/100),typeof Fe=="number"&&oe("/OpenAction [3 0 R /XYZ null null "+q(Fe)+"]")}switch(st||(st="continuous"),st){case"continuous":oe("/PageLayout /OneColumn");break;case"single":oe("/PageLayout /SinglePage");break;case"two":case"twoleft":oe("/PageLayout /TwoColumnLeft");break;case"tworight":oe("/PageLayout /TwoColumnRight")}Qe&&oe("/PageMode /"+Qe),vt.publish("putCatalog"),oe(">>"),oe("endobj")},Ha=v.__private__.putTrailer=function(){oe("trailer"),oe("<<"),oe("/Size "+(te+1)),oe("/Root "+te+" 0 R"),oe("/Info "+(te-1)+" 0 R"),p!==null&&oe("/Encrypt "+rn.oid+" 0 R"),oe("/ID [ <"+H+"> <"+H+"> ]"),oe(">>")},Va=v.__private__.putHeader=function(){oe("%PDF-"+S),oe("%ÂºÃŸÂ¬Ã ")},Ga=v.__private__.putXRef=function(){var x="0000000000";oe("xref"),oe("0 "+(te+1)),oe("0000000000 65535 f ");for(var U=1;U<=te;U++)typeof se[U]=="function"?oe((x+se[U]()).slice(-10)+" 00000 n "):se[U]!==void 0?oe((x+se[U]).slice(-10)+" 00000 n "):oe("0000000000 00000 n ")},wr=v.__private__.buildDocument=function(){He(),be(de),vt.publish("buildDocument"),Va(),ci(),hs(),fs(),p!==null&&Da(),Oa(),So();var x=pe;return Ga(),Ha(),oe("startxref"),oe(""+x),oe("%%EOF"),be(Ce[O]),de.join(`
`)},Ui=v.__private__.getBlob=function(x){return new Blob([Oe(x)],{type:"application/pdf"})},Bi=v.output=v.__private__.output=Wn((function(x,U){switch(typeof(U=U||{})=="string"?U={filename:U}:U.filename=U.filename||"generated.pdf",x){case void 0:return wr();case"save":v.save(U.filename);break;case"arraybuffer":return Oe(wr());case"blob":return Ui(wr());case"bloburi":case"bloburl":if(Je.URL!==void 0&&typeof Je.URL.createObjectURL=="function")return Je.URL&&Je.URL.createObjectURL(Ui(wr()))||void 0;At.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",ae=wr();try{re=Zl(ae)}catch{re=Zl(unescape(encodeURIComponent(ae)))}return"data:application/pdf;filename="+U.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Je)==="[object Window]"){var he="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';U.pdfObjectUrl&&(he=U.pdfObjectUrl,xe="");var Te='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+he+'"'+xe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(U)+");<\/script></body></html>",Ue=Je.open();return Ue!==null&&Ue.document.write(Te),Ue}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Je)==="[object Window]"){var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(U.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+U.filename+'" width="500px" height="400px" /></body></html>',rt=Je.open();if(rt!==null){rt.document.write(Ge);var tt=this;rt.document.documentElement.querySelector("#pdfViewer").onload=function(){rt.document.title=U.filename,rt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(tt.output("bloburl"))}}return rt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Je)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",U)+'"></iframe></body></html>',Et=Je.open();if(Et!==null&&(Et.document.write(ut),Et.document.title=U.filename),Et||typeof safari>"u")return Et;break;case"datauri":case"dataurl":return Je.document.location.href=this.output("datauristring",U);default:return null}})),ys=function(x){return Array.isArray(li)===!0&&li.indexOf(x)>-1};switch(r){case"pt":je=1;break;case"mm":je=72/25.4;break;case"cm":je=72/2.54;break;case"in":je=72;break;case"px":je=ys("px_scaling")==1?.75:96/72;break;case"pc":case"em":je=12;break;case"ex":je=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);je=r}var rn=null;ie(),G();var za=function(x){return p!==null?rn.encryptor(x,0):function(U){return U}},xs=v.__private__.getPageInfo=v.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:et[x].objId,pageNumber:x,pageContext:et[x]}},Xe=v.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var U in et)if(et[U].objId===x)break;return xs(U)},Wa=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:et[O].objId,pageNumber:O,pageContext:et[O]}};v.addPage=function(){return gs.apply(this,arguments),this},v.setPage=function(){return ms.apply(this,arguments),be.call(this,Ce[O]),this},v.insertPage=function(x){return this.addPage(),this.movePage(O,x),this},v.movePage=function(x,U){var re,ae;if(x>U){re=Ce[x],ae=et[x];for(var he=x;he>U;he--)Ce[he]=Ce[he-1],et[he]=et[he-1];Ce[U]=re,et[U]=ae,this.setPage(U)}else if(x<U){re=Ce[x],ae=et[x];for(var xe=x;xe<U;xe++)Ce[xe]=Ce[xe+1],et[xe]=et[xe+1];Ce[U]=re,et[U]=ae,this.setPage(U)}return this},v.deletePage=function(){return Ba.apply(this,arguments),this},v.__private__.text=v.text=function(x,U,re,ae,he){var xe,Te,Ue,Ge,rt,tt,ut,Et,Rt,Vt=(ae=ae||{}).scope||this;if(typeof x=="number"&&typeof U=="number"&&(typeof re=="string"||Array.isArray(re))){var on=re;re=U,U=x,x=on}if(arguments[3]instanceof $e?(R("The transform parameter of text() with a Matrix value"),Rt=he):(Ue=arguments[4],Ge=arguments[5],bt(ut=arguments[3])==="object"&&ut!==null||(typeof Ue=="string"&&(Ge=Ue,Ue=null),typeof ut=="string"&&(Ge=ut,ut=null),typeof ut=="number"&&(Ue=ut,ut=null),ae={flags:ut,angle:Ue,align:Ge})),isNaN(U)||isNaN(re)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Vt;var Yt="",Jn=!1,An=typeof ae.lineHeightFactor=="number"?ae.lineHeightFactor:di,hr=Vt.internal.scaleFactor;function ks(Ct){return Ct=Ct.split("	").join(Array(ae.TabLen||9).join(" ")),yn(Ct,ut)}function Mo(Ct){for(var Tt,Ut=Ct.concat(),$t=[],Cr=Ut.length;Cr--;)typeof(Tt=Ut.shift())=="string"?$t.push(Tt):Array.isArray(Ct)&&(Tt.length===1||Tt[1]===void 0&&Tt[2]===void 0)?$t.push(Tt[0]):$t.push([Tt[0],Tt[1],Tt[2]]);return $t}function Do(Ct,Tt){var Ut;if(typeof Ct=="string")Ut=Tt(Ct)[0];else if(Array.isArray(Ct)){for(var $t,Cr,Vo=Ct.concat(),eo=[],Rs=Vo.length;Rs--;)typeof($t=Vo.shift())=="string"?eo.push(Tt($t)[0]):Array.isArray($t)&&typeof $t[0]=="string"&&(Cr=Tt($t[0],$t[1],$t[2]),eo.push([Cr[0],Cr[1],Cr[2]]));Ut=eo}return Ut}var zi=!1,Fo=!0;if(typeof x=="string")zi=!0;else if(Array.isArray(x)){var jo=x.concat();Te=[];for(var Wi,en=jo.length;en--;)(typeof(Wi=jo.shift())!="string"||Array.isArray(Wi)&&typeof Wi[0]!="string")&&(Fo=!1);zi=Fo}if(zi===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var $i=Pe/Vt.internal.scaleFactor,Ji=$i*(An-1);switch(ae.baseline){case"bottom":re-=Ji;break;case"top":re+=$i-Ji;break;case"hanging":re+=$i-2*Ji;break;case"middle":re+=$i/2-Ji}if((tt=ae.maxWidth||0)>0&&(typeof x=="string"?x=Vt.splitTextToSize(x,tt):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce((function(Ct,Tt){return Ct.concat(Vt.splitTextToSize(Tt,tt))}),[]))),xe={text:x,x:U,y:re,options:ae,mutex:{pdfEscape:yn,activeFontKey:lt,fonts:St,activeFontSize:Pe}},vt.publish("preProcessText",xe),x=xe.text,Ue=(ae=xe.options).angle,!(Rt instanceof $e)&&Ue&&typeof Ue=="number"){Ue*=Math.PI/180,ae.rotationDirection===0&&(Ue=-Ue),I===A.ADVANCED&&(Ue=-Ue);var Yi=Math.cos(Ue),Uo=Math.sin(Ue);Rt=new $e(Yi,Uo,-Uo,Yi,0,0)}else Ue&&Ue instanceof $e&&(Rt=Ue);I!==A.ADVANCED||Rt||(Rt=lr),(rt=ae.charSpace||Hi)!==void 0&&(Yt+=k(L(rt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Et=ae.horizontalScale)!==void 0&&(Yt+=k(100*Et)+` Tz
`),ae.lang;var xn=-1,nl=ae.renderingMode!==void 0?ae.renderingMode:ae.stroke,Bo=Vt.internal.getCurrentPageInfo().pageContext;switch(nl){case 0:case!1:case"fill":xn=0;break;case 1:case!0:case"stroke":xn=1;break;case 2:case"fillThenStroke":xn=2;break;case 3:case"invisible":xn=3;break;case 4:case"fillAndAddForClipping":xn=4;break;case 5:case"strokeAndAddPathForClipping":xn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":xn=6;break;case 7:case"addToPathForClipping":xn=7}var Is=Bo.usedRenderingMode!==void 0?Bo.usedRenderingMode:-1;xn!==-1?Yt+=xn+` Tr
`:Is!==-1&&(Yt+=`0 Tr
`),xn!==-1&&(Bo.usedRenderingMode=xn),Ge=ae.align||"left";var Pn,Ki=Pe*An,Es=Vt.internal.pageSize.getWidth(),Ps=St[lt];rt=ae.charSpace||Hi,tt=ae.maxWidth||0,ut=Object.assign({autoencode:!0,noBOM:!0},ae.flags);var Ur=[],pi=function(Ct){return Vt.getStringUnitWidth(Ct,{font:Ps,charSpace:rt,fontSize:Pe,doKerning:!1})*Pe/hr};if(Object.prototype.toString.call(x)==="[object Array]"){var bn;Te=Mo(x),Ge!=="left"&&(Pn=Te.map(pi));var fn,Br=0;if(Ge==="right"){U-=Pn[0],x=[],en=Te.length;for(var Sr=0;Sr<en;Sr++)Sr===0?(fn=fr(U),bn=Nr(re)):(fn=L(Br-Pn[Sr]),bn=-Ki),x.push([Te[Sr],fn,bn]),Br=Pn[Sr]}else if(Ge==="center"){U-=Pn[0]/2,x=[],en=Te.length;for(var _r=0;_r<en;_r++)_r===0?(fn=fr(U),bn=Nr(re)):(fn=L((Br-Pn[_r])/2),bn=-Ki),x.push([Te[_r],fn,bn]),Br=Pn[_r]}else if(Ge==="left"){x=[],en=Te.length;for(var Xi=0;Xi<en;Xi++)x.push(Te[Xi])}else if(Ge==="justify"&&Ps.encoding==="Identity-H"){x=[],en=Te.length,tt=tt!==0?tt:Es;for(var Ar=0,jt=0;jt<en;jt++)if(bn=jt===0?Nr(re):-Ki,fn=jt===0?fr(U):Ar,jt<en-1){var qo=L((tt-Pn[jt])/(Te[jt].split(" ").length-1)),hn=Te[jt].split(" ");x.push([hn[0]+" ",fn,bn]),Ar=0;for(var Ln=1;Ln<hn.length;Ln++){var Zi=(pi(hn[Ln-1]+" "+hn[Ln])-pi(hn[Ln]))*hr+qo;Ln==hn.length-1?x.push([hn[Ln],Zi,0]):x.push([hn[Ln]+" ",Zi,0]),Ar-=Zi}}else x.push([Te[jt],fn,bn]);x.push(["",Ar,0])}else{if(Ge!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],en=Te.length,tt=tt!==0?tt:Es,jt=0;jt<en;jt++)bn=jt===0?Nr(re):-Ki,fn=jt===0?fr(U):0,jt<en-1?Ur.push(k(L((tt-Pn[jt])/(Te[jt].split(" ").length-1)))):Ur.push(0),x.push([Te[jt],fn,bn])}}var Ls=typeof ae.R2L=="boolean"?ae.R2L:Ve;Ls===!0&&(x=Do(x,(function(Ct,Tt,Ut){return[Ct.split("").reverse().join(""),Tt,Ut]}))),xe={text:x,x:U,y:re,options:ae,mutex:{pdfEscape:yn,activeFontKey:lt,fonts:St,activeFontSize:Pe}},vt.publish("postProcessText",xe),x=xe.text,Jn=xe.mutex.isHex||!1;var Oo=St[lt].encoding;Oo!=="WinAnsiEncoding"&&Oo!=="StandardEncoding"||(x=Do(x,(function(Ct,Tt,Ut){return[ks(Ct),Tt,Ut]}))),Te=Mo(x),x=[];for(var gi,mi,qr,vi=0,Qi=1,yi=Array.isArray(Te[0])?Qi:vi,Or="",Ho=function(Ct,Tt,Ut){var $t="";return Ut instanceof $e?(Ut=typeof ae.angle=="number"?Hn(Ut,new $e(1,0,0,1,Ct,Tt)):Hn(new $e(1,0,0,1,Ct,Tt),Ut),I===A.ADVANCED&&(Ut=Hn(new $e(1,0,0,-1,0,0),Ut)),$t=Ut.join(" ")+` Tm
`):$t=k(Ct)+" "+k(Tt)+` Td
`,$t},Rn=0;Rn<Te.length;Rn++){switch(Or="",yi){case Qi:qr=(Jn?"<":"(")+Te[Rn][0]+(Jn?">":")"),gi=parseFloat(Te[Rn][1]),mi=parseFloat(Te[Rn][2]);break;case vi:qr=(Jn?"<":"(")+Te[Rn]+(Jn?">":")"),gi=fr(U),mi=Nr(re)}Ur!==void 0&&Ur[Rn]!==void 0&&(Or=Ur[Rn]+` Tw
`),Rn===0?x.push(Or+Ho(gi,mi,Rt)+qr):yi===vi?x.push(Or+qr):yi===Qi&&x.push(Or+Ho(gi,mi,Rt)+qr)}x=yi===vi?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Mn=`BT
/`;return Mn+=lt+" "+Pe+` Tf
`,Mn+=k(Pe*An)+` TL
`,Mn+=fi+`
`,Mn+=Yt,Mn+=x,oe(Mn+="ET"),y[lt]=!0,Vt};var $a=v.__private__.clip=v.clip=function(x){return oe(x==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return $a("evenodd")},v.__private__.discardPath=v.discardPath=function(){return oe("n"),this};var dr=v.__private__.isValidStyle=function(x){var U=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(U=!0),U};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(x){return dr(x)&&(c=x),this};var bs=v.__private__.getStyle=v.getStyle=function(x){var U=c;switch(x){case"D":case"S":U="S";break;case"F":U="f";break;case"FD":case"DF":U="B";break;case"f":case"f*":case"B":case"B*":U=x}return U},ws=v.close=function(){return oe("h"),this};v.stroke=function(){return oe("S"),this},v.fill=function(x){return qi("f",x),this},v.fillEvenOdd=function(x){return qi("f*",x),this},v.fillStroke=function(x){return qi("B",x),this},v.fillStrokeEvenOdd=function(x){return qi("B*",x),this};var qi=function(x,U){bt(U)==="object"?Ya(U,x):oe(x)},_o=function(x){x===null||I===A.ADVANCED&&x===void 0||(x=bs(x),oe(x))};function Ja(x,U,re,ae,he){var xe=new Ni(U||this.boundingBox,re||this.xStep,ae||this.yStep,this.gState,he||this.matrix);xe.stream=this.stream;var Te=x+"$$"+this.cloneIndex+++"$$";return vn(Te,xe),xe}var Ya=function(x,U){var re=ai[x.key],ae=mt[re];if(ae instanceof Qr)oe("q"),oe(Ka(U)),ae.gState&&v.setGState(ae.gState),oe(x.matrix.toString()+" cm"),oe("/"+re+" sh"),oe("Q");else if(ae instanceof Ni){var he=new $e(1,0,0,-1,0,jr());x.matrix&&(he=he.multiply(x.matrix||lr),re=Ja.call(ae,x.key,x.boundingBox,x.xStep,x.yStep,he).id),oe("q"),oe("/Pattern cs"),oe("/"+re+" scn"),ae.gState&&v.setGState(ae.gState),oe(U),oe("Q")}},Ka=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ao=v.moveTo=function(x,U){return oe(k(L(x))+" "+k(z(U))+" m"),this},ui=v.lineTo=function(x,U){return oe(k(L(x))+" "+k(z(U))+" l"),this},Dr=v.curveTo=function(x,U,re,ae,he,xe){return oe([k(L(x)),k(z(U)),k(L(re)),k(z(ae)),k(L(he)),k(z(xe)),"c"].join(" ")),this};v.__private__.line=v.line=function(x,U,re,ae,he){if(isNaN(x)||isNaN(U)||isNaN(re)||isNaN(ae)||!dr(he))throw new Error("Invalid arguments passed to jsPDF.line");return I===A.COMPAT?this.lines([[re-x,ae-U]],x,U,[1,1],he||"S"):this.lines([[re-x,ae-U]],x,U,[1,1]).stroke()},v.__private__.lines=v.lines=function(x,U,re,ae,he,xe){var Te,Ue,Ge,rt,tt,ut,Et,Rt,Vt,on,Yt,Jn;if(typeof x=="number"&&(Jn=re,re=U,U=x,x=Jn),ae=ae||[1,1],xe=xe||!1,isNaN(U)||isNaN(re)||!Array.isArray(x)||!Array.isArray(ae)||!dr(he)||typeof xe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ao(U,re),Te=ae[0],Ue=ae[1],rt=x.length,on=U,Yt=re,Ge=0;Ge<rt;Ge++)(tt=x[Ge]).length===2?(on=tt[0]*Te+on,Yt=tt[1]*Ue+Yt,ui(on,Yt)):(ut=tt[0]*Te+on,Et=tt[1]*Ue+Yt,Rt=tt[2]*Te+on,Vt=tt[3]*Ue+Yt,on=tt[4]*Te+on,Yt=tt[5]*Ue+Yt,Dr(ut,Et,Rt,Vt,on,Yt));return xe&&ws(),_o(he),this},v.path=function(x){for(var U=0;U<x.length;U++){var re=x[U],ae=re.c;switch(re.op){case"m":Ao(ae[0],ae[1]);break;case"l":ui(ae[0],ae[1]);break;case"c":Dr.apply(this,ae);break;case"h":ws()}}return this},v.__private__.rect=v.rect=function(x,U,re,ae,he){if(isNaN(x)||isNaN(U)||isNaN(re)||isNaN(ae)||!dr(he))throw new Error("Invalid arguments passed to jsPDF.rect");return I===A.COMPAT&&(ae=-ae),oe([k(L(x)),k(z(U)),k(L(re)),k(L(ae)),"re"].join(" ")),_o(he),this},v.__private__.triangle=v.triangle=function(x,U,re,ae,he,xe,Te){if(isNaN(x)||isNaN(U)||isNaN(re)||isNaN(ae)||isNaN(he)||isNaN(xe)||!dr(Te))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-x,ae-U],[he-re,xe-ae],[x-he,U-xe]],x,U,[1,1],Te,!0),this},v.__private__.roundedRect=v.roundedRect=function(x,U,re,ae,he,xe,Te){if(isNaN(x)||isNaN(U)||isNaN(re)||isNaN(ae)||isNaN(he)||isNaN(xe)||!dr(Te))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ue=4/3*(Math.SQRT2-1);return he=Math.min(he,.5*re),xe=Math.min(xe,.5*ae),this.lines([[re-2*he,0],[he*Ue,0,he,xe-xe*Ue,he,xe],[0,ae-2*xe],[0,xe*Ue,-he*Ue,xe,-he,xe],[2*he-re,0],[-he*Ue,0,-he,-xe*Ue,-he,-xe],[0,2*xe-ae],[0,-xe*Ue,he*Ue,-xe,he,-xe]],x+he,U,[1,1],Te,!0),this},v.__private__.ellipse=v.ellipse=function(x,U,re,ae,he){if(isNaN(x)||isNaN(U)||isNaN(re)||isNaN(ae)||!dr(he))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xe=4/3*(Math.SQRT2-1)*re,Te=4/3*(Math.SQRT2-1)*ae;return Ao(x+re,U),Dr(x+re,U-Te,x+xe,U-ae,x,U-ae),Dr(x-xe,U-ae,x-re,U-Te,x-re,U),Dr(x-re,U+Te,x-xe,U+ae,x,U+ae),Dr(x+xe,U+ae,x+re,U+Te,x+re,U),_o(he),this},v.__private__.circle=v.circle=function(x,U,re,ae){if(isNaN(x)||isNaN(U)||isNaN(re)||!dr(ae))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,U,re,re,ae)},v.setFont=function(x,U,re){return re&&(U=T(U,re)),lt=vs(x,U,{disableWarning:!1}),this};var Xa=v.__private__.getFont=v.getFont=function(){return St[vs.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var x,U,re={};for(x in It)if(It.hasOwnProperty(x))for(U in re[x]=[],It[x])It[x].hasOwnProperty(U)&&re[x].push(U);return re},v.addFont=function(x,U,re,ae,he){var xe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xe.indexOf(arguments[3])!==-1?he=arguments[3]:arguments[3]&&xe.indexOf(arguments[3])==-1&&(re=T(re,ae)),he=he||"Identity-H",wo.call(this,x,U,re,he)};var di,Co=t.lineWidth||.200025,Oi=v.__private__.getLineWidth=v.getLineWidth=function(){return Co},Ns=v.__private__.setLineWidth=v.setLineWidth=function(x){return Co=x,oe(k(L(x))+" w"),this};v.__private__.setLineDash=We.API.setLineDash=We.API.setLineDashPattern=function(x,U){if(x=x||[],U=U||0,isNaN(U)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map((function(re){return k(L(re))})).join(" "),U=k(L(U)),oe("["+x+"] "+U+" d"),this};var Ss=v.__private__.getLineHeight=v.getLineHeight=function(){return Pe*di};v.__private__.getLineHeight=v.getLineHeight=function(){return Pe*di};var _s=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(di=x),this},As=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return di};_s(t.lineHeight);var fr=v.__private__.getHorizontalCoordinate=function(x){return L(x)},Nr=v.__private__.getVerticalCoordinate=function(x){return I===A.ADVANCED?x:et[O].mediaBox.topRightY-et[O].mediaBox.bottomLeftY-L(x)},Za=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(x){return k(fr(x))},Fr=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(x){return k(Nr(x))},$n=t.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return Gn($n)},v.__private__.setStrokeColor=v.setDrawColor=function(x,U,re,ae){return $n=zn({ch1:x,ch2:U,ch3:re,ch4:ae,pdfColorType:"draw",precision:2}),oe($n),this};var To=t.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return Gn(To)},v.__private__.setFillColor=v.setFillColor=function(x,U,re,ae){return To=zn({ch1:x,ch2:U,ch3:re,ch4:ae,pdfColorType:"fill",precision:2}),oe(To),this};var fi=t.textColor||"0 g",Qa=v.__private__.getTextColor=v.getTextColor=function(){return Gn(fi)};v.__private__.setTextColor=v.setTextColor=function(x,U,re,ae){return fi=zn({ch1:x,ch2:U,ch3:re,ch4:ae,pdfColorType:"text",precision:3}),this};var Hi=t.charSpace,el=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Hi||0)};v.__private__.setCharSpace=v.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Hi=x,this};var ko=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(x){var U=v.CapJoinStyles[x];if(U===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ko=U,oe(U+" J"),this};var Io=0;v.__private__.setLineJoin=v.setLineJoin=function(x){var U=v.CapJoinStyles[x];if(U===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Io=U,oe(U+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return oe(k(L(x))+" M"),this},v.GState=ls,v.setGState=function(x){(x=typeof x=="string"?Pt[On[x]]:Cs(null,x)).equals(xr)||(oe("/"+x.id+" gs"),xr=x)};var Cs=function(x,U){if(!x||!On[x]){var re=!1;for(var ae in Pt)if(Pt.hasOwnProperty(ae)&&Pt[ae].equals(U)){re=!0;break}if(re)U=Pt[ae];else{var he="GS"+(Object.keys(Pt).length+1).toString(10);Pt[he]=U,U.id=he}return x&&(On[x]=U.id),vt.publish("addGState",U),U}};v.addGState=function(x,U){return Cs(x,U),this},v.saveGraphicsState=function(){return oe("q"),or.push({key:lt,size:Pe,color:fi}),this},v.restoreGraphicsState=function(){oe("Q");var x=or.pop();return lt=x.key,Pe=x.size,fi=x.color,xr=null,this},v.setCurrentTransformationMatrix=function(x){return oe(x.toString()+" cm"),this},v.comment=function(x){return oe("#"+x),this};var Vi=function(x,U){var re=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(xe){isNaN(xe)||(re=parseFloat(xe))}});var ae=U||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ae},set:function(xe){isNaN(xe)||(ae=parseFloat(xe))}});var he="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return he},set:function(xe){he=xe.toString()}}),this},Eo=function(x,U,re,ae){Vi.call(this,x,U),this.type="rect";var he=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return he},set:function(Te){isNaN(Te)||(he=parseFloat(Te))}});var xe=ae||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xe},set:function(Te){isNaN(Te)||(xe=parseFloat(Te))}}),this},Po=function(){this.page=Lt,this.currentPage=O,this.pages=Ce.slice(0),this.pagesContext=et.slice(0),this.x=nn,this.y=ht,this.matrix=qn,this.width=hi(O),this.height=jr(O),this.outputDestination=Ie,this.id="",this.objectNumber=-1};Po.prototype.restore=function(){Lt=this.page,O=this.currentPage,et=this.pagesContext,Ce=this.pages,nn=this.x,ht=this.y,qn=this.matrix,Lo(O,this.width),Ro(O,this.height),Ie=this.outputDestination};var Ts=function(x,U,re,ae,he){ar.push(new Po),Lt=O=0,Ce=[],nn=x,ht=U,qn=he,No([re,ae])},tl=function(x){if(sr[x])ar.pop().restore();else{var U=new Po,re="Xo"+(Object.keys(Qt).length+1).toString(10);U.id=re,sr[x]=re,Qt[re]=U,vt.publish("addFormObject",U),ar.pop().restore()}};for(var Gi in v.beginFormObject=function(x,U,re,ae,he){return Ts(x,U,re,ae,he),this},v.endFormObject=function(x){return tl(x),this},v.doFormObject=function(x,U){var re=Qt[sr[x]];return oe("q"),oe(U.toString()+" cm"),oe("/"+re.id+" Do"),oe("Q"),this},v.getFormObject=function(x){var U=Qt[sr[x]];return{x:U.x,y:U.y,width:U.width,height:U.height,matrix:U.matrix}},v.save=function(x,U){return x=x||"generated.pdf",(U=U||{}).returnPromise=U.returnPromise||!1,U.returnPromise===!1?(wi(Ui(wr()),x),typeof wi.unload=="function"&&Je.setTimeout&&setTimeout(wi.unload,911),this):new Promise((function(re,ae){try{var he=wi(Ui(wr()),x);typeof wi.unload=="function"&&Je.setTimeout&&setTimeout(wi.unload,911),re(he)}catch(xe){ae(xe.message)}}))},We.API)We.API.hasOwnProperty(Gi)&&(Gi==="events"&&We.API.events.length?(function(x,U){var re,ae,he;for(he=U.length-1;he!==-1;he--)re=U[he][0],ae=U[he][1],x.subscribe.apply(x,[re].concat(typeof ae=="function"?[ae]:ae))})(vt,We.API.events):v[Gi]=We.API[Gi]);var hi=v.getPageWidth=function(x){return(et[x=x||O].mediaBox.topRightX-et[x].mediaBox.bottomLeftX)/je},Lo=v.setPageWidth=function(x,U){et[x].mediaBox.topRightX=U*je+et[x].mediaBox.bottomLeftX},jr=v.getPageHeight=function(x){return(et[x=x||O].mediaBox.topRightY-et[x].mediaBox.bottomLeftY)/je},Ro=v.setPageHeight=function(x,U){et[x].mediaBox.topRightY=U*je+et[x].mediaBox.bottomLeftY};return v.internal={pdfEscape:yn,getStyle:bs,getFont:Xa,getFontSize:Me,getCharSpace:el,getTextColor:Qa,getLineHeight:Ss,getLineHeightFactor:As,getLineWidth:Oi,write:Ke,getHorizontalCoordinate:fr,getVerticalCoordinate:Nr,getCoordinateString:Za,getVerticalCoordinateString:Fr,collections:{},newObject:Wt,newAdditionalObject:Ei,newObjectDeferred:Ht,newObjectDeferredBegin:_n,getFilters:cr,putStream:En,events:vt,scaleFactor:je,pageSize:{getWidth:function(){return hi(O)},setWidth:function(x){Lo(O,x)},getHeight:function(){return jr(O)},setHeight:function(x){Ro(O,x)}},encryptionOptions:p,encryption:rn,getEncryptor:za,output:Bi,getNumberOfPages:qa,pages:Ce,out:oe,f2:q,f3:E,getPageInfo:xs,getPageInfoByObjId:Xe,getCurrentPageInfo:Wa,getPDFVersion:_,Point:Vi,Rectangle:Eo,Matrix:$e,hasHotfix:ys},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return hi(O)},set:function(x){Lo(O,x)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return jr(O)},set:function(x){Ro(O,x)},enumerable:!0,configurable:!0}),Ua.call(v,ke),lt="F1",gs(i,n),vt.publish("initialized"),v}co.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},co.prototype.toHexString=function(t){return t.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},co.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},co.prototype.processOwnerPassword=function(t,e){return ec(Ql(e).substr(0,5),t)},co.prototype.encryptor=function(t,e){var n=Ql(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return ec(n,r)}},ls.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||bt(t)!==bt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},We.API={events:[]},We.version="2.5.2";var Dt=We.API,vc=1,Ii=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},oo=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nt=function(t){return t.toFixed(2)},Kr=function(t){return t.toFixed(5)};Dt.__acroform__={};var Sn=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Pd=function(t){return t*vc},gr=function(t){var e=new Qf,n=qe.internal.getHeight(t)||0,r=qe.internal.getWidth(t)||0;return e.BBox=[0,0,Number(nt(r)),Number(nt(n))],e},Bv=Dt.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},qv=Dt.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Ov=Dt.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Bt=Dt.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Ov(t,e-1)},qt=Dt.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Bv(t,e-1)},Ot=Dt.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qv(t,e-1)},Hv=Dt.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],o=t[1],s=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(o+a)||0,l.upperRight_X=n(i+s)||0,l.upperRight_Y=r(o)||0,[Number(nt(l.lowerLeft_X)),Number(nt(l.lowerLeft_Y)),Number(nt(l.upperRight_X)),Number(nt(l.upperRight_Y))]},Vv=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=tc(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+nt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=gr(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},tc=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map((function(E){return E.split(`
`)})):i.map((function(E){return[E]}));var o=n,s=qe.internal.getHeight(t)||0;s=s<0?-s:s;var a=qe.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(E,L,B){if(E+1<i.length){var z=L+" "+i[E+1][0];return aa(z,t,B).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var c,p,m=aa("3",t,o).height,y=t.multiline?s-o:(s-m)/2,v=y+=2,S=0,_=0,w=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+aa(e,t,o=12).width+", FieldWidth:"+a+`
`;break}for(var N="",A=0,I=0;I<i.length;I++)if(i.hasOwnProperty(I)){var D=!1;if(i[I].length!==1&&w!==i[I].length-1){if((m+2)*(A+2)+2>s)continue e;N+=i[I][w],D=!0,_=I,I--}else{N=(N+=i[I][w]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var M=parseInt(I),T=l(M,N,o),k=I>=i.length-1;if(T&&!k){N+=" ",w=0;continue}if(T||k){if(k)_=M;else if(t.multiline&&(m+2)*(A+2)+2>s)continue e}else{if(!t.multiline||(m+2)*(A+2)+2>s)continue e;_=M}}for(var R="",$=S;$<=_;$++){var q=i[$];if(t.multiline){if($===_){R+=q[w]+" ",w=(w+1)%q.length;continue}if($===S){R+=q[q.length-1]+" ";continue}}R+=q[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,p=aa(R,t,o).width,t.textAlign){case"right":c=a-p-2;break;case"center":c=(a-p)/2;break;case"left":default:c=2}e+=nt(c)+" "+nt(v)+` Td
`,e+="("+Ii(R)+`) Tj
`,e+=-nt(c)+` 0 Td
`,v=-(o+2),p=0,S=D?_:_+1,A++,N=""}break}return r.text=e,r.fontSize=o,r},aa=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Gv={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},zv=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find((function(r){return r.type===n.type&&r.object===n.object}))===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Wv=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),bt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},$v=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(rr.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Gv)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");vc=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new eh,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)})),t.internal.events.subscribe("buildDocument",(function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&zv(o,n)}})(t)})),t.internal.events.subscribe("putCatalog",(function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)})),t.internal.events.subscribe("postPutPages",(function(n){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],l=[],c=a.Rect;if(a.Rect&&(a.Rect=Hv(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=qe.createDefaultAppearanceStream(a),bt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var p=Vv(a);l.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(a.appearanceStreamContent){var m="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var v=a.appearanceStreamContent[y];if(m+="/"+y+" ",m+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var s in v)if(v.hasOwnProperty(s)){var S=v[s];typeof S=="function"&&(S=S.call(i,a)),m+="/"+s+" "+S+" ",i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S)}}else typeof(S=v)=="function"&&(S=S.call(i,a)),m+="/"+s+" "+S,i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S);m+=">>"}l.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}o&&Wv(i.internal.acroformPlugin.xForms,i)})(n,t)})),t.internal.acroformPlugin.isInitialized=!0}},Zf=Dt.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(s){return s};if(Array.isArray(t)){for(var i="[",o=0;o<t.length;o++)switch(o!==0&&(i+=" "),bt(t[o])){case"boolean":case"number":case"object":i+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Ii(r(t[o].toString()))+")"):i+=t[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},kl=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ii(r(t))+")"},mr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};mr.prototype.toString=function(){return this.objId+" 0 R"},mr.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},mr.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"}));for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:Zf(i,this.objId,this.scope)}):i instanceof mr?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var Qf=function(){mr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Sn(Qf,mr);var eh=function(){mr.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ii(n(t))+")"}},set:function(n){t=n}})};Sn(eh,mr);var rr=function t(){mr.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Bt(e,3)},set:function(N){N?this.F=qt(e,3):this.F=Ot(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');n=N}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(N){r=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(N){r[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(N){r[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(N){r[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(N){r[3]=N}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof wa)return;o="FieldObject"+t.FieldNum++}var N=function(A){return A};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+Ii(N(o))+")"},set:function(N){o=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(N){o=N}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(N){s=N}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(N){a=N}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/vc:c},set:function(N){c=N}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(N){p=N}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof wa||this instanceof ri))return kl(m,this.objId,this.scope)},set:function(N){N=N.toString(),m=N}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Jt?y:kl(y,this.objId,this.scope)},set:function(N){N=N.toString(),y=this instanceof Jt?N:N.substr(0,1)==="("?oo(N.substr(1,N.length-2)):oo(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Jt?oo(y.substr(1,y.length-1)):y},set:function(N){N=N.toString(),y=this instanceof Jt?"/"+N:N}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Jt?v:kl(v,this.objId,this.scope)},set:function(N){N=N.toString(),v=this instanceof Jt?N:N.substr(0,1)==="("?oo(N.substr(1,N.length-2)):oo(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Jt?oo(v.substr(1,v.length-1)):v},set:function(N){N=N.toString(),v=this instanceof Jt?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var S,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(N){N=!!N,_=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(S)return S},set:function(N){S=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,1)},set:function(N){N?this.Ff=qt(this.Ff,1):this.Ff=Ot(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,2)},set:function(N){N?this.Ff=qt(this.Ff,2):this.Ff=Ot(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,3)},set:function(N){N?this.Ff=qt(this.Ff,3):this.Ff=Ot(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');w=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(w){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:w=2;break;case"center":case 1:w=1;break;case"left":case 0:default:w=0}}})};Sn(rr,mr);var Si=function(){rr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Zf(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=(function(o,s,a){a||(a=1);for(var l,c=[];l=s.exec(o);)c.push(l[a]);return c})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,18)},set:function(n){n?this.Ff=qt(this.Ff,18):this.Ff=Ot(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=qt(this.Ff,19):this.Ff=Ot(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,20)},set:function(n){n?(this.Ff=qt(this.Ff,20),e.sort()):this.Ff=Ot(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,22)},set:function(n){n?this.Ff=qt(this.Ff,22):this.Ff=Ot(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,23)},set:function(n){n?this.Ff=qt(this.Ff,23):this.Ff=Ot(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,27)},set:function(n){n?this.Ff=qt(this.Ff,27):this.Ff=Ot(this.Ff,27)}}),this.hasAppearanceStream=!1};Sn(Si,rr);var _i=function(){Si.call(this),this.fontName="helvetica",this.combo=!1};Sn(_i,Si);var Ai=function(){_i.call(this),this.combo=!0};Sn(Ai,_i);var rs=function(){Ai.call(this),this.edit=!0};Sn(rs,Ai);var Jt=function(){rr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,15)},set:function(n){n?this.Ff=qt(this.Ff,15):this.Ff=Ot(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,16)},set:function(n){n?this.Ff=qt(this.Ff,16):this.Ff=Ot(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,17)},set:function(n){n?this.Ff=qt(this.Ff,17):this.Ff=Ot(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,26)},set:function(n){n?this.Ff=qt(this.Ff,26):this.Ff=Ot(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ii(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){bt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Sn(Jt,rr);var is=function(){Jt.call(this),this.pushButton=!0};Sn(is,Jt);var Ci=function(){Jt.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Sn(Ci,Jt);var wa=function(){var t,e;rr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+Ii(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){bt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=qe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Sn(wa,rr),Ci.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Ci.prototype.createOption=function(t){var e=new wa;return e.Parent=this,e.optionName=t,this.Kids.push(e),Jv.call(this.scope,e),e};var os=function(){Jt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=qe.CheckBox.createAppearanceStream()};Sn(os,Jt);var ri=function(){rr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,13)},set:function(e){e?this.Ff=qt(this.Ff,13):this.Ff=Ot(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,21)},set:function(e){e?this.Ff=qt(this.Ff,21):this.Ff=Ot(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,23)},set:function(e){e?this.Ff=qt(this.Ff,23):this.Ff=Ot(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,24)},set:function(e){e?this.Ff=qt(this.Ff,24):this.Ff=Ot(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,25)},set:function(e){e?this.Ff=qt(this.Ff,25):this.Ff=Ot(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,26)},set:function(e){e?this.Ff=qt(this.Ff,26):this.Ff=Ot(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Sn(ri,rr);var ss=function(){ri.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,14)},set:function(t){t?this.Ff=qt(this.Ff,14):this.Ff=Ot(this.Ff,14)}}),this.password=!0};Sn(ss,ri);var qe={CheckBox:{createAppearanceStream:function(){return{N:{On:qe.CheckBox.YesNormal},D:{On:qe.CheckBox.YesPushDown,Off:qe.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=tc(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+nt(qe.internal.getWidth(t))+" "+nt(qe.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+nt(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=gr(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],o=qe.internal.getHeight(t),s=qe.internal.getWidth(t),a=tc(t,t.caption);return i.push("1 g"),i.push("0 0 "+nt(s)+" "+nt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+nt(s-1)+" "+nt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+nt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+nt(qe.internal.getWidth(t))+" "+nt(qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:qe.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=qe.RadioButton.Circle.YesNormal,e.D[t]=qe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=qe.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*qe.internal.Bezier_C).toFixed(5)),s=Number((r*qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:qe.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=qe.RadioButton.Cross.YesNormal,e.D[t]=qe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+nt(qe.internal.getWidth(t)-2)+" "+nt(qe.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(nt(r.x1.x)+" "+nt(r.x1.y)+" m"),n.push(nt(r.x2.x)+" "+nt(r.x2.y)+" l"),n.push(nt(r.x4.x)+" "+nt(r.x4.y)+" m"),n.push(nt(r.x3.x)+" "+nt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=qe.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+nt(qe.internal.getWidth(t))+" "+nt(qe.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+nt(qe.internal.getWidth(t)-2)+" "+nt(qe.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(nt(n.x1.x)+" "+nt(n.x1.y)+" m"),r.push(nt(n.x2.x)+" "+nt(n.x2.y)+" l"),r.push(nt(n.x4.x)+" "+nt(n.x4.y)+" m"),r.push(nt(n.x3.x)+" "+nt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+nt(qe.internal.getWidth(t))+" "+nt(qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};qe.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=qe.internal.getWidth(t),n=qe.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},qe.internal.getWidth=function(t){var e=0;return bt(t)==="object"&&(e=Pd(t.Rect[2])),e},qe.internal.getHeight=function(t){var e=0;return bt(t)==="object"&&(e=Pd(t.Rect[3])),e};var Jv=Dt.addField=function(t){if($v(this,t),!(t instanceof rr))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Dt.AcroFormChoiceField=Si,Dt.AcroFormListBox=_i,Dt.AcroFormComboBox=Ai,Dt.AcroFormEditBox=rs,Dt.AcroFormButton=Jt,Dt.AcroFormPushButton=is,Dt.AcroFormRadioButton=Ci,Dt.AcroFormCheckBox=os,Dt.AcroFormTextField=ri,Dt.AcroFormPasswordField=ss,Dt.AcroFormAppearance=qe,Dt.AcroForm={ChoiceField:Si,ListBox:_i,ComboBox:Ai,EditBox:rs,Button:Jt,PushButton:is,RadioButton:Ci,CheckBox:os,TextField:ri,PasswordField:ss,Appearance:qe},We.AcroForm={ChoiceField:Si,ListBox:_i,ComboBox:Ai,EditBox:rs,Button:Jt,PushButton:is,RadioButton:Ci,CheckBox:os,TextField:ri,PasswordField:ss,Appearance:qe};var Yv=We.AcroForm;function th(t){return t.reduce((function(e,n,r){return e[n]=r,e}),{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(E,L){var B,z,ne,H,F,G=e;if((L=L||e)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(T(E))for(F in n)for(ne=n[F],B=0;B<ne.length;B+=1){for(H=!0,z=0;z<ne[B].length;z+=1)if(ne[B][z]!==void 0&&ne[B][z]!==E[z]){H=!1;break}if(H===!0){G=F;break}}else for(F in n)for(ne=n[F],B=0;B<ne.length;B+=1){for(H=!0,z=0;z<ne[B].length;z+=1)if(ne[B][z]!==void 0&&ne[B][z]!==E.charCodeAt(z)){H=!1;break}if(H===!0){G=F;break}}return G===e&&L!==e&&(G=L),G},i=function E(L){for(var B=this.internal.write,z=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:L.width}),H.push({key:"Height",value:L.height}),L.colorSpace===w.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===w.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)){for(var F="",G=0,Z=L.transparency.length;G<Z;G++)F+=L.transparency[G]+" "+L.transparency[G]+" ";H.push({key:"Mask",value:"["+F+"]"})}L.sMask!==void 0&&H.push({key:"SMask",value:L.objectId+1+" 0 R"});var J=L.filter!==void 0?["/"+L.filter]:void 0;if(z({data:L.data,additionalKeyValues:H,alreadyAppliedFilters:J,objectId:L.objectId}),B("endobj"),"sMask"in L&&L.sMask!==void 0){var ie="/Predictor "+L.predictor+" /Colors 1 /BitsPerComponent "+L.bitsPerComponent+" /Columns "+L.width,P={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:L.bitsPerComponent,decodeParameters:ie,data:L.sMask};"filter"in L&&(P.filter=L.filter),E.call(this,P)}if(L.colorSpace===w.INDEXED){var O=this.internal.newObject();z({data:R(new Uint8Array(L.palette)),objectId:O}),B("endobj")}},o=function(){var E=this.internal.collections.addImage_images;for(var L in E)i.call(this,E[L])},s=function(){var E,L=this.internal.collections.addImage_images,B=this.internal.write;for(var z in L)B("/I"+(E=L[z]).index,E.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var E=this.internal.collections.addImage_images;return a.call(this),E},c=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(E){return typeof t["process"+E.toUpperCase()]=="function"},m=function(E){return bt(E)==="object"&&E.nodeType===1},y=function(E,L){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var B=""+E.getAttribute("src");if(B.indexOf("data:image/")===0)return ns(unescape(B).split("base64,").pop());var z=t.loadFile(B,!0);if(z!==void 0)return z}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var ne;switch(L){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;case"JPEG":case"JPG":default:ne="image/jpeg"}return ns(E.toDataURL(ne,1).split("base64,").pop())}},v=function(E){var L=this.internal.collections.addImage_images;if(L){for(var B in L)if(E===L[B].alias)return L[B]}},S=function(E,L,B){return E||L||(E=-96,L=-96),E<0&&(E=-1*B.width*72/E/this.internal.scaleFactor),L<0&&(L=-1*B.height*72/L/this.internal.scaleFactor),E===0&&(E=L*B.width/B.height),L===0&&(L=E*B.height/B.width),[E,L]},_=function(E,L,B,z,ne,H){var F=S.call(this,B,z,ne),G=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,J=l.call(this);if(B=F[0],z=F[1],J[ne.index]=ne,H){H*=Math.PI/180;var ie=Math.cos(H),P=Math.sin(H),O=function(Q){return Q.toFixed(4)},K=[O(ie),O(P),O(-1*P),O(ie),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,G(E),Z(L+z),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([G(B),"0","0",G(z),"0","0","cm"].join(" "))):this.internal.write([G(B),"0","0",G(z),G(E),Z(L+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=t.__addimage__.sHashCode=function(E){var L,B,z=0;if(typeof E=="string")for(B=E.length,L=0;L<B;L++)z=(z<<5)-z+E.charCodeAt(L),z|=0;else if(T(E))for(B=E.byteLength/2,L=0;L<B;L++)z=(z<<5)-z+E[L],z|=0;return z},I=t.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var L=!0;return E.length===0&&(L=!1),E.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(L=!1),L},D=t.__addimage__.extractImageFromDataUrl=function(E){var L=(E=E||"").split("base64,"),B=null;if(L.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(L[0]);Array.isArray(z)&&(B={mimeType:z[1],charset:z[2],data:L[1]})}return B},M=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(E){return M()&&E instanceof ArrayBuffer};var T=t.__addimage__.isArrayBufferView=function(E){return M()&&typeof Uint32Array<"u"&&(E instanceof Int8Array||E instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array)},k=t.__addimage__.binaryStringToUint8Array=function(E){for(var L=E.length,B=new Uint8Array(L),z=0;z<L;z++)B[z]=E.charCodeAt(z);return B},R=t.__addimage__.arrayBufferToBinaryString=function(E){for(var L="",B=T(E)?E:new Uint8Array(E),z=0;z<B.length;z+=8192)L+=String.fromCharCode.apply(null,B.subarray(z,z+8192));return L};t.addImage=function(){var E,L,B,z,ne,H,F,G,Z;if(typeof arguments[1]=="number"?(L=e,B=arguments[1],z=arguments[2],ne=arguments[3],H=arguments[4],F=arguments[5],G=arguments[6],Z=arguments[7]):(L=arguments[1],B=arguments[2],z=arguments[3],ne=arguments[4],H=arguments[5],F=arguments[6],G=arguments[7],Z=arguments[8]),bt(E=arguments[0])==="object"&&!m(E)&&"imageData"in E){var J=E;E=J.imageData,L=J.format||L||e,B=J.x||B||0,z=J.y||z||0,ne=J.w||J.width||ne,H=J.h||J.height||H,F=J.alias||F,G=J.compression||G,Z=J.rotation||J.angle||Z}var ie=this.internal.getFilters();if(G===void 0&&ie.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(B)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var P=$.call(this,E,L,F,G);return _.call(this,B,z,ne,H,P,Z),this};var $=function(E,L,B,z){var ne,H,F;if(typeof E=="string"&&r(E)===e){E=unescape(E);var G=q(E,!1);(G!==""||(G=t.loadFile(E,!0))!==void 0)&&(E=G)}if(m(E)&&(E=y(E,L)),L=r(E,L),!p(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((F=B)==null||F.length===0)&&(B=(function(Z){return typeof Z=="string"||T(Z)?A(Z):T(Z.data)?A(Z.data):null})(E)),(ne=v.call(this,B))||(M()&&(E instanceof Uint8Array||L==="RGBA"||(H=E,E=k(E))),ne=this["process"+L.toUpperCase()](E,c.call(this),B,(function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in t.image_compression?Z:N.NONE})(z),H)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},q=t.__addimage__.convertBase64ToBinaryString=function(E,L){var B;L=typeof L!="boolean"||L;var z,ne="";if(typeof E=="string"){z=(B=D(E))!==null?B.data:E;try{ne=ns(z)}catch(H){if(L)throw I(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};t.getImageProperties=function(E){var L,B,z="";if(m(E)&&(E=y(E)),typeof E=="string"&&r(E)===e&&((z=q(E,!1))===""&&(z=t.loadFile(E)||""),E=z),B=r(E),!p(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(!M()||E instanceof Uint8Array||(E=k(E)),!(L=this["process"+B.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=B,L}})(We.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};We.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,p=!1,m=0;m<c.length&&!p;m++)switch((r=c[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){r=c[y];var v=this.internal.pdfEscape,S=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(_.objId),A=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+v(N(r.contents))+")",o+=" /Popup "+w.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+v(N(A))+") >>",_.content=o;var I=_.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+I,r.open&&(o+=" /Open true"),o+=" >>",w.content=o,this.internal.write(_.objId,"0 R",w.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var D=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+v(S(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var M=this.annotations._nameMap[r.options.name];r.options.pageNumber=M.page,r.options.top=M.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+v(S(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var T=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+T+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,o,s){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+o)},options:s,type:"link"})},t.textWithLink=function(n,r,i,o){var s,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var p=this.splitTextToSize(n,a).length;s=Math.ceil(c*p)}else a=l,s=c;return this.text(n,r,i,o),i+=.2*c,o.align==="center"&&(r-=l/2),o.align==="right"&&(r-=l),this.link(r,i-c,a,s,o),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(We.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},s=t.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},a=t.__arabicParser__.isArabicEndLetter=function(_){return s(_)&&o(_)&&e[_.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(_){return s(_)&&i.indexOf(_.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return s(_)&&o(_)&&e[_.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(_){return s(_)&&o(_)&&e[_.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(_){return s(_)&&o(_)&&e[_.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(_){return s(_)&&o(_)&&e[_.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(_){var w=0,N=n,A="",I=0;for(w=0;w<_.length;w+=1)N[_.charCodeAt(w)]!==void 0?(I++,typeof(N=N[_.charCodeAt(w)])=="number"&&(A+=String.fromCharCode(N),N=n,I=0),w===_.length-1&&(N=n,A+=_.charAt(w-(I-1)),w-=I-1,I=0)):(N=n,A+=_.charAt(w-I),w-=I,I=0);return A};t.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(_,w,N){return s(_)?o(_)===!1?-1:!c(_)||!s(w)&&!s(N)||!s(N)&&a(w)||a(_)&&!s(w)||a(_)&&l(w)||a(_)&&a(w)?0:p(_)&&s(w)&&!a(w)&&s(N)&&c(N)?3:a(_)||!s(N)?1:2:-1},v=function(_){var w=0,N=0,A=0,I="",D="",M="",T=(_=_||"").split("\\s+"),k=[];for(w=0;w<T.length;w+=1){for(k.push(""),N=0;N<T[w].length;N+=1)I=T[w][N],D=T[w][N-1],M=T[w][N+1],s(I)?(A=y(I,D,M),k[w]+=A!==-1?String.fromCharCode(e[I.charCodeAt(0)][A]):I):k[w]+=I;k[w]=m(k[w])}return k.join(" ")},S=t.__arabicParser__.processArabic=t.processArabic=function(){var _,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(w)){var A=0;for(N=[],A=0;A<w.length;A+=1)Array.isArray(w[A])?N.push([v(w[A][0]),w[A][1],w[A][2]]):N.push([v(w[A])]);_=N}else _=v(w);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};t.events.push(["preProcessText",S])})(We.API),We.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(We.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(_){l=_}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(_){y=_}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(_){v=_}});var S=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return S},set:function(_){S=_}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var p=(c=c||{}).fontSize||this.getFontSize(),m=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,v=0,S=0,_=0,w=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var N=c.maxWidth;N>0?typeof l=="string"?l=this.splitTextToSize(l,N):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce((function(I,D){return I.concat(w.splitTextToSize(D,N))}),[])):l=Array.isArray(l)?l:[l];for(var A=0;A<l.length;A++)v<(_=this.getStringUnitWidth(l[A],{font:m})*p)&&(v=_);return v!==0&&(S=l.length),{w:v/=y,h:Math.max((S*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=m.top,v&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-p,l.y+p,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+p,{align:"center",baseline:"top",maxWidth:l.width-p-p}):this.text(l.text,l.x+p,l.y+p,{align:"left",baseline:"top",maxWidth:l.width-p-p})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,p,m,y){if(r.call(this),!p)throw new Error("No data for PDF table.");var v,S,_,w,N=[],A=[],I=[],D={},M={},T=[],k=[],R=(y=y||{}).autoSize||!1,$=y.printHeaders!==!1,q=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,E=y.margins||Object.assign({width:this.getPageWidth()},e),L=typeof y.padding=="number"?y.padding:3,B=y.headerBackgroundColor||"#c8c8c8",z=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=q,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=z,this.setFontSize(q),m==null)A=N=Object.keys(p[0]),I=N.map((function(){return"left"}));else if(Array.isArray(m)&&bt(m[0])==="object")for(N=m.map((function(J){return J.name})),A=m.map((function(J){return J.prompt||J.name||""})),I=m.map((function(J){return J.align||"left"})),v=0;v<m.length;v+=1)M[m[v].name]=m[v].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(A=N=m,I=N.map((function(){return"left"})));if(R||Array.isArray(m)&&typeof m[0]=="string")for(v=0;v<N.length;v+=1){for(D[w=N[v]]=p.map((function(J){return J[w]})),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(A[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),S=D[w],this.setFont(void 0,"normal"),_=0;_<S.length;_+=1)T.push(this.getTextDimensions(S[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);M[w]=Math.max.apply(null,T)+L+L,T=[]}if($){var ne={};for(v=0;v<N.length;v+=1)ne[N[v]]={},ne[N[v]].text=A[v],ne[N[v]].align=I[v];var H=a.call(this,ne,M);k=N.map((function(J){return new o(l,c,M[J],H,ne[J].text,void 0,ne[J].align)})),this.setTableHeaderRow(k),this.printHeaderRow(1,!1)}var F=m.reduce((function(J,ie){return J[ie.name]=ie.align,J}),{});for(v=0;v<p.length;v+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:v,data:p[v]},this);var G=a.call(this,p[v],M);for(_=0;_<N.length;_+=1){var Z=p[v][N[_]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:v,col:_,data:Z},this),s.call(this,new o(l,c,M[N[_]],G,Z,v+2,F[N[_]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var p=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map((function(v){var S=l[v];return this.splitTextToSize(S.hasOwnProperty("text")?S.text:S,c[v]-p-p)}),this).map((function(v){return this.getLineHeightFactor()*v.length*m/y+p+p}),this).reduce((function(v,S){return Math.max(v,S)}),0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){p=this.internal.__cell__.tableHeaderRow[v].clone(),c&&(p.y=this.internal.__cell__.margins.top||0,y.push(p)),p.lineNumber=l;var S=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,p),this.setTextColor(S)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}})(We.API);var nh={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},rh=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],nc=th(rh),ih=[100,200,300,400,500,600,700,800,900],Kv=th(ih);function rc(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(o){return nh[o=o||"normal"]?o:"normal"})(t.style),r=(function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}})(t.weight),i=(function(o){return typeof nc[o=o||"normal"]=="number"?o:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function Ld(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Xv={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Rd={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Md(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Zv(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Xv,n.genericFontFamilies||{}),o=null,s=null,a=0;a<e.length;++a)if(i[(o=rc(e[a])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){s=t[o.family];break}if(!(s=s||t[r]))throw new Error("Could not find a font-family for the rule '"+Md(o)+"' and default family '"+r+"'.");if(s=(function(l,c){if(c[l])return c[l];var p=nc[l],m=p<=nc.normal?-1:1,y=Ld(c,rh,p,m);if(!y)throw new Error("Could not find a matching font-stretch value for "+l);return y})(o.stretch,s),s=(function(l,c){if(c[l])return c[l];for(var p=nh[l],m=0;m<p.length;++m)if(c[p[m]])return c[p[m]];throw new Error("Could not find a matching font-style for "+l)})(o.style,s),!(s=(function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var p=Kv[l],m=Ld(c,ih,p,l<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+l);return m})(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+Md(o)+"'.");return s}function Dd(t){return t.trimLeft()}function Qv(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function ey(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var la,Fd,jd,Il=["times"];(function(t){var e,n,r,i,o,s,a,l,c,p=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new s,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new s,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new p}]);var m=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var O=P;Object.defineProperty(this,"pdf",{get:function(){return O}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(be){K=!!be}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(be){Q=!!be}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(be){isNaN(be)||(te=be)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(be){isNaN(be)||(se=be)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(be){var oe;typeof be=="number"?oe=[be,be,be,be]:((oe=new Array(4))[0]=be[0],oe[1]=be.length>=2?be[1]:oe[0],oe[2]=be.length>=3?be[2]:oe[0],oe[3]=be.length>=4?be[3]:oe[1]),c.margin=oe}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(be){de=be}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(be){pe=be}});var _e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return _e},set:function(be){_e=be}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(be){be instanceof p&&(c=be)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(be){c.path=be}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(be){Ce=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var oe;oe=y(be),this.ctx.fillStyle=oe.style,this.ctx.isFillTransparent=oe.a===0,this.ctx.fillOpacity=oe.a,this.pdf.setFillColor(oe.r,oe.g,oe.b,{a:oe.a}),this.pdf.setTextColor(oe.r,oe.g,oe.b,{a:oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var oe=y(be);this.ctx.strokeStyle=oe.style,this.ctx.isStrokeTransparent=oe.a===0,this.ctx.strokeOpacity=oe.a,oe.a===0?this.pdf.setDrawColor(255,255,255):(oe.a,this.pdf.setDrawColor(oe.r,oe.g,oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var Ee=null;function Ie(be,oe){if(Ee===null){var Ke=(function(Oe){var ke=[];return Object.keys(Oe).forEach((function(Pe){Oe[Pe].forEach((function(Fe){var Me=null;switch(Fe){case"bold":Me={family:Pe,weight:"bold"};break;case"italic":Me={family:Pe,style:"italic"};break;case"bolditalic":Me={family:Pe,weight:"bold",style:"italic"};break;case"":case"normal":Me={family:Pe}}Me!==null&&(Me.ref={name:Pe,style:Fe},ke.push(Me))}))})),ke})(be.getFontList());Ee=(function(Oe){for(var ke={},Pe=0;Pe<Oe.length;++Pe){var Fe=rc(Oe[Pe]),Me=Fe.family,Ve=Fe.stretch,Qe=Fe.style,ot=Fe.weight;ke[Me]=ke[Me]||{},ke[Me][Ve]=ke[Me][Ve]||{},ke[Me][Ve][Qe]=ke[Me][Ve][Qe]||{},ke[Me][Ve][Qe][ot]=Fe}return ke})(Ke.concat(oe))}return Ee}var He=null;Object.defineProperty(this,"fontFaces",{get:function(){return He},set:function(be){Ee=null,He=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var oe;if(this.ctx.font=be,(oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var Ke=oe[1],Oe=(oe[2],oe[3]),ke=oe[4],Pe=(oe[5],oe[6]),Fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ke)[2];ke=Math.floor(Fe==="px"?parseFloat(ke)*this.pdf.internal.scaleFactor:Fe==="em"?parseFloat(ke)*this.pdf.getFontSize():parseFloat(ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ke);var Me=(function(Ye){var lt,je,nn=[],ht=Ye.trim();if(ht==="")return Il;if(ht in Rd)return[Rd[ht]];for(;ht!=="";){switch(je=null,lt=(ht=Dd(ht)).charAt(0)){case'"':case"'":je=Qv(ht.substring(1),lt);break;default:je=ey(ht)}if(je===null||(nn.push(je[0]),(ht=Dd(je[1]))!==""&&ht.charAt(0)!==","))return Il;ht=ht.replace(/^,/,"")}return nn})(Pe);if(this.fontFaces){var Ve=Zv(Ie(this.pdf,this.fontFaces),Me.map((function(Ye){return{family:Ye,stretch:"normal",weight:Oe,style:Ke}})));this.pdf.setFont(Ve.ref.name,Ve.ref.style)}else{var Qe="";(Oe==="bold"||parseInt(Oe,10)>=700||Ke==="bold")&&(Qe="bold"),Ke==="italic"&&(Qe+="italic"),Qe.length===0&&(Qe="normal");for(var ot="",st={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<Me.length;dt++){if(this.pdf.internal.getFont(Me[dt],Qe,{noFallback:!0,disableWarning:!0})!==void 0){ot=Me[dt];break}if(Qe==="bolditalic"&&this.pdf.internal.getFont(Me[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Me[dt],Qe="bold";else if(this.pdf.internal.getFont(Me[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Me[dt],Qe="normal";break}}if(ot===""){for(var wt=0;wt<Me.length;wt++)if(st[Me[wt]]){ot=st[Me[wt]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,Qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};m.prototype.setLineDash=function(P){this.lineDash=P},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){D.call(this,"fill",!1)},m.prototype.stroke=function(){D.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(P,O){if(isNaN(P)||isNaN(O))throw At.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new s(P,O));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new s(P,O)},m.prototype.closePath=function(){var P=new s(0,0),O=0;for(O=this.path.length-1;O!==-1;O--)if(this.path[O].type==="begin"&&bt(this.path[O+1])==="object"&&typeof this.path[O+1].x=="number"){P=new s(this.path[O+1].x,this.path[O+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(P.x,P.y)},m.prototype.lineTo=function(P,O){if(isNaN(P)||isNaN(O))throw At.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new s(P,O));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new s(K.x,K.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},m.prototype.quadraticCurveTo=function(P,O,K,Q){if(isNaN(K)||isNaN(Q)||isNaN(P)||isNaN(O))throw At.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new s(K,Q)),se=this.ctx.transform.applyToPoint(new s(P,O));this.path.push({type:"qct",x1:se.x,y1:se.y,x:te.x,y:te.y}),this.ctx.lastPoint=new s(te.x,te.y)},m.prototype.bezierCurveTo=function(P,O,K,Q,te,se){if(isNaN(te)||isNaN(se)||isNaN(P)||isNaN(O)||isNaN(K)||isNaN(Q))throw At.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new s(te,se)),pe=this.ctx.transform.applyToPoint(new s(P,O)),_e=this.ctx.transform.applyToPoint(new s(K,Q));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:_e.x,y2:_e.y,x:de.x,y:de.y}),this.ctx.lastPoint=new s(de.x,de.y)},m.prototype.arc=function(P,O,K,Q,te,se){if(isNaN(P)||isNaN(O)||isNaN(K)||isNaN(Q)||isNaN(te))throw At.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new s(P,O));P=de.x,O=de.y;var pe=this.ctx.transform.applyToPoint(new s(0,K)),_e=this.ctx.transform.applyToPoint(new s(0,0));K=Math.sqrt(Math.pow(pe.x-_e.x,2)+Math.pow(pe.y-_e.y,2))}Math.abs(te-Q)>=2*Math.PI&&(Q=0,te=2*Math.PI),this.path.push({type:"arc",x:P,y:O,radius:K,startAngle:Q,endAngle:te,counterclockwise:se})},m.prototype.arcTo=function(P,O,K,Q,te){throw new Error("arcTo not implemented.")},m.prototype.rect=function(P,O,K,Q){if(isNaN(P)||isNaN(O)||isNaN(K)||isNaN(Q))throw At.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,O),this.lineTo(P+K,O),this.lineTo(P+K,O+Q),this.lineTo(P,O+Q),this.lineTo(P,O),this.lineTo(P+K,O),this.lineTo(P,O)},m.prototype.fillRect=function(P,O,K,Q){if(isNaN(P)||isNaN(O)||isNaN(K)||isNaN(Q))throw At.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,O,K,Q),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},m.prototype.strokeRect=function(P,O,K,Q){if(isNaN(P)||isNaN(O)||isNaN(K)||isNaN(Q))throw At.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");S.call(this)||(this.beginPath(),this.rect(P,O,K,Q),this.stroke())},m.prototype.clearRect=function(P,O,K,Q){if(isNaN(P)||isNaN(O)||isNaN(K)||isNaN(Q))throw At.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,O,K,Q))},m.prototype.save=function(P){P=typeof P!="boolean"||P;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(O),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},m.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(O),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(P){var O,K,Q,te;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))O=0,K=0,Q=0,te=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(se!==null)O=parseInt(se[1]),K=parseInt(se[2]),Q=parseInt(se[3]),te=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)O=parseInt(se[1]),K=parseInt(se[2]),Q=parseInt(se[3]),te=parseFloat(se[4]);else{if(te=1,typeof P=="string"&&P.charAt(0)!=="#"){var de=new Yf(P);P=de.ok?de.toHex():"#000000"}P.length===4?(O=P.substring(1,2),O+=O,K=P.substring(2,3),K+=K,Q=P.substring(3,4),Q+=Q):(O=P.substring(1,3),K=P.substring(3,5),Q=P.substring(5,7)),O=parseInt(O,16),K=parseInt(K,16),Q=parseInt(Q,16)}}return{r:O,g:K,b:Q,a:te,style:P}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},S=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(P,O,K,Q){if(isNaN(O)||isNaN(K)||typeof P!="string")throw At.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!v.call(this)){var te=G(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;L.call(this,{text:P,x:O,y:K,scale:se,angle:te,align:this.textAlign,maxWidth:Q})}},m.prototype.strokeText=function(P,O,K,Q){if(isNaN(O)||isNaN(K)||typeof P!="string")throw At.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!S.call(this)){Q=isNaN(Q)?void 0:Q;var te=G(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;L.call(this,{text:P,x:O,y:K,scale:se,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:Q})}},m.prototype.measureText=function(P){if(typeof P!="string")throw At.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var O=this.pdf,K=this.pdf.internal.scaleFactor,Q=O.internal.getFontSize(),te=O.getStringUnitWidth(P)*Q/O.internal.scaleFactor,se=function(de){var pe=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this};return new se({width:te*=Math.round(96*K/72*1e4)/1e4})},m.prototype.scale=function(P,O){if(isNaN(P)||isNaN(O))throw At.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(P,0,0,O,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},m.prototype.rotate=function(P){if(isNaN(P))throw At.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var O=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(O)},m.prototype.translate=function(P,O){if(isNaN(P)||isNaN(O))throw At.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,P,O);this.ctx.transform=this.ctx.transform.multiply(K)},m.prototype.transform=function(P,O,K,Q,te,se){if(isNaN(P)||isNaN(O)||isNaN(K)||isNaN(Q)||isNaN(te)||isNaN(se))throw At.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new l(P,O,K,Q,te,se);this.ctx.transform=this.ctx.transform.multiply(de)},m.prototype.setTransform=function(P,O,K,Q,te,se){P=isNaN(P)?1:P,O=isNaN(O)?0:O,K=isNaN(K)?0:K,Q=isNaN(Q)?1:Q,te=isNaN(te)?0:te,se=isNaN(se)?0:se,this.ctx.transform=new l(P,O,K,Q,te,se)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(P,O,K,Q,te,se,de,pe,_e){var Ce=this.pdf.getImageProperties(P),Ee=1,Ie=1,He=1,be=1;Q!==void 0&&pe!==void 0&&(He=pe/Q,be=_e/te,Ee=Ce.width/Q*pe/Q,Ie=Ce.height/te*_e/te),se===void 0&&(se=O,de=K,O=0,K=0),Q!==void 0&&pe===void 0&&(pe=Q,_e=te),Q===void 0&&pe===void 0&&(pe=Ce.width,_e=Ce.height);for(var oe,Ke=this.ctx.transform.decompose(),Oe=G(Ke.rotate.shx),ke=new l,Pe=(ke=(ke=(ke=ke.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale)).applyToRectangle(new a(se-O*He,de-K*be,Q*Ee,te*Ie)),Fe=w.call(this,Pe),Me=[],Ve=0;Ve<Fe.length;Ve+=1)Me.indexOf(Fe[Ve])===-1&&Me.push(Fe[Ve]);if(I(Me),this.autoPaging)for(var Qe=Me[0],ot=Me[Me.length-1],st=Qe;st<ot+1;st++){this.pdf.setPage(st);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wt=st===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],je=st===1?0:Ye+(st-2)*lt;if(this.ctx.clip_path.length!==0){var nn=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(oe,this.posX+this.margin[3],-je+wt+this.ctx.prevPageLastElemOffset),M.call(this,"fill",!0),this.path=nn}var ht=JSON.parse(JSON.stringify(Pe));ht=A([ht],this.posX+this.margin[3],-je+wt+this.ctx.prevPageLastElemOffset)[0];var qn=(st>Qe||st<ot)&&_.call(this);qn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,lt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",ht.x,ht.y,ht.w,ht.h,null,null,Oe),qn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,Oe)};var w=function(P,O,K){var Q=[];O=O||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":Q.push(Math.floor((P.y+te)/K)+1);break;case"arc":Q.push(Math.floor((P.y+te-P.radius)/K)+1),Q.push(Math.floor((P.y+te+P.radius)/K)+1);break;case"qct":var se=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);Q.push(Math.floor((se.y+te)/K)+1),Q.push(Math.floor((se.y+se.h+te)/K)+1);break;case"bct":var de=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);Q.push(Math.floor((de.y+te)/K)+1),Q.push(Math.floor((de.y+de.h+te)/K)+1);break;case"rect":Q.push(Math.floor((P.y+te)/K)+1),Q.push(Math.floor((P.y+P.h+te)/K)+1)}for(var pe=0;pe<Q.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<Q[pe];)N.call(this);return Q},N=function(){var P=this.fillStyle,O=this.strokeStyle,K=this.font,Q=this.lineCap,te=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=O,this.font=K,this.lineCap=Q,this.lineWidth=te,this.lineJoin=se},A=function(P,O,K){for(var Q=0;Q<P.length;Q++)switch(P[Q].type){case"bct":P[Q].x2+=O,P[Q].y2+=K;case"qct":P[Q].x1+=O,P[Q].y1+=K;case"mt":case"lt":case"arc":default:P[Q].x+=O,P[Q].y+=K}return P},I=function(P){return P.sort((function(O,K){return O-K}))},D=function(P,O){for(var K,Q,te=this.fillStyle,se=this.strokeStyle,de=this.lineCap,pe=this.lineWidth,_e=Math.abs(pe*this.ctx.transform.scaleX),Ce=this.lineJoin,Ee=JSON.parse(JSON.stringify(this.path)),Ie=JSON.parse(JSON.stringify(this.path)),He=[],be=0;be<Ie.length;be++)if(Ie[be].x!==void 0)for(var oe=w.call(this,Ie[be]),Ke=0;Ke<oe.length;Ke+=1)He.indexOf(oe[Ke])===-1&&He.push(oe[Ke]);for(var Oe=0;Oe<He.length;Oe++)for(;this.pdf.internal.getNumberOfPages()<He[Oe];)N.call(this);if(I(He),this.autoPaging)for(var ke=He[0],Pe=He[He.length-1],Fe=ke;Fe<Pe+1;Fe++){this.pdf.setPage(Fe),this.fillStyle=te,this.strokeStyle=se,this.lineCap=de,this.lineWidth=_e,this.lineJoin=Ce;var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Fe===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],st=Fe===1?0:Qe+(Fe-2)*ot;if(this.ctx.clip_path.length!==0){var dt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(K,this.posX+this.margin[3],-st+Ve+this.ctx.prevPageLastElemOffset),M.call(this,P,!0),this.path=dt}if(Q=JSON.parse(JSON.stringify(Ee)),this.path=A(Q,this.posX+this.margin[3],-st+Ve+this.ctx.prevPageLastElemOffset),O===!1||Fe===0){var wt=(Fe>ke||Fe<Pe)&&_.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,ot,null).clip().discardPath()),M.call(this,P,O),wt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}else this.lineWidth=_e,M.call(this,P,O),this.lineWidth=pe;this.path=Ee},M=function(P,O){if((P!=="stroke"||O||!S.call(this))&&(P==="stroke"||O||!v.call(this))){for(var K,Q,te=[],se=this.path,de=0;de<se.length;de++){var pe=se[de];switch(pe.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:pe,deltas:[],abs:[]});break;case"lt":var _e=te.length;if(se[de-1]&&!isNaN(se[de-1].x)&&(K=[pe.x-se[de-1].x,pe.y-se[de-1].y],_e>0)){for(;_e>=0;_e--)if(te[_e-1].close!==!0&&te[_e-1].begin!==!0){te[_e-1].deltas.push(K),te[_e-1].abs.push(pe);break}}break;case"bct":K=[pe.x1-se[de-1].x,pe.y1-se[de-1].y,pe.x2-se[de-1].x,pe.y2-se[de-1].y,pe.x-se[de-1].x,pe.y-se[de-1].y],te[te.length-1].deltas.push(K);break;case"qct":var Ce=se[de-1].x+2/3*(pe.x1-se[de-1].x),Ee=se[de-1].y+2/3*(pe.y1-se[de-1].y),Ie=pe.x+2/3*(pe.x1-pe.x),He=pe.y+2/3*(pe.y1-pe.y),be=pe.x,oe=pe.y;K=[Ce-se[de-1].x,Ee-se[de-1].y,Ie-se[de-1].x,He-se[de-1].y,be-se[de-1].x,oe-se[de-1].y],te[te.length-1].deltas.push(K);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(pe)}}Q=O?null:P==="stroke"?"stroke":"fill";for(var Ke=!1,Oe=0;Oe<te.length;Oe++)if(te[Oe].arc)for(var ke=te[Oe].abs,Pe=0;Pe<ke.length;Pe++){var Fe=ke[Pe];Fe.type==="arc"?R.call(this,Fe.x,Fe.y,Fe.radius,Fe.startAngle,Fe.endAngle,Fe.counterclockwise,void 0,O,!Ke):B.call(this,Fe.x,Fe.y),Ke=!0}else if(te[Oe].close===!0)this.pdf.internal.out("h"),Ke=!1;else if(te[Oe].begin!==!0){var Me=te[Oe].start.x,Ve=te[Oe].start.y;z.call(this,te[Oe].deltas,Me,Ve),Ke=!0}Q&&$.call(this,Q),O&&q.call(this)}},T=function(P){var O=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=O*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-K;case"top":return P+O-K;case"hanging":return P+O-2*K;case"middle":return P+O/2-K;case"ideographic":return P;case"alphabetic":default:return P}},k=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(O,K){this.colorStops.push([O,K])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(P,O,K,Q,te,se,de,pe,_e){for(var Ce=H.call(this,K,Q,te,se),Ee=0;Ee<Ce.length;Ee++){var Ie=Ce[Ee];Ee===0&&(_e?E.call(this,Ie.x1+P,Ie.y1+O):B.call(this,Ie.x1+P,Ie.y1+O)),ne.call(this,P,O,Ie.x2,Ie.y2,Ie.x3,Ie.y3,Ie.x4,Ie.y4)}pe?q.call(this):$.call(this,de)},$=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},q=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(P,O){this.pdf.internal.out(n(P)+" "+r(O)+" m")},L=function(P){var O;switch(P.align){case"right":case"end":O="right";break;case"center":O="center";break;case"left":case"start":default:O="left"}var K=this.pdf.getTextDimensions(P.text),Q=T.call(this,P.y),te=k.call(this,Q)-K.h,se=this.ctx.transform.applyToPoint(new s(P.x,Q)),de=this.ctx.transform.decompose(),pe=new l;pe=(pe=(pe=pe.multiply(de.translate)).multiply(de.skew)).multiply(de.scale);for(var _e,Ce,Ee,Ie=this.ctx.transform.applyToRectangle(new a(P.x,Q,K.w,K.h)),He=pe.applyToRectangle(new a(P.x,te,K.w,K.h)),be=w.call(this,He),oe=[],Ke=0;Ke<be.length;Ke+=1)oe.indexOf(be[Ke])===-1&&oe.push(be[Ke]);if(I(oe),this.autoPaging)for(var Oe=oe[0],ke=oe[oe.length-1],Pe=Oe;Pe<ke+1;Pe++){this.pdf.setPage(Pe);var Fe=Pe===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],Qe=Ve-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],st=ot-this.margin[3],dt=Pe===1?0:Me+(Pe-2)*Qe;if(this.ctx.clip_path.length!==0){var wt=this.path;_e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(_e,this.posX+this.margin[3],-1*dt+Fe),M.call(this,"fill",!0),this.path=wt}var Ye=A([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-dt+Fe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*P.scale),Ee=this.lineWidth,this.lineWidth=Ee*P.scale);var lt=this.autoPaging!=="text";if(lt||Ye.y+Ye.h<=Ve){if(lt||Ye.y>=Fe&&Ye.x<=ot){var je=lt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ot-Ye.x)[0],nn=A([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-dt+Fe+this.ctx.prevPageLastElemOffset)[0],ht=lt&&(Pe>Oe||Pe<ke)&&_.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,Qe,null).clip().discardPath()),this.pdf.text(je,nn.x,nn.y,{angle:P.angle,align:O,renderingMode:P.renderingMode}),ht&&this.pdf.restoreGraphicsState()}}else Ye.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-Ye.y);P.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ee)}else P.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*P.scale),Ee=this.lineWidth,this.lineWidth=Ee*P.scale),this.pdf.text(P.text,se.x+this.posX,se.y+this.posY,{angle:P.angle,align:O,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ee)},B=function(P,O,K,Q){K=K||0,Q=Q||0,this.pdf.internal.out(n(P+K)+" "+r(O+Q)+" l")},z=function(P,O,K){return this.pdf.lines(P,O,K,null,null)},ne=function(P,O,K,Q,te,se,de,pe){this.pdf.internal.out([e(i(K+P)),e(o(Q+O)),e(i(te+P)),e(o(se+O)),e(i(de+P)),e(o(pe+O)),"c"].join(" "))},H=function(P,O,K,Q){for(var te=2*Math.PI,se=Math.PI/2;O>K;)O-=te;var de=Math.abs(K-O);de<te&&Q&&(de=te-de);for(var pe=[],_e=Q?-1:1,Ce=O;de>1e-5;){var Ee=Ce+_e*Math.min(de,se);pe.push(F.call(this,P,Ce,Ee)),de-=Math.abs(Ee-Ce),Ce=Ee}return pe},F=function(P,O,K){var Q=(K-O)/2,te=P*Math.cos(Q),se=P*Math.sin(Q),de=te,pe=-se,_e=de*de+pe*pe,Ce=_e+de*te+pe*se,Ee=4/3*(Math.sqrt(2*_e*Ce)-Ce)/(de*se-pe*te),Ie=de-Ee*pe,He=pe+Ee*de,be=Ie,oe=-He,Ke=Q+O,Oe=Math.cos(Ke),ke=Math.sin(Ke);return{x1:P*Math.cos(O),y1:P*Math.sin(O),x2:Ie*Oe-He*ke,y2:Ie*ke+He*Oe,x3:be*Oe-oe*ke,y3:be*ke+oe*Oe,x4:P*Math.cos(K),y4:P*Math.sin(K)}},G=function(P){return 180*P/Math.PI},Z=function(P,O,K,Q,te,se){var de=P+.5*(K-P),pe=O+.5*(Q-O),_e=te+.5*(K-te),Ce=se+.5*(Q-se),Ee=Math.min(P,te,de,_e),Ie=Math.max(P,te,de,_e),He=Math.min(O,se,pe,Ce),be=Math.max(O,se,pe,Ce);return new a(Ee,He,Ie-Ee,be-He)},J=function(P,O,K,Q,te,se,de,pe){var _e,Ce,Ee,Ie,He,be,oe,Ke,Oe,ke,Pe,Fe,Me,Ve,Qe=K-P,ot=Q-O,st=te-K,dt=se-Q,wt=de-te,Ye=pe-se;for(Ce=0;Ce<41;Ce++)Oe=(oe=(Ee=P+(_e=Ce/40)*Qe)+_e*((He=K+_e*st)-Ee))+_e*(He+_e*(te+_e*wt-He)-oe),ke=(Ke=(Ie=O+_e*ot)+_e*((be=Q+_e*dt)-Ie))+_e*(be+_e*(se+_e*Ye-be)-Ke),Ce==0?(Pe=Oe,Fe=ke,Me=Oe,Ve=ke):(Pe=Math.min(Pe,Oe),Fe=Math.min(Fe,ke),Me=Math.max(Me,Oe),Ve=Math.max(Ve,ke));return new a(Math.round(Pe),Math.round(Fe),Math.round(Me-Pe),Math.round(Ve-Fe))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,O,K=(P=this.ctx.lineDash,O=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:O}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(We.API),(function(t){var e=function(o){var s,a,l,c,p,m,y,v,S,_;for(a=[],l=0,c=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;c>l;l+=4)(p=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(m=(p=((p=((p=((p=(p-(_=p%85))/85)-(S=p%85))/85)-(v=p%85))/85)-(y=p%85))/85)%85,a.push(m+33,y+33,v+33,S+33,_+33)):a.push(122);return(function(w,N){for(var A=N;A>0;A--)w.pop()})(a,s.length),String.fromCharCode.apply(String,a)+"~>"},n=function(o){var s,a,l,c,p,m=String,y="length",v=255,S="charCodeAt",_="slice",w="replace";for(o[_](-2),o=o[_](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),l=[],c=0,p=(o+=s="uuuuu"[_](o[y]%5||5))[y];p>c;c+=5)a=52200625*(o[S](c)-33)+614125*(o[S](c+1)-33)+7225*(o[S](c+2)-33)+85*(o[S](c+3)-33)+(o[S](c+4)-33),l.push(v&a>>24,v&a>>16,v&a>>8,v&a);return(function(N,A){for(var I=A;I>0;I--)N.pop()})(l,s[y]),m.fromCharCode.apply(m,l)},r=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var a="",l=0;l<o.length;l+=2)a+=String.fromCharCode("0x"+(o[l]+o[l+1]));return a},i=function(o){for(var s=new Uint8Array(o.length),a=o.length;a--;)s[a]=o.charCodeAt(a);return o=(s=Xl(s)).reduce((function(l,c){return l+String.fromCharCode(c)}),"")};t.processDataByFilters=function(o,s){var a=0,l=o||"",c=[];for(typeof(s=s||[])=="string"&&(s=[s]),a=0;a<s.length;a+=1)switch(s[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map((function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)})).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}})(We.API),(function(t){t.loadFile=function(e,n,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(l,c,p){var m=new XMLHttpRequest,y=0,v=function(S){var _=S.length,w=[],N=String.fromCharCode;for(y=0;y<_;y+=1)w.push(N(255&S.charCodeAt(y)));return w.join("")};if(m.open("GET",l,!c),m.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(m.onload=function(){m.status===200?p(v(this.responseText)):p(void 0)}),m.send(null),c&&m.status===200)return v(m.responseText)})(i,o,s)}catch{}return a})(e,n,r)},t.loadImageFile=t.loadFile})(We.API),(function(t){function e(){return(Je.html2canvas?Promise.resolve(Je.html2canvas):Ll(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))})).then((function(s){return s.default?s.default:s}))}function n(){return(Je.DOMPurify?Promise.resolve(Je.DOMPurify):Ll(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(s){return Promise.reject(new Error("Could not load dompurify: "+s))})).then((function(s){return s.default?s.default:s}))}var r=function(s){var a=bt(s);return a==="undefined"?"undefined":a==="string"||s instanceof String?"string":a==="number"||s instanceof Number?"number":a==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(s,a){var l=document.createElement(s);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},o=function s(a){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),c=s.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,s,1,[s])).set(a)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,a){return s.__proto__=a||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,a){return this.then((function(){switch(a=a||(function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(s)){case"string":return this.then(n).then((function(l){return this.set({src:i("div",{innerHTML:s,dompurify:l})})}));case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=(function l(c,p){for(var m=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),y=c.firstChild;y;y=y.nextSibling)p!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||m.appendChild(l(y,p));return c.nodeType===1&&(c.nodeName==="CANVAS"?(m.width=c.width,m.height=c.height,m.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(m.value=c.value),m.addEventListener("load",(function(){m.scrollTop=c.scrollTop,m.scrollLeft=c.scrollLeft}),!0)),m})(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then((function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)})).then((function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then((function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var y=0;y<c.length;++y){var v=c[y],S=v.src.find((function(_){return _.format==="truetype"}));S&&l.addFont(S.url,v.ref.name,v.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),a(this.prop.container,m)})).then((function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(s,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,a):this.outputPdf(s,a)},o.prototype.outputPdf=function(s,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(s,a)}))},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}}))},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(s){if(r(s)!=="object")return this;var a=Object.keys(s||{}).map((function(l){if(l in o.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}}),this);return this.then((function(){return this.thenList(a)}))},o.prototype.get=function(s,a){return this.then((function(){var l=s in o.template.prop?this.prop[s]:this.opt[s];return a?a(l):l}))},o.prototype.setMargin=function(s){return this.then((function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s})).then(this.setPageSize)},o.prototype.setPageSize=function(s){function a(l,c){return Math.floor(l*c/72*96)}return this.then((function(){(s=s||We.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:a(s.inner.width,s.k),height:a(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s}))},o.prototype.setProgress=function(s,a,l,c){return s!=null&&(this.progress.val=s),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,a,l,c){return this.setProgress(s?this.progress.val+s:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},o.prototype.then=function(s,a){var l=this;return this.thenCore(s,a,(function(c,p){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,(function(m){return l.updateProgress(null,c),m})).then(c,p).then((function(m){return l.updateProgress(1),m}))}))},o.prototype.thenCore=function(s,a,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),p=l.call(c,s,a);return o.convert(p,this.__proto__)},o.prototype.thenExternal=function(s,a){return Promise.prototype.then.call(this,s,a)},o.prototype.thenList=function(s){var a=this;return s.forEach((function(l){a=a.thenCore(l)})),a},o.prototype.catch=function(s){s&&(s=s.bind(this));var a=Promise.prototype.catch.call(this,s);return o.convert(a,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then((function(){throw new Error(s)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,We.getPageSize=function(s,a,l){if(bt(s)==="object"){var c=s;s=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var p,m=(""+l).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+a}var v,S=0,_=0;if(y.hasOwnProperty(m))S=y[m][1]/p,_=y[m][0]/p;else try{S=l[1],_=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",_>S&&(v=_,_=S,S=v);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",S>_&&(v=_,_=S,S=v)}return{width:_,height:S,unit:a,k:p,orientation:s}},t.html=function(s,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(rc):null;var l=new o(a);return a.worker?l:l.from(s).doCallback()}})(We.API),We.API.addJS=function(t){return jd=t,this.internal.events.subscribe("postPutResources",(function(){la=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(la+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Fd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+jd+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){la!==void 0&&Fd!==void 0&&this.internal.out("/Names <</JavaScript "+la+" 0 R>>")})),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,p=[];for(o=0;o<c;o++){var m=n.internal.newObject();p.push(m);var y=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var v=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<p.length;o++)n.internal.write("(page_"+(o+1)+")"+p[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+v+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var l=n.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(We.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,o,s,a){var l,c=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=s||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=(function(m){for(var y,v=256*m.charCodeAt(4)+m.charCodeAt(5),S=m.length,_={width:0,height:0,numcomponents:1},w=4;w<S;w+=2){if(w+=v,e.indexOf(m.charCodeAt(w+1))!==-1){y=256*m.charCodeAt(w+5)+m.charCodeAt(w+6),_={width:256*m.charCodeAt(w+7)+m.charCodeAt(w+8),height:y,numcomponents:m.charCodeAt(w+9)};break}v=256*m.charCodeAt(w+2)+m.charCodeAt(w+3)}return _})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}p={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return p}})(We.API);var so,ca,Ud,Bd,qd,ty=(function(){var t,e,n;function r(o){var s,a,l,c,p,m,y,v,S,_,w,N,A,I;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(s=this.readUInt32(),S=(function(){var D,M;for(M=[],D=0;D<4;++D)M.push(String.fromCharCode(this.data[this.pos++]));return M}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),c=this.readUInt16()||100,m.delay=1e3*p/c,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(S==="fdAT"&&(this.pos+=4,s-=4),o=(m!=null?m.data:void 0)||this.imgData,N=0;0<=s?N<s:N>s;0<=s?++N:--N)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((_=l-this.transparency.indexed.length)>0)for(A=0;0<=_?A<_:A>_;0<=_?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":y=(w=this.read(s)).indexOf(0),v=String.fromCharCode.apply(String,w.slice(0,y)),this.text[v]=String.fromCharCode.apply(String,w.slice(y+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(I=this.colorType)===4||I===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var s,a;for(a=[],s=0;0<=o?s<o:s>o;0<=o?++s:--s)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var s=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*s),l=0,c=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function p(m,y,v,S){var _,w,N,A,I,D,M,T,k,R,$,q,E,L,B,z,ne,H,F,G,Z,J=Math.ceil((c.width-m)/v),ie=Math.ceil((c.height-y)/S),P=c.width==J&&c.height==ie;for(L=s*J,q=P?a:new Uint8Array(L*ie),D=o.length,E=0,w=0;E<ie&&l<D;){switch(o[l++]){case 0:for(A=ne=0;ne<L;A=ne+=1)q[w++]=o[l++];break;case 1:for(A=H=0;H<L;A=H+=1)_=o[l++],I=A<s?0:q[w-s],q[w++]=(_+I)%256;break;case 2:for(A=F=0;F<L;A=F+=1)_=o[l++],N=(A-A%s)/s,B=E&&q[(E-1)*L+N*s+A%s],q[w++]=(B+_)%256;break;case 3:for(A=G=0;G<L;A=G+=1)_=o[l++],N=(A-A%s)/s,I=A<s?0:q[w-s],B=E&&q[(E-1)*L+N*s+A%s],q[w++]=(_+Math.floor((I+B)/2))%256;break;case 4:for(A=Z=0;Z<L;A=Z+=1)_=o[l++],N=(A-A%s)/s,I=A<s?0:q[w-s],E===0?B=z=0:(B=q[(E-1)*L+N*s+A%s],z=N&&q[(E-1)*L+(N-1)*s+A%s]),M=I+B-z,T=Math.abs(M-I),R=Math.abs(M-B),$=Math.abs(M-z),k=T<=R&&T<=$?I:R<=$?B:z,q[w++]=(_+k)%256;break;default:throw new Error("Invalid filter algorithm: "+o[l-1])}if(!P){var O=((y+E*S)*c.width+m)*s,K=E*L;for(A=0;A<J;A+=1){for(var Q=0;Q<s;Q+=1)a[O++]=q[K++];O+=(v-1)*s}}E++}}return o=Lv(o),c.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),a},r.prototype.decodePalette=function(){var o,s,a,l,c,p,m,y,v;for(a=this.palette,p=this.transparency.indexed||[],c=new Uint8Array((p.length||0)+a.length),l=0,o=0,s=m=0,y=a.length;m<y;s=m+=3)c[l++]=a[s],c[l++]=a[s+1],c[l++]=a[s+2],c[l++]=(v=p[o++])!=null?v:255;return c},r.prototype.copyToImageData=function(o,s){var a,l,c,p,m,y,v,S,_,w,N;if(l=this.colors,_=null,a=this.hasAlphaChannel,this.palette.length&&(_=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),l=4,a=!0),S=(c=o.data||o).length,m=_||s,p=y=0,l===1)for(;p<S;)v=_?4*s[p/4]:y,w=m[v++],c[p++]=w,c[p++]=w,c[p++]=w,c[p++]=a?m[v++]:255,y=v;else for(;p<S;)v=_?4*s[p/4]:y,c[p++]=m[v++],c[p++]=m[v++],c[p++]=m[v++],c[p++]=a?m[v++]:255,y=v},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(Je)==="[object Window]"){try{e=Je.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(o){var s;if(i()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var s,a,l,c,p,m,y,v;if(this.animation){for(v=[],a=p=0,m=(y=this.animation.frames).length;p<m;a=++p)s=y[a],l=o.createImageData(s.width,s.height),c=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,c),s.imageData=l,v.push(s.image=t(l));return v}},r.prototype.renderFrame=function(o,s){var a,l,c;return a=(l=this.animation.frames)[s],c=l[s-1],s===0&&o.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?o.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&o.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&o.clearRect(a.xOffset,a.yOffset,a.width,a.height),o.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(o){var s,a,l,c,p,m,y=this;return a=0,m=this.animation,c=m.numFrames,l=m.frames,p=m.numPlays,(s=function(){var v,S;if(v=a++%c,S=l[v],y.renderFrame(o,v),c>1&&a/c<p)return y.animation._timeout=setTimeout(s,S.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var s,a;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,s=o.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(a=s.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),s.putImageData(a,0,0))},r})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ny(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,s=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;o&&(a=e,l=s,e+=3*s);var c=!0,p=[],m=0,y=null,v=0,S=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,S=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=t[e++];m=t[e++]|t[e++]<<8,y=t[e++],(1&_)==0&&(y=null),v=_>>2&7,e++;break;case 254:for(;;){if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var w=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,D=t[e++],M=D>>6&1,T=1<<(7&D)+1,k=a,R=l,$=!1;D>>7&&($=!0,k=e,R=T,e+=3*T);var q=e;for(e++;;){var E;if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}p.push({x:w,y:N,width:A,height:I,has_local_palette:$,palette_offset:k,palette_size:R,data_offset:q,data_length:e-q,transparent_index:y,interlaced:!!M,delay:m,disposal:v});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return S},this.frameInfo=function(L){if(L<0||L>=p.length)throw new Error("Frame index out of range.");return p[L]},this.decodeAndBlitFrameBGRA=function(L,B){var z=this.frameInfo(L),ne=z.width*z.height,H=new Uint8Array(ne);Od(t,z.data_offset,H,ne);var F=z.palette_offset,G=z.transparent_index;G===null&&(G=256);var Z=z.width,J=n-Z,ie=Z,P=4*(z.y*n+z.x),O=4*((z.y+z.height)*n+z.x),K=P,Q=4*J;z.interlaced===!0&&(Q+=4*n*7);for(var te=8,se=0,de=H.length;se<de;++se){var pe=H[se];if(ie===0&&(ie=Z,(K+=Q)>=O&&(Q=4*J+4*n*(te-1),K=P+(Z+J)*(te<<1),te>>=1)),pe===G)K+=4;else{var _e=t[F+3*pe],Ce=t[F+3*pe+1],Ee=t[F+3*pe+2];B[K++]=Ee,B[K++]=Ce,B[K++]=_e,B[K++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(L,B){var z=this.frameInfo(L),ne=z.width*z.height,H=new Uint8Array(ne);Od(t,z.data_offset,H,ne);var F=z.palette_offset,G=z.transparent_index;G===null&&(G=256);var Z=z.width,J=n-Z,ie=Z,P=4*(z.y*n+z.x),O=4*((z.y+z.height)*n+z.x),K=P,Q=4*J;z.interlaced===!0&&(Q+=4*n*7);for(var te=8,se=0,de=H.length;se<de;++se){var pe=H[se];if(ie===0&&(ie=Z,(K+=Q)>=O&&(Q=4*J+4*n*(te-1),K=P+(Z+J)*(te<<1),te>>=1)),pe===G)K+=4;else{var _e=t[F+3*pe],Ce=t[F+3*pe+1],Ee=t[F+3*pe+2];B[K++]=_e,B[K++]=Ce,B[K++]=Ee,B[K++]=255}--ie}}}function Od(t,e,n,r){for(var i=t[e++],o=1<<i,s=o+1,a=s+1,l=i+1,c=(1<<l)-1,p=0,m=0,y=0,v=t[e++],S=new Int32Array(4096),_=null;;){for(;p<16&&v!==0;)m|=t[e++]<<p,p+=8,v===1?v=t[e++]:--v;if(p<l)break;var w=m&c;if(m>>=l,p-=l,w!==o){if(w===s)break;for(var N=w<a?w:_,A=0,I=N;I>o;)I=S[I]>>8,++A;var D=I;if(y+A+(N!==w?1:0)>r)return void At.log("Warning, gif stream longer than expected.");n[y++]=D;var M=y+=A;for(N!==w&&(n[y++]=D),I=N;A--;)I=S[I],n[--M]=255&I,I>>=8;_!==null&&a<4096&&(S[a++]=_<<8|D,a>=c+1&&l<12&&(++l,c=c<<1|1)),_=w}else a=s+1,c=(1<<(l=i+1))-1,_=null}return y!==r&&At.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function El(t){var e,n,r,i,o,s=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),p=new Array(64),m=new Array(65535),y=new Array(65535),v=new Array(64),S=new Array(64),_=[],w=0,N=7,A=new Array(64),I=new Array(64),D=new Array(64),M=new Array(256),T=new Array(2048),k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(P,O){for(var K=0,Q=0,te=new Array,se=1;se<=16;se++){for(var de=1;de<=P[se];de++)te[O[Q]]=[],te[O[Q]][0]=K,te[O[Q]][1]=se,Q++,K++;K*=2}return te}function F(P){for(var O=P[0],K=P[1]-1;K>=0;)O&1<<K&&(w|=1<<N),K--,--N<0&&(w==255?(G(255),G(0)):G(w),N=7,w=0)}function G(P){_.push(P)}function Z(P){G(P>>8&255),G(255&P)}function J(P,O,K,Q,te){for(var se,de=te[0],pe=te[240],_e=(function(ke,Pe){var Fe,Me,Ve,Qe,ot,st,dt,wt,Ye,lt,je=0;for(Ye=0;Ye<8;++Ye){Fe=ke[je],Me=ke[je+1],Ve=ke[je+2],Qe=ke[je+3],ot=ke[je+4],st=ke[je+5],dt=ke[je+6];var nn=Fe+(wt=ke[je+7]),ht=Fe-wt,qn=Me+dt,St=Me-dt,It=Ve+st,or=Ve-st,mt=Qe+ot,ai=Qe-ot,Pt=nn+mt,On=nn-mt,xr=qn+It,Lt=qn-It;ke[je]=Pt+xr,ke[je+4]=Pt-xr;var et=.707106781*(Lt+On);ke[je+2]=On+et,ke[je+6]=On-et;var vt=.382683433*((Pt=ai+or)-(Lt=St+ht)),li=.5411961*Pt+vt,Qt=1.306562965*Lt+vt,sr=.707106781*(xr=or+St),ar=ht+sr,$e=ht-sr;ke[je+5]=$e+li,ke[je+3]=$e-li,ke[je+1]=ar+Qt,ke[je+7]=ar-Qt,je+=8}for(je=0,Ye=0;Ye<8;++Ye){Fe=ke[je],Me=ke[je+8],Ve=ke[je+16],Qe=ke[je+24],ot=ke[je+32],st=ke[je+40],dt=ke[je+48];var Hn=Fe+(wt=ke[je+56]),lr=Fe-wt,vn=Me+dt,Wt=Me-dt,Ht=Ve+st,_n=Ve-st,Ei=Qe+ot,br=Qe-ot,Vn=Hn+Ei,Gn=Hn-Ei,zn=vn+Ht,cr=vn-Ht;ke[je]=Vn+zn,ke[je+32]=Vn-zn;var En=.707106781*(cr+Gn);ke[je+16]=Gn+En,ke[je+48]=Gn-En;var ur=.382683433*((Vn=br+_n)-(cr=Wt+lr)),ci=.5411961*Vn+ur,Pi=1.306562965*cr+ur,Li=.707106781*(zn=_n+Wt),Ri=lr+Li,Mi=lr-Li;ke[je+40]=Mi+ci,ke[je+24]=Mi-ci,ke[je+8]=Ri+Pi,ke[je+56]=Ri-Pi,je++}for(Ye=0;Ye<64;++Ye)lt=ke[Ye]*Pe[Ye],v[Ye]=lt>0?lt+.5|0:lt-.5|0;return v})(P,O),Ce=0;Ce<64;++Ce)S[k[Ce]]=_e[Ce];var Ee=S[0]-K;K=S[0],Ee==0?F(Q[0]):(F(Q[y[se=32767+Ee]]),F(m[se]));for(var Ie=63;Ie>0&&S[Ie]==0;)Ie--;if(Ie==0)return F(de),K;for(var He,be=1;be<=Ie;){for(var oe=be;S[be]==0&&be<=Ie;)++be;var Ke=be-oe;if(Ke>=16){He=Ke>>4;for(var Oe=1;Oe<=He;++Oe)F(pe);Ke&=15}se=32767+S[be],F(te[(Ke<<4)+y[se]]),F(m[se]),be++}return Ie!=63&&F(de),K}function ie(P){P=Math.min(Math.max(P,1),100),o!=P&&((function(O){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var te=s((K[Q]*O+50)/100);te=Math.min(Math.max(te,1),255),a[k[Q]]=te}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var pe=s((se[de]*O+50)/100);pe=Math.min(Math.max(pe,1),255),l[k[de]]=pe}for(var _e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,Ee=0;Ee<8;Ee++)for(var Ie=0;Ie<8;Ie++)c[Ce]=1/(a[k[Ce]]*_e[Ee]*_e[Ie]*8),p[Ce]=1/(l[k[Ce]]*_e[Ee]*_e[Ie]*8),Ce++})(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),o=P)}this.encode=function(P,O){O&&ie(O),_=new Array,w=0,N=7,Z(65496),Z(65504),Z(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),Z(1),Z(1),G(0),G(0),(function(){Z(65499),Z(132),G(0);for(var Me=0;Me<64;Me++)G(a[Me]);G(1);for(var Ve=0;Ve<64;Ve++)G(l[Ve])})(),(function(Me,Ve){Z(65472),Z(17),G(8),Z(Ve),Z(Me),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)})(P.width,P.height),(function(){Z(65476),Z(418),G(0);for(var Me=0;Me<16;Me++)G(R[Me+1]);for(var Ve=0;Ve<=11;Ve++)G($[Ve]);G(16);for(var Qe=0;Qe<16;Qe++)G(q[Qe+1]);for(var ot=0;ot<=161;ot++)G(E[ot]);G(1);for(var st=0;st<16;st++)G(L[st+1]);for(var dt=0;dt<=11;dt++)G(B[dt]);G(17);for(var wt=0;wt<16;wt++)G(z[wt+1]);for(var Ye=0;Ye<=161;Ye++)G(ne[Ye])})(),Z(65498),Z(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var K=0,Q=0,te=0;w=0,N=7,this.encode.displayName="_encode_";for(var se,de,pe,_e,Ce,Ee,Ie,He,be,oe=P.data,Ke=P.width,Oe=P.height,ke=4*Ke,Pe=0;Pe<Oe;){for(se=0;se<ke;){for(Ce=ke*Pe+se,Ie=-1,He=0,be=0;be<64;be++)Ee=Ce+(He=be>>3)*ke+(Ie=4*(7&be)),Pe+He>=Oe&&(Ee-=ke*(Pe+1+He-Oe)),se+Ie>=ke&&(Ee-=se+Ie-ke+4),de=oe[Ee++],pe=oe[Ee++],_e=oe[Ee++],A[be]=(T[de]+T[pe+256>>0]+T[_e+512>>0]>>16)-128,I[be]=(T[de+768>>0]+T[pe+1024>>0]+T[_e+1280>>0]>>16)-128,D[be]=(T[de+1280>>0]+T[pe+1536>>0]+T[_e+1792>>0]>>16)-128;K=J(A,c,K,e,r),Q=J(I,p,Q,n,i),te=J(D,p,te,n,i),se+=32}Pe+=8}if(N>=0){var Fe=[];Fe[1]=N+1,Fe[0]=(1<<N+1)-1,F(Fe)}return Z(65497),new Uint8Array(_)},t=t||50,(function(){for(var P=String.fromCharCode,O=0;O<256;O++)M[O]=P(O)})(),e=H(R,$),n=H(L,B),r=H(q,E),i=H(z,ne),(function(){for(var P=1,O=2,K=1;K<=15;K++){for(var Q=P;Q<O;Q++)y[32767+Q]=K,m[32767+Q]=[],m[32767+Q][1]=K,m[32767+Q][0]=Q;for(var te=-(O-1);te<=-P;te++)y[32767+te]=K,m[32767+te]=[],m[32767+te][1]=K,m[32767+te][0]=O-1+te;P<<=1,O<<=1}})(),(function(){for(var P=0;P<256;P++)T[P]=19595*P,T[P+256>>0]=38470*P,T[P+512>>0]=7471*P+32768,T[P+768>>0]=-11059*P,T[P+1024>>0]=-21709*P,T[P+1280>>0]=32768*P+8421375,T[P+1536>>0]=-27439*P,T[P+1792>>0]=-5329*P})(),ie(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Zn(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Hd(t){function e(R){if(!R)throw Error("assert :P")}function n(R,$,q){for(var E=0;4>E;E++)if(R[$+E]!=q.charCodeAt(E))return!0;return!1}function r(R,$,q,E,L){for(var B=0;B<L;B++)R[$+B]=q[E+B]}function i(R,$,q,E){for(var L=0;L<E;L++)R[$+L]=q}function o(R){return new Int32Array(R)}function s(R,$){for(var q=[],E=0;E<R;E++)q.push(new $);return q}function a(R,$){var q=[];return(function E(L,B,z){for(var ne=z[B],H=0;H<ne&&(L.push(z.length>B+1?[]:new $),!(z.length<B+1));H++)E(L[H],B+1,z)})(q,0,R),q}var l=function(){var R=this;function $(d,g){for(var b=1<<g-1>>>0;d&b;)b>>>=1;return b?(d&b-1)+b:d}function q(d,g,b,C,j){e(!(C%b));do d[g+(C-=b)]=j;while(0<C)}function E(d,g,b,C,j){if(e(2328>=j),512>=j)var V=o(512);else if((V=o(j))==null)return 0;return(function(W,Y,X,ee,le,ge){var me,fe,Se=Y,ye=1<<X,ce=o(16),ue=o(16);for(e(le!=0),e(ee!=null),e(W!=null),e(0<X),fe=0;fe<le;++fe){if(15<ee[fe])return 0;++ce[ee[fe]]}if(ce[0]==le)return 0;for(ue[1]=0,me=1;15>me;++me){if(ce[me]>1<<me)return 0;ue[me+1]=ue[me]+ce[me]}for(fe=0;fe<le;++fe)me=ee[fe],0<ee[fe]&&(ge[ue[me]++]=fe);if(ue[15]==1)return(ee=new L).g=0,ee.value=ge[0],q(W,Se,1,ye,ee),ye;var we,Ae=-1,Ne=ye-1,Be=0,Le=1,ze=1,Re=1<<X;for(fe=0,me=1,le=2;me<=X;++me,le<<=1){if(Le+=ze<<=1,0>(ze-=ce[me]))return 0;for(;0<ce[me];--ce[me])(ee=new L).g=me,ee.value=ge[fe++],q(W,Se+Be,le,Re,ee),Be=$(Be,me)}for(me=X+1,le=2;15>=me;++me,le<<=1){if(Le+=ze<<=1,0>(ze-=ce[me]))return 0;for(;0<ce[me];--ce[me]){if(ee=new L,(Be&Ne)!=Ae){for(Se+=Re,we=1<<(Ae=me)-X;15>Ae&&!(0>=(we-=ce[Ae]));)++Ae,we<<=1;ye+=Re=1<<(we=Ae-X),W[Y+(Ae=Be&Ne)].g=we+X,W[Y+Ae].value=Se-Y-Ae}ee.g=me-X,ee.value=ge[fe++],q(W,Se+(Be>>X),le,Re,ee),Be=$(Be,me)}}return Le!=2*ue[15]-1?0:ye})(d,g,b,C,j,V)}function L(){this.value=this.g=0}function B(){this.value=this.g=0}function z(){this.G=s(5,L),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(en,B)}function ne(d,g,b,C){e(d!=null),e(g!=null),e(2147483648>C),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=g,d.pa=b,d.Jd=g,d.Yc=b+C,d.Zc=4<=C?b+C-4+1:b,se(d)}function H(d,g){for(var b=0;0<g--;)b|=pe(d,128)<<g;return b}function F(d,g){var b=H(d,g);return de(d)?-b:b}function G(d,g,b,C){var j,V=0;for(e(d!=null),e(g!=null),e(4294967288>C),d.Sb=C,d.Ra=0,d.u=0,d.h=0,4<C&&(C=4),j=0;j<C;++j)V+=g[b+j]<<8*j;d.Ra=V,d.bb=C,d.oa=g,d.pa=b}function Z(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Yi-8>>>0,++d.bb,d.u-=8;K(d)&&(d.h=1,d.u=0)}function J(d,g){if(e(0<=g),!d.h&&g<=Ji){var b=O(d)&$i[g];return d.u+=g,Z(d),b}return d.h=1,d.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function O(d){return d.Ra>>>(d.u&Yi-1)>>>0}function K(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Yi}function Q(d,g){d.u=g,d.h=K(d)}function te(d){d.u>=Uo&&(e(d.u>=Uo),Z(d))}function se(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function de(d){return H(d,1)}function pe(d,g){var b=d.Ca;0>d.b&&se(d);var C=d.b,j=b*g>>>8,V=(d.I>>>C>j)+0;for(V?(b-=j,d.I-=j+1<<C>>>0):b=j+1,C=b,j=0;256<=C;)j+=8,C>>=8;return C=7^j+xn[C],d.b-=C,d.Ca=(b<<C)-1,V}function _e(d,g,b){d[g+0]=b>>24&255,d[g+1]=b>>16&255,d[g+2]=b>>8&255,d[g+3]=b>>0&255}function Ce(d,g){return d[g+0]<<0|d[g+1]<<8}function Ee(d,g){return Ce(d,g)|d[g+2]<<16}function Ie(d,g){return Ce(d,g)|Ce(d,g+2)<<16}function He(d,g){var b=1<<g;return e(d!=null),e(0<g),d.X=o(b),d.X==null?0:(d.Mb=32-g,d.Xa=g,1)}function be(d,g){e(d!=null),e(g!=null),e(d.Xa==g.Xa),r(g.X,0,d.X,0,1<<g.Xa)}function oe(){this.X=[],this.Xa=this.Mb=0}function Ke(d,g,b,C){e(b!=null),e(C!=null);var j=b[0],V=C[0];return j==0&&(j=(d*V+g/2)/g),V==0&&(V=(g*j+d/2)/d),0>=j||0>=V?0:(b[0]=j,C[0]=V,1)}function Oe(d,g){return d+(1<<g)-1>>>g}function ke(d,g){return((4278255360&d)+(4278255360&g)>>>0&4278255360)+((16711935&d)+(16711935&g)>>>0&16711935)>>>0}function Pe(d,g){R[g]=function(b,C,j,V,W,Y,X){var ee;for(ee=0;ee<W;++ee){var le=R[d](Y[X+ee-1],j,V+ee);Y[X+ee]=ke(b[C+ee],le)}}}function Fe(){this.ud=this.hd=this.jd=0}function Me(d,g){return((4278124286&(d^g))>>>1)+(d&g)>>>0}function Ve(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Qe(d,g){return Ve(d+(d-g+.5>>1))}function ot(d,g,b){return Math.abs(g-b)-Math.abs(d-b)}function st(d,g,b,C,j,V,W){for(C=V[W-1],b=0;b<j;++b)V[W+b]=C=ke(d[g+b],C)}function dt(d,g,b,C,j){var V;for(V=0;V<b;++V){var W=d[g+V],Y=W>>8&255,X=16711935&(X=(X=16711935&W)+((Y<<16)+Y));C[j+V]=(4278255360&W)+X>>>0}}function wt(d,g){g.jd=d>>0&255,g.hd=d>>8&255,g.ud=d>>16&255}function Ye(d,g,b,C,j,V){var W;for(W=0;W<C;++W){var Y=g[b+W],X=Y>>>8,ee=Y,le=255&(le=(le=Y>>>16)+((d.jd<<24>>24)*(X<<24>>24)>>>5));ee=255&(ee=(ee=ee+((d.hd<<24>>24)*(X<<24>>24)>>>5))+((d.ud<<24>>24)*(le<<24>>24)>>>5)),j[V+W]=(4278255360&Y)+(le<<16)+ee}}function lt(d,g,b,C,j){R[g]=function(V,W,Y,X,ee,le,ge,me,fe){for(X=ge;X<me;++X)for(ge=0;ge<fe;++ge)ee[le++]=j(Y[C(V[W++])])},R[d]=function(V,W,Y,X,ee,le,ge){var me=8>>V.b,fe=V.Ea,Se=V.K[0],ye=V.w;if(8>me)for(V=(1<<V.b)-1,ye=(1<<me)-1;W<Y;++W){var ce,ue=0;for(ce=0;ce<fe;++ce)ce&V||(ue=C(X[ee++])),le[ge++]=j(Se[ue&ye]),ue>>=me}else R["VP8LMapColor"+b](X,ee,Se,ye,le,ge,W,Y,fe)}}function je(d,g,b,C,j){for(b=g+b;g<b;){var V=d[g++];C[j++]=V>>16&255,C[j++]=V>>8&255,C[j++]=V>>0&255}}function nn(d,g,b,C,j){for(b=g+b;g<b;){var V=d[g++];C[j++]=V>>16&255,C[j++]=V>>8&255,C[j++]=V>>0&255,C[j++]=V>>24&255}}function ht(d,g,b,C,j){for(b=g+b;g<b;){var V=(W=d[g++])>>16&240|W>>12&15,W=W>>0&240|W>>28&15;C[j++]=V,C[j++]=W}}function qn(d,g,b,C,j){for(b=g+b;g<b;){var V=(W=d[g++])>>16&248|W>>13&7,W=W>>5&224|W>>3&31;C[j++]=V,C[j++]=W}}function St(d,g,b,C,j){for(b=g+b;g<b;){var V=d[g++];C[j++]=V>>0&255,C[j++]=V>>8&255,C[j++]=V>>16&255}}function It(d,g,b,C,j,V){if(V==0)for(b=g+b;g<b;)_e(C,((V=d[g++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),j+=32;else r(C,j,d,g,b)}function or(d,g){R[g][0]=R[d+"0"],R[g][1]=R[d+"1"],R[g][2]=R[d+"2"],R[g][3]=R[d+"3"],R[g][4]=R[d+"4"],R[g][5]=R[d+"5"],R[g][6]=R[d+"6"],R[g][7]=R[d+"7"],R[g][8]=R[d+"8"],R[g][9]=R[d+"9"],R[g][10]=R[d+"10"],R[g][11]=R[d+"11"],R[g][12]=R[d+"12"],R[g][13]=R[d+"13"],R[g][14]=R[d+"0"],R[g][15]=R[d+"0"]}function mt(d){return d==ol||d==sl||d==Bs||d==al}function ai(){this.eb=[],this.size=this.A=this.fb=0}function Pt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function On(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ai,this.f.kb=new Pt,this.sd=null}function xr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function et(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function vt(d,g){var b=d.T,C=g.ba.f.RGBA,j=C.eb,V=C.fb+d.ka*C.A,W=Fn[g.ba.S],Y=d.y,X=d.O,ee=d.f,le=d.N,ge=d.ea,me=d.W,fe=g.cc,Se=g.dc,ye=g.Mc,ce=g.Nc,ue=d.ka,we=d.ka+d.T,Ae=d.U,Ne=Ae+1>>1;for(ue==0?W(Y,X,null,null,ee,le,ge,me,ee,le,ge,me,j,V,null,null,Ae):(W(g.ec,g.fc,Y,X,fe,Se,ye,ce,ee,le,ge,me,j,V-C.A,j,V,Ae),++b);ue+2<we;ue+=2)fe=ee,Se=le,ye=ge,ce=me,le+=d.Rc,me+=d.Rc,V+=2*C.A,W(Y,(X+=2*d.fa)-d.fa,Y,X,fe,Se,ye,ce,ee,le,ge,me,j,V-C.A,j,V,Ae);return X+=d.fa,d.j+we<d.o?(r(g.ec,g.fc,Y,X,Ae),r(g.cc,g.dc,ee,le,Ne),r(g.Mc,g.Nc,ge,me,Ne),b--):1&we||W(Y,X,null,null,ee,le,ge,me,ee,le,ge,me,j,V+C.A,null,null,Ae),b}function li(d,g,b){var C=d.F,j=[d.J];if(C!=null){var V=d.U,W=g.ba.S,Y=W==Us||W==Bs;g=g.ba.f.RGBA;var X=[0],ee=d.ka;X[0]=d.T,d.Kb&&(ee==0?--X[0]:(--ee,j[0]-=d.width),d.j+d.ka+d.T==d.o&&(X[0]=d.o-d.j-ee));var le=g.eb;ee=g.fb+ee*g.A,d=Tt(C,j[0],d.width,V,X,le,ee+(Y?0:3),g.A),e(b==X),d&&mt(W)&&Mn(le,ee,Y,V,X,g.A)}return 0}function Qt(d){var g=d.ma,b=g.ba.S,C=11>b,j=b==Fs||b==js||b==Us||b==il||b==12||mt(b);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Fo(g.Oa,d,j?11:12))return 0;if(j&&mt(b)&&Te(),d.da)alert("todo:use_scaling");else{if(C){if(g.Ib=et,d.Kb){if(b=d.U+1>>1,g.memory=o(d.U+2*b),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+d.U,g.Mc=g.cc,g.Nc=g.dc+b,g.Ib=vt,Te()}}else alert("todo:EmitYUV");j&&(g.Jb=li,C&&he())}if(C&&!Tc){for(d=0;256>d;++d)Ch[d]=89858*(d-128)+Os>>qs,Ih[d]=-22014*(d-128)+Os,kh[d]=-45773*(d-128),Th[d]=113618*(d-128)+Os>>qs;for(d=zo;d<ul;++d)g=76283*(d-16)+Os>>qs,Eh[d-zo]=An(g,255),Ph[d-zo]=An(g+8>>4,15);Tc=1}return 1}function sr(d){var g=d.ma,b=d.U,C=d.T;return e(!(1&d.ka)),0>=b||0>=C?0:(b=g.Ib(d,g),g.Jb!=null&&g.Jb(d,g,b),g.Dc+=b,1)}function ar(d){d.ma.memory=null}function $e(d,g,b,C){return J(d,8)!=47?0:(g[0]=J(d,14)+1,b[0]=J(d,14)+1,C[0]=J(d,1),J(d,3)!=0?0:!d.h)}function Hn(d,g){if(4>d)return d+1;var b=d-2>>1;return(2+(1&d)<<b)+J(g,b)+1}function lr(d,g){return 120<g?g-120:1<=(b=((b=fh[g-1])>>4)*d+(8-(15&b)))?b:1;var b}function vn(d,g,b){var C=O(b),j=d[g+=255&C].g-8;return 0<j&&(Q(b,b.u+8),C=O(b),g+=d[g].value,g+=C&(1<<j)-1),Q(b,b.u+d[g].g),d[g].value}function Wt(d,g,b){return b.g+=d.g,b.value+=d.value<<g>>>0,e(8>=b.g),d.g}function Ht(d,g,b){var C=d.xc;return e((g=C==0?0:d.vc[d.md*(b>>C)+(g>>C)])<d.Wb),d.Ya[g]}function _n(d,g,b,C){var j=d.ab,V=d.c*g,W=d.C;g=W+g;var Y=b,X=C;for(C=d.Ta,b=d.Ua;0<j--;){var ee=d.gc[j],le=W,ge=g,me=Y,fe=X,Se=(X=C,Y=b,ee.Ea);switch(e(le<ge),e(ge<=ee.nc),ee.hc){case 2:Is(me,fe,(ge-le)*Se,X,Y);break;case 0:var ye=le,ce=ge,ue=X,we=Y,Ae=(Re=ee).Ea;ye==0&&(nl(me,fe,null,null,1,ue,we),st(me,fe+1,0,0,Ae-1,ue,we+1),fe+=Ae,we+=Ae,++ye);for(var Ne=1<<Re.b,Be=Ne-1,Le=Oe(Ae,Re.b),ze=Re.K,Re=Re.w+(ye>>Re.b)*Le;ye<ce;){var gt=ze,yt=Re,ft=1;for(Bo(me,fe,ue,we-Ae,1,ue,we);ft<Ae;){var ct=(ft&~Be)+Ne;ct>Ae&&(ct=Ae),(0,Ur[gt[yt++]>>8&15])(me,fe+ +ft,ue,we+ft-Ae,ct-ft,ue,we+ft),ft=ct}fe+=Ae,we+=Ae,++ye&Be||(Re+=Le)}ge!=ee.nc&&r(X,Y-Se,X,Y+(ge-le-1)*Se,Se);break;case 1:for(Se=me,ce=fe,Ae=(me=ee.Ea)-(we=me&~(ue=(fe=1<<ee.b)-1)),ye=Oe(me,ee.b),Ne=ee.K,ee=ee.w+(le>>ee.b)*ye;le<ge;){for(Be=Ne,Le=ee,ze=new Fe,Re=ce+we,gt=ce+me;ce<Re;)wt(Be[Le++],ze),pi(ze,Se,ce,fe,X,Y),ce+=fe,Y+=fe;ce<gt&&(wt(Be[Le++],ze),pi(ze,Se,ce,Ae,X,Y),ce+=Ae,Y+=Ae),++le&ue||(ee+=ye)}break;case 3:if(me==X&&fe==Y&&0<ee.b){for(ce=X,me=Se=Y+(ge-le)*Se-(we=(ge-le)*Oe(ee.Ea,ee.b)),fe=X,ue=Y,ye=[],we=(Ae=we)-1;0<=we;--we)ye[we]=fe[ue+we];for(we=Ae-1;0<=we;--we)ce[me+we]=ye[we];Pn(ee,le,ge,X,Se,X,Y)}else Pn(ee,le,ge,me,fe,X,Y)}Y=C,X=b}X!=b&&r(C,b,Y,X,V)}function Ei(d,g){var b=d.V,C=d.Ba+d.c*d.C,j=g-d.C;if(e(g<=d.l.o),e(16>=j),0<j){var V=d.l,W=d.Ta,Y=d.Ua,X=V.width;if(_n(d,j,b,C),j=Y=[Y],e((b=d.C)<(C=g)),e(V.v<V.va),C>V.o&&(C=V.o),b<V.j){var ee=V.j-b;b=V.j,j[0]+=ee*X}if(b>=C?b=0:(j[0]+=4*V.v,V.ka=b-V.j,V.U=V.va-V.v,V.T=C-b,b=1),b){if(Y=Y[0],11>(b=d.ca).S){var le=b.f.RGBA,ge=(C=b.S,j=V.U,V=V.T,ee=le.eb,le.A),me=V;for(le=le.fb+d.Ma*le.A;0<me--;){var fe=W,Se=Y,ye=j,ce=ee,ue=le;switch(C){case Ds:bn(fe,Se,ye,ce,ue);break;case Fs:fn(fe,Se,ye,ce,ue);break;case ol:fn(fe,Se,ye,ce,ue),Mn(ce,ue,0,ye,1,0);break;case yc:_r(fe,Se,ye,ce,ue);break;case js:It(fe,Se,ye,ce,ue,1);break;case sl:It(fe,Se,ye,ce,ue,1),Mn(ce,ue,0,ye,1,0);break;case Us:It(fe,Se,ye,ce,ue,0);break;case Bs:It(fe,Se,ye,ce,ue,0),Mn(ce,ue,1,ye,1,0);break;case il:Br(fe,Se,ye,ce,ue);break;case al:Br(fe,Se,ye,ce,ue),Ct(ce,ue,ye,1,0);break;case xc:Sr(fe,Se,ye,ce,ue);break;default:e(0)}Y+=X,le+=ge}d.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=b.height)}}d.C=g,e(d.C<=d.i)}function br(d){var g;if(0<d.ua)return 0;for(g=0;g<d.Wb;++g){var b=d.Ya[g].G,C=d.Ya[g].H;if(0<b[1][C[1]+0].g||0<b[2][C[2]+0].g||0<b[3][C[3]+0].g)return 0}return 1}function Vn(d,g,b,C,j,V){if(d.Z!=0){var W=d.qd,Y=d.rd;for(e(Vr[d.Z]!=null);g<b;++g)Vr[d.Z](W,Y,C,j,C,j,V),W=C,Y=j,j+=V;d.qd=W,d.rd=Y}}function Gn(d,g){var b=d.l.ma,C=b.Z==0||b.Z==1?d.l.j:d.C;if(C=d.C<C?C:d.C,e(g<=d.l.o),g>C){var j=d.l.width,V=b.ca,W=b.tb+j*C,Y=d.V,X=d.Ba+d.c*C,ee=d.gc;e(d.ab==1),e(ee[0].hc==3),Es(ee[0],C,g,Y,X,V,W),Vn(b,C,g,V,W,j)}d.C=d.Ma=g}function zn(d,g,b,C,j,V,W){var Y=d.$/C,X=d.$%C,ee=d.m,le=d.s,ge=b+d.$,me=ge;j=b+C*j;var fe=b+C*V,Se=280+le.ua,ye=d.Pb?Y:16777216,ce=0<le.ua?le.Wa:null,ue=le.wc,we=ge<fe?Ht(le,X,Y):null;e(d.C<V),e(fe<=j);var Ae=!1;e:for(;;){for(;Ae||ge<fe;){var Ne=0;if(Y>=ye){var Be=ge-b;e((ye=d).Pb),ye.wd=ye.m,ye.xd=Be,0<ye.s.ua&&be(ye.s.Wa,ye.s.vb),ye=Y+ph}if(X&ue||(we=Ht(le,X,Y)),e(we!=null),we.Qb&&(g[ge]=we.qb,Ae=!0),!Ae)if(te(ee),we.jc){Ne=ee,Be=g;var Le=ge,ze=we.pd[O(Ne)&en-1];e(we.jc),256>ze.g?(Q(Ne,Ne.u+ze.g),Be[Le]=ze.value,Ne=0):(Q(Ne,Ne.u+ze.g-256),e(256<=ze.value),Ne=ze.value),Ne==0&&(Ae=!0)}else Ne=vn(we.G[0],we.H[0],ee);if(ee.h)break;if(Ae||256>Ne){if(!Ae)if(we.nd)g[ge]=(we.qb|Ne<<8)>>>0;else{if(te(ee),Ae=vn(we.G[1],we.H[1],ee),te(ee),Be=vn(we.G[2],we.H[2],ee),Le=vn(we.G[3],we.H[3],ee),ee.h)break;g[ge]=(Le<<24|Ae<<16|Ne<<8|Be)>>>0}if(Ae=!1,++ge,++X>=C&&(X=0,++Y,W!=null&&Y<=V&&!(Y%16)&&W(d,Y),ce!=null))for(;me<ge;)Ne=g[me++],ce.X[(506832829*Ne&4294967295)>>>ce.Mb]=Ne}else if(280>Ne){if(Ne=Hn(Ne-256,ee),Be=vn(we.G[4],we.H[4],ee),te(ee),Be=lr(C,Be=Hn(Be,ee)),ee.h)break;if(ge-b<Be||j-ge<Ne)break e;for(Le=0;Le<Ne;++Le)g[ge+Le]=g[ge+Le-Be];for(ge+=Ne,X+=Ne;X>=C;)X-=C,++Y,W!=null&&Y<=V&&!(Y%16)&&W(d,Y);if(e(ge<=j),X&ue&&(we=Ht(le,X,Y)),ce!=null)for(;me<ge;)Ne=g[me++],ce.X[(506832829*Ne&4294967295)>>>ce.Mb]=Ne}else{if(!(Ne<Se))break e;for(Ae=Ne-280,e(ce!=null);me<ge;)Ne=g[me++],ce.X[(506832829*Ne&4294967295)>>>ce.Mb]=Ne;Ne=ge,e(!(Ae>>>(Be=ce).Xa)),g[Ne]=Be.X[Ae],Ae=!0}Ae||e(ee.h==K(ee))}if(d.Pb&&ee.h&&ge<j)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&be(d.s.vb,d.s.Wa);else{if(ee.h)break e;W!=null&&W(d,Y>V?V:Y),d.a=0,d.$=ge-b}return 1}return d.a=3,0}function cr(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var g=d.Wa;g!=null&&(g.X=null),d.vb=null,e(d!=null)}function En(){var d=new tl;return d==null?null:(d.a=0,d.xb=Nc,or("Predictor","VP8LPredictors"),or("Predictor","VP8LPredictors_C"),or("PredictorAdd","VP8LPredictorsAdd"),or("PredictorAdd","VP8LPredictorsAdd_C"),Is=dt,pi=Ye,bn=je,fn=nn,Br=ht,Sr=qn,_r=St,R.VP8LMapColor32b=Ki,R.VP8LMapColor8b=Ps,d)}function ur(d,g,b,C,j){var V=1,W=[d],Y=[g],X=C.m,ee=C.s,le=null,ge=0;e:for(;;){if(b)for(;V&&J(X,1);){var me=W,fe=Y,Se=C,ye=1,ce=Se.m,ue=Se.gc[Se.ab],we=J(ce,2);if(Se.Oc&1<<we)V=0;else{switch(Se.Oc|=1<<we,ue.hc=we,ue.Ea=me[0],ue.nc=fe[0],ue.K=[null],++Se.ab,e(4>=Se.ab),we){case 0:case 1:ue.b=J(ce,3)+2,ye=ur(Oe(ue.Ea,ue.b),Oe(ue.nc,ue.b),0,Se,ue.K),ue.K=ue.K[0];break;case 3:var Ae,Ne=J(ce,8)+1,Be=16<Ne?0:4<Ne?1:2<Ne?2:3;if(me[0]=Oe(ue.Ea,Be),ue.b=Be,Ae=ye=ur(Ne,1,0,Se,ue.K)){var Le,ze=Ne,Re=ue,gt=1<<(8>>Re.b),yt=o(gt);if(yt==null)Ae=0;else{var ft=Re.K[0],ct=Re.w;for(yt[0]=Re.K[0][0],Le=1;Le<1*ze;++Le)yt[Le]=ke(ft[ct+Le],yt[Le-1]);for(;Le<4*gt;++Le)yt[Le]=0;Re.K[0]=null,Re.K[0]=yt,Ae=1}}ye=Ae;break;case 2:break;default:e(0)}V=ye}}if(W=W[0],Y=Y[0],V&&J(X,1)&&!(V=1<=(ge=J(X,4))&&11>=ge)){C.a=3;break e}var _t;if(_t=V)t:{var Nt,it,Gt,wn=C,zt=W,Nn=Y,xt=ge,Tn=b,kn=wn.m,Kt=wn.s,tn=[null],pn=1,jn=0,pr=hh[xt];n:for(;;){if(Tn&&J(kn,1)){var Xt=J(kn,3)+2,kr=Oe(zt,Xt),xi=Oe(Nn,Xt),to=kr*xi;if(!ur(kr,xi,0,wn,tn))break n;for(tn=tn[0],Kt.xc=Xt,Nt=0;Nt<to;++Nt){var Gr=tn[Nt]>>8&65535;tn[Nt]=Gr,Gr>=pn&&(pn=Gr+1)}}if(kn.h)break n;for(it=0;5>it;++it){var Mt=bc[it];!it&&0<xt&&(Mt+=1<<xt),jn<Mt&&(jn=Mt)}var dl=s(pn*pr,L),Ec=pn,Pc=s(Ec,z);if(Pc==null)var Vs=null;else e(65536>=Ec),Vs=Pc;var Wo=o(jn);if(Vs==null||Wo==null||dl==null){wn.a=1;break n}var Gs=dl;for(Nt=Gt=0;Nt<pn;++Nt){var Kn=Vs[Nt],no=Kn.G,ro=Kn.H,Lc=0,zs=1,Rc=0;for(it=0;5>it;++it){Mt=bc[it],no[it]=Gs,ro[it]=Gt,!it&&0<xt&&(Mt+=1<<xt);i:{var Ws,fl=Mt,$s=wn,$o=Wo,Mh=Gs,Dh=Gt,hl=0,zr=$s.m,Fh=J(zr,1);if(i($o,0,0,fl),Fh){var jh=J(zr,1)+1,Uh=J(zr,1),Mc=J(zr,Uh==0?1:8);$o[Mc]=1,jh==2&&($o[Mc=J(zr,8)]=1);var Js=1}else{var Dc=o(19),Fc=J(zr,4)+4;if(19<Fc){$s.a=3;var Ys=0;break i}for(Ws=0;Ws<Fc;++Ws)Dc[dh[Ws]]=J(zr,3);var pl=void 0,Jo=void 0,jc=$s,Bh=Dc,Ks=fl,Uc=$o,gl=0,Wr=jc.m,Bc=8,qc=s(128,L);r:for(;E(qc,0,7,Bh,19);){if(J(Wr,1)){var qh=2+2*J(Wr,3);if((pl=2+J(Wr,qh))>Ks)break r}else pl=Ks;for(Jo=0;Jo<Ks&&pl--;){te(Wr);var Oc=qc[0+(127&O(Wr))];Q(Wr,Wr.u+Oc.g);var io=Oc.value;if(16>io)Uc[Jo++]=io,io!=0&&(Bc=io);else{var Oh=io==16,Hc=io-16,Hh=ch[Hc],Vc=J(Wr,lh[Hc])+Hh;if(Jo+Vc>Ks)break r;for(var Vh=Oh?Bc:0;0<Vc--;)Uc[Jo++]=Vh}}gl=1;break r}gl||(jc.a=3),Js=gl}(Js=Js&&!zr.h)&&(hl=E(Mh,Dh,8,$o,fl)),Js&&hl!=0?Ys=hl:($s.a=3,Ys=0)}if(Ys==0)break n;if(zs&&uh[it]==1&&(zs=Gs[Gt].g==0),Lc+=Gs[Gt].g,Gt+=Ys,3>=it){var Yo,ml=Wo[0];for(Yo=1;Yo<Mt;++Yo)Wo[Yo]>ml&&(ml=Wo[Yo]);Rc+=ml}}if(Kn.nd=zs,Kn.Qb=0,zs&&(Kn.qb=(no[3][ro[3]+0].value<<24|no[1][ro[1]+0].value<<16|no[2][ro[2]+0].value)>>>0,Lc==0&&256>no[0][ro[0]+0].value&&(Kn.Qb=1,Kn.qb+=no[0][ro[0]+0].value<<8)),Kn.jc=!Kn.Qb&&6>Rc,Kn.jc){var Xs,Ir=Kn;for(Xs=0;Xs<en;++Xs){var $r=Xs,Jr=Ir.pd[$r],Zs=Ir.G[0][Ir.H[0]+$r];256<=Zs.value?(Jr.g=Zs.g+256,Jr.value=Zs.value):(Jr.g=0,Jr.value=0,$r>>=Wt(Zs,8,Jr),$r>>=Wt(Ir.G[1][Ir.H[1]+$r],16,Jr),$r>>=Wt(Ir.G[2][Ir.H[2]+$r],0,Jr),Wt(Ir.G[3][Ir.H[3]+$r],24,Jr))}}}Kt.vc=tn,Kt.Wb=pn,Kt.Ya=Vs,Kt.yc=dl,_t=1;break t}_t=0}if(!(V=_t)){C.a=3;break e}if(0<ge){if(ee.ua=1<<ge,!He(ee.Wa,ge)){C.a=1,V=0;break e}}else ee.ua=0;var vl=C,Gc=W,Gh=Y,yl=vl.s,xl=yl.xc;if(vl.c=Gc,vl.i=Gh,yl.md=Oe(Gc,xl),yl.wc=xl==0?-1:(1<<xl)-1,b){C.xb=wh;break e}if((le=o(W*Y))==null){C.a=1,V=0;break e}V=(V=zn(C,le,0,W,Y,Y,null))&&!X.h;break e}return V?(j!=null?j[0]=le:(e(le==null),e(b)),C.$=0,b||cr(ee)):cr(ee),V}function ci(d,g){var b=d.c*d.i,C=b+g+16*g;return e(d.c<=g),d.V=o(C),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+b+g,1)}function Pi(d,g){var b=d.C,C=g-b,j=d.V,V=d.Ba+d.c*b;for(e(g<=d.l.o);0<C;){var W=16<C?16:C,Y=d.l.ma,X=d.l.width,ee=X*W,le=Y.ca,ge=Y.tb+X*b,me=d.Ta,fe=d.Ua;_n(d,W,j,V),Ut(me,fe,le,ge,ee),Vn(Y,b,b+W,le,ge,X),C-=W,j+=W*d.c,b+=W}e(b==g),d.C=d.Ma=g}function Li(){this.ub=this.yd=this.td=this.Rb=0}function Ri(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Mi(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function cs(){this.Yb=(function(){var d=[];return(function g(b,C,j){for(var V=j[C],W=0;W<V&&(b.push(j.length>C+1?[]:0),!(j.length<C+1));W++)g(b[W],C+1,j)})(d,0,[3,11]),d})()}function La(){this.jb=o(3),this.Wc=a([4,8],cs),this.Xc=a([4,17],cs)}function Ra(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Di(){this.ld=this.La=this.dd=this.tc=0}function us(){this.Na=this.la=0}function Ma(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bo(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Da(){this.uc=this.M=this.Nb=0,this.wa=Array(new Di),this.Y=0,this.ya=Array(new bo),this.aa=0,this.l=new Fi}function ds(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Fa(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new Li,this.Kc=new Ri,this.ed=new Ra,this.Qa=new Mi,this.Ic=this.$c=this.Aa=0,this.D=new Da,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,ie),this.ia=0,this.pb=s(4,Ma),this.Pa=new La,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ds),this.Hd=0,this.rb=Array(new us),this.sb=0,this.wa=Array(new Di),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bo),this.L=this.aa=0,this.gd=a([4,2],Di),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Fi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ja(){var d=new Fa;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Go||(Go=ps)),d}function Ft(d,g,b){return d.a==0&&(d.a=g,d.sc=b,d.cb=0),0}function fs(d,g,b){return 3<=b&&d[g+0]==157&&d[g+1]==1&&d[g+2]==42}function hs(d,g){if(d==null)return 0;if(d.a=0,d.sc="OK",g==null)return Ft(d,2,"null VP8Io passed to VP8GetHeaders()");var b=g.data,C=g.w,j=g.ha;if(4>j)return Ft(d,7,"Truncated header.");var V=b[C+0]|b[C+1]<<8|b[C+2]<<16,W=d.Od;if(W.Rb=!(1&V),W.td=V>>1&7,W.yd=V>>4&1,W.ub=V>>5,3<W.td)return Ft(d,3,"Incorrect keyframe parameters.");if(!W.yd)return Ft(d,4,"Frame not displayable.");C+=3,j-=3;var Y=d.Kc;if(W.Rb){if(7>j)return Ft(d,7,"cannot parse picture header");if(!fs(b,C,j))return Ft(d,3,"Bad code word");Y.c=16383&(b[C+4]<<8|b[C+3]),Y.Td=b[C+4]>>6,Y.i=16383&(b[C+6]<<8|b[C+5]),Y.Ud=b[C+6]>>6,C+=7,j-=7,d.za=Y.c+15>>4,d.Ub=Y.i+15>>4,g.width=Y.c,g.height=Y.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i((V=d.Pa).jb,0,255,V.jb.length),e((V=d.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,i(V.Zb,0,0,V.Zb.length),i(V.Lb,0,0,V.Lb)}if(W.ub>j)return Ft(d,7,"bad partition length");ne(V=d.m,b,C,W.ub),C+=W.ub,j-=W.ub,W.Rb&&(Y.Ld=de(V),Y.Kd=de(V)),Y=d.Qa;var X,ee=d.Pa;if(e(V!=null),e(Y!=null),Y.Cb=de(V),Y.Cb){if(Y.Bb=de(V),de(V)){for(Y.Fb=de(V),X=0;4>X;++X)Y.Zb[X]=de(V)?F(V,7):0;for(X=0;4>X;++X)Y.Lb[X]=de(V)?F(V,6):0}if(Y.Bb)for(X=0;3>X;++X)ee.jb[X]=de(V)?H(V,8):255}else Y.Bb=0;if(V.Ka)return Ft(d,3,"cannot parse segment header");if((Y=d.ed).zd=de(V),Y.Tb=H(V,6),Y.wb=H(V,3),Y.Pc=de(V),Y.Pc&&de(V)){for(ee=0;4>ee;++ee)de(V)&&(Y.vd[ee]=F(V,6));for(ee=0;4>ee;++ee)de(V)&&(Y.od[ee]=F(V,6))}if(d.L=Y.Tb==0?0:Y.zd?1:2,V.Ka)return Ft(d,3,"cannot parse filter header");var le=j;if(j=X=C,C=X+le,Y=le,d.Xb=(1<<H(d.m,2))-1,le<3*(ee=d.Xb))b=7;else{for(X+=3*ee,Y-=3*ee,le=0;le<ee;++le){var ge=b[j+0]|b[j+1]<<8|b[j+2]<<16;ge>Y&&(ge=Y),ne(d.Jc[+le],b,X,ge),X+=ge,Y-=ge,j+=3}ne(d.Jc[+ee],b,X,Y),b=X<C?0:5}if(b!=0)return Ft(d,b,"cannot parse partitions");for(b=H(X=d.m,7),j=de(X)?F(X,4):0,C=de(X)?F(X,4):0,Y=de(X)?F(X,4):0,ee=de(X)?F(X,4):0,X=de(X)?F(X,4):0,le=d.Qa,ge=0;4>ge;++ge){if(le.Cb){var me=le.Zb[ge];le.Fb||(me+=b)}else{if(0<ge){d.pb[ge]=d.pb[0];continue}me=b}var fe=d.pb[ge];fe.Sc[0]=ll[An(me+j,127)],fe.Sc[1]=cl[An(me+0,127)],fe.Eb[0]=2*ll[An(me+C,127)],fe.Eb[1]=101581*cl[An(me+Y,127)]>>16,8>fe.Eb[1]&&(fe.Eb[1]=8),fe.Qc[0]=ll[An(me+ee,117)],fe.Qc[1]=cl[An(me+X,127)],fe.lc=me+X}if(!W.Rb)return Ft(d,4,"Not a key frame.");for(de(V),W=d.Pa,b=0;4>b;++b){for(j=0;8>j;++j)for(C=0;3>C;++C)for(Y=0;11>Y;++Y)ee=pe(V,xh[b][j][C][Y])?H(V,8):vh[b][j][C][Y],W.Wc[b][j].Yb[C][Y]=ee;for(j=0;17>j;++j)W.Xc[b][j]=W.Wc[b][bh[j]]}return d.kc=de(V),d.kc&&(d.Bd=H(V,8)),d.cb=1}function ps(d,g,b,C,j,V,W){var Y=g[j].Yb[b];for(b=0;16>j;++j){if(!pe(d,Y[b+0]))return j;for(;!pe(d,Y[b+1]);)if(Y=g[++j].Yb[0],b=0,j==16)return 16;var X=g[j+1].Yb;if(pe(d,Y[b+2])){var ee=d,le=0;if(pe(ee,(me=Y)[(ge=b)+3]))if(pe(ee,me[ge+6])){for(Y=0,ge=2*(le=pe(ee,me[ge+8]))+(me=pe(ee,me[ge+9+le])),le=0,me=gh[ge];me[Y];++Y)le+=le+pe(ee,me[Y]);le+=3+(8<<ge)}else pe(ee,me[ge+7])?(le=7+2*pe(ee,165),le+=pe(ee,145)):le=5+pe(ee,159);else le=pe(ee,me[ge+4])?3+pe(ee,me[ge+5]):2;Y=X[2]}else le=1,Y=X[1];X=W+mh[j],0>(ee=d).b&&se(ee);var ge,me=ee.b,fe=(ge=ee.Ca>>1)-(ee.I>>me)>>31;--ee.b,ee.Ca+=fe,ee.Ca|=1,ee.I-=(ge+1&fe)<<me,V[X]=((le^fe)-fe)*C[(0<j)+0]}return 16}function wo(d){var g=d.rb[d.sb-1];g.la=0,g.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function Ua(d,g){if(d==null)return 0;if(g==null)return Ft(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!hs(d,g))return 0;if(e(d.cb),g.ac==null||g.ac(g)){g.ob&&(d.L=0);var b=Hs[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=g.v-b>>4,d.zb=g.j-b>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=g.o+15+b>>4,d.Hb=g.va+15+b>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var C=d.ed;for(b=0;4>b;++b){var j;if(d.Qa.Cb){var V=d.Qa.Lb[b];d.Qa.Fb||(V+=C.Tb)}else V=C.Tb;for(j=0;1>=j;++j){var W=d.gd[b][j],Y=V;if(C.Pc&&(Y+=C.vd[0],j&&(Y+=C.od[0])),0<(Y=0>Y?0:63<Y?63:Y)){var X=Y;0<C.wb&&(X=4<C.wb?X>>2:X>>1)>9-C.wb&&(X=9-C.wb),1>X&&(X=1),W.dd=X,W.tc=2*Y+X,W.ld=40<=Y?2:15<=Y?1:0}else W.tc=0;W.La=j}}}b=0}else Ft(d,6,"Frame setup failed"),b=d.a;if(b=b==0){if(b){d.$c=0,0<d.Aa||(d.Ic=Rh);e:{b=d.Ic,C=4*(X=d.za);var ee=32*X,le=X+1,ge=0<d.L?X*(0<d.Aa?2:1):0,me=(d.Aa==2?2:1)*X;if((W=C+832+(j=3*(16*b+Hs[d.L])/2*ee)+(V=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=W)b=0;else{if(W>d.Vb){if(d.Vb=0,d.Ec=o(W),d.Fc=0,d.Ec==null){b=Ft(d,1,"no memory during frame initialization.");break e}d.Vb=W}W=d.Ec,Y=d.Fc,d.Ac=W,d.Bc=Y,Y+=C,d.Gd=s(ee,ds),d.Hd=0,d.rb=s(le+1,us),d.sb=1,d.wa=ge?s(ge,Di):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=X),e(!0),d.oc=W,d.pc=Y,Y+=832,d.ya=s(me,bo),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=X),d.R=16*X,d.B=8*X,X=(ee=Hs[d.L])*d.R,ee=ee/2*d.B,d.sa=W,d.ta=Y+X,d.qa=d.sa,d.ra=d.ta+16*b*d.R+ee,d.Ha=d.qa,d.Ia=d.ra+8*b*d.B+ee,d.$c=0,Y+=j,d.mb=V?W:null,d.nb=V?Y:null,e(Y+V<=d.Fc+d.Vb),wo(d),i(d.Ac,d.Bc,0,C),b=1}}if(b){if(g.ka=0,g.y=d.sa,g.O=d.ta,g.f=d.qa,g.N=d.ra,g.ea=d.Ha,g.Vd=d.Ia,g.fa=d.R,g.Rc=d.B,g.F=null,g.J=0,!Rs){for(b=-255;255>=b;++b)$t[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)Cr[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)Vo[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)eo[255+b]=0>b?0:255<b?255:b;Rs=1}Xi=Oa,Ar=Ba,qo=ms,hn=qa,Ln=vs,jt=gs,Zi=To,Ls=fi,Oo=el,gi=ko,mi=Qa,qr=Hi,vi=Io,Qi=Cs,yi=As,Or=fr,Ho=Nr,Rn=Za,Yn[0]=dr,Yn[1]=Ha,Yn[2]=Wa,Yn[3]=$a,Yn[4]=bs,Yn[5]=qi,Yn[6]=ws,Yn[7]=_o,Yn[8]=Ya,Yn[9]=Ja,Hr[0]=ys,Hr[1]=Ga,Hr[2]=wr,Hr[3]=Ui,Hr[4]=rn,Hr[5]=za,Hr[6]=xs,Tr[0]=Dr,Tr[1]=Va,Tr[2]=Ka,Tr[3]=Ao,Tr[4]=di,Tr[5]=Xa,Tr[6]=Co,b=1}else b=0}b&&(b=(function(fe,Se){for(fe.M=0;fe.M<fe.Va;++fe.M){var ye,ce=fe.Jc[fe.M&fe.Xb],ue=fe.m,we=fe;for(ye=0;ye<we.za;++ye){var Ae=ue,Ne=we,Be=Ne.Ac,Le=Ne.Bc+4*ye,ze=Ne.zc,Re=Ne.ya[Ne.aa+ye];if(Ne.Qa.Bb?Re.$b=pe(Ae,Ne.Pa.jb[0])?2+pe(Ae,Ne.Pa.jb[2]):pe(Ae,Ne.Pa.jb[1]):Re.$b=0,Ne.kc&&(Re.Ad=pe(Ae,Ne.Bd)),Re.Za=!pe(Ae,145)+0,Re.Za){var gt=Re.Ob,yt=0;for(Ne=0;4>Ne;++Ne){var ft,ct=ze[0+Ne];for(ft=0;4>ft;++ft){ct=yh[Be[Le+ft]][ct];for(var _t=wc[pe(Ae,ct[0])];0<_t;)_t=wc[2*_t+pe(Ae,ct[_t])];ct=-_t,Be[Le+ft]=ct}r(gt,yt,Be,Le,4),yt+=4,ze[0+Ne]=ct}}else ct=pe(Ae,156)?pe(Ae,128)?1:3:pe(Ae,163)?2:0,Re.Ob[0]=ct,i(Be,Le,ct,4),i(ze,0,ct,4);Re.Dd=pe(Ae,142)?pe(Ae,114)?pe(Ae,183)?1:3:2:0}if(we.m.Ka)return Ft(fe,7,"Premature end-of-partition0 encountered.");for(;fe.ja<fe.za;++fe.ja){if(we=ce,Ae=(ue=fe).rb[ue.sb-1],Be=ue.rb[ue.sb+ue.ja],ye=ue.ya[ue.aa+ue.ja],Le=ue.kc?ye.Ad:0)Ae.la=Be.la=0,ye.Za||(Ae.Na=Be.Na=0),ye.Hc=0,ye.Gc=0,ye.ia=0;else{var Nt,it;if(Ae=Be,Be=we,Le=ue.Pa.Xc,ze=ue.ya[ue.aa+ue.ja],Re=ue.pb[ze.$b],Ne=ze.ad,gt=0,yt=ue.rb[ue.sb-1],ct=ft=0,i(Ne,gt,0,384),ze.Za)var Gt=0,wn=Le[3];else{_t=o(16);var zt=Ae.Na+yt.Na;if(zt=Go(Be,Le[1],zt,Re.Eb,0,_t,0),Ae.Na=yt.Na=(0<zt)+0,1<zt)Xi(_t,0,Ne,gt);else{var Nn=_t[0]+3>>3;for(_t=0;256>_t;_t+=16)Ne[gt+_t]=Nn}Gt=1,wn=Le[0]}var xt=15&Ae.la,Tn=15&yt.la;for(_t=0;4>_t;++_t){var kn=1&Tn;for(Nn=it=0;4>Nn;++Nn)xt=xt>>1|(kn=(zt=Go(Be,wn,zt=kn+(1&xt),Re.Sc,Gt,Ne,gt))>Gt)<<7,it=it<<2|(3<zt?3:1<zt?2:Ne[gt+0]!=0),gt+=16;xt>>=4,Tn=Tn>>1|kn<<7,ft=(ft<<8|it)>>>0}for(wn=xt,Gt=Tn>>4,Nt=0;4>Nt;Nt+=2){for(it=0,xt=Ae.la>>4+Nt,Tn=yt.la>>4+Nt,_t=0;2>_t;++_t){for(kn=1&Tn,Nn=0;2>Nn;++Nn)zt=kn+(1&xt),xt=xt>>1|(kn=0<(zt=Go(Be,Le[2],zt,Re.Qc,0,Ne,gt)))<<3,it=it<<2|(3<zt?3:1<zt?2:Ne[gt+0]!=0),gt+=16;xt>>=2,Tn=Tn>>1|kn<<5}ct|=it<<4*Nt,wn|=xt<<4<<Nt,Gt|=(240&Tn)<<Nt}Ae.la=wn,yt.la=Gt,ze.Hc=ft,ze.Gc=ct,ze.ia=43690&ct?0:Re.ia,Le=!(ft|ct)}if(0<ue.L&&(ue.wa[ue.Y+ue.ja]=ue.gd[ye.$b][ye.Za],ue.wa[ue.Y+ue.ja].La|=!Le),we.Ka)return Ft(fe,7,"Premature end-of-file encountered.")}if(wo(fe),ue=Se,we=1,ye=(ce=fe).D,Ae=0<ce.L&&ce.M>=ce.zb&&ce.M<=ce.Va,ce.Aa==0)e:{if(ye.M=ce.M,ye.uc=Ae,Do(ce,ye),we=1,ye=(it=ce.D).Nb,Ae=(ct=Hs[ce.L])*ce.R,Be=ct/2*ce.B,_t=16*ye*ce.R,Nn=8*ye*ce.B,Le=ce.sa,ze=ce.ta-Ae+_t,Re=ce.qa,Ne=ce.ra-Be+Nn,gt=ce.Ha,yt=ce.Ia-Be+Nn,Tn=(xt=it.M)==0,ft=xt>=ce.Va-1,ce.Aa==2&&Do(ce,it),it.uc)for(kn=(zt=ce).D.M,e(zt.D.uc),it=zt.yb;it<zt.Hb;++it){Gt=it,wn=kn;var Kt=(tn=(Mt=zt).D).Nb;Nt=Mt.R;var tn=tn.wa[tn.Y+Gt],pn=Mt.sa,jn=Mt.ta+16*Kt*Nt+16*Gt,pr=tn.dd,Xt=tn.tc;if(Xt!=0)if(e(3<=Xt),Mt.L==1)0<Gt&&Or(pn,jn,Nt,Xt+4),tn.La&&Rn(pn,jn,Nt,Xt),0<wn&&yi(pn,jn,Nt,Xt+4),tn.La&&Ho(pn,jn,Nt,Xt);else{var kr=Mt.B,xi=Mt.qa,to=Mt.ra+8*Kt*kr+8*Gt,Gr=Mt.Ha,Mt=Mt.Ia+8*Kt*kr+8*Gt;Kt=tn.ld,0<Gt&&(Ls(pn,jn,Nt,Xt+4,pr,Kt),gi(xi,to,Gr,Mt,kr,Xt+4,pr,Kt)),tn.La&&(qr(pn,jn,Nt,Xt,pr,Kt),Qi(xi,to,Gr,Mt,kr,Xt,pr,Kt)),0<wn&&(Zi(pn,jn,Nt,Xt+4,pr,Kt),Oo(xi,to,Gr,Mt,kr,Xt+4,pr,Kt)),tn.La&&(mi(pn,jn,Nt,Xt,pr,Kt),vi(xi,to,Gr,Mt,kr,Xt,pr,Kt))}}if(ce.ia&&alert("todo:DitherRow"),ue.put!=null){if(it=16*xt,xt=16*(xt+1),Tn?(ue.y=ce.sa,ue.O=ce.ta+_t,ue.f=ce.qa,ue.N=ce.ra+Nn,ue.ea=ce.Ha,ue.W=ce.Ia+Nn):(it-=ct,ue.y=Le,ue.O=ze,ue.f=Re,ue.N=Ne,ue.ea=gt,ue.W=yt),ft||(xt-=ct),xt>ue.o&&(xt=ue.o),ue.F=null,ue.J=null,ce.Fa!=null&&0<ce.Fa.length&&it<xt&&(ue.J=Ro(ce,ue,it,xt-it),ue.F=ce.mb,ue.F==null&&ue.F.length==0)){we=Ft(ce,3,"Could not decode alpha data.");break e}it<ue.j&&(ct=ue.j-it,it=ue.j,e(!(1&ct)),ue.O+=ce.R*ct,ue.N+=ce.B*(ct>>1),ue.W+=ce.B*(ct>>1),ue.F!=null&&(ue.J+=ue.width*ct)),it<xt&&(ue.O+=ue.v,ue.N+=ue.v>>1,ue.W+=ue.v>>1,ue.F!=null&&(ue.J+=ue.v),ue.ka=it-ue.j,ue.U=ue.va-ue.v,ue.T=xt-it,we=ue.put(ue))}ye+1!=ce.Ic||ft||(r(ce.sa,ce.ta-Ae,Le,ze+16*ce.R,Ae),r(ce.qa,ce.ra-Be,Re,Ne+8*ce.B,Be),r(ce.Ha,ce.Ia-Be,gt,yt+8*ce.B,Be))}if(!we)return Ft(fe,6,"Output aborted.")}return 1})(d,g)),g.bc!=null&&g.bc(g),b&=1}return b?(d.cb=0,b):0}function Wn(d,g,b,C,j){j=d[g+b+32*C]+(j>>3),d[g+b+32*C]=-256&j?0>j?0:255:j}function ji(d,g,b,C,j,V){Wn(d,g,0,b,C+j),Wn(d,g,1,b,C+V),Wn(d,g,2,b,C-V),Wn(d,g,3,b,C-j)}function yn(d){return(20091*d>>16)+d}function No(d,g,b,C){var j,V=0,W=o(16);for(j=0;4>j;++j){var Y=d[g+0]+d[g+8],X=d[g+0]-d[g+8],ee=(35468*d[g+4]>>16)-yn(d[g+12]),le=yn(d[g+4])+(35468*d[g+12]>>16);W[V+0]=Y+le,W[V+1]=X+ee,W[V+2]=X-ee,W[V+3]=Y-le,V+=4,g++}for(j=V=0;4>j;++j)Y=(d=W[V+0]+4)+W[V+8],X=d-W[V+8],ee=(35468*W[V+4]>>16)-yn(W[V+12]),Wn(b,C,0,0,Y+(le=yn(W[V+4])+(35468*W[V+12]>>16))),Wn(b,C,1,0,X+ee),Wn(b,C,2,0,X-ee),Wn(b,C,3,0,Y-le),V++,C+=32}function gs(d,g,b,C){var j=d[g+0]+4,V=35468*d[g+4]>>16,W=yn(d[g+4]),Y=35468*d[g+1]>>16;ji(b,C,0,j+W,d=yn(d[g+1]),Y),ji(b,C,1,j+V,d,Y),ji(b,C,2,j-V,d,Y),ji(b,C,3,j-W,d,Y)}function Ba(d,g,b,C,j){No(d,g,b,C),j&&No(d,g+16,b,C+4)}function ms(d,g,b,C){Ar(d,g+0,b,C,1),Ar(d,g+32,b,C+128,1)}function qa(d,g,b,C){var j;for(d=d[g+0]+4,j=0;4>j;++j)for(g=0;4>g;++g)Wn(b,C,g,j,d)}function vs(d,g,b,C){d[g+0]&&hn(d,g+0,b,C),d[g+16]&&hn(d,g+16,b,C+4),d[g+32]&&hn(d,g+32,b,C+128),d[g+48]&&hn(d,g+48,b,C+128+4)}function Oa(d,g,b,C){var j,V=o(16);for(j=0;4>j;++j){var W=d[g+0+j]+d[g+12+j],Y=d[g+4+j]+d[g+8+j],X=d[g+4+j]-d[g+8+j],ee=d[g+0+j]-d[g+12+j];V[0+j]=W+Y,V[8+j]=W-Y,V[4+j]=ee+X,V[12+j]=ee-X}for(j=0;4>j;++j)W=(d=V[0+4*j]+3)+V[3+4*j],Y=V[1+4*j]+V[2+4*j],X=V[1+4*j]-V[2+4*j],ee=d-V[3+4*j],b[C+0]=W+Y>>3,b[C+16]=ee+X>>3,b[C+32]=W-Y>>3,b[C+48]=ee-X>>3,C+=64}function So(d,g,b){var C,j=g-32,V=Cn,W=255-d[j-1];for(C=0;C<b;++C){var Y,X=V,ee=W+d[g-1];for(Y=0;Y<b;++Y)d[g+Y]=X[ee+d[j+Y]];g+=32}}function Ha(d,g){So(d,g,4)}function Va(d,g){So(d,g,8)}function Ga(d,g){So(d,g,16)}function wr(d,g){var b;for(b=0;16>b;++b)r(d,g+32*b,d,g-32,16)}function Ui(d,g){var b;for(b=16;0<b;--b)i(d,g,d[g-1],16),g+=32}function Bi(d,g,b){var C;for(C=0;16>C;++C)i(g,b+32*C,d,16)}function ys(d,g){var b,C=16;for(b=0;16>b;++b)C+=d[g-1+32*b]+d[g+b-32];Bi(C>>5,d,g)}function rn(d,g){var b,C=8;for(b=0;16>b;++b)C+=d[g-1+32*b];Bi(C>>4,d,g)}function za(d,g){var b,C=8;for(b=0;16>b;++b)C+=d[g+b-32];Bi(C>>4,d,g)}function xs(d,g){Bi(128,d,g)}function Xe(d,g,b){return d+2*g+b+2>>2}function Wa(d,g){var b,C=g-32;for(C=new Uint8Array([Xe(d[C-1],d[C+0],d[C+1]),Xe(d[C+0],d[C+1],d[C+2]),Xe(d[C+1],d[C+2],d[C+3]),Xe(d[C+2],d[C+3],d[C+4])]),b=0;4>b;++b)r(d,g+32*b,C,0,C.length)}function $a(d,g){var b=d[g-1],C=d[g-1+32],j=d[g-1+64],V=d[g-1+96];_e(d,g+0,16843009*Xe(d[g-1-32],b,C)),_e(d,g+32,16843009*Xe(b,C,j)),_e(d,g+64,16843009*Xe(C,j,V)),_e(d,g+96,16843009*Xe(j,V,V))}function dr(d,g){var b,C=4;for(b=0;4>b;++b)C+=d[g+b-32]+d[g-1+32*b];for(C>>=3,b=0;4>b;++b)i(d,g+32*b,C,4)}function bs(d,g){var b=d[g-1+0],C=d[g-1+32],j=d[g-1+64],V=d[g-1-32],W=d[g+0-32],Y=d[g+1-32],X=d[g+2-32],ee=d[g+3-32];d[g+0+96]=Xe(C,j,d[g-1+96]),d[g+1+96]=d[g+0+64]=Xe(b,C,j),d[g+2+96]=d[g+1+64]=d[g+0+32]=Xe(V,b,C),d[g+3+96]=d[g+2+64]=d[g+1+32]=d[g+0+0]=Xe(W,V,b),d[g+3+64]=d[g+2+32]=d[g+1+0]=Xe(Y,W,V),d[g+3+32]=d[g+2+0]=Xe(X,Y,W),d[g+3+0]=Xe(ee,X,Y)}function ws(d,g){var b=d[g+1-32],C=d[g+2-32],j=d[g+3-32],V=d[g+4-32],W=d[g+5-32],Y=d[g+6-32],X=d[g+7-32];d[g+0+0]=Xe(d[g+0-32],b,C),d[g+1+0]=d[g+0+32]=Xe(b,C,j),d[g+2+0]=d[g+1+32]=d[g+0+64]=Xe(C,j,V),d[g+3+0]=d[g+2+32]=d[g+1+64]=d[g+0+96]=Xe(j,V,W),d[g+3+32]=d[g+2+64]=d[g+1+96]=Xe(V,W,Y),d[g+3+64]=d[g+2+96]=Xe(W,Y,X),d[g+3+96]=Xe(Y,X,X)}function qi(d,g){var b=d[g-1+0],C=d[g-1+32],j=d[g-1+64],V=d[g-1-32],W=d[g+0-32],Y=d[g+1-32],X=d[g+2-32],ee=d[g+3-32];d[g+0+0]=d[g+1+64]=V+W+1>>1,d[g+1+0]=d[g+2+64]=W+Y+1>>1,d[g+2+0]=d[g+3+64]=Y+X+1>>1,d[g+3+0]=X+ee+1>>1,d[g+0+96]=Xe(j,C,b),d[g+0+64]=Xe(C,b,V),d[g+0+32]=d[g+1+96]=Xe(b,V,W),d[g+1+32]=d[g+2+96]=Xe(V,W,Y),d[g+2+32]=d[g+3+96]=Xe(W,Y,X),d[g+3+32]=Xe(Y,X,ee)}function _o(d,g){var b=d[g+0-32],C=d[g+1-32],j=d[g+2-32],V=d[g+3-32],W=d[g+4-32],Y=d[g+5-32],X=d[g+6-32],ee=d[g+7-32];d[g+0+0]=b+C+1>>1,d[g+1+0]=d[g+0+64]=C+j+1>>1,d[g+2+0]=d[g+1+64]=j+V+1>>1,d[g+3+0]=d[g+2+64]=V+W+1>>1,d[g+0+32]=Xe(b,C,j),d[g+1+32]=d[g+0+96]=Xe(C,j,V),d[g+2+32]=d[g+1+96]=Xe(j,V,W),d[g+3+32]=d[g+2+96]=Xe(V,W,Y),d[g+3+64]=Xe(W,Y,X),d[g+3+96]=Xe(Y,X,ee)}function Ja(d,g){var b=d[g-1+0],C=d[g-1+32],j=d[g-1+64],V=d[g-1+96];d[g+0+0]=b+C+1>>1,d[g+2+0]=d[g+0+32]=C+j+1>>1,d[g+2+32]=d[g+0+64]=j+V+1>>1,d[g+1+0]=Xe(b,C,j),d[g+3+0]=d[g+1+32]=Xe(C,j,V),d[g+3+32]=d[g+1+64]=Xe(j,V,V),d[g+3+64]=d[g+2+64]=d[g+0+96]=d[g+1+96]=d[g+2+96]=d[g+3+96]=V}function Ya(d,g){var b=d[g-1+0],C=d[g-1+32],j=d[g-1+64],V=d[g-1+96],W=d[g-1-32],Y=d[g+0-32],X=d[g+1-32],ee=d[g+2-32];d[g+0+0]=d[g+2+32]=b+W+1>>1,d[g+0+32]=d[g+2+64]=C+b+1>>1,d[g+0+64]=d[g+2+96]=j+C+1>>1,d[g+0+96]=V+j+1>>1,d[g+3+0]=Xe(Y,X,ee),d[g+2+0]=Xe(W,Y,X),d[g+1+0]=d[g+3+32]=Xe(b,W,Y),d[g+1+32]=d[g+3+64]=Xe(C,b,W),d[g+1+64]=d[g+3+96]=Xe(j,C,b),d[g+1+96]=Xe(V,j,C)}function Ka(d,g){var b;for(b=0;8>b;++b)r(d,g+32*b,d,g-32,8)}function Ao(d,g){var b;for(b=0;8>b;++b)i(d,g,d[g-1],8),g+=32}function ui(d,g,b){var C;for(C=0;8>C;++C)i(g,b+32*C,d,8)}function Dr(d,g){var b,C=8;for(b=0;8>b;++b)C+=d[g+b-32]+d[g-1+32*b];ui(C>>4,d,g)}function Xa(d,g){var b,C=4;for(b=0;8>b;++b)C+=d[g+b-32];ui(C>>3,d,g)}function di(d,g){var b,C=4;for(b=0;8>b;++b)C+=d[g-1+32*b];ui(C>>3,d,g)}function Co(d,g){ui(128,d,g)}function Oi(d,g,b){var C=d[g-b],j=d[g+0],V=3*(j-C)+rl[1020+d[g-2*b]-d[g+b]],W=Ms[112+(V+4>>3)];d[g-b]=Cn[255+C+Ms[112+(V+3>>3)]],d[g+0]=Cn[255+j-W]}function Ns(d,g,b,C){var j=d[g+0],V=d[g+b];return Dn[255+d[g-2*b]-d[g-b]]>C||Dn[255+V-j]>C}function Ss(d,g,b,C){return 4*Dn[255+d[g-b]-d[g+0]]+Dn[255+d[g-2*b]-d[g+b]]<=C}function _s(d,g,b,C,j){var V=d[g-3*b],W=d[g-2*b],Y=d[g-b],X=d[g+0],ee=d[g+b],le=d[g+2*b],ge=d[g+3*b];return 4*Dn[255+Y-X]+Dn[255+W-ee]>C?0:Dn[255+d[g-4*b]-V]<=j&&Dn[255+V-W]<=j&&Dn[255+W-Y]<=j&&Dn[255+ge-le]<=j&&Dn[255+le-ee]<=j&&Dn[255+ee-X]<=j}function As(d,g,b,C){var j=2*C+1;for(C=0;16>C;++C)Ss(d,g+C,b,j)&&Oi(d,g+C,b)}function fr(d,g,b,C){var j=2*C+1;for(C=0;16>C;++C)Ss(d,g+C*b,1,j)&&Oi(d,g+C*b,1)}function Nr(d,g,b,C){var j;for(j=3;0<j;--j)As(d,g+=4*b,b,C)}function Za(d,g,b,C){var j;for(j=3;0<j;--j)fr(d,g+=4,b,C)}function Fr(d,g,b,C,j,V,W,Y){for(V=2*V+1;0<j--;){if(_s(d,g,b,V,W))if(Ns(d,g,b,Y))Oi(d,g,b);else{var X=d,ee=g,le=b,ge=X[ee-2*le],me=X[ee-le],fe=X[ee+0],Se=X[ee+le],ye=X[ee+2*le],ce=27*(we=rl[1020+3*(fe-me)+rl[1020+ge-Se]])+63>>7,ue=18*we+63>>7,we=9*we+63>>7;X[ee-3*le]=Cn[255+X[ee-3*le]+we],X[ee-2*le]=Cn[255+ge+ue],X[ee-le]=Cn[255+me+ce],X[ee+0]=Cn[255+fe-ce],X[ee+le]=Cn[255+Se-ue],X[ee+2*le]=Cn[255+ye-we]}g+=C}}function $n(d,g,b,C,j,V,W,Y){for(V=2*V+1;0<j--;){if(_s(d,g,b,V,W))if(Ns(d,g,b,Y))Oi(d,g,b);else{var X=d,ee=g,le=b,ge=X[ee-le],me=X[ee+0],fe=X[ee+le],Se=Ms[112+((ye=3*(me-ge))+4>>3)],ye=Ms[112+(ye+3>>3)],ce=Se+1>>1;X[ee-2*le]=Cn[255+X[ee-2*le]+ce],X[ee-le]=Cn[255+ge+ye],X[ee+0]=Cn[255+me-Se],X[ee+le]=Cn[255+fe-ce]}g+=C}}function To(d,g,b,C,j,V){Fr(d,g,b,1,16,C,j,V)}function fi(d,g,b,C,j,V){Fr(d,g,1,b,16,C,j,V)}function Qa(d,g,b,C,j,V){var W;for(W=3;0<W;--W)$n(d,g+=4*b,b,1,16,C,j,V)}function Hi(d,g,b,C,j,V){var W;for(W=3;0<W;--W)$n(d,g+=4,1,b,16,C,j,V)}function el(d,g,b,C,j,V,W,Y){Fr(d,g,j,1,8,V,W,Y),Fr(b,C,j,1,8,V,W,Y)}function ko(d,g,b,C,j,V,W,Y){Fr(d,g,1,j,8,V,W,Y),Fr(b,C,1,j,8,V,W,Y)}function Io(d,g,b,C,j,V,W,Y){$n(d,g+4*j,j,1,8,V,W,Y),$n(b,C+4*j,j,1,8,V,W,Y)}function Cs(d,g,b,C,j,V,W,Y){$n(d,g+4,1,j,8,V,W,Y),$n(b,C+4,1,j,8,V,W,Y)}function Vi(){this.ba=new On,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Eo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Po(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ts(){this.ua=0,this.Wa=new oe,this.vb=new oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new L}function tl(){this.xb=this.a=0,this.l=new Fi,this.ca=new On,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ts,this.ab=0,this.gc=s(4,Po),this.Oc=0}function Gi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Fi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function hi(d,g,b,C,j,V,W){for(d=d==null?0:d[g+0],g=0;g<W;++g)j[V+g]=d+b[C+g]&255,d=j[V+g]}function Lo(d,g,b,C,j,V,W){var Y;if(d==null)hi(null,null,b,C,j,V,W);else for(Y=0;Y<W;++Y)j[V+Y]=d[g+Y]+b[C+Y]&255}function jr(d,g,b,C,j,V,W){if(d==null)hi(null,null,b,C,j,V,W);else{var Y,X=d[g+0],ee=X,le=X;for(Y=0;Y<W;++Y)ee=le+(X=d[g+Y])-ee,le=b[C+Y]+(-256&ee?0>ee?0:255:ee)&255,ee=X,j[V+Y]=le}}function Ro(d,g,b,C){var j=g.width,V=g.o;if(e(d!=null&&g!=null),0>b||0>=C||b+C>V)return null;if(!d.Cc){if(d.ga==null){var W;if(d.ga=new Gi,(W=d.ga==null)||(W=g.width*g.o,e(d.Gb.length==0),d.Gb=o(W),d.Uc=0,d.Gb==null?W=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,W=1),W=!W),!W){W=d.ga;var Y=d.Fa,X=d.P,ee=d.qc,le=d.mb,ge=d.nb,me=X+1,fe=ee-1,Se=W.l;if(e(Y!=null&&le!=null&&g!=null),Vr[0]=null,Vr[1]=hi,Vr[2]=Lo,Vr[3]=jr,W.ca=le,W.tb=ge,W.c=g.width,W.i=g.height,e(0<W.c&&0<W.i),1>=ee)g=0;else if(W.$a=Y[X+0]>>0&3,W.Z=Y[X+0]>>2&3,W.Lc=Y[X+0]>>4&3,X=Y[X+0]>>6&3,0>W.$a||1<W.$a||4<=W.Z||1<W.Lc||X)g=0;else if(Se.put=sr,Se.ac=Qt,Se.bc=ar,Se.ma=W,Se.width=g.width,Se.height=g.height,Se.Da=g.Da,Se.v=g.v,Se.va=g.va,Se.j=g.j,Se.o=g.o,W.$a)e:{e(W.$a==1),g=En();t:for(;;){if(g==null){g=0;break e}if(e(W!=null),W.mc=g,g.c=W.c,g.i=W.i,g.l=W.l,g.l.ma=W,g.l.width=W.c,g.l.height=W.i,g.a=0,G(g.m,Y,me,fe),!ur(W.c,W.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&br(g.s)?(W.ic=1,Y=g.c*g.i,g.Ta=null,g.Ua=0,g.V=o(Y),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(W.ic=0,g=ci(g,W.c)),!g))break t;g=1;break e}W.mc=null,g=0}else g=fe>=W.c*W.i;W=!g}if(W)return null;d.ga.Lc!=1?d.Ga=0:C=V-b}e(d.ga!=null),e(b+C<=V);e:{if(g=(Y=d.ga).c,V=Y.l.o,Y.$a==0){if(me=d.rc,fe=d.Vc,Se=d.Fa,X=d.P+1+b*g,ee=d.mb,le=d.nb+b*g,e(X<=d.P+d.qc),Y.Z!=0)for(e(Vr[Y.Z]!=null),W=0;W<C;++W)Vr[Y.Z](me,fe,Se,X,ee,le,g),me=ee,fe=le,le+=g,X+=g;else for(W=0;W<C;++W)r(ee,le,Se,X,g),me=ee,fe=le,le+=g,X+=g;d.rc=me,d.Vc=fe}else{if(e(Y.mc!=null),g=b+C,e((W=Y.mc)!=null),e(g<=W.i),W.C>=g)g=1;else if(Y.ic||he(),Y.ic){Y=W.V,me=W.Ba,fe=W.c;var ye=W.i,ce=(Se=1,X=W.$/fe,ee=W.$%fe,le=W.m,ge=W.s,W.$),ue=fe*ye,we=fe*g,Ae=ge.wc,Ne=ce<we?Ht(ge,ee,X):null;e(ce<=ue),e(g<=ye),e(br(ge));t:for(;;){for(;!le.h&&ce<we;){if(ee&Ae||(Ne=Ht(ge,ee,X)),e(Ne!=null),te(le),256>(ye=vn(Ne.G[0],Ne.H[0],le)))Y[me+ce]=ye,++ce,++ee>=fe&&(ee=0,++X<=g&&!(X%16)&&Gn(W,X));else{if(!(280>ye)){Se=0;break t}ye=Hn(ye-256,le);var Be,Le=vn(Ne.G[4],Ne.H[4],le);if(te(le),!(ce>=(Le=lr(fe,Le=Hn(Le,le)))&&ue-ce>=ye)){Se=0;break t}for(Be=0;Be<ye;++Be)Y[me+ce+Be]=Y[me+ce+Be-Le];for(ce+=ye,ee+=ye;ee>=fe;)ee-=fe,++X<=g&&!(X%16)&&Gn(W,X);ce<we&&ee&Ae&&(Ne=Ht(ge,ee,X))}e(le.h==K(le))}Gn(W,X>g?g:X);break t}!Se||le.h&&ce<ue?(Se=0,W.a=le.h?5:3):W.$=ce,g=Se}else g=zn(W,W.V,W.Ba,W.c,W.i,g,Pi);if(!g){C=0;break e}}b+C>=V&&(d.Cc=1),C=1}if(!C)return null;if(d.Cc&&((C=d.ga)!=null&&(C.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+b*j}function x(d,g,b,C,j,V){for(;0<j--;){var W,Y=d,X=g+(b?1:0),ee=d,le=g+(b?0:3);for(W=0;W<C;++W){var ge=ee[le+4*W];ge!=255&&(ge*=32897,Y[X+4*W+0]=Y[X+4*W+0]*ge>>23,Y[X+4*W+1]=Y[X+4*W+1]*ge>>23,Y[X+4*W+2]=Y[X+4*W+2]*ge>>23)}g+=V}}function U(d,g,b,C,j){for(;0<C--;){var V;for(V=0;V<b;++V){var W=d[g+2*V+0],Y=15&(ee=d[g+2*V+1]),X=4369*Y,ee=(240&ee|ee>>4)*X>>16;d[g+2*V+0]=(240&W|W>>4)*X>>16&240|(15&W|W<<4)*X>>16>>4&15,d[g+2*V+1]=240&ee|Y}g+=j}}function re(d,g,b,C,j,V,W,Y){var X,ee,le=255;for(ee=0;ee<j;++ee){for(X=0;X<C;++X){var ge=d[g+X];V[W+4*X]=ge,le&=ge}g+=b,W+=Y}return le!=255}function ae(d,g,b,C,j){var V;for(V=0;V<j;++V)b[C+V]=d[g+V]>>8}function he(){Mn=x,Ct=U,Tt=re,Ut=ae}function xe(d,g,b){R[d]=function(C,j,V,W,Y,X,ee,le,ge,me,fe,Se,ye,ce,ue,we,Ae){var Ne,Be=Ae-1>>1,Le=Y[X+0]|ee[le+0]<<16,ze=ge[me+0]|fe[Se+0]<<16;e(C!=null);var Re=3*Le+ze+131074>>2;for(g(C[j+0],255&Re,Re>>16,ye,ce),V!=null&&(Re=3*ze+Le+131074>>2,g(V[W+0],255&Re,Re>>16,ue,we)),Ne=1;Ne<=Be;++Ne){var gt=Y[X+Ne]|ee[le+Ne]<<16,yt=ge[me+Ne]|fe[Se+Ne]<<16,ft=Le+gt+ze+yt+524296,ct=ft+2*(gt+ze)>>3;Re=ct+Le>>1,Le=(ft=ft+2*(Le+yt)>>3)+gt>>1,g(C[j+2*Ne-1],255&Re,Re>>16,ye,ce+(2*Ne-1)*b),g(C[j+2*Ne-0],255&Le,Le>>16,ye,ce+(2*Ne-0)*b),V!=null&&(Re=ft+ze>>1,Le=ct+yt>>1,g(V[W+2*Ne-1],255&Re,Re>>16,ue,we+(2*Ne-1)*b),g(V[W+2*Ne+0],255&Le,Le>>16,ue,we+(2*Ne+0)*b)),Le=gt,ze=yt}1&Ae||(Re=3*Le+ze+131074>>2,g(C[j+Ae-1],255&Re,Re>>16,ye,ce+(Ae-1)*b),V!=null&&(Re=3*ze+Le+131074>>2,g(V[W+Ae-1],255&Re,Re>>16,ue,we+(Ae-1)*b)))}}function Te(){Fn[Ds]=Nh,Fn[Fs]=Sc,Fn[yc]=Sh,Fn[js]=_c,Fn[Us]=Ac,Fn[il]=Cc,Fn[xc]=_h,Fn[ol]=Sc,Fn[sl]=_c,Fn[Bs]=Ac,Fn[al]=Cc}function Ue(d){return d&-16384?0>d?0:255:d>>Ah}function Ge(d,g){return Ue((19077*d>>8)+(26149*g>>8)-14234)}function rt(d,g,b){return Ue((19077*d>>8)-(6419*g>>8)-(13320*b>>8)+8708)}function tt(d,g){return Ue((19077*d>>8)+(33050*g>>8)-17685)}function ut(d,g,b,C,j){C[j+0]=Ge(d,b),C[j+1]=rt(d,g,b),C[j+2]=tt(d,g)}function Et(d,g,b,C,j){C[j+0]=tt(d,g),C[j+1]=rt(d,g,b),C[j+2]=Ge(d,b)}function Rt(d,g,b,C,j){var V=rt(d,g,b);g=V<<3&224|tt(d,g)>>3,C[j+0]=248&Ge(d,b)|V>>5,C[j+1]=g}function Vt(d,g,b,C,j){var V=240&tt(d,g)|15;C[j+0]=240&Ge(d,b)|rt(d,g,b)>>4,C[j+1]=V}function on(d,g,b,C,j){C[j+0]=255,ut(d,g,b,C,j+1)}function Yt(d,g,b,C,j){Et(d,g,b,C,j),C[j+3]=255}function Jn(d,g,b,C,j){ut(d,g,b,C,j),C[j+3]=255}function An(d,g){return 0>d?0:d>g?g:d}function hr(d,g,b){R[d]=function(C,j,V,W,Y,X,ee,le,ge){for(var me=le+(-2&ge)*b;le!=me;)g(C[j+0],V[W+0],Y[X+0],ee,le),g(C[j+1],V[W+0],Y[X+0],ee,le+b),j+=2,++W,++X,le+=2*b;1&ge&&g(C[j+0],V[W+0],Y[X+0],ee,le)}}function ks(d,g,b){return b==0?d==0?g==0?6:5:g==0?4:0:b}function Mo(d,g,b,C,j){switch(d>>>30){case 3:Ar(g,b,C,j,0);break;case 2:jt(g,b,C,j);break;case 1:hn(g,b,C,j)}}function Do(d,g){var b,C,j=g.M,V=g.Nb,W=d.oc,Y=d.pc+40,X=d.oc,ee=d.pc+584,le=d.oc,ge=d.pc+600;for(b=0;16>b;++b)W[Y+32*b-1]=129;for(b=0;8>b;++b)X[ee+32*b-1]=129,le[ge+32*b-1]=129;for(0<j?W[Y-1-32]=X[ee-1-32]=le[ge-1-32]=129:(i(W,Y-32-1,127,21),i(X,ee-32-1,127,9),i(le,ge-32-1,127,9)),C=0;C<d.za;++C){var me=g.ya[g.aa+C];if(0<C){for(b=-1;16>b;++b)r(W,Y+32*b-4,W,Y+32*b+12,4);for(b=-1;8>b;++b)r(X,ee+32*b-4,X,ee+32*b+4,4),r(le,ge+32*b-4,le,ge+32*b+4,4)}var fe=d.Gd,Se=d.Hd+C,ye=me.ad,ce=me.Hc;if(0<j&&(r(W,Y-32,fe[Se].y,0,16),r(X,ee-32,fe[Se].f,0,8),r(le,ge-32,fe[Se].ea,0,8)),me.Za){var ue=W,we=Y-32+16;for(0<j&&(C>=d.za-1?i(ue,we,fe[Se].y[15],4):r(ue,we,fe[Se+1].y,0,4)),b=0;4>b;b++)ue[we+128+b]=ue[we+256+b]=ue[we+384+b]=ue[we+0+b];for(b=0;16>b;++b,ce<<=2)ue=W,we=Y+kc[b],Yn[me.Ob[b]](ue,we),Mo(ce,ye,16*+b,ue,we)}else if(ue=ks(C,j,me.Ob[0]),Hr[ue](W,Y),ce!=0)for(b=0;16>b;++b,ce<<=2)Mo(ce,ye,16*+b,W,Y+kc[b]);for(b=me.Gc,ue=ks(C,j,me.Dd),Tr[ue](X,ee),Tr[ue](le,ge),ce=ye,ue=X,we=ee,255&(me=b>>0)&&(170&me?qo(ce,256,ue,we):Ln(ce,256,ue,we)),me=le,ce=ge,255&(b>>=8)&&(170&b?qo(ye,320,me,ce):Ln(ye,320,me,ce)),j<d.Ub-1&&(r(fe[Se].y,0,W,Y+480,16),r(fe[Se].f,0,X,ee+224,8),r(fe[Se].ea,0,le,ge+224,8)),b=8*V*d.B,fe=d.sa,Se=d.ta+16*C+16*V*d.R,ye=d.qa,me=d.ra+8*C+b,ce=d.Ha,ue=d.Ia+8*C+b,b=0;16>b;++b)r(fe,Se+b*d.R,W,Y+32*b,16);for(b=0;8>b;++b)r(ye,me+b*d.B,X,ee+32*b,8),r(ce,ue+b*d.B,le,ge+32*b,8)}}function zi(d,g,b,C,j,V,W,Y,X){var ee=[0],le=[0],ge=0,me=X!=null?X.kd:0,fe=X??new Eo;if(d==null||12>b)return 7;fe.data=d,fe.w=g,fe.ha=b,g=[g],b=[b],fe.gb=[fe.gb];e:{var Se=g,ye=b,ce=fe.gb;if(e(d!=null),e(ye!=null),e(ce!=null),ce[0]=0,12<=ye[0]&&!n(d,Se[0],"RIFF")){if(n(d,Se[0]+8,"WEBP")){ce=3;break e}var ue=Ie(d,Se[0]+4);if(12>ue||4294967286<ue){ce=3;break e}if(me&&ue>ye[0]-8){ce=7;break e}ce[0]=ue,Se[0]+=12,ye[0]-=12}ce=0}if(ce!=0)return ce;for(ue=0<fe.gb[0],b=b[0];;){e:{var we=d;ye=g,ce=b;var Ae=ee,Ne=le,Be=Se=[0];if((Re=ge=[ge])[0]=0,8>ce[0])ce=7;else{if(!n(we,ye[0],"VP8X")){if(Ie(we,ye[0]+4)!=10){ce=3;break e}if(18>ce[0]){ce=7;break e}var Le=Ie(we,ye[0]+8),ze=1+Ee(we,ye[0]+12);if(2147483648<=ze*(we=1+Ee(we,ye[0]+15))){ce=3;break e}Be!=null&&(Be[0]=Le),Ae!=null&&(Ae[0]=ze),Ne!=null&&(Ne[0]=we),ye[0]+=18,ce[0]-=18,Re[0]=1}ce=0}}if(ge=ge[0],Se=Se[0],ce!=0)return ce;if(ye=!!(2&Se),!ue&&ge)return 3;if(V!=null&&(V[0]=!!(16&Se)),W!=null&&(W[0]=ye),Y!=null&&(Y[0]=0),W=ee[0],Se=le[0],ge&&ye&&X==null){ce=0;break}if(4>b){ce=7;break}if(ue&&ge||!ue&&!ge&&!n(d,g[0],"ALPH")){b=[b],fe.na=[fe.na],fe.P=[fe.P],fe.Sa=[fe.Sa];e:{Le=d,ce=g,ue=b;var Re=fe.gb;Ae=fe.na,Ne=fe.P,Be=fe.Sa,ze=22,e(Le!=null),e(ue!=null),we=ce[0];var gt=ue[0];for(e(Ae!=null),e(Be!=null),Ae[0]=null,Ne[0]=null,Be[0]=0;;){if(ce[0]=we,ue[0]=gt,8>gt){ce=7;break e}var yt=Ie(Le,we+4);if(4294967286<yt){ce=3;break e}var ft=8+yt+1&-2;if(ze+=ft,0<Re&&ze>Re){ce=3;break e}if(!n(Le,we,"VP8 ")||!n(Le,we,"VP8L")){ce=0;break e}if(gt[0]<ft){ce=7;break e}n(Le,we,"ALPH")||(Ae[0]=Le,Ne[0]=we+8,Be[0]=yt),we+=ft,gt-=ft}}if(b=b[0],fe.na=fe.na[0],fe.P=fe.P[0],fe.Sa=fe.Sa[0],ce!=0)break}b=[b],fe.Ja=[fe.Ja],fe.xa=[fe.xa];e:if(Re=d,ce=g,ue=b,Ae=fe.gb[0],Ne=fe.Ja,Be=fe.xa,Le=ce[0],we=!n(Re,Le,"VP8 "),ze=!n(Re,Le,"VP8L"),e(Re!=null),e(ue!=null),e(Ne!=null),e(Be!=null),8>ue[0])ce=7;else{if(we||ze){if(Re=Ie(Re,Le+4),12<=Ae&&Re>Ae-12){ce=3;break e}if(me&&Re>ue[0]-8){ce=7;break e}Ne[0]=Re,ce[0]+=8,ue[0]-=8,Be[0]=ze}else Be[0]=5<=ue[0]&&Re[Le+0]==47&&!(Re[Le+4]>>5),Ne[0]=ue[0];ce=0}if(b=b[0],fe.Ja=fe.Ja[0],fe.xa=fe.xa[0],g=g[0],ce!=0)break;if(4294967286<fe.Ja)return 3;if(Y==null||ye||(Y[0]=fe.xa?2:1),W=[W],Se=[Se],fe.xa){if(5>b){ce=7;break}Y=W,me=Se,ye=V,d==null||5>b?d=0:5<=b&&d[g+0]==47&&!(d[g+4]>>5)?(ue=[0],Re=[0],Ae=[0],G(Ne=new P,d,g,b),$e(Ne,ue,Re,Ae)?(Y!=null&&(Y[0]=ue[0]),me!=null&&(me[0]=Re[0]),ye!=null&&(ye[0]=Ae[0]),d=1):d=0):d=0}else{if(10>b){ce=7;break}Y=Se,d==null||10>b||!fs(d,g+3,b-3)?d=0:(me=d[g+0]|d[g+1]<<8|d[g+2]<<16,ye=16383&(d[g+7]<<8|d[g+6]),d=16383&(d[g+9]<<8|d[g+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=fe.Ja||!ye||!d?d=0:(W&&(W[0]=ye),Y&&(Y[0]=d),d=1))}if(!d||(W=W[0],Se=Se[0],ge&&(ee[0]!=W||le[0]!=Se)))return 3;X!=null&&(X[0]=fe,X.offset=g-X.w,e(4294967286>g-X.w),e(X.offset==X.ha-b));break}return ce==0||ce==7&&ge&&X==null?(V!=null&&(V[0]|=fe.na!=null&&0<fe.na.length),C!=null&&(C[0]=W),j!=null&&(j[0]=Se),0):ce}function Fo(d,g,b){var C=g.width,j=g.height,V=0,W=0,Y=C,X=j;if(g.Da=d!=null&&0<d.Da,g.Da&&(Y=d.cd,X=d.bd,V=d.v,W=d.j,11>b||(V&=-2,W&=-2),0>V||0>W||0>=Y||0>=X||V+Y>C||W+X>j))return 0;if(g.v=V,g.j=W,g.va=V+Y,g.o=W+X,g.U=Y,g.T=X,g.da=d!=null&&0<d.da,g.da){if(!Ke(Y,X,b=[d.ib],V=[d.hb]))return 0;g.ib=b[0],g.hb=V[0]}return g.ob=d!=null&&d.ob,g.Kb=d==null||!d.Sd,g.da&&(g.ob=g.ib<3*C/4&&g.hb<3*j/4,g.Kb=0),1}function jo(d){if(d==null)return 2;if(11>d.S){var g=d.f.RGBA;g.fb+=(d.height-1)*g.A,g.A=-g.A}else g=d.f.kb,d=d.height,g.O+=(d-1)*g.fa,g.fa=-g.fa,g.N+=(d-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(d-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(d-1)*g.lb,g.lb=-g.lb);return 0}function Wi(d,g,b,C){if(C==null||0>=d||0>=g)return 2;if(b!=null){if(b.Da){var j=b.cd,V=b.bd,W=-2&b.v,Y=-2&b.j;if(0>W||0>Y||0>=j||0>=V||W+j>d||Y+V>g)return 2;d=j,g=V}if(b.da){if(!Ke(d,g,j=[b.ib],V=[b.hb]))return 2;d=j[0],g=V[0]}}C.width=d,C.height=g;e:{var X=C.width,ee=C.height;if(d=C.S,0>=X||0>=ee||!(d>=Ds&&13>d))d=2;else{if(0>=C.Rd&&C.sd==null){W=V=j=g=0;var le=(Y=X*Ic[d])*ee;if(11>d||(V=(ee+1)/2*(g=(X+1)/2),d==12&&(W=(j=X)*ee)),(ee=o(le+2*V+W))==null){d=1;break e}C.sd=ee,11>d?((X=C.f.RGBA).eb=ee,X.fb=0,X.A=Y,X.size=le):((X=C.f.kb).y=ee,X.O=0,X.fa=Y,X.Fd=le,X.f=ee,X.N=0+le,X.Ab=g,X.Cd=V,X.ea=ee,X.W=0+le+V,X.Db=g,X.Ed=V,d==12&&(X.F=ee,X.J=0+le+2*V),X.Tc=W,X.lb=j)}if(g=1,j=C.S,V=C.width,W=C.height,j>=Ds&&13>j)if(11>j)d=C.f.RGBA,g&=(Y=Math.abs(d.A))*(W-1)+V<=d.size,g&=Y>=V*Ic[j],g&=d.eb!=null;else{d=C.f.kb,Y=(V+1)/2,le=(W+1)/2,X=Math.abs(d.fa),ee=Math.abs(d.Ab);var ge=Math.abs(d.Db),me=Math.abs(d.lb),fe=me*(W-1)+V;g&=X*(W-1)+V<=d.Fd,g&=ee*(le-1)+Y<=d.Cd,g=(g&=ge*(le-1)+Y<=d.Ed)&X>=V&ee>=Y&ge>=Y,g&=d.y!=null,g&=d.f!=null,g&=d.ea!=null,j==12&&(g&=me>=V,g&=fe<=d.Tc,g&=d.F!=null)}else g=0;d=g?0:2}}return d!=0||b!=null&&b.fd&&(d=jo(C)),d}var en=64,$i=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ji=24,Yi=32,Uo=8,xn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Pe("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(d){return d},R.Predictor2=function(d,g,b){return g[b+0]},R.Predictor3=function(d,g,b){return g[b+1]},R.Predictor4=function(d,g,b){return g[b-1]},R.Predictor5=function(d,g,b){return Me(Me(d,g[b+1]),g[b+0])},R.Predictor6=function(d,g,b){return Me(d,g[b-1])},R.Predictor7=function(d,g,b){return Me(d,g[b+0])},R.Predictor8=function(d,g,b){return Me(g[b-1],g[b+0])},R.Predictor9=function(d,g,b){return Me(g[b+0],g[b+1])},R.Predictor10=function(d,g,b){return Me(Me(d,g[b-1]),Me(g[b+0],g[b+1]))},R.Predictor11=function(d,g,b){var C=g[b+0];return 0>=ot(C>>24&255,d>>24&255,(g=g[b-1])>>24&255)+ot(C>>16&255,d>>16&255,g>>16&255)+ot(C>>8&255,d>>8&255,g>>8&255)+ot(255&C,255&d,255&g)?C:d},R.Predictor12=function(d,g,b){var C=g[b+0];return(Ve((d>>24&255)+(C>>24&255)-((g=g[b-1])>>24&255))<<24|Ve((d>>16&255)+(C>>16&255)-(g>>16&255))<<16|Ve((d>>8&255)+(C>>8&255)-(g>>8&255))<<8|Ve((255&d)+(255&C)-(255&g)))>>>0},R.Predictor13=function(d,g,b){var C=g[b-1];return(Qe((d=Me(d,g[b+0]))>>24&255,C>>24&255)<<24|Qe(d>>16&255,C>>16&255)<<16|Qe(d>>8&255,C>>8&255)<<8|Qe(d>>0&255,C>>0&255))>>>0};var nl=R.PredictorAdd0;R.PredictorAdd1=st,Pe("Predictor2","PredictorAdd2"),Pe("Predictor3","PredictorAdd3"),Pe("Predictor4","PredictorAdd4"),Pe("Predictor5","PredictorAdd5"),Pe("Predictor6","PredictorAdd6"),Pe("Predictor7","PredictorAdd7"),Pe("Predictor8","PredictorAdd8"),Pe("Predictor9","PredictorAdd9"),Pe("Predictor10","PredictorAdd10"),Pe("Predictor11","PredictorAdd11"),Pe("Predictor12","PredictorAdd12"),Pe("Predictor13","PredictorAdd13");var Bo=R.PredictorAdd2;lt("ColorIndexInverseTransform","MapARGB","32b",(function(d){return d>>8&255}),(function(d){return d})),lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(d){return d}),(function(d){return d>>8&255}));var Is,Pn=R.ColorIndexInverseTransform,Ki=R.MapARGB,Es=R.VP8LColorIndexInverseTransformAlpha,Ps=R.MapAlpha,Ur=R.VP8LPredictorsAdd=[];Ur.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var pi,bn,fn,Br,Sr,_r,Xi,Ar,jt,qo,hn,Ln,Zi,Ls,Oo,gi,mi,qr,vi,Qi,yi,Or,Ho,Rn,Mn,Ct,Tt,Ut,$t=o(511),Cr=o(2041),Vo=o(225),eo=o(767),Rs=0,rl=Cr,Ms=Vo,Cn=eo,Dn=$t,Ds=0,Fs=1,yc=2,js=3,Us=4,il=5,xc=6,ol=7,sl=8,Bs=9,al=10,lh=[2,3,7],ch=[3,3,11],bc=[280,256,256,256,40],uh=[0,1,1,1,0],dh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],fh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],hh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ph=8,ll=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],cl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Go=null,gh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],mh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],wc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],vh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],yh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],xh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hr=[],Yn=[],Tr=[],wh=1,Nc=2,Vr=[],Fn=[];xe("UpsampleRgbLinePair",ut,3),xe("UpsampleBgrLinePair",Et,3),xe("UpsampleRgbaLinePair",Jn,4),xe("UpsampleBgraLinePair",Yt,4),xe("UpsampleArgbLinePair",on,4),xe("UpsampleRgba4444LinePair",Vt,2),xe("UpsampleRgb565LinePair",Rt,2);var Nh=R.UpsampleRgbLinePair,Sh=R.UpsampleBgrLinePair,Sc=R.UpsampleRgbaLinePair,_c=R.UpsampleBgraLinePair,Ac=R.UpsampleArgbLinePair,Cc=R.UpsampleRgba4444LinePair,_h=R.UpsampleRgb565LinePair,qs=16,Os=1<<qs-1,zo=-227,ul=482,Ah=6,Tc=0,Ch=o(256),Th=o(256),kh=o(256),Ih=o(256),Eh=o(ul-zo),Ph=o(ul-zo);hr("YuvToRgbRow",ut,3),hr("YuvToBgrRow",Et,3),hr("YuvToRgbaRow",Jn,4),hr("YuvToBgraRow",Yt,4),hr("YuvToArgbRow",on,4),hr("YuvToRgba4444Row",Vt,2),hr("YuvToRgb565Row",Rt,2);var kc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Hs=[0,2,8],Lh=[8,7,6,4,4,2,2,2,1,1,1,1],Rh=1;this.WebPDecodeRGBA=function(d,g,b,C,j){var V=Fs,W=new Vi,Y=new On;W.ba=Y,Y.S=V,Y.width=[Y.width],Y.height=[Y.height];var X=Y.width,ee=Y.height,le=new xr;if(le==null||d==null)var ge=2;else e(le!=null),ge=zi(d,g,b,le.width,le.height,le.Pd,le.Qd,le.format,null);if(ge!=0?X=0:(X!=null&&(X[0]=le.width[0]),ee!=null&&(ee[0]=le.height[0]),X=1),X){Y.width=Y.width[0],Y.height=Y.height[0],C!=null&&(C[0]=Y.width),j!=null&&(j[0]=Y.height);e:{if(C=new Fi,(j=new Eo).data=d,j.w=g,j.ha=b,j.kd=1,g=[0],e(j!=null),((d=zi(j.data,j.w,j.ha,null,null,null,g,null,j))==0||d==7)&&g[0]&&(d=4),(g=d)==0){if(e(W!=null),C.data=j.data,C.w=j.w+j.offset,C.ha=j.ha-j.offset,C.put=sr,C.ac=Qt,C.bc=ar,C.ma=W,j.xa){if((d=En())==null){W=1;break e}if((function(me,fe){var Se=[0],ye=[0],ce=[0];t:for(;;){if(me==null)return 0;if(fe==null)return me.a=2,0;if(me.l=fe,me.a=0,G(me.m,fe.data,fe.w,fe.ha),!$e(me.m,Se,ye,ce)){me.a=3;break t}if(me.xb=Nc,fe.width=Se[0],fe.height=ye[0],!ur(Se[0],ye[0],1,me,null))break t;return 1}return e(me.a!=0),0})(d,C)){if(C=(g=Wi(C.width,C.height,W.Oa,W.ba))==0){t:{C=d;n:for(;;){if(C==null){C=0;break t}if(e(C.s.yc!=null),e(C.s.Ya!=null),e(0<C.s.Wb),e((b=C.l)!=null),e((j=b.ma)!=null),C.xb!=0){if(C.ca=j.ba,C.tb=j.tb,e(C.ca!=null),!Fo(j.Oa,b,js)){C.a=2;break n}if(!ci(C,b.width)||b.da)break n;if((b.da||mt(C.ca.S))&&he(),11>C.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),C.ca.f.kb.F!=null&&he()),C.Pb&&0<C.s.ua&&C.s.vb.X==null&&!He(C.s.vb,C.s.Wa.Xa)){C.a=1;break n}C.xb=0}if(!zn(C,C.V,C.Ba,C.c,C.i,b.o,Ei))break n;j.Dc=C.Ma,C=1;break t}e(C.a!=0),C=0}C=!C}C&&(g=d.a)}else g=d.a}else{if((d=new ja)==null){W=1;break e}if(d.Fa=j.na,d.P=j.P,d.qc=j.Sa,hs(d,C)){if((g=Wi(C.width,C.height,W.Oa,W.ba))==0){if(d.Aa=0,b=W.Oa,e((j=d)!=null),b!=null){if(0<(X=0>(X=b.Md)?0:100<X?255:255*X/100)){for(ee=le=0;4>ee;++ee)12>(ge=j.pb[ee]).lc&&(ge.ia=X*Lh[0>ge.lc?0:ge.lc]>>3),le|=ge.ia;le&&(alert("todo:VP8InitRandom"),j.ia=1)}j.Ga=b.Id,100<j.Ga?j.Ga=100:0>j.Ga&&(j.Ga=0)}Ua(d,C)||(g=d.a)}}else g=d.a}g==0&&W.Oa!=null&&W.Oa.fd&&(g=jo(W.ba))}W=g}V=W!=0?null:11>V?Y.f.RGBA.eb:Y.f.kb.y}else V=null;return V};var Ic=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(R,$){for(var q="",E=0;E<4;E++)q+=String.fromCharCode(R[$++]);return q}function p(R,$){return(R[$+0]<<0|R[$+1]<<8|R[$+2]<<16)>>>0}function m(R,$){return(R[$+0]<<0|R[$+1]<<8|R[$+2]<<16|R[$+3]<<24)>>>0}new l;var y=[0],v=[0],S=[],_=new l,w=t,N=(function(R,$){var q={},E=0,L=!1,B=0,z=0;if(q.frames=[],!(function(O,K,Q,te){for(var se=0;se<te;se++)if(O[K+se]!=Q.charCodeAt(se))return!0;return!1})(R,$,"RIFF",4)){var ne,H;for(m(R,$+=4),$+=8;$<R.length;){var F=c(R,$),G=m(R,$+=4);$+=4;var Z=G+(1&G);switch(F){case"VP8 ":case"VP8L":q.frames[E]===void 0&&(q.frames[E]={}),(P=q.frames[E]).src_off=L?z:$-8,P.src_size=B+G+8,E++,L&&(L=!1,B=0,z=0);break;case"VP8X":(P=q.header={}).feature_flags=R[$];var J=$+4;P.canvas_width=1+p(R,J),J+=3,P.canvas_height=1+p(R,J),J+=3;break;case"ALPH":L=!0,B=Z+8,z=$-8;break;case"ANIM":(P=q.header).bgcolor=m(R,$),J=$+4,P.loop_count=(ne=R)[(H=J)+0]<<0|ne[H+1]<<8,J+=2;break;case"ANMF":var ie,P;(P=q.frames[E]={}).offset_x=2*p(R,$),$+=3,P.offset_y=2*p(R,$),$+=3,P.width=1+p(R,$),$+=3,P.height=1+p(R,$),$+=3,P.duration=p(R,$),$+=3,ie=R[$++],P.dispose=1&ie,P.blend=ie>>1&1}F!="ANMF"&&($+=Z)}return q}})(w,0);N.response=w,N.rgbaoutput=!0,N.dataurl=!1;var A=N.header?N.header:null,I=N.frames?N.frames:null;if(A){A.loop_counter=A.loop_count,y=[A.canvas_height],v=[A.canvas_width];for(var D=0;D<I.length&&I[D].blend!=0;D++);}var M=I[0],T=_.WebPDecodeRGBA(w,M.src_off,M.src_size,v,y);M.rgba=T,M.imgwidth=v[0],M.imgheight=y[0];for(var k=0;k<v[0]*y[0]*4;k++)S[k]=T[k];return this.width=v,this.height=y,this.data=S,this}(function(t){var e=function(){return typeof Xl=="function"},n=function(y,v,S,_){var w=4,N=s;switch(_){case t.image_compression.FAST:w=1,N=o;break;case t.image_compression.MEDIUM:w=6,N=a;break;case t.image_compression.SLOW:w=9,N=l}y=r(y,v,S,N);var A=Xl(y,{level:w});return t.__addimage__.arrayBufferToBinaryString(A)},r=function(y,v,S,_){for(var w,N,A,I=y.length/v,D=new Uint8Array(y.length+I),M=p(),T=0;T<I;T+=1){if(A=T*v,w=y.subarray(A,A+v),_)D.set(_(w,S,N),A+T);else{for(var k,R=M.length,$=[];k<R;k+=1)$[k]=M[k](w,S,N);var q=m($.concat());D.set($[q],A+T)}N=w}return D},i=function(y){var v=Array.apply([],y);return v.unshift(0),v},o=function(y,v){var S,_=[],w=y.length;_[0]=1;for(var N=0;N<w;N+=1)S=y[N-v]||0,_[N+1]=y[N]-S+256&255;return _},s=function(y,v,S){var _,w=[],N=y.length;w[0]=2;for(var A=0;A<N;A+=1)_=S&&S[A]||0,w[A+1]=y[A]-_+256&255;return w},a=function(y,v,S){var _,w,N=[],A=y.length;N[0]=3;for(var I=0;I<A;I+=1)_=y[I-v]||0,w=S&&S[I]||0,N[I+1]=y[I]+256-(_+w>>>1)&255;return N},l=function(y,v,S){var _,w,N,A,I=[],D=y.length;I[0]=4;for(var M=0;M<D;M+=1)_=y[M-v]||0,w=S&&S[M]||0,N=S&&S[M-v]||0,A=c(_,w,N),I[M+1]=y[M]-A+256&255;return I},c=function(y,v,S){if(y===v&&v===S)return y;var _=Math.abs(v-S),w=Math.abs(y-S),N=Math.abs(y+v-S-S);return _<=w&&_<=N?y:w<=N?v:S},p=function(){return[i,o,s,a,l]},m=function(y){var v=y.map((function(S){return S.reduce((function(_,w){return _+Math.abs(w)}),0)}));return v.indexOf(Math.min.apply(null,v))};t.processPNG=function(y,v,S,_){var w,N,A,I,D,M,T,k,R,$,q,E,L,B,z,ne=this.decode.FLATE_DECODE,H="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(A=new ty(y)).imgData,N=A.bits,w=A.colorSpace,D=A.colors,[4,6].indexOf(A.colorType)!==-1){if(A.bits===8){R=(k=A.pixelBitlength==32?new Uint32Array(A.decodePixels().buffer):A.pixelBitlength==16?new Uint16Array(A.decodePixels().buffer):new Uint8Array(A.decodePixels().buffer)).length,q=new Uint8Array(R*A.colors),$=new Uint8Array(R);var F,G=A.pixelBitlength-A.bits;for(B=0,z=0;B<R;B++){for(L=k[B],F=0;F<G;)q[z++]=L>>>F&255,F+=A.bits;$[B]=L>>>F&255}}if(A.bits===16){R=(k=new Uint32Array(A.decodePixels().buffer)).length,q=new Uint8Array(R*(32/A.pixelBitlength)*A.colors),$=new Uint8Array(R*(32/A.pixelBitlength)),E=A.colors>1,B=0,z=0;for(var Z=0;B<R;)L=k[B++],q[z++]=L>>>0&255,E&&(q[z++]=L>>>16&255,L=k[B++],q[z++]=L>>>0&255),$[Z++]=L>>>16&255;N=8}_!==t.image_compression.NONE&&e()?(y=n(q,A.width*A.colors,A.colors,_),T=n($,A.width,1,_)):(y=q,T=$,ne=void 0)}if(A.colorType===3&&(w=this.color_spaces.INDEXED,M=A.palette,A.transparency.indexed)){var J=A.transparency.indexed,ie=0;for(B=0,R=J.length;B<R;++B)ie+=J[B];if((ie/=255)===R-1&&J.indexOf(0)!==-1)I=[J.indexOf(0)];else if(ie!==R){for(k=A.decodePixels(),$=new Uint8Array(k.length),B=0,R=k.length;B<R;B++)$[B]=J[k[B]];T=n($,A.width,1)}}var P=(function(O){var K;switch(O){case t.image_compression.FAST:K=11;break;case t.image_compression.MEDIUM:K=13;break;case t.image_compression.SLOW:K=14;break;default:K=12}return K})(_);return ne===this.decode.FLATE_DECODE&&(H="/Predictor "+P+" "),H+="/Colors "+D+" /BitsPerComponent "+N+" /Columns "+A.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(T&&this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),{alias:S,data:y,index:v,filter:ne,decodeParameters:H,transparency:I,palette:M,sMask:T,predictor:P,width:A.width,height:A.height,bitsPerComponent:N,colorSpace:w}}}})(We.API),(function(t){t.processGIF89A=function(e,n,r,i){var o=new ny(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:a},p=new El(100).encode(c,100);return t.processJPEG.call(this,p,n,r,i)},t.processGIF87A=t.processGIF89A})(We.API),Zn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zn.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){At.log("bit decode error:"+n)}},Zn.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Zn.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,l=15&o,c=this.palette[a];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Zn.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},Zn.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,c=o>>15?255:0,p=r*this.width*4+4*i;this.data[p]=l,this.data[p+1]=a,this.data[p+2]=s,this.data[p+3]=c}this.pos+=t}},Zn.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&n)/n*255|0,c=(s>>11)/e*255|0,p=i*this.width*4+4*o;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=a,this.data[p+3]=255}this.pos+=t}},Zn.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Zn.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},Zn.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,i){var o=new Zn(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new El(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}})(We.API),Hd.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,i){var o=new Hd(e),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new El(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}})(We.API),We.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var p=r[c],m=r[c+1],y=r[c+2],v=r[c+3];o[a++]=p,o[a++]=m,o[a++]=y,s[l++]=v}var S=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:S,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},We.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},so=We.API,ca=so.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=c.fof?c.fof:1,m=e.doKerning!==!1,y=0,v=t.length,S=0,_=a[0]||l,w=[];for(n=0;n<v;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?w.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(y=m&&bt(c[r])==="object"&&!isNaN(parseInt(c[r][S],10))?c[r][S]/p:0,w.push((a[r]||_)/l+y)),S=r;return w},Ud=so.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return so.processArabic&&(t=so.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:ca.apply(this,arguments).reduce((function(o,s){return o+s}),0)},Bd=function(t,e,n,r){for(var i=[],o=0,s=t.length,a=0;o!==s&&a+e[o]<n;)a+=e[o],o++;i.push(t.slice(0,o));var l=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(t.slice(l,o)),a=0,l=o),a+=e[o],o++;return l!==o&&i.push(t.slice(l,o)),i},qd=function(t,e,n){n||(n={});var r,i,o,s,a,l,c,p=[],m=[p],y=n.textIndent||0,v=0,S=0,_=t.split(" "),w=ca.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?_[0].length+2:n.lineIndent||0){var N=Array(l).join(" "),A=[];_.map((function(D){(D=D.split(/\s*\n/)).length>1?A=A.concat(D.map((function(M,T){return(T&&M.length?`
`:"")+M}))):A.push(D[0])})),_=A,l=Ud.apply(this,[N,n])}for(o=0,s=_.length;o<s;o++){var I=0;if(r=_[o],l&&r[0]==`
`&&(r=r.substr(1),I=1),y+v+(S=(i=ca.apply(this,[r,n])).reduce((function(D,M){return D+M}),0))>e||I){if(S>e){for(a=Bd.apply(this,[r,i,e-(y+v),e]),p.push(a.shift()),p=[a.pop()];a.length;)m.push([a.shift()]);S=i.slice(r.length-(p[0]?p[0].length:0)).reduce((function(D,M){return D+M}),0)}else p=[r];m.push(p),y=S+l,v=w}else p.push(r),y+=v+S,v=w}return c=l?function(D,M){return(M?N:"")+D.join(" ")}:function(D){return D.join(" ")},m.map(c)},so.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var m=this.internal.getFont(p.fontName,p.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(qd.apply(this,[r[a],s,o]));return c},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(m){return"0x"+parseInt(m,10).toString(16)},s=t.__fontmetrics__.compress=function(m){var y,v,S,_,w=["{"];for(var N in m){if(y=m[N],isNaN(parseInt(N,10))?v="'"+N+"'":(N=parseInt(N,10),v=(v=o(N).slice(2)).slice(0,-1)+r[v.slice(-1)]),typeof y=="number")y<0?(S=o(y).slice(3),_="-"):(S=o(y).slice(2),_=""),S=_+S.slice(0,-1)+r[S.slice(-1)];else{if(bt(y)!=="object")throw new Error("Don't know what to do with value type "+bt(y)+".");S=s(y)}w.push(v+S)}return w.push("}"),w.join("")},a=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,v,S,_,w={},N=1,A=w,I=[],D="",M="",T=m.length-1,k=1;k<T;k+=1)(_=m[k])=="'"?y?(S=y.join(""),y=void 0):y=[]:y?y.push(_):_=="{"?(I.push([A,S]),A={},S=void 0):_=="}"?((v=I.pop())[0][v[1]]=A,S=void 0,A=v[0]):_=="-"?N=-1:S===void 0?n.hasOwnProperty(_)?(D+=n[_],S=parseInt(D,16)*N,N=1,D=""):D+=_:n.hasOwnProperty(_)?(M+=n[_],A[S]=parseInt(M,16)*N,N=1,S=void 0,M=""):M+=_;return w},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var y=m.font,v=p.Unicode[y.postScriptName];v&&(y.metadata.Unicode={},y.metadata.Unicode.widths=v.widths,y.metadata.Unicode.kerning=v.kerning);var S=c.Unicode[y.postScriptName];S&&(y.metadata.Unicode.encoding=S,y.encoding=S.codePages[0])}])})(We.API),(function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(ns(a)),s.metadata=t.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(We),(function(t){function e(){return(Je.canvg?Promise.resolve(Je.canvg):Ll(()=>import("./index.es-Cji0Znj0.js"),__vite__mapDeps([0,1,2,3,4]))).catch((function(n){return Promise.reject(new Error("Could not load canvg: "+n))})).then((function(n){return n.default?n.default:n}))}We.API.addSvgAsImage=function(n,r,i,o,s,a,l,c){if(isNaN(r)||isNaN(i))throw At.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(s))throw At.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=o,p.height=s;var m=p.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,p.width,p.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return e().then((function(S){return S.fromString(m,n,y)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(S){return S.render(y)})).then((function(){v.addImage(p.toDataURL("image/jpeg",1),r,i,o,s,l,c)}))}})(),We.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},We.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],c=0,p=0,m=0;function y(S,_){var w,N=!1;for(w=0;w<S.length;w+=1)S[w]===_&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var v=a.length;for(m=0;m<v;m+=1)n[a[m]].value=n[a[m]].defaultValue,n[a[m]].explicitSet=!1}if(bt(t)==="object"){for(i in t)if(o=t[i],y(a,i)&&o!==void 0){if(n[i].type==="boolean"&&typeof o=="boolean")n[i].value=o;else if(n[i].type==="name"&&y(n[i].valueSet,o))n[i].value=o;else if(n[i].type==="integer"&&Number.isInteger(o))n[i].value=o;else if(n[i].type==="array"){for(c=0;c<o.length;c+=1)if(r=!0,o[c].length===1&&typeof o[c][0]=="number")l.push(String(o[c]-1));else if(o[c].length>1){for(p=0;p<o[c].length;p+=1)typeof o[c][p]!="number"&&(r=!1);r===!0&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var S,_=[];for(S in n)n[S].explicitSet===!0&&(n[S].type==="name"?_.push("/"+S+" /"+n[S].value):_.push("/"+S+" "+n[S].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=o.length+s.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(We.API),(function(t){var e=t.API,n=e.pdfEscape16=function(o,s){for(var a,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],p=[""],m=0,y=o.length;m<y;++m){if(a=s.metadata.characterToGlyph(o.charCodeAt(m)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(m),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return p.join("");a=a.toString(16),p.push(c[4-a.length],a)}return p.join("")},r=function(o){var s,a,l,c,p,m,y;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],m=0,y=(a=Object.keys(o).sort((function(v,S){return v-S}))).length;m<y;m++)s=a[m],l.length>=100&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(c=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,p=s.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var m=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),v="",S=0;S<y.length;S++)v+=String.fromCharCode(y[S]);var _=c();p({data:v,addLength1:!0,objectId:_}),l("endobj");var w=c();p({data:r(a.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var N=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+uo(a.fontName)),l("/FontFile2 "+_+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var A=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+uo(a.fontName)),l("/FontDescriptor "+N+" 0 R"),l("/W "+t.API.PDFObject.convert(m)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+w+" 0 R"),l("/BaseFont /"+uo(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+A+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,p=s.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var m=a.metadata.rawData,y="",v=0;v<m.length;v++)y+=String.fromCharCode(m[v]);var S=c();p({data:y,addLength1:!0,objectId:S}),l("endobj");var _=c();p({data:r(a.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var w=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+S+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+uo(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var N=0;N<a.metadata.hmtx.widths.length;N++)a.metadata.hmtx.widths[N]=parseInt(a.metadata.hmtx.widths[N]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+uo(a.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",l=o.x,c=o.y,p=o.options||{},m=o.mutex||{},y=m.pdfEscape,v=m.activeFontKey,S=m.fonts,_=v,w="",N=0,A="",I=S[_].encoding;if(S[_].encoding!=="Identity-H")return{text:a,x:l,y:c,options:p,mutex:m};for(A=a,_=v,Array.isArray(a)&&(A=a[0]),N=0;N<A.length;N+=1)S[_].metadata.hasOwnProperty("cmap")&&(s=S[_].metadata.cmap.unicode.codeMap[A[N].charCodeAt(0)]),s||A[N].charCodeAt(0)<256&&S[_].metadata.hasOwnProperty("Unicode")?w+=A[N]:w+="";var D="";return parseInt(_.slice(1))<14||I==="WinAnsiEncoding"?D=y(w,_).split("").map((function(M){return M.charCodeAt(0).toString(16)})).join(""):I==="Identity-H"&&(D=n(w,S[_])),m.isHex=!0,{text:D,x:l,y:c,options:p,mutex:m}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],l={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?a.push([i(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):a.push(i(Object.assign({},l,{text:s[c]})).text);o.text=a}else o.text=i(Object.assign({},l,{text:s})).text}])})(We),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(We.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,o,s,a,l,c,p,m=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],S={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","Â«","Â»","Â«","â€¹","â€º","â€¹","â…","â†","â…","â½","â¾","â½","â‚","â‚Ž","â‚","â‰¤","â‰¥","â‰¤","âŒ©","âŒª","âŒ©","ï¹™","ï¹š","ï¹™","ï¹›","ï¹œ","ï¹›","ï¹","ï¹ž","ï¹","ï¹¤","ï¹¥","ï¹¤"],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,I=0;this.__bidiEngine__={};var D=function(E){var L=E.charCodeAt(),B=L>>8,z=_[B];return z!==void 0?m[256*z+(255&L)]:B===252||B===253?"AL":N.test(B)?"L":B===8?"R":"N"},M=function(E){for(var L,B=0;B<E.length;B++){if((L=D(E.charAt(B)))==="L")return!1;if(L==="R")return!0}return!1},T=function(E,L,B,z){var ne,H,F,G,Z=L[z];switch(Z){case"L":case"R":A=!1;break;case"N":case"AN":break;case"EN":A&&(Z="AN");break;case"AL":A=!0,Z="R";break;case"WS":Z="N";break;case"CS":z<1||z+1>=L.length||(ne=B[z-1])!=="EN"&&ne!=="AN"||(H=L[z+1])!=="EN"&&H!=="AN"?Z="N":A&&(H="AN"),Z=H===ne?H:"N";break;case"ES":Z=(ne=z>0?B[z-1]:"B")==="EN"&&z+1<L.length&&L[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&B[z-1]==="EN"){Z="EN";break}if(A){Z="N";break}for(F=z+1,G=L.length;F<G&&L[F]==="ET";)F++;Z=F<G&&L[F]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(G=L.length,F=z+1;F<G&&L[F]==="NSM";)F++;if(F<G){var J=E[z],ie=J>=1425&&J<=2303||J===64286;if(ne=L[F],ie&&(ne==="R"||ne==="AL")){Z="R";break}}}Z=z<1||(ne=L[z-1])==="B"?"N":B[z-1];break;case"B":A=!1,i=!0,Z=I;break;case"S":o=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"BN":Z="N"}return Z},k=function(E,L,B){var z=E.split("");return B&&R(z,B,{hiLevel:I}),z.reverse(),L&&L.reverse(),z.join("")},R=function(E,L,B){var z,ne,H,F,G,Z=-1,J=E.length,ie=0,P=[],O=I?v:y,K=[];for(A=!1,i=!1,o=!1,ne=0;ne<J;ne++)K[ne]=D(E[ne]);for(H=0;H<J;H++){if(G=ie,P[H]=T(E,K,P,H),z=240&(ie=O[G][S[P[H]]]),ie&=15,L[H]=F=O[ie][5],z>0)if(z===16){for(ne=Z;ne<H;ne++)L[ne]=1;Z=-1}else Z=-1;if(O[ie][6])Z===-1&&(Z=H);else if(Z>-1){for(ne=Z;ne<H;ne++)L[ne]=F;Z=-1}K[H]==="B"&&(L[H]=0),B.hiLevel|=F}o&&(function(Q,te,se){for(var de=0;de<se;de++)if(Q[de]==="S"){te[de]=I;for(var pe=de-1;pe>=0&&Q[pe]==="WS";pe--)te[pe]=I}})(K,L,J)},$=function(E,L,B,z,ne){if(!(ne.hiLevel<E)){if(E===1&&I===1&&!i)return L.reverse(),void(B&&B.reverse());for(var H,F,G,Z,J=L.length,ie=0;ie<J;){if(z[ie]>=E){for(G=ie+1;G<J&&z[G]>=E;)G++;for(Z=ie,F=G-1;Z<F;Z++,F--)H=L[Z],L[Z]=L[F],L[F]=H,B&&(H=B[Z],B[Z]=B[F],B[F]=H);ie=G}ie++}}},q=function(E,L,B){var z=E.split(""),ne={hiLevel:I};return B||(B=[]),R(z,B,ne),(function(H,F,G){if(G.hiLevel!==0&&p)for(var Z,J=0;J<H.length;J++)F[J]===1&&(Z=w.indexOf(H[J]))>=0&&(H[J]=w[Z+1])})(z,B,ne),$(2,z,L,B,ne),$(1,z,L,B,ne),z.join("")};return this.__bidiEngine__.doBidiReorder=function(E,L,B){if((function(ne,H){if(H)for(var F=0;F<ne.length;F++)H[F]=F;a===void 0&&(a=M(ne)),c===void 0&&(c=M(ne))})(E,L),s||!l||c)if(s&&l&&a^c)I=a?1:0,E=k(E,L,B);else if(!s&&l&&c)I=a?1:0,E=q(E,L,B),E=k(E,L);else if(!s||a||l||c){if(s&&!l&&a^c)E=k(E,L),a?(I=0,E=q(E,L,B)):(I=1,E=q(E,L,B),E=k(E,L));else if(s&&a&&!l&&c)I=1,E=q(E,L,B),E=k(E,L);else if(!s&&!l&&a^c){var z=p;a?(I=1,E=q(E,L,B),I=0,p=!1,E=q(E,L,B),p=z):(I=0,E=q(E,L,B),E=k(E,L),I=1,p=!1,E=q(E,L,B),p=z,E=k(E,L))}}else I=0,E=q(E,L,B);else I=a?1:0,E=q(E,L,B);return E},this.__bidiEngine__.setOptions=function(E){E&&(s=E.isInputVisual,l=E.isOutputVisual,a=E.isInputRtl,c=E.isOutputRtl,p=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,o=(r.x,r.y,r.options||{}),s=(r.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([n.doBidiReorder(i[a])]);r.text=s}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])})(We),We.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new oi(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new vy(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ry(this.contents),this.head=new oy(this),this.name=new uy(this),this.cmap=new oh(this),this.toUnicode={},this.hhea=new sy(this),this.maxp=new dy(this),this.hmtx=new fy(this),this.post=new ly(this),this.os2=new ay(this),this.loca=new my(this),this.glyf=new hy(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,l,c;for(c=[],s=0,a=(l=this.bbox).length;s<a;s++)e=l[s],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(n=i>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return s*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var ir,oi=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,o,s,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],o.push(this.writeByte(n));return o},t})(),ry=(function(){var t;function e(n){var r,i,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,o,s,a,l,c,p,m,y,v,S,_;for(_ in v=Object.keys(n).length,l=Math.log(2),m=16*Math.floor(Math.log(v)/l),s=Math.floor(m/l),p=16*v-m,(i=new oi).writeInt(this.scalarType),i.writeShort(v),i.writeShort(m),i.writeShort(s),i.writeShort(p),o=16*v,c=i.pos+o,a=null,S=[],n)for(y=n[_],i.writeString(_),i.writeInt(t(y)),i.writeInt(c),i.writeInt(y.length),S=S.concat(y),_==="head"&&(a=c),c+=y.length;c%4;)S.push(0),c++;return i.write(S),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,o,s;for(n=sh.call(n);n.length%4;)n.push(0);for(o=new oi(n),i=0,r=0,s=n.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),iy={}.hasOwnProperty,yr=function(t,e){for(var n in e)iy.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};ir=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var oy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new oi).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e})(),Vd=(function(){function t(e,n){var r,i,o,s,a,l,c,p,m,y,v,S,_,w,N,A,I;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(v=e.readUInt16(),y=v/2,e.pos+=6,o=(function(){var D,M;for(M=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)M.push(e.readUInt16());return M})(),e.pos+=2,_=(function(){var D,M;for(M=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)M.push(e.readUInt16());return M})(),c=(function(){var D,M;for(M=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)M.push(e.readUInt16());return M})(),p=(function(){var D,M;for(M=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)M.push(e.readUInt16());return M})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var D,M;for(M=[],l=D=0;0<=i?D<i:D>i;l=0<=i?++D:--D)M.push(e.readUInt16());return M})(),l=N=0,I=o.length;N<I;l=++N)for(w=o[l],r=A=S=_[l];S<=w?A<=w:A>=w;r=S<=w?++A:--A)p[l]===0?s=r+c[l]:(s=a[p[l]/2+(r-S)-(y-l)]||0)!==0&&(s+=c[l]),this.codeMap[r]=65535&s}e.pos=m}return t.encode=function(e,n){var r,i,o,s,a,l,c,p,m,y,v,S,_,w,N,A,I,D,M,T,k,R,$,q,E,L,B,z,ne,H,F,G,Z,J,ie,P,O,K,Q,te,se,de,pe,_e,Ce,Ee;switch(z=new oi,s=Object.keys(e).sort((function(Ie,He){return Ie-He})),n){case"macroman":for(_=0,w=(function(){var Ie=[];for(S=0;S<256;++S)Ie.push(0);return Ie})(),A={0:0},o={},ne=0,Z=s.length;ne<Z;ne++)A[pe=e[i=s[ne]]]==null&&(A[pe]=++_),o[i]={old:e[i],new:A[e[i]]},w[i]=A[e[i]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(w),{charMap:o,subtable:z.data,maxGlyphID:_+1};case"unicode":for(L=[],m=[],I=0,A={},r={},N=c=null,H=0,J=s.length;H<J;H++)A[M=e[i=s[H]]]==null&&(A[M]=++I),r[i]={old:M,new:A[M]},a=A[M]-i,N!=null&&a===c||(N&&m.push(N),L.push(i),c=a),N=i;for(N&&m.push(N),m.push(65535),L.push(65535),q=2*($=L.length),R=2*Math.pow(Math.log($)/Math.LN2,2),y=Math.log(R/2)/Math.LN2,k=2*$-R,l=[],T=[],v=[],S=F=0,ie=L.length;F<ie;S=++F){if(E=L[S],p=m[S],E===65535){l.push(0),T.push(0);break}if(E-(B=r[E].new)>=32768)for(l.push(0),T.push(2*(v.length+$-S)),i=G=E;E<=p?G<=p:G>=p;i=E<=p?++G:--G)v.push(r[i].new);else l.push(B-E),T.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*$+2*v.length),z.writeUInt16(0),z.writeUInt16(q),z.writeUInt16(R),z.writeUInt16(y),z.writeUInt16(k),se=0,P=m.length;se<P;se++)i=m[se],z.writeUInt16(i);for(z.writeUInt16(0),de=0,O=L.length;de<O;de++)i=L[de],z.writeUInt16(i);for(_e=0,K=l.length;_e<K;_e++)a=l[_e],z.writeUInt16(a);for(Ce=0,Q=T.length;Ce<Q;Ce++)D=T[Ce],z.writeUInt16(D);for(Ee=0,te=v.length;Ee<te;Ee++)_=v[Ee],z.writeUInt16(_);return{charMap:r,subtable:z.data,maxGlyphID:I+1}}},t})(),oh=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new Vd(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,o;return r==null&&(r="macroman"),i=Vd.encode(n,r),(o=new oi).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},e})(),sy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e})(),ay=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i})(),this.charRange=(function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e})(),ly=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var s;for(i=n.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)r=n.readByte(),o.push(this.names.push(n.readString(r)));return o;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],s=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;s=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e})(),cy=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},uy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,o,s,a,l,c,p,m,y,v;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},s=m=0,y=i.length;m<y;s=++m)o=i[s],n.pos=o.offset,p=n.readString(o.length),a=new cy(p,o),c[v=o.nameID]==null&&(c[v]=[]),c[o.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e})(),dy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e})(),fy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,o,s,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,m;for(m=[],r=p=0;0<=o?p<o:p>o;r=0<=o?++p:--p)m.push(n.readInt16());return m})(),this.widths=(function(){var p,m,y,v;for(v=[],p=0,m=(y=this.metrics).length;p<m;p++)s=y[p],v.push(s.advance);return v}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=o?a<o:a>o;r=0<=o?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e})(),sh=[].slice,hy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,o,s,a,l,c,p,m,y;return n in this.cache?this.cache[n]:(s=this.file.loca,r=this.file.contents,i=s.indexOf(n),(o=s.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new oi(r.read(o))).readShort(),p=l.readShort(),y=l.readShort(),c=l.readShort(),m=l.readShort(),this.cache[n]=a===-1?new gy(l,p,y,c,m):new py(l,a,p,y,c,m),this.cache[n]))},e.prototype.encode=function(n,r,i){var o,s,a,l,c;for(a=[],s=[],l=0,c=r.length;l<c;l++)o=n[r[l]],s.push(a.length),o&&(a=a.concat(o.encode(i)));return s.push(a.length),{table:a,offsets:s}},e})(),py=(function(){function t(e,n,r,i,o,s){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),gy=(function(){function t(e,n,r,i,o){var s,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new oi(sh.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),my=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=2)s.push(2*n.readUInt16());return s}).call(this):(function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=4)s.push(n.readUInt32());return s}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),o=0,s=0,a=0;a<i.length;++a)if(i[a]=o,s<r.length&&r[s]==a){++s,i[a]=o;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(o+=c)}for(var p=new Array(4*i.length),m=0;m<i.length;++m)p[4*m+3]=255&i[m],p[4*m+2]=(65280&i[m])>>8,p[4*m+1]=(16711680&i[m])>>16,p[4*m]=(4278190080&i[m])>>24;return p},e})(),vy=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,o;for(n in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,o,s,a,l;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in n=[],i)(r=i[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in l=this.glyphsFor(n))r=l[o],i[o]=r;return i},t.prototype.encode=function(e,n){var r,i,o,s,a,l,c,p,m,y,v,S,_,w,N;for(i in r=oh.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),v={0:0},N=r.charMap)v[(l=N[i]).old]=l.new;for(S in y=r.maxGlyphID,s)S in v||(v[S]=y++);return p=(function(A){var I,D;for(I in D={},A)D[A[I]]=I;return D})(v),m=Object.keys(p).sort((function(A,I){return A-I})),_=(function(){var A,I,D;for(D=[],A=0,I=m.length;A<I;A++)a=m[A],D.push(p[a]);return D})(),o=this.font.glyf.encode(s,_,v),c=this.font.loca.encode(o.offsets,_),w={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},t})();We.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,o,s;if(Array.isArray(n))return"["+(function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in o=["<<"],n)s=n[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+n},e})();const yy=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Yv,AcroFormAppearance:qe,AcroFormButton:Jt,AcroFormCheckBox:os,AcroFormChoiceField:Si,AcroFormComboBox:Ai,AcroFormEditBox:rs,AcroFormListBox:_i,AcroFormPasswordField:ss,AcroFormPushButton:is,AcroFormRadioButton:Ci,AcroFormTextField:ri,GState:ls,ShadingPattern:Qr,TilingPattern:Ni,default:We,jsPDF:We},Symbol.toStringTag,{value:"Module"}));var pa={exports:{}};const xy=zh(yy);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var Gd=pa.exports,zd;function by(){return zd||(zd=1,(function(t,e){(function(r,i){t.exports=i((function(){try{return xy}catch{}})())})(typeof globalThis<"u"?globalThis:typeof Gd<"u"?Gd:typeof window<"u"?window:typeof self<"u"?self:Wh,function(n){return(function(){var r={172:(function(a,l){var c=this&&this.__extends||(function(){var y=function(v,S){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,w){_.__proto__=w}||function(_,w){for(var N in w)Object.prototype.hasOwnProperty.call(w,N)&&(_[N]=w[N])},y(v,S)};return function(v,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");y(v,S);function _(){this.constructor=v}v.prototype=S===null?Object.create(S):(_.prototype=S.prototype,new _)}})();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var p=(function(){function y(v,S,_){this.table=S,this.pageNumber=S.pageNumber,this.pageCount=this.pageNumber,this.settings=S.settings,this.cursor=_,this.doc=v.getDocument()}return y})();l.HookData=p;var m=(function(y){c(v,y);function v(S,_,w,N,A,I){var D=y.call(this,S,_,I)||this;return D.cell=w,D.row=N,D.column=A,D.section=N.section,D}return v})(p);l.CellHookData=m}),340:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var p=c(4),m=c(136),y=c(744),v=c(776),S=c(664),_=c(972);function w(N){N.API.autoTable=function(){for(var A=[],I=0;I<arguments.length;I++)A[I]=arguments[I];var D;A.length===1?D=A[0]:(console.error("Use of deprecated autoTable initiation"),D=A[2]||{},D.columns=A[0],D.body=A[1]);var M=(0,v.parseInput)(this,D),T=(0,_.createTable)(this,M);return(0,S.drawTable)(this,T),this},N.API.lastAutoTable=!1,N.API.previousAutoTable=!1,N.API.autoTable.previous=!1,N.API.autoTableText=function(A,I,D,M){(0,m.default)(A,I,D,M,this)},N.API.autoTableSetDefaults=function(A){return y.DocHandler.setDefaults(A,this),this},N.autoTableSetDefaults=function(A,I){y.DocHandler.setDefaults(A,I)},N.API.autoTableHtmlToJson=function(A,I){var D;if(I===void 0&&(I=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var M=new y.DocHandler(this),T=(0,p.parseHtml)(M,A,window,I,!1),k=T.head,R=T.body,$=((D=k[0])===null||D===void 0?void 0:D.map(function(q){return q.content}))||[];return{columns:$,rows:R,data:R}},N.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var A=this.lastAutoTable;return A&&A.finalY?A.finalY:0},N.API.autoTableAddPageContent=function(A){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),N.API.autoTable.globalDefaults||(N.API.autoTable.globalDefaults={}),N.API.autoTable.globalDefaults.addPageContent=A,this},N.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=w}),136:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(p,m,y,v,S){v=v||{};var _=1.15,w=S.internal.scaleFactor,N=S.internal.getFontSize()/w,A=S.getLineHeightFactor?S.getLineHeightFactor():_,I=N*A,D=/\r\n|\r|\n/g,M="",T=1;if((v.valign==="middle"||v.valign==="bottom"||v.halign==="center"||v.halign==="right")&&(M=typeof p=="string"?p.split(D):p,T=M.length||1),y+=N*(2-_),v.valign==="middle"?y-=T/2*I:v.valign==="bottom"&&(y-=T*I),v.halign==="center"||v.halign==="right"){var k=N;if(v.halign==="center"&&(k*=.5),M&&T>=1){for(var R=0;R<M.length;R++)S.text(M[R],m-S.getStringUnitWidth(M[R])*k,y),y+=I;return S}m-=S.getStringUnitWidth(p)*k}return v.halign==="justify"?S.text(p,m,y,{maxWidth:v.maxWidth||100,align:"justify"}):S.text(p,m,y),S}l.default=c}),420:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(S,_,w){w.applyStyles(_,!0);var N=Array.isArray(S)?S:[S],A=N.map(function(I){return w.getTextWidth(I)}).reduce(function(I,D){return Math.max(I,D)},0);return A}l.getStringWidth=c;function p(S,_,w,N){var A=_.settings.tableLineWidth,I=_.settings.tableLineColor;S.applyStyles({lineWidth:A,lineColor:I});var D=m(A,!1);D&&S.rect(w.x,w.y,_.getWidth(S.pageSize().width),N.y-w.y,D)}l.addTableBorder=p;function m(S,_){var w=S>0,N=_||_===0;return w&&N?"DF":w?"S":N?"F":null}l.getFillStyle=m;function y(S,_){var w,N,A,I;if(S=S||_,Array.isArray(S)){if(S.length>=4)return{top:S[0],right:S[1],bottom:S[2],left:S[3]};if(S.length===3)return{top:S[0],right:S[1],bottom:S[2],left:S[1]};if(S.length===2)return{top:S[0],right:S[1],bottom:S[0],left:S[1]};S.length===1?S=S[0]:S=_}return typeof S=="object"?(typeof S.vertical=="number"&&(S.top=S.vertical,S.bottom=S.vertical),typeof S.horizontal=="number"&&(S.right=S.horizontal,S.left=S.horizontal),{left:(w=S.left)!==null&&w!==void 0?w:_,top:(N=S.top)!==null&&N!==void 0?N:_,right:(A=S.right)!==null&&A!==void 0?A:_,bottom:(I=S.bottom)!==null&&I!==void 0?I:_}):(typeof S!="number"&&(S=_),{top:S,right:S,bottom:S,left:S})}l.parseSpacing=y;function v(S,_){var w=y(_.settings.margin,0);return S.pageSize().width-(w.left+w.right)}l.getPageAvailableWidth=v}),796:(function(a,l){var c=this&&this.__extends||(function(){var v=function(S,_){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,N){w.__proto__=N}||function(w,N){for(var A in N)Object.prototype.hasOwnProperty.call(N,A)&&(w[A]=N[A])},v(S,_)};return function(S,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");v(S,_);function w(){this.constructor=S}S.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)}})();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var p=(function(v){c(S,v);function S(_){var w=v.call(this)||this;return w._element=_,w}return S})(Array);l.HtmlRowInput=p;function m(v){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/v,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=m;function y(v){var S={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return S[v]}l.getTheme=y}),903:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var p=c(420);function m(w,N,A,I,D){var M={},T=1.3333333333333333,k=v(N,function(Z){return D.getComputedStyle(Z).backgroundColor});k!=null&&(M.fillColor=k);var R=v(N,function(Z){return D.getComputedStyle(Z).color});R!=null&&(M.textColor=R);var $=_(I,A);$&&(M.cellPadding=$);var q="borderTopColor",E=T*A,L=I.borderTopWidth;if(I.borderBottomWidth===L&&I.borderRightWidth===L&&I.borderLeftWidth===L){var B=(parseFloat(L)||0)/E;B&&(M.lineWidth=B)}else M.lineWidth={top:(parseFloat(I.borderTopWidth)||0)/E,right:(parseFloat(I.borderRightWidth)||0)/E,bottom:(parseFloat(I.borderBottomWidth)||0)/E,left:(parseFloat(I.borderLeftWidth)||0)/E},M.lineWidth.top||(M.lineWidth.right?q="borderRightColor":M.lineWidth.bottom?q="borderBottomColor":M.lineWidth.left&&(q="borderLeftColor"));var z=v(N,function(Z){return D.getComputedStyle(Z)[q]});z!=null&&(M.lineColor=z);var ne=["left","right","center","justify"];ne.indexOf(I.textAlign)!==-1&&(M.halign=I.textAlign),ne=["middle","bottom","top"],ne.indexOf(I.verticalAlign)!==-1&&(M.valign=I.verticalAlign);var H=parseInt(I.fontSize||"");isNaN(H)||(M.fontSize=H/T);var F=y(I);F&&(M.fontStyle=F);var G=(I.fontFamily||"").toLowerCase();return w.indexOf(G)!==-1&&(M.font=G),M}l.parseCss=m;function y(w){var N="";return(w.fontWeight==="bold"||w.fontWeight==="bolder"||parseInt(w.fontWeight)>=700)&&(N="bold"),(w.fontStyle==="italic"||w.fontStyle==="oblique")&&(N+="italic"),N}function v(w,N){var A=S(w,N);if(!A)return null;var I=A.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!I||!Array.isArray(I))return null;var D=[parseInt(I[1]),parseInt(I[2]),parseInt(I[3])],M=parseInt(I[4]);return M===0||isNaN(D[0])||isNaN(D[1])||isNaN(D[2])?null:D}function S(w,N){var A=N(w);return A==="rgba(0, 0, 0, 0)"||A==="transparent"||A==="initial"||A==="inherit"?w.parentElement==null?null:S(w.parentElement,N):A}function _(w,N){var A=[w.paddingTop,w.paddingRight,w.paddingBottom,w.paddingLeft],I=96/(72/N),D=(parseInt(w.lineHeight)-parseInt(w.fontSize))/N/2,M=A.map(function(k){return parseInt(k||"0")/I}),T=(0,p.parseSpacing)(M,0);return D>T.top&&(T.top=D),D>T.bottom&&(T.bottom=D),T}}),744:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},p=(function(){function m(y){this.jsPDFDocument=y,this.userStyles={textColor:y.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:y.internal.getFontSize(),fontStyle:y.internal.getFont().fontStyle,font:y.internal.getFont().fontName,lineWidth:y.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:y.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return m.setDefaults=function(y,v){v===void 0&&(v=null),v?v.__autoTableDocumentDefaults=y:c=y},m.unifyColor=function(y){return Array.isArray(y)?y:typeof y=="number"?[y,y,y]:typeof y=="string"?[y]:null},m.prototype.applyStyles=function(y,v){var S,_,w;v===void 0&&(v=!1),y.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(y.fontStyle);var N=this.jsPDFDocument.internal.getFont(),A=N.fontStyle,I=N.fontName;if(y.font&&(I=y.font),y.fontStyle){A=y.fontStyle;var D=this.getFontList()[I];D&&D.indexOf(A)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(D[0]),A=D[0])}if(this.jsPDFDocument.setFont(I,A),y.fontSize&&this.jsPDFDocument.setFontSize(y.fontSize),!v){var M=m.unifyColor(y.fillColor);M&&(S=this.jsPDFDocument).setFillColor.apply(S,M),M=m.unifyColor(y.textColor),M&&(_=this.jsPDFDocument).setTextColor.apply(_,M),M=m.unifyColor(y.lineColor),M&&(w=this.jsPDFDocument).setDrawColor.apply(w,M),typeof y.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(y.lineWidth)}},m.prototype.splitTextToSize=function(y,v,S){return this.jsPDFDocument.splitTextToSize(y,v,S)},m.prototype.rect=function(y,v,S,_,w){return this.jsPDFDocument.rect(y,v,S,_,w)},m.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},m.prototype.getTextWidth=function(y){return this.jsPDFDocument.getTextWidth(y)},m.prototype.getDocument=function(){return this.jsPDFDocument},m.prototype.setPage=function(y){this.jsPDFDocument.setPage(y)},m.prototype.addPage=function(){return this.jsPDFDocument.addPage()},m.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},m.prototype.getGlobalOptions=function(){return c||{}},m.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},m.prototype.pageSize=function(){var y=this.jsPDFDocument.internal.pageSize;return y.width==null&&(y={width:y.getWidth(),height:y.getHeight()}),y},m.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},m.prototype.getLineHeightFactor=function(){var y=this.jsPDFDocument;return y.getLineHeightFactor?y.getLineHeightFactor():1.15},m.prototype.getLineHeight=function(y){return y/this.scaleFactor()*this.getLineHeightFactor()},m.prototype.pageNumber=function(){var y=this.jsPDFDocument.internal.getCurrentPageInfo();return y?y.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},m})();l.DocHandler=p}),4:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var p=c(903),m=c(796);function y(_,w,N,A,I){var D,M;A===void 0&&(A=!1),I===void 0&&(I=!1);var T;typeof w=="string"?T=N.document.querySelector(w):T=w;var k=Object.keys(_.getFontList()),R=_.scaleFactor(),$=[],q=[],E=[];if(!T)return console.error("Html table could not be found with input: ",w),{head:$,body:q,foot:E};for(var L=0;L<T.rows.length;L++){var B=T.rows[L],z=(M=(D=B==null?void 0:B.parentElement)===null||D===void 0?void 0:D.tagName)===null||M===void 0?void 0:M.toLowerCase(),ne=v(k,R,N,B,A,I);ne&&(z==="thead"?$.push(ne):z==="tfoot"?E.push(ne):q.push(ne))}return{head:$,body:q,foot:E}}l.parseHtml=y;function v(_,w,N,A,I,D){for(var M=new m.HtmlRowInput(A),T=0;T<A.cells.length;T++){var k=A.cells[T],R=N.getComputedStyle(k);if(I||R.display!=="none"){var $=void 0;D&&($=(0,p.parseCss)(_,k,w,R,N)),M.push({rowSpan:k.rowSpan,colSpan:k.colSpan,styles:$,_element:k,content:S(k)})}}var q=N.getComputedStyle(A);if(M.length>0&&(I||q.display!=="none"))return M}function S(_){var w=_.cloneNode(!0);return w.innerHTML=w.innerHTML.replace(/\n/g,"").replace(/ +/g," "),w.innerHTML=w.innerHTML.split(/<br.*?>/).map(function(N){return N.trim()}).join(`
`),w.innerText||w.textContent||""}}),776:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var p=c(4),m=c(356),y=c(420),v=c(744),S=c(792);function _(T,k){var R=new v.DocHandler(T),$=R.getDocumentOptions(),q=R.getGlobalOptions();(0,S.default)(R,q,$,k);var E=(0,m.assign)({},q,$,k),L;typeof window<"u"&&(L=window);var B=w(q,$,k),z=N(q,$,k),ne=A(R,E),H=D(R,E,L);return{id:k.tableId,content:H,hooks:z,styles:B,settings:ne}}l.parseInput=_;function w(T,k,R){for(var $={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},q=function(z){if(z==="columnStyles"){var ne=T[z],H=k[z],F=R[z];$.columnStyles=(0,m.assign)({},ne,H,F)}else{var G=[T,k,R],Z=G.map(function(J){return J[z]||{}});$[z]=(0,m.assign)({},Z[0],Z[1],Z[2])}},E=0,L=Object.keys($);E<L.length;E++){var B=L[E];q(B)}return $}function N(T,k,R){for(var $=[T,k,R],q={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},E=0,L=$;E<L.length;E++){var B=L[E];B.didParseCell&&q.didParseCell.push(B.didParseCell),B.willDrawCell&&q.willDrawCell.push(B.willDrawCell),B.didDrawCell&&q.didDrawCell.push(B.didDrawCell),B.willDrawPage&&q.willDrawPage.push(B.willDrawPage),B.didDrawPage&&q.didDrawPage.push(B.didDrawPage)}return q}function A(T,k){var R,$,q,E,L,B,z,ne,H,F,G,Z,J=(0,y.parseSpacing)(k.margin,40/T.scaleFactor()),ie=(R=I(T,k.startY))!==null&&R!==void 0?R:J.top,P;k.showFoot===!0?P="everyPage":k.showFoot===!1?P="never":P=($=k.showFoot)!==null&&$!==void 0?$:"everyPage";var O;k.showHead===!0?O="everyPage":k.showHead===!1?O="never":O=(q=k.showHead)!==null&&q!==void 0?q:"everyPage";var K=(E=k.useCss)!==null&&E!==void 0?E:!1,Q=k.theme||(K?"plain":"striped"),te=!!k.horizontalPageBreak,se=(L=k.horizontalPageBreakRepeat)!==null&&L!==void 0?L:null;return{includeHiddenHtml:(B=k.includeHiddenHtml)!==null&&B!==void 0?B:!1,useCss:K,theme:Q,startY:ie,margin:J,pageBreak:(z=k.pageBreak)!==null&&z!==void 0?z:"auto",rowPageBreak:(ne=k.rowPageBreak)!==null&&ne!==void 0?ne:"auto",tableWidth:(H=k.tableWidth)!==null&&H!==void 0?H:"auto",showHead:O,showFoot:P,tableLineWidth:(F=k.tableLineWidth)!==null&&F!==void 0?F:0,tableLineColor:(G=k.tableLineColor)!==null&&G!==void 0?G:200,horizontalPageBreak:te,horizontalPageBreakRepeat:se,horizontalPageBreakBehaviour:(Z=k.horizontalPageBreakBehaviour)!==null&&Z!==void 0?Z:"afterAllRows"}}function I(T,k){var R=T.getLastAutoTable(),$=T.scaleFactor(),q=T.pageNumber(),E=!1;if(R&&R.startPageNumber){var L=R.startPageNumber+R.pageNumber-1;E=L===q}return typeof k=="number"?k:(k==null||k===!1)&&E&&(R==null?void 0:R.finalY)!=null?R.finalY+20/$:null}function D(T,k,R){var $=k.head||[],q=k.body||[],E=k.foot||[];if(k.html){var L=k.includeHiddenHtml;if(R){var B=(0,p.parseHtml)(T,k.html,R,L,k.useCss)||{};$=B.head||$,q=B.body||$,E=B.foot||$}else console.error("Cannot parse html in non browser environment")}var z=k.columns||M($,q,E);return{columns:z,head:$,body:q,foot:E}}function M(T,k,R){var $=T[0]||k[0]||R[0]||[],q=[];return Object.keys($).filter(function(E){return E!=="_element"}).forEach(function(E){var L=1,B;Array.isArray($)?B=$[parseInt(E)]:B=$[E],typeof B=="object"&&!Array.isArray(B)&&(L=(B==null?void 0:B.colSpan)||1);for(var z=0;z<L;z++){var ne=void 0;Array.isArray($)?ne=q.length:ne=E+(z>0?"_".concat(z):"");var H={dataKey:ne};q.push(H)}}),q}}),792:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(m,y,v,S){for(var _=function(I){I&&typeof I!="object"&&console.error("The options parameter should be of type object, is: "+typeof I),typeof I.extendWidth<"u"&&(I.tableWidth=I.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof I.margins<"u"&&(typeof I.margin>"u"&&(I.margin=I.margins),console.error("Use of deprecated option: margins, use margin instead.")),I.startY&&typeof I.startY!="number"&&(console.error("Invalid value for startY option",I.startY),delete I.startY),!I.didDrawPage&&(I.afterPageContent||I.beforePageContent||I.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),I.didDrawPage=function(E){m.applyStyles(m.userStyles),I.beforePageContent&&I.beforePageContent(E),m.applyStyles(m.userStyles),I.afterPageContent&&I.afterPageContent(E),m.applyStyles(m.userStyles),I.afterPageAdd&&E.pageNumber>1&&E.afterPageAdd(E),m.applyStyles(m.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(E){I[E]&&console.error('The "'.concat(E,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(E){var L=E[0],B=E[1];I[B]&&(console.error("Use of deprecated option ".concat(B,". Use ").concat(L," instead")),I[L]=I[B])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(E){var L=typeof E=="string"?E:E[0],B=typeof E=="string"?E:E[1];typeof I[L]<"u"&&(typeof I.styles[B]>"u"&&(I.styles[B]=I[L]),console.error("Use of deprecated option: "+L+", use the style "+B+" instead."))});for(var D=0,M=["styles","bodyStyles","headStyles","footStyles"];D<M.length;D++){var T=M[D];p(I[T]||{})}for(var k=I.columnStyles||{},R=0,$=Object.keys(k);R<$.length;R++){var q=$[R];p(k[q]||{})}},w=0,N=[y,v,S];w<N.length;w++){var A=N[w];_(A)}}l.default=c;function p(m){m.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),m.minCellHeight||(m.minCellHeight=m.rowHeight)):m.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),m.cellWidth||(m.cellWidth=m.columnWidth))}}),260:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var p=c(796),m=c(172),y=c(420),v=(function(){function N(A,I){this.pageNumber=1,this.pageCount=1,this.id=A.id,this.settings=A.settings,this.styles=A.styles,this.hooks=A.hooks,this.columns=I.columns,this.head=I.head,this.body=I.body,this.foot=I.foot}return N.prototype.getHeadHeight=function(A){return this.head.reduce(function(I,D){return I+D.getMaxCellHeight(A)},0)},N.prototype.getFootHeight=function(A){return this.foot.reduce(function(I,D){return I+D.getMaxCellHeight(A)},0)},N.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},N.prototype.callCellHooks=function(A,I,D,M,T,k){for(var R=0,$=I;R<$.length;R++){var q=$[R],E=new m.CellHookData(A,this,D,M,T,k),L=q(E)===!1;if(D.text=Array.isArray(D.text)?D.text:[D.text],L)return!1}return!0},N.prototype.callEndPageHooks=function(A,I){A.applyStyles(A.userStyles);for(var D=0,M=this.hooks.didDrawPage;D<M.length;D++){var T=M[D];T(new m.HookData(A,this,I))}},N.prototype.callWillDrawPageHooks=function(A,I){for(var D=0,M=this.hooks.willDrawPage;D<M.length;D++){var T=M[D];T(new m.HookData(A,this,I))}},N.prototype.getWidth=function(A){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var I=this.columns.reduce(function(M,T){return M+T.wrappedWidth},0);return I}else{var D=this.settings.margin;return A-D.left-D.right}},N})();l.Table=v;var S=(function(){function N(A,I,D,M,T){T===void 0&&(T=!1),this.height=0,this.raw=A,A instanceof p.HtmlRowInput&&(this.raw=A._element,this.element=A._element),this.index=I,this.section=D,this.cells=M,this.spansMultiplePages=T}return N.prototype.getMaxCellHeight=function(A){var I=this;return A.reduce(function(D,M){var T;return Math.max(D,((T=I.cells[M.index])===null||T===void 0?void 0:T.height)||0)},0)},N.prototype.hasRowSpan=function(A){var I=this;return A.filter(function(D){var M=I.cells[D.index];return M?M.rowSpan>1:!1}).length>0},N.prototype.canEntireRowFit=function(A,I){return this.getMaxCellHeight(I)<=A},N.prototype.getMinimumRowHeight=function(A,I){var D=this;return A.reduce(function(M,T){var k=D.cells[T.index];if(!k)return 0;var R=I.getLineHeight(k.styles.fontSize),$=k.padding("vertical"),q=$+R;return q>M?q:M},0)},N})();l.Row=S;var _=(function(){function N(A,I,D){var M,T;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=I,this.section=D,this.raw=A;var k=A;A!=null&&typeof A=="object"&&!Array.isArray(A)?(this.rowSpan=A.rowSpan||1,this.colSpan=A.colSpan||1,k=(T=(M=A.content)!==null&&M!==void 0?M:A.title)!==null&&T!==void 0?T:A,A._element&&(this.raw=A._element)):(this.rowSpan=1,this.colSpan=1);var R=k!=null?""+k:"",$=/\r\n|\r|\n/g;this.text=R.split($)}return N.prototype.getTextPos=function(){var A;if(this.styles.valign==="top")A=this.y+this.padding("top");else if(this.styles.valign==="bottom")A=this.y+this.height-this.padding("bottom");else{var I=this.height-this.padding("vertical");A=this.y+I/2+this.padding("top")}var D;if(this.styles.halign==="right")D=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var M=this.width-this.padding("horizontal");D=this.x+M/2+this.padding("left")}else D=this.x+this.padding("left");return{x:D,y:A}},N.prototype.getContentHeight=function(A,I){I===void 0&&(I=1.15);var D=Array.isArray(this.text)?this.text.length:1,M=this.styles.fontSize/A*I,T=D*M+this.padding("vertical");return Math.max(T,this.styles.minCellHeight)},N.prototype.padding=function(A){var I=(0,y.parseSpacing)(this.styles.cellPadding,0);return A==="vertical"?I.top+I.bottom:A==="horizontal"?I.left+I.right:I[A]},N})();l.Cell=_;var w=(function(){function N(A,I,D){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=A,this.raw=I,this.index=D}return N.prototype.getMaxCustomCellWidth=function(A){for(var I=0,D=0,M=A.allRows();D<M.length;D++){var T=M[D],k=T.cells[this.index];k&&typeof k.styles.cellWidth=="number"&&(I=Math.max(I,k.styles.cellWidth))}return I},N})();l.Column=w}),356:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(p,m,y,v,S){if(p==null)throw new TypeError("Cannot convert undefined or null to object");for(var _=Object(p),w=1;w<arguments.length;w++){var N=arguments[w];if(N!=null)for(var A in N)Object.prototype.hasOwnProperty.call(N,A)&&(_[A]=N[A])}return _}l.assign=c}),972:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var p=c(744),m=c(260),y=c(324),v=c(796),S=c(356);function _(T,k){var R=new p.DocHandler(T),$=w(k,R.scaleFactor()),q=new m.Table(k,$);return(0,y.calculateWidths)(R,q),R.applyStyles(R.userStyles),q}l.createTable=_;function w(T,k){var R=T.content,$=D(R.columns);if(R.head.length===0){var q=A($,"head");q&&R.head.push(q)}if(R.foot.length===0){var q=A($,"foot");q&&R.foot.push(q)}var E=T.settings.theme,L=T.styles;return{columns:$,head:N("head",R.head,$,L,E,k),body:N("body",R.body,$,L,E,k),foot:N("foot",R.foot,$,L,E,k)}}function N(T,k,R,$,q,E){var L={},B=k.map(function(z,ne){for(var H=0,F={},G=0,Z=0,J=0,ie=R;J<ie.length;J++){var P=ie[J];if(L[P.index]==null||L[P.index].left===0)if(Z===0){var O=void 0;Array.isArray(z)?O=z[P.index-G-H]:O=z[P.dataKey];var K={};typeof O=="object"&&!Array.isArray(O)&&(K=(O==null?void 0:O.styles)||{});var Q=M(T,P,ne,q,$,E,K),te=new m.Cell(O,Q,T);F[P.dataKey]=te,F[P.index]=te,Z=te.colSpan-1,L[P.index]={left:te.rowSpan-1,times:Z}}else Z--,G++;else L[P.index].left--,Z=L[P.index].times,H++}return new m.Row(z,ne,T,F)});return B}function A(T,k){var R={};return T.forEach(function($){if($.raw!=null){var q=I(k,$.raw);q!=null&&(R[$.dataKey]=q)}}),Object.keys(R).length>0?R:null}function I(T,k){if(T==="head"){if(typeof k=="object")return k.header||k.title||null;if(typeof k=="string"||typeof k=="number")return k}else if(T==="foot"&&typeof k=="object")return k.footer;return null}function D(T){return T.map(function(k,R){var $,q,E;return typeof k=="object"?E=(q=($=k.dataKey)!==null&&$!==void 0?$:k.key)!==null&&q!==void 0?q:R:E=R,new m.Column(E,k,R)})}function M(T,k,R,$,q,E,L){var B=(0,v.getTheme)($),z;T==="head"?z=q.headStyles:T==="body"?z=q.bodyStyles:T==="foot"&&(z=q.footStyles);var ne=(0,S.assign)({},B.table,B[T],q.styles,z),H=q.columnStyles[k.dataKey]||q.columnStyles[k.index]||{},F=T==="body"?H:{},G=T==="body"&&R%2===0?(0,S.assign)({},B.alternateRow,q.alternateRowStyles):{},Z=(0,v.defaultStyles)(E),J=(0,S.assign)({},Z,ne,G,F);return(0,S.assign)(J,L)}}),664:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var p=c(420),m=c(260),y=c(744),v=c(356),S=c(136),_=c(224);function w(H,F){var G=F.settings,Z=G.startY,J=G.margin,ie={x:J.left,y:Z},P=F.getHeadHeight(F.columns)+F.getFootHeight(F.columns),O=Z+J.bottom+P;if(G.pageBreak==="avoid"){var K=F.body,Q=K.reduce(function(de,pe){return de+pe.height},0);O+=Q}var te=new y.DocHandler(H);(G.pageBreak==="always"||G.startY!=null&&O>te.pageSize().height)&&(ne(te),ie.y=J.top),F.callWillDrawPageHooks(te,ie);var se=(0,v.assign)({},ie);F.startPageNumber=te.pageNumber(),G.horizontalPageBreak?N(te,F,se,ie):(te.applyStyles(te.userStyles),(G.showHead==="firstPage"||G.showHead==="everyPage")&&F.head.forEach(function(de){return q(te,F,de,ie,F.columns)}),te.applyStyles(te.userStyles),F.body.forEach(function(de,pe){var _e=pe===F.body.length-1;$(te,F,de,_e,se,ie,F.columns)}),te.applyStyles(te.userStyles),(G.showFoot==="lastPage"||G.showFoot==="everyPage")&&F.foot.forEach(function(de){return q(te,F,de,ie,F.columns)})),(0,p.addTableBorder)(te,F,se,ie),F.callEndPageHooks(te,ie),F.finalY=ie.y,H.lastAutoTable=F,H.previousAutoTable=F,H.autoTable&&(H.autoTable.previous=F),te.applyStyles(te.userStyles)}l.drawTable=w;function N(H,F,G,Z){var J=(0,_.calculateAllColumnsCanFitInPage)(H,F),ie=F.settings;if(ie.horizontalPageBreakBehaviour==="afterAllRows")J.forEach(function(Q,te){H.applyStyles(H.userStyles),te>0?z(H,F,G,Z,Q.columns,!0):A(H,F,Z,Q.columns),I(H,F,G,Z,Q.columns),M(H,F,Z,Q.columns)});else for(var P=-1,O=J[0],K=function(){var Q=P;if(O){H.applyStyles(H.userStyles);var te=O.columns;P>=0?z(H,F,G,Z,te,!0):A(H,F,Z,te),Q=D(H,F,P+1,Z,te),M(H,F,Z,te)}var se=Q-P;J.slice(1).forEach(function(de){H.applyStyles(H.userStyles),z(H,F,G,Z,de.columns,!0),D(H,F,P+1,Z,de.columns,se),M(H,F,Z,de.columns)}),P=Q};P<F.body.length-1;)K()}function A(H,F,G,Z){var J=F.settings;H.applyStyles(H.userStyles),(J.showHead==="firstPage"||J.showHead==="everyPage")&&F.head.forEach(function(ie){return q(H,F,ie,G,Z)})}function I(H,F,G,Z,J){H.applyStyles(H.userStyles),F.body.forEach(function(ie,P){var O=P===F.body.length-1;$(H,F,ie,O,G,Z,J)})}function D(H,F,G,Z,J,ie){H.applyStyles(H.userStyles),ie=ie??F.body.length;var P=Math.min(G+ie,F.body.length),O=-1;return F.body.slice(G,P).forEach(function(K,Q){var te=G+Q===F.body.length-1,se=B(H,F,te,Z);K.canEntireRowFit(se,J)&&(q(H,F,K,Z,J),O=G+Q)}),O}function M(H,F,G,Z){var J=F.settings;H.applyStyles(H.userStyles),(J.showFoot==="lastPage"||J.showFoot==="everyPage")&&F.foot.forEach(function(ie){return q(H,F,ie,G,Z)})}function T(H,F,G){var Z=G.getLineHeight(H.styles.fontSize),J=H.padding("vertical"),ie=Math.floor((F-J)/Z);return Math.max(0,ie)}function k(H,F,G,Z){var J={};H.spansMultiplePages=!0,H.height=0;for(var ie=0,P=0,O=G.columns;P<O.length;P++){var K=O[P],Q=H.cells[K.index];if(Q){Array.isArray(Q.text)||(Q.text=[Q.text]);var te=new m.Cell(Q.raw,Q.styles,Q.section);te=(0,v.assign)(te,Q),te.text=[];var se=T(Q,F,Z);Q.text.length>se&&(te.text=Q.text.splice(se,Q.text.length));var de=Z.scaleFactor(),pe=Z.getLineHeightFactor();Q.contentHeight=Q.getContentHeight(de,pe),Q.contentHeight>=F&&(Q.contentHeight=F,te.styles.minCellHeight-=F),Q.contentHeight>H.height&&(H.height=Q.contentHeight),te.contentHeight=te.getContentHeight(de,pe),te.contentHeight>ie&&(ie=te.contentHeight),J[K.index]=te}}var _e=new m.Row(H.raw,-1,H.section,J,!0);_e.height=ie;for(var Ce=0,Ee=G.columns;Ce<Ee.length;Ce++){var K=Ee[Ce],te=_e.cells[K.index];te&&(te.height=_e.height);var Q=H.cells[K.index];Q&&(Q.height=H.height)}return _e}function R(H,F,G,Z){var J=H.pageSize().height,ie=Z.settings.margin,P=ie.top+ie.bottom,O=J-P;F.section==="body"&&(O-=Z.getHeadHeight(Z.columns)+Z.getFootHeight(Z.columns));var K=F.getMinimumRowHeight(Z.columns,H),Q=K<G;if(K>O)return console.error("Will not be able to print row ".concat(F.index," correctly since it's minimum height is larger than page height")),!0;if(!Q)return!1;var te=F.hasRowSpan(Z.columns),se=F.getMaxCellHeight(Z.columns)>O;return se?(te&&console.error("The content of row ".concat(F.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(te||Z.settings.rowPageBreak==="avoid")}function $(H,F,G,Z,J,ie,P){var O=B(H,F,Z,ie);if(G.canEntireRowFit(O,P))q(H,F,G,ie,P);else if(R(H,G,O,F)){var K=k(G,O,F,H);q(H,F,G,ie,P),z(H,F,J,ie,P),$(H,F,K,Z,J,ie,P)}else z(H,F,J,ie,P),$(H,F,G,Z,J,ie,P)}function q(H,F,G,Z,J){Z.x=F.settings.margin.left;for(var ie=0,P=J;ie<P.length;ie++){var O=P[ie],K=G.cells[O.index];if(!K){Z.x+=O.width;continue}H.applyStyles(K.styles),K.x=Z.x,K.y=Z.y;var Q=F.callCellHooks(H,F.hooks.willDrawCell,K,G,O,Z);if(Q===!1){Z.x+=O.width;continue}E(H,K,Z);var te=K.getTextPos();(0,S.default)(K.text,te.x,te.y,{halign:K.styles.halign,valign:K.styles.valign,maxWidth:Math.ceil(K.width-K.padding("left")-K.padding("right"))},H.getDocument()),F.callCellHooks(H,F.hooks.didDrawCell,K,G,O,Z),Z.x+=O.width}Z.y+=G.height}function E(H,F,G){var Z=F.styles;if(H.getDocument().setFillColor(H.getDocument().getFillColor()),typeof Z.lineWidth=="number"){var J=(0,p.getFillStyle)(Z.lineWidth,Z.fillColor);J&&H.rect(F.x,G.y,F.width,F.height,J)}else typeof Z.lineWidth=="object"&&(Z.fillColor&&H.rect(F.x,G.y,F.width,F.height,"F"),L(H,F,G,Z.lineWidth))}function L(H,F,G,Z){var J,ie,P,O;Z.top&&(J=G.x,ie=G.y,P=G.x+F.width,O=G.y,Z.right&&(P+=.5*Z.right),Z.left&&(J-=.5*Z.left),K(Z.top,J,ie,P,O)),Z.bottom&&(J=G.x,ie=G.y+F.height,P=G.x+F.width,O=G.y+F.height,Z.right&&(P+=.5*Z.right),Z.left&&(J-=.5*Z.left),K(Z.bottom,J,ie,P,O)),Z.left&&(J=G.x,ie=G.y,P=G.x,O=G.y+F.height,Z.top&&(ie-=.5*Z.top),Z.bottom&&(O+=.5*Z.bottom),K(Z.left,J,ie,P,O)),Z.right&&(J=G.x+F.width,ie=G.y,P=G.x+F.width,O=G.y+F.height,Z.top&&(ie-=.5*Z.top),Z.bottom&&(O+=.5*Z.bottom),K(Z.right,J,ie,P,O));function K(Q,te,se,de,pe){H.getDocument().setLineWidth(Q),H.getDocument().line(te,se,de,pe,"S")}}function B(H,F,G,Z){var J=F.settings.margin.bottom,ie=F.settings.showFoot;return(ie==="everyPage"||ie==="lastPage"&&G)&&(J+=F.getFootHeight(F.columns)),H.pageSize().height-Z.y-J}function z(H,F,G,Z,J,ie){J===void 0&&(J=[]),ie===void 0&&(ie=!1),H.applyStyles(H.userStyles),F.settings.showFoot==="everyPage"&&!ie&&F.foot.forEach(function(O){return q(H,F,O,Z,J)}),F.callEndPageHooks(H,Z);var P=F.settings.margin;(0,p.addTableBorder)(H,F,G,Z),ne(H),F.pageNumber++,F.pageCount++,Z.x=P.left,Z.y=P.top,G.y=P.top,F.callWillDrawPageHooks(H,Z),F.settings.showHead==="everyPage"&&(F.head.forEach(function(O){return q(H,F,O,Z,J)}),H.applyStyles(H.userStyles))}l.addPage=z;function ne(H){var F=H.pageNumber();H.setPage(F+1);var G=H.pageNumber();return G===F?(H.addPage(),!0):!1}}),224:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var p=c(420);function m(v,S,_){var w;_===void 0&&(_={});var N=(0,p.getPageAvailableWidth)(v,S),A=new Map,I=[],D=[],M=[];S.settings.horizontalPageBreakRepeat,Array.isArray(S.settings.horizontalPageBreakRepeat)?M=S.settings.horizontalPageBreakRepeat:(typeof S.settings.horizontalPageBreakRepeat=="string"||typeof S.settings.horizontalPageBreakRepeat=="number")&&(M=[S.settings.horizontalPageBreakRepeat]),M.forEach(function($){var q=S.columns.find(function(E){return E.dataKey===$||E.index===$});q&&!A.has(q.index)&&(A.set(q.index,!0),I.push(q.index),D.push(S.columns[q.index]),N-=q.wrappedWidth)});for(var T=!0,k=(w=_==null?void 0:_.start)!==null&&w!==void 0?w:0;k<S.columns.length;){if(A.has(k)){k++;continue}var R=S.columns[k].wrappedWidth;if(T||N>=R)T=!1,I.push(k),D.push(S.columns[k]),N-=R;else break;k++}return{colIndexes:I,columns:D,lastIndex:k-1}}function y(v,S){for(var _=[],w=0;w<S.columns.length;w++){var N=m(v,S,{start:w});N.columns.length&&(_.push(N),w=N.lastIndex)}return _}l.calculateAllColumnsCanFitInPage=y}),324:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var p=c(420);function m(I,D){y(I,D);var M=[],T=0;D.columns.forEach(function(R){var $=R.getMaxCustomCellWidth(D);$?R.width=$:(R.width=R.wrappedWidth,M.push(R)),T+=R.width});var k=D.getWidth(I.pageSize().width)-T;k&&(k=v(M,k,function(R){return Math.max(R.minReadableWidth,R.minWidth)})),k&&(k=v(M,k,function(R){return R.minWidth})),k=Math.abs(k),!D.settings.horizontalPageBreak&&k>.1/I.scaleFactor()&&(k=k<1?k:Math.round(k),console.warn("Of the table content, ".concat(k," units width could not fit page"))),_(D),w(D,I),S(D)}l.calculateWidths=m;function y(I,D){var M=I.scaleFactor(),T=D.settings.horizontalPageBreak,k=(0,p.getPageAvailableWidth)(I,D);D.allRows().forEach(function(R){for(var $=0,q=D.columns;$<q.length;$++){var E=q[$],L=R.cells[E.index];if(L){var B=D.hooks.didParseCell;D.callCellHooks(I,B,L,R,E,null);var z=L.padding("horizontal");L.contentWidth=(0,p.getStringWidth)(L.text,L.styles,I)+z;var ne=(0,p.getStringWidth)(L.text.join(" ").split(/[^\S\u00A0]+/),L.styles,I);if(L.minReadableWidth=ne+L.padding("horizontal"),typeof L.styles.cellWidth=="number")L.minWidth=L.styles.cellWidth,L.wrappedWidth=L.styles.cellWidth;else if(L.styles.cellWidth==="wrap"||T===!0)L.contentWidth>k?(L.minWidth=k,L.wrappedWidth=k):(L.minWidth=L.contentWidth,L.wrappedWidth=L.contentWidth);else{var H=10/M;L.minWidth=L.styles.minCellWidth||H,L.wrappedWidth=L.contentWidth,L.minWidth>L.wrappedWidth&&(L.wrappedWidth=L.minWidth)}}}}),D.allRows().forEach(function(R){for(var $=0,q=D.columns;$<q.length;$++){var E=q[$],L=R.cells[E.index];if(L&&L.colSpan===1)E.wrappedWidth=Math.max(E.wrappedWidth,L.wrappedWidth),E.minWidth=Math.max(E.minWidth,L.minWidth),E.minReadableWidth=Math.max(E.minReadableWidth,L.minReadableWidth);else{var B=D.styles.columnStyles[E.dataKey]||D.styles.columnStyles[E.index]||{},z=B.cellWidth||B.minCellWidth;z&&typeof z=="number"&&(E.minWidth=z,E.wrappedWidth=z)}L&&(L.colSpan>1&&!E.minWidth&&(E.minWidth=L.minWidth),L.colSpan>1&&!E.wrappedWidth&&(E.wrappedWidth=L.minWidth))}})}function v(I,D,M){for(var T=D,k=I.reduce(function(H,F){return H+F.wrappedWidth},0),R=0;R<I.length;R++){var $=I[R],q=$.wrappedWidth/k,E=T*q,L=$.width+E,B=M($),z=L<B?B:L;D-=z-$.width,$.width=z}if(D=Math.round(D*1e10)/1e10,D){var ne=I.filter(function(H){return D<0?H.width>M(H):!0});ne.length&&(D=v(ne,D,M))}return D}l.resizeColumns=v;function S(I){for(var D={},M=1,T=I.allRows(),k=0;k<T.length;k++)for(var R=T[k],$=0,q=I.columns;$<q.length;$++){var E=q[$],L=D[E.index];if(M>1)M--,delete R.cells[E.index];else if(L)L.cell.height+=R.height,M=L.cell.colSpan,delete R.cells[E.index],L.left--,L.left<=1&&delete D[E.index];else{var B=R.cells[E.index];if(!B)continue;if(B.height=R.height,B.rowSpan>1){var z=T.length-k,ne=B.rowSpan>z?z:B.rowSpan;D[E.index]={cell:B,left:ne,row:R}}}}}function _(I){for(var D=I.allRows(),M=0;M<D.length;M++)for(var T=D[M],k=null,R=0,$=0,q=0;q<I.columns.length;q++){var E=I.columns[q];if($-=1,$>1&&I.columns[q+1])R+=E.width,delete T.cells[E.index];else if(k){var L=k;delete T.cells[E.index],k=null,L.width=E.width+R}else{var L=T.cells[E.index];if(!L)continue;if($=L.colSpan,R=0,L.colSpan>1){k=L,R+=E.width;continue}L.width=E.width+R}}}function w(I,D){for(var M={count:0,height:0},T=0,k=I.allRows();T<k.length;T++){for(var R=k[T],$=0,q=I.columns;$<q.length;$++){var E=q[$],L=R.cells[E.index];if(L){D.applyStyles(L.styles,!0);var B=L.width-L.padding("horizontal");if(L.styles.overflow==="linebreak")L.text=D.splitTextToSize(L.text,B+1/D.scaleFactor(),{fontSize:L.styles.fontSize});else if(L.styles.overflow==="ellipsize")L.text=N(L.text,B,L.styles,D,"...");else if(L.styles.overflow==="hidden")L.text=N(L.text,B,L.styles,D,"");else if(typeof L.styles.overflow=="function"){var z=L.styles.overflow(L.text,B);typeof z=="string"?L.text=[z]:L.text=z}L.contentHeight=L.getContentHeight(D.scaleFactor(),D.getLineHeightFactor());var ne=L.contentHeight/L.rowSpan;L.rowSpan>1&&M.count*M.height<ne*L.rowSpan?M={height:ne,count:L.rowSpan}:M&&M.count>0&&M.height>ne&&(ne=M.height),ne>R.height&&(R.height=ne)}}M.count--}}function N(I,D,M,T,k){return I.map(function(R){return A(R,D,M,T,k)})}l.ellipsize=N;function A(I,D,M,T,k){var R=1e4*T.scaleFactor();if(D=Math.ceil(D*R)/R,D>=(0,p.getStringWidth)(I,M,T))return I;for(;D<(0,p.getStringWidth)(I+k,M,T)&&!(I.length<=1);)I=I.substring(0,I.length-1);return I.trim()+k}}),964:(function(a){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=n})},i={};function o(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,o),c.exports}var s={};return(function(){var a=s;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=o(340),c=o(776),p=o(664),m=o(972),y=o(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return y.Table}});var v=o(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return v.CellHookData}});var S=o(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return S.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return S.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return S.Row}});function _(D){(0,l.default)(D)}a.applyPlugin=_;function w(D,M){var T=(0,c.parseInput)(D,M),k=(0,m.createTable)(D,T);(0,p.drawTable)(D,k)}function N(D,M){var T=(0,c.parseInput)(D,M);return(0,m.createTable)(D,T)}a.__createTable=N;function A(D,M){(0,p.drawTable)(D,M)}a.__drawTable=A;try{var I=o(964);I.jsPDF&&(I=I.jsPDF),_(I)}catch{}a.default=w})(),s})()})})(pa)),pa.exports}by();const Wd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nx=({data:t,grandTotals:e,sortConfig:n,onToggleSort:r,showAllPages:i,setShowAllPages:o,onExportPDF:s,isExporting:a,onPreviewImage:l,onNavigate:c,onMonthClick:p})=>{const[m,y]=ve.useState(!0),[v,S]=ve.useState(!1),[_,w]=ve.useState(!0),[N,A]=ve.useState(!0),[I,D]=ve.useState("All"),M=ve.useMemo(()=>{const q=new Set(t.map(E=>E.teamName));return Array.from(q).sort()},[t]),T=ve.useMemo(()=>I==="All"?t:t.filter(q=>q.teamName===I),[t,I]),{rowSpans:k,displayRow:R}=ve.useMemo(()=>{const q=new Array(T.length).fill(0),E=new Array(T.length).fill(!0);let L=0;for(;L<T.length;){const B=T[L].teamName;let z=1;for(;L+z<T.length&&T[L+z].teamName===B;)z++;q[L]=z,E[L]=!0;for(let ne=1;ne<z;ne++)q[L+ne]=0,E[L+ne]=!1;L+=z}return{rowSpans:q,displayRow:E}},[T]),$=(q,E)=>{const L=[{key:"index",label:"#"},{key:"teamName",label:"áž€áŸ’ážšáž»áž˜ (Team)",sortable:!0,sortKey:"teamName"},{key:"logo",label:"Logo"},{key:"pageName",label:"ážˆáŸ’áž˜áŸ„áŸ‡ Page",sortable:!0,sortKey:"pageName"},{key:`total${q}`,label:`ážŸážšáž»áž” (${q})`,sortable:!0,sortKey:q.toLowerCase()},...Wd.map(B=>({key:`${E}_${B}`,label:B}))];return h.jsxs("div",{className:"hidden xl:flex page-card flex-col mb-8 !p-6 border-gray-700/50 shadow-xl overflow-hidden bg-gray-900/40",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("h3",{className:`text-xl font-black flex items-center gap-2 ${q==="Revenue"?"text-blue-300":"text-green-400"}`,children:[h.jsx("span",{className:`w-2 h-6 rounded-full ${q==="Revenue"?"bg-blue-600":"bg-green-600"}`}),"ážáž¶ážšáž¶áž„",q==="Revenue"?"áž…áŸ†ážŽáž¼áž›":"áž”áŸ’ážšáž¶áž€áŸ‹áž…áŸ†ážŽáŸáž‰","ážáž¶áž˜ Page (Desktop)"]}),h.jsxs("div",{className:"flex items-center gap-2",children:[q==="Revenue"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"relative group mr-1",children:[h.jsxs("select",{value:I,onChange:B=>D(B.target.value),className:"btn !py-1 !px-3 !pl-8 text-[10px] font-black border transition-all bg-gray-800 border-gray-700 text-gray-400 hover:text-white uppercase appearance-none cursor-pointer focus:border-blue-500 outline-none",children:[h.jsx("option",{value:"All",children:"ALL TEAMS"}),M.map(B=>h.jsx("option",{value:B,children:String(B).toUpperCase()},B))]}),h.jsx("svg",{className:"w-3.5 h-3.5 text-gray-500 absolute left-2.5 top-1/2 -translate-y-1/2 pointer-events-none group-hover:text-blue-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})]}),h.jsx("button",{onClick:()=>o(!i),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${i?"bg-purple-600 border-purple-500 text-white shadow-lg shadow-purple-900/20":"bg-gray-800 border-gray-700 text-gray-400"}`,children:i?"ALL PAGES":"ACTIVE ONLY"}),h.jsxs("button",{onClick:s,disabled:a,className:"btn !py-1 !px-4 text-[10px] font-black bg-red-600/20 border border-red-500/30 text-red-400 hover:bg-red-600 hover:text-white transition-all flex items-center gap-2",children:[a?h.jsx(Pr,{size:"sm"}):h.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"EXPORT PDF"]})]}),h.jsx("button",{onClick:()=>A(!N),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${N?"bg-indigo-600 border-indigo-500 text-white":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"MERGE"}),h.jsx("button",{onClick:()=>w(!_),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${_?"bg-orange-600 border-orange-500 text-white":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"COLOR"}),h.jsx("button",{onClick:()=>S(!v),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${v?"bg-blue-600 border-blue-500 text-white shadow-lg":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"FREEZE"}),h.jsx("button",{onClick:()=>y(!m),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${m?"bg-gray-700 border-gray-600 text-white shadow-lg":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"BORDER"})]})]}),h.jsx("div",{className:`overflow-x-auto custom-scrollbar pb-2 ${m?"border-2 border-white/20 rounded-2xl shadow-[0_0_40px_rgba(0,0,0,0.6)]":""}`,children:h.jsxs("table",{className:`report-table w-full border-separate border-spacing-0 text-sm ${m?"border-collapse":""}`,children:[h.jsx("thead",{className:"bg-[#0f172a] backdrop-blur-md",children:h.jsx("tr",{className:"border-b-2 border-white/20",children:L.map(B=>{let z="",ne={};v&&(B.key==="index"?(z="sticky left-0 z-30 bg-[#0f172a]",ne={width:"45px",minWidth:"45px"}):B.key==="teamName"?(z="sticky left-[45px] z-30 bg-[#0f172a] border-r border-white/20 shadow-md",ne={minWidth:"130px"}):B.key==="logo"?(z="sticky z-30 bg-[#0f172a]",ne={left:"175px",width:"50px",minWidth:"50px"}):B.key==="pageName"?(z="sticky z-30 bg-[#0f172a] shadow-md",ne={left:"225px",minWidth:"160px"}):B.key.includes("total")&&(z="sticky z-30 bg-[#0f172a] border-r border-white/20 shadow-lg",ne={left:"385px",width:"100px",minWidth:"100px"}));const H=B.key.includes("total")?q==="Revenue"?"bg-blue-900/80":"bg-green-900/80":"";return h.jsx("th",{onClick:()=>B.sortable&&r(B.sortKey),className:`px-4 py-5 whitespace-nowrap text-left font-black uppercase tracking-wider border-b-2 border-white/20 ${m?"border-x border-white/10":""} ${z} ${H} ${B.sortable?"cursor-pointer hover:bg-gray-700":""}`,style:ne,children:h.jsxs("div",{className:"flex items-center gap-1",children:[B.label," ",B.sortable&&n.key===B.sortKey&&h.jsx("span",{children:n.direction==="asc"?"â†‘":"â†“"})]})},B.key)})})}),h.jsx("tbody",{className:"divide-y divide-white/10",children:T.map((B,z)=>{const ne=N?R[z]:!0,H=N?k[z]:1,F=Array.from(String(B.teamName)).reduce((ie,P)=>ie+P.charCodeAt(0),0)%5,Z=[{bg:"bg-blue-500/5",border:"border-l-4 border-l-blue-500"},{bg:"bg-purple-500/5",border:"border-l-4 border-l-purple-500"},{bg:"bg-emerald-500/5",border:"border-l-4 border-l-emerald-500"},{bg:"bg-orange-500/5",border:"border-l-4 border-l-orange-500"},{bg:"bg-pink-500/5",border:"border-l-4 border-l-pink-500"}][F],J=_?Z.bg:"hover:bg-blue-500/5";return h.jsx("tr",{className:`${J} transition-colors group border-b border-white/10`,children:L.map(ie=>{const P=`px-4 py-4 lg:py-5 whitespace-nowrap border-white/10 ${m?"border-x border-white/10":""}`;let O="",K={};if(v&&(ie.key==="index"?(O="sticky left-0 z-10 bg-[#020617]",K={width:"45px",minWidth:"45px"}):ie.key==="teamName"?(O="sticky left-[45px] z-10 bg-[#020617] border-r border-white/20 shadow-md",K={width:"130px",minWidth:"130px"}):ie.key==="logo"?(O="sticky z-10 bg-[#020617]",K={left:"175px",width:"50px",minWidth:"50px"}):ie.key==="pageName"?(O="sticky z-10 bg-[#020617] shadow-md",K={left:"225px",minWidth:"160px"}):ie.key.includes("total")&&(O="sticky z-10 bg-[#020617] border-r border-white/20 shadow-lg",K={left:"385px",width:"100px",minWidth:"100px"})),ie.key==="index")return h.jsx("td",{className:`${P} text-center font-bold text-gray-500 ${O}`,style:K,children:z+1},ie.key);if(ie.key==="teamName")return ne?h.jsx("td",{rowSpan:H,className:`${P} font-black text-white bg-gray-900/95 align-middle text-center ${O} ${_?Z.border:""} border-b border-white/10 cursor-pointer hover:text-blue-400`,style:K,onClick:()=>c("team",B.teamName),children:h.jsx("div",{className:"bg-gray-800/80 py-1 px-3 rounded-xl border border-white/5 shadow-sm inline-block",children:B.teamName})},ie.key):null;if(ie.key==="logo")return h.jsx("td",{className:`${P} text-center ${O} border-b border-white/10`,style:K,children:h.jsx("img",{src:at(B.logoUrl),className:"w-9 h-9 rounded-full border border-gray-700 mx-auto shadow-md cursor-pointer hover:scale-110 transition-transform",alt:"logo",onClick:()=>l(at(B.logoUrl))})},ie.key);if(ie.key==="pageName")return h.jsx("td",{className:`${P} font-black text-white ${O} border-b border-white/10 cursor-pointer hover:text-blue-400 hover:underline transition-colors`,style:K,onClick:()=>c("page",B.pageName),children:B.pageName},ie.key);if(ie.key.includes("total"))return h.jsxs("td",{className:`${P} text-right font-black ${O} ${q==="Revenue"?"text-blue-100 bg-blue-600/10 hover:text-blue-300":"text-green-100 bg-green-600/10"} border-b border-white/10 cursor-pointer`,style:K,onClick:()=>c("page",B.pageName),children:["$",(q==="Revenue"?B.revenue:B.profit).toLocaleString(void 0,{minimumFractionDigits:2})]},ie.key);if(ie.key.startsWith(E)){const Q=B[ie.key]||0,te=q==="Profit"?Q>0?"text-green-400":Q<0?"text-red-400":"text-gray-500":Q>0?"text-blue-300":"text-gray-500",se=Wd.indexOf(ie.key.split("_")[1]);return h.jsx("td",{className:`${P} text-right font-bold font-mono ${te} border-b border-white/10 cursor-pointer hover:bg-gray-800 transition-colors`,onClick:()=>p(B.pageName,se),children:Q!==0?`$${Q.toLocaleString(void 0,{minimumFractionDigits:2})}`:"-"},ie.key)}return h.jsx("td",{className:`${P} border-b border-white/10`,children:"-"},ie.key)})},B.pageName)})}),h.jsx("tfoot",{className:"bg-[#0f172a] font-black border-t-2 border-white/20",children:h.jsx("tr",{className:"border-t-2 border-white/20",children:L.map((B,z)=>{const ne=`px-4 py-5 whitespace-nowrap border-t-2 border-white/20 ${m?"border-x border-white/10":""}`;let H="",F={};return v&&(B.key==="index"?(H="sticky left-0 z-30 bg-[#0f172a]",F={width:"45px",minWidth:"45px"}):B.key==="teamName"?(H="sticky left-[45px] z-30 bg-[#0f172a] border-r border-white/20 shadow-md",F={minWidth:"130px"}):B.key==="logo"?(H="sticky z-30 bg-[#0f172a]",F={left:"175px",width:"50px",minWidth:"50px"}):B.key==="pageName"?(H="sticky z-30 bg-[#0f172a] shadow-md",F={left:"225px",minWidth:"160px"}):B.key.includes("total")&&(H="sticky z-30 bg-[#0f172a] border-r border-white/20 shadow-lg",F={left:"385px",width:"100px",minWidth:"100px"})),z===0?h.jsx("td",{className:`${ne} uppercase tracking-widest text-white font-black ${H}`,style:F,colSpan:4,children:"ážŸážšáž»áž”ážšáž½áž˜ (GRAND TOTAL)"},B.key):["teamName","logo","pageName"].includes(B.key)?null:B.key.includes("total")?h.jsxs("td",{className:`${ne} text-right ${H} ${q==="Revenue"?"text-blue-300 bg-blue-600/10":"text-green-300 bg-green-600/10"}`,style:F,children:["$",(q==="Revenue"?e.revenue:e.profit).toLocaleString(void 0,{minimumFractionDigits:2})]},B.key):B.key.startsWith(E)?h.jsxs("td",{className:`${ne} text-right text-gray-300 font-mono`,children:["$",e[B.key].toLocaleString(void 0,{minimumFractionDigits:2})]},B.key):h.jsx("td",{className:ne},B.key)})})})]})})]})};return h.jsxs(h.Fragment,{children:[$("Revenue","rev"),$("Profit","prof")]})},wy=({data:t,dataType:e,rowSpans:n,displayRow:r,MONTHS:i,grandTotals:o,onNavigate:s,onPreviewImage:a,onMonthClick:l})=>h.jsx("div",{className:"bg-[#0f172a] border border-white/10 rounded-[2.5rem] overflow-hidden shadow-2xl animate-fade-in flex flex-col w-full relative",children:h.jsx("div",{className:"overflow-x-auto custom-scrollbar w-full relative",children:h.jsxs("table",{className:"w-max min-w-full text-sm border-separate border-spacing-0",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"h-16 bg-[#0f172a]",children:[h.jsx("th",{className:"sticky left-0 z-30 bg-[#0f172a] px-2 text-center text-gray-500 font-black border-b border-white/10 w-[50px] min-w-[50px] border-r border-white/5",children:"#"}),h.jsx("th",{className:"sticky left-[50px] z-30 bg-[#0f172a] px-4 text-left text-white font-black uppercase tracking-wider border-b border-white/10 w-[110px] min-w-[110px] border-r border-white/5",children:"Team"}),h.jsx("th",{className:"sticky left-[160px] z-30 bg-[#0f172a] px-4 text-left text-white font-black uppercase tracking-wider border-b border-white/10 w-[200px] min-w-[200px] shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] border-r border-white/5",children:"Page Name"}),h.jsxs("th",{className:`px-6 text-right font-black uppercase tracking-wider border-b border-white/10 ${e==="revenue"?"text-blue-300 bg-blue-900/10":"text-green-300 bg-green-900/10"} min-w-[140px]`,children:["Total ",e==="revenue"?"Rev":"Prof"]}),i.map(c=>h.jsx("th",{className:"px-4 text-right text-gray-400 font-bold uppercase border-b border-white/10 min-w-[90px]",children:c},c))]})}),h.jsx("tbody",{className:"divide-y divide-white/5",children:t.map((c,p)=>{const m=Array.from(String(c.teamName)).reduce((w,N)=>w+N.charCodeAt(0),0)%5,v=["bg-blue-500/[0.02]","bg-purple-500/[0.02]","bg-emerald-500/[0.02]","bg-orange-500/[0.02]","bg-pink-500/[0.02]"][m],S="bg-[#111827]",_=e==="revenue"?"rev":"prof";return h.jsxs("tr",{className:`${v} hover:bg-white/5 transition-colors h-16 group`,children:[h.jsx("td",{className:`sticky left-0 z-20 ${S} border-r border-white/5 border-b border-white/5 text-center font-bold text-gray-600`,children:p+1}),r[p]?h.jsx("td",{rowSpan:n[p],className:`sticky left-[50px] z-20 ${S} border-r border-white/5 border-b border-white/5 align-middle px-4 cursor-pointer hover:bg-gray-800`,onClick:()=>s("team",c.teamName),children:h.jsx("div",{className:"font-black text-white bg-gray-800 border border-white/10 px-2.5 py-1.5 rounded-xl inline-block shadow-sm text-[10px] tracking-wide truncate max-w-[90px]",children:c.teamName})}):null,h.jsx("td",{className:`sticky left-[160px] z-20 ${S} border-r border-white/5 border-b border-white/5 shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] px-4 cursor-pointer hover:bg-gray-800`,onClick:()=>s("page",c.pageName),children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-lg p-0.5 bg-gray-800 border border-white/10 flex-shrink-0",onClick:w=>{w.stopPropagation(),a(at(c.logoUrl))},children:h.jsx("img",{src:at(c.logoUrl),className:"w-full h-full rounded-md object-cover",alt:""})}),h.jsx("span",{className:"truncate max-w-[140px] text-xs font-bold text-gray-200 group-hover:text-blue-300 transition-colors",title:c.pageName,children:c.pageName})]})}),h.jsxs("td",{className:`px-6 text-right font-black ${e==="revenue"?"text-blue-400 bg-blue-900/5 group-hover:bg-blue-900/20":"text-emerald-400 bg-emerald-900/5 group-hover:bg-emerald-900/20"} border-r border-white/5 border-b border-white/5 text-sm cursor-pointer`,onClick:()=>s("page",c.pageName),children:["$",(e==="revenue"?c.revenue:c.profit).toLocaleString()]}),i.map((w,N)=>{const A=c[`${_}_${w}`]||0;return h.jsx("td",{className:`px-4 text-right font-mono text-xs border-b border-white/5 cursor-pointer hover:bg-gray-800 transition-colors ${A>0?"text-gray-300 font-bold":"text-gray-700"}`,onClick:()=>l(c.pageName,N),children:A!==0?A.toLocaleString():"-"},w)})]},c.pageName)})}),o&&h.jsx("tfoot",{className:"bg-[#0f172a] font-black border-t-2 border-white/20",children:h.jsxs("tr",{className:"h-16",children:[h.jsx("td",{className:"sticky left-0 bg-[#0f172a] z-30 border-r border-white/5 border-b border-white/5"}),h.jsx("td",{className:"sticky left-[50px] bg-[#0f172a] z-30 border-r border-white/5 border-b border-white/5"}),h.jsx("td",{className:"sticky left-[160px] bg-[#0f172a] z-30 px-4 text-right uppercase tracking-widest text-white shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] border-r border-white/5 border-b border-white/5 text-xs flex items-center justify-end h-16",children:"Grand Total"}),h.jsxs("td",{className:`px-6 text-right ${e==="revenue"?"text-blue-300":"text-green-300"} border-r border-white/5 border-b border-white/5 text-base bg-[#1e293b]`,children:["$",(e==="revenue"?o.revenue:o.profit).toLocaleString()]}),i.map(c=>{const m=o[`${e==="revenue"?"rev":"prof"}_${c}`]||0;return h.jsx("td",{className:"px-4 text-right text-gray-400 font-mono text-[10px] border-b border-white/5 bg-[#0f172a]",children:m!==0?m.toLocaleString():"-"},c)})]})})]})})}),Ny=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],rx=({data:t,grandTotals:e,onPreviewImage:n,onNavigate:r,onMonthClick:i})=>{const[o,s]=ve.useState("table"),[a,l]=ve.useState("revenue"),{rowSpans:c,displayRow:p}=ve.useMemo(()=>{if(o!=="table")return{rowSpans:[],displayRow:[]};const m=new Array(t.length).fill(0),y=new Array(t.length).fill(!0);let v=0;for(;v<t.length;){const S=t[v].teamName;let _=1;for(;v+_<t.length&&t[v+_].teamName===S;)_++;m[v]=_,y[v]=!0;for(let w=1;w<_;w++)m[v+w]=0,y[v+w]=!1;v+=_}return{rowSpans:m,displayRow:y}},[t,o]);return h.jsxs("div",{className:"hidden md:block xl:hidden space-y-5 pb-12 px-1",children:[h.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl p-4 rounded-3xl border border-white/10 shadow-2xl flex flex-col sm:flex-row justify-between items-center gap-4 sticky top-20 z-40",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-900/30",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight",children:"Tablet Report"}),h.jsxs("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),t.length," Active Pages"]})]})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("div",{className:"bg-black/40 p-1.5 rounded-2xl border border-white/5 flex",children:[h.jsx("button",{onClick:()=>l("revenue"),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${a==="revenue"?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:"Revenue"}),h.jsx("button",{onClick:()=>l("profit"),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${a==="profit"?"bg-emerald-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:"Profit"})]}),h.jsxs("div",{className:"bg-black/40 p-1.5 rounded-2xl border border-white/5 flex",children:[h.jsx("button",{onClick:()=>s("table"),className:`p-2.5 rounded-xl transition-all ${o==="table"?"bg-gray-700 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),h.jsx("button",{onClick:()=>s("grid"),className:`p-2.5 rounded-xl transition-all ${o==="grid"?"bg-gray-700 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2z"})})})]})]})]}),o==="grid"?h.jsx("div",{className:"grid grid-cols-2 gap-5 animate-fade-in",children:t.map(m=>h.jsxs("div",{className:"bg-gray-800/40 border border-white/10 rounded-[2.5rem] p-6 shadow-xl flex flex-col relative overflow-hidden group hover:border-blue-500/30 transition-all cursor-pointer",onClick:()=>r("page",m.pageName),children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-white/5 to-transparent rounded-bl-[100px] pointer-events-none transition-opacity group-hover:opacity-100 opacity-50"}),h.jsxs("div",{className:"flex items-center gap-5 mb-5 relative z-10",children:[h.jsx("div",{className:"w-14 h-14 rounded-2xl overflow-hidden border-2 border-gray-700 bg-gray-950 p-0.5 flex-shrink-0 shadow-2xl group-hover:scale-105 transition-transform",onClick:y=>{y.stopPropagation(),n(at(m.logoUrl))},children:h.jsx("img",{src:at(m.logoUrl),className:"w-full h-full object-cover rounded-xl",alt:""})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("h4",{className:"text-base font-black text-white truncate leading-tight uppercase tracking-tight group-hover:text-blue-300 transition-colors",children:m.pageName}),h.jsx("span",{className:"text-[10px] bg-blue-900/30 text-blue-300 px-3 py-1 rounded-full border border-blue-500/20 font-black uppercase mt-1.5 inline-block tracking-widest",children:m.teamName})]})]}),h.jsxs("div",{className:"space-y-3 flex-grow relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-2xl border border-white/5 group-hover:bg-blue-600/10 transition-colors",children:[h.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Revenue"}),h.jsxs("span",{className:"text-base font-black text-blue-400 tracking-tight",children:["$",m.revenue.toLocaleString()]})]}),h.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-2xl border border-white/5",children:[h.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Profit"}),h.jsxs("span",{className:"text-base font-black text-emerald-400 tracking-tight",children:["$",m.profit.toLocaleString()]})]})]})]},m.pageName))}):h.jsx(wy,{data:t,dataType:a,rowSpans:c,displayRow:p,MONTHS:Ny,grandTotals:e,onNavigate:r,onPreviewImage:n,onMonthClick:i})]})},ua=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ix=({data:t,onPreviewImage:e,onNavigate:n,onMonthClick:r,sortConfig:i,onToggleSort:o})=>{const[s,a]=ve.useState(()=>{const c=localStorage.getItem("mobile_view_preference");return c==="card"||c==="table"?c:"table"}),l=c=>{a(c),localStorage.setItem("mobile_view_preference",c)};return h.jsxs("div",{className:"md:hidden space-y-4 pb-12 px-1",children:[h.jsxs("div",{className:"flex justify-between items-center px-2 mb-2",children:[h.jsxs("h3",{className:"text-lg font-black text-white flex items-center gap-2",children:[h.jsx("span",{className:"w-1.5 h-5 bg-indigo-500 rounded-full"}),"Page Report"]}),h.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-xl border border-white/10",children:[h.jsx("button",{onClick:()=>l("card"),className:`p-2 rounded-lg transition-all ${s==="card"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Card View",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})})}),h.jsx("button",{onClick:()=>l("table"),className:`p-2 rounded-lg transition-all ${s==="table"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Table View",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),s==="card"?t.map(c=>{const p=c.orderCount>0?c.revenue/c.orderCount:0;return h.jsxs("div",{className:"bg-gray-800/40 border border-white/10 rounded-[2.5rem] p-6 shadow-xl space-y-5 animate-fade-in-up group relative overflow-hidden active:scale-[0.98] transition-all cursor-pointer",onClick:()=>n("page",c.pageName),children:[h.jsx("div",{className:"flex justify-between items-center border-b border-white/5 pb-4",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden border border-gray-700 bg-gray-950 shadow-inner p-0.5",onClick:m=>{m.stopPropagation(),e(at(c.logoUrl))},children:h.jsx("img",{src:at(c.logoUrl),className:"w-full h-full object-cover rounded-lg",alt:""})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("h4",{className:"text-base font-black text-white truncate leading-tight uppercase tracking-tight",children:c.pageName}),h.jsx("p",{className:"text-[10px] text-indigo-400 font-black uppercase tracking-[0.2em] mt-1",onClick:m=>{m.stopPropagation(),n("team",c.teamName)},children:c.teamName})]})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl border border-white/5",children:[h.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1.5",children:"áž…áŸ†ážŽáž¼áž›ážŸážšáž»áž”"}),h.jsxs("p",{className:"text-lg font-black text-blue-400 tracking-tighter",children:["$",c.revenue.toLocaleString()]})]}),h.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl border border-white/5",children:[h.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1.5",children:"áž”áŸ’ážšáž¶áž€áŸ‹áž…áŸ†ážŽáŸáž‰"}),h.jsxs("p",{className:"text-lg font-black text-emerald-400 tracking-tighter",children:["$",c.profit.toLocaleString()]})]})]}),r&&h.jsxs("div",{className:"pt-4 border-t border-white/5",children:[h.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-2 ml-1",children:"Monthly Breakdown"}),h.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 hide-scrollbar",children:[ua.map((m,y)=>{const v=c[`rev_${m}`]||0;return v===0?null:h.jsxs("button",{onClick:S=>{S.stopPropagation(),r(c.pageName,y)},className:"flex-shrink-0 bg-gray-900/60 p-2.5 rounded-xl border border-white/5 min-w-[70px] flex flex-col items-center hover:bg-gray-800 hover:border-blue-500/30 transition-all active:scale-95",children:[h.jsx("span",{className:"text-[8px] font-bold text-gray-500 uppercase mb-0.5",children:m}),h.jsxs("span",{className:"text-[10px] font-black text-blue-300",children:["$",v.toLocaleString(void 0,{maximumFractionDigits:0})]})]},m)}),ua.every(m=>(c[`rev_${m}`]||0)===0)&&h.jsx("span",{className:"text-[9px] text-gray-600 italic pl-1",children:"No monthly data"})]})]}),h.jsxs("div",{className:"flex items-center justify-between px-1 pt-2 border-t border-white/5",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),h.jsxs("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:[c.orderCount," Orders"]})]}),h.jsxs("span",{className:"text-[10px] font-black text-purple-400 uppercase tracking-widest",children:["AOV: $",p.toFixed(0)]})]}),h.jsx("div",{className:"absolute -right-8 -bottom-8 w-24 h-24 bg-indigo-600/10 rounded-full blur-[40px] pointer-events-none group-hover:bg-indigo-600/20 transition-all duration-700"})]},c.pageName)}):h.jsx("div",{className:"bg-gray-900/60 border border-white/10 rounded-3xl overflow-hidden shadow-2xl animate-fade-in",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-[#0f172a] border-b border-white/10 text-xs text-gray-400 font-bold uppercase tracking-wider",children:[h.jsx("th",{className:"p-3 sticky left-0 z-20 bg-[#0f172a] border-r border-white/10 min-w-[140px] shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)] cursor-pointer hover:bg-gray-800 transition-colors",onClick:()=>o&&o("pageName"),children:h.jsxs("div",{className:"flex items-center gap-1",children:["Page Name",(i==null?void 0:i.key)==="pageName"&&h.jsx("span",{className:"text-blue-400",children:i.direction==="asc"?"â†‘":"â†“"})]})}),h.jsx("th",{className:"p-3 text-right min-w-[100px] text-blue-300 bg-blue-900/10 cursor-pointer hover:bg-blue-900/20 transition-colors",onClick:()=>o&&o("revenue"),children:h.jsxs("div",{className:"flex items-center justify-end gap-1",children:["Total Rev",(i==null?void 0:i.key)==="revenue"&&h.jsx("span",{className:"text-white",children:i.direction==="asc"?"â†‘":"â†“"})]})}),ua.map(c=>h.jsx("th",{className:"p-3 text-right min-w-[80px]",children:c},c))]})}),h.jsx("tbody",{className:"divide-y divide-white/5 text-xs",children:t.map((c,p)=>h.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[h.jsx("td",{className:"p-3 sticky left-0 z-20 bg-gray-900 border-r border-white/10 shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)]",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-7 h-7 rounded-lg bg-gray-800 border border-white/10 overflow-hidden flex-shrink-0",onClick:m=>{m.stopPropagation(),e(at(c.logoUrl))},children:h.jsx("img",{src:at(c.logoUrl),className:"w-full h-full object-cover",alt:""})}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx("div",{className:"font-black text-white truncate max-w-[120px] leading-tight",onClick:()=>n("page",c.pageName),children:c.pageName}),h.jsx("div",{className:"text-[9px] text-gray-500 font-bold uppercase truncate max-w-[120px]",onClick:()=>n("team",c.teamName),children:c.teamName})]})]})}),h.jsxs("td",{className:"p-3 text-right font-black text-blue-400 bg-blue-900/5",children:["$",c.revenue.toLocaleString()]}),ua.map((m,y)=>{const v=c[`rev_${m}`]||0;return h.jsx("td",{className:`p-3 text-right font-mono ${v>0?"text-gray-300 font-bold":"text-gray-700"}`,onClick:()=>r&&r(c.pageName,y),children:v>0?v.toLocaleString():"-"},m)})]},c.pageName))})]})})}),h.jsx("style",{children:`
                .hide-scrollbar::-webkit-scrollbar { display: none; }
                .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `})]})},Sy=({product:t,isOpen:e,onClose:n,onConfirm:r,showTagEditor:i=!0})=>{const{refreshData:o}=ve.useContext(mo),[s,a]=ve.useState(""),[l,c]=ve.useState(window.innerWidth<768),[p,m]=ve.useState(!1),[y,v]=ve.useState(!1),[S,_]=ve.useState(!1),[w,N]=ve.useState(null),A=ve.useRef(null);ve.useEffect(()=>{const k=()=>c(window.innerWidth<768);return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),ve.useEffect(()=>{t&&e&&(a(t.Tags||""),N(t.ImageURL),v(!1))},[t,e]);const I=ve.useMemo(()=>{if(!t)return!1;const k=w||t.ImageURL;return k&&!k.includes("placehold.co")&&!k.includes("text=N/A")},[t,w]),D=k=>{if(k.key==="Enter"){k.preventDefault();const R=s.trim();R&&!R.endsWith(",")&&a(R+", ")}},M=async()=>{if(t){_(!0);try{const k=s.split(",").map(R=>R.trim()).filter(R=>R!=="").join(", ");if(k!==(t.Tags||"")){if(!(await fetch(`${ni}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:t.ProductName},newData:{Tags:k}})})).ok)throw new Error("Failed to update product tags");await o(),r(t.ProductName,k)}else r(t.ProductName,k)}catch(k){console.error(k),alert(`Save failed: ${k.message}`),r(t.ProductName,s)}finally{_(!1)}}},T=async k=>{var $;const R=($=k.target.files)==null?void 0:$[0];if(!(!R||!t)){m(!0),v(!1);try{const q=await Kh(R,.7,1024),E=await $h(q),L=await fetch(`${ni}/api/upload-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileData:E,fileName:R.name,mimeType:q.type})}),B=await L.json();if(!L.ok||B.status!=="success")throw new Error(B.message);const z=B.url;await fetch(`${ni}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:t.ProductName},newData:{ImageURL:z}})}),N(z),v(!0),setTimeout(()=>v(!1),2500),await o()}catch(q){alert(`Update Error: ${q.message}`)}finally{m(!1),A.current&&(A.current.value="")}}};return t?h.jsx(ic,{isOpen:e,onClose:n,maxWidth:l?"max-w-[95vw]":"max-w-4xl",children:h.jsxs("div",{className:`
                bg-[#09090b] border border-white/10 overflow-hidden relative flex flex-col
                ${l?"h-[85vh] rounded-[2rem]":"h-[500px] rounded-[2rem] md:flex-row"}
                shadow-2xl transition-all duration-300
            `,children:[h.jsx("div",{className:`
                    relative group flex items-center justify-center bg-black/20
                    ${l?"h-[40%] w-full border-b border-white/5":"w-[40%] h-full border-r border-white/5"}
                `,children:h.jsxs("div",{className:"relative w-full h-full flex items-center justify-center cursor-pointer p-6",onClick:()=>{var k;return!p&&((k=A.current)==null?void 0:k.click())},children:[I?h.jsxs(h.Fragment,{children:[h.jsx("img",{src:at(w||t.ImageURL),className:`
                                        w-full h-full object-contain relative z-10 transition-all duration-500 rounded-xl
                                        ${p?"opacity-30 grayscale blur-sm":"group-hover:scale-105"}
                                    `,alt:t.ProductName}),!p&&!y&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/40 backdrop-blur-[2px] z-20",children:h.jsxs("div",{className:"bg-white/10 px-3 py-1.5 rounded-full border border-white/20 backdrop-blur-md flex items-center gap-2",children:[h.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),h.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-wider",children:"Change"})]})})]}):h.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 text-gray-600 group-hover:text-blue-400 transition-colors",children:[h.jsx("div",{className:"p-4 rounded-full border-2 border-dashed border-gray-700 group-hover:border-blue-500/50 transition-all",children:h.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),h.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Upload Image"})]}),p&&h.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center",children:[h.jsx(Pr,{size:"md"}),h.jsx("span",{className:"text-[9px] font-bold text-gray-400 mt-2 uppercase tracking-wider",children:"Uploading..."})]}),y&&h.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:[h.jsx("div",{className:"w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center shadow-lg mb-2 animate-scale-in",children:h.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),h.jsx("span",{className:"text-[9px] font-bold text-emerald-400 uppercase tracking-widest",children:"Success"})]})]})}),h.jsxs("div",{className:`
                    flex flex-col p-6 md:p-10 relative
                    ${l?"h-[60%] justify-between":"w-[60%] h-full justify-center gap-8"}
                `,children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"px-2 py-1 bg-white/5 rounded text-[10px] font-mono text-gray-400 border border-white/5",children:["#",t.Barcode||"NO-CODE"]}),h.jsxs("span",{className:"px-2 py-1 bg-emerald-500/10 text-emerald-400 rounded text-[10px] font-bold border border-emerald-500/20",children:["$",t.Price.toFixed(2)]})]}),h.jsx("h2",{className:`font-black text-white leading-tight ${l?"text-2xl line-clamp-2":"text-4xl line-clamp-3"}`,children:t.ProductName}),i&&h.jsxs("div",{className:"space-y-2 pt-2",children:[h.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:"Operational Tags"}),h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",value:s,onChange:k=>a(k.target.value),onKeyDown:D,className:"w-full bg-transparent border-b border-gray-700 py-2 text-sm font-medium text-gray-200 focus:border-blue-500 outline-none transition-colors placeholder:text-gray-700",placeholder:"Add tags..."}),h.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 text-[9px] font-bold text-gray-600 opacity-0 group-focus-within:opacity-100 transition-opacity",children:"ENTER"})]})]})]}),h.jsxs("div",{className:"flex gap-3 mt-4",children:[h.jsx("button",{onClick:n,className:"px-6 py-4 rounded-xl border border-white/10 text-gray-400 font-bold text-xs uppercase tracking-wider hover:bg-white/5 hover:text-white transition-all active:scale-95",children:"Cancel"}),h.jsxs("button",{onClick:M,disabled:S,className:"flex-1 px-6 py-4 rounded-xl bg-blue-600 text-white font-bold text-xs uppercase tracking-wider hover:bg-blue-500 transition-all active:scale-95 shadow-lg shadow-blue-900/20 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[S?h.jsx(Pr,{size:"sm"}):"Confirm Selection",!S&&h.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),h.jsx("input",{type:"file",ref:A,className:"hidden",accept:"image/*",onChange:T}),h.jsx("style",{children:`
                    @keyframes scale-in {
                        0% { transform: scale(0); opacity: 0; }
                        60% { transform: scale(1.1); opacity: 1; }
                        100% { transform: scale(1); }
                    }
                    .animate-scale-in { animation: scale-in 0.3s ease-out forwards; }
                `})]})}):null},_y=(t,e)=>{if(!e||!t)return h.jsx("span",{children:t});const n=e.split(" ").filter(Boolean).map(i=>i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));if(n.length===0)return h.jsx("span",{children:t});const r=new RegExp(`(${n.join("|")})`,"gi");return h.jsx(h.Fragment,{children:t.split(r).map((i,o)=>r.test(i)&&i.trim()!==""?h.jsx("strong",{className:"text-yellow-300 bg-yellow-900/50 rounded-sm px-0.5",children:i},o):i)})},Ay=(t,e)=>{const n=(t.ProductName||"").toLowerCase(),r=(t.Barcode||"").toLowerCase(),i=`${n} ${r}`,o=e.toLowerCase().trim();if(!o)return 1;const s=o.split(" ").filter(Boolean);if(!s.every(c=>i.includes(c)))return 0;let l=10;return s.forEach(c=>{n.includes(c)&&(l+=20),r.includes(c)&&(l+=10)}),n.startsWith(o)&&(l+=500),l},Cy=({products:t,selectedProductName:e,onSelect:n,showTagEditor:r=!0})=>{const[i,o]=ve.useState(!1),[s,a]=ve.useState(""),[l,c]=ve.useState(0),[p,m]=ve.useState(null),y=ve.useRef(null),v=ve.useRef(null);ve.useEffect(()=>{a(e)},[e]),ve.useEffect(()=>{const M=T=>{y.current&&!y.current.contains(T.target)&&(o(!1),a(e))};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[e]);const S=ve.useMemo(()=>{const M=s||"";return M.trim()?t.map(T=>({product:T,score:Ay(T,M)})).filter(T=>T.score>0).sort((T,k)=>k.score-T.score||T.product.ProductName.localeCompare(k.product.ProductName)).map(T=>T.product):[]},[t,s]),_=ve.useMemo(()=>{const M=s.trim();return M?!t.some(T=>T.ProductName.trim().toLowerCase()===M.toLowerCase()):!1},[s,t]),w=ve.useMemo(()=>{const M=[...S];return _&&M.unshift({isAddNew:!0,ProductName:s.trim()}),M},[S,_,s]),N=ve.useCallback((M,T)=>{var k;n(M,T),a(M),o(!1),m(null),c(0),(k=v.current)==null||k.blur()},[n]),A=M=>{M.isAddNew?N(M.ProductName):(m(M),o(!1))},I=ve.useCallback(()=>{var M;n("",""),a(""),o(!0),c(0),(M=v.current)==null||M.focus()},[n]),D=M=>{var k;const T=w.length;if(T!==0)switch(M.key){case"ArrowDown":M.preventDefault(),i||o(!0),c(R=>(R+1)%T);break;case"ArrowUp":M.preventDefault(),i||o(!0),c(R=>(R-1+T)%T);break;case"Enter":if(M.preventDefault(),!i)return;l>-1&&w[l]&&A(w[l]);break;case"Escape":o(!1),a(e),(k=v.current)==null||k.blur();break}};return h.jsxs("div",{className:"relative",ref:y,children:[h.jsxs("div",{className:"relative group",children:[h.jsx("input",{ref:v,type:"text",className:"form-input !pr-16 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:"ážŸáŸ’ážœáŸ‚áž„ážšáž€áž•áž›áž·ážáž•áž›...",value:s,onChange:M=>{a(M.target.value),o(!0),c(0)},onFocus:()=>o(!0),onKeyDown:D}),h.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[s&&h.jsx("button",{type:"button",onClick:I,className:"text-gray-500 hover:text-white text-2xl",children:"Ã—"}),h.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),i&&h.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden animate-fade-in-down max-h-80 overflow-y-auto custom-scrollbar",children:h.jsx("ul",{className:"p-2 space-y-1",children:w.length===0?h.jsx("li",{className:"p-4 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"ážšáž€áž˜áž·áž“ážƒáž¾áž‰áž•áž›áž·ážáž•áž›áž‘áŸ"}):w.map((M,T)=>{if("isAddNew"in M&&M.isAddNew)return h.jsxs("li",{className:`p-3.5 rounded-2xl cursor-pointer flex items-center gap-4 transition-all ${l===T?"bg-blue-600 text-white":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>A(M),children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center border border-blue-500/30",children:h.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"})})}),h.jsx("div",{className:"min-w-0",children:h.jsxs("p",{className:"font-black text-sm leading-tight",children:["áž”áž“áŸ’ážáŸ‚áž˜ážáŸ’áž˜áž¸áŸ– ",h.jsxs("span",{className:"text-yellow-400",children:['"',M.ProductName,'"']})]})})]},"add-new");const k=M;return h.jsxs("li",{className:`p-2.5 rounded-2xl cursor-pointer flex items-center gap-3 transition-all ${l===T?"bg-blue-600 text-white shadow-lg":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>A(k),children:[h.jsx("img",{src:at(k.ImageURL),className:"w-12 h-12 rounded-xl object-cover border border-white/10",alt:""}),h.jsxs("div",{className:"min-w-0 flex-grow",children:[h.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:_y(k.ProductName,s)}),h.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:h.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-md border border-blue-500/10",children:["$",k.Price.toFixed(2)]})})]})]},k.ProductName)})})}),h.jsx(Sy,{product:p,isOpen:!!p,onClose:()=>m(null),onConfirm:N,showTagEditor:r})]})},Ty=t=>{if(!t)return"";const e=Yh(t);if(!e||isNaN(e.getTime()))return"";const n=r=>r.toString().padStart(2,"0");return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())}T${n(e.getHours())}:${n(e.getMinutes())}`},ao=(t,e)=>{const n=t.reduce((s,a)=>s+(a.total||0),0),r=n+e,i=t.reduce((s,a)=>s+(a.cost||0)*(a.quantity||0),0),o=t.reduce((s,a)=>s+(a.originalPrice-a.finalPrice)*a.quantity,0);return{Subtotal:n,"Grand Total":r,"Total Product Cost ($)":i,"Discount ($)":o}},ky=(t,e)=>{var l,c;const n=[];["Customer Name","Customer Phone","Location","Address Details","Grand Total","Payment Status","Internal Shipping Method","Internal Shipping Details","Internal Cost","Discount ($)","Shipping Fee (Customer)","Fulfillment Store"].forEach(p=>{const m=t[p],y=e[p],v=m==null?"":String(m),S=y==null?"":String(y);v!=S&&n.push({field:p,oldValue:v,newValue:S})});const i=JSON.stringify(t.Products||[]),o=JSON.stringify(e.Products||[]);i!==o&&n.push({field:"Products List",oldValue:`${((l=t.Products)==null?void 0:l.length)||0} items`,newValue:`${((c=e.Products)==null?void 0:c.length)||0} items`});const s=t.Note||"",a=e.Note||"";return s!==a&&n.push({field:"Note",oldValue:s,newValue:a}),n},Pl=async(t,e,n)=>{try{await fetch(`${ni}/api/logging/activity`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,action:e,details:n,timestamp:new Date().toISOString(),User:t,Action:e,Details:n})})}catch{}},Iy=async(t,e,n,r,i)=>{if(n)try{const o={orderId:t,user:e,field:n,oldValue:r,newValue:i,timestamp:new Date().toISOString(),OrderID:t,Requester:e,"Field Changed":n,"Old Value":r,"New Value":i,OldValue:r,NewValue:i};await fetch(`${ni}/api/logging/edit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}catch(o){console.warn("[Audit] Failed to log edit:",o)}},Ey=({provinces:t,selectedProvince:e,onSelect:n})=>{const[r,i]=ve.useState(!1),[o,s]=ve.useState(""),a=ve.useRef(null);ve.useEffect(()=>{s(e)},[e]),ve.useEffect(()=>{const c=p=>{a.current&&!a.current.contains(p.target)&&(i(!1),s(e))};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[e]);const l=ve.useMemo(()=>{const c=t.filter(S=>S.toLowerCase().includes(o.toLowerCase())),p=c.filter(S=>!S.includes("áž—áŸ’áž“áŸ†áž–áŸáž‰")&&!S.includes("áž€ážŽáŸ’ážŠáž¶áž›")).sort((S,_)=>S.localeCompare(_,"km")),m=[],y=c.find(S=>S.includes("áž—áŸ’áž“áŸ†áž–áŸáž‰")),v=c.find(S=>S.includes("áž€ážŽáŸ’ážŠáž¶áž›"));return y&&m.push(y),v&&m.push(v),[...m,...p]},[t,o]);return h.jsxs("div",{className:"relative w-full",ref:a,children:[h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",className:"form-input !pl-10 !py-3 rounded-xl border-gray-700 bg-gray-900 focus:border-blue-500/50 transition-all font-bold text-gray-200",placeholder:"ážŸáŸ’ážœáŸ‚áž„ážšáž€ ážáŸážáŸ’áž/ážšáž¶áž‡áž’áž¶áž“áž¸...",value:o,onChange:c=>{s(c.target.value),i(!0)},onFocus:()=>i(!0)}),h.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:h.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),r&&h.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800 border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-down max-h-60 overflow-y-auto custom-scrollbar",children:l.length>0?l.map((c,p)=>h.jsx("button",{type:"button",onClick:()=>{n(c),s(c),i(!1)},className:`w-full text-left px-4 py-3 text-sm font-bold transition-colors border-b border-white/5 last:border-0 ${e===c?"bg-blue-600 text-white":"text-gray-300 hover:bg-white/5"}`,children:h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{children:c}),p<2&&o===""&&h.jsx("span",{className:"text-[8px] bg-white/10 px-1.5 py-0.5 rounded uppercase tracking-widest opacity-50",children:"Priority"})]})},c)):h.jsx("div",{className:"p-4 text-center text-xs text-gray-500",children:"ážšáž€áž˜áž·áž“ážƒáž¾áž‰ážáŸážáŸ’ážáž“áŸáŸ‡áž‘áŸ"})})]})},Py=({methods:t,selectedMethodName:e,onSelect:n})=>h.jsxs("div",{className:"w-full",children:[h.jsx("style",{children:`
                @keyframes spin-border {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }
                .card-flux {
                    position: relative;
                    background: #0f172a; /* Slate 900 */
                    border-radius: 1rem;
                    z-index: 1;
                }
                /* The spinning border effect */
                .card-flux-active::after, .card-flux-active::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    background: conic-gradient(from var(--angle), transparent 70%, #3b82f6, #8b5cf6, #ec4899, #3b82f6);
                    border-radius: inherit;
                    animation: spin-border 3s linear infinite;
                }
                .card-flux-active::before {
                    filter: blur(10px);
                    opacity: 0.7;
                }
                
                @keyframes float-y {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-5px); }
                }
                .animate-float-y {
                    animation: float-y 3s ease-in-out infinite;
                }
                
                @keyframes pulse-soft {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.6; }
                }
                .animate-pulse-soft {
                    animation: pulse-soft 2s ease-in-out infinite;
                }
            `}),h.jsx("div",{className:"grid grid-cols-2 gap-4 max-h-80 overflow-y-auto custom-scrollbar px-2 pb-2 pt-2",children:t.map(r=>{const i=e===r.MethodName;return h.jsx("button",{type:"button",onClick:()=>n(r),className:`
                                relative group rounded-2xl transition-all duration-300 min-h-[140px] flex flex-col
                                ${i?"card-flux card-flux-active scale-[1.02]":"bg-gray-900 border border-gray-800 hover:bg-gray-800"}
                            `,children:h.jsxs("div",{className:`
                                w-full h-full rounded-2xl flex flex-col items-center justify-center p-4 relative overflow-hidden
                                ${i?"bg-[#0f172a]":"bg-transparent"}
                            `,children:[i&&h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-blue-500/10 via-purple-500/5 to-transparent pointer-events-none"}),h.jsx("div",{className:"absolute top-3 right-3 flex gap-1",children:i&&h.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-blue-500"})]})}),h.jsx("div",{className:`
                                    relative z-10 w-14 h-14 mb-3 transition-all duration-300
                                    ${i?"animate-float-y drop-shadow-[0_0_15px_rgba(59,130,246,0.5)]":"opacity-80 group-hover:opacity-100"}
                                `,children:h.jsx("img",{src:at(r.LogosURL),className:"w-full h-full object-contain",alt:r.MethodName})}),h.jsxs("div",{className:"relative z-10 text-center w-full",children:[h.jsx("p",{className:`
                                        text-xs font-black uppercase tracking-widest transition-all
                                        ${i?"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-pink-400 animate-pulse-soft":"text-gray-400 group-hover:text-gray-200"}
                                    `,children:r.MethodName}),r.RequireDriverSelection&&h.jsxs("div",{className:`
                                            mt-2 inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-[8px] font-bold uppercase tracking-wider
                                            ${i?"bg-purple-900/30 text-purple-300 border border-purple-500/30":"bg-gray-800 text-gray-500"}
                                        `,children:[h.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Driver Req"]})]})]})},r.MethodName)})}),t.length===0&&h.jsx("div",{className:"p-8 text-center border border-dashed border-gray-700 rounded-2xl bg-gray-900/50",children:h.jsx("p",{className:"text-xs text-gray-500 font-black uppercase tracking-widest animate-pulse",children:"No Signal"})})]}),Ly=({drivers:t,selectedDriverName:e,onSelect:n})=>{const r=ve.useRef(null),i=ve.useRef(null);ve.useEffect(()=>{r.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"),i.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2570/2570-preview.mp3"),r.current&&(r.current.volume=.15),i.current&&(i.current.volume=.4)},[]);const o=()=>{r.current&&(r.current.currentTime=0,r.current.play().catch(()=>{}))},s=a=>{e!==a&&(i.current&&(i.current.currentTime=0,i.current.play().catch(()=>{})),n(a))};return h.jsxs("div",{className:"w-full py-4",children:[h.jsx("style",{children:`
                /* CSS Variable for Rotation */
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }

                /* Flux Animation Keyframes */
                @keyframes spin-flux {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }

                /* Base Card Style */
                .flux-card {
                    position: relative;
                    background: #0f172a; /* Slate 900 */
                    border-radius: 1rem;
                    z-index: 1;
                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
                }

                /* Electric Flux Effect (Active State) */
                .flux-card.selected::after, .flux-card.selected::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    /* Electric Gradient Colors: Cyan -> Blue -> Purple -> Cyan */
                    background: conic-gradient(from var(--angle), transparent 60%, #22d3ee, #3b82f6, #a855f7, #22d3ee);
                    border-radius: inherit;
                    animation: spin-flux 2s linear infinite;
                }

                /* Outer Glow (Blur) */
                .flux-card.selected::before {
                    filter: blur(10px);
                    opacity: 0.7;
                }

                /* Floating Text Animation */
                @keyframes float-text {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-2px); }
                }
                .animate-float-text {
                    animation: float-text 3s ease-in-out infinite;
                }
            `}),t.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-gray-800 rounded-2xl bg-gray-900/30",children:[h.jsx("div",{className:"w-10 h-10 border-2 border-gray-700 border-t-cyan-500 rounded-full animate-spin mb-3"}),h.jsx("p",{className:"text-gray-500 font-black uppercase tracking-[0.2em] text-[10px]",children:"NO DRIVERS DETECTED"})]}):h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5 p-2",children:t.map(a=>h.jsx(Ry,{driver:a,isSelected:e===a.DriverName,onSelect:()=>s(a.DriverName),onHover:o},a.DriverName))})]})},Ry=({driver:t,isSelected:e,onSelect:n,onHover:r})=>h.jsxs("div",{onClick:n,onMouseEnter:r,className:`
                flux-card relative h-48 cursor-pointer transition-all duration-300 group overflow-visible
                flex flex-col items-center justify-end pb-3
                ${e?"selected scale-[1.03]":"border border-white/5 hover:border-blue-500/30 grayscale opacity-70 hover:opacity-100 hover:grayscale-0"}
            `,children:[h.jsxs("div",{className:"absolute inset-0 rounded-2xl overflow-hidden bg-gray-900",children:[h.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(#3b82f6 1px, transparent 1px)",backgroundSize:"10px 10px"}}),e&&h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/2 bg-gradient-to-t from-blue-900/40 to-transparent"})]}),h.jsx("div",{className:`
                absolute inset-x-0 transition-all duration-500 z-10 flex justify-center
                ${e?"top-3 bottom-12":"top-4 bottom-10"}
            `,children:h.jsx("div",{className:`
                    relative w-full h-full max-w-[85%] rounded-xl overflow-hidden transition-all duration-500
                    ${e?"shadow-[0_0_20px_rgba(59,130,246,0.4)] ring-1 ring-blue-400/30":"shadow-none"}
                `,children:h.jsx("img",{src:at(t.ImageURL),className:"w-full h-full object-cover object-top",alt:t.DriverName})})}),h.jsxs("div",{className:"relative z-20 w-full px-2 text-center",children:[h.jsx("div",{className:`
                    transition-all duration-300 transform
                    ${e?"translate-y-0 animate-float-text":"translate-y-1"}
                `,children:h.jsx("h3",{className:`
                        text-[11px] font-black uppercase tracking-widest leading-tight
                        ${e?"text-white drop-shadow-[0_0_5px_rgba(34,211,238,0.8)]":"text-gray-400"}
                    `,children:t.DriverName})}),h.jsxs("div",{className:`
                    mt-2 flex items-center justify-center gap-1.5 transition-all duration-300
                    ${e?"opacity-100":"opacity-0 scale-0"}
                `,children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse shadow-[0_0_5px_#22d3ee]"}),h.jsx("span",{className:"text-[7px] font-bold text-cyan-300 uppercase tracking-[0.2em] border border-cyan-500/30 px-1.5 py-0.5 rounded bg-cyan-950/50",children:"ONLINE"})]})]})]}),My=({formData:t,appData:e,onChange:n,onProvinceSelect:r,onDistrictChange:i,onSangkatChange:o,onShippingMethodSelect:s,onDriverSelect:a,onBankChange:l,selectedDistrict:c,selectedSangkat:p,bankLogo:m})=>{var I,D,M;const[y,v]=ve.useState(!1),S=[...new Set(e.locations.map(T=>T.Province))],_=[...new Set(e.locations.filter(T=>T.Province===t.Location).map(T=>T.District))].sort(),w=[...new Set(e.locations.filter(T=>T.Province===t.Location&&T.District===c).map(T=>T.Sangkat))].sort(),N=(I=e.shippingMethods)==null?void 0:I.find(T=>T.MethodName===t["Internal Shipping Method"]),A=(D=e.drivers)==null?void 0:D.find(T=>T.DriverName===t["Internal Shipping Details"]);return h.jsxs("div",{className:"flex flex-col gap-4 h-full overflow-y-auto custom-scrollbar pr-2 pb-20 lg:pb-2",children:[h.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg relative overflow-hidden flex-shrink-0",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:h.jsx("svg",{className:"w-24 h-24 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),h.jsxs("h3",{className:"text-xs font-black text-blue-400 uppercase tracking-[0.25em] mb-4 relative z-10 flex items-center gap-2",children:[h.jsx("span",{className:"w-1.5 h-4 bg-blue-500 rounded-full"}),"áž–áŸážáŸŒáž˜áž¶áž“áž¢ážáž·ážáž·áž‡áž“"]}),h.jsxs("div",{className:"space-y-3 relative z-10",children:[h.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[h.jsx("input",{type:"text",name:"Customer Name",value:t["Customer Name"]||"",onChange:n,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl font-bold text-sm text-white placeholder-gray-600 focus:border-blue-500",placeholder:"ážˆáŸ’áž˜áŸ„áŸ‡áž¢ážáž·ážáž·áž‡áž“",required:!0}),h.jsx("input",{type:"tel",name:"Customer Phone",value:t["Customer Phone"]||"",onChange:n,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl font-mono font-black text-sm text-blue-300 placeholder-gray-600 focus:border-blue-500",placeholder:"áž›áŸážáž‘áž¼ážšážŸáŸáž–áŸ’áž‘",required:!0})]}),h.jsxs("div",{className:"space-y-3 pt-2",children:[h.jsx(Ey,{provinces:S,selectedProvince:t.Location||"",onSelect:r}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("select",{value:c,onChange:T=>i(T.target.value),className:"form-select bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-gray-300 h-12",disabled:!t.Location,children:[h.jsx("option",{value:"",children:"ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ"}),_.map(T=>h.jsx("option",{value:T,children:T},T))]}),h.jsxs("select",{value:p,onChange:T=>o(T.target.value),className:"form-select bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-gray-300 h-12",disabled:!c,children:[h.jsx("option",{value:"",children:"ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹"}),w.map(T=>h.jsx("option",{value:T,children:T},T))]})]}),h.jsx("input",{type:"text",name:"Address Details",value:t["Address Details"]||"",onChange:n,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-white placeholder-gray-600 focus:border-blue-500",placeholder:"áž•áŸ’áž‘áŸ‡áž›áŸáž, áž•áŸ’áž›áž¼ážœ..."})]})]})]}),h.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg relative overflow-hidden flex-shrink-0",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:h.jsx("svg",{className:"w-24 h-24 text-orange-500",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"})})}),h.jsxs("h3",{className:"text-xs font-black text-orange-400 uppercase tracking-[0.25em] mb-4 relative z-10 flex items-center gap-2",children:[h.jsx("span",{className:"w-1.5 h-4 bg-orange-500 rounded-full"}),"ážŠáž¹áž€áž‡áž‰áŸ’áž‡áž¼áž“ & áž‘áž¼áž‘áž¶ážáŸ‹"]}),h.jsxs("div",{className:"space-y-4 relative z-10",children:[h.jsx(Py,{methods:e.shippingMethods||[],selectedMethodName:t["Internal Shipping Method"]||"",onSelect:s}),(N==null?void 0:N.RequireDriverSelection)&&h.jsxs("div",{className:"space-y-3 pt-2 border-t border-white/5 animate-fade-in",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("label",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸáž¢áŸ’áž“áž€ážŠáž¹áž€"}),!t["Internal Shipping Details"]&&h.jsx("span",{className:"text-[9px] text-red-400 font-bold animate-pulse",children:"* Required"})]}),h.jsx("div",{onClick:()=>v(!0),className:`
                                    relative p-3 rounded-2xl border transition-all cursor-pointer group flex items-center gap-4 shadow-lg
                                    ${A?"bg-gradient-to-r from-gray-800 to-gray-900 border-blue-500/30 hover:border-blue-500/50":"bg-red-500/5 border-red-500/20 hover:bg-red-500/10 border-dashed"}
                                `,children:A?h.jsxs(h.Fragment,{children:[h.jsx("img",{src:at(A.ImageURL),alt:A.DriverName,className:"w-12 h-12 rounded-xl object-cover border border-white/10 shadow-sm"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-white font-black text-sm truncate",children:A.DriverName}),h.jsx("p",{className:"text-[9px] text-blue-400 font-bold uppercase tracking-wider mt-0.5",children:"Driver Selected"})]}),h.jsx("div",{className:"bg-black/40 p-2.5 rounded-xl border border-white/10 group-hover:bg-blue-600 group-hover:text-white group-hover:border-blue-500 transition-colors text-gray-500 shadow-inner",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})})]}):h.jsxs("div",{className:"w-full py-2 flex items-center justify-center gap-3 text-gray-500 group-hover:text-red-400 transition-colors",children:[h.jsx("span",{className:"bg-gray-800 p-2 rounded-full border border-gray-700 group-hover:border-red-500/50 transition-colors",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),h.jsx("span",{className:"font-bold text-xs uppercase tracking-wider",children:"Tap to Select Driver"})]})})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[h.jsxs("div",{className:"relative group",children:[h.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase absolute -top-2 left-2 bg-[#161f32] px-1 group-focus-within:text-orange-400 transition-colors",children:"Cost ($)"}),h.jsx("input",{type:"text",inputMode:"decimal",name:"Internal Cost",value:t["Internal Cost"],onChange:n,className:"form-input !py-2.5 !px-3 bg-gray-900/80 border-gray-700 rounded-xl font-black text-orange-400 text-sm text-center focus:border-orange-500"})]}),h.jsxs("div",{className:"relative group",children:[h.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase absolute -top-2 left-2 bg-[#161f32] px-1 group-focus-within:text-white transition-colors",children:"Status"}),h.jsxs("select",{name:"Payment Status",value:t["Payment Status"],onChange:n,className:`form-select !py-2.5 !px-2 rounded-xl font-black text-xs uppercase border-none w-full ${t["Payment Status"]==="Paid"?"bg-emerald-600 text-white shadow-lg shadow-emerald-900/50":"bg-red-900/40 text-red-400 border border-red-500/20"}`,children:[h.jsx("option",{value:"Unpaid",children:"Unpaid"}),h.jsx("option",{value:"Paid",children:"Paid"})]})]})]}),t["Payment Status"]==="Paid"&&h.jsxs("div",{className:"flex items-center gap-3 animate-fade-in bg-black/30 p-2 rounded-2xl border border-white/5",children:[h.jsxs("select",{value:t["Payment Info"],onChange:l,className:"form-select bg-transparent border-none text-xs font-bold flex-grow text-white focus:ring-0",children:[h.jsx("option",{value:"",children:"Select Bank..."}),(M=e.bankAccounts)==null?void 0:M.map(T=>h.jsx("option",{value:T.BankName,children:T.BankName},T.BankName))]}),m&&h.jsx("img",{src:m,className:"w-10 h-10 object-contain bg-white/10 p-1 rounded-xl border border-white/10",alt:""})]})]})]}),h.jsx("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg mt-auto flex-shrink-0",children:h.jsx("textarea",{name:"Note",value:t.Note||"",onChange:n,rows:3,className:"form-textarea bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold w-full resize-none text-gray-300 placeholder-gray-600 focus:border-blue-500",placeholder:"áž…áŸ†ážŽáž¶áŸ†..."})}),y&&h.jsx(ic,{isOpen:!0,onClose:()=>v(!1),maxWidth:"max-w-3xl",children:h.jsxs("div",{className:"p-6 sm:p-8 bg-[#0f172a] rounded-[2.5rem] border border-white/10",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("h3",{className:"text-xl sm:text-2xl font-black text-white uppercase tracking-tighter flex items-center gap-3",children:[h.jsx("span",{className:"w-2 h-8 bg-blue-600 rounded-full"}),"Select Driver"]}),h.jsx("button",{onClick:()=>v(!1),className:"w-10 h-10 rounded-2xl bg-gray-800 text-gray-400 hover:text-white flex items-center justify-center transition-all hover:bg-gray-700 active:scale-90",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar pr-2 bg-black/20 rounded-3xl p-2 border border-white/5",children:h.jsx(Ly,{drivers:e.drivers||[],selectedDriverName:t["Internal Shipping Details"]||"",onSelect:T=>{a(T),v(!1)}})})]})})]})},Dy=({value:t,onChange:e,label:n="áž…áŸ†áž“áž½áž“*",min:r=1,max:i=99})=>{var _;const o=ve.useRef(null),[s,a]=ve.useState(!1),l=()=>{const w=Math.min(i,t+1);e(w)},c=()=>{const w=Math.max(r,t-1);e(w)},p=w=>{const N=w.target.value;if(N===""){a(!0);return}const A=parseInt(N,10);isNaN(A)||(A<r||A>i?a(!0):(e(A),a(!1)))},m=()=>{if(s){const w=o.current;if(w&&w.value){let N=parseInt(w.value,10);isNaN(N)||N<r?N=r:N>i&&(N=i),e(N)}else e(r);a(!1)}},y=w=>{var N;w.key==="Enter"?(w.preventDefault(),m(),(N=o.current)==null||N.blur()):w.key==="ArrowUp"?(w.preventDefault(),l()):w.key==="ArrowDown"&&(w.preventDefault(),c())},v=()=>{a(!0)},S=s?((_=o.current)==null?void 0:_.value)||"":t;return h.jsxs("div",{className:"space-y-1.5 w-full",children:[h.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:n}),h.jsxs("div",{className:"flex items-center bg-black/40 rounded-2xl border border-gray-700 h-12 w-full overflow-hidden focus-within:border-blue-500/50 transition-all focus-within:shadow-[0_0_20px_rgba(59,130,246,0.15)] ring-1 ring-white/5",children:[h.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${t<=r?"text-gray-600 cursor-not-allowed opacity-50":"text-gray-400 hover:text-white hover:bg-white/5 active:scale-90"}
                        transition-all border-r border-gray-700/50
                    `,onClick:c,disabled:t<=r,"aria-label":"ážáž™áž…áŸ†áž“áž½áž“",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{d:"M20 12H4"})})}),h.jsx("input",{ref:o,type:"number",inputMode:"numeric",value:S,onChange:p,onBlur:m,onFocus:v,onKeyDown:y,min:r,max:i,step:"1",className:"flex-1 h-full bg-transparent text-center text-white font-black text-base outline-none border-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:r.toString(),"aria-label":"áž…áŸ†áž“áž½áž“"}),h.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${t>=i?"text-gray-600 cursor-not-allowed opacity-50":"text-blue-400 hover:text-white hover:bg-blue-600/10 active:scale-90"}
                        transition-all border-l border-gray-700/50
                    `,onClick:l,disabled:t>=i,"aria-label":"áž”áž“áŸ’ážáŸ‚áž˜áž…áŸ†áž“áž½áž“",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{d:"M12 4v16m8-8H4"})})})]}),h.jsxs("div",{className:"text-xs text-gray-500 px-1 flex justify-between",children:[h.jsxs("span",{children:["áž¢áž”áŸ’áž”áž”ážšáž˜áž¶: ",r]}),h.jsxs("span",{children:["áž¢ážáž·áž”ážšáž˜áž¶: ",i]})]})]})},Fy=({products:t,masterProducts:e,onProductChange:n,onAddProduct:r,onRemoveProduct:i,onPreviewImage:o,onScanBarcode:s})=>h.jsxs("div",{className:"flex-1 bg-gray-800/30 border border-white/5 rounded-[2rem] p-4 lg:p-6 overflow-y-auto custom-scrollbar flex flex-col relative shadow-inner",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 z-20 bg-[#121a2b]/95 backdrop-blur-md p-3 -mx-2 -mt-2 rounded-2xl border border-white/5 shadow-lg",children:[h.jsxs("h3",{className:"text-xs font-black text-white uppercase tracking-widest pl-2 flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Items List (",t.length,")"]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{type:"button",onClick:s,className:"px-4 py-2.5 bg-blue-600/10 border border-blue-500/30 text-blue-400 rounded-xl shadow-lg hover:bg-blue-600 hover:text-white transition-all active:scale-95 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"Scan"]}),h.jsxs("button",{type:"button",onClick:r,className:"px-5 py-2.5 bg-blue-600 text-white rounded-xl shadow-lg shadow-blue-600/30 text-[10px] font-black uppercase hover:bg-blue-500 transition-all active:scale-95 flex items-center gap-2",children:[h.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{d:"M12 4v16m8-8H4"})})," Add"]})]})]}),h.jsx("div",{className:"space-y-4 pb-4",children:t.map((a,l)=>h.jsxs("div",{className:"group relative bg-[#0f1523] rounded-[1.5rem] p-4 border border-white/5 hover:border-blue-500/30 transition-all flex flex-col sm:flex-row gap-5 items-start shadow-md hover:shadow-xl",children:[h.jsx("button",{type:"button",onClick:()=>i(l),className:"absolute top-3 right-3 text-gray-600 hover:text-red-500 hover:bg-red-500/10 rounded-full w-8 h-8 flex items-center justify-center transition-all opacity-0 group-hover:opacity-100 focus:opacity-100",children:"Ã—"}),h.jsx("div",{className:"w-20 h-20 bg-gray-900 rounded-2xl border border-white/10 overflow-hidden flex-shrink-0 cursor-pointer shadow-lg group-hover:scale-105 transition-transform",onClick:()=>a.image&&o(at(a.image)),children:h.jsx("img",{src:at(a.image),className:"w-full h-full object-cover",alt:""})}),h.jsxs("div",{className:"flex-1 w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-4 items-center",children:[h.jsxs("div",{className:"lg:col-span-6 space-y-3",children:[h.jsx(Cy,{products:e,selectedProductName:a.name,onSelect:(c,p)=>n(l,"name",c,p)}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:a.colorInfo,onChange:c=>n(l,"colorInfo",c.target.value),className:"bg-gray-800/50 border-none rounded-lg py-1.5 px-3 text-[10px] font-bold text-white w-full focus:ring-1 focus:ring-blue-500 placeholder-gray-600",placeholder:"Color/Size..."}),h.jsx("input",{type:"text",value:a.tags||"",onChange:c=>n(l,"tags",c.target.value),className:"bg-gray-800/50 border-none rounded-lg py-1.5 px-3 text-[10px] font-bold text-blue-300 w-full focus:ring-1 focus:ring-blue-500 placeholder-gray-600",placeholder:"Tags..."})]})]}),h.jsx("div",{className:"lg:col-span-3 flex justify-center",children:h.jsx("div",{className:"w-32",children:h.jsx(Dy,{value:Number(a.quantity)||1,onChange:c=>n(l,"quantity",c),label:""})})}),h.jsxs("div",{className:"lg:col-span-3 flex flex-row lg:flex-col justify-between items-center lg:items-end gap-2 h-full",children:[h.jsxs("div",{className:"relative group/price",children:[h.jsx("label",{className:"absolute -top-3 right-0 text-[8px] font-black text-gray-500 uppercase opacity-0 group-hover/price:opacity-100 transition-opacity",children:"Unit Price"}),h.jsx("input",{type:"text",inputMode:"decimal",value:a.finalPrice,onChange:c=>n(l,"finalPrice",c.target.value),className:"w-24 bg-transparent border-b border-gray-700 py-1 font-black text-right text-emerald-400 focus:border-emerald-500 outline-none text-sm transition-all"})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-[9px] text-gray-500 uppercase font-black tracking-wider",children:"Total"}),h.jsxs("p",{className:"text-lg font-black text-white tracking-tight",children:["$",(Number(a.total)||0).toFixed(2)]})]})]})]})]},a.id||l))})]}),jy=({subtotal:t,grandTotal:e,shippingFee:n,onShippingFeeChange:r,onSave:i,onDelete:o,loading:s})=>h.jsxs("div",{className:"flex-shrink-0 bg-[#0f1523]/80 backdrop-blur-xl border border-white/5 rounded-[2.5rem] p-5 lg:p-6 flex flex-col lg:flex-row gap-6 items-center justify-between shadow-[0_-10px_40px_rgba(0,0,0,0.3)] relative z-30",children:[h.jsxs("div",{className:"flex flex-wrap gap-8 items-center justify-center lg:justify-start w-full lg:w-auto",children:[h.jsxs("div",{className:"text-center lg:text-left",children:[h.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1",children:"Subtotal"}),h.jsxs("p",{className:"text-xl font-bold text-gray-300",children:["$",t.toFixed(2)]})]}),h.jsx("div",{className:"w-px h-10 bg-white/10 hidden lg:block"}),h.jsxs("div",{className:"text-center lg:text-left relative group",children:[h.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1 group-focus-within:text-blue-400 transition-colors",children:"Shipping Fee"}),h.jsxs("div",{className:"relative inline-flex items-center",children:[h.jsx("input",{type:"text",inputMode:"decimal",name:"Shipping Fee (Customer)",value:n,onChange:r,className:"w-20 bg-transparent border-b-2 border-gray-600 text-center font-black text-xl text-white outline-none focus:border-blue-500 transition-all py-0.5"}),h.jsx("span",{className:"text-gray-500 font-black ml-1 text-sm",children:"$"})]})]}),h.jsx("div",{className:"w-px h-10 bg-white/10 hidden lg:block"}),h.jsxs("div",{className:"text-center lg:text-left",children:[h.jsx("p",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-[0.2em] mb-1",children:"Grand Total"}),h.jsxs("p",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-emerald-200 tracking-tighter drop-shadow-md",children:["$",e.toFixed(2)]})]})]}),h.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 w-full lg:w-auto items-center",children:[h.jsxs("button",{type:"button",onClick:o,disabled:s,className:"w-full lg:w-auto px-8 py-5 bg-red-500/10 hover:bg-red-600 text-red-500 hover:text-white rounded-[1.5rem] font-black uppercase text-xs tracking-[0.2em] transition-all flex items-center justify-center gap-3 border border-red-500/20 active:scale-95 group order-last lg:order-first",children:[h.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:rotate-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",strokeWidth:"2.5"})}),"Delete"]}),h.jsx("button",{onClick:i,disabled:s,className:"w-full lg:w-auto px-12 py-5 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white rounded-[1.5rem] font-black uppercase text-xs tracking-[0.2em] shadow-[0_10px_30px_rgba(37,99,235,0.4)] transform active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50 disabled:cursor-not-allowed group border border-white/10",children:s?h.jsx(Pr,{size:"sm"}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"relative z-10",children:"Save Changes"}),h.jsx("div",{className:"w-8 h-8 bg-white/10 rounded-full flex items-center justify-center group-hover:bg-white/20 transition-colors",children:h.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]})})]})]}),Ti=()=>{if(typeof window>"u"||typeof navigator>"u")return!1;const t=navigator.userAgent||navigator.vendor||window.opera;return!!(/iPad|iPhone|iPod/.test(t)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)};let es=null,da=null;const Uy=t=>{if(!t||t.videoWidth===0)return null;const e=80,n=80;if(es||(es=document.createElement("canvas"),es.width=e,es.height=n,da=es.getContext("2d",{willReadFrequently:!0})),!da)return null;da.drawImage(t,0,0,e,n);const i=da.getImageData(0,0,e,n).data,o=new Float32Array(n).fill(0),s=new Float32Array(e).fill(0);let a=0;for(let _=1;_<n-1;_++)for(let w=1;w<e-1;w++){const N=(_*e+w)*4,A=(i[N]+i[N+1]+i[N+2])/3,I=(i[N-4]+i[N-3]+i[N-2])/3,D=(i[N-e*4]+i[N-e*4+1]+i[N-e*4+2])/3,M=Math.abs(A-I),T=Math.abs(A-D);let k=M+T>30?M+T:0;o[_]+=k,s[w]+=k,a+=k}if(a<15e3)return null;const l=(_,w)=>{const N=new Float32Array(w);for(let k=2;k<w-2;k++)N[k]=(_[k-2]+_[k-1]+_[k]+_[k+1]+_[k+2])/5;let A=0,I=w/2;for(let k=0;k<w;k++)N[k]>A&&(A=N[k],I=k);const D=A*.25;let M=I,T=I;for(;M>0&&N[M]>D;)M--;for(;T<w-1&&N[T]>D;)T++;return{min:Math.max(0,M-2),max:Math.min(w,T+2)}},c=l(s,e),p=l(o,n),m=(c.max-c.min)/e*100,y=(p.max-p.min)/n*100,v=(c.min+c.max)/2/e*100,S=(p.min+p.max)/2/n*100;return m>90||y>90||m<5||y<5?null:{x:v,y:S,width:m,height:y,score:Math.min(1,a/2e5)}},Xr=(t,e,n)=>t+(e-t)*n,By=(t,e,n,r,i)=>{const[o,s]=ve.useState(null),[a,l]=ve.useState(!1),c=ve.useRef(0),p=ve.useRef(0),m=ve.useRef(0),y=ve.useRef(null),v=ve.useRef(0),S=ve.useRef(!1),_=ve.useRef(!1),w=ve.useRef(null);ve.useEffect(()=>{if("BarcodeDetector"in window&&!Ti())try{console.log("Initializing Native BarcodeDetector..."),w.current=new window.BarcodeDetector({formats:["qr_code","ean_13","code_128","code_39"]})}catch(I){console.warn("Native BarcodeDetector failed to init:",I)}},[]);const N=()=>{v.current=Date.now()+3e3,l(!1)},A=ve.useCallback(async()=>{if(Ti())return;if(!t||t.paused||t.ended){c.current=requestAnimationFrame(A);return}let I=null;if(w.current)if(_.current)y.current;else{_.current=!0;try{const D=await w.current.detect(t);if(D.length>0){const T=D.sort(($,q)=>q.boundingBox.width*q.boundingBox.height-$.boundingBox.width*$.boundingBox.height)[0].boundingBox,k=t.videoWidth,R=t.videoHeight;k>0&&R>0&&(I={x:(T.x+T.width/2)/k*100,y:(T.y+T.height/2)/R*100,width:T.width/k*100,height:T.height/R*100})}}catch{}finally{_.current=!1}}else I=Uy(t);if(I){if(m.current=0,y.current?y.current={x:Xr(y.current.x,I.x,.4),y:Xr(y.current.y,I.y,.4),width:Xr(y.current.width,I.width,.4),height:Xr(y.current.height,I.height,.4)}:y.current=I,s(D=>D?{x:Xr(D.x,y.current.x,.25),y:Xr(D.y,y.current.y,.25),width:Xr(D.width,y.current.width,.2),height:Xr(D.height,y.current.height,.2)}:y.current),Date.now()>v.current){const D=I.x>30&&I.x<70&&I.y>30&&I.y<70,M=60,T=I.width<M;if(D&&T?p.current++:p.current=Math.max(0,p.current-1),p.current>3){let k=5;try{const q=e!=null&&e.getCapabilities?e.getCapabilities():{};q.zoom&&q.zoom.max&&(k=q.zoom.max)}catch{}const R=Math.min(k,8),$=M-I.width;if(Math.abs($)>2&&n<R&&!S.current){l(!0);let E=$*.01*n;E=Math.max(-.2,Math.min(E,.2));const L=Math.min(Math.max(n+E,1),R);Math.abs(L-n)>.02&&(S.current=!0,r(L),i(L).catch(B=>{}).finally(()=>{S.current=!1}))}}}}else m.current++,m.current>10&&(s(null),y.current=null,l(!1),p.current=0);c.current=requestAnimationFrame(A)},[t,n,r,i,e]);return ve.useEffect(()=>(Ti()||(c.current=requestAnimationFrame(A)),()=>{c.current&&cancelAnimationFrame(c.current)}),[A]),{trackingBox:o,isAutoZooming:a,notifyManualZoom:N}},qy=(t,e,n)=>{const r=ve.useRef(null),[i,o]=ve.useState(!0),[s,a]=ve.useState(null),[l,c]=ve.useState(1),[p,m]=ve.useState(null),[y,v]=ve.useState(!1),[S,_]=ve.useState(!1),[w,N]=ve.useState("environment"),A=ve.useRef(null),I=ve.useRef(null),D=ve.useRef(new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3")),M=ve.useCallback(()=>{N(H=>H==="environment"?"user":"environment")},[]),T=()=>{var F,G,Z;if(I.current&&I.current.readyState==="live")return I.current;if((F=r.current)!=null&&F.html5QrCode){const J=(Z=(G=r.current.html5QrCode).getRunningTrackCamera)==null?void 0:Z.call(G);if(J)return J}const H=document.querySelector(`#${t} video`);if(H&&H.srcObject){const ie=H.srcObject.getVideoTracks()[0];if(ie)return ie}return null},k=ve.useCallback(async H=>{const F=T();if(!F)return;const G=Ti();try{await F.applyConstraints(H)}catch{if(H.zoom&&G)try{await F.applyConstraints({advanced:[{zoom:H.zoom}]})}catch{}}},[]),R=ve.useCallback(async H=>{if(!T())return;let G=H;p&&(G=Math.max(p.min,Math.min(H,p.max))),c(G),await k({zoom:G})},[p,k]),{trackingBox:$,isAutoZooming:q,notifyManualZoom:E}=By(A.current,I.current,l,c,H=>k({zoom:H})),L=ve.useCallback(H=>{E(),R(H)},[E,R]),B=ve.useCallback(async()=>{const H=T();if(!H||Ti())return;const F=!y;try{await H.applyConstraints({advanced:[{torch:F}]}),v(F)}catch{try{await H.applyConstraints({torch:F}),v(F)}catch{}}},[y]),z=ve.useCallback(async()=>{const H=T();if(H){try{await k({focusMode:"continuous"})}catch{}try{const F=H.getCapabilities?H.getCapabilities():{};F.focusMode&&F.focusMode.includes("single-shot")&&await k({focusMode:"single-shot"})}catch{}}},[k]),ne=ve.useCallback(async H=>{if(!r.current)throw new Error("Scanner not initialized");return await r.current.scanFile(H,!0)},[]);return ve.useEffect(()=>{if(!window.Html5Qrcode){a("Scanner library missing.");return}return(async()=>{o(!0),v(!1),c(1);const F=new window.Html5Qrcode(t);r.current=F;const G=Ti(),J={fps:30,qrbox:{width:280,height:280},...G?{}:{aspectRatio:1.777777778},disableFlip:!1,experimentalFeatures:{useBarCodeDetectorIfSupported:!G},videoConstraints:G?{facingMode:"environment",width:{min:1280,ideal:1920},height:{min:720,ideal:1080}}:{facingMode:w,width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080},frameRate:{ideal:60,min:30},aspectRatio:1.777777778,focusMode:"continuous"}};let ie=0;const P=O=>{const K=Date.now();K-ie<1500||(ie=K,D.current.currentTime=0,D.current.play().catch(()=>{}),navigator.vibrate&&navigator.vibrate(50),e(O))};try{await F.start({facingMode:w},J,P,void 0);const O=document.querySelector(`#${t} video`);O&&(A.current=O,O.setAttribute("playsinline","true"),O.style.objectFit="cover");const K=T();if(K){I.current=K;const Q=K.getCapabilities?K.getCapabilities():{},te=K.getSettings();if(!G&&"torch"in Q?_(!0):_(!1),G){const se=te.zoom?Math.min(te.zoom,1):1;m({min:se>=1?1:.5,max:5,step:.1}),c(te.zoom||1)}else Q.zoom?(m({min:Q.zoom.min,max:Q.zoom.max,step:Q.zoom.step}),c(te.zoom||Q.zoom.min)):m(null)}o(!1)}catch(O){console.error("Camera Start Error:",O),a(O.name==="NotAllowedError"?"Camera permission denied.":"Camera error."),o(!1)}})(),()=>{r.current&&r.current.isScanning&&r.current.stop().then(()=>r.current.clear()).catch(console.error)}},[w]),{isInitializing:i,error:s,zoom:l,zoomCapabilities:p,handleZoomChange:L,isTorchOn:y,isTorchSupported:S,toggleTorch:B,trackingBox:$,isAutoZooming:q,triggerFocus:z,switchCamera:M,facingMode:w,scanFromImage:ne}},Oy=({isScanning:t,error:e,scanSuccessFlash:n,zoom:r,useSimulatedZoom:i,trackingBox:o,focusPoint:s})=>h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
              .hud-grid {
                background-size: 40px 40px;
                background-image: linear-gradient(to right, rgba(59, 130, 246, 0.1) 1px, transparent 1px), linear-gradient(to bottom, rgba(59, 130, 246, 0.1) 1px, transparent 1px);
              }
              .scanner-laser {
                position: absolute; left: 0; width: 100%; height: 2px; background: #3b82f6; box-shadow: 0 0 15px #3b82f6; animation: laser-scan 2s ease-in-out infinite;
              }
              @keyframes laser-scan { 0% { top: 0%; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
              
              /* Enhanced Success Animation */
              .scan-flash-overlay { animation: flash-screen 0.4s ease-out forwards; }
              @keyframes flash-screen { 
                  0% { background-color: rgba(16, 185, 129, 0); } 
                  20% { background-color: rgba(16, 185, 129, 0.4); } 
                  100% { background-color: rgba(16, 185, 129, 0); } 
              }
              
              .tracking-box {
                  position: absolute;
                  border: 2px solid #10b981;
                  background-color: rgba(16, 185, 129, 0.1);
                  box-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
                  border-radius: 8px;
                  transition: all 0.1s linear; /* Smooth movement */
                  pointer-events: none;
                  z-index: 10;
                  transform: translate(-50%, -50%); /* Center based on x, y */
              }

              /* Focus Reticle Animation */
              @keyframes focus-ping {
                  0% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; border-color: white; }
                  20% { opacity: 1; }
                  100% { transform: translate(-50%, -50%) scale(1); opacity: 0; border-color: #f59e0b; }
              }
              .focus-reticle {
                  position: absolute;
                  width: 60px;
                  height: 60px;
                  border: 2px solid white;
                  border-radius: 50%;
                  pointer-events: none;
                  animation: focus-ping 0.6s ease-out forwards;
                  z-index: 20;
                  box-shadow: 0 0 10px rgba(255,255,255,0.5);
              }
            `}),h.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[!t&&!e&&h.jsx("div",{className:"absolute inset-0 hud-grid opacity-30"}),n&&h.jsx("div",{className:"absolute inset-0 z-50 scan-flash-overlay"}),s&&h.jsx("div",{className:"focus-reticle",style:{left:s.x,top:s.y}}),o&&h.jsx("div",{className:"tracking-box",style:{left:`${o.x}%`,top:`${o.y}%`,width:`${o.width}%`,height:`${o.height}%`},children:h.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-emerald-500 text-white text-[9px] font-black px-2 py-0.5 rounded uppercase tracking-wider shadow-lg whitespace-nowrap animate-pulse",children:"AI TRACKING"})}),!t&&!e&&!o&&h.jsxs("div",{className:`
                        absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 
                        w-[260px] h-[260px] border-2 transition-all duration-300
                        ${n?"border-emerald-500 scale-110 shadow-[0_0_50px_rgba(16,185,129,0.8)]":"border-white/30"}
                        rounded-[2rem]
                    `,children:[h.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-blue-500 rounded-tl-2xl -translate-x-1 -translate-y-1"}),h.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-blue-500 rounded-tr-2xl translate-x-1 -translate-y-1"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-blue-500 rounded-bl-2xl -translate-x-1 translate-y-1"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-blue-500 rounded-br-2xl translate-x-1 translate-y-1"}),h.jsx("div",{className:"scanner-laser"})]}),h.jsxs("div",{className:"absolute top-[18%] right-4 flex flex-col gap-2 items-end",children:[h.jsxs("div",{className:"text-[9px] font-mono text-blue-400 bg-black/60 px-2 py-1 rounded border border-blue-500/20 flex items-center gap-2 backdrop-blur-md",children:[h.jsxs("span",{children:[r.toFixed(1),"x"]}),i&&h.jsx("span",{className:"bg-white/10 px-1 rounded text-[8px] text-white",children:"DIGITAL"})]}),o&&h.jsx("div",{className:"text-[9px] font-mono text-emerald-400 bg-black/60 px-2 py-1 rounded border border-emerald-500/20 flex items-center gap-2 backdrop-blur-md animate-pulse",children:h.jsx("span",{children:"SMART-ZOOM"})})]})]})]}),Hy=({history:t,isOpen:e,setIsOpen:n,onClear:r})=>{const i=ve.useRef(null),o=a=>{i.current=a.touches[0].clientY},s=a=>{i.current!==null&&a.touches[0].clientY-i.current>50&&(n(!1),i.current=null)};return h.jsxs("div",{className:`
                absolute bottom-0 left-0 right-0 bg-[#0f172a] rounded-t-[2.5rem] border-t border-white/10 shadow-[0_-20px_60px_rgba(0,0,0,0.9)] z-50 transition-all duration-300 ease-out flex flex-col
                ${e?"h-[80vh]":"h-0 overflow-hidden"}
            `,onTouchStart:o,onTouchMove:s,onTouchEnd:()=>{i.current=null},children:[h.jsx("div",{className:"w-full flex justify-center py-5 cursor-pointer active:bg-white/5 transition-colors rounded-t-[2.5rem]",onClick:()=>n(!e),children:h.jsx("div",{className:"w-16 h-1.5 bg-gray-600 rounded-full"})}),h.jsxs("div",{className:"flex-grow flex flex-col overflow-hidden px-5 pb-6 animate-fade-in",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-1.5 h-6 bg-blue-500 rounded-full"}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-base font-black text-white uppercase tracking-tight",children:"Scanned History"}),h.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:[t.length," items logged"]})]})]}),h.jsx("button",{onClick:r,className:"text-[10px] text-red-400 font-black uppercase tracking-widest bg-red-500/10 px-4 py-2 rounded-xl border border-red-500/20 active:scale-95 transition-all hover:bg-red-500 hover:text-white",children:"Clear All"})]}),h.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar space-y-3 pb-safe-bottom",children:t.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-48 opacity-40",children:[h.jsx("svg",{className:"w-12 h-12 text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),h.jsx("p",{className:"text-xs font-black uppercase text-gray-500 tracking-widest",children:"No items scanned yet"})]}):t.map((a,l)=>{var c;return h.jsxs("div",{className:"flex items-center gap-4 bg-gray-800/40 p-3 rounded-2xl border border-white/5 shadow-sm",children:[h.jsx("div",{className:"w-12 h-12 bg-black rounded-xl overflow-hidden border border-white/10 flex-shrink-0 shadow-inner",children:a.product?h.jsx("img",{src:at(a.product.ImageURL),className:"w-full h-full object-cover",alt:""}):h.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 font-black text-xs",children:"?"})}),h.jsxs("div",{className:"flex-grow min-w-0",children:[h.jsx("h4",{className:"text-white font-bold text-sm truncate leading-tight",children:((c=a.product)==null?void 0:c.ProductName)||"Unknown Product"}),h.jsx("p",{className:"text-[10px] text-gray-500 font-mono mt-1 font-bold tracking-wider",children:a.code})]}),h.jsxs("div",{className:"text-right flex flex-col items-end",children:[h.jsxs("span",{className:"bg-blue-600/20 text-blue-400 text-xs font-black px-2 py-0.5 rounded-lg border border-blue-500/20 mb-1",children:["x",a.count]}),h.jsx("span",{className:"text-[9px] text-gray-600 font-bold",children:new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},l)})})]})]})},Vy=({onClose:t,onSwitchCamera:e,onToggleTorch:n,isTorchOn:r,isTorchSupported:i,isAutoZooming:o})=>{const s=!Ti()&&i;return h.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent pointer-events-none",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[h.jsxs("div",{className:"pointer-events-auto bg-black/40 backdrop-blur-md px-3 py-1.5 rounded-full border border-blue-500/30 flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),h.jsx("span",{className:"text-white font-black text-xs uppercase tracking-widest",children:"LIVE"}),o&&h.jsx("span",{className:"text-[9px] text-blue-400 font-bold ml-1 animate-pulse",children:"AUTO-ZOOM"})]}),h.jsxs("div",{className:"flex gap-3 pointer-events-auto",children:[h.jsx("button",{onClick:e,className:"w-10 h-10 bg-gray-800/60 backdrop-blur-md rounded-full text-white border border-white/10 flex items-center justify-center active:scale-90 transition-all hover:bg-gray-700/60",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s&&h.jsx("button",{onClick:n,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all backdrop-blur-md border ${r?"bg-yellow-500 text-black border-yellow-400 shadow-[0_0_15px_rgba(234,179,8,0.5)]":"bg-gray-800/60 text-gray-300 border-white/10"}`,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),h.jsx("button",{onClick:t,className:"w-10 h-10 bg-gray-800/60 backdrop-blur-md rounded-full text-white border border-white/10 flex items-center justify-center active:scale-90 transition-all hover:bg-red-500/80 hover:border-red-500/50",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})]})},Gy=({zoom:t,zoomCapabilities:e,handleZoomChange:n,scanMode:r,setScanMode:i,onOpenHistory:o,onUpload:s})=>{const a=ve.useRef(null),l=e&&e.min<1,c=e&&e.max>=2,p=e&&e.max>=5,m=y=>{y.target.files&&y.target.files[0]&&(s(y.target.files[0]),y.target.value="")};return h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 z-40 bg-gradient-to-t from-black via-black/90 to-transparent flex flex-col gap-5 pointer-events-none",style:{paddingBottom:"max(1.5rem, env(safe-area-inset-bottom))"},children:[e&&h.jsxs("div",{className:"flex justify-center items-center gap-4 pointer-events-auto mb-1 animate-fade-in-up",children:[l&&h.jsx("button",{onClick:()=>n(.5),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-.5)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:".5"}),h.jsx("button",{onClick:()=>n(1),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-1)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"1x"}),c&&h.jsx("button",{onClick:()=>n(2),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-2)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"2"}),p&&h.jsx("button",{onClick:()=>n(5),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-5)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"5"})]}),e&&h.jsxs("div",{className:"flex items-center gap-3 px-2 pointer-events-auto",children:[h.jsxs("span",{className:"text-[9px] font-black text-gray-500 w-6 text-center",children:[e.min,"x"]}),h.jsx("input",{type:"range",min:e.min,max:e.max,step:e.step,value:t,onChange:y=>n(parseFloat(y.target.value)),className:"flex-1 h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500"}),h.jsxs("span",{className:"text-[9px] font-black text-gray-500 w-6 text-center",children:[e.max,"x"]})]}),h.jsxs("div",{className:"flex justify-between items-center gap-3 pointer-events-auto px-2",children:[h.jsx("input",{type:"file",accept:"image/*",ref:a,className:"hidden",onChange:m}),h.jsx("button",{onClick:()=>{var y;return(y=a.current)==null?void 0:y.click()},className:"w-12 h-12 rounded-2xl bg-gray-800 border border-white/10 flex items-center justify-center text-gray-400 active:scale-90 transition-all shadow-lg hover:text-white",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),h.jsxs("div",{className:"flex bg-gray-800 p-1.5 rounded-2xl border border-white/10 shadow-lg flex-grow max-w-[200px]",children:[h.jsx("button",{onClick:()=>i("single"),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all duration-300 ${r==="single"?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,children:"Single"}),h.jsx("button",{onClick:()=>i("increment"),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all duration-300 ${r==="increment"?"bg-emerald-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,children:"Multi"})]}),h.jsx("div",{className:"w-12"})]}),h.jsx("div",{className:"w-full flex justify-center pb-2 cursor-pointer opacity-70 hover:opacity-100 transition-opacity pointer-events-auto",onClick:o,children:h.jsxs("div",{className:"flex flex-col items-center gap-1",children:[h.jsx("div",{className:"w-10 h-1 bg-gray-600 rounded-full"}),h.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase tracking-widest",children:"Swipe for History"})]})})]})},zy=({onClose:t,onCodeScanned:e,scanMode:n,setScanMode:r,productsInOrder:i,masterProducts:o})=>{var K;const[s,a]=ve.useState([]),[l,c]=ve.useState(!1),[p,m]=ve.useState(null),[y,v]=ve.useState(!1),[S,_]=ve.useState(null),w=ve.useRef(null),N=ve.useRef(null),A=ve.useRef(null),I=ve.useRef(0),D=ve.useRef(1),M=ve.useRef(0);ve.useEffect(()=>(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[]);const T=ve.useCallback(Q=>{v(!0),setTimeout(()=>v(!1),400);const te=o.find(se=>se.Barcode&&se.Barcode.trim()===Q.trim());if(a(se=>{const de=se.findIndex(_e=>_e.code===Q),pe=Date.now();if(de>-1){const _e=[...se];return _e[de]={..._e[de],count:_e[de].count+1,timestamp:pe},[_e.splice(de,1)[0],..._e]}return[{code:Q,product:te,timestamp:pe,count:1},...se]}),te){const se=i.find(de=>de.name===te.ProductName);n==="single"&&se?m({status:"warning",message:"áž˜áž¶áž“áž€áŸ’áž“áž»áž„áž”áž‰áŸ’áž‡áž¸ážšáž½áž…áž áž¾áž™",product:te}):(e(Q),m({status:"success",message:"áž”áž¶áž“áž”áž“áŸ’ážáŸ‚áž˜áž‡áŸ„áž‚áž‡áŸáž™",product:te}))}else m({status:"error",message:`ážšáž€áž˜áž·áž“ážƒáž¾áž‰: ${Q}`,product:void 0});setTimeout(()=>m(null),2e3)},[o,i,n,e]),{isInitializing:k,error:R,zoom:$,zoomCapabilities:q,handleZoomChange:E,isTorchOn:L,isTorchSupported:B,toggleTorch:z,trackingBox:ne,isAutoZooming:H,triggerFocus:F,switchCamera:G,scanFromImage:Z}=qy("barcode-reader-container",T),J=Q=>{if(Q.touches.length===2){const te=Math.hypot(Q.touches[0].pageX-Q.touches[1].pageX,Q.touches[0].pageY-Q.touches[1].pageY);w.current=te,D.current=$}else if(Q.touches.length===1){N.current=Q.touches[0].clientY,A.current=Q.touches[0].clientX,I.current=Date.now();const te=Date.now();te-M.current<300&&q&&E(q.min||1),M.current=te}},ie=Q=>{if(Q.touches.length===2&&w.current!==null&&q){const se=Math.hypot(Q.touches[0].pageX-Q.touches[1].pageX,Q.touches[0].pageY-Q.touches[1].pageY)/w.current,de=q.max-q.min,pe=(se-1)*de*.8;E(D.current+pe)}else if(Q.touches.length===1&&N.current!==null){const te=Q.touches[0].clientY-N.current;te<-50&&!l?(c(!0),N.current=null):te>50&&l&&(c(!1),N.current=null)}},P=Q=>{if(A.current!==null&&N.current!==null){const te=Q.changedTouches[0].clientX,se=Q.changedTouches[0].clientY,de=Math.abs(te-A.current),pe=Math.abs(se-N.current);Date.now()-I.current<300&&de<15&&pe<15&&(_({x:te,y:se}),F(),setTimeout(()=>_(null),1e3))}w.current=null,N.current=null,A.current=null},O=async Q=>{try{const te=await Z(Q);T(te)}catch{m({status:"error",message:"ážšáž€áž˜áž·áž“ážƒáž¾áž‰ Barcode áž€áŸ’áž“áž»áž„ážšáž¼áž”áž—áž¶áž–",product:void 0}),setTimeout(()=>m(null),2e3)}};return h.jsxs("div",{className:"fixed inset-0 bg-black z-[100] flex flex-col animate-fade-in touch-none overflow-hidden h-screen",style:{height:"100dvh"},onTouchStart:J,onTouchMove:ie,onTouchEnd:P,children:[h.jsx("style",{children:`
              #barcode-reader-container { width: 100%; height: 100%; background: #000; overflow: hidden; }
              #barcode-reader-container video { object-fit: cover; width: 100%; height: 100%; }
              @keyframes pop-in { 0% { transform: translate(-50%, -40%) scale(0.8); opacity: 0; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; } }
              .animate-pop-in { animation: pop-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
            `}),h.jsx(Vy,{onClose:t,onSwitchCamera:G,onToggleTorch:z,isTorchOn:L,isTorchSupported:B,isAutoZooming:H}),h.jsxs("div",{className:"relative flex-grow w-full overflow-hidden bg-black",children:[h.jsx("div",{id:"barcode-reader-container"}),h.jsx(Oy,{isScanning:k,error:R,scanSuccessFlash:y,zoom:$,useSimulatedZoom:!1,trackingBox:ne,focusPoint:S}),p&&h.jsx("div",{className:"absolute top-1/2 left-1/2 w-[85%] max-w-sm z-50 animate-pop-in transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",children:h.jsxs("div",{className:`
                            bg-gray-900/95 backdrop-blur-2xl border p-4 rounded-3xl shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex items-center gap-4
                            ${p.status==="success"?"border-emerald-500 shadow-emerald-900/30":p.status==="warning"?"border-yellow-500 shadow-yellow-900/30":"border-red-500 shadow-red-900/30"}
                        `,children:[p.product?h.jsx("div",{className:"w-14 h-14 rounded-2xl bg-black border border-white/10 overflow-hidden flex-shrink-0",children:h.jsx("img",{src:at(p.product.ImageURL),className:"w-full h-full object-cover",alt:""})}):h.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gray-800 flex items-center justify-center text-red-400",children:h.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:2})})}),h.jsxs("div",{className:"min-w-0 flex-grow",children:[h.jsx("p",{className:`text-[10px] font-black uppercase tracking-widest mb-0.5 ${p.status==="success"?"text-emerald-400":p.status==="warning"?"text-yellow-400":"text-red-400"}`,children:p.status==="success"?"SUCCESS":p.status==="warning"?"ALREADY ADDED":"ERROR"}),h.jsx("h3",{className:"text-white font-bold text-sm truncate",children:((K=p.product)==null?void 0:K.ProductName)||"Unknown Product"}),p.product&&h.jsxs("p",{className:"text-white font-mono font-black text-lg mt-0.5",children:["$",p.product.Price.toFixed(2)]})]})]})}),R&&h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 z-30 p-6 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-red-500/20 text-red-500 rounded-full flex items-center justify-center mb-4",children:h.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:2})})}),h.jsx("p",{className:"text-red-400 font-bold text-sm",children:R})]}),k&&h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black z-30",children:[h.jsx(Pr,{size:"lg"}),h.jsx("p",{className:"text-blue-500 font-black text-[10px] uppercase tracking-widest mt-4 animate-pulse",children:"Initializing..."})]})]}),!l&&h.jsx(Gy,{zoom:$,zoomCapabilities:q,handleZoomChange:E,scanMode:n,setScanMode:r,onOpenHistory:()=>c(!0),onUpload:O}),h.jsx(Hy,{history:s,isOpen:l,setIsOpen:c,onClear:()=>a([])})]})},ox=({order:t,onSaveSuccess:e,onCancel:n})=>{const{appData:r,currentUser:i,previewImage:o,refreshData:s}=ve.useContext(mo),a=ve.useRef(t),[l,c]=ve.useState(t),[p,m]=ve.useState(!1),[y,v]=ve.useState(""),[S,_]=ve.useState(""),[w,N]=ve.useState(!1),[A,I]=ve.useState("increment"),[D,M]=ve.useState(""),[T,k]=ve.useState("");ve.useEffect(()=>{if(i){if(!i.IsSystemAdmin){if(!(i.Team||"").split(",").map(J=>J.trim()).includes(t.Team)){alert("áž¢áŸ’áž“áž€áž˜áž·áž“áž˜áž¶áž“ážŸáž·áž‘áŸ’áž’áž·áž€áŸ‚áž”áŸ’ážšáŸ‚áž€áž¶ážšáž”áž‰áŸ’áž‡áž¶áž‘áž·áž‰ážšáž”ážŸáŸ‹áž€áŸ’ážšáž»áž˜áž•áŸ’ážŸáŸáž„áž‘áŸ (You cannot edit orders from other teams)."),n();return}const F=new Date(t.Timestamp).getTime(),G=Date.now()-F,Z=720*60*1e3;if(G>Z){alert("áž€áž¶ážšáž”áž‰áŸ’áž‡áž¶áž‘áž·áž‰áž“áŸáŸ‡áž›áž¾ážŸáž–áž¸ 12 áž˜áŸ‰áŸ„áž„áž áž¾áž™ áž¢áŸ’áž“áž€áž˜áž·áž“áž¢áž¶áž…áž€áŸ‚áž”áŸ’ážšáŸ‚áž”áž¶áž“áž‘áŸ (Order is older than 12 hours)."),n();return}}Pl(i.UserName,"VIEW_EDIT_PAGE",`Opened Order #${t["Order ID"]} for editing`)}},[]),ve.useEffect(()=>{c(t),a.current=t},[t]),ve.useEffect(()=>{var H;if(l["Payment Status"]==="Paid"&&l["Payment Info"]){const F=(H=r.bankAccounts)==null?void 0:H.find(G=>G.BankName===l["Payment Info"]);F&&_(at(F.LogoURL))}},[l["Payment Status"],l["Payment Info"],r.bankAccounts]);const R=H=>{if(!H.target.value)return;const F=`${H.target.value}:00`;c(G=>({...G,Timestamp:F}))},$=()=>{c(H=>{const F={id:Date.now()+Math.random(),name:"",quantity:1,originalPrice:0,finalPrice:0,total:0,discountPercent:0,colorInfo:"",image:"",cost:0,tags:""},G=[...H.Products,F],Z=parseFloat(String(H["Shipping Fee (Customer)"]))||0,J=ao(G,Z);return{...H,Products:G,...J}})},q=H=>{if(l.Products.length<=1){alert("áž˜áž·áž“áž¢áž¶áž…áž›áž»áž”áž•áž›áž·ážáž•áž›áž…áž»áž„áž€áŸ’ážšáŸ„áž™áž”áž¶áž“áž‘áŸ (Cannot remove last item)");return}c(F=>{const G=F.Products.filter((ie,P)=>P!==H),Z=Number(F["Shipping Fee (Customer)"])||0,J=ao(G,Z);return{...F,Products:G,...J}})},E=H=>{const F=r.products.find(G=>G.Barcode&&G.Barcode.trim()===H.trim());F&&(c(G=>{const Z=[...G.Products],J=Z.findIndex(O=>O.name===F.ProductName);if(J>-1){if(A==="increment"){const O={...Z[J]};O.quantity=(Number(O.quantity)||0)+1,O.total=O.quantity*(Number(O.finalPrice)||0),Z[J]=O}}else{const O={id:Date.now(),name:F.ProductName,quantity:1,originalPrice:F.Price,finalPrice:F.Price,total:F.Price,discountPercent:0,colorInfo:"",image:F.ImageURL,cost:F.Cost,tags:F.Tags};Z.push(O)}const ie=parseFloat(String(G["Shipping Fee (Customer)"]))||0,P=ao(Z,ie);return{...G,Products:Z,...P}}),A==="single"&&N(!1))},L=H=>{const{name:F,value:G}=H.target;c(Z=>{let J=G;F==="Customer Phone"?(J=G.replace(/[^0-9]/g,""),J.length>0&&!J.startsWith("0")&&(J="0"+J)):(F==="Shipping Fee (Customer)"||F==="Internal Cost")&&(G===""||G.endsWith(".")?J=G:J=Math.max(0,parseFloat(G)||0));const ie={...Z,[F]:J};if(F==="Shipping Fee (Customer)"){const P=parseFloat(String(J))||0,O=ao(ie.Products,P);return{...ie,...O}}return F==="Payment Status"&&J==="Unpaid"&&(ie["Payment Info"]="",_("")),ie})},B=(H,F,G,Z)=>{c(J=>{const ie=[...J.Products],P={...ie[H]};if(F==="name"){P.name=G;const se=r.products.find(de=>de.ProductName===G);se?(P.originalPrice=se.Price,P.finalPrice=se.Price,P.cost=se.Cost,P.image=se.ImageURL,P.tags=Z!==void 0?Z:se.Tags):(P.originalPrice=0,P.finalPrice=0,P.cost=0,P.image="",P.tags="")}else F==="finalPrice"||F==="quantity"?G===""||String(G).endsWith(".")?P[F]=G:P[F]=Math.max(F==="quantity"?1:0,parseFloat(G)||0):P[F]=G;const O=parseFloat(String(P.quantity))||0,K=parseFloat(String(P.finalPrice))||0;P.total=O*K,ie[H]=P;const Q=parseFloat(String(J["Shipping Fee (Customer)"]))||0,te=ao(ie,Q);return{...J,Products:ie,...te}})},z=async()=>{if(!window.confirm(`ážáž¾áž¢áŸ’áž“áž€áž–áž·ážáž‡áž¶áž…áž„áŸ‹áž›áž»áž”áž”áŸ’ážšážáž·áž”ážáŸ’ážáž·áž€áž¶ážšážŽáŸ ID: ${l["Order ID"]} áž˜áŸ‚áž“áž‘áŸ?`)||!i)return;const H=i.UserName||"Unknown User";try{const F=await fetch(`${ni}/api/admin/delete-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:l["Order ID"],team:l.Team,userName:H,telegramMessageId1:l["Telegram Message ID 1"],telegramMessageId2:l["Telegram Message ID 2"],telegramChatId:l.TelegramValue})}),G=await F.json();if(!F.ok||G.status!=="success")throw new Error(G.message||"Delete failed");await Pl(H,"DELETE_ORDER",`Deleted Order #${l["Order ID"]}`),await s(),e()}catch(F){v(`áž›áž»áž”áž˜áž·áž“áž”áž¶áž“ážŸáž˜áŸ’ážšáŸáž…: ${F.message}`)}},ne=async H=>{var Z;if(H.preventDefault(),m(!0),v(""),!l.Products.every(J=>J.name&&parseFloat(String(J.quantity))>0)){v("ážŸáž¼áž˜áž–áž·áž“áž·ážáŸ’áž™áž–áŸážáŸŒáž˜áž¶áž“áž•áž›áž·ážáž•áž› (ážˆáŸ’áž˜áŸ„áŸ‡ áž“áž·áž„áž…áŸ†áž“áž½áž“)áŸ”"),m(!1);return}const F=(Z=r.shippingMethods)==null?void 0:Z.find(J=>J.MethodName===l["Internal Shipping Method"]);if(F!=null&&F.RequireDriverSelection&&!l["Internal Shipping Details"]){v("ážŸáž¼áž˜áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸáž¢áŸ’áž“áž€ážŠáž¹áž€ (Driver) ážŸáž˜áŸ’ážšáž¶áž”áŸ‹ážŸáŸážœáž¶áž€áž˜áŸ’áž˜áž“áŸáŸ‡áŸ”"),m(!1);return}const G=(i==null?void 0:i.UserName)||"Unknown User";try{const J=parseFloat(String(l["Shipping Fee (Customer)"]))||0,ie=ao(l.Products,J),P={...l,"Shipping Fee (Customer)":J,Subtotal:ie.Subtotal,"Grand Total":ie["Grand Total"],"Internal Cost":parseFloat(String(l["Internal Cost"]))||0,"Discount ($)":ie["Discount ($)"],"Total Product Cost ($)":ie["Total Product Cost ($)"],IsVerified:!!l.IsVerified},O=l.Products.map(se=>({...se,quantity:parseFloat(String(se.quantity))||0,finalPrice:parseFloat(String(se.finalPrice))||0,total:(parseFloat(String(se.quantity))||0)*(parseFloat(String(se.finalPrice))||0)}));P["Products (JSON)"]=JSON.stringify(O);const K=ky(a.current,P);K&&K.length>0&&await Promise.all(K.map(se=>Iy(l["Order ID"],G,se.field,se.oldValue,se.newValue)));const Q=await fetch(`${ni}/api/admin/update-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:l["Order ID"],team:l.Team,userName:G,newData:P})}),te=await Q.json();if(!Q.ok||te.status!=="success")throw new Error(te.message||"Update failed");await Pl(G,"UPDATE_ORDER",`Updated Order #${l["Order ID"]}`),await s(),e()}catch(J){v(`ážšáž€áŸ’ážŸáž¶áž‘áž»áž€áž˜áž·áž“áž”áž¶áž“ážŸáž˜áŸ’ážšáŸáž…: ${J.message}`)}finally{m(!1)}};return h.jsxs("div",{className:"w-full h-full lg:h-[calc(100vh-40px)] flex flex-col animate-fade-in lg:overflow-hidden",children:[w&&h.jsx(zy,{onClose:()=>N(!1),onCodeScanned:E,scanMode:A,setScanMode:I,productsInOrder:l.Products,masterProducts:r.products}),h.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 px-1 lg:px-4 pt-2",children:[h.jsxs("div",{children:[h.jsxs("h1",{className:"text-2xl font-black text-white uppercase tracking-tighter italic flex items-center gap-3",children:[h.jsx("span",{className:"w-1.5 h-6 bg-blue-600 rounded-full"}),"Edit Order"]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[h.jsxs("span",{className:"text-[10px] font-mono font-bold text-gray-500 bg-gray-900 px-2 py-0.5 rounded border border-gray-800",children:["#",l["Order ID"]]}),h.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:l.Team}),h.jsxs("div",{className:"flex items-center gap-1 bg-gray-900 px-2 py-0.5 rounded border border-gray-800",children:[h.jsx("label",{htmlFor:"order-date",className:"text-[10px] font-black text-gray-600 uppercase cursor-pointer",children:"Date"}),h.jsx("input",{id:"order-date",type:"datetime-local",value:Ty(l.Timestamp),onChange:R,disabled:!(i!=null&&i.IsSystemAdmin),className:`bg-transparent border-none text-[10px] font-bold text-blue-400 p-0 focus:ring-0 h-4 ${i!=null&&i.IsSystemAdmin?"":"opacity-50 cursor-not-allowed"}`,style:{colorScheme:"dark"}})]})]})]}),h.jsx("button",{onClick:n,className:"px-6 py-2.5 bg-gray-800 border border-gray-700 hover:bg-gray-700 text-gray-400 font-black rounded-xl uppercase text-[10px] tracking-widest transition-all",children:"áž”áŸ„áŸ‡áž”áž„áŸ‹"})]}),y&&h.jsxs("div",{className:"flex-shrink-0 mb-4 mx-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 flex items-center gap-3 animate-shake",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:"2"})}),h.jsx("span",{className:"font-bold text-xs",children:y})]}),h.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-6 overflow-hidden px-1 lg:px-4 pb-4",children:[h.jsx("div",{className:"w-full lg:w-[380px] xl:w-[420px] flex-shrink-0 h-full overflow-hidden",children:h.jsx(My,{formData:l,appData:r,onChange:L,onProvinceSelect:H=>{c(F=>({...F,Location:H})),M(""),k("")},onDistrictChange:H=>{M(H),k("")},onSangkatChange:k,onShippingMethodSelect:H=>c(F=>({...F,"Internal Shipping Method":H.MethodName,"Internal Shipping Details":H.RequireDriverSelection?"":H.MethodName})),onDriverSelect:H=>c(F=>({...F,"Internal Shipping Details":H})),onBankChange:H=>{var Z;const F=H.target.value;c(J=>({...J,"Payment Info":F}));const G=(Z=r.bankAccounts)==null?void 0:Z.find(J=>J.BankName===F);_(G?at(G.LogoURL):"")},selectedDistrict:D,selectedSangkat:T,bankLogo:S})}),h.jsxs("div",{className:"flex-1 flex flex-col gap-4 overflow-hidden h-full",children:[h.jsx(Fy,{products:l.Products,masterProducts:r.products,onProductChange:B,onAddProduct:$,onRemoveProduct:q,onPreviewImage:o,onScanBarcode:()=>N(!0)}),h.jsx(jy,{subtotal:Number(l.Subtotal)||0,grandTotal:Number(l["Grand Total"])||0,shippingFee:l["Shipping Fee (Customer)"],onShippingFeeChange:L,onSave:ne,onDelete:z,loading:p})]})]})]})},Wy=t=>ve.useMemo(()=>t.reduce((e,n)=>({grandTotal:e.grandTotal+(Number(n["Grand Total"])||0),internalCost:e.internalCost+(Number(n["Internal Cost"])||0),count:e.count+1,paidCount:e.paidCount+(n["Payment Status"]==="Paid"?1:0),unpaidCount:e.unpaidCount+(n["Payment Status"]==="Unpaid"?1:0)}),{grandTotal:0,internalCost:0,count:0,paidCount:0,unpaidCount:0}),[t]),$y=({totals:t,isVisible:e,showSelection:n})=>t.count===0?null:h.jsxs("tr",{className:"bg-blue-900/30 border-b-2 border-blue-500/20 sticky top-0 z-20 backdrop-blur-md shadow-lg",children:[n&&h.jsx("td",{className:"px-4 py-4"}),e("index")&&h.jsx("td",{className:"px-4 py-4 text-center font-black text-blue-400 text-[clamp(12px,0.9vw,14px)]",children:t.count}),e("actions")&&h.jsx("td",{className:"px-4 py-4"}),e("customerName")&&h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"font-black text-white uppercase tracking-widest text-[clamp(11px,0.8vw,13px)]",children:"Grand Total (ážŸážšáž»áž”ážšáž½áž˜)"})}),e("productInfo")&&h.jsx("td",{className:"px-6 py-4"}),e("location")&&h.jsx("td",{className:"px-6 py-4"}),e("pageInfo")&&h.jsx("td",{className:"px-6 py-4"}),e("fulfillment")&&h.jsx("td",{className:"px-6 py-4"}),e("total")&&h.jsx("td",{className:"px-6 py-4",children:h.jsxs("span",{className:"font-black text-emerald-400 tracking-tighter shadow-emerald-500/20 drop-shadow-sm text-[clamp(16px,1.2vw,20px)]",children:["$",t.grandTotal.toLocaleString(void 0,{minimumFractionDigits:2})]})}),e("shippingService")&&h.jsx("td",{className:"px-6 py-4"}),e("shippingCost")&&h.jsx("td",{className:"px-6 py-4",children:h.jsxs("span",{className:"font-black text-orange-400 font-mono text-[clamp(13px,0.9vw,15px)]",children:["$",t.internalCost.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3})]})}),e("status")&&h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex flex-col gap-1.5 items-start",children:[t.paidCount>0&&h.jsxs("span",{className:"font-black text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20 uppercase tracking-wider whitespace-nowrap text-[clamp(10px,0.7vw,12px)]",children:["Paid: ",t.paidCount]}),t.unpaidCount>0&&h.jsxs("span",{className:"font-black text-red-400 bg-red-500/10 px-2 py-0.5 rounded border border-red-500/20 uppercase tracking-wider whitespace-nowrap text-[clamp(10px,0.7vw,12px)]",children:["Unpaid: ",t.unpaidCount]})]})}),e("date")&&h.jsx("td",{className:"px-4 py-4"}),e("print")&&h.jsx("td",{className:"px-4 py-4"}),e("check")&&h.jsx("td",{className:"px-2 py-4"}),e("orderId")&&h.jsx("td",{className:"px-2 py-4"})]}),ah=({totals:t})=>t.count===0?null:h.jsxs("div",{className:"bg-blue-900/20 backdrop-blur-xl border border-blue-500/30 rounded-[2.2rem] p-5 shadow-2xl relative overflow-hidden animate-fade-in",children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("h3",{className:"text-sm font-black text-blue-300 uppercase tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"w-1.5 h-4 bg-blue-500 rounded-full"}),"Grand Total"]}),h.jsxs("span",{className:"text-[10px] font-bold text-gray-400 bg-black/30 px-3 py-1 rounded-full",children:[t.count," Orders"]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[h.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl border border-white/5",children:[h.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase mb-1",children:"Total Revenue"}),h.jsxs("p",{className:"text-xl font-black text-emerald-400 tracking-tighter",children:["$",t.grandTotal.toLocaleString()]})]}),h.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl border border-white/5",children:[h.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase mb-1",children:"Total Cost"}),h.jsxs("p",{className:"text-lg font-black text-orange-400 tracking-tighter",children:["$",t.internalCost.toLocaleString(void 0,{minimumFractionDigits:3,maximumFractionDigits:3})]})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"flex-1 bg-emerald-500/10 p-2 rounded-xl border border-emerald-500/20 flex justify-between items-center px-3",children:[h.jsx("span",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-widest",children:"PAID"}),h.jsx("span",{className:"text-sm font-black text-white",children:t.paidCount})]}),h.jsxs("div",{className:"flex-1 bg-red-500/10 p-2 rounded-xl border border-red-500/20 flex justify-between items-center px-3",children:[h.jsx("span",{className:"text-[9px] font-black text-red-500 uppercase tracking-widest",children:"UNPAID"}),h.jsx("span",{className:"text-sm font-black text-white",children:t.unpaidCount})]})]})]}),Jy=({orders:t,totals:e,visibleColumns:n,selectedIds:r,onToggleSelect:i,onToggleSelectAll:o,onEdit:s,handlePrint:a,handleCopy:l,handleCopyTemplate:c,copiedId:p,copiedTemplateId:m,toggleOrderVerified:y,updatingIds:v})=>{const{appData:S,previewImage:_,currentUser:w}=ve.useContext(mo),N=ve.useRef(null),[A,I]=ve.useState(0),D=88,M=5,T=F=>!n||n.has(F),k=t.length>0&&t.every(F=>r.has(F["Order ID"])),{virtualItems:R,totalHeight:$,paddingTop:q}=ve.useMemo(()=>{var P;const F=t.length*D,G=((P=N.current)==null?void 0:P.clientHeight)||800;let Z=Math.floor(A/D),J=Math.min(t.length-1,Math.floor((A+G)/D));Z=Math.max(0,Z-M),J=Math.min(t.length-1,J+M);const ie=[];for(let O=Z;O<=J;O++)ie.push({index:O,data:t[O]});return{virtualItems:ie,totalHeight:F,paddingTop:Z*D}},[t,A]),E=F=>I(F.currentTarget.scrollTop),L=F=>{if(!F||!S.phoneCarriers)return null;const Z=F.replace(/\s/g,"").substring(0,3),J=S.phoneCarriers.find(ie=>ie.Prefixes.split(",").map(P=>P.trim()).includes(Z));return J?at(J.CarrierLogoURL):null},B=F=>{if(!F||!S.shippingMethods)return null;const G=S.shippingMethods.find(Z=>Z.MethodName===F);return G?at(G.LogosURL):null},z=F=>{let G=(F||"").replace(/[^0-9]/g,"");return G.length>0&&(G="0"+G.replace(/^0+/,"")),G},ne=F=>{if(!F)return new Date;const G=F.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(G)return new Date(parseInt(G[1]),parseInt(G[2])-1,parseInt(G[3]),parseInt(G[4]),parseInt(G[5]));if(F.endsWith("Z")){const J=F.slice(0,-1);return new Date(J)}const Z=new Date(F);return isNaN(Z.getTime())?new Date:Z},H=F=>{if(!w)return!1;if(w.IsSystemAdmin)return!0;if(!(w.Team||"").split(",").map(ie=>ie.trim()).includes(F.Team))return!1;const Z=ne(F.Timestamp).getTime();return Date.now()-Z<432e5};return h.jsxs("div",{className:"page-card !p-0 shadow-2xl border-white/5 bg-gray-900/60 backdrop-blur-3xl rounded-[2.5rem] flex flex-col h-[calc(100vh-220px)]",children:[h.jsx("div",{className:"flex-shrink-0 z-20 bg-gray-900 rounded-t-[2.5rem] border-b border-white/10",children:h.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed"},children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-gray-800/80",children:[o&&h.jsx("th",{className:"px-4 py-6 w-12 text-center",children:h.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-600 bg-gray-900 text-blue-500 cursor-pointer",checked:k,onChange:()=>o(t.map(F=>F["Order ID"]))})}),T("index")&&h.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-12 text-[clamp(10px,0.8vw,12px)]",children:"#"}),T("actions")&&h.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-24 text-[clamp(10px,0.8vw,12px)]",children:"Command"}),T("customerName")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-56 text-[clamp(10px,0.8vw,12px)]",children:"Merchant/Client"}),T("productInfo")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-44 text-[clamp(10px,0.8vw,12px)]",children:"Assets"}),T("location")&&h.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-40 text-[clamp(10px,0.8vw,12px)]",children:"Geography"}),T("pageInfo")&&h.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-40 text-[clamp(10px,0.8vw,12px)]",children:"Source Page"}),T("fulfillment")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Fulfillment"}),T("total")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Valuation"}),T("shippingService")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-48 text-[clamp(10px,0.8vw,12px)]",children:"Logistics"}),T("shippingCost")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-28 text-[clamp(10px,0.8vw,12px)]",children:"Exp. Cost"}),T("status")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Status"}),T("date")&&h.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-24 text-[clamp(10px,0.8vw,12px)]",children:"Time"}),T("print")&&h.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Output"}),T("check")&&h.jsx("th",{className:"px-2 py-6 font-normal uppercase tracking-[0.15em] text-center text-emerald-500/80 w-14 text-[9px]",children:"VERIFIED"}),T("orderId")&&h.jsx("th",{className:"px-2 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-16 text-[clamp(10px,0.8vw,12px)]",children:"Node ID"})]})}),h.jsx("tbody",{className:"bg-[#0f172a]",children:h.jsx($y,{totals:e,isVisible:T,showSelection:!!i})})]})}),h.jsx("div",{ref:N,className:"flex-grow overflow-y-auto custom-scrollbar",onScroll:E,children:h.jsx("div",{style:{height:`${$}px`,position:"relative"},children:h.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed",transform:`translateY(${q}px)`},children:[h.jsx("thead",{className:"invisible h-0",children:h.jsxs("tr",{children:[o&&h.jsx("th",{className:"w-12"}),T("index")&&h.jsx("th",{className:"w-12"}),T("actions")&&h.jsx("th",{className:"w-24"}),T("customerName")&&h.jsx("th",{className:"w-56"}),T("productInfo")&&h.jsx("th",{className:"w-44"}),T("location")&&h.jsx("th",{className:"w-40"}),T("pageInfo")&&h.jsx("th",{className:"w-40"}),T("fulfillment")&&h.jsx("th",{className:"w-32"}),T("total")&&h.jsx("th",{className:"w-32"}),T("shippingService")&&h.jsx("th",{className:"w-48"}),T("shippingCost")&&h.jsx("th",{className:"w-28"}),T("status")&&h.jsx("th",{className:"w-32"}),T("date")&&h.jsx("th",{className:"w-24"}),T("print")&&h.jsx("th",{className:"w-32"}),T("check")&&h.jsx("th",{className:"w-14"}),T("orderId")&&h.jsx("th",{className:"w-16"})]})}),h.jsx("tbody",{className:"divide-y divide-white/5",children:R.map(({index:F,data:G})=>{var Ee;const Z=(Ee=S.pages)==null?void 0:Ee.find(Ie=>Ie.PageName===G.Page),J=Z?at(Z.PageLogoURL):"",ie=z(G["Customer Phone"]),P=L(ie),O=p===G["Order ID"],K=m===G["Order ID"],Q=B(G["Internal Shipping Method"]),te=G["Order ID"],se=G.IsVerified===!0||String(G.IsVerified).toUpperCase()==="TRUE"||G.IsVerified==="A",de=v.has(te),pe=r.has(te),_e=ne(G.Timestamp),Ce=H(G);return h.jsxs("tr",{className:`
                                            ${se?"bg-emerald-900/30 border-l-4 border-l-emerald-500 shadow-[inset_0_0_20px_rgba(16,185,129,0.1)]":pe?"bg-blue-500/10 shadow-[inset_3px_0_0_0_#3b82f6]":"hover:bg-white/[0.02]"} 
                                            transition-all group relative
                                        `,style:{height:`${D}px`},children:[i&&h.jsx("td",{className:"px-4 py-5 text-center",children:h.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-700 bg-gray-950 text-blue-500 cursor-pointer",checked:pe,onChange:()=>i(te)})}),T("index")&&h.jsx("td",{className:"px-4 py-5 text-center font-bold text-gray-600 text-[clamp(11px,0.8vw,13px)]",children:F+1}),T("actions")&&h.jsx("td",{className:"px-4 py-5 text-center",children:Ce?h.jsx("button",{onClick:()=>s&&s(G),className:"text-blue-400/80 hover:text-white bg-blue-400/5 hover:bg-blue-600 px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border border-blue-400/10",children:"Edit"}):h.jsx("span",{className:"text-gray-600 text-[9px] font-bold uppercase cursor-not-allowed",children:"Locked"})}),T("customerName")&&h.jsxs("td",{className:"px-6 py-5",children:[h.jsx("div",{className:"font-black text-gray-100 truncate mb-1 leading-tight tracking-tight text-[clamp(14px,1.1vw,16px)]",children:G["Customer Name"]}),h.jsxs("div",{className:"flex items-center gap-2",children:[P&&h.jsx("img",{src:P,className:"w-4 h-4 object-contain opacity-80",alt:"carrier"}),h.jsx("div",{className:"text-blue-400/80 font-mono font-black tracking-tighter text-[clamp(12px,0.9vw,14px)]",children:ie})]})]}),T("productInfo")&&h.jsx("td",{className:"px-6 py-5",children:h.jsx("div",{className:"flex flex-col gap-1",children:G.Products.slice(0,2).map((Ie,He)=>h.jsxs("div",{className:"bg-black/40 p-1.5 rounded-lg border border-white/5 flex flex-col",children:[h.jsx("span",{className:"font-bold text-gray-300 line-clamp-1 text-[clamp(11px,0.8vw,12px)]",children:Ie.name}),h.jsxs("span",{className:"text-blue-400/80 font-black mt-0.5 text-[clamp(10px,0.7vw,11px)]",children:["x",Ie.quantity]})]},He))})}),T("location")&&h.jsxs("td",{className:"px-4 py-5",children:[h.jsx("div",{className:"font-black text-gray-200 leading-tight truncate text-[clamp(12px,0.9vw,14px)]",children:G.Location}),h.jsx("div",{className:"font-bold text-gray-600 mt-1 line-clamp-1 text-[clamp(10px,0.7vw,12px)]",children:G["Address Details"]})]}),T("pageInfo")&&h.jsx("td",{className:"px-4 py-5",children:h.jsxs("div",{className:"flex items-center gap-3",children:[J&&h.jsx("img",{src:J,className:"w-8 h-8 rounded-full border border-white/10 object-cover",alt:"logo"}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("span",{className:"font-black text-gray-300 block truncate leading-none mb-1 text-[clamp(12px,0.9vw,13px)]",children:G.Page}),h.jsx("span",{className:"text-[9px] text-gray-600 uppercase font-black tracking-widest",children:G.Team})]})]})}),T("fulfillment")&&h.jsx("td",{className:"px-6 py-5",children:h.jsx("span",{className:"font-bold text-gray-300 bg-gray-800 px-2 py-1 rounded border border-white/5 text-[clamp(11px,0.8vw,12px)]",children:G["Fulfillment Store"]})}),T("total")&&h.jsxs("td",{className:"px-6 py-5 font-black text-blue-400 tracking-tighter text-[clamp(16px,1.2vw,18px)]",children:["$",G["Grand Total"].toFixed(2)]}),T("shippingService")&&h.jsx("td",{className:"px-6 py-5",children:h.jsxs("div",{className:"flex items-center gap-2.5",children:[Q&&h.jsx("img",{src:Q,className:"w-5 h-5 rounded-lg object-contain bg-gray-950 p-0.5 border border-white/5",alt:"shipping"}),h.jsx("span",{className:"text-orange-400/80 font-black uppercase truncate tracking-tight text-[clamp(10px,0.8vw,12px)]",children:G["Internal Shipping Method"]||"-"})]})}),T("shippingCost")&&h.jsxs("td",{className:"px-6 py-5 text-gray-400 font-mono font-black tracking-tighter text-[clamp(13px,0.9vw,15px)]",children:["$",(Number(G["Internal Cost"])||0).toFixed(3)]}),T("status")&&h.jsx("td",{className:"px-6 py-5",children:h.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border ${G["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:G["Payment Status"]})}),T("date")&&h.jsx("td",{className:"px-4 py-5",children:h.jsxs("div",{className:"flex flex-col items-start",children:[h.jsx("span",{className:"font-bold text-gray-400 text-[clamp(11px,0.8vw,12px)]",children:_e.toLocaleDateString("km-KH")}),h.jsx("span",{className:"font-mono text-blue-500/80 font-black text-[clamp(10px,0.7vw,11px)]",children:_e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]})}),T("print")&&h.jsx("td",{className:"px-4 py-5 text-center",children:h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("button",{onClick:()=>c(G),className:`p-2.5 rounded-xl transition-all border active:scale-90 ${K?"bg-indigo-500/20 border-indigo-500/50 text-indigo-400":"bg-gray-800 text-gray-400 border-white/10 hover:text-white"}`,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})}),h.jsx("button",{onClick:()=>a(G),className:"text-emerald-400/60 hover:text-white bg-emerald-400/5 hover:bg-emerald-600 p-2.5 rounded-xl transition-all border border-emerald-400/10 active:scale-90",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 9V2h12v7M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2m-2 4H8v-4h8v4z"})})})]})}),T("check")&&h.jsx("td",{className:"px-2 py-5 text-center",children:h.jsx("div",{className:"relative flex items-center justify-center cursor-pointer group/check",onClick:()=>!de&&y(te,G.IsVerified),title:se?"Verified (A)":"Verify",children:h.jsx("div",{className:`
                                                        h-8 w-8 rounded-xl border-2 flex items-center justify-center transition-all duration-300
                                                        ${se?"bg-emerald-500 border-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.5)] scale-110":"bg-gray-900 border-gray-700 hover:border-emerald-500/50 hover:bg-emerald-500/10"} 
                                                        ${de?"opacity-50 cursor-wait":""}
                                                    `,children:de?h.jsx(Pr,{size:"sm"}):h.jsx("svg",{className:`w-5 h-5 text-white font-black animate-scale-in transition-opacity duration-200 ${se?"opacity-100":"opacity-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3.5,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})})}),T("orderId")&&h.jsx("td",{className:"px-2 py-5 text-center",children:h.jsx("button",{onClick:()=>l(G["Order ID"]),className:`p-2 rounded-xl transition-all border ${O?"bg-green-500/20 border-green-500/40 text-green-400":"bg-gray-800 border-white/5 text-gray-500 hover:text-blue-400 active:scale-90"}`,children:h.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:O?"âœ“":"ID"})})})]},te)})})]})})}),h.jsx("style",{children:"@keyframes scale-in { 0% { transform: scale(0); } 80% { transform: scale(1.2); } 100% { transform: scale(1); } } .animate-scale-in { animation: scale-in 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }"})]})},Yy=({orders:t,totals:e,visibleColumns:n,selectedIds:r,onToggleSelect:i,onEdit:o,handlePrint:s,handleCopy:a,handleCopyTemplate:l,copiedId:c,copiedTemplateId:p,toggleOrderVerified:m,updatingIds:y})=>{const{appData:v,previewImage:S,currentUser:_}=ve.useContext(mo),[w,N]=ve.useState(()=>{const J=localStorage.getItem("mobile_view_preference");return J==="card"||J==="table"?J:"table"}),[A,I]=ve.useState(null),D=J=>{N(J),localStorage.setItem("mobile_view_preference",J)},[M,T]=ve.useState(20),k=ve.useMemo(()=>t.slice(0,M),[t,M]),R=()=>{T(J=>J+20)},$=!n||n.has("productInfo"),q=!n||n.has("actions"),E=!n||n.has("print"),L=!n||n.has("check"),B=!n||n.has("fulfillment"),z=J=>{if(!J)return new Date;const ie=J.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(ie)return new Date(parseInt(ie[1]),parseInt(ie[2])-1,parseInt(ie[3]),parseInt(ie[4]),parseInt(ie[5]));if(J.endsWith("Z")){const O=J.slice(0,-1);return new Date(O)}const P=new Date(J);return isNaN(P.getTime())?new Date:P},ne=J=>{if(!_)return!1;if(_.IsSystemAdmin)return!0;if(!(_.Team||"").split(",").map(K=>K.trim()).includes(J.Team))return!1;const P=z(J.Timestamp).getTime();return Date.now()-P<432e5},H=J=>{if(!J||!v.phoneCarriers)return null;const P=J.replace(/\s/g,"").substring(0,3),O=v.phoneCarriers.find(K=>K.Prefixes.split(",").map(Q=>Q.trim()).includes(P));return O?at(O.CarrierLogoURL):null},F=J=>{if(!J||!v.shippingMethods)return null;const ie=v.shippingMethods.find(P=>P.MethodName===J);return ie?at(ie.LogosURL):null},G=J=>{let ie=(J||"").replace(/[^0-9]/g,"");return ie.length>0&&(ie="0"+ie.replace(/^0+/,"")),ie},Z=J=>z(J).toLocaleDateString("km-KH");return h.jsxs("div",{className:"space-y-5 pb-40",children:[h.jsx(ah,{totals:e}),h.jsxs("div",{className:"flex justify-between items-center px-2",children:[h.jsxs("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:[t.length," Entries"]}),h.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-xl border border-white/10",children:[h.jsx("button",{onClick:()=>D("card"),className:`p-2 rounded-lg transition-all ${w==="card"?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300 bg-gray-900/50"}`,title:"Card View",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2.5,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4h6v6H4V4zm10 0h6v6h-6V4zM4 14h6v6H4v-6zm10 0h6v6h-6v-6z"})})}),h.jsx("button",{onClick:()=>D("table"),className:`p-2 rounded-lg transition-all ${w==="table"?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300 bg-gray-900/50"}`,title:"Table View",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2.5,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6h18M3 12h18M3 18h18"})})})]})]}),w==="table"?h.jsx("div",{className:"bg-[#0f172a] border border-white/10 rounded-3xl overflow-hidden shadow-2xl animate-fade-in relative",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-[#0f172a] border-b border-white/10 text-[10px] text-gray-400 font-black uppercase tracking-wider",children:[h.jsx("th",{className:"p-3 sticky left-0 z-20 bg-[#0f172a] border-r border-white/10 min-w-[130px] shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)]",children:"Customer"}),B&&h.jsx("th",{className:"p-3 min-w-[100px] text-gray-400",children:"Store"}),h.jsx("th",{className:"p-3 text-right min-w-[80px]",children:"Total"}),h.jsx("th",{className:"p-3 text-center min-w-[90px]",children:"Status"}),h.jsx("th",{className:"p-3 text-center min-w-[50px]",children:"Act"}),h.jsx("th",{className:"p-3 min-w-[100px]",children:"Date"})]})}),h.jsx("tbody",{className:"divide-y divide-white/5 text-xs",children:k.map(J=>{const ie=r.has(J["Order ID"]),P=J.IsVerified===!0||String(J.IsVerified).toUpperCase()==="TRUE"||J.IsVerified==="A",O=p===J["Order ID"],K=ne(J);return h.jsxs("tr",{className:`${ie?"bg-blue-900/20":P?"bg-emerald-900/5":"hover:bg-white/5"} transition-colors`,children:[h.jsx("td",{className:"p-3 sticky left-0 z-20 bg-gray-900 border-r border-white/10 shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)]",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"font-bold text-white truncate max-w-[110px]",children:J["Customer Name"]}),h.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:J["Customer Phone"]})]})}),B&&h.jsx("td",{className:"p-3 text-gray-300 font-bold text-[10px]",children:J["Fulfillment Store"]}),h.jsxs("td",{className:"p-3 text-right font-black text-blue-400",children:["$",J["Grand Total"].toFixed(2)]}),h.jsx("td",{className:"p-3 text-center",children:h.jsx("span",{className:`px-2 py-0.5 rounded text-[8px] font-black uppercase border ${J["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:J["Payment Status"]})}),h.jsx("td",{className:"p-3 text-center",children:h.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[h.jsx("button",{onClick:()=>l(J),className:`text-gray-400 hover:text-white transition-all active:scale-90 ${O?"text-indigo-400":""}`,children:O?h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})}),E&&h.jsx("button",{onClick:()=>s(J),className:"text-emerald-400 hover:text-white transition-all active:scale-90",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2.5,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 9V2h12v7M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2m-2 4H8v-4h8v4z"})})}),o&&K?h.jsx("button",{onClick:()=>o(J),className:"text-gray-400 hover:text-white",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}):h.jsx("span",{className:"text-gray-600",title:"Locked",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]})}),h.jsx("td",{className:"p-3 text-[9px] text-gray-500 font-bold",children:Z(J.Timestamp)})]},J["Order ID"])})})]})})}):k.map(J=>{var Ee,Ie;const ie=(Ee=v.pages)==null?void 0:Ee.find(He=>He.PageName===J.Page),P=ie?at(ie.PageLogoURL):"",O=G(J["Customer Phone"]),K=H(O),Q=J.IsVerified===!0||String(J.IsVerified).toUpperCase()==="TRUE"||J.IsVerified==="A",te=y.has(J["Order ID"]),se=r.has(J["Order ID"]),de=F(J["Internal Shipping Method"]),pe=c===J["Order ID"],_e=p===J["Order ID"],Ce=ne(J);return h.jsxs("div",{className:`
                                relative rounded-3xl p-5 shadow-lg transition-all duration-300 overflow-hidden group
                                ${se?"bg-blue-900/30 border-2 border-blue-500/50 shadow-blue-900/20":Q?"bg-emerald-950/40 border border-emerald-500/20 shadow-none":"bg-slate-900 border border-white/5 shadow-md"}
                            `,children:[se&&h.jsx("div",{className:"absolute inset-0 bg-blue-500/5 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[i&&h.jsx("div",{className:"relative z-10",children:h.jsx("input",{type:"checkbox",className:"h-6 w-6 rounded-xl border-gray-600 bg-gray-800 text-blue-500 focus:ring-blue-500/20 cursor-pointer transition-all",checked:se,onChange:()=>i(J["Order ID"])})}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:()=>a(J["Order ID"]),className:`
                                                flex items-center gap-2 px-3 py-1 rounded-xl border transition-all active:scale-95
                                                ${pe?"bg-emerald-500/20 border-emerald-500/50 text-emerald-400":"bg-black/30 border-white/5 text-gray-400 hover:text-white"}
                                            `,children:[h.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest font-mono",children:["#",J["Order ID"].substring(0,8)]}),pe&&h.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})]}),h.jsx("button",{onClick:()=>l(J),className:`
                                                flex items-center justify-center w-8 h-8 rounded-xl border transition-all active:scale-95
                                                ${_e?"bg-indigo-500/20 border-indigo-500/50 text-indigo-400":"bg-black/30 border-white/5 text-gray-400 hover:text-white"}
                                            `,children:_e?h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]}),h.jsxs("div",{className:"flex flex-col items-end",children:[h.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[8px] font-black uppercase tracking-wider border ${J["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:J["Payment Status"]}),h.jsx("span",{className:"text-[9px] text-gray-600 font-bold mt-1",children:Z(J.Timestamp)})]})]}),h.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[h.jsxs("div",{className:"relative w-14 h-14 rounded-2xl bg-black/40 border border-white/10 p-1 flex-shrink-0",children:[P?h.jsx("img",{src:P,className:"w-full h-full object-cover rounded-xl",alt:"page logo"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 text-[10px] font-black",children:"N/A"}),h.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-900 rounded-lg p-0.5 border border-gray-700",children:K&&h.jsx("img",{src:K,className:"w-4 h-4 object-contain",alt:"carrier"})})]}),h.jsxs("div",{className:"flex-grow min-w-0",children:[h.jsx("h3",{className:"text-white font-black text-sm truncate leading-tight mb-1",children:J["Customer Name"]}),h.jsx("p",{className:"text-blue-400 font-mono font-bold text-xs tracking-wide mb-1",children:O}),h.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-gray-500 font-bold truncate",children:[h.jsxs("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsx("span",{className:"truncate",children:J.Location||"N/A"})]})]})]}),$&&J.Products&&J.Products.length>0&&h.jsx("div",{className:"bg-black/20 rounded-2xl p-3 border border-white/5 mb-5 shadow-inner",children:h.jsxs("div",{className:"flex overflow-x-auto gap-3 pb-2 snap-x no-scrollbar",children:[J.Products.slice(0,4).map((He,be)=>{var Oe;const oe=(Oe=v.products)==null?void 0:Oe.find(ke=>ke.ProductName===He.name),Ke=He.image||(oe==null?void 0:oe.ImageURL)||"";return h.jsxs("div",{className:"flex-shrink-0 w-[200px] snap-center bg-gray-800/50 rounded-xl p-2 border border-white/5 flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-lg bg-black/50 flex-shrink-0 overflow-hidden border border-white/5",onClick:()=>S(at(Ke)),children:h.jsx("img",{src:at(Ke),className:"w-full h-full object-cover",alt:""})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("p",{className:"text-[11px] font-bold text-gray-200 truncate",children:He.name}),h.jsxs("div",{className:"flex justify-between items-center mt-0.5",children:[h.jsxs("span",{className:"text-[9px] text-gray-500 font-bold",children:["Qty: ",h.jsx("span",{className:"text-white",children:He.quantity})]}),He.colorInfo&&h.jsx("span",{className:"text-[8px] bg-purple-500/10 text-purple-400 px-1.5 rounded uppercase font-bold",children:He.colorInfo})]})]})]},be)}),J.Products.length>4&&h.jsxs("button",{onClick:()=>I(J),className:"flex-shrink-0 w-[100px] snap-center bg-gray-800/80 rounded-xl p-2 border border-white/10 flex flex-col items-center justify-center gap-2 hover:bg-gray-700 transition-colors active:scale-95",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600/20 text-blue-400 flex items-center justify-center border border-blue-500/30",children:h.jsxs("span",{className:"font-black text-sm",children:["+",J.Products.length-4]})}),h.jsx("span",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-wider",children:"View All"})]})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[h.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:[h.jsx("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Total Amount"}),h.jsxs("p",{className:"text-lg font-black text-white tracking-tight",children:["$",J["Grand Total"].toFixed(2)]})]}),h.jsx("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Shipping"}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[de&&h.jsx("img",{src:de,className:"w-3.5 h-3.5 object-contain",alt:""}),h.jsx("span",{className:"text-xs font-bold text-orange-400",children:(Ie=J["Internal Shipping Method"])==null?void 0:Ie.substring(0,10)})]})]}),J["Internal Cost"]>0&&h.jsxs("span",{className:"text-[9px] font-mono text-gray-600 font-bold bg-black/20 px-1.5 py-0.5 rounded",children:["-$",(Number(J["Internal Cost"])||0).toFixed(3)]})]})})]}),h.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-white/5",children:[q&&(Ce?h.jsx("button",{onClick:()=>o&&o(J),className:"flex-1 py-3 bg-blue-600/10 text-blue-400 rounded-xl border border-blue-500/20 font-black text-[10px] uppercase tracking-widest hover:bg-blue-600 hover:text-white transition-all active:scale-95",children:"Edit"}):h.jsx("button",{disabled:!0,className:"flex-1 py-3 bg-gray-800 text-gray-600 rounded-xl border border-white/5 font-black text-[10px] uppercase tracking-widest cursor-not-allowed",children:"Locked"})),E&&h.jsx("button",{onClick:()=>s(J),className:"w-12 h-12 flex items-center justify-center bg-gray-800 text-gray-400 rounded-xl border border-white/10 hover:text-white active:scale-90 transition-all",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2.5,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 9V2h12v7M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2m-2 4H8v-4h8v4z"})})}),L&&h.jsxs("div",{className:"ml-auto relative",children:[h.jsx("input",{type:"checkbox",checked:Q,onChange:()=>m(J["Order ID"],Q),className:`w-12 h-12 rounded-xl appearance-none border transition-all cursor-pointer ${Q?"bg-emerald-500 border-emerald-400":"bg-gray-800 border-gray-600"}`}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:te?h.jsx(Pr,{size:"sm"}):Q?h.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):h.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase",children:"Check"})})]})]})]},J["Order ID"])}),M<t.length&&h.jsx("div",{className:"flex justify-center pt-4",children:h.jsxs("button",{onClick:R,className:"px-8 py-3 bg-gray-800 text-white rounded-full text-xs font-black uppercase tracking-widest border border-white/10 shadow-lg active:scale-95 transition-all",children:["Load More (",t.length-M," remaining)"]})}),A&&h.jsx(ic,{isOpen:!0,onClose:()=>I(null),maxWidth:"max-w-lg",children:h.jsxs("div",{className:"p-6 bg-[#0f172a] rounded-[2rem] border border-white/10 shadow-2xl",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/10 pb-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight",children:"Products List"}),h.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:["Order #",A["Order ID"].substring(0,8)]})]}),h.jsx("button",{onClick:()=>I(null),className:"p-2 bg-gray-800 rounded-full text-gray-400 hover:text-white transition-all active:scale-90",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:A.Products.map((J,ie)=>{var K,Q;const P=(K=v.products)==null?void 0:K.find(te=>te.ProductName===J.name),O=J.image||(P==null?void 0:P.ImageURL)||"";return h.jsxs("div",{className:"flex items-start gap-4 p-3 bg-gray-800/50 rounded-2xl border border-white/5 hover:border-white/10 transition-colors",children:[h.jsx("div",{className:"w-16 h-16 rounded-xl bg-black/40 overflow-hidden border border-white/10 flex-shrink-0 shadow-inner",children:h.jsx("img",{src:at(O),className:"w-full h-full object-cover",alt:""})}),h.jsxs("div",{className:"flex-grow min-w-0 pt-1",children:[h.jsx("h4",{className:"text-sm font-bold text-white leading-tight mb-1 line-clamp-2",children:J.name}),h.jsxs("div",{className:"flex flex-wrap gap-2 text-[10px]",children:[h.jsxs("span",{className:"bg-blue-600/20 text-blue-400 px-2 py-0.5 rounded font-black border border-blue-500/20",children:["x",J.quantity]}),h.jsxs("span",{className:"text-gray-400 font-bold self-center",children:["Price: $",(Q=J.finalPrice)==null?void 0:Q.toFixed(2)]}),J.colorInfo&&h.jsx("span",{className:"bg-purple-600/20 text-purple-400 px-2 py-0.5 rounded font-bold border border-purple-500/20",children:J.colorInfo})]}),h.jsxs("p",{className:"text-xs font-black text-white mt-1.5 text-right tracking-tight",children:["$",(J.total||0).toFixed(2)]})]})]},ie)})}),h.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 flex justify-between items-center",children:[h.jsx("span",{className:"text-gray-400 text-xs font-bold uppercase tracking-widest",children:"Total Items"}),h.jsx("span",{className:"text-white font-black text-lg",children:A.Products.reduce((J,ie)=>J+(Number(ie.quantity)||0),0)})]})]})}),h.jsx("style",{children:`
                .no-scrollbar::-webkit-scrollbar { display: none; }
                .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `})]})},Ky=({orders:t,totals:e,visibleColumns:n,selectedIds:r,onToggleSelect:i,onEdit:o,handlePrint:s,handleCopy:a,handleCopyTemplate:l,copiedId:c,copiedTemplateId:p,toggleOrderVerified:m,updatingIds:y})=>{const{appData:v,previewImage:S,currentUser:_}=ve.useContext(mo),w=M=>{if(!M)return new Date;const T=M.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(T)return new Date(parseInt(T[1]),parseInt(T[2])-1,parseInt(T[3]),parseInt(T[4]),parseInt(T[5]));if(M.endsWith("Z")){const R=M.slice(0,-1);return new Date(R)}const k=new Date(M);return isNaN(k.getTime())?new Date:k},N=M=>{if(!_)return!1;if(_.IsSystemAdmin)return!0;if(!(_.Team||"").split(",").map($=>$.trim()).includes(M.Team))return!1;const k=w(M.Timestamp).getTime();return Date.now()-k<432e5},A=M=>{if(!M||!v.phoneCarriers)return null;const k=M.replace(/\s/g,"").substring(0,3),R=v.phoneCarriers.find($=>$.Prefixes.split(",").map(q=>q.trim()).includes(k));return R?at(R.CarrierLogoURL):null},I=M=>{if(!M||!v.shippingMethods)return null;const T=v.shippingMethods.find(k=>k.MethodName===M);return T?at(T.LogosURL):null},D=M=>{let T=(M||"").replace(/[^0-9]/g,"");return T.length>0&&(T="0"+T.replace(/^0+/,"")),T};return h.jsxs("div",{className:"space-y-6 pb-20",children:[h.jsx("div",{className:"w-full",children:h.jsx(ah,{totals:e})}),h.jsx("div",{className:"grid grid-cols-2 gap-5",children:t.map(M=>{var F,G;const T=(F=v.pages)==null?void 0:F.find(Z=>Z.PageName===M.Page),k=T?at(T.PageLogoURL):"",R=D(M["Customer Phone"]),$=A(R),q=M.IsVerified===!0||String(M.IsVerified).toUpperCase()==="TRUE"||M.IsVerified==="A",E=y.has(M["Order ID"]),L=r.has(M["Order ID"]),B=I(M["Internal Shipping Method"]),z=c===M["Order ID"],ne=p===M["Order ID"],H=N(M);return h.jsxs("div",{className:`
                                relative rounded-[2rem] p-5 shadow-xl transition-all duration-300 overflow-hidden group flex flex-col justify-between
                                ${L?"bg-blue-900/20 border-2 border-blue-500/50 shadow-blue-900/20":q?"bg-emerald-900/10 border border-emerald-500/20 shadow-emerald-900/10":"bg-[#1e293b]/60 border border-white/5 shadow-black/30 backdrop-blur-md hover:bg-[#1e293b]/80"}
                            `,children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[i&&h.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-lg border-gray-600 bg-gray-800 text-blue-500 cursor-pointer focus:ring-0",checked:L,onChange:()=>i(M["Order ID"])}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:()=>a(M["Order ID"]),className:`flex items-center gap-2 px-3 py-1.5 rounded-xl border transition-all active:scale-95 ${z?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":"bg-black/30 text-gray-400 border-white/5 hover:text-white"}`,children:[h.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest font-mono",children:["#",M["Order ID"].substring(0,8)]}),z&&h.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})]}),h.jsx("button",{onClick:()=>l(M),className:`flex items-center justify-center w-8 h-8 rounded-xl border transition-all active:scale-95 ${ne?"bg-indigo-500/20 border-indigo-500/50 text-indigo-400":"bg-black/30 border-white/5 text-gray-400 hover:text-white"}`,children:ne?h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]}),h.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-wider border ${M["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:M["Payment Status"]})]}),h.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[h.jsx("div",{className:"relative w-12 h-12 rounded-xl bg-black/40 border border-white/10 p-0.5 flex-shrink-0",children:k?h.jsx("img",{src:k,className:"w-full h-full object-cover rounded-[10px]",alt:"logo"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center text-[9px]",children:"N/A"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("h3",{className:"text-white font-black text-sm truncate",children:M["Customer Name"]}),h.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[$&&h.jsx("img",{src:$,className:"h-3 w-auto object-contain opacity-70",alt:"carrier"}),h.jsx("p",{className:"text-blue-400 font-mono font-bold text-xs",children:R})]}),h.jsxs("div",{className:"text-[10px] text-gray-500 font-bold truncate mt-1 flex items-center gap-1",children:[h.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),M.Location||"N/A"]})]})]}),h.jsx("div",{className:"bg-black/20 rounded-xl p-2.5 border border-white/5 mb-4 overflow-hidden",children:h.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:M.Products&&M.Products.length>0?M.Products.map((Z,J)=>{var O;const ie=(O=v.products)==null?void 0:O.find(K=>K.ProductName===Z.name),P=Z.image||(ie==null?void 0:ie.ImageURL)||"";return h.jsxs("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-gray-800 border border-white/5 overflow-hidden relative cursor-pointer",onClick:()=>S(at(P)),children:[h.jsx("img",{src:at(P),className:"w-full h-full object-cover",alt:""}),h.jsxs("div",{className:"absolute bottom-0 right-0 bg-blue-600 text-white text-[8px] font-black px-1 rounded-tl-md",children:["x",Z.quantity]})]},J)}):h.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"No products"})})}),h.jsxs("div",{className:"mt-auto",children:[h.jsxs("div",{className:"flex justify-between items-end mb-4 pt-3 border-t border-white/5",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-wider",children:"Total"}),h.jsxs("p",{className:"text-xl font-black text-white tracking-tight",children:["$",M["Grand Total"].toFixed(2)]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-wider",children:"Shipping"}),h.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[B&&h.jsx("img",{src:B,className:"w-3.5 h-3.5 object-contain",alt:""}),h.jsx("span",{className:"text-xs font-bold text-orange-400",children:(G=M["Internal Shipping Method"])==null?void 0:G.substring(0,10)})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[o&&(H?h.jsx("button",{onClick:()=>o(M),className:"flex-1 py-2.5 bg-blue-600/10 text-blue-400 hover:bg-blue-600 hover:text-white rounded-xl border border-blue-500/20 font-black text-[10px] uppercase tracking-widest transition-all",children:"Edit"}):h.jsx("button",{disabled:!0,className:"flex-1 py-2.5 bg-gray-800 text-gray-600 rounded-xl border border-white/5 font-black text-[10px] uppercase tracking-widest cursor-not-allowed",children:"Locked"})),h.jsx("button",{onClick:()=>s(M),className:"w-10 h-10 flex items-center justify-center bg-gray-800 text-gray-400 hover:text-white rounded-xl border border-white/10 transition-all",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"checkbox",checked:q,onChange:()=>m(M["Order ID"],q),className:`w-10 h-10 rounded-xl appearance-none border transition-all cursor-pointer ${q?"bg-emerald-500 border-emerald-400":"bg-gray-800 border-gray-600"}`}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:E?h.jsx(Pr,{size:"sm"}):q?h.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):h.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase",children:"OK"})})]})]})]})]},M["Order ID"])})})]})},sx=({orders:t,onEdit:e,showActions:n,visibleColumns:r,selectedIds:i=new Set,onToggleSelect:o,onToggleSelectAll:s})=>{const{refreshData:a}=ve.useContext(mo),[l,c]=ve.useState(null),[p,m]=ve.useState(null),[y,v]=ve.useState(new Set),[S,_]=ve.useState(t);ve.useEffect(()=>{_(t)},[t]);const w=Wy(t),N=async(q,E)=>{const L=!E;_(B=>B.map(z=>z["Order ID"]===q?{...z,IsVerified:L}:z)),v(B=>new Set(B).add(q));try{if(!(await fetch(`${ni}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"AllOrders",primaryKey:{"Order ID":q},newData:{IsVerified:L}})})).ok)throw new Error("Failed to save");a()}catch(B){console.error("Verification toggle failed:",B),_(z=>z.map(ne=>ne["Order ID"]===q?{...ne,IsVerified:E}:ne)),alert("ážšáž€áŸ’ážŸáž¶áž‘áž»áž€ážŸáŸ’ážáž¶áž“áž—áž¶áž–áž˜áž·áž“áž”áž¶áž“ážŸáž˜áŸ’ážšáŸáž…!")}finally{v(B=>{const z=new Set(B);return z.delete(q),z})}},A=q=>{let E=(q||"").replace(/[^0-9]/g,"");return E.length>0&&(E="0"+E.replace(/^0+/,"")),E},I=q=>{navigator.clipboard.writeText(q),c(q),setTimeout(()=>c(null),2e3)},D=q=>{const E=q.Products.map(ne=>{const H=parseFloat(String(ne.finalPrice||0)),F=Number.isInteger(H)?H:H.toFixed(2),G=ne.colorInfo?`-${ne.colorInfo}`:"";return`ðŸ›ï¸ ${ne.name}(${F}$)${G} - x${ne.quantity} ($${(ne.total||0).toFixed(2)})`}).join(`
`),L=q["Payment Status"]==="Paid"?"ðŸŸ© Paid":"ðŸŸ¥ COD (Unpaid)";let B="";try{const ne=new Date(q.Timestamp);isNaN(ne.getTime())?B=String(q.Timestamp||"").split(" ")[0]:B=`${String(ne.getDate()).padStart(2,"0")}/${String(ne.getMonth()+1).padStart(2,"0")}/${ne.getFullYear()}`}catch{B=String(q.Timestamp||"")}const z=q["Address Details"]||"(áž˜áž·áž“áž”áž¶áž“áž”áž‰áŸ’áž‡áž¶áž€áŸ‹)";return`âœ…ážŸáž¼áž˜áž”áž„áž–áž·áž“áž·ážáŸ’áž™áž›áŸážáž‘áž¼ážšážŸáŸáž–áŸ’áž‘ áž“áž·áž„áž‘áž¸ážáž¶áŸ†áž„áž˜áŸ’ážŠáž„áž‘áŸ€ážáž”áž„ ðŸ™
ðŸ“ƒ Page: ${q.Page}
ðŸ‘¤ áž¢ážáž·ážáž·áž‡áž“: ${q["Customer Name"]}
ðŸ“ž áž›áŸážáž‘áž¼ážšážŸáŸáž–áŸ’áž‘: ${q["Customer Phone"]}
ðŸ“ áž‘áž¸ážáž¶áŸ†áž„: ${q.Location}
ðŸ  áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“: ${z}

 ----------- áž•áž›áž·ážáž•áž› -----------
${E}
--------------------------------------

ðŸ’° ážŸážšáž»áž”:
  - ážáž˜áŸ’áž›áŸƒáž‘áŸ†áž“áž·áž‰: $${(q.Subtotal||0).toFixed(2)}
  - ážŸáŸážœáž¶ážŠáž¹áž€: $${(q["Shipping Fee (Customer)"]||0).toFixed(2)}
  - ážŸážšáž»áž”áž…áž»áž„áž€áŸ’ážšáŸ„áž™: $${(q["Grand Total"]||0).toFixed(2)}
 ${L}

ðŸšš ážœáž·áž’áž¸ážŸáž¶ážŸáŸ’ážšáŸ’ážážŠáž¹áž€áž‡áž‰áŸ’áž‡áž¼áž“: ${q["Internal Shipping Method"]}
${B}
--------------------------------------
áž¢ážšáž‚áž»ážŽáž”áž„ðŸ™ðŸ¥° | ID: ${q["Order ID"]}`},M=q=>{const E=D(q);navigator.clipboard.writeText(E),m(q["Order ID"]),setTimeout(()=>m(null),2e3)},T=q=>{if(!q)return;const E=A(q["Customer Phone"]),L=new URLSearchParams({id:q["Order ID"],name:q["Customer Name"]||"",phone:E,location:q.Location||"",address:q["Address Details"]||"",total:(q["Grand Total"]||0).toString(),payment:q["Payment Status"]||"Unpaid",shipping:q["Internal Shipping Method"]||"N/A",page:q.Page||"",user:q.User||""}),z=(q.Note||"").match(/https?:\/\/(www\.)?(google\.com\/maps|maps\.app\.goo\.gl)\/[^\s]+/);z&&L.set("map",z[0]),window.open(`${Jh}?${L.toString()}`,"_blank")},[k,R]=ve.useState("desktop");ve.useEffect(()=>{const q=()=>{const E=window.innerWidth;E<768?R("mobile"):E<1280?R("tablet"):R("desktop")};return q(),window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[]);const $={orders:S,totals:w,visibleColumns:r,selectedIds:i,onToggleSelect:o,onEdit:e,handlePrint:T,handleCopy:I,handleCopyTemplate:M,copiedId:l,copiedTemplateId:p,toggleOrderVerified:N,updatingIds:y};return h.jsxs("div",{className:"w-full flex flex-col",children:[h.jsxs("div",{className:"flex-grow space-y-4",children:[k==="desktop"&&h.jsx(Jy,{...$,onToggleSelectAll:s}),k==="tablet"&&h.jsx(Ky,{...$}),k==="mobile"&&h.jsx(Yy,{...$})]}),h.jsx("div",{className:"h-64 md:h-[400px] w-full pointer-events-none opacity-0 shrink-0","aria-hidden":"true"})]})};export{zy as B,Ly as D,We as E,xv as G,sx as O,ip as P,Qs as S,bt as _,ex as a,vv as b,tx as c,nx as d,rx as e,ix as f,Cy as g,Py as h,ox as i,Dy as j,Ey as k,Pl as l};
