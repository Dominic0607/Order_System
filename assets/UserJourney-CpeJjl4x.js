import{j as e,c as X,r,M as je,S as xe,A as ge,W as Ne,u as De}from"./index-D7nLlKST.js";import{e as Re,b as Ie,d as Fe,c as ze,S as ve,a as _e,E as Be,O as Ae}from"./OrdersList-a85QFFaX.js";import"./imageCompressor-D5vYYzIg.js";const Ee=({pages:l,selectedPageName:o,onSelect:m})=>e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"flex overflow-x-auto gap-3.5 pb-6 pt-2 px-1 snap-x no-scrollbar",children:[l.map(n=>{const c=o===n.PageName;return e.jsxs("button",{type:"button",onClick:()=>m(n),className:`
                                relative flex-shrink-0 w-[115px] h-[135px] snap-center rounded-[2rem] 
                                border-2 transition-all duration-700 outline-none group
                                ${c?"bg-blue-600/20 border-blue-500 shadow-[0_15px_30px_rgba(59,130,246,0.3)] scale-105":"bg-gray-800/30 backdrop-blur-xl border-white/5 hover:border-blue-500/30"}
                            `,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-3 gap-2",children:[e.jsxs("div",{className:"relative",children:[c&&e.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full blur-lg opacity-50 animate-pulse"}),e.jsx("div",{className:`
                                        relative w-12 h-12 rounded-full overflow-hidden border-2 transition-all duration-700
                                        ${c?"border-white scale-110 shadow-2xl rotate-[360deg]":"border-gray-700 opacity-50 group-hover:opacity-100"}
                                    `,children:e.jsx("img",{src:X(n.PageLogoURL),className:"w-full h-full object-cover",alt:n.PageName})}),c&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center border-2 border-gray-900 shadow-lg animate-bounce-slow",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:4,children:e.jsx("path",{d:"M5 13l4 4L19 7"})})})]}),e.jsxs("div",{className:"text-center w-full px-1",children:[e.jsx("span",{className:`
                                        text-[10px] font-black uppercase tracking-tighter leading-tight block truncate transition-colors duration-500
                                        ${c?"text-white":"text-gray-500 group-hover:text-gray-300"}
                                    `,children:n.PageName}),n.TelegramValue&&c&&e.jsxs("span",{className:"text-[7px] font-bold text-blue-400/80 block mt-0.5 animate-fade-in truncate",children:["@",n.TelegramValue]})]})]}),e.jsx("div",{className:`
                                absolute bottom-3 left-1/2 -translate-x-1/2 h-1 rounded-full transition-all duration-700
                                ${c?"w-6 bg-blue-400 shadow-[0_0_8px_#60a5fa]":"w-0 bg-transparent"}
                            `})]},n.PageName)}),l.length===0&&e.jsxs("div",{className:"w-full py-10 flex flex-col items-center justify-center bg-gray-900/20 rounded-[2.5rem] border-2 border-dashed border-gray-800",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{className:"text-[9px] font-black text-gray-600 uppercase tracking-widest italic",children:"រកមិនឃើញ Page"})]})]}),e.jsx("style",{children:`
                .no-scrollbar::-webkit-scrollbar {
                    display: none;
                }
                .no-scrollbar {
                    -ms-overflow-style: none;
                    scrollbar-width: none;
                }
                @keyframes bounce-slow {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-3px); }
                }
                .animate-bounce-slow {
                    animation: bounce-slow 2s infinite ease-in-out;
                }
            `})]}),Oe=({pages:l,selectedPageName:o,onSelect:m,placeholder:n="ជ្រើសរើស Page..."})=>{const[c,v]=r.useState(!1),[R,x]=r.useState(""),L=r.useRef(null);r.useEffect(()=>{const N=l.find(j=>j.PageName===o);N&&x(N.PageName)},[o,l]),r.useEffect(()=>{const N=j=>{if(L.current&&!L.current.contains(j.target)){v(!1);const t=l.find($=>$.PageName===o);x(t?t.PageName:"")}};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[o,l]);const T=r.useMemo(()=>{if(!R.trim())return l;const N=R.toLowerCase();return l.filter(j=>j.PageName.toLowerCase().includes(N))},[l,R]),P=l.find(N=>N.PageName===o);return e.jsxs("div",{className:"relative w-full",ref:L,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",className:"form-input !pl-14 !pr-10 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:n,value:R,onChange:N=>{x(N.target.value),v(!0)},onFocus:()=>v(!0)}),e.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 overflow-hidden border border-white/5 flex items-center justify-center",children:P?e.jsx("img",{src:X(P.PageLogoURL),className:"w-full h-full object-cover",alt:""}):e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 1.91-1.61 3.46-1.61s3.03.72 3.46 1.61C12.79 19.11 11.41 19.5 10 19.5s-2.79-.39-3.93-1.22zM15.6 17.03c-.78-1.13-2.56-1.86-4.6-1.86s-3.82.73-4.6 1.86c-.52-.51-.95-1.09-1.27-1.74.88-1.19 2.72-2.12 4.87-2.12s3.99.93 4.87 2.12c-.32.65-.75 1.23-1.27 1.74zM10 12.3c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})})})}),e.jsx("div",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-gray-600 group-focus-within:text-blue-500 transition-colors",children:e.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 9l-7 7-7-7",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),c&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_60px_rgba(0,0,0,0.6)] overflow-hidden animate-fade-in-down",children:e.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar p-2.5 space-y-1.5",children:T.length>0?T.map(N=>e.jsxs("button",{type:"button",onClick:()=>{m(N),x(N.PageName),v(!1)},className:`w-full flex items-center gap-3.5 p-3 rounded-2xl transition-all ${o===N.PageName?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-300 hover:bg-white/5"}`,children:[e.jsx("img",{src:X(N.PageLogoURL),className:"w-11 h-11 rounded-full object-cover border-2 border-white/10 shadow-sm flex-shrink-0",alt:""}),e.jsxs("div",{className:"text-left min-w-0",children:[e.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:N.PageName}),e.jsx("p",{className:`text-[10px] uppercase tracking-widest font-black mt-1 ${o===N.PageName?"text-blue-100":"text-gray-500"}`,children:N.Team})]})]},N.PageName)):e.jsx("div",{className:"p-6 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"រកមិនឃើញ Page ទេ"})})})]})},We=({isOpen:l,onClose:o,url:m})=>{const[n,c]=r.useState(!0);return r.useEffect(()=>{l&&c(!0)},[l,m]),l?e.jsxs(je,{isOpen:l,onClose:o,maxWidth:"max-w-4xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-2 text-white",children:"ស្វែងរកទីតាំង"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:'បន្ទាប់ពីរកឃើញទីតាំងត្រឹមត្រូវ សូមចម្លង (Copy) អាសយដ្ឋាន ឬ Link រួចបិទផ្ទាំងនេះ ហើយបិទភ្ជាប់ (Paste) ចូលទៅក្នុងប្រអប់ "ទីតាំងលម្អិត" វិញ។'}),e.jsxs("div",{className:"relative w-full h-[70vh] bg-gray-900 rounded-lg overflow-hidden border border-gray-700",children:[n&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[e.jsx(xe,{size:"lg"}),e.jsx("span",{className:"ml-3 text-gray-300",children:"កំពុងដំណើរការផែនទី..."})]}),e.jsx("iframe",{src:m,width:"100%",height:"100%",style:{border:0},allowFullScreen:!1,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",onLoad:()=>c(!1),className:n?"opacity-0":"opacity-100 transition-opacity duration-500"})]})]}):null},ie=()=>{if(typeof window>"u"||typeof navigator>"u")return!1;const l=navigator.userAgent||navigator.vendor||window.opera;return!!(/iPad|iPhone|iPod/.test(l)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)};let ue=null,me=null;const Ue=l=>{if(!l||l.videoWidth===0)return null;const o=80,m=80;if(ue||(ue=document.createElement("canvas"),ue.width=o,ue.height=m,me=ue.getContext("2d",{willReadFrequently:!0})),!me)return null;me.drawImage(l,0,0,o,m);const c=me.getImageData(0,0,o,m).data,v=new Float32Array(m).fill(0),R=new Float32Array(o).fill(0);let x=0;for(let W=1;W<m-1;W++)for(let _=1;_<o-1;_++){const B=(W*o+_)*4,I=(c[B]+c[B+1]+c[B+2])/3,k=(c[B-4]+c[B-3]+c[B-2])/3,A=(c[B-o*4]+c[B-o*4+1]+c[B-o*4+2])/3,H=Math.abs(I-k),E=Math.abs(I-A);let M=H+E>30?H+E:0;v[W]+=M,R[_]+=M,x+=M}if(x<15e3)return null;const L=(W,_)=>{const B=new Float32Array(_);for(let M=2;M<_-2;M++)B[M]=(W[M-2]+W[M-1]+W[M]+W[M+1]+W[M+2])/5;let I=0,k=_/2;for(let M=0;M<_;M++)B[M]>I&&(I=B[M],k=M);const A=I*.25;let H=k,E=k;for(;H>0&&B[H]>A;)H--;for(;E<_-1&&B[E]>A;)E++;return{min:Math.max(0,H-2),max:Math.min(_,E+2)}},T=L(R,o),P=L(v,m),N=(T.max-T.min)/o*100,j=(P.max-P.min)/m*100,t=(T.min+T.max)/2/o*100,$=(P.min+P.max)/2/m*100;return N>90||j>90||N<5||j<5?null:{x:t,y:$,width:N,height:j,score:Math.min(1,x/2e5)}},oe=(l,o,m)=>l+(o-l)*m,Ve=(l,o,m,n,c)=>{const[v,R]=r.useState(null),[x,L]=r.useState(!1),T=r.useRef(0),P=r.useRef(0),N=r.useRef(0),j=r.useRef(null),t=r.useRef(0),$=r.useRef(!1),W=r.useRef(!1),_=r.useRef(null);r.useEffect(()=>{if("BarcodeDetector"in window&&!ie())try{console.log("Initializing Native BarcodeDetector..."),_.current=new window.BarcodeDetector({formats:["qr_code","ean_13","code_128","code_39"]})}catch(k){console.warn("Native BarcodeDetector failed to init:",k)}},[]);const B=()=>{t.current=Date.now()+3e3,L(!1)},I=r.useCallback(async()=>{if(ie())return;if(!l||l.paused||l.ended){T.current=requestAnimationFrame(I);return}let k=null;if(_.current)if(W.current)j.current;else{W.current=!0;try{const A=await _.current.detect(l);if(A.length>0){const E=A.sort((g,f)=>f.boundingBox.width*f.boundingBox.height-g.boundingBox.width*g.boundingBox.height)[0].boundingBox,M=l.videoWidth,a=l.videoHeight;M>0&&a>0&&(k={x:(E.x+E.width/2)/M*100,y:(E.y+E.height/2)/a*100,width:E.width/M*100,height:E.height/a*100})}}catch{}finally{W.current=!1}}else k=Ue(l);if(k){if(N.current=0,j.current?j.current={x:oe(j.current.x,k.x,.4),y:oe(j.current.y,k.y,.4),width:oe(j.current.width,k.width,.4),height:oe(j.current.height,k.height,.4)}:j.current=k,R(A=>A?{x:oe(A.x,j.current.x,.25),y:oe(A.y,j.current.y,.25),width:oe(A.width,j.current.width,.2),height:oe(A.height,j.current.height,.2)}:j.current),Date.now()>t.current){const A=k.x>30&&k.x<70&&k.y>30&&k.y<70,H=60,E=k.width<H;if(A&&E?P.current++:P.current=Math.max(0,P.current-1),P.current>3){let M=5;try{const f=o!=null&&o.getCapabilities?o.getCapabilities():{};f.zoom&&f.zoom.max&&(M=f.zoom.max)}catch{}const a=Math.min(M,8),g=H-k.width;if(Math.abs(g)>2&&m<a&&!$.current){L(!0);let y=g*.01*m;y=Math.max(-.2,Math.min(y,.2));const i=Math.min(Math.max(m+y,1),a);Math.abs(i-m)>.02&&($.current=!0,n(i),c(i).catch(D=>{}).finally(()=>{$.current=!1}))}}}}else N.current++,N.current>10&&(R(null),j.current=null,L(!1),P.current=0);T.current=requestAnimationFrame(I)},[l,m,n,c,o]);return r.useEffect(()=>(ie()||(T.current=requestAnimationFrame(I)),()=>{T.current&&cancelAnimationFrame(T.current)}),[I]),{trackingBox:v,isAutoZooming:x,notifyManualZoom:B}},qe=(l,o,m)=>{const n=r.useRef(null),[c,v]=r.useState(!0),[R,x]=r.useState(null),[L,T]=r.useState(1),[P,N]=r.useState(null),[j,t]=r.useState(!1),[$,W]=r.useState(!1),[_,B]=r.useState("environment"),I=r.useRef(null),k=r.useRef(null),A=r.useRef(new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3")),H=r.useCallback(()=>{B(w=>w==="environment"?"user":"environment")},[]),E=()=>{var O,V,Z;if(k.current&&k.current.readyState==="live")return k.current;if((O=n.current)!=null&&O.html5QrCode){const ee=(Z=(V=n.current.html5QrCode).getRunningTrackCamera)==null?void 0:Z.call(V);if(ee)return ee}const w=document.querySelector(`#${l} video`);if(w&&w.srcObject){const te=w.srcObject.getVideoTracks()[0];if(te)return te}return null},M=r.useCallback(async w=>{const O=E();if(!O)return;const V=ie();try{await O.applyConstraints(w)}catch{if(w.zoom&&V)try{await O.applyConstraints({advanced:[{zoom:w.zoom}]})}catch{}}},[]),a=r.useCallback(async w=>{if(!E())return;let V=w;P&&(V=Math.max(P.min,Math.min(w,P.max))),T(V),await M({zoom:V})},[P,M]),{trackingBox:g,isAutoZooming:f,notifyManualZoom:y}=Ve(I.current,k.current,L,T,w=>M({zoom:w})),i=r.useCallback(w=>{y(),a(w)},[y,a]),D=r.useCallback(async()=>{const w=E();if(!w||ie())return;const O=!j;try{await w.applyConstraints({advanced:[{torch:O}]}),t(O)}catch{try{await w.applyConstraints({torch:O}),t(O)}catch{}}},[j]),F=r.useCallback(async()=>{const w=E();if(w){try{await M({focusMode:"continuous"})}catch{}try{const O=w.getCapabilities?w.getCapabilities():{};O.focusMode&&O.focusMode.includes("single-shot")&&await M({focusMode:"single-shot"})}catch{}}},[M]),C=r.useCallback(async w=>{if(!n.current)throw new Error("Scanner not initialized");return await n.current.scanFile(w,!0)},[]);return r.useEffect(()=>{if(!window.Html5Qrcode){x("Scanner library missing.");return}return(async()=>{v(!0),t(!1),T(1);const O=new window.Html5Qrcode(l);n.current=O;const V=ie(),ee={fps:30,qrbox:{width:280,height:280},...V?{}:{aspectRatio:1.777777778},disableFlip:!1,experimentalFeatures:{useBarCodeDetectorIfSupported:!V},videoConstraints:V?{facingMode:"environment",width:{min:1280,ideal:1920},height:{min:720,ideal:1080}}:{facingMode:_,width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080},frameRate:{ideal:60,min:30},aspectRatio:1.777777778,focusMode:"continuous"}};let te=0;const de=G=>{const K=Date.now();K-te<1500||(te=K,A.current.currentTime=0,A.current.play().catch(()=>{}),navigator.vibrate&&navigator.vibrate(50),o(G))};try{await O.start({facingMode:_},ee,de,void 0);const G=document.querySelector(`#${l} video`);G&&(I.current=G,G.setAttribute("playsinline","true"),G.style.objectFit="cover");const K=E();if(K){k.current=K;const z=K.getCapabilities?K.getCapabilities():{},U=K.getSettings();if(!V&&"torch"in z?W(!0):W(!1),V){const J=U.zoom?Math.min(U.zoom,1):1;N({min:J>=1?1:.5,max:5,step:.1}),T(U.zoom||1)}else z.zoom?(N({min:z.zoom.min,max:z.zoom.max,step:z.zoom.step}),T(U.zoom||z.zoom.min)):N(null)}v(!1)}catch(G){console.error("Camera Start Error:",G),x(G.name==="NotAllowedError"?"Camera permission denied.":"Camera error."),v(!1)}})(),()=>{n.current&&n.current.isScanning&&n.current.stop().then(()=>n.current.clear()).catch(console.error)}},[_]),{isInitializing:c,error:R,zoom:L,zoomCapabilities:P,handleZoomChange:i,isTorchOn:j,isTorchSupported:$,toggleTorch:D,trackingBox:g,isAutoZooming:f,triggerFocus:F,switchCamera:H,facingMode:_,scanFromImage:C}},He=({isScanning:l,error:o,scanSuccessFlash:m,zoom:n,useSimulatedZoom:c,trackingBox:v,focusPoint:R})=>e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
              .hud-grid {
                background-size: 40px 40px;
                background-image: linear-gradient(to right, rgba(59, 130, 246, 0.1) 1px, transparent 1px), linear-gradient(to bottom, rgba(59, 130, 246, 0.1) 1px, transparent 1px);
              }
              .scanner-laser {
                position: absolute; left: 0; width: 100%; height: 2px; background: #3b82f6; box-shadow: 0 0 15px #3b82f6; animation: laser-scan 2s ease-in-out infinite;
              }
              @keyframes laser-scan { 0% { top: 0%; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
              
              /* Enhanced Success Animation */
              .scan-flash-overlay { animation: flash-screen 0.4s ease-out forwards; }
              @keyframes flash-screen { 
                  0% { background-color: rgba(16, 185, 129, 0); } 
                  20% { background-color: rgba(16, 185, 129, 0.4); } 
                  100% { background-color: rgba(16, 185, 129, 0); } 
              }
              
              .tracking-box {
                  position: absolute;
                  border: 2px solid #10b981;
                  background-color: rgba(16, 185, 129, 0.1);
                  box-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
                  border-radius: 8px;
                  transition: all 0.1s linear; /* Smooth movement */
                  pointer-events: none;
                  z-index: 10;
                  transform: translate(-50%, -50%); /* Center based on x, y */
              }

              /* Focus Reticle Animation */
              @keyframes focus-ping {
                  0% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; border-color: white; }
                  20% { opacity: 1; }
                  100% { transform: translate(-50%, -50%) scale(1); opacity: 0; border-color: #f59e0b; }
              }
              .focus-reticle {
                  position: absolute;
                  width: 60px;
                  height: 60px;
                  border: 2px solid white;
                  border-radius: 50%;
                  pointer-events: none;
                  animation: focus-ping 0.6s ease-out forwards;
                  z-index: 20;
                  box-shadow: 0 0 10px rgba(255,255,255,0.5);
              }
            `}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[!l&&!o&&e.jsx("div",{className:"absolute inset-0 hud-grid opacity-30"}),m&&e.jsx("div",{className:"absolute inset-0 z-50 scan-flash-overlay"}),R&&e.jsx("div",{className:"focus-reticle",style:{left:R.x,top:R.y}}),v&&e.jsx("div",{className:"tracking-box",style:{left:`${v.x}%`,top:`${v.y}%`,width:`${v.width}%`,height:`${v.height}%`},children:e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-emerald-500 text-white text-[9px] font-black px-2 py-0.5 rounded uppercase tracking-wider shadow-lg whitespace-nowrap animate-pulse",children:"AI TRACKING"})}),!l&&!o&&!v&&e.jsxs("div",{className:`
                        absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 
                        w-[260px] h-[260px] border-2 transition-all duration-300
                        ${m?"border-emerald-500 scale-110 shadow-[0_0_50px_rgba(16,185,129,0.8)]":"border-white/30"}
                        rounded-[2rem]
                    `,children:[e.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-blue-500 rounded-tl-2xl -translate-x-1 -translate-y-1"}),e.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-blue-500 rounded-tr-2xl translate-x-1 -translate-y-1"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-blue-500 rounded-bl-2xl -translate-x-1 translate-y-1"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-blue-500 rounded-br-2xl translate-x-1 translate-y-1"}),e.jsx("div",{className:"scanner-laser"})]}),e.jsxs("div",{className:"absolute top-[18%] right-4 flex flex-col gap-2 items-end",children:[e.jsxs("div",{className:"text-[9px] font-mono text-blue-400 bg-black/60 px-2 py-1 rounded border border-blue-500/20 flex items-center gap-2 backdrop-blur-md",children:[e.jsxs("span",{children:[n.toFixed(1),"x"]}),c&&e.jsx("span",{className:"bg-white/10 px-1 rounded text-[8px] text-white",children:"DIGITAL"})]}),v&&e.jsx("div",{className:"text-[9px] font-mono text-emerald-400 bg-black/60 px-2 py-1 rounded border border-emerald-500/20 flex items-center gap-2 backdrop-blur-md animate-pulse",children:e.jsx("span",{children:"SMART-ZOOM"})})]})]})]}),Ye=({history:l,isOpen:o,setIsOpen:m,onClear:n})=>{const c=r.useRef(null),v=x=>{c.current=x.touches[0].clientY},R=x=>{c.current!==null&&x.touches[0].clientY-c.current>50&&(m(!1),c.current=null)};return e.jsxs("div",{className:`
                absolute bottom-0 left-0 right-0 bg-[#0f172a] rounded-t-[2.5rem] border-t border-white/10 shadow-[0_-20px_60px_rgba(0,0,0,0.9)] z-50 transition-all duration-300 ease-out flex flex-col
                ${o?"h-[80vh]":"h-0 overflow-hidden"}
            `,onTouchStart:v,onTouchMove:R,onTouchEnd:()=>{c.current=null},children:[e.jsx("div",{className:"w-full flex justify-center py-5 cursor-pointer active:bg-white/5 transition-colors rounded-t-[2.5rem]",onClick:()=>m(!o),children:e.jsx("div",{className:"w-16 h-1.5 bg-gray-600 rounded-full"})}),e.jsxs("div",{className:"flex-grow flex flex-col overflow-hidden px-5 pb-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-blue-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-black text-white uppercase tracking-tight",children:"Scanned History"}),e.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:[l.length," items logged"]})]})]}),e.jsx("button",{onClick:n,className:"text-[10px] text-red-400 font-black uppercase tracking-widest bg-red-500/10 px-4 py-2 rounded-xl border border-red-500/20 active:scale-95 transition-all hover:bg-red-500 hover:text-white",children:"Clear All"})]}),e.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar space-y-3 pb-safe-bottom",children:l.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 opacity-40",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("p",{className:"text-xs font-black uppercase text-gray-500 tracking-widest",children:"No items scanned yet"})]}):l.map((x,L)=>{var T;return e.jsxs("div",{className:"flex items-center gap-4 bg-gray-800/40 p-3 rounded-2xl border border-white/5 shadow-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-black rounded-xl overflow-hidden border border-white/10 flex-shrink-0 shadow-inner",children:x.product?e.jsx("img",{src:X(x.product.ImageURL),className:"w-full h-full object-cover",alt:""}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 font-black text-xs",children:"?"})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx("h4",{className:"text-white font-bold text-sm truncate leading-tight",children:((T=x.product)==null?void 0:T.ProductName)||"Unknown Product"}),e.jsx("p",{className:"text-[10px] text-gray-500 font-mono mt-1 font-bold tracking-wider",children:x.code})]}),e.jsxs("div",{className:"text-right flex flex-col items-end",children:[e.jsxs("span",{className:"bg-blue-600/20 text-blue-400 text-xs font-black px-2 py-0.5 rounded-lg border border-blue-500/20 mb-1",children:["x",x.count]}),e.jsx("span",{className:"text-[9px] text-gray-600 font-bold",children:new Date(x.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},L)})})]})]})},Ge=({onClose:l,onSwitchCamera:o,onToggleTorch:m,isTorchOn:n,isTorchSupported:c,isAutoZooming:v})=>{const R=!ie()&&c;return e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent pointer-events-none",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[e.jsxs("div",{className:"pointer-events-auto bg-black/40 backdrop-blur-md px-3 py-1.5 rounded-full border border-blue-500/30 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-white font-black text-xs uppercase tracking-widest",children:"LIVE"}),v&&e.jsx("span",{className:"text-[9px] text-blue-400 font-bold ml-1 animate-pulse",children:"AUTO-ZOOM"})]}),e.jsxs("div",{className:"flex gap-3 pointer-events-auto",children:[e.jsx("button",{onClick:o,className:"w-10 h-10 bg-gray-800/60 backdrop-blur-md rounded-full text-white border border-white/10 flex items-center justify-center active:scale-90 transition-all hover:bg-gray-700/60",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),R&&e.jsx("button",{onClick:m,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all backdrop-blur-md border ${n?"bg-yellow-500 text-black border-yellow-400 shadow-[0_0_15px_rgba(234,179,8,0.5)]":"bg-gray-800/60 text-gray-300 border-white/10"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("button",{onClick:l,className:"w-10 h-10 bg-gray-800/60 backdrop-blur-md rounded-full text-white border border-white/10 flex items-center justify-center active:scale-90 transition-all hover:bg-red-500/80 hover:border-red-500/50",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})]})},Xe=({zoom:l,zoomCapabilities:o,handleZoomChange:m,scanMode:n,setScanMode:c,onOpenHistory:v,onUpload:R})=>{const x=r.useRef(null),L=o&&o.min<1,T=o&&o.max>=2,P=o&&o.max>=5,N=j=>{j.target.files&&j.target.files[0]&&(R(j.target.files[0]),j.target.value="")};return e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 z-40 bg-gradient-to-t from-black via-black/90 to-transparent flex flex-col gap-5 pointer-events-none",style:{paddingBottom:"max(1.5rem, env(safe-area-inset-bottom))"},children:[o&&e.jsxs("div",{className:"flex justify-center items-center gap-4 pointer-events-auto mb-1 animate-fade-in-up",children:[L&&e.jsx("button",{onClick:()=>m(.5),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(l-.5)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:".5"}),e.jsx("button",{onClick:()=>m(1),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(l-1)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"1x"}),T&&e.jsx("button",{onClick:()=>m(2),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(l-2)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"2"}),P&&e.jsx("button",{onClick:()=>m(5),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(l-5)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"5"})]}),o&&e.jsxs("div",{className:"flex items-center gap-3 px-2 pointer-events-auto",children:[e.jsxs("span",{className:"text-[9px] font-black text-gray-500 w-6 text-center",children:[o.min,"x"]}),e.jsx("input",{type:"range",min:o.min,max:o.max,step:o.step,value:l,onChange:j=>m(parseFloat(j.target.value)),className:"flex-1 h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500"}),e.jsxs("span",{className:"text-[9px] font-black text-gray-500 w-6 text-center",children:[o.max,"x"]})]}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pointer-events-auto px-2",children:[e.jsx("input",{type:"file",accept:"image/*",ref:x,className:"hidden",onChange:N}),e.jsx("button",{onClick:()=>{var j;return(j=x.current)==null?void 0:j.click()},className:"w-12 h-12 rounded-2xl bg-gray-800 border border-white/10 flex items-center justify-center text-gray-400 active:scale-90 transition-all shadow-lg hover:text-white",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex bg-gray-800 p-1.5 rounded-2xl border border-white/10 shadow-lg flex-grow max-w-[200px]",children:[e.jsx("button",{onClick:()=>c("single"),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all duration-300 ${n==="single"?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,children:"Single"}),e.jsx("button",{onClick:()=>c("increment"),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all duration-300 ${n==="increment"?"bg-emerald-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,children:"Multi"})]}),e.jsx("div",{className:"w-12"})]}),e.jsx("div",{className:"w-full flex justify-center pb-2 cursor-pointer opacity-70 hover:opacity-100 transition-opacity pointer-events-auto",onClick:v,children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-10 h-1 bg-gray-600 rounded-full"}),e.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase tracking-widest",children:"Swipe for History"})]})})]})},Je=({onClose:l,onCodeScanned:o,scanMode:m,setScanMode:n,productsInOrder:c,masterProducts:v})=>{var K;const[R,x]=r.useState([]),[L,T]=r.useState(!1),[P,N]=r.useState(null),[j,t]=r.useState(!1),[$,W]=r.useState(null),_=r.useRef(null),B=r.useRef(null),I=r.useRef(null),k=r.useRef(0),A=r.useRef(1),H=r.useRef(0);r.useEffect(()=>(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[]);const E=r.useCallback(z=>{t(!0),setTimeout(()=>t(!1),400);const U=v.find(J=>J.Barcode&&J.Barcode.trim()===z.trim());if(x(J=>{const Q=J.findIndex(se=>se.code===z),re=Date.now();if(Q>-1){const se=[...J];return se[Q]={...se[Q],count:se[Q].count+1,timestamp:re},[se.splice(Q,1)[0],...se]}return[{code:z,product:U,timestamp:re,count:1},...J]}),U){const J=c.find(Q=>Q.name===U.ProductName);m==="single"&&J?N({status:"warning",message:"មានក្នុងបញ្ជីរួចហើយ",product:U}):(o(z),N({status:"success",message:"បានបន្ថែមជោគជ័យ",product:U}))}else N({status:"error",message:`រកមិនឃើញ: ${z}`,product:void 0});setTimeout(()=>N(null),2e3)},[v,c,m,o]),{isInitializing:M,error:a,zoom:g,zoomCapabilities:f,handleZoomChange:y,isTorchOn:i,isTorchSupported:D,toggleTorch:F,trackingBox:C,isAutoZooming:w,triggerFocus:O,switchCamera:V,scanFromImage:Z}=qe("barcode-reader-container",E),ee=z=>{if(z.touches.length===2){const U=Math.hypot(z.touches[0].pageX-z.touches[1].pageX,z.touches[0].pageY-z.touches[1].pageY);_.current=U,A.current=g}else if(z.touches.length===1){B.current=z.touches[0].clientY,I.current=z.touches[0].clientX,k.current=Date.now();const U=Date.now();U-H.current<300&&f&&y(f.min||1),H.current=U}},te=z=>{if(z.touches.length===2&&_.current!==null&&f){const J=Math.hypot(z.touches[0].pageX-z.touches[1].pageX,z.touches[0].pageY-z.touches[1].pageY)/_.current,Q=f.max-f.min,re=(J-1)*Q*.8;y(A.current+re)}else if(z.touches.length===1&&B.current!==null){const U=z.touches[0].clientY-B.current;U<-50&&!L?(T(!0),B.current=null):U>50&&L&&(T(!1),B.current=null)}},de=z=>{if(I.current!==null&&B.current!==null){const U=z.changedTouches[0].clientX,J=z.changedTouches[0].clientY,Q=Math.abs(U-I.current),re=Math.abs(J-B.current);Date.now()-k.current<300&&Q<15&&re<15&&(W({x:U,y:J}),O(),setTimeout(()=>W(null),1e3))}_.current=null,B.current=null,I.current=null},G=async z=>{try{const U=await Z(z);E(U)}catch{N({status:"error",message:"រកមិនឃើញ Barcode ក្នុងរូបភាព",product:void 0}),setTimeout(()=>N(null),2e3)}};return e.jsxs("div",{className:"fixed inset-0 bg-black z-[100] flex flex-col animate-fade-in touch-none overflow-hidden h-screen",style:{height:"100dvh"},onTouchStart:ee,onTouchMove:te,onTouchEnd:de,children:[e.jsx("style",{children:`
              #barcode-reader-container { width: 100%; height: 100%; background: #000; overflow: hidden; }
              #barcode-reader-container video { object-fit: cover; width: 100%; height: 100%; }
              @keyframes pop-in { 0% { transform: translate(-50%, -40%) scale(0.8); opacity: 0; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; } }
              .animate-pop-in { animation: pop-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
            `}),e.jsx(Ge,{onClose:l,onSwitchCamera:V,onToggleTorch:F,isTorchOn:i,isTorchSupported:D,isAutoZooming:w}),e.jsxs("div",{className:"relative flex-grow w-full overflow-hidden bg-black",children:[e.jsx("div",{id:"barcode-reader-container"}),e.jsx(He,{isScanning:M,error:a,scanSuccessFlash:j,zoom:g,useSimulatedZoom:!1,trackingBox:C,focusPoint:$}),P&&e.jsx("div",{className:"absolute top-1/2 left-1/2 w-[85%] max-w-sm z-50 animate-pop-in transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",children:e.jsxs("div",{className:`
                            bg-gray-900/95 backdrop-blur-2xl border p-4 rounded-3xl shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex items-center gap-4
                            ${P.status==="success"?"border-emerald-500 shadow-emerald-900/30":P.status==="warning"?"border-yellow-500 shadow-yellow-900/30":"border-red-500 shadow-red-900/30"}
                        `,children:[P.product?e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-black border border-white/10 overflow-hidden flex-shrink-0",children:e.jsx("img",{src:X(P.product.ImageURL),className:"w-full h-full object-cover",alt:""})}):e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gray-800 flex items-center justify-center text-red-400",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:2})})}),e.jsxs("div",{className:"min-w-0 flex-grow",children:[e.jsx("p",{className:`text-[10px] font-black uppercase tracking-widest mb-0.5 ${P.status==="success"?"text-emerald-400":P.status==="warning"?"text-yellow-400":"text-red-400"}`,children:P.status==="success"?"SUCCESS":P.status==="warning"?"ALREADY ADDED":"ERROR"}),e.jsx("h3",{className:"text-white font-bold text-sm truncate",children:((K=P.product)==null?void 0:K.ProductName)||"Unknown Product"}),P.product&&e.jsxs("p",{className:"text-white font-mono font-black text-lg mt-0.5",children:["$",P.product.Price.toFixed(2)]})]})]})}),a&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 z-30 p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 text-red-500 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:2})})}),e.jsx("p",{className:"text-red-400 font-bold text-sm",children:a})]}),M&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black z-30",children:[e.jsx(xe,{size:"lg"}),e.jsx("p",{className:"text-blue-500 font-black text-[10px] uppercase tracking-widest mt-4 animate-pulse",children:"Initializing..."})]})]}),!L&&e.jsx(Xe,{zoom:g,zoomCapabilities:f,handleZoomChange:y,scanMode:m,setScanMode:n,onOpenHistory:()=>T(!0),onUpload:G}),e.jsx(Ye,{history:R,isOpen:L,setIsOpen:T,onClear:()=>x([])})]})},Ze=({schedule:l,time:o,onChange:m})=>{const n=()=>{m({schedule:!l,time:l?"":o})};return e.jsxs("div",{className:`relative overflow-hidden p-6 rounded-[2rem] border transition-all duration-500 ${l?"bg-cyan-500/10 border-cyan-500 shadow-[0_0_25px_rgba(6,182,212,0.15)]":"bg-gray-900/40 border-gray-700"}`,children:[e.jsx("style",{children:`
                /* ប្ដូរពណ៌ និងពង្រីកទំហំ Default Calendar Icon របស់ Browser */
                .cyan-calendar-picker::-webkit-calendar-picker-indicator {
                    cursor: pointer;
                    /* ប្ដូរពណ៌ទៅជា Cyan */
                    filter: invert(56%) sepia(86%) saturate(2256%) hue-rotate(150deg) brightness(98%) contrast(101%);
                    padding: 8px;
                    width: 24px;
                    height: 24px;
                    transform: scale(1.3); /* ពង្រីកឱ្យធំជាងមុន */
                    border-radius: 12px;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                }
                .cyan-calendar-picker::-webkit-calendar-picker-indicator:hover {
                    background: rgba(6, 182, 212, 0.15);
                    transform: scale(1.45);
                    filter: invert(60%) sepia(90%) saturate(2500%) hue-rotate(160deg) brightness(110%) contrast(110%);
                }
                .cyan-calendar-picker::-webkit-calendar-picker-indicator:active {
                    transform: scale(1.2);
                }
            `}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-500 ${l?"bg-cyan-500 text-white shadow-lg shadow-cyan-500/30":"bg-gray-800 text-gray-500"}`,children:e.jsx("svg",{className:"w-7 h-7",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-black uppercase tracking-widest transition-colors ${l?"text-cyan-400":"text-gray-400"}`,children:"កំណត់ពេល Telegram"}),e.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase opacity-60",children:"Auto-Send Schedule"})]})]}),e.jsx("button",{type:"button",onClick:n,className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none ${l?"bg-cyan-500":"bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform duration-300 ease-in-out ${l?"translate-x-6":"translate-x-1"}`})})]}),l&&e.jsxs("div",{className:"animate-fade-in-down pt-6 mt-4 border-t border-cyan-500/10",children:[e.jsx("div",{className:"relative group",children:e.jsx("input",{type:"datetime-local",value:o||"",onChange:c=>m({schedule:l,time:c.target.value}),onClick:c=>{try{"showPicker"in HTMLInputElement.prototype&&c.currentTarget.showPicker()}catch{}},className:"cyan-calendar-picker form-input !py-4 !pl-5 !pr-14 bg-black/40 border-cyan-500/20 text-white font-mono font-bold rounded-2xl focus:border-cyan-500 focus:ring-4 focus:ring-cyan-500/10 transition-all text-sm w-full cursor-pointer",min:new Date().toISOString().slice(0,16)})}),e.jsx("p",{className:"text-[9px] text-cyan-400/60 font-black uppercase tracking-widest text-center mt-3",children:"សារនឹងត្រូវផ្ញើដោយស្វ័យប្រវត្តិតាមម៉ោងកំណត់"})]}),e.jsx("div",{className:`absolute -right-6 -bottom-6 w-24 h-24 bg-cyan-500 transition-opacity duration-700 rounded-full blur-[40px] pointer-events-none ${l?"opacity-10":"opacity-0"}`})]})},Ke=({drivers:l,selectedDriverName:o,onSelect:m})=>{const n=r.useRef(null),c=r.useRef(null);r.useEffect(()=>{n.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"),c.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2570/2570-preview.mp3"),n.current&&(n.current.volume=.2),c.current&&(c.current.volume=.4)},[]);const v=()=>{n.current&&(n.current.currentTime=0,n.current.play().catch(()=>{}))},R=x=>{o!==x&&(c.current&&(c.current.currentTime=0,c.current.play().catch(()=>{})),m(x))};return e.jsxs("div",{className:"w-full py-4",children:[e.jsx("style",{children:`
                /* CSS Variable for Rotation */
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }

                /* Flux Animation Keyframes */
                @keyframes spin-flux {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }

                /* Base Card Style */
                .flux-card {
                    position: relative;
                    background: #0f172a; /* Slate 900 */
                    border-radius: 1rem;
                    z-index: 1;
                }

                /* Electric Flux Effect (Active State) */
                .flux-card.selected::after, .flux-card.selected::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    /* Electric Gradient Colors: Cyan -> Blue -> Purple -> Cyan */
                    background: conic-gradient(from var(--angle), transparent 70%, #22d3ee, #3b82f6, #a855f7, #22d3ee);
                    border-radius: inherit;
                    animation: spin-flux 2.5s linear infinite;
                }

                /* Outer Glow (Blur) */
                .flux-card.selected::before {
                    filter: blur(12px);
                    opacity: 0.6;
                }

                /* Floating Text Animation */
                @keyframes float-text {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-3px); }
                }
                .animate-float-text {
                    animation: float-text 3s ease-in-out infinite;
                }
            `}),l.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-gray-800 rounded-2xl bg-gray-900/30",children:[e.jsx("div",{className:"w-10 h-10 border-2 border-gray-700 border-t-cyan-500 rounded-full animate-spin mb-3"}),e.jsx("p",{className:"text-gray-500 font-black uppercase tracking-[0.2em] text-[10px]",children:"NO DRIVERS DETECTED"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5 p-1",children:l.map(x=>e.jsx(Qe,{driver:x,isSelected:o===x.DriverName,onSelect:()=>R(x.DriverName),onHover:v},x.DriverName))})]})},Qe=({driver:l,isSelected:o,onSelect:m,onHover:n})=>e.jsxs("div",{onClick:m,onMouseEnter:n,className:`
                flux-card relative h-48 cursor-pointer transition-all duration-300 group overflow-visible
                flex flex-col items-center justify-end pb-3
                ${o?"selected scale-[1.03]":"border border-white/5 hover:border-blue-500/30 grayscale opacity-70 hover:opacity-100 hover:grayscale-0"}
            `,children:[e.jsxs("div",{className:"absolute inset-0 rounded-2xl overflow-hidden bg-gray-900",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(#3b82f6 1px, transparent 1px)",backgroundSize:"10px 10px"}}),o&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/2 bg-gradient-to-t from-blue-900/40 to-transparent"})]}),e.jsx("div",{className:`
                absolute inset-x-0 transition-all duration-500 z-10 flex justify-center
                ${o?"top-2 bottom-12":"top-3 bottom-10"}
            `,children:e.jsx("div",{className:`
                    relative w-full h-full max-w-[85%] rounded-xl overflow-hidden transition-all duration-500
                    ${o?"shadow-[0_0_20px_rgba(59,130,246,0.4)] ring-1 ring-blue-400/30":"shadow-none"}
                `,children:e.jsx("img",{src:X(l.ImageURL),className:"w-full h-full object-cover object-top",alt:l.DriverName})})}),e.jsxs("div",{className:"relative z-20 w-full px-2 text-center",children:[e.jsx("div",{className:`
                    transition-all duration-300 transform
                    ${o?"translate-y-0 animate-float-text":"translate-y-1"}
                `,children:e.jsx("h3",{className:`
                        text-[11px] font-black uppercase tracking-widest leading-tight
                        ${o?"text-white drop-shadow-[0_0_5px_rgba(34,211,238,0.8)]":"text-gray-400"}
                    `,children:l.DriverName})}),e.jsxs("div",{className:`
                    mt-2 flex items-center justify-center gap-1.5 transition-all duration-300
                    ${o?"opacity-100":"opacity-0 scale-0"}
                `,children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse shadow-[0_0_5px_#22d3ee]"}),e.jsx("span",{className:"text-[7px] font-bold text-cyan-300 uppercase tracking-[0.2em] border border-cyan-500/30 px-1.5 py-0.5 rounded bg-cyan-950/50",children:"ONLINE"})]})]})]}),pe={id:Date.now(),name:"",quantity:1,originalPrice:0,finalPrice:0,total:0,discountPercent:0,colorInfo:"",image:"",cost:0,discountType:"percent",discountAmountInput:"",discountPercentInput:"",finalPriceInput:"",applyDiscountToTotal:!1},he=[{number:1,title:"អតិថិជន"},{number:2,title:"ផលិតផល"},{number:3,title:"ដឹកជញ្ជូន"},{number:4,title:"ផ្ទៀងផ្ទាត់"}],et=({team:l,onSaveSuccess:o,onCancel:m})=>{const{appData:n,currentUser:c,apiKey:v,previewImage:R}=r.useContext(ge),[x,L]=r.useState(1),[T,P]=r.useState(!1),N=r.useRef(new Audio("https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"));r.useEffect(()=>{N.current.volume=.4},[]);const j=r.useMemo(()=>({page:"",telegramValue:"",fulfillmentStore:"",pageSelectMode:"cards",customer:{name:"",phone:"",province:"",district:"",sangkat:"",additionalLocation:"",shippingFee:""},products:[{...pe,id:Date.now()}],shipping:{method:"",details:"",cost:""},payment:{status:"Unpaid",info:""},telegram:{schedule:!1,time:""},subtotal:0,grandTotal:0,note:""}),[]),[t,$]=r.useState(j),[W,_]=r.useState(!1),[B,I]=r.useState(""),[k,A]=r.useState(null),[H,E]=r.useState(null),[M,a]=r.useState(""),[g,f]=r.useState(""),[y,i]=r.useState(""),[D,F]=r.useState(!1),[C,w]=r.useState("charge"),[O,V]=r.useState(!1),[Z,ee]=r.useState(""),[te,de]=r.useState("increment"),G=r.useMemo(()=>`createOrderDraft_${c==null?void 0:c.UserName}_${l}`,[c,l]);r.useEffect(()=>{window.innerWidth<768&&window.scrollTo({top:0,behavior:"smooth"})},[x]),r.useEffect(()=>{var d,b;try{const u=localStorage.getItem(G);if(u){const h=JSON.parse(u);if($(s=>({...s,...h})),h.customer&&typeof h.customer.shippingFee=="number"&&w(h.customer.shippingFee===0?"free":"charge"),h.customer.phone){const s=h.customer.phone,p=(d=n.phoneCarriers)==null?void 0:d.find(S=>(S.Prefixes||"").split(",").some(Y=>s.startsWith(Y.trim())));a(p?X(p.CarrierLogoURL):"")}if(h.shipping.method){const s=(b=n.shippingMethods)==null?void 0:b.find(p=>p.MethodName===h.shipping.method);E(s||null),f(s?X(s.LogosURL):"")}}}catch{localStorage.removeItem(G)}},[G,n.phoneCarriers,n.shippingMethods]),r.useEffect(()=>{const d=setTimeout(()=>{localStorage.setItem(G,JSON.stringify(t))},500);return()=>clearTimeout(d)},[t,G]);const K=()=>P(!0),z=()=>{localStorage.removeItem(G),P(!1),m()},U=r.useMemo(()=>n.pages?n.pages.filter(d=>d.Team===l):[],[n.pages,l]);r.useEffect(()=>{if(U.length===1&&!t.page){const d=U[0];$(b=>({...b,page:d.PageName,telegramValue:d.TelegramValue,fulfillmentStore:d.DefaultStore||t.fulfillmentStore}))}},[U,t.page]);const J=r.useMemo(()=>n.locations?[...new Set(n.locations.map(d=>d.Province))]:[],[n.locations]),Q=r.useMemo(()=>!n.locations||!t.customer.province?[]:[...new Set(n.locations.filter(d=>d.Province===t.customer.province).map(d=>d.District))].sort((d,b)=>String(d).localeCompare(String(b),"km")),[n.locations,t.customer.province]),re=r.useMemo(()=>!n.locations||!t.customer.province||!t.customer.district?[]:[...new Set(n.locations.filter(d=>d.Province===t.customer.province&&d.District===t.customer.district).map(d=>d.Sangkat).filter(Boolean))].sort((d,b)=>String(d).localeCompare(String(b),"km")),[n.locations,t.customer.province,t.customer.district]);r.useEffect(()=>{const d=t.products.reduce((u,h)=>u+(h.total||0),0),b=d+(Number(t.customer.shippingFee)||0);(d!==t.subtotal||b!==t.grandTotal)&&$(u=>({...u,subtotal:d,grandTotal:b}))},[t.products,t.customer.shippingFee]);const se=(d,b)=>{const u={...d},h=b.find(Y=>Y.ProductName===u.name);u.quantity=Math.max(1,Number(u.quantity)||1),u.originalPrice=Math.max(0,h&&Number(h.Price)||0),u.cost=Math.max(0,h&&Number(h.Cost)||0);const s=u.quantity*u.originalPrice;let p=s,S=0;switch(u.discountType){case"percent":const Y=Math.max(0,Number(u.discountPercentInput)||0);S=s*(Y/100),p=s-S;break;case"amount":const q=Math.max(0,Number(u.discountAmountInput)||0);S=u.quantity>1&&u.applyDiscountToTotal?q:q*u.quantity,p=s-S;break;case"custom":const le=Math.max(0,Number(u.finalPriceInput)||0);p=u.quantity*le,S=s-p,u.finalPrice=le;break}return u.total=Math.max(0,p),u.finalPrice=u.quantity>0?u.total/u.quantity:0,u.discountPercent=s>0?S/s*100:0,u.discountType!=="custom"&&(u.finalPriceInput=u.finalPrice.toFixed(2)),u},be=r.useCallback(d=>{const b=n.products.find(u=>u.Barcode&&u.Barcode.trim()===d.trim());b&&($(u=>{const h=u.products.findIndex(p=>p.name===b.ProductName);let s;if(h>-1){const p={...u.products[h]};te==="increment"&&(p.quantity+=1);const S=se(p,n.products);s=[...u.products],s[h]=S}else{const p=u.products.findIndex(q=>!q.name),S={...pe,id:Date.now(),name:b.ProductName,quantity:1,originalPrice:b.Price,cost:b.Cost,image:b.ImageURL,tags:b.Tags},Y=se(S,n.products);p>-1?(s=[...u.products],s[p]=Y):s=[...u.products,Y]}return{...u,products:s}}),te==="single"&&F(!1))},[n.products,te]),ae=d=>{const{name:b,value:u}=d.target;if(b==="phone"){let h=u.replace(/[^0-9]/g,"");h.length>1&&h.startsWith("00")?h="0"+h.substring(2):h.length>0&&!h.startsWith("0")&&(h="0"+h);let s=null;h.length>=2&&n.phoneCarriers&&(s=n.phoneCarriers.find(p=>(p.Prefixes||"").split(",").some(S=>h.startsWith(S.trim())))),a(s?X(s.CarrierLogoURL):""),$(p=>({...p,customer:{...p.customer,phone:h}}));return}if(b==="shippingFee"){const h=u===""?"":Math.max(0,parseFloat(u));$(s=>({...s,customer:{...s.customer,shippingFee:h}}));return}$(h=>{let s={...h.customer,[b]:u};return b==="province"?(s.district="",s.sangkat=""):b==="district"&&(s.sangkat=""),{...h,customer:s}})},ne=(d,b,u,h)=>{$(s=>{const p=[...s.products];let S={...p[d]};if(["discountPercentInput","discountAmountInput","finalPriceInput"].includes(b)){let Y=String(u).replace(/[^0-9.]/g,"").replace(/(\..*?)\./g,"$1");Y.startsWith("0")&&Y.length>1&&!Y.startsWith("0.")&&(Y=String(parseFloat(Y))),S[b]=Y}else b==="quantity"?S[b]=u===""?0:Math.max(0,parseInt(u)||0):S[b]=u;if(b==="name"){const Y=n.products.find(q=>q.ProductName===u);S.name=u,Y?(S.originalPrice=Y.Price,S.image=Y.ImageURL,S.cost=Y.Cost,S.discountType="percent",S.finalPrice=Y.Price,S.finalPriceInput=String(Y.Price),S.tags=h!==void 0?h:Y.Tags):(S.originalPrice=0,S.image="",S.cost=0,S.discountType="custom",S.finalPrice=0,S.tags="")}return b==="discountType"&&(S.discountPercentInput="",S.discountAmountInput="",S.finalPrice=S.originalPrice,S.finalPriceInput=String(S.originalPrice)),p[d]=se(S,n.products),{...s,products:p}})},ke=d=>{E(d),f(X(d.LogosURL)),$(b=>({...b,shipping:{...b.shipping,method:d.MethodName,details:d.RequireDriverSelection?"":d.MethodName}}))},fe=d=>{const{name:b,value:u}=d.target;let h=u;if(b==="cost"){h.startsWith("0")&&h.length>1&&!h.startsWith("0.")&&(h=String(parseFloat(h)));const s=parseFloat(h)||0;h=String(Math.max(0,s))}$(s=>({...s,shipping:{...s.shipping,[b]:h}}))},Se=d=>{$(b=>({...b,shipping:{...b.shipping,details:d}}))},Ce=d=>{var u;const b=((u=n.bankAccounts)==null?void 0:u.find(h=>h.BankName===d))||null;i(b?X(b.LogoURL):""),$(h=>({...h,payment:{...h.payment,info:d}}))},ye=d=>{w(d),$(b=>({...b,customer:{...b.customer,shippingFee:d==="free"?0:""}}))},Me=()=>{if(!v){alert("API Key Required for Maps.");return}const{province:d,district:b,sangkat:u,additionalLocation:h}=t.customer,s=[h,u,b,d,"Cambodia"].filter(Boolean).join(", ");ee(`https://www.google.com/maps/embed/v1/search?key=${v}&q=${encodeURIComponent(s)}`),V(!0)},we=d=>{switch(I(""),d){case 1:return!t.customer.name||!t.customer.phone||!t.customer.province||!t.page||!t.fulfillmentStore?(I("សូមបំពេញឈ្មោះ, លេខទូរស័ព្ទ, ខេត្ត/ក្រុង, Page និងឃ្លាំងបញ្ចេញទំនិញ។"),!1):C==="charge"&&(t.customer.shippingFee===""||t.customer.shippingFee<0)?(I("សូមបញ្ចូលតម្លៃដឹកជញ្ជូនឱ្យបានត្រឹមត្រូវ។"),!1):!0;case 2:return t.products.length===0||t.products.some(b=>!b.name||b.quantity<=0)?(I("សូមពិនិត្យទិន្នន័យផលិតផល។"),!1):!0;case 3:return!t.shipping.method||H!=null&&H.RequireDriverSelection&&!t.shipping.details||t.shipping.cost===""||parseFloat(t.shipping.cost)<0?(I("សូមពិនិត្យព័ត៌មានដឹកជញ្ជូន។"),!1):!0;case 4:return t.payment.status==="Paid"&&!t.payment.info?(I("សូមជ្រើសរើសគណនីធនាគារ Tune។"),!1):t.telegram.schedule&&!t.telegram.time?(I("សូមជ្រើសរើសពេលវេលាផ្ញើសារ។"),!1):!0;default:return!0}},Pe=()=>{we(x)&&L(x+1)},$e=()=>{x>1&&L(x-1)},Le=async()=>{for(const p of he)if(!we(p.number)){L(p.number);return}_(!0);let d="0"+t.customer.phone.replace(/[^0-9]/g,"").replace(/^0+/,"");const u=[t.customer.additionalLocation,t.customer.sangkat,t.customer.district].filter(Boolean).join(", ");let h=t.telegram.schedule?t.telegram.time:"";h&&(h=h.replace("T"," "));const s={currentUser:c,selectedTeam:l,page:t.page,telegramValue:t.telegramValue,customer:{...t.customer,phone:d,shippingFee:Number(t.customer.shippingFee)||0},"Customer Name":t.customer.name,"Customer Phone":d,Location:t.customer.province,"Address Details":u,"Internal Shipping Method":t.shipping.method,"Internal Shipping Details":t.shipping.details,"Internal Cost":Number(t.shipping.cost)||0,"Payment Status":t.payment.status,"Payment Info":t.payment.info,"Fulfillment Store":t.fulfillmentStore,products:t.products.map(p=>({name:p.name,quantity:Number(p.quantity)||1,originalPrice:Number(p.originalPrice)||0,finalPrice:Number(p.finalPrice)||0,total:Number(p.total)||0,colorInfo:p.colorInfo,cost:Number(p.cost)||0,tags:p.tags})),shipping:{...t.shipping,cost:Number(t.shipping.cost)||0},payment:t.payment,subtotal:Number(t.subtotal)||0,grandTotal:Number(t.grandTotal)||0,note:t.note,fulfillmentStore:t.fulfillmentStore,scheduledTime:h};try{const p=await fetch(`${Ne}/api/submit-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),S=await p.json();if(!p.ok||S.status!=="success")throw new Error(S.message||"Error");localStorage.removeItem(G),A({type:"success",message:`ជោគជ័យ! Order ID: ${S.orderId}`}),setTimeout(o,3e3)}catch(p){A({type:"error",message:`បរាជ័យ: ${p.message}`}),setTimeout(()=>A(null),3e3)}finally{_(!1)}},Te=()=>{var d,b,u;switch(x){case 1:return e.jsxs("fieldset",{className:"border border-gray-600 p-3 sm:p-4 rounded-lg animate-fade-in space-y-6",children:[e.jsx("legend",{className:"px-2 text-base sm:text-lg font-semibold text-blue-300",children:"ព័ត៌មានអតិថិជន & Page"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("label",{className:"input-label font-black text-xs uppercase tracking-widest text-gray-500 mb-0 block",children:"Facebook Page*"}),e.jsxs("div",{className:"flex bg-gray-900/80 p-1 rounded-xl border border-gray-700",children:[e.jsxs("button",{type:"button",onClick:()=>$({...t,pageSelectMode:"cards"}),className:`px-3 py-1.5 text-[10px] font-black uppercase rounded-lg transition-all flex items-center gap-2 ${t.pageSelectMode==="cards"?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2z",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Card View"]}),e.jsxs("button",{type:"button",onClick:()=>$({...t,pageSelectMode:"search"}),className:`px-3 py-1.5 text-[10px] font-black uppercase rounded-lg transition-all flex items-center gap-2 ${t.pageSelectMode==="search"?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Search View"]})]})]}),e.jsx("div",{className:"animate-fade-in-down",children:t.pageSelectMode==="cards"?e.jsx(Ee,{pages:U,selectedPageName:t.page,onSelect:s=>$({...t,page:s.PageName,telegramValue:s.TelegramValue,fulfillmentStore:s.DefaultStore||t.fulfillmentStore})}):e.jsx(Oe,{pages:U,selectedPageName:t.page,onSelect:s=>$({...t,page:s.PageName,telegramValue:s.TelegramValue,fulfillmentStore:s.DefaultStore||t.fulfillmentStore})})})]}),e.jsxs("div",{className:"md:col-span-2 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-1.5 h-4 bg-orange-500 rounded-full"}),e.jsx("label",{className:"input-label !mb-0 font-black text-xs uppercase tracking-widest text-orange-400",children:"ឃ្លាំងបញ្ចេញទំនិញ (Store)*"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:(d=n.stores)==null?void 0:d.map(s=>{const p=t.fulfillmentStore===s.StoreName;return e.jsxs("button",{type:"button",onClick:()=>$({...t,fulfillmentStore:s.StoreName}),className:`relative overflow-hidden group p-4 rounded-2xl border-2 transition-all duration-300 flex flex-col items-center text-center gap-2 ${p?"bg-orange-500/10 border-orange-500 shadow-[0_0_20px_rgba(249,115,22,0.2)]":"bg-gray-900 border-gray-800 hover:border-gray-600"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-colors ${p?"bg-orange-500 text-white":"bg-gray-800 text-gray-500 group-hover:text-gray-300"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("span",{className:`text-[11px] font-black uppercase tracking-tight ${p?"text-white":"text-gray-400"}`,children:s.StoreName}),p&&e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]},s.StoreName)})})]}),e.jsx("input",{type:"text",name:"name",value:t.customer.name,placeholder:"ឈ្មោះអតិថិជន*",className:"form-input !py-3 rounded-xl border-gray-700 bg-gray-900",onChange:ae,required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"tel",name:"phone",value:t.customer.phone,placeholder:"លេខទូរស័ព្ទ*",className:"form-input !py-3 rounded-xl border-gray-700 bg-gray-900 pr-12",onChange:ae,required:!0}),M&&e.jsx("img",{src:M,alt:"Carrier",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-auto object-contain"})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(ze,{provinces:J,selectedProvince:t.customer.province,onSelect:s=>ae({target:{name:"province",value:s}})}),e.jsxs("select",{name:"district",value:t.customer.district,className:"form-select",onChange:ae,disabled:!t.customer.province,children:[e.jsx("option",{value:"",children:"-- ស្រុក/ខណ្ឌ --"}),Q.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{name:"sangkat",value:t.customer.sangkat,className:"form-select",onChange:ae,disabled:!t.customer.district,children:[e.jsx("option",{value:"",children:"-- ឃុំ/សង្កាត់ --"}),re.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"ទីតាំងលម្អិត (ផ្ទះលេខ, ផ្លូវ)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"additionalLocation",value:t.customer.additionalLocation,placeholder:"បញ្ចូលទីតាំងលម្អិត...",className:"form-input !py-3 rounded-xl bg-gray-900 border-gray-700",onChange:ae}),e.jsx("button",{type:"button",onClick:Me,className:"p-3 bg-blue-600/10 text-blue-400 rounded-xl border border-blue-500/20 hover:bg-blue-600 hover:text-white transition-all active:scale-90",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"ថ្លៃសេវាដឹកជញ្ជូន"}),e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>ye("charge"),className:`flex-1 py-3 px-4 rounded-xl text-xs font-black uppercase transition-all border ${C==="charge"?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-300"}`,children:"គិតថ្លៃសេវា"}),e.jsx("button",{type:"button",onClick:()=>ye("free"),className:`flex-1 py-3 px-4 rounded-xl text-xs font-black uppercase transition-all border ${C==="free"?"bg-emerald-600 border-emerald-500 text-white shadow-lg shadow-emerald-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-300"}`,children:"មិនគិតថ្លៃសេវា"})]}),C==="charge"&&e.jsxs("div",{className:"space-y-3 animate-fade-in",children:[e.jsx("input",{type:"number",min:"0",name:"shippingFee",value:t.customer.shippingFee,placeholder:"តម្លៃដឹកជញ្ជូន (ឧ. 1.5)*",className:"form-input !py-3 rounded-xl border-gray-700 bg-gray-900",onChange:ae,required:!0}),e.jsx("div",{className:"flex gap-2",children:[1,1.5,2].map(s=>{const p=parseFloat(t.customer.shippingFee)===s;return e.jsxs("button",{type:"button",onClick:()=>ae({target:{name:"shippingFee",value:String(s)}}),className:`flex-1 py-2 border font-black rounded-xl text-xs transition-all active:scale-95 ${p?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-200"}`,children:["$",s]},s)})})]})]})]})]});case 2:return e.jsxs("fieldset",{className:"border border-gray-600 p-3 sm:p-4 rounded-lg animate-fade-in space-y-4 sm:space-y-6",children:[e.jsx("legend",{className:"px-2 text-base sm:text-lg font-semibold text-blue-300",children:"ផលិតផល & ការបញ្ចុះតម្លៃ"}),e.jsx("div",{className:"space-y-4 sm:space-y-6",children:t.products.map((s,p)=>{const S=(Number(s.quantity)||0)*(Number(s.originalPrice)||0),Y=S-(Number(s.total)||0);return e.jsxs("div",{className:"p-3 sm:p-5 bg-gray-800/40 rounded-2xl sm:rounded-3xl border border-gray-700 relative shadow-xl overflow-hidden group",children:[e.jsx("button",{type:"button",onClick:()=>{t.products.length>1&&$({...t,products:t.products.filter((q,le)=>le!==p)})},className:"absolute top-2 right-2 sm:top-4 sm:right-4 text-red-400 bg-red-400/10 rounded-full h-6 w-6 sm:h-8 sm:w-8 flex items-center justify-center border border-red-400/20 hover:bg-red-600 hover:text-white transition-all z-10 active:scale-90",disabled:t.products.length<=1,children:"×"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 sm:gap-6 mb-4 sm:mb-6",children:[e.jsx("div",{className:"md:col-span-2 flex justify-center",children:e.jsx("div",{className:"w-20 h-20 sm:w-28 sm:h-28 bg-gray-900 rounded-xl sm:rounded-2xl overflow-hidden border-2 border-gray-700 shadow-inner group-hover:border-blue-500/50 transition-colors",children:e.jsx("img",{src:X(s.image),className:"w-full h-full object-cover",alt:""})})}),e.jsxs("div",{className:"md:col-span-10 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"ឈ្មោះផលិតផល*"}),e.jsx(Ie,{products:n.products||[],selectedProductName:s.name,onSelect:(q,le)=>ne(p,"name",q,le)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsx(Fe,{value:s.quantity,onChange:q=>ne(p,"quantity",q)}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"ពណ៌/សម្គាល់"}),e.jsx("input",{type:"text",list:`colors-datalist-${s.id}`,value:s.colorInfo,onChange:q=>ne(p,"colorInfo",q.target.value),className:"form-input text-sm !py-2.5 rounded-xl bg-gray-900 border-gray-700",placeholder:"ឧ. ខៀវ, XL"}),e.jsx("datalist",{id:`colors-datalist-${s.id}`,children:(n.colors||[]).map((q,le)=>e.jsx("option",{value:q.ColorName},le))})]})]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-xl sm:rounded-[2rem] p-3 sm:p-6 border border-white/5 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"h-px flex-grow bg-gray-700/50"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] whitespace-nowrap",children:"Pricing & Discount"}),e.jsx("div",{className:"h-px flex-grow bg-gray-700/50"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"flex bg-gray-900/50 p-1 rounded-xl sm:rounded-2xl border border-gray-700 shadow-inner",children:["percent","amount","custom"].map(q=>e.jsx("button",{type:"button",onClick:()=>ne(p,"discountType",q),className:`flex-1 flex flex-col items-center justify-center py-2 sm:py-2.5 rounded-lg sm:rounded-xl transition-all duration-300 active:scale-95 ${s.discountType===q?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:e.jsx("span",{className:"text-[9px] sm:text-[11px] font-black uppercase tracking-widest",children:q==="percent"?"បញ្ចុះ %":q==="amount"?"បញ្ចុះ $":"កែតម្លៃលក់"})},q))}),e.jsxs("div",{className:"relative animate-fade-in",children:[s.discountType==="percent"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 ml-1",children:"បញ្ចូលភាគរយបញ្ចុះតម្លៃ (%)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",max:"100",placeholder:"0",value:s.discountPercentInput,onChange:q=>ne(p,"discountPercentInput",q.target.value),className:"form-input !text-base sm:!text-lg !font-black !py-2 sm:!py-3 pr-10 text-right text-blue-400 bg-gray-900 border-gray-700"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-black",children:"%"})]})]}),s.discountType==="amount"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 ml-1",children:"បញ្ចូលទឹកប្រាក់បញ្ចុះតម្លៃ ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",placeholder:"0.00",value:s.discountAmountInput,onChange:q=>ne(p,"discountAmountInput",q.target.value),className:"form-input !text-base sm:!text-lg !font-black !py-2 sm:!py-3 pr-10 text-right text-red-400 bg-gray-900 border-gray-700"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-black",children:"$"})]}),s.quantity>1&&e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-black/20 rounded-lg mt-1 sm:mt-2 border border-white/5 active:scale-95 transition-transform",children:[e.jsx("input",{type:"checkbox",checked:s.applyDiscountToTotal,onChange:q=>ne(p,"applyDiscountToTotal",q.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-gray-800 text-blue-500"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] text-gray-400 uppercase font-black",children:"បញ្ចុះលើតម្លៃសរុប"})]})]}),s.discountType==="custom"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 ml-1",children:"កំណត់តម្លៃលក់ថ្មីក្នុង ១ ឯកតា ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",inputMode:"decimal",placeholder:"0.00",value:s.finalPriceInput,onChange:q=>ne(p,"finalPriceInput",q.target.value),className:"form-input !text-base sm:!text-lg !font-black !py-2 sm:!py-3 pr-10 text-right text-emerald-400 bg-gray-900 border-gray-700"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-black",children:"$"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-900/60 rounded-xl sm:rounded-[1.5rem] p-3 sm:p-5 border border-white/5 flex flex-col justify-between",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-[10px] sm:text-xs",children:[e.jsx("span",{className:"text-gray-500 font-bold uppercase",children:"Original Subtotal"}),e.jsxs("span",{className:"text-blue-400 font-black",children:["$",S.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] sm:text-xs",children:[e.jsx("span",{className:"text-gray-500 font-bold uppercase",children:"Discount Applied"}),e.jsxs("span",{className:"text-red-400 font-black",children:["-",Y>0?`$${Y.toFixed(2)}`:"$0.00"]})]}),e.jsx("div",{className:"h-px bg-gray-700/50 my-1"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[9px] sm:text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Net Total"}),e.jsxs("span",{className:"text-xl sm:text-2xl font-black text-white tracking-tighter",children:["$",(s.total||0).toFixed(2)]})]})]}),e.jsx("div",{className:"mt-3 sm:mt-4 pt-2 sm:pt-3 border-t border-white/5 flex justify-center",children:e.jsxs("span",{className:"text-[8px] sm:text-[9px] bg-emerald-500/10 text-emerald-400 px-2 sm:px-3 py-1 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest",children:["Avg. $",(s.finalPrice||0).toFixed(2)," / unit"]})})]})]})]})]},s.id)})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mt-6",children:[e.jsxs("button",{type:"button",onClick:()=>$({...t,products:[...t.products,{...pe,id:Date.now()}]}),className:"flex-1 py-4 px-6 bg-gray-800 border border-gray-700 rounded-2xl text-gray-300 font-black uppercase text-[11px] tracking-widest hover:bg-gray-700 hover:border-blue-500 transition-all flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M12 4v16m8-8H4"})}),"បន្ថែមផលិតផល"]}),e.jsxs("button",{type:"button",onClick:()=>F(!0),className:"flex-1 py-4 px-6 bg-blue-600/10 border border-blue-500/30 rounded-2xl text-blue-400 font-black uppercase text-[11px] tracking-widest hover:bg-blue-600 hover:text-white transition-all flex items-center justify-center gap-2 shadow-lg shadow-blue-900/10 active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2M17 3h2a2 2 0 0 1 2 2v2M21 17v2a2 2 0 0 1-2 2h-2M7 21H5a2 2 0 0 1-2-2v-2M7 12h10",strokeWidth:"3"})}),"Scan Barcode"]})]})]});case 3:return e.jsxs("fieldset",{className:"border border-gray-600 p-3 sm:p-4 rounded-lg animate-fade-in space-y-4 sm:space-y-6",children:[e.jsx("legend",{className:"px-2 text-base sm:text-lg font-semibold text-blue-300",children:"ដឹកជញ្ជូន"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"វិធីសាស្រ្តដឹកជញ្ជូន*"}),e.jsx(Re,{methods:n.shippingMethods||[],selectedMethodName:t.shipping.method,onSelect:ke})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"ថ្លៃសេវាឲ្យអ្នកដឹក (Cost)*"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",step:"0.01",name:"cost",placeholder:"0.00",value:t.shipping.cost,className:"form-input !py-3 rounded-xl bg-gray-900 border-gray-700 text-blue-400 font-black pr-12",onChange:fe,required:!0}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"$"})]}),e.jsx("div",{className:"flex gap-2",children:[1.25,1.5,2].map(s=>{const p=parseFloat(t.shipping.cost)===s;return e.jsxs("button",{type:"button",onClick:()=>fe({target:{name:"cost",value:String(s)}}),className:`flex-1 py-2 border font-black rounded-xl text-xs transition-all active:scale-95 ${p?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-200"}`,children:["$",s]},s)})})]})]}),(H==null?void 0:H.RequireDriverSelection)&&e.jsxs("div",{className:"md:col-span-2 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-1",children:[e.jsx("div",{className:"h-4 w-1 bg-blue-500 rounded-full"}),e.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"ជ្រើសរើសអ្នកដឹក (DriverSelection)*"})]}),e.jsx(Ke,{drivers:n.drivers||[],selectedDriverName:t.shipping.details,onSelect:Se}),!t.shipping.details&&e.jsx("p",{className:"text-center text-[9px] text-gray-500 italic mt-1",children:"សូមជ្រើសរើសអ្នកដឹកម្នាក់"})]})]})]});case 4:const h=(b=n.drivers)==null?void 0:b.find(s=>s.DriverName===t.shipping.details);return e.jsxs("div",{className:"animate-fade-in space-y-4 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2 sm:mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," ព័ត៌មានអតិថិជន"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 bg-gray-900/60 p-3 sm:p-5 rounded-2xl sm:rounded-3xl border border-white/5 shadow-inner",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Customer Info"}),e.jsx("p",{className:"text-white font-black text-base sm:text-lg",children:t.customer.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-blue-400 font-bold font-mono text-sm",children:t.customer.phone}),M&&e.jsx("img",{src:M,className:"h-4 sm:h-5 w-auto object-contain",alt:"Carrier"})]})]}),e.jsxs("div",{className:"space-y-1 md:text-right",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Location / Store"}),e.jsx("p",{className:"text-gray-200 font-bold text-xs sm:text-sm leading-tight",children:`${t.customer.additionalLocation}, ${t.customer.sangkat}, ${t.customer.district}, ${t.customer.province}`.replace(/^,|,$/g,"").trim()}),e.jsxs("p",{className:"text-purple-400 font-black text-[9px] uppercase tracking-wider",children:["Fulfillment: ",t.fulfillmentStore]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2 sm:mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-orange-500"})," ព័ត៌មានដឹកជញ្ជូន"]}),e.jsxs("div",{className:"bg-gray-900/40 p-3 sm:p-5 rounded-2xl sm:rounded-3xl border border-white/5 shadow-inner grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Shipping Method"}),e.jsxs("div",{className:"flex items-center gap-2",children:[g&&e.jsx("img",{src:g,className:"h-4 sm:h-5 w-auto object-contain",alt:"Logo"}),e.jsx("p",{className:"text-white font-black text-xs sm:text-sm",children:t.shipping.method})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Driver / Details"}),e.jsxs("div",{className:"flex items-center gap-2",children:[h&&e.jsx("img",{src:X(h.ImageURL),className:"h-6 w-6 sm:h-8 sm:w-8 rounded-full object-cover border border-gray-700 cursor-pointer active:scale-95 transition-transform",alt:"Driver",onClick:()=>R(X(h.ImageURL))}),e.jsx("p",{className:"text-white font-bold text-xs sm:text-sm",children:t.shipping.details||"N/A"})]})]}),e.jsxs("div",{className:"space-y-1 sm:text-right",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Internal Cost ($)"}),e.jsxs("p",{className:"text-orange-400 font-black text-base sm:text-lg font-mono",children:["$",(Number(t.shipping.cost)||0).toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2 sm:mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," បញ្ជីទំនិញកុម្ម៉ង់"]}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:t.products.map(s=>e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 bg-gray-900/40 p-2 sm:p-3 rounded-xl sm:rounded-2xl border border-white/5 group hover:border-blue-500/30 transition-all",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-800 rounded-lg sm:rounded-xl overflow-hidden border border-gray-700 flex-shrink-0 relative",children:e.jsx("img",{src:X(s.image),className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",alt:s.name})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-0.5 sm:mb-1",children:[e.jsx("h4",{className:"text-white font-black text-xs sm:text-sm truncate leading-tight",children:s.name}),e.jsx("div",{className:"flex gap-1.5",children:e.jsxs("span",{className:"bg-blue-600/10 text-blue-400 text-[9px] sm:text-[10px] font-black px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded-lg border border-blue-500/20",children:["x",s.quantity]})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.colorInfo&&e.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded-md font-bold",children:s.colorInfo}),e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-tight",children:[e.jsxs("span",{children:["$",(s.finalPrice||0).toFixed(2)]})," / unit"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white font-black text-sm sm:text-base tracking-tight",children:["$",(s.total||0).toFixed(2)]}),e.jsx("p",{className:"text-[8px] text-gray-600 font-bold uppercase",children:"Subtotal"})]})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-gray-900/40 p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-white/5 text-center",children:[e.jsx("p",{className:"text-[8px] sm:text-[9px] text-gray-500 font-black uppercase mb-1",children:"សរុបទំនិញ"}),e.jsxs("p",{className:"text-white font-black text-base sm:text-lg",children:["$",(t.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-gray-900/40 p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-white/5 text-center",children:[e.jsx("p",{className:"text-[8px] sm:text-[9px] text-gray-500 font-black uppercase mb-1",children:"សេវាដឹក"}),e.jsxs("p",{className:"text-white font-black text-base sm:text-lg",children:["$",(Number(t.customer.shippingFee)||0).toFixed(2)]})]}),e.jsxs("div",{className:"col-span-2 bg-blue-600/10 p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-blue-500/20 text-center shadow-lg shadow-blue-900/10",children:[e.jsx("p",{className:"text-[9px] sm:text-[10px] text-blue-400 font-black uppercase mb-1 tracking-widest",children:"សរុបរួម (Grand Total)"}),e.jsxs("p",{className:"text-white font-black text-2xl sm:text-3xl tracking-tighter",children:["$",(t.grandTotal||0).toFixed(2)]})]})]}),e.jsxs("fieldset",{className:"border border-gray-700 p-4 sm:p-6 rounded-2xl sm:rounded-3xl bg-gray-900/20",children:[e.jsx("legend",{className:"px-3 text-[10px] sm:text-xs font-black text-blue-400 uppercase tracking-[0.2em]",children:"ស្ថានភាពទូទាត់"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("select",{value:t.payment.status,onChange:s=>$({...t,payment:{...t.payment,status:s.target.value,info:""}}),className:"form-select bg-gray-800 text-sm",children:[e.jsx("option",{value:"Unpaid",children:"មិនទាន់ទូទាត់ (COD)"}),e.jsx("option",{value:"Paid",children:"ទូទាត់រួច (Paid)"})]}),t.payment.status==="Paid"&&e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 animate-fade-in",children:[e.jsxs("select",{value:t.payment.info,onChange:s=>Ce(s.target.value),className:"form-select bg-gray-800 flex-grow text-sm",children:[e.jsx("option",{value:"",children:"ជ្រើសរើសធនាគារ"}),(u=n.bankAccounts)==null?void 0:u.map(s=>e.jsx("option",{value:s.BankName,children:s.BankName},s.BankName))]}),y&&e.jsx("img",{src:y,className:"h-8 w-12 sm:h-10 sm:w-16 object-contain bg-white/10 p-1 rounded-lg sm:rounded-xl active:scale-95 transition-transform",alt:"bank"})]})]})]}),e.jsx(Ze,{schedule:t.telegram.schedule,time:t.telegram.time,onChange:s=>$({...t,telegram:s})}),e.jsxs("div",{className:"space-y-2 sm:space-y-3 pt-4",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"ចំណាំ & Link Google Map"}),e.jsx("textarea",{placeholder:"ចំណាំបន្ថែម...",value:t.note,rows:4,onChange:s=>$({...t,note:s.target.value}),className:"form-textarea bg-gray-900/60 !rounded-[1.5rem] sm:!rounded-[2rem] border-white/5 focus:border-blue-500/50 text-sm"})]})]});default:return null}};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto mt-2 sm:mt-10 lg:mt-14 px-1 sm:px-0",children:[e.jsx("style",{children:`
                @keyframes shimmer {
                    0% { background-position: -200% 0; }
                    100% { background-position: 200% 0; }
                }
                .btn-shimmer {
                    background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0) 100%);
                    background-size: 200% 100%;
                    animation: shimmer 3s infinite linear;
                }
                @keyframes pulse-glow {
                    0%, 100% { box-shadow: 0 0 15px rgba(37,99,235,0.3); }
                    50% { box-shadow: 0 0 30px rgba(37,99,235,0.6); }
                }
                .btn-pulse { animation: pulse-glow 2s infinite ease-in-out; }
                @keyframes spin-border {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }
                .card-flux {
                    position: relative;
                    background: #0f172a;
                    z-index: 1;
                }
                .card-flux-active::after, .card-flux-active::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    background: conic-gradient(from var(--angle), transparent 70%, #3b82f6, #8b5cf6, #ec4899, #3b82f6);
                    border-radius: inherit;
                    animation: spin-border 3s linear infinite;
                }
                .card-flux-active::before {
                    filter: blur(10px);
                    opacity: 0.7;
                }
                @keyframes float-y {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-5px); }
                }
                .animate-float-y { animation: float-y 3s ease-in-out infinite; }
                @keyframes pulse-soft {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.6; }
                }
                .animate-pulse-soft { animation: pulse-soft 2s ease-in-out infinite; }
             `}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[100] animate-fade-in p-4",children:e.jsxs("div",{className:"page-card text-center flex flex-col items-center animate-fade-in-scale",children:[k.type==="success"?e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-green-500/20 text-green-400 rounded-full flex items-center justify-center mb-4 border border-green-500/30 shadow-[0_0_30px_rgba(34,197,94,0.2)]",children:e.jsx("svg",{className:"h-8 w-8 sm:h-10 sm:w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}):e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-red-500/20 text-red-400 rounded-full flex items-center justify-center mb-4 border border-red-500/30",children:e.jsx("svg",{className:"h-8 w-8 sm:h-10 sm:w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("p",{className:"text-base sm:text-lg font-black text-white",children:k.message})]})}),e.jsx(We,{isOpen:O,onClose:()=>V(!1),url:Z}),D&&e.jsx(Je,{onClose:()=>F(!1),onCodeScanned:be,scanMode:te,setScanMode:de,productsInOrder:t.products,masterProducts:n.products||[]}),e.jsx(je,{isOpen:T,onClose:()=>P(!1),maxWidth:"max-w-sm",children:e.jsxs("div",{className:"p-6 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto w-14 h-14 sm:w-16 sm:h-16 bg-red-500/10 text-red-500 rounded-full flex items-center justify-center border border-red-500/20 shadow-xl shadow-red-900/10 animate-bounce-slow",children:e.jsx("svg",{className:"h-7 w-7 sm:h-8 sm:w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-lg sm:text-xl font-black text-white uppercase tracking-tighter",children:"បោះបង់ការបញ្ចូល?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>P(!1),className:"px-6 py-3 bg-gray-800 border border-gray-700 text-gray-300 rounded-2xl flex-1 font-black text-xs sm:text-sm transition-all hover:bg-gray-700 active:scale-95",children:"ទេ (ត្រឡប់)"}),e.jsx("button",{onClick:z,className:"px-6 py-3 bg-red-600 border border-red-500 text-white rounded-2xl flex-1 font-black text-xs sm:text-sm transition-all hover:bg-red-700 active:scale-95 shadow-lg shadow-red-900/20",children:"បាទ (បោះបង់)"})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 sm:mb-10 gap-4",children:[e.jsxs("h1",{className:"hidden md:flex text-2xl sm:text-3xl font-black text-white uppercase tracking-tighter items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"text-blue-500",children:"កុម្ម៉ង់ថ្មី"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] bg-blue-600/20 text-blue-400 px-3 sm:px-4 py-1.5 rounded-full border border-blue-500/20 uppercase tracking-[0.15em] sm:tracking-[0.2em]",children:l})]}),e.jsx("button",{onClick:K,className:"hidden md:block px-6 py-2.5 bg-gray-800 border border-gray-700 hover:border-red-500 hover:bg-red-500/10 text-gray-400 hover:text-red-400 font-black rounded-2xl uppercase text-[10px] sm:text-[11px] tracking-widest transition-all active:scale-90",children:"បោះបង់"})]}),e.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-3xl border border-white/5 rounded-[1.5rem] sm:rounded-[3rem] p-3 sm:p-10 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 sm:mb-12 relative px-2 sm:px-4",children:[e.jsx("div",{className:"absolute left-6 right-6 sm:left-10 sm:right-10 top-1/2 w-[calc(100%-48px)] sm:w-[calc(100%-80px)] h-0.5 bg-gray-700 -z-10"}),e.jsx("div",{className:"absolute left-6 sm:left-10 top-1/2 h-0.5 bg-blue-500 -z-10 transition-all duration-500",style:{width:`${(x-1)/(he.length-1)*(100-48/400*100)}%`}}),he.map(d=>e.jsxs("div",{className:`relative flex flex-col items-center z-10 transition-all duration-500 ${x>=d.number?"scale-110":"opacity-40 scale-90"}`,children:[e.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-xl sm:rounded-2xl flex items-center justify-center font-black text-[10px] sm:text-xs border-2 transition-all duration-500 ${x>=d.number?"border-blue-500 bg-blue-600 text-white shadow-[0_0_20px_rgba(37,99,235,0.4)]":"border-gray-600 bg-gray-800 text-gray-500"}`,children:x>d.number?"✓":d.number}),e.jsx("span",{className:`absolute -bottom-6 sm:-bottom-7 text-[8px] sm:text-[9px] font-black uppercase tracking-widest whitespace-nowrap ${x>=d.number?"text-blue-400":"text-gray-600"}`,children:d.title})]},d.number))]}),e.jsx("div",{className:"mt-8 sm:mt-16",children:Te()}),B&&e.jsx("div",{className:"mt-4 sm:mt-6 p-3 sm:p-4 bg-red-500/10 border border-red-500/20 rounded-xl sm:rounded-2xl text-red-400 text-center text-[10px] sm:text-xs font-bold animate-shake",children:B}),e.jsxs("div",{className:"mt-8 sm:mt-10 pt-6 sm:pt-8 border-t border-white/5 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex gap-3 sm:gap-4 h-12 sm:h-16",children:[x>1&&e.jsxs("button",{type:"button",onClick:$e,className:"flex-1 px-4 sm:px-8 bg-gray-800 border border-gray-700 text-gray-300 rounded-2xl font-black uppercase text-[10px] sm:text-[12px] tracking-[0.15em] transition-all hover:bg-gray-700 flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M15 19l-7-7 7-7"})}),"ត្រឡប់"]}),x<he.length?e.jsxs("button",{type:"button",onClick:Pe,className:"relative flex-[2] bg-blue-600 hover:bg-blue-700 text-white rounded-2xl font-black uppercase text-[12px] sm:text-[14px] tracking-[0.2em] shadow-2xl active:scale-95 transition-all flex items-center justify-center gap-3 group overflow-hidden btn-pulse",children:[e.jsx("div",{className:"absolute inset-0 btn-shimmer pointer-events-none"}),e.jsx("span",{className:"relative z-10",children:"ជំហានបន្ទាប់"}),e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 relative z-10 transform group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M9 5l7 7-7 7"})})]}):e.jsxs("button",{type:"button",onClick:Le,className:"relative flex-[2] bg-emerald-600 hover:bg-emerald-700 text-white rounded-2xl font-black uppercase text-[12px] sm:text-[14px] tracking-[0.2em] shadow-2xl active:scale-95 transition-all flex items-center justify-center gap-3 overflow-hidden",disabled:W,children:[e.jsx("div",{className:"absolute inset-0 btn-shimmer pointer-events-none"}),W?e.jsx(xe,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"relative z-10",children:"បញ្ជូនកម្ម៉ង់ឥឡូវនេះ"}),e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 relative z-10 animate-bounce-x",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M5 13l4 4L19 7"})})]})]})]}),e.jsx("button",{onClick:K,className:"md:hidden w-full py-4 bg-gray-800/40 text-gray-500 hover:text-red-400 font-black rounded-2xl uppercase text-[10px] tracking-widest transition-all active:scale-95 border border-white/5",children:"បោះបង់ការបញ្ចូល"})]})]}),e.jsx("style",{children:".animate-bounce-x { animation: bounce-x 1s infinite ease-in-out; } @keyframes bounce-x { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(5px); } }"})]})},ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tt=({orders:l,onBack:o,team:m})=>{const{appData:n,previewImage:c}=r.useContext(ge),[v,R]=r.useState(!0),[x,L]=r.useState(!1),[T,P]=r.useState(!0),[N,j]=r.useState(!0),[t,$]=r.useState(!1),[W,_]=r.useState({key:"revenue",direction:"desc"}),B=a=>{_(g=>({key:a,direction:g.key===a&&g.direction==="desc"?"asc":"desc"}))},I=r.useMemo(()=>{const a={};n.pages&&n.pages.filter(y=>(y.Team||"").trim()===m).forEach(y=>{a[y.PageName]={pageName:y.PageName,logoUrl:y.PageLogoURL||"",revenue:0,profit:0,orderCount:0},ce.forEach(i=>{a[y.PageName][`rev_${i}`]=0,a[y.PageName][`prof_${i}`]=0})}),l.forEach(f=>{var F;if((f.Team||"").trim()!==m)return;const y=f.Page||"Unknown";if(!a[y]){const C=(F=n.pages)==null?void 0:F.find(w=>w.PageName===y);a[y]={pageName:y,logoUrl:(C==null?void 0:C.PageLogoURL)||"",revenue:0,profit:0,orderCount:0},ce.forEach(w=>{a[y][`rev_${w}`]=0,a[y][`prof_${w}`]=0})}const i=Number(f["Grand Total"])||0,D=(Number(f["Total Product Cost ($)"])||0)+(Number(f["Internal Cost"])||0);if(a[y].revenue+=i,a[y].profit+=i-D,a[y].orderCount+=1,f.Timestamp){const C=new Date(f.Timestamp),w=ce[C.getMonth()];a[y][`rev_${w}`]+=i,a[y][`prof_${w}`]+=i-D}});let g=Object.values(a);return N||(g=g.filter(f=>f.revenue>0)),g.sort((f,y)=>{const i=W.direction==="asc"?1:-1,D=f[W.key],F=y[W.key];return typeof D=="string"?D.localeCompare(F)*i:(D-F)*i})},[l,W,n.pages,N,m]),k=r.useMemo(()=>{const a={revenue:0,profit:0,pagesCount:I.length};return ce.forEach(g=>{a[`rev_${g}`]=0,a[`prof_${g}`]=0}),I.forEach(g=>{a.revenue+=g.revenue,a.profit+=g.profit,ce.forEach(f=>{a[`rev_${f}`]+=g[`rev_${f}`],a[`prof_${f}`]+=g[`prof_${f}`]})}),a},[I]),A=()=>{$(!0),setTimeout(()=>{try{const a=new Be({orientation:"landscape"}),g=a.internal.pageSize.width;a.setFontSize(18),a.text(`Sales Report - Team: ${m}`,g/2,15,{align:"center"}),a.save(`Page_Report_${m}_${Date.now()}.pdf`)}catch(a){console.error(a),alert("Export failed")}finally{$(!1)}},100)},H=r.useMemo(()=>[...I].sort((a,g)=>g.revenue-a.revenue).slice(0,5).map(a=>({label:a.pageName,value:a.revenue,imageUrl:a.logoUrl})),[I]),E=(a,g)=>{const y=[{key:"index",label:"#"},{key:"logo",label:"Logo"},{key:"pageName",label:"ឈ្មោះ Page",sortable:!0,sortKey:"pageName"},{key:`total${a}`,label:`សរុប (${a})`,sortable:!0,sortKey:a.toLowerCase()},...ce.map(i=>({key:`${g}_${i}`,label:i}))];return e.jsxs("div",{className:"hidden md:flex page-card flex-col mb-8 !p-6 border-gray-700/50 shadow-xl overflow-hidden bg-gray-900/40",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:`text-xl font-black flex items-center gap-2 ${a==="Revenue"?"text-blue-300":"text-green-400"}`,children:[e.jsx("span",{className:`w-2 h-6 rounded-full ${a==="Revenue"?"bg-blue-600":"bg-green-600"}`}),"តារាង",a==="Revenue"?"ចំណូល":"ប្រាក់ចំណេញ","តាម Page"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a==="Revenue"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>j(!N),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${N?"bg-purple-600 border-purple-500 text-white shadow-lg shadow-purple-900/20":"bg-gray-800 border-gray-700 text-gray-400"}`,children:N?"ALL PAGES":"ACTIVE ONLY"}),e.jsxs("button",{onClick:A,disabled:t,className:"btn !py-1 !px-4 text-[10px] font-black bg-red-600/20 border border-red-500/30 text-red-400 hover:bg-red-600 hover:text-white transition-all flex items-center gap-2",children:[t?e.jsx(xe,{size:"sm"}):e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"EXPORT PDF"]})]}),e.jsx("button",{onClick:()=>P(!T),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${T?"bg-orange-600 border-orange-500 text-white":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"COLOR"}),e.jsx("button",{onClick:()=>L(!x),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${x?"bg-blue-600 border-blue-500 text-white shadow-lg":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"FREEZE"}),e.jsx("button",{onClick:()=>R(!v),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${v?"bg-gray-700 border-gray-600 text-white shadow-lg":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"BORDER"})]})]}),e.jsx("div",{className:`overflow-x-auto custom-scrollbar pb-2 ${v?"border-2 border-white/20 rounded-2xl shadow-[0_0_40px_rgba(0,0,0,0.6)]":""}`,children:e.jsxs("table",{className:`report-table w-full border-separate border-spacing-0 text-sm ${v?"border-collapse":""}`,children:[e.jsx("thead",{className:"bg-[#0f172a] backdrop-blur-md",children:e.jsx("tr",{className:"border-b-2 border-white/20",children:y.map(i=>{let D="",F={};x&&(i.key==="index"?(D="sticky left-0 z-30 bg-[#0f172a]",F={width:"45px",minWidth:"45px"}):i.key==="logo"?(D="sticky left-[45px] z-30 bg-[#0f172a] shadow-sm",F={width:"60px",minWidth:"60px"}):i.key==="pageName"?(D="sticky left-[105px] z-30 bg-[#0f172a] shadow-md border-r border-white/20",F={minWidth:"180px"}):i.key.includes("total")&&(D="sticky z-30 bg-[#0f172a] border-r border-white/20 shadow-lg",F={left:"285px",width:"100px",minWidth:"100px"}));const C=i.key.includes("total")?a==="Revenue"?"bg-blue-900/80":"bg-green-900/80":"";return e.jsx("th",{onClick:()=>i.sortable&&B(i.sortKey),className:`px-4 py-5 whitespace-nowrap text-left font-black uppercase tracking-wider border-b-2 border-white/20 ${v?"border-x border-white/10":""} ${D} ${C} ${i.sortable?"cursor-pointer hover:bg-gray-700":""}`,style:F,children:e.jsxs("div",{className:"flex items-center gap-1",children:[i.label," ",i.sortable&&W.key===i.sortKey&&e.jsx("span",{children:W.direction==="asc"?"↑":"↓"})]})},i.key)})})}),e.jsx("tbody",{className:"divide-y divide-white/10",children:I.map((i,D)=>{const F=T?D%2===0?"bg-gray-800/30":"bg-transparent":"hover:bg-blue-500/5";return e.jsx("tr",{className:`${F} transition-colors group border-b border-white/10`,children:y.map(C=>{const w=`px-4 py-4 lg:py-5 whitespace-nowrap border-white/10 ${v?"border-x border-white/10":""}`;let O="",V={};if(x&&(C.key==="index"?(O="sticky left-0 z-10 bg-[#020617]",V={width:"45px",minWidth:"45px"}):C.key==="logo"?(O="sticky left-[45px] z-10 bg-[#020617] shadow-sm",V={width:"60px",minWidth:"60px"}):C.key==="pageName"?(O="sticky left-[105px] z-10 bg-[#020617] shadow-md border-r border-white/20",V={minWidth:"180px"}):C.key.includes("total")&&(O="sticky z-10 bg-[#020617] border-r border-white/20 shadow-lg",V={left:"285px",width:"100px",minWidth:"100px"})),C.key==="index")return e.jsx("td",{className:`${w} text-center font-bold text-gray-500 ${O}`,style:V,children:D+1},C.key);if(C.key==="logo")return e.jsx("td",{className:`${w} text-center ${O} border-b border-white/10`,style:V,children:e.jsx("img",{src:X(i.logoUrl),className:"w-9 h-9 rounded-full border border-gray-700 mx-auto shadow-md object-cover",alt:"logo",onClick:()=>c(X(i.logoUrl))})},C.key);if(C.key==="pageName")return e.jsx("td",{className:`${w} font-black text-white ${O} border-b border-white/10`,style:V,children:i.pageName},C.key);if(C.key.includes("total"))return e.jsxs("td",{className:`${w} text-right font-black ${O} ${a==="Revenue"?"text-blue-100 bg-blue-600/10":"text-green-100 bg-green-600/10"} border-b border-white/10`,style:V,children:["$",(a==="Revenue"?i.revenue:i.profit).toLocaleString(void 0,{minimumFractionDigits:2})]},C.key);if(C.key.startsWith(g)){const Z=i[C.key]||0,ee=a==="Profit"?Z>0?"text-green-400":Z<0?"text-red-400":"text-gray-500":Z>0?"text-blue-300":"text-gray-500";return e.jsx("td",{className:`${w} text-right font-bold font-mono ${ee} border-b border-white/10`,children:Z!==0?`$${Z.toLocaleString(void 0,{minimumFractionDigits:2})}`:"-"},C.key)}return e.jsx("td",{className:`${w} border-b border-white/10`,children:"-"},C.key)})},i.pageName)})}),e.jsx("tfoot",{className:"bg-[#0f172a] font-black border-t-2 border-white/20",children:e.jsx("tr",{className:"border-t-2 border-white/20",children:y.map((i,D)=>{const F=`px-4 py-5 whitespace-nowrap border-t-2 border-white/20 ${v?"border-x border-white/10":""}`;let C="",w={};return x&&(i.key==="index"?(C="sticky left-0 z-30 bg-[#0f172a]",w={width:"45px",minWidth:"45px"}):i.key==="logo"?(C="sticky left-[45px] z-30 bg-[#0f172a] shadow-sm",w={width:"60px",minWidth:"60px"}):i.key==="pageName"?(C="sticky left-[105px] z-30 bg-[#0f172a] shadow-md border-r border-white/20",w={minWidth:"180px"}):i.key.includes("total")&&(C="sticky z-30 bg-[#0f172a] border-r border-white/20 shadow-lg",w={left:"285px",width:"100px",minWidth:"100px"})),D===0?e.jsx("td",{className:`${F} uppercase tracking-widest text-white font-black ${C}`,style:w,colSpan:3,children:"សរុបរួម (GRAND TOTAL)"},i.key):["pageName","logo"].includes(i.key)?null:i.key.includes("total")?e.jsxs("td",{className:`${F} text-right ${C} ${a==="Revenue"?"text-blue-300 bg-blue-600/10":"text-green-300 bg-green-600/10"}`,style:w,children:["$",(a==="Revenue"?k.revenue:k.profit).toLocaleString(void 0,{minimumFractionDigits:2})]},i.key):i.key.startsWith(g)?e.jsxs("td",{className:`${F} text-right text-gray-300 font-mono`,children:["$",k[i.key].toLocaleString(void 0,{minimumFractionDigits:2})]},i.key):e.jsx("td",{className:F},i.key)})})})]})})]})},M=()=>e.jsxs("div",{className:"md:hidden space-y-4 pb-12 px-1",children:[e.jsxs("h3",{className:"text-lg font-black text-white px-2 flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"w-1.5 h-5 bg-indigo-500 rounded-full"}),"របាយការណ៍តាម Page (",m,")"]}),I.map(a=>e.jsxs("div",{className:"bg-gray-800/40 border border-white/10 rounded-[2.5rem] p-6 shadow-xl space-y-5 animate-fade-in-up group relative overflow-hidden",children:[e.jsx("div",{className:"flex justify-between items-center border-b border-white/5 pb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden border border-gray-700 bg-gray-950 shadow-inner p-0.5",children:e.jsx("img",{src:X(a.logoUrl),className:"w-full h-full object-cover rounded-lg",alt:"",onClick:()=>c(X(a.logoUrl))})}),e.jsx("div",{className:"min-w-0",children:e.jsx("h4",{className:"text-base font-black text-white truncate leading-tight uppercase tracking-tight",children:a.pageName})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl border border-white/5",children:[e.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1.5",children:"ចំណូលសរុប"}),e.jsxs("p",{className:"text-lg font-black text-blue-400 tracking-tighter",children:["$",a.revenue.toLocaleString()]})]}),e.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl border border-white/5",children:[e.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1.5",children:"ប្រាក់ចំណេញ"}),e.jsxs("p",{className:"text-lg font-black text-emerald-400 tracking-tighter",children:["$",a.profit.toLocaleString()]})]})]}),e.jsx("div",{className:"flex items-center justify-between px-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),e.jsxs("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:[a.orderCount," Orders"]})]})}),e.jsx("div",{className:"absolute -right-8 -bottom-8 w-24 h-24 bg-indigo-600/10 rounded-full blur-[40px] pointer-events-none group-hover:bg-indigo-600/20 transition-all duration-700"})]},a.pageName))]});return e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(ve,{label:"ចំណូលសរុប (Total Rev)",value:`$${k.revenue.toLocaleString()}`,icon:"💰",colorClass:"from-blue-600 to-indigo-500"}),e.jsx(ve,{label:"ប្រាក់ចំណេញ (Total Profit)",value:`$${k.profit.toLocaleString()}`,icon:"📈",colorClass:"from-emerald-600 to-green-500"})]}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-gray-300 rounded-xl hover:bg-gray-700 transition-colors text-xs font-bold uppercase tracking-wider",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]})}),e.jsxs("div",{className:"hidden md:block space-y-8",children:[E("Revenue","rev"),E("Profit","prof")]}),e.jsx(M,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 pb-10",children:[e.jsx("div",{className:"lg:col-span-8",children:e.jsx("div",{className:"page-card !p-4 bg-gray-800/40 border-gray-700/50",children:e.jsx(_e,{data:H,title:"Top Pages (Revenue)"})})}),e.jsxs("div",{className:"lg:col-span-4 flex flex-col justify-center page-card !p-5 bg-gray-800/30 border-gray-700/50",children:[e.jsxs("h3",{className:"text-sm font-black text-gray-400 uppercase tracking-widest flex items-center gap-2 mb-6",children:[e.jsx("span",{className:"w-1.5 h-4 bg-indigo-500 rounded-full"}),"សង្ខេប"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between border-b border-white/5 pb-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"ចំនួន Page:"}),e.jsx("span",{className:"text-white font-black text-sm",children:k.pagesCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"មធ្យមភាគ/Page:"}),e.jsxs("span",{className:"text-blue-400 font-black text-sm",children:["$",(k.revenue/(k.pagesCount||1)).toLocaleString(void 0,{maximumFractionDigits:0})]})]})]})]})]})]})},st=({team:l,onAdd:o})=>{const[m,n]=r.useState([]),[c,v]=r.useState([]),[R,x]=r.useState(!0),[L,T]=r.useState(""),[P,N]=r.useState(!1),[j,t]=r.useState("this_month"),[$,W]=r.useState(new Date().toISOString().split("T")[0]),[_,B]=r.useState(new Date().toISOString().split("T")[0]),I=r.useMemo(()=>new Set(["index","orderId","customerName","productInfo","location","pageInfo","total","shippingService","status","date","print"]),[]);r.useEffect(()=>{(async()=>{x(!0);try{const f=await(await fetch(`${Ne}/api/admin/all-orders`)).json();if(f.status==="success"){const i=(Array.isArray(f.data)?f.data.filter(F=>F!==null):[]).map(F=>{let C=[];try{F["Products (JSON)"]&&(C=JSON.parse(F["Products (JSON)"]))}catch{}return{...F,Products:C}});v(i);const D=i.filter(F=>(F.Team||"").trim()===(l||"").trim());n(D.sort((F,C)=>new Date(C.Timestamp).getTime()-new Date(F.Timestamp).getTime()))}}catch(g){console.error(g)}finally{x(!1)}})()},[l]);const k=a=>{const g=new Date,f=new Date(g.getFullYear(),g.getMonth(),g.getDate());let y=null,i=new Date;switch(a){case"today":y=f;break;case"yesterday":y=new Date(f),y.setDate(f.getDate()-1),i=new Date(f),i.setMilliseconds(-1);break;case"this_week":const D=g.getDay();y=new Date(f),y.setDate(f.getDate()-(D===0?6:D-1));break;case"this_month":y=new Date(g.getFullYear(),g.getMonth(),1);break;case"custom":y=new Date($+"T00:00:00"),i=new Date(_+"T23:59:59");break}return{start:y,end:i}},A=r.useMemo(()=>{const{start:a,end:g}=k(j);return m.filter(f=>{const y=new Date(f.Timestamp);if(a&&y<a||g&&y>g)return!1;if(L.trim()){const i=L.toLowerCase();return f["Order ID"].toLowerCase().includes(i)||(f["Customer Name"]||"").toLowerCase().includes(i)||(f["Customer Phone"]||"").includes(i)}return!0})},[m,L,j,$,_]),H=r.useMemo(()=>A.reduce((a,g)=>a+(Number(g["Grand Total"])||0),0),[A]),E=r.useMemo(()=>{const{start:a,end:g}=k(j),f=c.filter(i=>{const D=new Date(i.Timestamp);return!(a&&D<a||g&&D>g)}),y={};return f.forEach(i=>{const D=(i.Team||"Unassigned").trim();y[D]=(y[D]||0)+(Number(i["Grand Total"])||0)}),Object.entries(y).map(([i,D])=>({name:i,revenue:D})).sort((i,D)=>D.revenue-i.revenue).slice(0,3)},[c,j,$,_]),M=r.useMemo(()=>{switch(j){case"today":return"ថ្ងៃនេះ";case"yesterday":return"ម្សិលមិញ";case"this_week":return"សប្តាហ៍នេះ";case"this_month":return"ខែនេះ";case"custom":return"តាមកំណត់";default:return""}},[j]);return R?e.jsxs("div",{className:"flex flex-col justify-center items-center h-96 gap-4",children:[e.jsx(xe,{size:"lg"}),e.jsx("p",{className:"text-[10px] font-black text-blue-500 uppercase tracking-[0.4em] animate-pulse",children:"Initializing Data Stream..."})]}):P?e.jsx("div",{className:"animate-fade-in p-2",children:e.jsx(tt,{orders:m,onBack:()=>N(!1),team:l})}):e.jsxs("div",{className:"space-y-6 flex flex-col min-h-screen",children:[e.jsx("style",{children:`
                .hide-scrollbar::-webkit-scrollbar { display: none; }
                .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-5 bg-blue-500 rounded-full"}),e.jsx("h3",{className:"text-xs font-black text-white uppercase tracking-widest",children:"តារាងក្រុមឆ្នើម"})]}),e.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase",children:M})]}),e.jsx("div",{className:"flex overflow-x-auto gap-4 px-2 pb-4 hide-scrollbar snap-x",children:E.map((a,g)=>e.jsxs("div",{className:"flex-shrink-0 w-[240px] sm:w-[300px] snap-center bg-gray-900/60 backdrop-blur-xl border border-white/5 p-5 rounded-[2rem] flex items-center gap-4 relative overflow-hidden",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-2xl border ${g===0?"bg-yellow-500/20 text-yellow-500 border-yellow-500/30":g===1?"bg-gray-400/20 text-gray-300 border-gray-400/30":"bg-orange-600/20 text-orange-500 border-orange-600/30"}`,children:g===0?"🥇":g===1?"🥈":"🥉"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"text-sm font-black text-white truncate uppercase tracking-tighter",children:a.name}),e.jsxs("p",{className:"text-lg font-black text-blue-400",children:["$",a.revenue.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),e.jsx("div",{className:`absolute -right-4 -bottom-4 w-20 h-20 rounded-full blur-3xl opacity-10 ${g===0?"bg-yellow-500":g===1?"bg-gray-400":"bg-orange-600"}`})]},a.name))})]}),e.jsxs("div",{className:"bg-gray-900/60 backdrop-blur-3xl p-4 rounded-[2rem] border border-white/5 space-y-4 shadow-2xl mx-1",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex items-center gap-1 overflow-x-auto hide-scrollbar bg-black/40 p-1 rounded-xl border border-white/5",children:["today","this_week","this_month","custom"].map(a=>e.jsx("button",{onClick:()=>t(a),className:`flex-shrink-0 px-4 py-2 text-[10px] font-black uppercase rounded-lg transition-all ${j===a?"bg-blue-600 text-white shadow-lg shadow-blue-600/40":"text-gray-500"}`,children:a==="today"?"ថ្ងៃនេះ":a==="this_week"?"សប្តាហ៍នេះ":a==="this_month"?"ខែនេះ":"កំណត់"},a))}),e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest",children:"ប្រតិបត្តិការណ៍"}),e.jsxs("span",{className:"text-lg font-black text-white",children:[A.length," ",e.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"Orders"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-[9px] font-black text-blue-500 uppercase tracking-widest",children:"ទឹកប្រាក់សរុប"}),e.jsxs("p",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-blue-200 to-blue-400",children:["$",H.toLocaleString(void 0,{minimumFractionDigits:0})]})]})]}),e.jsxs("button",{onClick:()=>N(!0),className:"w-full py-3 bg-indigo-600/10 border border-indigo-500/30 text-indigo-400 rounded-xl font-black uppercase text-[10px] tracking-widest hover:bg-indigo-600 hover:text-white transition-all flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"មើលរបាយការណ៍ Page (Page Report)"]})]}),j==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 animate-fade-in-down",children:[e.jsx("input",{type:"date",value:$,onChange:a=>W(a.target.value),className:"bg-gray-800 border-none text-[10px] font-black text-white rounded-lg p-2"}),e.jsx("input",{type:"date",value:_,onChange:a=>B(a.target.value),className:"bg-gray-800 border-none text-[10px] font-black text-white rounded-lg p-2"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"ស្វែងរកតាម ID, ឈ្មោះ, ឬទូរស័ព្ទ...",value:L,onChange:a=>T(a.target.value),className:"w-full bg-black/40 border border-gray-800 rounded-xl py-3 pl-10 pr-4 text-xs font-bold text-white placeholder:text-gray-700 focus:border-blue-500/50 transition-all"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),e.jsx("div",{className:"px-1",children:A.length===0?e.jsx("div",{className:"text-center py-20 bg-gray-800/10 rounded-[2rem] border-2 border-dashed border-gray-800/50",children:e.jsx("p",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest italic",children:"រកមិនឃើញទិន្នន័យ"})}):e.jsx("div",{className:"animate-fade-in-up",children:e.jsx(Ae,{orders:A,showActions:!1,visibleColumns:I})})}),e.jsx("div",{className:"md:hidden fixed bottom-6 left-6 right-6 z-40",children:e.jsxs("div",{className:"bg-gray-900/95 backdrop-blur-3xl p-4 rounded-3xl shadow-2xl border border-white/10 flex justify-between items-center ring-1 ring-white/5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[8px] font-black text-blue-500 uppercase tracking-[0.2em] mb-0.5",children:"Session Revenue"}),e.jsxs("span",{className:"text-white font-black text-xl tracking-tighter",children:["$",H.toLocaleString()]})]}),e.jsx("button",{onClick:o,className:"bg-blue-600 hover:bg-blue-500 text-white p-4 rounded-2xl shadow-lg shadow-blue-600/40 active:scale-90 transition-all",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 4v16m8-8H4",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}),e.jsx("div",{className:"h-32 md:hidden"})]})},lt=({onBackToRoleSelect:l})=>{const{currentUser:o,setChatVisibility:m}=r.useContext(ge),[n,c]=r.useState("list"),[v,R]=De("team",""),x=r.useMemo(()=>((o==null?void 0:o.Team)||"").split(",").map(L=>L.trim()).filter(Boolean),[o]);return r.useEffect(()=>{m(n!=="create")},[n,m]),r.useEffect(()=>{x.length===1&&!v&&R(x[0])},[x,v,R]),x.length===0?e.jsxs("div",{className:"page-card text-center p-12 mt-20 max-w-lg mx-auto bg-gray-900/60 backdrop-blur-xl border border-white/5 rounded-[3rem]",children:[e.jsxs("h2",{className:"text-xl font-black text-white mb-4",children:["សួស្តី, ",o==null?void 0:o.FullName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"គណនីរបស់អ្នកមិនទាន់មានក្រុមការងារនៅឡើយទេ។"}),e.jsx("button",{onClick:l,className:"btn btn-secondary mt-8 w-full rounded-2xl font-black",children:"ត្រឡប់ក្រោយ"})]}):v?n==="create"?e.jsx(et,{team:v,onSaveSuccess:()=>c("list"),onCancel:()=>c("list")}):e.jsxs("div",{className:"w-full max-w-[100rem] mx-auto p-2 sm:p-4 animate-fade-in min-h-screen relative overflow-x-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4 px-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl sm:text-4xl font-black text-white italic tracking-tighter leading-none",children:"MY ORDERS"}),e.jsx("div",{className:"h-6 w-px bg-white/10"}),e.jsx("span",{className:"text-blue-500 font-black text-xs uppercase tracking-widest",children:v})]}),e.jsx("div",{className:"flex gap-2",children:x.length>1&&e.jsxs("button",{onClick:()=>R(""),className:"text-[9px] font-black uppercase text-gray-500 hover:text-blue-400 transition-colors flex items-center gap-1.5 bg-gray-800/50 px-3 py-1.5 rounded-lg border border-white/5 active:scale-95",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",strokeWidth:3})}),"Switch Team"]})})]}),e.jsxs("button",{onClick:()=>c("create"),className:"hidden md:flex px-10 py-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-black uppercase tracking-widest text-xs rounded-2xl shadow-xl shadow-blue-900/20 transition-all active:scale-95 items-center gap-3 border border-blue-400/20",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M12 4v16m8-8H4"})}),"Create Order"]})]}),e.jsx("div",{className:"relative",children:e.jsx(st,{team:v,onAdd:()=>c("create")})})]}):e.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 mt-6 animate-fade-in flex flex-col items-center",children:[e.jsxs("div",{className:"text-center space-y-3 mb-10",children:[e.jsx("p",{className:"text-blue-500 font-black uppercase tracking-[0.4em] text-[10px]",children:"Access Identification"}),e.jsx("h2",{className:"text-4xl sm:text-5xl font-black text-white tracking-tighter italic",children:"ជ្រើសរើសក្រុមការងារ"}),e.jsx("div",{className:"w-16 h-1.5 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full mx-auto shadow-[0_0_15px_rgba(59,130,246,0.5)]"})]}),e.jsx("div",{className:"w-full space-y-4 max-w-md",children:x.map((L,T)=>e.jsxs("button",{onClick:()=>R(L),className:"group relative w-full overflow-hidden bg-gray-900/60 backdrop-blur-3xl border border-white/5 rounded-[2.5rem] p-6 hover:border-blue-500/40 transition-all duration-500 active:scale-[0.97] shadow-xl flex items-center gap-6",children:[e.jsxs("div",{className:"absolute top-4 left-6",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-ping opacity-75"}),e.jsx("div",{className:"absolute top-0 w-1.5 h-1.5 bg-emerald-500 rounded-full"})]}),e.jsx("div",{className:"relative z-10 w-16 h-16 sm:w-20 sm:h-20 bg-gray-800 rounded-3xl flex items-center justify-center border border-white/5 shadow-inner group-hover:bg-blue-600/10 group-hover:border-blue-500/20 transition-all duration-500 group-hover:rotate-6",children:e.jsx("span",{className:"text-3xl sm:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-br from-blue-400 to-blue-600",children:L.charAt(0)})}),e.jsxs("div",{className:"relative z-10 flex-grow text-left",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white uppercase tracking-tight mb-1",children:L}),e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-widest opacity-60",children:["Team Operational Node ",T+1]})]}),e.jsx("div",{className:"relative z-10 p-3 bg-white/5 rounded-2xl group-hover:bg-blue-600 group-hover:text-white transition-all text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M9 5l7 7-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/0 via-blue-600/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-blue-500 opacity-0 group-hover:opacity-5 blur-[40px] transition-opacity"})]},L))}),e.jsxs("button",{onClick:l,className:"mt-12 flex items-center gap-2 text-[10px] font-black text-gray-600 uppercase tracking-widest hover:text-blue-500 transition-all active:scale-95",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M15 19l-7-7 7-7",strokeLinecap:"round",strokeLinejoin:"round"})}),"ត្រឡប់ទៅតួនាទី"]})]})};export{lt as default};
