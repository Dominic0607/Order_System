const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-BhWgyJ9m.js","assets/index-OwyUZPxa.js","assets/index-BXlZ-H93.css","assets/imageCompressor-D5vYYzIg.js"])))=>i.map(i=>d[i]);
import{j as h,S as Pr,r as be,c as st,_ as Il,g as Hh,b as Vh,A as go,M as tc,W as ti,f as Gh,L as zh}from"./index-OwyUZPxa.js";import{c as Wh}from"./imageCompressor-D5vYYzIg.js";const Qs=({label:t,value:e,icon:n,colorClass:r})=>h.jsxs("div",{className:"relative group overflow-hidden bg-gray-800/30 backdrop-blur-xl border border-white/5 p-6 rounded-[2rem] transition-all duration-500 hover:bg-gray-800/50 hover:border-white/10 hover:shadow-2xl",children:[h.jsxs("div",{className:"relative z-10 flex justify-between items-center gap-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-400 text-xs lg:text-sm font-black uppercase tracking-widest mb-1.5 transition-all",children:t}),h.jsx("h3",{className:"text-3xl lg:text-4xl 2xl:text-5xl font-black text-white tracking-tighter transition-all",children:e})]}),h.jsx("div",{className:`w-12 h-12 lg:w-16 lg:h-16 rounded-2xl bg-gradient-to-br ${r} flex items-center justify-center text-white text-xl lg:text-2xl shadow-lg shadow-blue-900/20 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 flex-shrink-0`,children:n})]}),h.jsx("div",{className:`absolute -right-6 -bottom-6 w-32 h-32 lg:w-40 lg:h-40 rounded-full bg-gradient-to-br ${r} opacity-0 group-hover:opacity-10 blur-[40px] transition-opacity duration-700`})]});var $h={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Jh,Yh;function Kh(){return{geminiUrl:Jh,vertexUrl:Yh}}function Xh(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=Kh();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rr{}function De(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const p=l[c];f(p,e.slice(o+1),n[c])}else for(const c of l)f(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];f(l[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function u(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(a=>u(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Qh(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){const c=o[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}El(t,i,o,0,s)}}function El(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const l of a[s])El(l,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(const c of a)l[c]=s[c];for(const[c,p]of Object.entries(l)){const m=[];for(const y of n.slice(r))y==="*"?m.push(c):m.push(y);f(s,m,p)}for(const c of a)delete s[c]}}else{const s=t;o in s&&El(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nc(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zh(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["operationName"],n);const r=u(t,["resourceName"]);return r!=null&&f(e,["_url","resourceName"],r),e}function ep(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response","generateVideoResponse"]);return s!=null&&f(e,["response"],np(s)),e}function tp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],rp(s)),e}function np(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ip(s))),f(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function rp(t){const e={},n=u(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>op(s))),f(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function ip(t){const e={},n=u(t,["video"]);return n!=null&&f(e,["video"],dp(n)),e}function op(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],fp(n)),e}function sp(t){const e={},n=u(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function ap(t){const e={},n=u(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function lp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],cp(s)),e}function cp(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&f(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function Gd(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],up(s)),e}function up(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&f(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function dp(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["uri"],n);const r=u(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],nc(r));const i=u(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function fp(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],nc(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Hc;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Hc||(Hc={}));var Vc;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Vc||(Vc={}));var Gc;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Gc||(Gc={}));var Zr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Zr||(Zr={}));var zc;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zc||(zc={}));var Wc;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Wc||(Wc={}));var $c;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})($c||($c={}));var Jc;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Jc||(Jc={}));var Yc;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Yc||(Yc={}));var Kc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Kc||(Kc={}));var Xc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Xc||(Xc={}));var Qc;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Qc||(Qc={}));var Zc;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Zc||(Zc={}));var eu;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(eu||(eu={}));var tu;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(tu||(tu={}));var nu;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(nu||(nu={}));var ru;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ru||(ru={}));var iu;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(iu||(iu={}));var ou;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ou||(ou={}));var su;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(su||(su={}));var au;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(au||(au={}));var ha;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ha||(ha={}));var lu;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(lu||(lu={}));var cu;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(cu||(cu={}));var uu;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(uu||(uu={}));var Pl;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Pl||(Pl={}));var du;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(du||(du={}));var fu;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(fu||(fu={}));var hu;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(hu||(hu={}));var pu;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(pu||(pu={}));var gu;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(gu||(gu={}));var mu;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(mu||(mu={}));var vu;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(vu||(vu={}));var yu;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(yu||(yu={}));var xu;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(xu||(xu={}));var bu;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(bu||(bu={}));var wu;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(wu||(wu={}));var Nu;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Nu||(Nu={}));var Su;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Su||(Su={}));var _u;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(_u||(_u={}));var Au;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Au||(Au={}));var Cu;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Cu||(Cu={}));var Tu;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Tu||(Tu={}));var ku;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(ku||(ku={}));var Iu;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Iu||(Iu={}));var Eu;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Eu||(Eu={}));var Pu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Pu||(Pu={}));var Lu;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Lu||(Lu={}));var Ru;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ru||(Ru={}));var Mu;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Mu||(Mu={}));var Du;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Du||(Du={}));var Fu;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Fu||(Fu={}));var ju;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ju||(ju={}));var Uu;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Uu||(Uu={}));var uo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(uo||(uo={}));class Ll{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Yo{get text(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",p=!1;const m=[];for(const y of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[v,N]of Object.entries(y))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(N!==null||N!==void 0)&&m.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;p=!0,c+=y.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?c:void 0}get data(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const p=[];for(const m of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,v]of Object.entries(m))y!=="inlineData"&&(v!==null||v!==void 0)&&p.push(y);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,o,s,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(c=p==null?void 0:p[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,o,s,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(c=p==null?void 0:p[0])===null||c===void 0?void 0:c.output}}class Bu{}class qu{}class hp{}class pp{}class gp{}class mp{}class Ou{}class Hu{}class Vu{}class vp{}class pa{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new pa;let i;const o=e;return n?i=tp(o):i=ep(o),Object.assign(r,i),r}}class Gu{}class zu{}class Wu{}class $u{}class yp{}class xp{}class bp{}class rc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new rc,o=lp(e);return Object.assign(r,o),r}}class wp{}class Np{}class Sp{}class Ju{}class _p{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Ap{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ic{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ic,o=Gd(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function zd(t,e){const n=pt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Wd(t){return Array.isArray(t)?t.map(e=>ga(e)):[ga(t)]}function ga(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function $d(t){const e=ga(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Jd(t){const e=ga(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Yu(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Yd(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Yu(e)):[Yu(t)]}function Rl(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Ku(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Xu(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function dn(t){if(t==null)throw new Error("ContentUnion is required");return Rl(t)?t:{role:"user",parts:Yd(t)}}function oc(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=dn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=dn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>dn(n)):[dn(e)]}function Un(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Ku(t)||Xu(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dn(t)]}const e=[],n=[],r=Rl(t[0]);for(const i of t){const o=Rl(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Ku(i)||Xu(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Yd(n)}),e}function Cp(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Zr).includes(n[0].toUpperCase())?n[0].toUpperCase():Zr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Zr).includes(r.toUpperCase())?r.toUpperCase():Zr.TYPE_UNSPECIFIED})}}function ho(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&Cp(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Zr).includes(a.toUpperCase())?a.toUpperCase():Zr.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=ho(a);else if(r.includes(s)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(ho(c))}e[s]=l}else if(i.includes(s)){const l={};for(const[c,p]of Object.entries(a))l[c]=ho(p);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function sc(t){return ho(t)}function ac(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function lc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function mo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ho(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ho(e.response));return t}function vo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Tp(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Mr(t,e){if(typeof e!="string")throw new Error("name must be a string");return Tp(t,e,"cachedContents")}function Kd(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function oi(t){return nc(t)}function kp(t){return t!=null&&typeof t=="object"&&"name"in t}function Ip(t){return t!=null&&typeof t=="object"&&"video"in t}function Ep(t){return t!=null&&typeof t=="object"&&"uri"in t}function Xd(t){var e;let n;if(kp(t)&&(n=t.name),!(Ep(t)&&(n=t.uri,n===void 0))&&!(Ip(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Qd(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Zd(t){for(const e of["models","tunedModels","publisherModels"])if(Pp(t,e))return t[e];return[]}function Pp(t,e){return t!==null&&typeof t=="object"&&e in t}function Lp(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Rp(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=Lp(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function ef(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Mp(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function tf(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function yo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function nf(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dp(t){const e={},n=u(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const r=u(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>g0(s))),f(e,["inlinedResponses"],o)}const i=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["inlinedEmbedContentResponses"],o)}return e}function Fp(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const r=u(t,["gcsDestination","outputUriPrefix"]);r!=null&&f(e,["gcsUri"],r);const i=u(t,["bigqueryDestination","outputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function jp(t){const e={},n=u(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const r=u(t,["gcsUri"]);r!=null&&f(e,["gcsDestination","outputUriPrefix"],r);const i=u(t,["bigqueryUri"]);if(i!=null&&f(e,["bigqueryDestination","outputUri"],i),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ua(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata","displayName"]);r!=null&&f(e,["displayName"],r);const i=u(t,["metadata","state"]);i!=null&&f(e,["state"],nf(i));const o=u(t,["metadata","createTime"]);o!=null&&f(e,["createTime"],o);const s=u(t,["metadata","endTime"]);s!=null&&f(e,["endTime"],s);const a=u(t,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);const l=u(t,["metadata","model"]);l!=null&&f(e,["model"],l);const c=u(t,["metadata","output"]);return c!=null&&f(e,["dest"],Dp(tf(c))),e}function Ml(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=u(t,["state"]);i!=null&&f(e,["state"],nf(i));const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["createTime"]);s!=null&&f(e,["createTime"],s);const a=u(t,["startTime"]);a!=null&&f(e,["startTime"],a);const l=u(t,["endTime"]);l!=null&&f(e,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const p=u(t,["model"]);p!=null&&f(e,["model"],p);const m=u(t,["inputConfig"]);m!=null&&f(e,["src"],Up(m));const y=u(t,["outputConfig"]);y!=null&&f(e,["dest"],Fp(tf(y)));const v=u(t,["completionStats"]);return v!=null&&f(e,["completionStats"],v),e}function Up(t){const e={},n=u(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const r=u(t,["gcsSource","uris"]);r!=null&&f(e,["gcsUri"],r);const i=u(t,["bigquerySource","inputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function Bp(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=u(e,["fileName"]);r!=null&&f(n,["fileName"],r);const i=u(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>p0(t,s))),f(n,["requests","requests"],o)}return n}function qp(t){const e={},n=u(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const r=u(t,["gcsUri"]);r!=null&&f(e,["gcsSource","uris"],r);const i=u(t,["bigqueryUri"]);if(i!=null&&f(e,["bigquerySource","inputUri"],i),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Op(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Hp(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],yo(t,r)),n}function Vp(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],yo(t,r)),n}function Gp(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],n);const r=u(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],zp(r));const i=u(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const o=u(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const s=u(t,["avgLogprobs"]);s!=null&&f(e,["avgLogprobs"],s);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&f(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const p=u(t,["safetyRatings"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(v=>v)),f(e,["safetyRatings"],y)}const m=u(t,["urlContextMetadata"]);return m!=null&&f(e,["urlContextMetadata"],m),e}function zp(t){const e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function rf(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>N0(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function Wp(t,e){const n={},r=u(t,["displayName"]);if(e!==void 0&&r!=null&&f(e,["batch","displayName"],r),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function $p(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=u(t,["dest"]);return e!==void 0&&i!=null&&f(e,["outputConfig"],jp(Mp(i))),n}function Qu(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["src"]);i!=null&&f(n,["batch","inputConfig"],Bp(t,ef(t,i)));const o=u(e,["config"]);return o!=null&&Wp(o,n),n}function Jp(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["model"],pt(t,r));const i=u(e,["src"]);i!=null&&f(n,["inputConfig"],qp(ef(t,i)));const o=u(e,["config"]);return o!=null&&$p(o,n),n}function Yp(t,e){const n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["batch","displayName"],r),n}function Kp(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["src"]);i!=null&&f(n,["batch","inputConfig"],r0(t,i));const o=u(e,["config"]);return o!=null&&Yp(o,n),n}function Xp(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],yo(t,r)),n}function Qp(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],yo(t,r)),n}function Zp(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);return o!=null&&f(e,["error"],o),e}function e0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);return o!=null&&f(e,["error"],o),e}function t0(t,e){const n={},r=u(e,["contents"]);if(r!=null){let o=oc(t,r);Array.isArray(o)&&(o=o.map(s=>s)),f(n,["requests[]","request","content"],o)}const i=u(e,["config"]);return i!=null&&(f(n,["_self"],n0(i,n)),Qh(n,{"requests[].*":"requests[].request.*"})),n}function n0(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const o=u(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function r0(t,e){const n={},r=u(e,["fileName"]);r!=null&&f(n,["file_name"],r);const i=u(e,["inlinedRequests"]);return i!=null&&f(n,["requests"],t0(t,i)),n}function i0(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function o0(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function s0(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&f(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function a0(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],rf(dn(i)));const o=u(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&f(r,["topP"],s);const a=u(e,["topK"]);a!=null&&f(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);const p=u(e,["stopSequences"]);p!=null&&f(r,["stopSequences"],p);const m=u(e,["responseLogprobs"]);m!=null&&f(r,["responseLogprobs"],m);const y=u(e,["logprobs"]);y!=null&&f(r,["logprobs"],y);const v=u(e,["presencePenalty"]);v!=null&&f(r,["presencePenalty"],v);const N=u(e,["frequencyPenalty"]);N!=null&&f(r,["frequencyPenalty"],N);const A=u(e,["seed"]);A!=null&&f(r,["seed"],A);const S=u(e,["responseMimeType"]);S!=null&&f(r,["responseMimeType"],S);const w=u(e,["responseSchema"]);w!=null&&f(r,["responseSchema"],sc(w));const _=u(e,["responseJsonSchema"]);if(_!=null&&f(r,["responseJsonSchema"],_),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=u(e,["safetySettings"]);if(n!==void 0&&T!=null){let z=T;Array.isArray(z)&&(z=z.map(K=>S0(K))),f(n,["safetySettings"],z)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let z=vo(D);Array.isArray(z)&&(z=z.map(K=>A0(mo(K)))),f(n,["tools"],z)}const k=u(e,["toolConfig"]);if(n!==void 0&&k!=null&&f(n,["toolConfig"],_0(k)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=u(e,["cachedContent"]);n!==void 0&&F!=null&&f(n,["cachedContent"],Mr(t,F));const P=u(e,["responseModalities"]);P!=null&&f(r,["responseModalities"],P);const M=u(e,["mediaResolution"]);M!=null&&f(r,["mediaResolution"],M);const j=u(e,["speechConfig"]);if(j!=null&&f(r,["speechConfig"],ac(j)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=u(e,["thinkingConfig"]);$!=null&&f(r,["thinkingConfig"],$);const I=u(e,["imageConfig"]);I!=null&&f(r,["imageConfig"],h0(I));const E=u(e,["enableEnhancedCivicAnswers"]);return E!=null&&f(r,["enableEnhancedCivicAnswers"],E),r}function l0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Gp(c))),f(e,["candidates"],l)}const i=u(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const s=u(t,["responseId"]);s!=null&&f(e,["responseId"],s);const a=u(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function c0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],yo(t,r)),n}function u0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],yo(t,r)),n}function d0(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function f0(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function h0(t){const e={},n=u(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const r=u(t,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function p0(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["request","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let a=Un(i);Array.isArray(a)&&(a=a.map(l=>rf(l))),f(n,["request","contents"],a)}const o=u(e,["metadata"]);o!=null&&f(n,["metadata"],o);const s=u(e,["config"]);return s!=null&&f(n,["request","generationConfig"],a0(t,s,u(n,["request"],{}))),n}function g0(t){const e={},n=u(t,["response"]);n!=null&&f(e,["response"],l0(n));const r=u(t,["error"]);return r!=null&&f(e,["error"],r),e}function m0(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);if(e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function v0(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),n}function y0(t){const e={},n=u(t,["config"]);return n!=null&&m0(n,e),e}function x0(t){const e={},n=u(t,["config"]);return n!=null&&v0(n,e),e}function b0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>ua(s))),f(e,["batchJobs"],o)}return e}function w0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ml(s))),f(e,["batchJobs"],o)}return e}function N0(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],i0(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],o0(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],Op(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const p=u(t,["thought"]);p!=null&&f(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&f(e,["videoMetadata"],y),e}function S0(t){const e={},n=u(t,["category"]);if(n!=null&&f(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function _0(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],s0(r)),e}function A0(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],d0(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],f0(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Lr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Lr||(Lr={}));class Ti{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C0 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ti(Lr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Qu(this.apiClient,e),r=n._url,i=De("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const p of l){const m=Object.assign({},p);if(m.systemInstruction){const y=m.systemInstruction;delete m.systemInstruction;const v=m.request;v.systemInstruction=y,m.request=v}c.push(m)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Jp(this.apiClient,e);return a=De("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>Ml(p))}else{const c=Qu(this.apiClient,e);return a=De("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>ua(p))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Kp(this.apiClient,e);return o=De("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>ua(l))}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=u0(this.apiClient,e);return a=De("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>Ml(p))}else{const c=c0(this.apiClient,e);return a=De("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>ua(p))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const l=Vp(this.apiClient,e);s=De("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=Hp(this.apiClient,e);s=De("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=x0(e);return a=De("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=w0(p),y=new Ju;return Object.assign(y,m),y})}else{const c=y0(e);return a=De("batches",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=b0(p),y=new Ju;return Object.assign(y,m),y})}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Qp(this.apiClient,e);return a=De("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>e0(p))}else{const c=Xp(this.apiClient,e);return a=De("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>Zp(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T0(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Zu(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>K0(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function k0(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=u(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const o=u(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const s=u(t,["contents"]);if(e!==void 0&&s!=null){let p=Un(s);Array.isArray(p)&&(p=p.map(m=>Zu(m))),f(e,["contents"],p)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],Zu(dn(a)));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>Q0(m))),f(e,["tools"],p)}const c=u(t,["toolConfig"]);if(e!==void 0&&c!=null&&f(e,["toolConfig"],X0(c)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function I0(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=u(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const o=u(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const s=u(t,["contents"]);if(e!==void 0&&s!=null){let m=Un(s);Array.isArray(m)&&(m=m.map(y=>y)),f(e,["contents"],m)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],dn(a));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>Z0(y))),f(e,["tools"],m)}const c=u(t,["toolConfig"]);e!==void 0&&c!=null&&f(e,["toolConfig"],c);const p=u(t,["kmsKeyName"]);return e!==void 0&&p!=null&&f(e,["encryption_spec","kmsKeyName"],p),n}function E0(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["model"],zd(t,r));const i=u(e,["config"]);return i!=null&&k0(i,n),n}function P0(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["model"],zd(t,r));const i=u(e,["config"]);return i!=null&&I0(i,n),n}function L0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],Mr(t,r)),n}function R0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],Mr(t,r)),n}function M0(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function D0(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function F0(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function j0(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function U0(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&f(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function B0(t){const e={},n=u(t,["description"]);n!=null&&f(e,["description"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["parameters"]);i!=null&&f(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&f(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function q0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],Mr(t,r)),n}function O0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],Mr(t,r)),n}function H0(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function V0(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function G0(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function z0(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function W0(t){const e={},n=u(t,["config"]);return n!=null&&G0(n,e),e}function $0(t){const e={},n=u(t,["config"]);return n!=null&&z0(n,e),e}function J0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["cachedContents"],o)}return e}function Y0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["cachedContents"],o)}return e}function K0(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],F0(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],j0(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],T0(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const p=u(t,["thought"]);p!=null&&f(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&f(e,["videoMetadata"],y),e}function X0(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],U0(r)),e}function Q0(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],H0(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],V0(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function Z0(t){const e={},n=u(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(y=>B0(y))),f(e,["functionDeclarations"],m)}const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);const p=u(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function eg(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=u(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function tg(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=u(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function ng(t,e){const n={},r=u(e,["name"]);r!=null&&f(n,["_url","name"],Mr(t,r));const i=u(e,["config"]);return i!=null&&eg(i,n),n}function rg(t,e){const n={},r=u(e,["name"]);r!=null&&f(n,["_url","name"],Mr(t,r));const i=u(e,["config"]);return i!=null&&tg(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ig extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ti(Lr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=P0(this.apiClient,e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const c=E0(this.apiClient,e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=O0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const c=q0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=R0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=D0(p),y=new Wu;return Object.assign(y,m),y})}else{const c=L0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=M0(p),y=new Wu;return Object.assign(y,m),y})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=rg(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const c=ng(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=$0(e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Y0(p),y=new $u;return Object.assign(y,m),y})}else{const c=W0(e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=J0(p),y=new $u;return Object.assign(y,m),y})}}}function ma(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ed(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qe(t){return this instanceof Qe?(this.v=t,this):new Qe(t)}function er(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(N){return Promise.resolve(N).then(v,m)}}function a(v,N){r[v]&&(i[v]=function(A){return new Promise(function(S,w){o.push([v,A,S,w])>1||l(v,A)})},N&&(i[v]=N(i[v])))}function l(v,N){try{c(r[v](N))}catch(A){y(o[0][3],A)}}function c(v){v.value instanceof Qe?Promise.resolve(v.value.v).then(p,m):y(o[0][2],v)}function p(v){l("next",v)}function m(v){l("throw",v)}function y(v,N){v(N),o.shift(),o.length&&l(o[0][0],o[0][1])}}function tr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ed=="function"?ed(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function og(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:of(n)}function of(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function sg(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function td(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!of(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class ag{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new lg(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class lg{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),sg(o)}async sendMessage(e){var n;await this.sendPromise;const r=dn(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const l=await i,c=(s=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,p=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let y=[];p!=null&&(y=(a=p.slice(m))!==null&&a!==void 0?a:[]);const v=c?[c]:[];this.recordHistory(r,v,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=dn(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?td(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return er(this,arguments,function*(){var i,o,s,a,l,c;const p=[];try{for(var m=!0,y=tr(e),v;v=yield Qe(y.next()),i=v.done,!i;m=!0){a=v.value,m=!1;const N=a;if(og(N)){const A=(c=(l=N.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;A!==void 0&&p.push(A)}yield yield Qe(N)}}catch(N){o={error:N}}finally{try{!m&&!i&&(s=y.return)&&(yield Qe(s.call(y)))}finally{if(o)throw o.error}}this.recordHistory(n,p)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...td(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ba extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ba.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cg(t){const e={},n=u(t,["file"]);return n!=null&&f(e,["file"],n),e}function ug(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function dg(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","file"],Xd(n)),e}function fg(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function hg(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","file"],Xd(n)),e}function pg(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function gg(t){const e={},n=u(t,["config"]);return n!=null&&pg(n,e),e}function mg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vg extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ti(Lr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gg(e);return o=De("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=mg(l),p=new wp;return Object.assign(p,c),p})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=cg(e);return o=De("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=ug(l),p=new Np;return Object.assign(p,c),p})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hg(e);return o=De("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=dg(e);return o=De("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=fg(l),p=new Sp;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function da(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function yg(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Mg(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function xg(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function bg(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wg(t){const e={},n=u(t,["description"]);n!=null&&f(e,["description"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["parameters"]);i!=null&&f(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&f(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Ng(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const r=u(t,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const i=u(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const o=u(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const s=u(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);const a=u(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const p=u(t,["mediaResolution"]);p!=null&&f(e,["mediaResolution"],p);const m=u(t,["presencePenalty"]);m!=null&&f(e,["presencePenalty"],m);const y=u(t,["responseLogprobs"]);y!=null&&f(e,["responseLogprobs"],y);const v=u(t,["responseMimeType"]);v!=null&&f(e,["responseMimeType"],v);const N=u(t,["responseModalities"]);N!=null&&f(e,["responseModalities"],N);const A=u(t,["responseSchema"]);A!=null&&f(e,["responseSchema"],A);const S=u(t,["routingConfig"]);S!=null&&f(e,["routingConfig"],S);const w=u(t,["seed"]);w!=null&&f(e,["seed"],w);const _=u(t,["speechConfig"]);_!=null&&f(e,["speechConfig"],_);const T=u(t,["stopSequences"]);T!=null&&f(e,["stopSequences"],T);const D=u(t,["temperature"]);D!=null&&f(e,["temperature"],D);const k=u(t,["thinkingConfig"]);k!=null&&f(e,["thinkingConfig"],k);const F=u(t,["topK"]);F!=null&&f(e,["topK"],F);const P=u(t,["topP"]);if(P!=null&&f(e,["topP"],P),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Sg(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function _g(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function Ag(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const p=u(t,["seed"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","seed"],p);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","speechConfig"],lc(m));const y=u(t,["thinkingConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","thinkingConfig"],y);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],v);const N=u(t,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],yg(dn(N)));const A=u(t,["tools"]);if(e!==void 0&&A!=null){let F=vo(A);Array.isArray(F)&&(F=F.map(P=>Fg(mo(P)))),f(e,["setup","tools"],F)}const S=u(t,["sessionResumption"]);e!==void 0&&S!=null&&f(e,["setup","sessionResumption"],Dg(S));const w=u(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);const _=u(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&f(e,["setup","outputAudioTranscription"],_);const T=u(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&f(e,["setup","realtimeInputConfig"],T);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&f(e,["setup","contextWindowCompression"],D);const k=u(t,["proactivity"]);if(e!==void 0&&k!=null&&f(e,["setup","proactivity"],k),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Cg(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],Ng(r));const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const p=u(t,["seed"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","seed"],p);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","speechConfig"],lc(m));const y=u(t,["thinkingConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","thinkingConfig"],y);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],v);const N=u(t,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],dn(N));const A=u(t,["tools"]);if(e!==void 0&&A!=null){let P=vo(A);Array.isArray(P)&&(P=P.map(M=>jg(mo(M)))),f(e,["setup","tools"],P)}const S=u(t,["sessionResumption"]);e!==void 0&&S!=null&&f(e,["setup","sessionResumption"],S);const w=u(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);const _=u(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&f(e,["setup","outputAudioTranscription"],_);const T=u(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&f(e,["setup","realtimeInputConfig"],T);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&f(e,["setup","contextWindowCompression"],D);const k=u(t,["proactivity"]);e!==void 0&&k!=null&&f(e,["setup","proactivity"],k);const F=u(t,["explicitVadSignal"]);return e!==void 0&&F!=null&&f(e,["setup","explicitVadSignal"],F),n}function Tg(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["setup","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&f(n,["config"],Ag(i,n)),n}function kg(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["setup","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&f(n,["config"],Cg(i,n)),n}function Ig(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function Eg(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["weightedPrompts"],r)}return e}function Pg(t){const e={},n=u(t,["media"]);if(n!=null){let c=Wd(n);Array.isArray(c)&&(c=c.map(p=>da(p))),f(e,["mediaChunks"],c)}const r=u(t,["audio"]);r!=null&&f(e,["audio"],da(Jd(r)));const i=u(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const o=u(t,["video"]);o!=null&&f(e,["video"],da($d(o)));const s=u(t,["text"]);s!=null&&f(e,["text"],s);const a=u(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function Lg(t){const e={},n=u(t,["media"]);if(n!=null){let c=Wd(n);Array.isArray(c)&&(c=c.map(p=>p)),f(e,["mediaChunks"],c)}const r=u(t,["audio"]);r!=null&&f(e,["audio"],Jd(r));const i=u(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const o=u(t,["video"]);o!=null&&f(e,["video"],$d(o));const s=u(t,["text"]);s!=null&&f(e,["text"],s);const a=u(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function Rg(t){const e={},n=u(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const r=u(t,["serverContent"]);r!=null&&f(e,["serverContent"],r);const i=u(t,["toolCall"]);i!=null&&f(e,["toolCall"],i);const o=u(t,["toolCallCancellation"]);o!=null&&f(e,["toolCallCancellation"],o);const s=u(t,["usageMetadata"]);s!=null&&f(e,["usageMetadata"],Ug(s));const a=u(t,["goAway"]);a!=null&&f(e,["goAway"],a);const l=u(t,["sessionResumptionUpdate"]);l!=null&&f(e,["sessionResumptionUpdate"],l);const c=u(t,["voiceActivityDetectionSignal"]);return c!=null&&f(e,["voiceActivityDetectionSignal"],c),e}function Mg(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],xg(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],bg(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],da(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const p=u(t,["thought"]);p!=null&&f(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&f(e,["videoMetadata"],y),e}function Dg(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fg(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],Sg(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],_g(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function jg(t){const e={},n=u(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(y=>wg(y))),f(e,["functionDeclarations"],m)}const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);const p=u(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function Ug(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const r=u(t,["cachedContentTokenCount"]);r!=null&&f(e,["cachedContentTokenCount"],r);const i=u(t,["candidatesTokenCount"]);i!=null&&f(e,["responseTokenCount"],i);const o=u(t,["toolUsePromptTokenCount"]);o!=null&&f(e,["toolUsePromptTokenCount"],o);const s=u(t,["thoughtsTokenCount"]);s!=null&&f(e,["thoughtsTokenCount"],s);const a=u(t,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);const l=u(t,["promptTokensDetails"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(N=>N)),f(e,["promptTokensDetails"],v)}const c=u(t,["cacheTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(N=>N)),f(e,["cacheTokensDetails"],v)}const p=u(t,["candidatesTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(N=>N)),f(e,["responseTokensDetails"],v)}const m=u(t,["toolUsePromptTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(N=>N)),f(e,["toolUsePromptTokensDetails"],v)}const y=u(t,["trafficType"]);return y!=null&&f(e,["trafficType"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bg(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function qg(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],n);const r=u(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],Og(r));const i=u(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const o=u(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const s=u(t,["avgLogprobs"]);s!=null&&f(e,["avgLogprobs"],s);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&f(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const p=u(t,["safetyRatings"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(v=>v)),f(e,["safetyRatings"],y)}const m=u(t,["urlContextMetadata"]);return m!=null&&f(e,["urlContextMetadata"],m),e}function Og(t){const e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function Hg(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let o=Un(i);Array.isArray(o)&&(o=o.map(s=>s)),f(n,["contents"],o)}return n}function Vg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["tokensInfo"],i)}return e}function Gg(t){const e={},n=u(t,["values"]);n!=null&&f(e,["values"],n);const r=u(t,["statistics"]);return r!=null&&f(e,["statistics"],zg(r)),e}function zg(t){const e={},n=u(t,["truncated"]);n!=null&&f(e,["truncated"],n);const r=u(t,["token_count"]);return r!=null&&f(e,["tokenCount"],r),e}function wa(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>e1(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function Wg(t){const e={},n=u(t,["controlType"]);n!=null&&f(e,["controlType"],n);const r=u(t,["enableControlImageComputation"]);return r!=null&&f(e,["computeControl"],r),e}function $g(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Jg(t,e){const n={},r=u(t,["systemInstruction"]);e!==void 0&&r!=null&&f(e,["systemInstruction"],dn(r));const i=u(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>cf(a))),f(e,["tools"],s)}const o=u(t,["generationConfig"]);return e!==void 0&&o!=null&&f(e,["generationConfig"],Bm(o)),n}function Yg(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=Un(i);Array.isArray(s)&&(s=s.map(a=>wa(a))),f(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&$g(o),n}function Kg(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=Un(i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&Jg(o,n),n}function Xg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["totalTokens"]);r!=null&&f(e,["totalTokens"],r);const i=u(t,["cachedContentTokenCount"]);return i!=null&&f(e,["cachedContentTokenCount"],i),e}function Qg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["totalTokens"]);return r!=null&&f(e,["totalTokens"],r),e}function Zg(t,e){const n={},r=u(e,["model"]);return r!=null&&f(n,["_url","name"],pt(t,r)),n}function em(t,e){const n={},r=u(e,["model"]);return r!=null&&f(n,["_url","name"],pt(t,r)),n}function tm(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function nm(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function rm(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=u(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const o=u(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const y=u(t,["includeRaiReason"]);e!==void 0&&y!=null&&f(e,["parameters","includeRaiReason"],y);const v=u(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const N=u(t,["outputMimeType"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","mimeType"],N);const A=u(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","compressionQuality"],A);const S=u(t,["addWatermark"]);e!==void 0&&S!=null&&f(e,["parameters","addWatermark"],S);const w=u(t,["labels"]);e!==void 0&&w!=null&&f(e,["labels"],w);const _=u(t,["editMode"]);e!==void 0&&_!=null&&f(e,["parameters","editMode"],_);const T=u(t,["baseSteps"]);return e!==void 0&&T!=null&&f(e,["parameters","editConfig","baseSteps"],T),n}function im(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>s1(l))),f(n,["instances[0]","referenceImages"],a)}const s=u(e,["config"]);return s!=null&&rm(s,n),n}function om(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Na(o))),f(e,["generatedImages"],i)}return e}function sm(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const o=u(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function am(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&f(e,["instances[]","task_type"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&f(e,["instances[]","title"],i);const o=u(t,["outputDimensionality"]);e!==void 0&&o!=null&&f(e,["parameters","outputDimensionality"],o);const s=u(t,["mimeType"]);e!==void 0&&s!=null&&f(e,["instances[]","mimeType"],s);const a=u(t,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),n}function lm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let a=oc(t,i);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}const o=u(e,["config"]);o!=null&&sm(o,n);const s=u(e,["model"]);return s!==void 0&&f(n,["requests[]","model"],pt(t,s)),n}function cm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=oc(t,i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["instances[]","content"],s)}const o=u(e,["config"]);return o!=null&&am(o,n),n}function um(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["embeddings"],o)}const i=u(t,["metadata"]);return i!=null&&f(e,["metadata"],i),e}function dm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Gg(s))),f(e,["embeddings"],o)}const i=u(t,["metadata"]);return i!=null&&f(e,["metadata"],i),e}function fm(t){const e={},n=u(t,["endpoint"]);n!=null&&f(e,["name"],n);const r=u(t,["deployedModelId"]);return r!=null&&f(e,["deployedModelId"],r),e}function hm(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function pm(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gm(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&f(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function mm(t){const e={},n=u(t,["description"]);n!=null&&f(e,["description"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["parameters"]);i!=null&&f(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&f(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function vm(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],wa(dn(i)));const o=u(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&f(r,["topP"],s);const a=u(e,["topK"]);a!=null&&f(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);const p=u(e,["stopSequences"]);p!=null&&f(r,["stopSequences"],p);const m=u(e,["responseLogprobs"]);m!=null&&f(r,["responseLogprobs"],m);const y=u(e,["logprobs"]);y!=null&&f(r,["logprobs"],y);const v=u(e,["presencePenalty"]);v!=null&&f(r,["presencePenalty"],v);const N=u(e,["frequencyPenalty"]);N!=null&&f(r,["frequencyPenalty"],N);const A=u(e,["seed"]);A!=null&&f(r,["seed"],A);const S=u(e,["responseMimeType"]);S!=null&&f(r,["responseMimeType"],S);const w=u(e,["responseSchema"]);w!=null&&f(r,["responseSchema"],sc(w));const _=u(e,["responseJsonSchema"]);if(_!=null&&f(r,["responseJsonSchema"],_),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=u(e,["safetySettings"]);if(n!==void 0&&T!=null){let z=T;Array.isArray(z)&&(z=z.map(K=>a1(K))),f(n,["safetySettings"],z)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let z=vo(D);Array.isArray(z)&&(z=z.map(K=>p1(mo(K)))),f(n,["tools"],z)}const k=u(e,["toolConfig"]);if(n!==void 0&&k!=null&&f(n,["toolConfig"],h1(k)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=u(e,["cachedContent"]);n!==void 0&&F!=null&&f(n,["cachedContent"],Mr(t,F));const P=u(e,["responseModalities"]);P!=null&&f(r,["responseModalities"],P);const M=u(e,["mediaResolution"]);M!=null&&f(r,["mediaResolution"],M);const j=u(e,["speechConfig"]);if(j!=null&&f(r,["speechConfig"],ac(j)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=u(e,["thinkingConfig"]);$!=null&&f(r,["thinkingConfig"],$);const I=u(e,["imageConfig"]);I!=null&&f(r,["imageConfig"],Gm(I));const E=u(e,["enableEnhancedCivicAnswers"]);return E!=null&&f(r,["enableEnhancedCivicAnswers"],E),r}function ym(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],dn(i));const o=u(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&f(r,["topP"],s);const a=u(e,["topK"]);a!=null&&f(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);const p=u(e,["stopSequences"]);p!=null&&f(r,["stopSequences"],p);const m=u(e,["responseLogprobs"]);m!=null&&f(r,["responseLogprobs"],m);const y=u(e,["logprobs"]);y!=null&&f(r,["logprobs"],y);const v=u(e,["presencePenalty"]);v!=null&&f(r,["presencePenalty"],v);const N=u(e,["frequencyPenalty"]);N!=null&&f(r,["frequencyPenalty"],N);const A=u(e,["seed"]);A!=null&&f(r,["seed"],A);const S=u(e,["responseMimeType"]);S!=null&&f(r,["responseMimeType"],S);const w=u(e,["responseSchema"]);w!=null&&f(r,["responseSchema"],sc(w));const _=u(e,["responseJsonSchema"]);_!=null&&f(r,["responseJsonSchema"],_);const T=u(e,["routingConfig"]);T!=null&&f(r,["routingConfig"],T);const D=u(e,["modelSelectionConfig"]);D!=null&&f(r,["modelConfig"],D);const k=u(e,["safetySettings"]);if(n!==void 0&&k!=null){let q=k;Array.isArray(q)&&(q=q.map(L=>L)),f(n,["safetySettings"],q)}const F=u(e,["tools"]);if(n!==void 0&&F!=null){let q=vo(F);Array.isArray(q)&&(q=q.map(L=>cf(mo(L)))),f(n,["tools"],q)}const P=u(e,["toolConfig"]);n!==void 0&&P!=null&&f(n,["toolConfig"],P);const M=u(e,["labels"]);n!==void 0&&M!=null&&f(n,["labels"],M);const j=u(e,["cachedContent"]);n!==void 0&&j!=null&&f(n,["cachedContent"],Mr(t,j));const $=u(e,["responseModalities"]);$!=null&&f(r,["responseModalities"],$);const I=u(e,["mediaResolution"]);I!=null&&f(r,["mediaResolution"],I);const E=u(e,["speechConfig"]);E!=null&&f(r,["speechConfig"],ac(E));const z=u(e,["audioTimestamp"]);z!=null&&f(r,["audioTimestamp"],z);const K=u(e,["thinkingConfig"]);K!=null&&f(r,["thinkingConfig"],K);const ie=u(e,["imageConfig"]);if(ie!=null&&f(r,["imageConfig"],zm(ie)),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function nd(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=Un(i);Array.isArray(s)&&(s=s.map(a=>wa(a))),f(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&f(n,["generationConfig"],vm(t,o,n)),n}function rd(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=Un(i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&f(n,["generationConfig"],ym(t,o,n)),n}function id(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>qg(c))),f(e,["candidates"],l)}const i=u(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const s=u(t,["responseId"]);s!=null&&f(e,["responseId"],s);const a=u(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function od(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(p=>p)),f(e,["candidates"],c)}const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const o=u(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const s=u(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const a=u(t,["responseId"]);a!=null&&f(e,["responseId"],a);const l=u(t,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function xm(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=u(t,["aspectRatio"]);e!==void 0&&i!=null&&f(e,["parameters","aspectRatio"],i);const o=u(t,["guidanceScale"]);if(e!==void 0&&o!=null&&f(e,["parameters","guidanceScale"],o),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=u(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&f(e,["parameters","safetySetting"],s);const a=u(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const l=u(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&f(e,["parameters","includeSafetyAttributes"],l);const c=u(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const p=u(t,["language"]);e!==void 0&&p!=null&&f(e,["parameters","language"],p);const m=u(t,["outputMimeType"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","mimeType"],m);const y=u(t,["outputCompressionQuality"]);if(e!==void 0&&y!=null&&f(e,["parameters","outputOptions","compressionQuality"],y),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=u(t,["imageSize"]);if(e!==void 0&&v!=null&&f(e,["parameters","sampleImageSize"],v),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function bm(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=u(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const o=u(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const y=u(t,["includeRaiReason"]);e!==void 0&&y!=null&&f(e,["parameters","includeRaiReason"],y);const v=u(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const N=u(t,["outputMimeType"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","mimeType"],N);const A=u(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","compressionQuality"],A);const S=u(t,["addWatermark"]);e!==void 0&&S!=null&&f(e,["parameters","addWatermark"],S);const w=u(t,["labels"]);e!==void 0&&w!=null&&f(e,["labels"],w);const _=u(t,["imageSize"]);e!==void 0&&_!=null&&f(e,["parameters","sampleImageSize"],_);const T=u(t,["enhancePrompt"]);return e!==void 0&&T!=null&&f(e,["parameters","enhancePrompt"],T),n}function wm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["config"]);return o!=null&&xm(o,n),n}function Nm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["config"]);return o!=null&&bm(o,n),n}function Sm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Dm(s))),f(e,["generatedImages"],o)}const i=u(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],af(i)),e}function _m(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Na(s))),f(e,["generatedImages"],o)}const i=u(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],lf(i)),e}function Am(t,e){const n={},r=u(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=u(t,["durationSeconds"]);if(e!==void 0&&i!=null&&f(e,["parameters","durationSeconds"],i),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const s=u(t,["resolution"]);e!==void 0&&s!=null&&f(e,["parameters","resolution"],s);const a=u(t,["personGeneration"]);if(e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=u(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const c=u(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&f(e,["parameters","enhancePrompt"],c),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=u(t,["lastFrame"]);e!==void 0&&p!=null&&f(e,["instances[0]","lastFrame"],Sa(p));const m=u(t,["referenceImages"]);if(e!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(v=>T1(v))),f(e,["instances[0]","referenceImages"],y)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Cm(t,e){const n={},r=u(t,["numberOfVideos"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=u(t,["fps"]);e!==void 0&&o!=null&&f(e,["parameters","fps"],o);const s=u(t,["durationSeconds"]);e!==void 0&&s!=null&&f(e,["parameters","durationSeconds"],s);const a=u(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const l=u(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=u(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);const m=u(t,["pubsubTopic"]);e!==void 0&&m!=null&&f(e,["parameters","pubsubTopic"],m);const y=u(t,["negativePrompt"]);e!==void 0&&y!=null&&f(e,["parameters","negativePrompt"],y);const v=u(t,["enhancePrompt"]);e!==void 0&&v!=null&&f(e,["parameters","enhancePrompt"],v);const N=u(t,["generateAudio"]);e!==void 0&&N!=null&&f(e,["parameters","generateAudio"],N);const A=u(t,["lastFrame"]);e!==void 0&&A!=null&&f(e,["instances[0]","lastFrame"],nr(A));const S=u(t,["referenceImages"]);if(e!==void 0&&S!=null){let T=S;Array.isArray(T)&&(T=T.map(D=>k1(D))),f(e,["instances[0]","referenceImages"],T)}const w=u(t,["mask"]);e!==void 0&&w!=null&&f(e,["instances[0]","mask"],C1(w));const _=u(t,["compressionQuality"]);return e!==void 0&&_!=null&&f(e,["parameters","compressionQuality"],_),n}function Tm(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response","generateVideoResponse"]);return s!=null&&f(e,["response"],Pm(s)),e}function km(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],Lm(s)),e}function Im(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["image"]);o!=null&&f(n,["instances[0]","image"],Sa(o));const s=u(e,["video"]);s!=null&&f(n,["instances[0]","video"],uf(s));const a=u(e,["source"]);a!=null&&Rm(a,n);const l=u(e,["config"]);return l!=null&&Am(l,n),n}function Em(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["image"]);o!=null&&f(n,["instances[0]","image"],nr(o));const s=u(e,["video"]);s!=null&&f(n,["instances[0]","video"],df(s));const a=u(e,["source"]);a!=null&&Mm(a,n);const l=u(e,["config"]);return l!=null&&Cm(l,n),n}function Pm(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>jm(s))),f(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function Lm(t){const e={},n=u(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Um(s))),f(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function Rm(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=u(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],Sa(i));const o=u(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],uf(o)),n}function Mm(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=u(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],nr(i));const o=u(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],df(o)),n}function Dm(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],Wm(n));const r=u(t,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const i=u(t,["_self"]);return i!=null&&f(e,["safetyAttributes"],af(i)),e}function Na(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],sf(n));const r=u(t,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const i=u(t,["_self"]);i!=null&&f(e,["safetyAttributes"],lf(i));const o=u(t,["prompt"]);return o!=null&&f(e,["enhancedPrompt"],o),e}function Fm(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["mask"],sf(n));const r=u(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["labels"],i)}return e}function jm(t){const e={},n=u(t,["video"]);return n!=null&&f(e,["video"],_1(n)),e}function Um(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],A1(n)),e}function Bm(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const r=u(t,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const i=u(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const o=u(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const s=u(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);const a=u(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const p=u(t,["mediaResolution"]);p!=null&&f(e,["mediaResolution"],p);const m=u(t,["presencePenalty"]);m!=null&&f(e,["presencePenalty"],m);const y=u(t,["responseLogprobs"]);y!=null&&f(e,["responseLogprobs"],y);const v=u(t,["responseMimeType"]);v!=null&&f(e,["responseMimeType"],v);const N=u(t,["responseModalities"]);N!=null&&f(e,["responseModalities"],N);const A=u(t,["responseSchema"]);A!=null&&f(e,["responseSchema"],A);const S=u(t,["routingConfig"]);S!=null&&f(e,["routingConfig"],S);const w=u(t,["seed"]);w!=null&&f(e,["seed"],w);const _=u(t,["speechConfig"]);_!=null&&f(e,["speechConfig"],_);const T=u(t,["stopSequences"]);T!=null&&f(e,["stopSequences"],T);const D=u(t,["temperature"]);D!=null&&f(e,["temperature"],D);const k=u(t,["thinkingConfig"]);k!=null&&f(e,["thinkingConfig"],k);const F=u(t,["topK"]);F!=null&&f(e,["topK"],F);const P=u(t,["topP"]);if(P!=null&&f(e,["topP"],P),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function qm(t,e){const n={},r=u(e,["model"]);return r!=null&&f(n,["_url","name"],pt(t,r)),n}function Om(t,e){const n={},r=u(e,["model"]);return r!=null&&f(n,["_url","name"],pt(t,r)),n}function Hm(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Vm(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function Gm(t){const e={},n=u(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const r=u(t,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function zm(t){const e={},n=u(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const r=u(t,["imageSize"]);r!=null&&f(e,["imageSize"],r);const i=u(t,["personGeneration"]);i!=null&&f(e,["personGeneration"],i);const o=u(t,["outputMimeType"]);o!=null&&f(e,["imageOutputOptions","mimeType"],o);const s=u(t,["outputCompressionQuality"]);return s!=null&&f(e,["imageOutputOptions","compressionQuality"],s),e}function Wm(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],oi(n));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function sf(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&f(e,["imageBytes"],oi(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Sa(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],oi(n));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function nr(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const r=u(t,["imageBytes"]);r!=null&&f(e,["bytesBase64Encoded"],oi(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function $m(t,e,n){const r={},i=u(e,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const o=u(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const s=u(e,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);const a=u(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],Qd(t,a)),r}function Jm(t,e,n){const r={},i=u(e,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const o=u(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const s=u(e,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);const a=u(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],Qd(t,a)),r}function Ym(t,e){const n={},r=u(e,["config"]);return r!=null&&$m(t,r,n),n}function Km(t,e){const n={},r=u(e,["config"]);return r!=null&&Jm(t,r,n),n}function Xm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["_self"]);if(i!=null){let o=Zd(i);Array.isArray(o)&&(o=o.map(s=>Dl(s))),f(e,["models"],o)}return e}function Qm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["_self"]);if(i!=null){let o=Zd(i);Array.isArray(o)&&(o=o.map(s=>Fl(s))),f(e,["models"],o)}return e}function Zm(t){const e={},n=u(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const r=u(t,["segmentationClasses"]);r!=null&&f(e,["maskClasses"],r);const i=u(t,["maskDilation"]);return i!=null&&f(e,["dilation"],i),e}function Dl(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const o=u(t,["version"]);o!=null&&f(e,["version"],o);const s=u(t,["_self"]);s!=null&&f(e,["tunedModelInfo"],g1(s));const a=u(t,["inputTokenLimit"]);a!=null&&f(e,["inputTokenLimit"],a);const l=u(t,["outputTokenLimit"]);l!=null&&f(e,["outputTokenLimit"],l);const c=u(t,["supportedGenerationMethods"]);c!=null&&f(e,["supportedActions"],c);const p=u(t,["temperature"]);p!=null&&f(e,["temperature"],p);const m=u(t,["maxTemperature"]);m!=null&&f(e,["maxTemperature"],m);const y=u(t,["topP"]);y!=null&&f(e,["topP"],y);const v=u(t,["topK"]);v!=null&&f(e,["topK"],v);const N=u(t,["thinking"]);return N!=null&&f(e,["thinking"],N),e}function Fl(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const o=u(t,["versionId"]);o!=null&&f(e,["version"],o);const s=u(t,["deployedModels"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(y=>fm(y))),f(e,["endpoints"],m)}const a=u(t,["labels"]);a!=null&&f(e,["labels"],a);const l=u(t,["_self"]);l!=null&&f(e,["tunedModelInfo"],m1(l));const c=u(t,["defaultCheckpointId"]);c!=null&&f(e,["defaultCheckpointId"],c);const p=u(t,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(y=>y)),f(e,["checkpoints"],m)}return e}function e1(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],hm(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],pm(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],Bg(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const p=u(t,["thought"]);p!=null&&f(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&f(e,["videoMetadata"],y),e}function t1(t){const e={},n=u(t,["productImage"]);return n!=null&&f(e,["image"],nr(n)),e}function n1(t,e){const n={},r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=u(t,["baseSteps"]);e!==void 0&&i!=null&&f(e,["parameters","baseSteps"],i);const o=u(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const s=u(t,["seed"]);e!==void 0&&s!=null&&f(e,["parameters","seed"],s);const a=u(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=u(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=u(t,["addWatermark"]);e!==void 0&&c!=null&&f(e,["parameters","addWatermark"],c);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const m=u(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m);const y=u(t,["enhancePrompt"]);e!==void 0&&y!=null&&f(e,["parameters","enhancePrompt"],y);const v=u(t,["labels"]);return e!==void 0&&v!=null&&f(e,["labels"],v),n}function r1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["source"]);i!=null&&o1(i,n);const o=u(e,["config"]);return o!=null&&n1(o,n),n}function i1(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Na(i))),f(e,["generatedImages"],r)}return e}function o1(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=u(t,["personImage"]);e!==void 0&&i!=null&&f(e,["instances[0]","personImage","image"],nr(i));const o=u(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>t1(a))),f(e,["instances[0]","productImages"],s)}return n}function s1(t){const e={},n=u(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],nr(n));const r=u(t,["referenceId"]);r!=null&&f(e,["referenceId"],r);const i=u(t,["referenceType"]);i!=null&&f(e,["referenceType"],i);const o=u(t,["maskImageConfig"]);o!=null&&f(e,["maskImageConfig"],Zm(o));const s=u(t,["controlImageConfig"]);s!=null&&f(e,["controlImageConfig"],Wg(s));const a=u(t,["styleImageConfig"]);a!=null&&f(e,["styleImageConfig"],a);const l=u(t,["subjectImageConfig"]);return l!=null&&f(e,["subjectImageConfig"],l),e}function af(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const r=u(t,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const i=u(t,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function lf(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const r=u(t,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const i=u(t,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function a1(t){const e={},n=u(t,["category"]);if(n!=null&&f(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function l1(t){const e={},n=u(t,["image"]);return n!=null&&f(e,["image"],nr(n)),e}function c1(t,e){const n={},r=u(t,["mode"]);e!==void 0&&r!=null&&f(e,["parameters","mode"],r);const i=u(t,["maxPredictions"]);e!==void 0&&i!=null&&f(e,["parameters","maxPredictions"],i);const o=u(t,["confidenceThreshold"]);e!==void 0&&o!=null&&f(e,["parameters","confidenceThreshold"],o);const s=u(t,["maskDilation"]);e!==void 0&&s!=null&&f(e,["parameters","maskDilation"],s);const a=u(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","binaryColorThreshold"],a);const l=u(t,["labels"]);return e!==void 0&&l!=null&&f(e,["labels"],l),n}function u1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["source"]);i!=null&&f1(i,n);const o=u(e,["config"]);return o!=null&&c1(o,n),n}function d1(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Fm(i))),f(e,["generatedMasks"],r)}return e}function f1(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=u(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],nr(i));const o=u(t,["scribbleImage"]);return e!==void 0&&o!=null&&f(e,["instances[0]","scribble"],l1(o)),n}function h1(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],gm(r)),e}function p1(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],Hm(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],Vm(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function cf(t){const e={},n=u(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(y=>mm(y))),f(e,["functionDeclarations"],m)}const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);const p=u(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function g1(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const r=u(t,["createTime"]);r!=null&&f(e,["createTime"],r);const i=u(t,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function m1(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const r=u(t,["createTime"]);r!=null&&f(e,["createTime"],r);const i=u(t,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function v1(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=u(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const o=u(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function y1(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=u(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const o=u(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function x1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","name"],pt(t,r));const i=u(e,["config"]);return i!=null&&v1(i,n),n}function b1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&y1(i,n),n}function w1(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=u(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&f(e,["parameters","safetySetting"],i);const o=u(t,["personGeneration"]);e!==void 0&&o!=null&&f(e,["parameters","personGeneration"],o);const s=u(t,["includeRaiReason"]);e!==void 0&&s!=null&&f(e,["parameters","includeRaiReason"],s);const a=u(t,["outputMimeType"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","mimeType"],a);const l=u(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&f(e,["parameters","outputOptions","compressionQuality"],l);const c=u(t,["enhanceInputImage"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],c);const p=u(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=u(t,["labels"]);e!==void 0&&m!=null&&f(e,["labels"],m);const y=u(t,["numberOfImages"]);e!==void 0&&y!=null&&f(e,["parameters","sampleCount"],y);const v=u(t,["mode"]);return e!==void 0&&v!=null&&f(e,["parameters","mode"],v),n}function N1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["image"]);i!=null&&f(n,["instances[0]","image"],nr(i));const o=u(e,["upscaleFactor"]);o!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=u(e,["config"]);return s!=null&&w1(s,n),n}function S1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Na(o))),f(e,["generatedImages"],i)}return e}function _1(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["uri"],n);const r=u(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],oi(r));const i=u(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function A1(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],oi(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function C1(t){const e={},n=u(t,["image"]);n!=null&&f(e,["_self"],nr(n));const r=u(t,["maskMode"]);return r!=null&&f(e,["maskMode"],r),e}function T1(t){const e={},n=u(t,["image"]);n!=null&&f(e,["image"],Sa(n));const r=u(t,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function k1(t){const e={},n=u(t,["image"]);n!=null&&f(e,["image"],nr(n));const r=u(t,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function uf(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["uri"],n);const r=u(t,["videoBytes"]);r!=null&&f(e,["encodedVideo"],oi(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["encoding"],i),e}function df(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const r=u(t,["videoBytes"]);r!=null&&f(e,["bytesBase64Encoded"],oi(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I1(t,e){const n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["displayName"],r),n}function E1(t){const e={},n=u(t,["config"]);return n!=null&&I1(n,e),e}function P1(t,e){const n={},r=u(t,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),n}function L1(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const r=u(t,["config"]);return r!=null&&P1(r,e),e}function R1(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function M1(t,e){const n={},r=u(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["customMetadata"],o)}const i=u(t,["chunkingConfig"]);return e!==void 0&&i!=null&&f(e,["chunkingConfig"],i),n}function D1(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],j1(s)),e}function F1(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const r=u(t,["fileName"]);r!=null&&f(e,["fileName"],r);const i=u(t,["config"]);return i!=null&&M1(i,e),e}function j1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&f(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function U1(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function B1(t){const e={},n=u(t,["config"]);return n!=null&&U1(n,e),e}function q1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["fileSearchStores"],o)}return e}function ff(t,e){const n={},r=u(t,["mimeType"]);e!==void 0&&r!=null&&f(e,["mimeType"],r);const i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=u(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["customMetadata"],a)}const s=u(t,["chunkingConfig"]);return e!==void 0&&s!=null&&f(e,["chunkingConfig"],s),n}function O1(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const r=u(t,["config"]);return r!=null&&ff(r,e),e}function H1(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V1="Content-Type",G1="X-Server-Timeout",z1="User-Agent",jl="x-goog-api-client",W1="1.35.0",$1=`google-genai-sdk/${W1}`,J1="v1beta1",Y1="v1beta";class K1{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:J1,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Y1,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&X1(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await sd(i),new Ll(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await sd(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return er(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:p}=yield Qe(i.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=o.decode(p,{stream:!0});try{const N=JSON.parse(m);if("error"in N){const A=JSON.parse(JSON.stringify(N.error)),S=A.status,w=A.code,_=`got status: ${S}. ${JSON.stringify(N)}`;if(w>=400&&w<600)throw new ba({message:_,status:w})}}catch(N){if(N.name==="ApiError")throw N}s+=m;let y=-1,v=0;for(;;){y=-1,v=0;for(const S of l){const w=s.indexOf(S);w!==-1&&(y===-1||w<y)&&(y=w,v=S.length)}if(y===-1)break;const N=s.substring(0,y);s=s.substring(y+v);const A=N.trim();if(A.startsWith(a)){const S=A.substring(a.length).trim();try{const w=new Response(S,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Qe(new Ll(w))}catch(w){throw new Error(`exception parsing stream chunk ${S}. ${w}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=$1+" "+this.clientOptions.userAgentExtra;return e[z1]=n,e[jl]=n,e[V1]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(G1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},c=this.getFileName(e),p=De("upload/v1beta/files",l._url),m=await this.fetchUploadUrl(p,i.sizeBytes,i.mimeType,c,l,n==null?void 0:n.httpOptions);return o.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),a=String(s.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),m={};r!=null&&ff(r,m);const y=await this.fetchUploadUrl(c,a,l,p,m,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function sd(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new ba({message:i,status:n}):new Error(i)}}function X1(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const c=s[l],p=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&p&&typeof p=="object"&&!Array.isArray(p)?a[l]=r(p,c):(p&&c&&typeof p!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof p}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Q1="mcp_used/unknown";let Z1=!1;function hf(t){for(const e of t)if(e2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Z1}function pf(t){var e;const n=(e=t[jl])!==null&&e!==void 0?e:"";t[jl]=(n+` ${Q1}`).trimStart()}function e2(t){return t!==null&&typeof t=="object"&&t instanceof cc}function t2(t){return er(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const s=yield Qe(n.listTools({cursor:i}));for(const a of s.tools)yield yield Qe(a),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class cc{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new cc(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const p of this.mcpClients)try{for(var a=!0,l=(n=void 0,tr(t2(p))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const m=i;s.push(m);const y=m.name;if(o[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);o[y]=p}}catch(m){n={error:m}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),Rp(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function n2(t,e,n){const r=new Ap;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class r2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=s2(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const p=new Promise(T=>{c=T}),m=e.callbacks,y=function(){c({})},v=this.apiClient,N={onopen:y,onmessage:T=>{n2(v,m.onmessage,T)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(T){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(T){}},A=this.webSocketFactory.create(l,o2(s),N);A.connect(),await p;const _={setup:{model:pt(this.apiClient,e.model)}};return A.send(JSON.stringify(_)),new i2(A,this.apiClient)}}class i2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Eg(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Ig(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(uo.PLAY)}pause(){this.sendPlaybackControl(uo.PAUSE)}stop(){this.sendPlaybackControl(uo.STOP)}resetContext(){this.sendPlaybackControl(uo.RESET_CONTEXT)}close(){this.conn.close()}}function o2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function s2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function l2(t,e,n){const r=new _p;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=Rg(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class c2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new r2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let p;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&hf(e.config.tools)&&pf(m);const y=h2(m);if(this.apiClient.isVertexAI())p=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y,p);else{const j=this.apiClient.getApiKey();let $="BidiGenerateContent",I="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$="BidiGenerateContentConstrained",I="access_token"),p=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${$}?${I}=${j}`}let v=()=>{};const N=new Promise(j=>{v=j}),A=e.callbacks,S=function(){var j;(j=A==null?void 0:A.onopen)===null||j===void 0||j.call(A),v({})},w=this.apiClient,_={onopen:S,onmessage:j=>{l2(w,A.onmessage,j)},onerror:(n=A==null?void 0:A.onerror)!==null&&n!==void 0?n:function(j){},onclose:(r=A==null?void 0:A.onclose)!==null&&r!==void 0?r:function(j){}},T=this.webSocketFactory.create(p,f2(y),_);T.connect(),await N;let D=pt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const j=this.apiClient.getProject(),$=this.apiClient.getLocation();D=`projects/${j}/locations/${$}/`+D}let k={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ha.AUDIO]}:e.config.responseModalities=[ha.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],P=[];for(const j of F)if(this.isCallableTool(j)){const $=j;P.push(await $.tool())}else P.push(j);P.length>0&&(e.config.tools=P);const M={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?k=kg(this.apiClient,M):k=Tg(this.apiClient,M),delete k.config,T.send(JSON.stringify(k)),new d2(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const u2={turnComplete:!0};class d2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Un(n.turns),e.isVertexAI()||(r=r.map(i=>wa(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(a2)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},u2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Lg(e)}:n={realtimeInput:Pg(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function f2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function h2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ad=10;function ld(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(po(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function po(t){return"callTool"in t&&typeof t.callTool=="function"}function p2(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>po(i)))!==null&&r!==void 0?r:!1}function cd(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(po(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function ud(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g2 extends Rr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!p2(n)||ld(n.config))return await this.generateContentInternal(l);const c=cd(n);if(c.length>0){const A=c.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let p,m;const y=Un(l.contents),v=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:ad;let N=0;for(;N<v&&(p=await this.generateContentInternal(l),!(!p.functionCalls||p.functionCalls.length===0));){const A=p.candidates[0].content,S=[];for(const w of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(po(w)){const T=await w.callTool(p.functionCalls);S.push(...T)}N++,m={role:"user",parts:S},l.contents=Un(l.contents),l.contents.push(A),l.contents.push(m),ud(l.config)&&(y.push(A),y.push(m))}return ud(l.config)&&(p.automaticFunctionCallingHistory=y),p},this.generateContentStream=async n=>{var r,i,o,s,a;if(this.maybeMoveToResponseJsonSchem(n),ld(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const l=cd(n);if(l.length>0){const m=l.map(y=>`tools[${y}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,p=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:s.push(l);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Ti(Lr.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async l=>po(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&hf(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),pf(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(po(s)){const a=s,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:ad;let s=!1,a=0;const l=await this.initAfcToolsMap(e);return(function(c,p,m){return er(this,arguments,function*(){for(var y,v,N,A,S,w;a<o;){s&&(a++,s=!1);const k=yield Qe(c.processParamsMaybeAddMcpUsage(m)),F=yield Qe(c.generateContentStreamInternal(k)),P=[],M=[];try{for(var _=!0,T=(v=void 0,tr(F)),D;D=yield Qe(T.next()),y=D.done,!y;_=!0){A=D.value,_=!1;const j=A;if(yield yield Qe(j),j.candidates&&(!((S=j.candidates[0])===null||S===void 0)&&S.content)){M.push(j.candidates[0].content);for(const $ of(w=j.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(a<o&&$.functionCall){if(!$.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has($.functionCall.name)){const I=yield Qe(p.get($.functionCall.name).callTool([$.functionCall]));P.push(...I)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${$.functionCall.name}`)}}}}catch(j){v={error:j}}finally{try{!_&&!y&&(N=T.return)&&(yield Qe(N.call(T)))}finally{if(v)throw v.error}}if(P.length>0){s=!0;const j=new Yo;j.candidates=[{content:{role:"user",parts:P}}],yield yield Qe(j);const $=[];$.push(...M),$.push({role:"user",parts:P});const I=Un(m.contents).concat($);m.contents=I}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=rd(this.apiClient,e);return a=De("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=od(p),y=new Yo;return Object.assign(y,m),y})}else{const c=nd(this.apiClient,e);return a=De("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=id(p),y=new Yo;return Object.assign(y,m),y})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=rd(this.apiClient,e);return a=De("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(m){return er(this,arguments,function*(){var y,v,N,A;try{for(var S=!0,w=tr(m),_;_=yield Qe(w.next()),y=_.done,!y;S=!0){A=_.value,S=!1;const T=A,D=od(yield Qe(T.json()));D.sdkHttpResponse={headers:T.headers};const k=new Yo;Object.assign(k,D),yield yield Qe(k)}}catch(T){v={error:T}}finally{try{!S&&!y&&(N=w.return)&&(yield Qe(N.call(w)))}finally{if(v)throw v.error}}})})}else{const c=nd(this.apiClient,e);return a=De("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(m){return er(this,arguments,function*(){var y,v,N,A;try{for(var S=!0,w=tr(m),_;_=yield Qe(w.next()),y=_.done,!y;S=!0){A=_.value,S=!1;const T=A,D=id(yield Qe(T.json()));D.sdkHttpResponse={headers:T.headers};const k=new Yo;Object.assign(k,D),yield yield Qe(k)}}catch(T){v={error:T}}finally{try{!S&&!y&&(N=w.return)&&(yield Qe(N.call(w)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=cm(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=dm(p),y=new Bu;return Object.assign(y,m),y})}else{const c=lm(this.apiClient,e);return a=De("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=um(p),y=new Bu;return Object.assign(y,m),y})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Nm(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=_m(p),y=new qu;return Object.assign(y,m),y})}else{const c=wm(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Sm(p),y=new qu;return Object.assign(y,m),y})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=im(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=om(l),p=new hp;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=N1(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=S1(l),p=new pp;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=r1(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=i1(l),p=new gp;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=u1(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=d1(l),p=new mp;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Om(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>Fl(p))}else{const c=qm(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>Dl(p))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Km(this.apiClient,e);return a=De("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Qm(p),y=new Ou;return Object.assign(y,m),y})}else{const c=Ym(this.apiClient,e);return a=De("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Xm(p),y=new Ou;return Object.assign(y,m),y})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=b1(this.apiClient,e);return a=De("{model}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>Fl(p))}else{const c=x1(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>Dl(p))}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=em(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=nm(p),y=new Hu;return Object.assign(y,m),y})}else{const c=Zg(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=tm(p),y=new Hu;return Object.assign(y,m),y})}}async countTokens(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Kg(this.apiClient,e);return a=De("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Qg(p),y=new Vu;return Object.assign(y,m),y})}else{const c=Yg(this.apiClient,e);return a=De("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=Xg(p),y=new Vu;return Object.assign(y,m),y})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=Hg(this.apiClient,e);return o=De("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>{const c=Vg(l),p=new vp;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Em(this.apiClient,e);return a=De("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>{const m=km(p),y=new pa;return Object.assign(y,m),y})}else{const c=Im(this.apiClient,e);return a=De("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=Tm(p),y=new pa;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m2 extends Rr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=ap(e);return a=De("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s}else{const c=sp(e);return a=De("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=Zh(e);return o=De("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v2(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function y2(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>T2(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function x2(t,e,n){const r={},i=u(e,["expireTime"]);n!==void 0&&i!=null&&f(n,["expireTime"],i);const o=u(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&f(n,["newSessionExpireTime"],o);const s=u(e,["uses"]);n!==void 0&&s!=null&&f(n,["uses"],s);const a=u(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],C2(t,a));const l=u(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),r}function b2(t,e){const n={},r=u(e,["config"]);return r!=null&&f(n,["config"],x2(t,r,n)),n}function w2(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function N2(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function S2(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function _2(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function A2(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const p=u(t,["seed"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","seed"],p);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","speechConfig"],lc(m));const y=u(t,["thinkingConfig"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","thinkingConfig"],y);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],v);const N=u(t,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],y2(dn(N)));const A=u(t,["tools"]);if(e!==void 0&&A!=null){let F=vo(A);Array.isArray(F)&&(F=F.map(P=>I2(mo(P)))),f(e,["setup","tools"],F)}const S=u(t,["sessionResumption"]);e!==void 0&&S!=null&&f(e,["setup","sessionResumption"],k2(S));const w=u(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);const _=u(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&f(e,["setup","outputAudioTranscription"],_);const T=u(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&f(e,["setup","realtimeInputConfig"],T);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&f(e,["setup","contextWindowCompression"],D);const k=u(t,["proactivity"]);if(e!==void 0&&k!=null&&f(e,["setup","proactivity"],k),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function C2(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["setup","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&f(n,["config"],A2(i,n)),n}function T2(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],w2(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],N2(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],v2(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const p=u(t,["thought"]);p!=null&&f(e,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const y=u(t,["videoMetadata"]);return y!=null&&f(e,["videoMetadata"],y),e}function k2(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function I2(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["functionDeclarations"],p)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],S2(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],_2(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E2(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function P2(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=E2(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>s.includes(c)?`generationConfig.${c}`:c));const l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class L2 extends Rr{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=b2(this.apiClient,e);o=De("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const l=P2(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R2(t,e){const n={},r=u(t,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),n}function M2(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const r=u(t,["config"]);return r!=null&&R2(r,e),e}function D2(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function F2(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function j2(t){const e={},n=u(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const r=u(t,["config"]);return r!=null&&F2(r,e),e}function U2(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B2 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ti(Lr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=D2(e);return o=De("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=M2(e);i=De("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=j2(e);return o=De("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=U2(l),p=new yp;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q2 extends Rr{constructor(e,n=new B2(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Ti(Lr.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=E1(e);return o=De("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=R1(e);return o=De("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=L1(e);i=De("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=B1(e);return o=De("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=q1(l),p=new xp;return Object.assign(p,c),p})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=O1(e);return o=De("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=H1(l),p=new bp;return Object.assign(p,c),p})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=F1(e);return o=De("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=D1(l),p=new rc;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gf=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return gf=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const O2=()=>gf();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ul(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Bl=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bn extends Error{}class mn extends Bn{constructor(e,n,r,i){super(`${mn.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new _a({message:r,cause:Bl(n)});const o=n;return e===400?new vf(e,o,r,i):e===401?new yf(e,o,r,i):e===403?new xf(e,o,r,i):e===404?new bf(e,o,r,i):e===409?new wf(e,o,r,i):e===422?new Nf(e,o,r,i):e===429?new Sf(e,o,r,i):e>=500?new _f(e,o,r,i):new mn(e,o,r,i)}}class ql extends mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class _a extends mn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class mf extends _a{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vf extends mn{}class yf extends mn{}class xf extends mn{}class bf extends mn{}class wf extends mn{}class Nf extends mn{}class Sf extends mn{}class _f extends mn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H2=/^[a-z][a-z0-9+.-]*:/i,V2=t=>H2.test(t);let Ol=t=>(Ol=Array.isArray,Ol(t));const G2=Ol;let z2=G2;const dd=z2;function W2(t){if(!t)return!0;for(const e in t)return!1;return!0}function $2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const J2=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Bn(`${t} must be an integer`);if(e<0)throw new Bn(`${t} must be a positive integer`);return e},Y2=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const K2=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ao="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X2(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Q2=()=>{var t,e,n,r,i;const o=X2();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":hd(Deno.build.os),"X-Stainless-Arch":fd(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":hd((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":fd((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=Z2();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Z2(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const fd=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",hd=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Zs;const e5=()=>Zs??(Zs=Q2());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t5(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Af(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function n5(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Af({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Cf(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function r5(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i5=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tf=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function yl(t,e,n){return Tf(),new File(t,e??"unknown_file",n)}function o5(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const s5=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kf=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",a5=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&kf(t),l5=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function c5(t,e,n){if(Tf(),t=await t,a5(t))return t instanceof File?t:yl([await t.arrayBuffer()],t.name);if(l5(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),yl(await Hl(i),e,n)}const r=await Hl(t);if(e||(e=o5(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return yl(r,e,n)}async function Hl(t){var e,n,r,i,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(kf(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(s5(t))try{for(var a=!0,l=tr(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const p=i;s.push(...await Hl(p))}}catch(p){n={error:p}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const p=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${p?`; constructor: ${p}`:""}${u5(t)}`)}return s}function u5(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class If{constructor(e){this._client=e}}If._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ef(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const pd=Object.freeze(Object.create(null)),d5=(t=Ef)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],s=n.reduce((p,m,y)=>{var v,N,A;/[?#]/.test(m)&&(i=!0);const S=r[y];let w=(i?encodeURIComponent:t)(""+S);return y!==r.length&&(S==null||typeof S=="object"&&S.toString===((A=Object.getPrototypeOf((N=Object.getPrototypeOf((v=S.hasOwnProperty)!==null&&v!==void 0?v:pd))!==null&&N!==void 0?N:pd))===null||A===void 0?void 0:A.toString))&&(w=S+"",o.push({start:p.length+m.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(S).slice(8,-1)} is not a valid path parameter`})),p+m+(y===r.length?"":w)},""),a=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)o.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(o.sort((p,m)=>p.start-m.start),o.length>0){let p=0;const m=o.reduce((y,v)=>{const N=" ".repeat(v.start-p),A="^".repeat(v.length);return p=v.start+v.length,y+N+A},"");throw new Bn(`Path parameters result in path with invalid segments:
${o.map(y=>y.error).join(`
`)}
${s}
${m}`)}return s}),ea=d5(Ef);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pf extends If{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=ma(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Bn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Bn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ea`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(ea`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(ea`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:s=this._client.apiVersion}=o,a=ma(o,["api_version"]);return this._client.get(ea`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}Pf._key=Object.freeze(["interactions"]);class Lf extends Pf{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f5(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let ta;function uc(t){let e;return(ta??(e=new globalThis.TextEncoder,ta=e.encode.bind(e)))(t)}let na;function gd(t){let e;return(na??(e=new globalThis.TextDecoder,na=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Aa{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?uc(e):e;this.buffer=f5([this.buffer,n]);const r=[];let i;for(;(i=h5(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(gd(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=gd(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Aa.NEWLINE_CHARS=new Set([`
`,"\r"]);Aa.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function h5(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function p5(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const va={off:0,error:200,warn:300,info:400,debug:500},md=(t,e,n)=>{if(t){if($2(va,t))return t;gn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(va))}`)}};function es(){}function ra(t,e,n){return!e||va[t]>va[n]?es:e[t].bind(e)}const g5={error:es,warn:es,info:es,debug:es};let vd=new WeakMap;function gn(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return g5;const i=vd.get(n);if(i&&i[0]===r)return i[1];const o={error:ra("error",n,r),warn:ra("warn",n,r),info:ra("info",n,r),debug:ra("debug",n,r)};return vd.set(n,[r,o]),o}const xi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fo{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?gn(r):console;function s(){return er(this,arguments,function*(){var l,c,p,m;if(i)throw new Bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let y=!1;try{try{for(var v=!0,N=tr(m5(e,n)),A;A=yield Qe(N.next()),l=A.done,!l;v=!0){m=A.value,v=!1;const S=m;if(!y)if(S.data.startsWith("[DONE]")){y=!0;continue}else try{yield yield Qe(JSON.parse(S.data))}catch(w){throw o.error("Could not parse message into JSON:",S.data),o.error("From chunk:",S.raw),w}}}catch(S){c={error:S}}finally{try{!v&&!l&&(p=N.return)&&(yield Qe(p.call(N)))}finally{if(c)throw c.error}}y=!0}catch(S){if(Ul(S))return yield Qe(void 0);throw S}finally{y||n.abort()}})}return new fo(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return er(this,arguments,function*(){var l,c,p,m;const y=new Aa,v=Cf(e);try{for(var N=!0,A=tr(v),S;S=yield Qe(A.next()),l=S.done,!l;N=!0){m=S.value,N=!1;const w=m;for(const _ of y.decode(w))yield yield Qe(_)}}catch(w){c={error:w}}finally{try{!N&&!l&&(p=A.return)&&(yield Qe(p.call(A)))}finally{if(c)throw c.error}}for(const w of y.flush())yield yield Qe(w)})}function s(){return er(this,arguments,function*(){var l,c,p,m;if(i)throw new Bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let y=!1;try{try{for(var v=!0,N=tr(o()),A;A=yield Qe(N.next()),l=A.done,!l;v=!0){m=A.value,v=!1;const S=m;y||S&&(yield yield Qe(JSON.parse(S)))}}catch(S){c={error:S}}finally{try{!v&&!l&&(p=N.return)&&(yield Qe(p.call(N)))}finally{if(c)throw c.error}}y=!0}catch(S){if(Ul(S))return yield Qe(void 0);throw S}finally{y||n.abort()}})}return new fo(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new fo(()=>i(e),this.controller,this.client),new fo(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Af({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const s=uc(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function m5(t,e){return er(this,arguments,function*(){var r,i,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Bn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Bn("Attempted to iterate over a response with no body");const a=new y5,l=new Aa,c=Cf(t.body);try{for(var p=!0,m=tr(v5(c)),y;y=yield Qe(m.next()),r=y.done,!r;p=!0){s=y.value,p=!1;const v=s;for(const N of l.decode(v)){const A=a.decode(N);A&&(yield yield Qe(A))}}}catch(v){i={error:v}}finally{try{!p&&!r&&(o=m.return)&&(yield Qe(o.call(m)))}finally{if(i)throw i.error}}for(const v of l.flush()){const N=a.decode(v);N&&(yield yield Qe(N))}})}function v5(t){return er(this,arguments,function*(){var n,r,i,o;let s=new Uint8Array;try{for(var a=!0,l=tr(t),c;c=yield Qe(l.next()),n=c.done,!n;a=!0){o=c.value,a=!1;const p=o;if(p==null)continue;const m=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?uc(p):p;let y=new Uint8Array(s.length+m.length);y.set(s),y.set(m,s.length),s=y;let v;for(;(v=p5(s))!==-1;)yield yield Qe(s.slice(0,v)),s=s.slice(v)}}catch(p){r={error:p}}finally{try{!a&&!n&&(i=l.return)&&(yield Qe(i.call(l)))}finally{if(r)throw r.error}}s.length>0&&(yield yield Qe(s))})}class y5{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=x5(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function x5(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function b5(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=await(async()=>{var a;if(e.options.stream)return gn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):fo.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return gn(t).debug(`[${r}] response parsed`,xi({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dc extends Promise{constructor(e,n,r=b5){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new dc(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rf=Symbol("brand.privateNullableHeaders");function*w5(t){if(!t)return;if(Rf in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():dd(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=dd(r[1])?r[1]:[r[1]];let s=!1;for(const a of o)a!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,a])}}const Ko=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,s]of w5(r)){const a=o.toLowerCase();i.has(a)||(e.delete(o),i.add(a)),s===null?(e.delete(o),n.add(a)):(e.append(o,s),n.delete(a))}}return{[Rf]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xl=t=>{var e,n,r,i,o,s;if(typeof globalThis.process<"u")return(r=(n=(e=$h)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Mf;class Ca{constructor(e){var n,r,i,o,s,a,l,{baseURL:c=xl("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(n=xl("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,y=ma(e,["baseURL","apiKey","apiVersion"]);const v=Object.assign(Object.assign({apiKey:p,apiVersion:m},y),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=v.baseURL,this.timeout=(r=v.timeout)!==null&&r!==void 0?r:Ca.DEFAULT_TIMEOUT,this.logger=(i=v.logger)!==null&&i!==void 0?i:console;const N="warn";this.logLevel=N,this.logLevel=(s=(o=md(v.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:md(xl("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:N,this.fetchOptions=v.fetchOptions,this.maxRetries=(a=v.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=v.fetch)!==null&&l!==void 0?l:t5(),this.encoder=i5,this._options=v,this.apiKey=p,this.apiVersion=m,this.clientAdapter=v.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Ko([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ko([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ko([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Bn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ao}`}defaultIdempotencyKey(){return`stainless-node-retry-${O2()}`}makeStatusError(e,n,r,i){return mn.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=V2(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return W2(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new dc(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,s;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:p,timeout:m}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:p,options:a});const y="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=r===void 0?"":`, retryOf: ${r}`,N=Date.now();if(gn(this).debug(`[${y}] sending request`,xi({retryOfRequestLogID:r,method:a.method,url:p,options:a,headers:c.headers})),!((o=a.signal)===null||o===void 0)&&o.aborted)throw new ql;const A=new AbortController,S=await this.fetchWithTimeout(p,c,m,A).catch(Bl),w=Date.now();if(S instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new ql;const D=Ul(S)||/timed? ?out/i.test(String(S)+("cause"in S?String(S.cause):""));if(n)return gn(this).info(`[${y}] connection ${D?"timed out":"failed"} - ${T}`),gn(this).debug(`[${y}] connection ${D?"timed out":"failed"} (${T})`,xi({retryOfRequestLogID:r,url:p,durationMs:w-N,message:S.message})),this.retryRequest(a,n,r??y);throw gn(this).info(`[${y}] connection ${D?"timed out":"failed"} - error; no more retries left`),gn(this).debug(`[${y}] connection ${D?"timed out":"failed"} (error; no more retries left)`,xi({retryOfRequestLogID:r,url:p,durationMs:w-N,message:S.message})),D?new mf:new _a({cause:S})}const _=`[${y}${v}] ${c.method} ${p} ${S.ok?"succeeded":"failed"} with status ${S.status} in ${w-N}ms`;if(!S.ok){const T=await this.shouldRetry(S);if(n&&T){const j=`retrying, ${n} attempts remaining`;return await r5(S.body),gn(this).info(`${_} - ${j}`),gn(this).debug(`[${y}] response error (${j})`,xi({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,durationMs:w-N})),this.retryRequest(a,n,r??y,S.headers)}const D=T?"error; no more retries left":"error; not retryable";gn(this).info(`${_} - ${D}`);const k=await S.text().catch(j=>Bl(j).message),F=Y2(k),P=F?void 0:k;throw gn(this).debug(`[${y}] response error (${D})`,xi({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,message:P,durationMs:Date.now()-N})),this.makeStatusError(S.status,F,P,S.headers)}return gn(this).info(_),gn(this).debug(`[${y}] response start`,xi({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,durationMs:w-N})),{response:S,options:a,controller:A,requestLogID:y,retryOfRequestLogID:r,startTime:N}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:s,method:a}=o,l=ma(o,["signal","method"]);s&&s.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),p=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m=Object.assign(Object.assign(Object.assign({signal:i.signal},p?{duplex:"half"}:{}),{method:"GET"}),l);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let s;const a=i==null?void 0:i.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(s=c)}const l=i==null?void 0:i.get("retry-after");if(l&&!s){const c=parseFloat(l);Number.isNaN(c)?s=Date.parse(l)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await K2(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const s=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:p}=s,m=this.buildURL(l,c,p);"timeout"in s&&J2("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:y,body:v}=this.buildBody({options:s}),N=await this.buildHeaders({options:e,method:a,bodyHeaders:y,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:N},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"}),v&&{body:v}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:m,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let a=Ko([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),e5()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ko([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:n5(e)}:this.encoder({body:e,headers:r})}}Ca.DEFAULT_TIMEOUT=6e4;class Qt extends Ca{constructor(){super(...arguments),this.interactions=new Lf(this)}}Mf=Qt;Qt.GeminiNextGenAPIClient=Mf;Qt.GeminiNextGenAPIClientError=Bn;Qt.APIError=mn;Qt.APIConnectionError=_a;Qt.APIConnectionTimeoutError=mf;Qt.APIUserAbortError=ql;Qt.NotFoundError=bf;Qt.ConflictError=wf;Qt.RateLimitError=Sf;Qt.BadRequestError=vf;Qt.AuthenticationError=yf;Qt.InternalServerError=_f;Qt.PermissionDeniedError=xf;Qt.UnprocessableEntityError=Nf;Qt.toFile=c5;Qt.Interactions=Lf;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N5(t,e){const n={},r=u(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function S5(t,e){const n={},r=u(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function _5(t,e){const n={},r=u(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function A5(t,e){const n={},r=u(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function C5(t,e,n){const r={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=u(t,["epochCount"]);e!==void 0&&o!=null&&f(e,["tuningTask","hyperparameters","epochCount"],o);const s=u(t,["learningRateMultiplier"]);if(s!=null&&f(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=u(t,["batchSize"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","batchSize"],a);const l=u(t,["learningRate"]);if(e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","learningRate"],l),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function T5(t,e,n){const r={};let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const v=u(t,["validationDataset"]);e!==void 0&&v!=null&&f(e,["supervisedTuningSpec"],yd(v))}else if(i==="PREFERENCE_TUNING"){const v=u(t,["validationDataset"]);e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec"],yd(v))}const o=u(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&f(e,["tunedModelDisplayName"],o);const s=u(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const v=u(t,["epochCount"]);e!==void 0&&v!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],v)}else if(a==="PREFERENCE_TUNING"){const v=u(t,["epochCount"]);e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],v)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const v=u(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],v)}else if(l==="PREFERENCE_TUNING"){const v=u(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],v)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const v=u(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],v)}else if(c==="PREFERENCE_TUNING"){const v=u(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],v)}let p=u(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const v=u(t,["adapterSize"]);e!==void 0&&v!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v)}else if(p==="PREFERENCE_TUNING"){const v=u(t,["adapterSize"]);e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],v)}if(u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=u(t,["labels"]);e!==void 0&&m!=null&&f(e,["labels"],m);const y=u(t,["beta"]);return e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],y),r}function k5(t,e){const n={},r=u(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);const i=u(t,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);const o=u(t,["trainingDataset"]);o!=null&&B5(o);const s=u(t,["config"]);return s!=null&&C5(s,n),n}function I5(t,e){const n={},r=u(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);const i=u(t,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);const o=u(t,["trainingDataset"]);o!=null&&q5(o,n,e);const s=u(t,["config"]);return s!=null&&T5(s,n,e),n}function E5(t,e){const n={},r=u(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function P5(t,e){const n={},r=u(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function L5(t,e,n){const r={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const s=u(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),r}function R5(t,e,n){const r={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const s=u(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),r}function M5(t,e){const n={},r=u(t,["config"]);return r!=null&&L5(r,n),n}function D5(t,e){const n={},r=u(t,["config"]);return r!=null&&R5(r,n),n}function F5(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);const o=u(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Df(a))),f(n,["tuningJobs"],s)}return n}function j5(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);const o=u(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Vl(a))),f(n,["tuningJobs"],s)}return n}function U5(t,e){const n={},r=u(t,["name"]);r!=null&&f(n,["model"],r);const i=u(t,["name"]);return i!=null&&f(n,["endpoint"],i),n}function B5(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=u(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(n,["examples","examples"],i)}return n}function q5(t,e,n){const r={};let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=u(t,["gcsUri"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=u(t,["gcsUri"]);e!==void 0&&s!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Df(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&f(n,["name"],i);const o=u(t,["state"]);o!=null&&f(n,["state"],Kd(o));const s=u(t,["createTime"]);s!=null&&f(n,["createTime"],s);const a=u(t,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);const l=u(t,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);const p=u(t,["description"]);p!=null&&f(n,["description"],p);const m=u(t,["baseModel"]);m!=null&&f(n,["baseModel"],m);const y=u(t,["_self"]);return y!=null&&f(n,["tunedModel"],U5(y)),n}function Vl(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&f(n,["name"],i);const o=u(t,["state"]);o!=null&&f(n,["state"],Kd(o));const s=u(t,["createTime"]);s!=null&&f(n,["createTime"],s);const a=u(t,["startTime"]);a!=null&&f(n,["startTime"],a);const l=u(t,["endTime"]);l!=null&&f(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);const p=u(t,["error"]);p!=null&&f(n,["error"],p);const m=u(t,["description"]);m!=null&&f(n,["description"],m);const y=u(t,["baseModel"]);y!=null&&f(n,["baseModel"],y);const v=u(t,["tunedModel"]);v!=null&&f(n,["tunedModel"],v);const N=u(t,["preTunedModel"]);N!=null&&f(n,["preTunedModel"],N);const A=u(t,["supervisedTuningSpec"]);A!=null&&f(n,["supervisedTuningSpec"],A);const S=u(t,["preferenceOptimizationSpec"]);S!=null&&f(n,["preferenceOptimizationSpec"],S);const w=u(t,["tuningDataStats"]);w!=null&&f(n,["tuningDataStats"],w);const _=u(t,["encryptionSpec"]);_!=null&&f(n,["encryptionSpec"],_);const T=u(t,["partnerModelTuningSpec"]);T!=null&&f(n,["partnerModelTuningSpec"],T);const D=u(t,["customBaseModel"]);D!=null&&f(n,["customBaseModel"],D);const k=u(t,["experiment"]);k!=null&&f(n,["experiment"],k);const F=u(t,["labels"]);F!=null&&f(n,["labels"],F);const P=u(t,["outputUri"]);P!=null&&f(n,["outputUri"],P);const M=u(t,["pipelineJob"]);M!=null&&f(n,["pipelineJob"],M);const j=u(t,["serviceAccount"]);j!=null&&f(n,["serviceAccount"],j);const $=u(t,["tunedModelDisplayName"]);$!=null&&f(n,["tunedModelDisplayName"],$);const I=u(t,["veoTuningSpec"]);return I!=null&&f(n,["veoTuningSpec"],I),n}function O5(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&f(n,["name"],i);const o=u(t,["metadata"]);o!=null&&f(n,["metadata"],o);const s=u(t,["done"]);s!=null&&f(n,["done"],s);const a=u(t,["error"]);return a!=null&&f(n,["error"],a),n}function yd(t,e){const n={},r=u(t,["gcsUri"]);r!=null&&f(n,["validationDatasetUri"],r);const i=u(t,["vertexDatasetResource"]);return i!=null&&f(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H5 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ti(Lr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Pl.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=P5(e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>Vl(p))}else{const c=E5(e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>Df(p))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=D5(e);return a=De("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=j5(p),y=new Gu;return Object.assign(y,m),y})}else{const c=M5(e);return a=De("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=F5(p),y=new Gu;return Object.assign(y,m),y})}}async cancel(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=S5(e);return a=De("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=A5(p),y=new zu;return Object.assign(y,m),y})}else{const c=N5(e);return a=De("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=_5(p),y=new zu;return Object.assign(y,m),y})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=I5(e,e);return o=De("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>Vl(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=k5(e);return o=De("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:l.headers},p})),i.then(l=>O5(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V5{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const G5=1024*1024*8,z5=3,W5=1e3,$5=2,ya="x-goog-upload-status";async function J5(t,e,n){var r;const i=await Ff(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ya])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function Y5(t,e,n){var r;const i=await Ff(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ya])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=Gd(o),a=new ic;return Object.assign(a,s),a}async function Ff(t,e,n){var r,i;let o=0,s=0,a=new Ll(new Response),l="upload";for(o=t.size;s<o;){const c=Math.min(G5,o-s),p=t.slice(s,s+c);s+c>=o&&(l+=", finalize");let m=0,y=W5;for(;m<z5&&(a=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[ya]));)m++,await X5(y),y=y*$5;if(s+=c,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[ya])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function K5(t){return{size:t.size,type:t.type}}function X5(t){return new Promise(e=>setTimeout(e,t))}class Q5{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await J5(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Y5(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await K5(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z5{create(e,n,r){return new ev(e,n,r)}}class ev{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xd="x-goog-api-key";class tv{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(xd)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(xd,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nv="gl-node/";class rv{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Qt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Xh(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new tv(this.apiKey);this.apiClient=new K1({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:nv+"web",uploader:new Q5,downloader:new V5}),this.models=new g2(this.apiClient),this.live=new c2(this.apiClient,i,new Z5),this.batches=new C0(this.apiClient),this.chats=new ag(this.models,this.apiClient),this.caches=new ig(this.apiClient),this.files=new vg(this.apiClient),this.operations=new m2(this.apiClient),this.authTokens=new L2(this.apiClient),this.tunings=new H5(this.apiClient),this.fileSearchStores=new q2(this.apiClient)}}const iv=t=>t.text||"",ov=async(t,e)=>{var r;const n=new rv({apiKey:"PLACEHOLDER_API_KEY"});try{const o=`
            As a business data analyst, review the following sales data for an online business in Cambodia. Provide a concise summary of key insights and actionable recommendations, **written in clear Khmer language**.

            **Filters Applied for this Report:** ${[`Date Range: ${e.datePreset==="all"?"All Time":`${e.startDate} to ${e.endDate}`}`,`Team: ${e.team||"All"}`,`User: ${e.user||"All"}`,`Payment Status: ${e.paymentStatus||"All"}`].join("; ")}

            **Key Metrics Summary:**
            - Total Revenue: $${((r=t.revenue)==null?void 0:r.toFixed(2))||0}
            - Total Orders: ${t.totalOrders||0}

            **Your analysis should be a bulleted list covering:**
            1.  An overall summary of business performance.
            2.  Identify potential areas of concern or opportunities for growth.
            3.  Provide one strategic recommendation to improve sales.
        `,s=await n.models.generateContent({model:"gemini-3-pro-preview",contents:o});return iv(s)||"Could not generate analysis from Gemini."}catch(i){return console.error("Gemini report analysis error:",i),"Could not generate analysis from Gemini."}},sv=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-2",children:[h.jsx("path",{d:"M12 2C11.4696 2 10.9609 2.21071 10.5858 2.58579C10.2107 2.96086 10 3.46957 10 4V4.53C8.7 5.2 7.64 6.27 7 7.53L6.5 7.03C6.12275 6.65624 5.6122 6.44963 5.08003 6.44963C4.54786 6.44963 4.03731 6.65624 3.65997 7.03C3.28263 7.40376 3.07602 7.91431 3.07602 8.44648C3.07602 8.97865 3.28263 9.4892 3.65997 9.86297L4.16 10.3C3.5 11.56 2.82 12.98 2.59 14.5H2C1.46957 14.5 0.960859 14.7107 0.585786 15.0858C0.210714 15.4609 0 15.9696 0 16.5C0 17.0304 0.210714 17.5391 0.585786 17.9142C0.960859 18.2893 1.46957 18.5 2 18.5H2.59C3.12 20.31 4.28 21.88 5.84 22.95C6.34 23.23 6.94 23.09 7.22 22.59C7.5 22.09 7.36 21.49 6.86 21.21C5.7 20.41 4.81 19.24 4.34 17.87L12 14.01L19.66 17.87C19.19 19.24 18.3 20.41 17.14 21.21C16.64 21.5 16.5 22.1 16.78 22.59C17.06 23.09 17.66 23.23 18.16 22.95C19.72 21.88 20.88 20.31 21.41 18.5H22C22.5304 18.5 23.0391 18.2893 23.4142 17.9142C23.7893 17.5391 24 17.0304 24 16.5C24 15.9696 23.7893 15.4609 23.4142 15.0858C23.0391 14.7107 22.5304 14.5 22 14.5H21.41C21.18 12.98 20.5 11.56 19.84 10.3L20.34 9.86297C20.7174 9.4892 20.924 8.97865 20.924 8.44648C20.924 7.91431 20.7174 7.40376 20.34 7.03C19.9627 6.65624 19.4521 6.44963 18.92 6.44963C18.3878 6.44963 17.8773 6.65624 17.5 7.03L17 7.53C16.36 6.27 15.3 5.2 14 4.53V4C14 3.46957 13.7893 2.96086 13.4142 2.58579C13.0391 2.21071 12.5304 2 12 2Z",fill:"url(#paint0_linear_1_2)"}),h.jsx("defs",{children:h.jsxs("linearGradient",{id:"paint0_linear_1_2",x1:"12",y1:"2",x2:"12",y2:"22.95",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#93c5fd"}),h.jsx("stop",{offset:"1",stopColor:"#3b82f6"})]})})]}),av=({onClick:t,isLoading:e,disabled:n=!1,children:r,className:i=""})=>h.jsxs("button",{type:"button",onClick:t,disabled:e||n,className:`btn btn-secondary flex items-center justify-center !p-2 text-sm transition-all duration-300 ease-in-out border border-blue-500/50 bg-gray-700 hover:bg-blue-800/40 hover:border-blue-500 disabled:cursor-not-allowed disabled:bg-gray-800 disabled:opacity-50 ${i}`,children:[e?h.jsx(Pr,{size:"sm"}):h.jsx(sv,{}),h.jsx("span",{className:"ml-1",children:r})]}),Oy=({orders:t,appData:e,dateFilter:n,startDate:r,endDate:i,onNavigate:o,contextFilters:s,onBack:a})=>{var D;const[l,c]=be.useState(""),[p,m]=be.useState(!1),[y,v]=be.useState("All"),N=(k,F)=>{if(o){const P={};s&&(s.team&&(P.team=s.team),s.store&&(P.store=s.store),s.paymentStatus&&(P.paymentStatus=s.paymentStatus),s.user&&(P.user=s.user),s.page&&(P.page=s.page),s.bank&&(P.bank=s.bank),s.product&&(P.product=s.product),s.internalCost&&(P.internalCost=s.internalCost),s.location&&(P.location=s.location)),k==="shippingFilter"&&(P.shipping=F),k==="driverFilter"&&(P.driver=F),k==="fulfillmentStore"&&(P.fulfillmentStore=F),y!=="All"&&k!=="fulfillmentStore"&&(P.fulfillmentStore=y),P.datePreset=n,P.startDate=r,P.endDate=i,o(P)}},A=be.useMemo(()=>y==="All"?t:t.filter(k=>k["Fulfillment Store"]===y),[t,y]),S=be.useMemo(()=>{const k=A.reduce((I,E)=>I+(Number(E["Internal Cost"])||0),0),F=A.reduce((I,E)=>I+(Number(E["Shipping Fee (Customer)"])||0),0),P=F-k,M={},j={},$={};return A.forEach(I=>{var ie,q;const E=I["Internal Shipping Method"]||"Other";if(!M[E]){const L=(ie=e.shippingMethods)==null?void 0:ie.find(G=>G.MethodName===E);M[E]={name:E,cost:0,orders:0,logo:(L==null?void 0:L.LogosURL)||""}}M[E].cost+=Number(I["Internal Cost"])||0,M[E].orders+=1;const z=I["Internal Shipping Details"]||"N/A";if(z!=="N/A"){if(!j[z]){const L=(q=e.drivers)==null?void 0:q.find(G=>G.DriverName===z);j[z]={name:z,cost:0,orders:0,photo:(L==null?void 0:L.ImageURL)||""}}j[z].cost+=Number(I["Internal Cost"])||0,j[z].orders+=1}const K=I["Fulfillment Store"]||"Unassigned";$[K]||($[K]={name:K,cost:0,orders:0}),$[K].cost+=Number(I["Internal Cost"])||0,$[K].orders+=1}),{totalInternalCost:k,totalCustomerFee:F,netShipping:P,totalOrders:A.length,methods:Object.values(M).sort((I,E)=>E.cost-I.cost),drivers:Object.values(j).sort((I,E)=>E.cost-I.cost),stores:Object.values($).sort((I,E)=>E.cost-I.cost)}},[A,e]),w=async()=>{m(!0);try{const k=await ov(S,{reportType:"shipping"});c(k)}catch{c("AI Analysis error.")}finally{m(!1)}},_=()=>{let k="\uFEFF";k+=`SHIPPING COST REPORT SUMMARY
`,k+=`Generated Date,${new Date().toLocaleDateString()}
`,k+=`Period,${n==="custom"?`${r} to ${i}`:n}
`,k+=`Filter Store,${y}

`,k+=`Metric,Value
`,k+=`Total Internal Cost,${S.totalInternalCost.toFixed(2)}
`,k+=`Total Customer Fee,${S.totalCustomerFee.toFixed(2)}
`,k+=`Net Shipping,${S.netShipping.toFixed(2)}
`,k+=`Total Orders,${S.totalOrders}

`,k+=`SHIPPING METHODS (COMPANIES)
`,k+=`Company Name,Total Orders,Total Cost ($)
`,S.methods.forEach(j=>{k+=`"${j.name}",${j.orders},${j.cost.toFixed(2)}
`}),k+=`
`,k+=`DRIVERS
`,k+=`Driver Name,Total Orders,Total Cost ($)
`,S.drivers.forEach(j=>{k+=`"${j.name}",${j.orders},${j.cost.toFixed(2)}
`}),k+=`
`,k+=`FULFILLMENT STORES (STOCK)
`,k+=`Store Name,Total Orders,Total Cost ($)
`,S.stores.forEach(j=>{k+=`"${j.name}",${j.orders},${j.cost.toFixed(2)}
`});const F=new Blob([k],{type:"text/csv;charset=utf-8;"}),P=document.createElement("a"),M=URL.createObjectURL(F);P.setAttribute("href",M),P.setAttribute("download",`Shipping_Report_${y}_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(P),P.click(),document.body.removeChild(P)},T=()=>{const k=window.open("","_blank");if(!k){alert("Please allow popups to view the report.");return}const F=n==="custom"?`${r} to ${i}`:n.toUpperCase(),P=(j,$)=>j.map((I,E)=>`
                <tr class="border-b border-gray-200 hover:bg-gray-50">
                    <td class="py-3 px-4 text-sm text-gray-700 font-bold">${E+1}</td>
                    <td class="py-3 px-4 text-sm font-bold text-gray-800">${I.name}</td>
                    <td class="py-3 px-4 text-center text-sm font-mono font-bold text-blue-600">${I.orders}</td>
                    <td class="py-3 px-4 text-right text-sm font-mono font-bold text-gray-800">$${I.cost.toLocaleString(void 0,{minimumFractionDigits:2})}</td>
                </tr>
            `).join(""),M=`
            <!DOCTYPE html>
            <html lang="km">
            <head>
                <meta charset="UTF-8">
                <title>Shipping Report - ${y}</title>
                <script src="https://cdn.tailwindcss.com"><\/script>
                <link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
                <style>
                    body { font-family: 'Kantumruy Pro', sans-serif; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
                    @media print { 
                        .no-print { display: none !important; } 
                        body { background: white; }
                        .page-break { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body class="bg-gray-100 min-h-screen py-10 print:py-0">
                
                <!-- Action Bar (Hidden on Print) -->
                <div class="no-print fixed top-0 left-0 right-0 bg-gray-900 text-white p-4 shadow-lg flex justify-between items-center z-50">
                    <div class="font-bold text-lg">Shipping Report Preview</div>
                    <div class="flex gap-3">
                        <button onclick="window.close()" class="px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 transition">Close</button>
                        <button onclick="window.print()" class="px-6 py-2 rounded bg-blue-600 hover:bg-blue-500 font-bold transition shadow-lg flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg>
                            Print / Save as PDF
                        </button>
                    </div>
                </div>

                <!-- Report Container (A4 Style) -->
                <div class="max-w-[210mm] mx-auto bg-white p-10 shadow-2xl print:shadow-none print:w-full mt-10 print:mt-0 mb-10">
                    
                    <!-- Header -->
                    <div class="flex justify-between items-start border-b-2 border-black pb-6 mb-8">
                        <div>
                            <h1 class="text-3xl font-black text-gray-900 uppercase tracking-tight"></h1>
                            <p class="text-sm text-gray-500 font-bold mt-1 uppercase tracking-widest">Shipping & Fulfillment Cost</p>
                        </div>
                        <div class="text-right">
                            <p class="text-xs font-bold text-gray-500 uppercase">Period</p>
                            <p class="text-sm font-black text-gray-900">${F}</p>
                            <p class="text-xs font-bold text-gray-500 uppercase mt-2">Filter Store</p>
                            <p class="text-sm font-black text-blue-600">${y}</p>
                        </div>
                    </div>

                    <!-- Summary Cards -->
                    <div class="grid grid-cols-3 gap-6 mb-10">
                        <div class="p-4 bg-red-50 rounded-xl border border-red-100 text-center">
                            <p class="text-xs font-black text-red-400 uppercase tracking-widest mb-1">Total Internal Cost</p>
                            <p class="text-2xl font-black text-gray-800">$${S.totalInternalCost.toLocaleString()}</p>
                        </div>
                        <div class="p-4 bg-green-50 rounded-xl border border-green-100 text-center">
                            <p class="text-xs font-black text-green-500 uppercase tracking-widest mb-1">Customer Fees</p>
                            <p class="text-2xl font-black text-gray-800">$${S.totalCustomerFee.toLocaleString()}</p>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-xl border border-gray-200 text-center">
                            <p class="text-xs font-black text-gray-500 uppercase tracking-widest mb-1">Total Orders</p>
                            <p class="text-2xl font-black text-gray-800">${S.totalOrders}</p>
                        </div>
                    </div>

                    <!-- Table 1: Companies -->
                    <div class="mb-10 page-break">
                        <h2 class="text-lg font-black text-blue-800 border-l-4 border-blue-600 pl-3 mb-4 uppercase">1.  (Companies)</h2>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-blue-600 text-white">
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase w-12">#</th>
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase">Company Name</th>
                                    <th class="py-2 px-4 text-center text-xs font-black uppercase w-24">Orders</th>
                                    <th class="py-2 px-4 text-right text-xs font-black uppercase w-32">Cost ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${P(S.methods)}
                            </tbody>
                            <tfoot class="bg-gray-100 font-black">
                                <tr>
                                    <td colspan="2" class="py-3 px-4 text-right uppercase text-xs tracking-widest text-gray-500">Total</td>
                                    <td class="py-3 px-4 text-center text-blue-600">${S.methods.reduce((j,$)=>j+$.orders,0)}</td>
                                    <td class="py-3 px-4 text-right text-gray-900">$${S.methods.reduce((j,$)=>j+$.cost,0).toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <!-- Table 2: Drivers -->
                    <div class="mb-10 page-break">
                        <h2 class="text-lg font-black text-emerald-700 border-l-4 border-emerald-600 pl-3 mb-4 uppercase">2.  (Drivers)</h2>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-emerald-600 text-white">
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase w-12">#</th>
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase">Driver Name</th>
                                    <th class="py-2 px-4 text-center text-xs font-black uppercase w-24">Orders</th>
                                    <th class="py-2 px-4 text-right text-xs font-black uppercase w-32">Cost ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${P(S.drivers)}
                            </tbody>
                            <tfoot class="bg-gray-100 font-black">
                                <tr>
                                    <td colspan="2" class="py-3 px-4 text-right uppercase text-xs tracking-widest text-gray-500">Total</td>
                                    <td class="py-3 px-4 text-center text-blue-600">${S.drivers.reduce((j,$)=>j+$.orders,0)}</td>
                                    <td class="py-3 px-4 text-right text-gray-900">$${S.drivers.reduce((j,$)=>j+$.cost,0).toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <!-- Table 3: Stores -->
                    <div class="page-break">
                        <h2 class="text-lg font-black text-orange-700 border-l-4 border-orange-500 pl-3 mb-4 uppercase">3.  (Fulfillment Stores)</h2>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-orange-500 text-white">
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase w-12">#</th>
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase">Store Name</th>
                                    <th class="py-2 px-4 text-center text-xs font-black uppercase w-24">Orders</th>
                                    <th class="py-2 px-4 text-right text-xs font-black uppercase w-32">Cost ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${P(S.stores)}
                            </tbody>
                            <tfoot class="bg-gray-100 font-black">
                                <tr>
                                    <td colspan="2" class="py-3 px-4 text-right uppercase text-xs tracking-widest text-gray-500">Total</td>
                                    <td class="py-3 px-4 text-center text-blue-600">${S.stores.reduce((j,$)=>j+$.orders,0)}</td>
                                    <td class="py-3 px-4 text-right text-gray-900">$${S.stores.reduce((j,$)=>j+$.cost,0).toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <div class="mt-12 pt-6 border-t border-gray-200 text-center text-xs text-gray-400">
                        Generated by O-System on ${new Date().toLocaleString("km-KH")}
                    </div>

                </div>
            </body>
            </html>
        `;k.document.write(M),k.document.close()};return h.jsxs("div",{className:"space-y-8 animate-fade-in pb-12",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-gray-900/40 p-4 rounded-3xl border border-white/5",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[a&&h.jsx("button",{onClick:a,className:"bg-gray-800 p-3 rounded-2xl border border-gray-700 hover:bg-gray-700 active:scale-95 transition-all",children:h.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tight",children:""}),h.jsx("p",{className:"text-xs text-gray-500 font-bold mt-1",children:"Shipping & Fulfillment Cost Analysis"})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center w-full sm:w-auto",children:[h.jsxs("div",{className:"bg-gray-800 p-1 rounded-xl border border-white/10 flex items-center w-full sm:w-auto",children:[h.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase px-3 whitespace-nowrap",children:"View:"}),h.jsxs("select",{value:y,onChange:k=>v(k.target.value),className:"bg-transparent border-none text-xs font-black text-white focus:ring-0 cursor-pointer py-1.5 pr-8 pl-1 w-full",children:[h.jsx("option",{value:"All",children:"All Stores"}),(D=e.stores)==null?void 0:D.map(k=>h.jsx("option",{value:k.StoreName,children:k.StoreName},k.StoreName))]})]}),h.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[h.jsxs("button",{onClick:_,className:"flex-1 sm:flex-none justify-center px-4 py-2.5 bg-emerald-600/10 border border-emerald-500/30 text-emerald-400 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-emerald-600 hover:text-white transition-all flex items-center gap-2 active:scale-95",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Excel"]}),h.jsxs("button",{onClick:T,className:"flex-1 sm:flex-none justify-center px-4 py-2.5 bg-red-600/10 border border-red-500/30 text-red-400 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-red-600 hover:text-white transition-all flex items-center gap-2 active:scale-95",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"View & Print"]})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsx(Qs,{label:"",value:`$${S.totalInternalCost.toLocaleString()}`,icon:"",colorClass:"from-orange-600 to-red-500"}),h.jsx(Qs,{label:"",value:`$${S.totalCustomerFee.toLocaleString()}`,icon:"",colorClass:"from-blue-600 to-indigo-500"}),h.jsx(Qs,{label:" (Net)",value:`$${S.netShipping.toLocaleString()}`,icon:"",colorClass:S.netShipping>=0?"from-emerald-600 to-teal-500":"from-red-600 to-pink-500"}),h.jsx(Qs,{label:"",value:S.totalOrders,icon:"",colorClass:"from-purple-600 to-blue-500"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[h.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[h.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5",children:[h.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-2",children:""}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest border-b border-gray-800",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3",children:""}),h.jsx("th",{className:"px-4 py-3 text-center",children:" Orders"}),h.jsx("th",{className:"px-4 py-3 text-right",children:" ($)"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-800",children:S.methods.map((k,F)=>h.jsxs("tr",{className:"hover:bg-white/5",children:[h.jsxs("td",{className:"px-4 py-3 font-bold text-gray-200 flex items-center gap-3",children:[h.jsx("img",{src:st(k.logo),className:"w-8 h-8 rounded-lg object-contain bg-gray-800 p-1 border border-gray-700",alt:""}),k.name]}),h.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-400 cursor-pointer hover:underline hover:text-blue-300 transition-colors",onClick:()=>N("shippingFilter",k.name),children:k.orders}),h.jsxs("td",{className:"px-4 py-3 text-right font-black text-white cursor-pointer hover:underline hover:text-gray-300 transition-colors",onClick:()=>N("shippingFilter",k.name),children:["$",k.cost.toLocaleString(void 0,{minimumFractionDigits:2})]})]},F))}),h.jsx("tfoot",{className:"bg-white/5 border-t-2 border-white/10",children:h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Grand Total"}),h.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-300 text-base",children:S.methods.reduce((k,F)=>k+F.orders,0)}),h.jsxs("td",{className:"px-4 py-3 text-right font-black text-emerald-400 text-base",children:["$",S.methods.reduce((k,F)=>k+F.cost,0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})})]}),h.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5",children:[h.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-2",children:" (Drivers)"}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest border-b border-gray-800",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3",children:""}),h.jsx("th",{className:"px-4 py-3 text-center",children:" Orders"}),h.jsx("th",{className:"px-4 py-3 text-right",children:" ($)"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-800",children:S.drivers.map((k,F)=>h.jsxs("tr",{className:"hover:bg-white/5",children:[h.jsxs("td",{className:"px-4 py-3 font-bold text-gray-200 flex items-center gap-3",children:[h.jsx("img",{src:st(k.photo),className:"w-8 h-8 rounded-full object-cover bg-gray-800 border border-gray-700",alt:""}),k.name]}),h.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-400 cursor-pointer hover:underline hover:text-blue-300 transition-colors",onClick:()=>N("driverFilter",k.name),children:k.orders}),h.jsxs("td",{className:"px-4 py-3 text-right font-black text-white cursor-pointer hover:underline hover:text-gray-300 transition-colors",onClick:()=>N("driverFilter",k.name),children:["$",k.cost.toLocaleString(void 0,{minimumFractionDigits:2})]})]},F))}),h.jsx("tfoot",{className:"bg-white/5 border-t-2 border-white/10",children:h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Grand Total"}),h.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-300 text-base",children:S.drivers.reduce((k,F)=>k+F.orders,0)}),h.jsxs("td",{className:"px-4 py-3 text-right font-black text-emerald-400 text-base",children:["$",S.drivers.reduce((k,F)=>k+F.cost,0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})})]}),h.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5",children:[h.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-2",children:" Fulfillment Store (Stock)"}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest border-b border-gray-800",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3",children:" (Store)"}),h.jsx("th",{className:"px-4 py-3 text-center",children:" Orders"}),h.jsx("th",{className:"px-4 py-3 text-right",children:" ($)"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-800",children:S.stores.map((k,F)=>h.jsxs("tr",{className:"hover:bg-white/5",children:[h.jsxs("td",{className:"px-4 py-3 font-bold text-gray-200 flex items-center gap-3",children:[h.jsxs("span",{className:"w-8 h-8 rounded-lg bg-gray-800 text-gray-400 flex items-center justify-center text-[10px] border border-gray-700",children:["#",F+1]}),k.name]}),h.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-400 cursor-pointer hover:underline hover:text-blue-300 transition-colors",onClick:()=>N("fulfillmentStore",k.name),children:k.orders}),h.jsxs("td",{className:"px-4 py-3 text-right font-black text-white cursor-pointer hover:underline hover:text-gray-300 transition-colors",onClick:()=>N("fulfillmentStore",k.name),children:["$",k.cost.toLocaleString(void 0,{minimumFractionDigits:2})]})]},F))}),h.jsx("tfoot",{className:"bg-white/5 border-t-2 border-white/10",children:h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Grand Total"}),h.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-300 text-base",children:S.stores.reduce((k,F)=>k+F.orders,0)}),h.jsxs("td",{className:"px-4 py-3 text-right font-black text-emerald-400 text-base",children:["$",S.stores.reduce((k,F)=>k+F.cost,0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})})]})]}),h.jsx("div",{className:"lg:col-span-4",children:h.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5 h-full flex flex-col shadow-2xl relative overflow-hidden group",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8 relative z-10",children:[h.jsx("div",{children:h.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest",children:" AI"})}),h.jsx(av,{onClick:w,isLoading:p,children:"Analyze"})]}),h.jsx("div",{className:"flex-grow bg-black/40 rounded-3xl p-6 border border-white/5 overflow-y-auto custom-scrollbar min-h-[300px] relative z-10",children:l?h.jsx("div",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:l}):h.jsx("div",{className:"flex flex-col items-center justify-center h-full opacity-20 text-center",children:h.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:' "Analyze" '})})})]})})]})]})},Hy=({data:t,title:e})=>{const[n,r]=be.useState(null);if(!t||t.length===0)return h.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 min-h-[300px]",children:"No data available for chart."});const i=350,o=500,s=50,a=100,l=40,c=10,p=i-l-10,m=o/t.length-c,y=Math.max(...t.map(_=>_.value),0),v=y===0?0:p/y,N=(_,T)=>{const D=_.currentTarget.getBoundingClientRect(),k=`${T.label}: $${T.value.toFixed(2)}`;r({visible:!0,x:D.left+window.scrollX,y:D.top+window.scrollY,content:k})},A=()=>{r(null)},w=(_=>{if(_===0)return[0];const T=5;let D=Math.ceil(_/T);const k=Math.pow(10,Math.floor(Math.log10(D||1))),F=D/k;return k>0&&(F>5?D=10*k:F>2?D=5*k:F>1&&(D=2*k)),D===0?[0,_]:Array.from({length:T+2},(P,M)=>M*D).filter(P=>P<=_*1.1)})(y);return h.jsxs("div",{className:"relative",children:[h.jsx("h3",{className:"text-lg font-bold mb-4 text-white text-center",children:e}),h.jsx("div",{className:"w-full overflow-x-auto",children:h.jsxs("svg",{viewBox:`0 0 ${o+s} ${i+a}`,className:"min-w-[500px]",preserveAspectRatio:"xMinYMin meet",children:[h.jsx("g",{className:"y-axis",children:w.map(_=>h.jsxs("g",{transform:`translate(0, ${i-_*v})`,children:[h.jsx("line",{x1:s-5,y1:"0",x2:o+s,y2:"0",stroke:"#374151"}),h.jsx("text",{x:s-10,y:"3",textAnchor:"end",fill:"#9ca3af",fontSize:"12",children:_>=1e3?`${(_/1e3).toFixed(0)}k`:_})]},_))}),h.jsx("g",{className:"bars",transform:`translate(${s}, 0)`,children:t.map((_,T)=>{const D=_.value*v,k=T*(m+c)+c/2,F=i-D,P=30;return h.jsxs("g",{children:[_.imageUrl&&h.jsx("image",{href:st(_.imageUrl),x:k+m/2-P/2,y:F-P-5,height:P,width:P,clipPath:`circle(${P/2}px at center)`}),h.jsx("rect",{x:k,y:F,width:m,height:D,fill:"#3b82f6",className:"transition-all duration-300 hover:opacity-80",onMouseOver:M=>N(M,_),onMouseOut:A}),h.jsx("text",{x:k+m/2,y:i+15,textAnchor:"end",fill:"#9ca3af",fontSize:"12",className:"select-none",transform:`rotate(-60 ${k+m/2},${i+15})`,children:_.label})]},T)})})]})}),n&&h.jsx("div",{className:"fixed p-2 text-xs text-white bg-gray-900 border border-gray-600 rounded-md shadow-lg z-50",style:{left:n.x,top:n.y-35,pointerEvents:"none",transform:"translateX(-50%)"},children:n.content})]})};function bt(t){"@babel/helpers - typeof";return bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(t)}var un=Uint8Array,In=Uint16Array,fc=Int32Array,Ta=new un([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ka=new un([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Gl=new un([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jf=function(t,e){for(var n=new In(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new fc(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},Uf=jf(Ta,2),Bf=Uf.b,zl=Uf.r;Bf[28]=258,zl[258]=28;var qf=jf(ka,0),lv=qf.b,bd=qf.r,Wl=new In(32768);for(var kt=0;kt<32768;++kt){var Yr=(kt&43690)>>1|(kt&21845)<<1;Yr=(Yr&52428)>>2|(Yr&13107)<<2,Yr=(Yr&61680)>>4|(Yr&3855)<<4,Wl[kt]=((Yr&65280)>>8|(Yr&255)<<8)>>1}var vr=(function(t,e,n){for(var r=t.length,i=0,o=new In(e);i<r;++i)t[i]&&++o[t[i]-1];var s=new In(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(n){a=new In(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],p=e-t[i],m=s[t[i]-1]++<<p,y=m|(1<<p)-1;m<=y;++m)a[Wl[m]>>l]=c}else for(a=new In(r),i=0;i<r;++i)t[i]&&(a[i]=Wl[s[t[i]-1]++]>>15-t[i]);return a}),ri=new un(288);for(var kt=0;kt<144;++kt)ri[kt]=8;for(var kt=144;kt<256;++kt)ri[kt]=9;for(var kt=256;kt<280;++kt)ri[kt]=7;for(var kt=280;kt<288;++kt)ri[kt]=8;var ss=new un(32);for(var kt=0;kt<32;++kt)ss[kt]=5;var cv=vr(ri,9,0),uv=vr(ri,9,1),dv=vr(ss,5,0),fv=vr(ss,5,1),bl=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Xn=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},wl=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},hc=function(t){return(t+7)/8|0},Of=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new un(t.subarray(e,n))},hv=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Zn=function(t,e,n){var r=new Error(e||hv[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Zn),!n)throw r;return r},pv=function(t,e,n,r){var i=t.length,o=0;if(!i||e.f&&!e.l)return n||new un(0);var s=!n,a=s||e.i!=2,l=e.i;s&&(n=new un(i*3));var c=function(Ce){var Ee=n.length;if(Ce>Ee){var Ie=new un(Math.max(Ee*2,Ce));Ie.set(n),n=Ie}},p=e.f||0,m=e.p||0,y=e.b||0,v=e.l,N=e.d,A=e.m,S=e.n,w=i*8;do{if(!v){p=Xn(t,m,1);var _=Xn(t,m+1,3);if(m+=3,_)if(_==1)v=uv,N=fv,A=9,S=5;else if(_==2){var F=Xn(t,m,31)+257,P=Xn(t,m+10,15)+4,M=F+Xn(t,m+5,31)+1;m+=14;for(var j=new un(M),$=new un(19),I=0;I<P;++I)$[Gl[I]]=Xn(t,m+I*3,7);m+=P*3;for(var E=bl($),z=(1<<E)-1,K=vr($,E,1),I=0;I<M;){var ie=K[Xn(t,m,z)];m+=ie&15;var T=ie>>4;if(T<16)j[I++]=T;else{var q=0,L=0;for(T==16?(L=3+Xn(t,m,3),m+=2,q=j[I-1]):T==17?(L=3+Xn(t,m,7),m+=3):T==18&&(L=11+Xn(t,m,127),m+=7);L--;)j[I++]=q}}var G=j.subarray(0,F),Y=j.subarray(F);A=bl(G),S=bl(Y),v=vr(G,A,1),N=vr(Y,S,1)}else Zn(1);else{var T=hc(m)+4,D=t[T-4]|t[T-3]<<8,k=T+D;if(k>i){l&&Zn(0);break}a&&c(y+D),n.set(t.subarray(T,k),y),e.b=y+=D,e.p=m=k*8,e.f=p;continue}if(m>w){l&&Zn(0);break}}a&&c(y+131072);for(var ne=(1<<A)-1,ue=(1<<S)-1,R=m;;R=m){var q=v[wl(t,m)&ne],V=q>>4;if(m+=q&15,m>w){l&&Zn(0);break}if(q||Zn(2),V<256)n[y++]=V;else if(V==256){R=m,v=null;break}else{var X=V-254;if(V>264){var I=V-257,Q=Ta[I];X=Xn(t,m,(1<<Q)-1)+Bf[I],m+=Q}var ee=N[wl(t,m)&ue],se=ee>>4;ee||Zn(3),m+=ee&15;var Y=lv[se];if(se>3){var Q=ka[se];Y+=wl(t,m)&(1<<Q)-1,m+=Q}if(m>w){l&&Zn(0);break}a&&c(y+131072);var de=y+X;if(y<Y){var pe=o-Y,Ne=Math.min(Y,de);for(pe+y<0&&Zn(3);y<Ne;++y)n[y]=r[pe+y]}for(;y<de;++y)n[y]=n[y-Y]}}e.l=v,e.p=R,e.b=y,e.f=p,v&&(p=1,e.m=A,e.d=N,e.n=S)}while(!p);return y!=n.length&&s?Of(n,0,y):n.subarray(0,y)},Er=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Xo=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},Nl=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,o=n.slice();if(!i)return{t:Vf,l:0};if(i==1){var s=new un(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(k,F){return k.f-F.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,p=1,m=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};p!=i-1;)a=n[n[c].f<n[m].f?c++:m++],l=n[c!=p&&n[c].f<n[m].f?c++:m++],n[p++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=o[0].s,r=1;r<i;++r)o[r].s>y&&(y=o[r].s);var v=new In(y+1),N=$l(n[p-1],v,0);if(N>e){var r=0,A=0,S=N-e,w=1<<S;for(o.sort(function(F,P){return v[P.s]-v[F.s]||F.f-P.f});r<i;++r){var _=o[r].s;if(v[_]>e)A+=w-(1<<N-v[_]),v[_]=e;else break}for(A>>=S;A>0;){var T=o[r].s;v[T]<e?A-=1<<e-v[T]++-1:++r}for(;r>=0&&A;--r){var D=o[r].s;v[D]==e&&(--v[D],++A)}N=e}return{t:new un(v),l:N}},$l=function(t,e,n){return t.s==-1?Math.max($l(t.l,e,n+1),$l(t.r,e,n+1)):e[t.s]=n},wd=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new In(++e),r=0,i=t[0],o=1,s=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Qo=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Hf=function(t,e,n){var r=n.length,i=hc(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var o=0;o<r;++o)t[i+o+4]=n[o];return(i+4+r)*8},Nd=function(t,e,n,r,i,o,s,a,l,c,p){Er(e,p++,n),++i[256];for(var m=Nl(i,15),y=m.t,v=m.l,N=Nl(o,15),A=N.t,S=N.l,w=wd(y),_=w.c,T=w.n,D=wd(A),k=D.c,F=D.n,P=new In(19),M=0;M<_.length;++M)++P[_[M]&31];for(var M=0;M<k.length;++M)++P[k[M]&31];for(var j=Nl(P,7),$=j.t,I=j.l,E=19;E>4&&!$[Gl[E-1]];--E);var z=c+5<<3,K=Qo(i,ri)+Qo(o,ss)+s,ie=Qo(i,y)+Qo(o,A)+s+14+3*E+Qo(P,$)+2*P[16]+3*P[17]+7*P[18];if(l>=0&&z<=K&&z<=ie)return Hf(e,p,t.subarray(l,l+c));var q,L,G,Y;if(Er(e,p,1+(ie<K)),p+=2,ie<K){q=vr(y,v,0),L=y,G=vr(A,S,0),Y=A;var ne=vr($,I,0);Er(e,p,T-257),Er(e,p+5,F-1),Er(e,p+10,E-4),p+=14;for(var M=0;M<E;++M)Er(e,p+3*M,$[Gl[M]]);p+=3*E;for(var ue=[_,k],R=0;R<2;++R)for(var V=ue[R],M=0;M<V.length;++M){var X=V[M]&31;Er(e,p,ne[X]),p+=$[X],X>15&&(Er(e,p,V[M]>>5&127),p+=V[M]>>12)}}else q=cv,L=ri,G=dv,Y=ss;for(var M=0;M<a;++M){var Q=r[M];if(Q>255){var X=Q>>18&31;Xo(e,p,q[X+257]),p+=L[X+257],X>7&&(Er(e,p,Q>>23&31),p+=Ta[X]);var ee=Q&31;Xo(e,p,G[ee]),p+=Y[ee],ee>3&&(Xo(e,p,Q>>5&8191),p+=ka[ee])}else Xo(e,p,q[Q]),p+=L[Q]}return Xo(e,p,q[256]),p+L[256]},gv=new fc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Vf=new un(0),mv=function(t,e,n,r,i,o){var s=o.z||t.length,a=new un(r+s+5*(1+Math.ceil(s/7e3))+i),l=a.subarray(r,a.length-i),c=o.l,p=(o.r||0)&7;if(e){p&&(l[0]=o.r>>3);for(var m=gv[e-1],y=m>>13,v=m&8191,N=(1<<n)-1,A=o.p||new In(32768),S=o.h||new In(N+1),w=Math.ceil(n/3),_=2*w,T=function(He){return(t[He]^t[He+1]<<w^t[He+2]<<_)&N},D=new fc(25e3),k=new In(288),F=new In(32),P=0,M=0,j=o.i||0,$=0,I=o.w||0,E=0;j+2<s;++j){var z=T(j),K=j&32767,ie=S[z];if(A[K]=ie,S[z]=K,I<=j){var q=s-j;if((P>7e3||$>24576)&&(q>423||!c)){p=Nd(t,l,0,D,k,F,M,$,E,j-E,p),$=P=M=0,E=j;for(var L=0;L<286;++L)k[L]=0;for(var L=0;L<30;++L)F[L]=0}var G=2,Y=0,ne=v,ue=K-ie&32767;if(q>2&&z==T(j-ue))for(var R=Math.min(y,q)-1,V=Math.min(32767,j),X=Math.min(258,q);ue<=V&&--ne&&K!=ie;){if(t[j+G]==t[j+G-ue]){for(var Q=0;Q<X&&t[j+Q]==t[j+Q-ue];++Q);if(Q>G){if(G=Q,Y=ue,Q>R)break;for(var ee=Math.min(ue,Q-2),se=0,L=0;L<ee;++L){var de=j-ue+L&32767,pe=A[de],Ne=de-pe&32767;Ne>se&&(se=Ne,ie=de)}}}K=ie,ie=A[K],ue+=K-ie&32767}if(Y){D[$++]=268435456|zl[G]<<18|bd[Y];var Ce=zl[G]&31,Ee=bd[Y]&31;M+=Ta[Ce]+ka[Ee],++k[257+Ce],++F[Ee],I=j+G,++P}else D[$++]=t[j],++k[t[j]]}}for(j=Math.max(j,I);j<s;++j)D[$++]=t[j],++k[t[j]];p=Nd(t,l,c,D,k,F,M,$,E,j-E,p),c||(o.r=p&7|l[p/8|0]<<3,p-=7,o.h=S,o.p=A,o.i=j,o.w=I)}else{for(var j=o.w||0;j<s+c;j+=65535){var Ie=j+65535;Ie>=s&&(l[p/8|0]=c,Ie=s),p=Hf(l,p+1,t.subarray(j,Ie))}o.i=s}return Of(a,0,r+hc(p)+i)},Gf=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,o=n.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=n[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},vv=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new un(o.length+t.length);s.set(o),s.set(t,o.length),t=s,i.w=o.length}return mv(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},zf=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},yv=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=Gf();i.p(e.dictionary),zf(t,2,i.d())}},xv=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Zn(6,"invalid zlib data"),(t[1]>>5&1)==1&&Zn(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Jl(t,e){e||(e={});var n=Gf();n.p(t);var r=vv(t,e,e.dictionary?6:2,4);return yv(r,e),zf(r,r.length-4,n.d()),r}function bv(t,e){return pv(t.subarray(xv(t),-4),{i:2},e,e)}var wv=typeof TextDecoder<"u"&&new TextDecoder,Nv=0;try{wv.decode(Vf,{stream:!0}),Nv=1}catch{}var Je=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Sl(){Je.console&&typeof Je.console.log=="function"&&Je.console.log.apply(Je.console,arguments)}var At={log:Sl,warn:function(t){Je.console&&(typeof Je.console.warn=="function"?Je.console.warn.apply(Je.console,arguments):Sl.call(null,arguments))},error:function(t){Je.console&&(typeof Je.console.error=="function"?Je.console.error.apply(Je.console,arguments):Sl(t))}};function _l(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){bi(r.response,e,n)},r.onerror=function(){At.error("could not download file")},r.send()}function Sd(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ia(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var ts,Yl,bi=Je.saveAs||((typeof window>"u"?"undefined":bt(window))!=="object"||window!==Je?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Je.URL||Je.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Sd(i.href)?_l(t,e,n):ia(i,i.target="_blank"):ia(i)):(i.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){ia(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Sd(t))_l(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){ia(r)}))}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:bt(o)!=="object"&&(At.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return _l(t,e,n);var i=t.type==="application/octet-stream",o=/constructor/i.test(Je.HTMLElement)||Je.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":bt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var p=a.result;p=s?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},a.readAsDataURL(t)}else{var l=Je.URL||Je.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout((function(){l.revokeObjectURL(c)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Wf(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,s=i.exec(t);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Al(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];n=sn(n,r,i,o,e[0],7,-680876936),o=sn(o,n,r,i,e[1],12,-389564586),i=sn(i,o,n,r,e[2],17,606105819),r=sn(r,i,o,n,e[3],22,-1044525330),n=sn(n,r,i,o,e[4],7,-176418897),o=sn(o,n,r,i,e[5],12,1200080426),i=sn(i,o,n,r,e[6],17,-1473231341),r=sn(r,i,o,n,e[7],22,-45705983),n=sn(n,r,i,o,e[8],7,1770035416),o=sn(o,n,r,i,e[9],12,-1958414417),i=sn(i,o,n,r,e[10],17,-42063),r=sn(r,i,o,n,e[11],22,-1990404162),n=sn(n,r,i,o,e[12],7,1804603682),o=sn(o,n,r,i,e[13],12,-40341101),i=sn(i,o,n,r,e[14],17,-1502002290),n=an(n,r=sn(r,i,o,n,e[15],22,1236535329),i,o,e[1],5,-165796510),o=an(o,n,r,i,e[6],9,-1069501632),i=an(i,o,n,r,e[11],14,643717713),r=an(r,i,o,n,e[0],20,-373897302),n=an(n,r,i,o,e[5],5,-701558691),o=an(o,n,r,i,e[10],9,38016083),i=an(i,o,n,r,e[15],14,-660478335),r=an(r,i,o,n,e[4],20,-405537848),n=an(n,r,i,o,e[9],5,568446438),o=an(o,n,r,i,e[14],9,-1019803690),i=an(i,o,n,r,e[3],14,-187363961),r=an(r,i,o,n,e[8],20,1163531501),n=an(n,r,i,o,e[13],5,-1444681467),o=an(o,n,r,i,e[2],9,-51403784),i=an(i,o,n,r,e[7],14,1735328473),n=ln(n,r=an(r,i,o,n,e[12],20,-1926607734),i,o,e[5],4,-378558),o=ln(o,n,r,i,e[8],11,-2022574463),i=ln(i,o,n,r,e[11],16,1839030562),r=ln(r,i,o,n,e[14],23,-35309556),n=ln(n,r,i,o,e[1],4,-1530992060),o=ln(o,n,r,i,e[4],11,1272893353),i=ln(i,o,n,r,e[7],16,-155497632),r=ln(r,i,o,n,e[10],23,-1094730640),n=ln(n,r,i,o,e[13],4,681279174),o=ln(o,n,r,i,e[0],11,-358537222),i=ln(i,o,n,r,e[3],16,-722521979),r=ln(r,i,o,n,e[6],23,76029189),n=ln(n,r,i,o,e[9],4,-640364487),o=ln(o,n,r,i,e[12],11,-421815835),i=ln(i,o,n,r,e[15],16,530742520),n=cn(n,r=ln(r,i,o,n,e[2],23,-995338651),i,o,e[0],6,-198630844),o=cn(o,n,r,i,e[7],10,1126891415),i=cn(i,o,n,r,e[14],15,-1416354905),r=cn(r,i,o,n,e[5],21,-57434055),n=cn(n,r,i,o,e[12],6,1700485571),o=cn(o,n,r,i,e[3],10,-1894986606),i=cn(i,o,n,r,e[10],15,-1051523),r=cn(r,i,o,n,e[1],21,-2054922799),n=cn(n,r,i,o,e[8],6,1873313359),o=cn(o,n,r,i,e[15],10,-30611744),i=cn(i,o,n,r,e[6],15,-1560198380),r=cn(r,i,o,n,e[13],21,1309151649),n=cn(n,r,i,o,e[4],6,-145523070),o=cn(o,n,r,i,e[11],10,-1120210379),i=cn(i,o,n,r,e[2],15,718787259),r=cn(r,i,o,n,e[9],21,-343485551),t[0]=ei(n,t[0]),t[1]=ei(r,t[1]),t[2]=ei(i,t[2]),t[3]=ei(o,t[3])}function Ia(t,e,n,r,i,o){return e=ei(ei(e,t),ei(r,o)),ei(e<<i|e>>>32-i,n)}function sn(t,e,n,r,i,o,s){return Ia(e&n|~e&r,t,e,i,o,s)}function an(t,e,n,r,i,o,s){return Ia(e&r|n&~r,t,e,i,o,s)}function ln(t,e,n,r,i,o,s){return Ia(e^n^r,t,e,i,o,s)}function cn(t,e,n,r,i,o,s){return Ia(n^(e|~r),t,e,i,o,s)}function $f(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Al(r,Sv(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Al(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,Al(r,i),r}function Sv(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}ts=Je.atob.bind(Je),Yl=Je.btoa.bind(Je);var _d="0123456789abcdef".split("");function _v(t){for(var e="",n=0;n<4;n++)e+=_d[t>>8*n+4&15]+_d[t>>8*n&15];return e}function Av(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Kl(t){return $f(t).map(Av).join("")}var Cv=(function(t){for(var e=0;e<t.length;e++)t[e]=_v(t[e]);return t.join("")})($f("hello"))!="5d41402abc4b2a76b9719d911017c592";function ei(t,e){if(Cv){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Xl(t,e){var n,r,i,o;if(t!==n){for(var s=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var p=a[l];c=(c+p+s.charCodeAt(l))%256,a[l]=a[c],a[c]=p}n=t,r=a}else a=r;var m=e.length,y=0,v=0,N="";for(l=0;l<m;l++)v=(v+(p=a[y=(y+1)%256]))%256,a[y]=a[v],a[v]=p,s=a[(a[y]+a[v])%256],N+=String.fromCharCode(e.charCodeAt(l)^s);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ad={print:4,modify:8,copy:16,"annot-forms":32};function lo(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach((function(a){if(Ad.perm!==void 0)throw new Error("Invalid permission: "+a);i+=Ad[a]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=Kl(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Xl(this.encryptionKey,this.padding)}function co(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function Cd(t){if(bt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[r,!!i],o},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[n]){var s=e[n][o];try{s[0].apply(t,r)}catch(a){Je.console&&At.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function as(t){if(!(this instanceof as))return new as(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Jf(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Qr(t,e,n,r,i){if(!(this instanceof Qr))return new Qr(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Jf.call(this,r,i)}function wi(t,e,n,r,i){if(!(this instanceof wi))return new wi(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Jf.call(this,r,i)}function We(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,l=16,c="S",p=null;bt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,o=t.compress||t.compressPdf||o,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),s=t.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,y={},v={internal:{},__private__:{}};v.__private__.PubSub=Cd;var N="1.3",A=v.__private__.getPdfVersion=function(){return N};v.__private__.setPdfVersion=function(x){N=x};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return S};var w=v.__private__.getPageFormat=function(x){return S[x]};i=i||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},T=_.COMPAT;function D(){this.saveGraphicsState(),re(new $e(je,0,0,-je,0,jr()*je).toString()+" cm"),this.setFontSize(this.getFontSize()/je),c="n",T=_.ADVANCED}function k(){this.restoreGraphicsState(),c="S",T=_.COMPAT}var F=v.__private__.combineFontStyleAndFontWeight=function(x,B){if(x=="bold"&&B=="normal"||x=="bold"&&B==400||x=="normal"&&B=="italic"||x=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(x=B==400||B==="normal"?x==="italic"?"italic":"normal":B!=700&&B!=="bold"||x!=="normal"?(B==700?"bold":B)+""+x:"bold"),x};v.advancedAPI=function(x){var B=T===_.COMPAT;return B&&D.call(this),typeof x!="function"||(x(this),B&&k.call(this)),this},v.compatAPI=function(x){var B=T===_.ADVANCED;return B&&k.call(this),typeof x!="function"||(x(this),B&&D.call(this)),this},v.isAdvancedAPI=function(){return T===_.ADVANCED};var P,M=function(x){if(T!==_.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=v.roundToPrecision=v.__private__.roundToPrecision=function(x,B){var te=e||B;if(isNaN(x)||isNaN(te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(te).replace(/0+$/,"")};P=v.hpf=v.__private__.hpf=typeof l=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return j(x,l)}:l==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return j(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return j(x,16)};var $=v.f2=v.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return j(x,2)},I=v.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return j(x,3)},E=v.scale=v.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return T===_.COMPAT?x*je:T===_.ADVANCED?x:void 0},z=function(x){return T===_.COMPAT?jr()-x:T===_.ADVANCED?x:void 0},K=function(x){return E(z(x))};v.__private__.setPrecision=v.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(e=parseInt(x,10))};var ie,q="00000000000000000000000000000000",L=v.__private__.getFileId=function(){return q},G=v.__private__.setFileId=function(x){return q=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():q.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),p!==null&&(rn=new lo(p.userPermissions,p.userPassword,p.ownerPassword,q)),q};v.setFileId=function(x){return G(x),this},v.getFileId=function(){return L()};var Y=v.__private__.convertDateToPDFDate=function(x){var B=x.getTimezoneOffset(),te=B<0?"+":"-",oe=Math.floor(Math.abs(B/60)),he=Math.abs(B%60),xe=[te,X(oe),"'",X(he),"'"].join("");return["D:",x.getFullYear(),X(x.getMonth()+1),X(x.getDate()),X(x.getHours()),X(x.getMinutes()),X(x.getSeconds()),xe].join("")},ne=v.__private__.convertPDFDateToDate=function(x){var B=parseInt(x.substr(2,4),10),te=parseInt(x.substr(6,2),10)-1,oe=parseInt(x.substr(8,2),10),he=parseInt(x.substr(10,2),10),xe=parseInt(x.substr(12,2),10),Te=parseInt(x.substr(14,2),10);return new Date(B,te,oe,he,xe,Te,0)},ue=v.__private__.setCreationDate=function(x){var B;if(x===void 0&&(x=new Date),x instanceof Date)B=Y(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=x}return ie=B},R=v.__private__.getCreationDate=function(x){var B=ie;return x==="jsDate"&&(B=ne(ie)),B};v.setCreationDate=function(x){return ue(x),this},v.getCreationDate=function(x){return R(x)};var V,X=v.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},Q=v.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},ee=0,se=[],de=[],pe=0,Ne=[],Ce=[],Ee=!1,Ie=de,He=function(){ee=0,pe=0,de=[],se=[],Ne=[],br=Ht(),Vn=Ht()};v.__private__.setCustomOutputDestination=function(x){Ee=!0,Ie=x};var ye=function(x){Ee||(Ie=x)};v.__private__.resetCustomOutputDestination=function(){Ee=!1,Ie=de};var re=v.__private__.out=function(x){return x=x.toString(),pe+=x.length+1,Ie.push(x),Ie},Ke=v.__private__.write=function(x){return re(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Oe=v.__private__.getArrayBuffer=function(x){for(var B=x.length,te=new ArrayBuffer(B),oe=new Uint8Array(te);B--;)oe[B]=x.charCodeAt(B);return te},ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return ke};var Pe=t.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(x){return Pe=T===_.ADVANCED?x/je:x,this};var Fe,Me=v.__private__.getFontSize=v.getFontSize=function(){return T===_.COMPAT?Pe:Pe*je},Ve=t.R2L||!1;v.__private__.setR2L=v.setR2L=function(x){return Ve=x,this},v.__private__.getR2L=v.getR2L=function(){return Ve};var Ze,ot=v.__private__.setZoomMode=function(x){var B=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Fe=x;else if(isNaN(x)){if(B.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Fe=x}else Fe=parseInt(x,10)};v.__private__.getZoomMode=function(){return Fe};var at,dt=v.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');Ze=x};v.__private__.getPageMode=function(){return Ze};var wt=v.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');at=x};v.__private__.getLayoutMode=function(){return at},v.__private__.setDisplayMode=v.setDisplayMode=function(x,B,te){return ot(x),wt(B),dt(te),this};var Ye={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(x){if(Object.keys(Ye).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ye[x]},v.__private__.getDocumentProperties=function(){return Ye},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(x){for(var B in Ye)Ye.hasOwnProperty(B)&&x[B]&&(Ye[B]=x[B]);return this},v.__private__.setDocumentProperty=function(x,B){if(Object.keys(Ye).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ye[x]=B};var lt,je,nn,ht,qn,St={},It={},or=[],mt={},si={},Pt={},On={},xr=null,Lt=0,et=[],vt=new Cd(v),ai=t.hotfixes||[],Zt={},sr={},ar=[],$e=function x(B,te,oe,he,xe,Te){if(!(this instanceof x))return new x(B,te,oe,he,xe,Te);isNaN(B)&&(B=1),isNaN(te)&&(te=0),isNaN(oe)&&(oe=0),isNaN(he)&&(he=1),isNaN(xe)&&(xe=0),isNaN(Te)&&(Te=0),this._matrix=[B,te,oe,he,xe,Te]};Object.defineProperty($e.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty($e.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty($e.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty($e.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty($e.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty($e.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty($e.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty($e.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty($e.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty($e.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty($e.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty($e.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty($e.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty($e.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty($e.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty($e.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),$e.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(x)},$e.prototype.multiply=function(x){var B=x.sx*this.sx+x.shy*this.shx,te=x.sx*this.shy+x.shy*this.sy,oe=x.shx*this.sx+x.sy*this.shx,he=x.shx*this.shy+x.sy*this.sy,xe=x.tx*this.sx+x.ty*this.shx+this.tx,Te=x.tx*this.shy+x.ty*this.sy+this.ty;return new $e(B,te,oe,he,xe,Te)},$e.prototype.decompose=function(){var x=this.sx,B=this.shy,te=this.shx,oe=this.sy,he=this.tx,xe=this.ty,Te=Math.sqrt(x*x+B*B),Ue=(x/=Te)*te+(B/=Te)*oe;te-=x*Ue,oe-=B*Ue;var Ge=Math.sqrt(te*te+oe*oe);return Ue/=Ge,x*(oe/=Ge)<B*(te/=Ge)&&(x=-x,B=-B,Ue=-Ue,Te=-Te),{scale:new $e(Te,0,0,Ge,0,0),translate:new $e(1,0,0,1,he,xe),rotate:new $e(x,B,-B,x,0,0),skew:new $e(1,0,Ue,1,0,0)}},$e.prototype.toString=function(x){return this.join(" ")},$e.prototype.inversed=function(){var x=this.sx,B=this.shy,te=this.shx,oe=this.sy,he=this.tx,xe=this.ty,Te=1/(x*oe-B*te),Ue=oe*Te,Ge=-B*Te,rt=-te*Te,tt=x*Te;return new $e(Ue,Ge,rt,tt,-Ue*he-rt*xe,-Ge*he-tt*xe)},$e.prototype.applyToPoint=function(x){var B=x.x*this.sx+x.y*this.shx+this.tx,te=x.x*this.shy+x.y*this.sy+this.ty;return new Hi(B,te)},$e.prototype.applyToRectangle=function(x){var B=this.applyToPoint(x),te=this.applyToPoint(new Hi(x.x+x.w,x.y+x.h));return new Io(B.x,B.y,te.x-B.x,te.y-B.y)},$e.prototype.clone=function(){var x=this.sx,B=this.shy,te=this.shx,oe=this.sy,he=this.tx,xe=this.ty;return new $e(x,B,te,oe,he,xe)},v.Matrix=$e;var Hn=v.matrixMult=function(x,B){return B.multiply(x)},lr=new $e(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=lr;var vn=function(x,B){if(!si[x]){var te=(B instanceof Qr?"Sh":"P")+(Object.keys(mt).length+1).toString(10);B.id=te,si[x]=te,mt[te]=B,vt.publish("addPattern",B)}};v.ShadingPattern=Qr,v.TilingPattern=wi,v.addShadingPattern=function(x,B){return M("addShadingPattern()"),vn(x,B),this},v.beginTilingPattern=function(x){M("beginTilingPattern()"),Cs(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},v.endTilingPattern=function(x,B){M("endTilingPattern()"),B.stream=Ce[V].join(`
`),vn(x,B),vt.publish("endTilingPattern",B),ar.pop().restore()};var Wt=v.__private__.newObject=function(){var x=Ht();return _n(x,!0),x},Ht=v.__private__.newObjectDeferred=function(){return ee++,se[ee]=function(){return pe},ee},_n=function(x,B){return B=typeof B=="boolean"&&B,se[x]=pe,B&&re(x+" 0 obj"),x},Ii=v.__private__.newAdditionalObject=function(){var x={objId:Ht(),content:""};return Ne.push(x),x},br=Ht(),Vn=Ht(),Gn=v.__private__.decodeColorString=function(x){var B=x.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length===5&&(B[4]==="k"||B[4]==="K")&&(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var te=parseFloat(B[0]);B=[te,te,te,"r"]}for(var oe="#",he=0;he<3;he++)oe+=("0"+Math.floor(255*parseFloat(B[he])).toString(16)).slice(-2);return oe},zn=v.__private__.encodeColorString=function(x){var B;typeof x=="string"&&(x={ch1:x});var te=x.ch1,oe=x.ch2,he=x.ch3,xe=x.ch4,Te=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof te=="string"&&te.charAt(0)!=="#"){var Ue=new Wf(te);if(Ue.ok)te=Ue.toHex();else if(!/^\d*\.?\d*$/.test(te))throw new Error('Invalid color "'+te+'" passed to jsPDF.encodeColorString.')}if(typeof te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(te)&&(te="#"+te[1]+te[1]+te[2]+te[2]+te[3]+te[3]),typeof te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(te)){var Ge=parseInt(te.substr(1),16);te=Ge>>16&255,oe=Ge>>8&255,he=255&Ge}if(oe===void 0||xe===void 0&&te===oe&&oe===he)if(typeof te=="string")B=te+" "+Te[0];else switch(x.precision){case 2:B=$(te/255)+" "+Te[0];break;case 3:default:B=I(te/255)+" "+Te[0]}else if(xe===void 0||bt(xe)==="object"){if(xe&&!isNaN(xe.a)&&xe.a===0)return B=["1.","1.","1.",Te[1]].join(" ");if(typeof te=="string")B=[te,oe,he,Te[1]].join(" ");else switch(x.precision){case 2:B=[$(te/255),$(oe/255),$(he/255),Te[1]].join(" ");break;default:case 3:B=[I(te/255),I(oe/255),I(he/255),Te[1]].join(" ")}}else if(typeof te=="string")B=[te,oe,he,xe,Te[2]].join(" ");else switch(x.precision){case 2:B=[$(te),$(oe),$(he),$(xe),Te[2]].join(" ");break;case 3:default:B=[I(te),I(oe),I(he),I(xe),Te[2]].join(" ")}return B},cr=v.__private__.getFilters=function(){return s},En=v.__private__.putStream=function(x){var B=(x=x||{}).data||"",te=x.filters||cr(),oe=x.alreadyAppliedFilters||[],he=x.addLength1||!1,xe=B.length,Te=x.objectId,Ue=function(on){return on};if(p!==null&&Te===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Ue=rn.encryptor(Te,0));var Ge={};te===!0&&(te=["FlateEncode"]);var rt=x.additionalKeyValues||[],tt=(Ge=We.API.processDataByFilters!==void 0?We.API.processDataByFilters(B,te):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(oe)?oe.join(" "):oe.toString());if(Ge.data.length!==0&&(rt.push({key:"Length",value:Ge.data.length}),he===!0&&rt.push({key:"Length1",value:xe})),tt.length!=0)if(tt.split("/").length-1==1)rt.push({key:"Filter",value:tt});else{rt.push({key:"Filter",value:"["+tt+"]"});for(var ut=0;ut<rt.length;ut+=1)if(rt[ut].key==="DecodeParms"){for(var Et=[],Rt=0;Rt<Ge.reverseChain.split("/").length-1;Rt+=1)Et.push("null");Et.push(rt[ut].value),rt[ut].value="["+Et.join(" ")+"]"}}re("<<");for(var Vt=0;Vt<rt.length;Vt++)re("/"+rt[Vt].key+" "+rt[Vt].value);re(">>"),Ge.data.length!==0&&(re("stream"),re(Ue(Ge.data)),re("endstream"))},ur=v.__private__.putPage=function(x){var B=x.number,te=x.data,oe=x.objId,he=x.contentsObjId;_n(oe,!0),re("<</Type /Page"),re("/Parent "+x.rootDictionaryObjId+" 0 R"),re("/Resources "+x.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(P(x.mediaBox.bottomLeftX))+" "+parseFloat(P(x.mediaBox.bottomLeftY))+" "+P(x.mediaBox.topRightX)+" "+P(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&re("/CropBox ["+P(x.cropBox.bottomLeftX)+" "+P(x.cropBox.bottomLeftY)+" "+P(x.cropBox.topRightX)+" "+P(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&re("/BleedBox ["+P(x.bleedBox.bottomLeftX)+" "+P(x.bleedBox.bottomLeftY)+" "+P(x.bleedBox.topRightX)+" "+P(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&re("/TrimBox ["+P(x.trimBox.bottomLeftX)+" "+P(x.trimBox.bottomLeftY)+" "+P(x.trimBox.topRightX)+" "+P(x.trimBox.topRightY)+"]"),x.artBox!==null&&re("/ArtBox ["+P(x.artBox.bottomLeftX)+" "+P(x.artBox.bottomLeftY)+" "+P(x.artBox.topRightX)+" "+P(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&re("/UserUnit "+x.userUnit),vt.publish("putPage",{objId:oe,pageContext:et[B],pageNumber:B,page:te}),re("/Contents "+he+" 0 R"),re(">>"),re("endobj");var xe=te.join(`
`);return T===_.ADVANCED&&(xe+=`
Q`),_n(he,!0),En({data:xe,filters:cr(),objectId:he}),re("endobj"),oe},li=v.__private__.putPages=function(){var x,B,te=[];for(x=1;x<=Lt;x++)et[x].objId=Ht(),et[x].contentsObjId=Ht();for(x=1;x<=Lt;x++)te.push(ur({number:x,data:Ce[x],objId:et[x].objId,contentsObjId:et[x].contentsObjId,mediaBox:et[x].mediaBox,cropBox:et[x].cropBox,bleedBox:et[x].bleedBox,trimBox:et[x].trimBox,artBox:et[x].artBox,userUnit:et[x].userUnit,rootDictionaryObjId:br,resourceDictionaryObjId:Vn}));_n(br,!0),re("<</Type /Pages");var oe="/Kids [";for(B=0;B<Lt;B++)oe+=te[B]+" 0 R ";re(oe+"]"),re("/Count "+Lt),re(">>"),re("endobj"),vt.publish("postPutPages")},Ei=function(x){vt.publish("putFont",{font:x,out:re,newObject:Wt,putStream:En}),x.isAlreadyPutted!==!0&&(x.objectNumber=Wt(),re("<<"),re("/Type /Font"),re("/BaseFont /"+co(x.postScriptName)),re("/Subtype /Type1"),typeof x.encoding=="string"&&re("/Encoding /"+x.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},Pi=function(){for(var x in St)St.hasOwnProperty(x)&&(m===!1||m===!0&&y.hasOwnProperty(x))&&Ei(St[x])},Li=function(x){x.objectNumber=Wt();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[P(x.x),P(x.y),P(x.x+x.width),P(x.y+x.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var te=x.pages[1].join(`
`);En({data:te,additionalKeyValues:B,objectId:x.objectNumber}),re("endobj")},Ri=function(){for(var x in Zt)Zt.hasOwnProperty(x)&&Li(Zt[x])},ls=function(x,B){var te,oe=[],he=1/(B-1);for(te=0;te<1;te+=he)oe.push(te);if(oe.push(1),x[0].offset!=0){var xe={offset:0,color:x[0].color};x.unshift(xe)}if(x[x.length-1].offset!=1){var Te={offset:1,color:x[x.length-1].color};x.push(Te)}for(var Ue="",Ge=0,rt=0;rt<oe.length;rt++){for(te=oe[rt];te>x[Ge+1].offset;)Ge++;var tt=x[Ge].offset,ut=(te-tt)/(x[Ge+1].offset-tt),Et=x[Ge].color,Rt=x[Ge+1].color;Ue+=Q(Math.round((1-ut)*Et[0]+ut*Rt[0]).toString(16))+Q(Math.round((1-ut)*Et[1]+ut*Rt[1]).toString(16))+Q(Math.round((1-ut)*Et[2]+ut*Rt[2]).toString(16))}return Ue.trim()},Ea=function(x,B){B||(B=21);var te=Wt(),oe=ls(x.colors,B),he=[];he.push({key:"FunctionType",value:"0"}),he.push({key:"Domain",value:"[0.0 1.0]"}),he.push({key:"Size",value:"["+B+"]"}),he.push({key:"BitsPerSample",value:"8"}),he.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),En({data:oe,additionalKeyValues:he,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:te}),re("endobj"),x.objectNumber=Wt(),re("<< /ShadingType "+x.type),re("/ColorSpace /DeviceRGB");var xe="/Coords ["+P(parseFloat(x.coords[0]))+" "+P(parseFloat(x.coords[1]))+" ";x.type===2?xe+=P(parseFloat(x.coords[2]))+" "+P(parseFloat(x.coords[3])):xe+=P(parseFloat(x.coords[2]))+" "+P(parseFloat(x.coords[3]))+" "+P(parseFloat(x.coords[4]))+" "+P(parseFloat(x.coords[5])),re(xe+="]"),x.matrix&&re("/Matrix ["+x.matrix.toString()+"]"),re("/Function "+te+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},Pa=function(x,B){var te=Ht(),oe=Wt();B.push({resourcesOid:te,objectOid:oe}),x.objectNumber=oe;var he=[];he.push({key:"Type",value:"/Pattern"}),he.push({key:"PatternType",value:"1"}),he.push({key:"PaintType",value:"1"}),he.push({key:"TilingType",value:"1"}),he.push({key:"BBox",value:"["+x.boundingBox.map(P).join(" ")+"]"}),he.push({key:"XStep",value:P(x.xStep)}),he.push({key:"YStep",value:P(x.yStep)}),he.push({key:"Resources",value:te+" 0 R"}),x.matrix&&he.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),En({data:x.stream,additionalKeyValues:he,objectId:x.objectNumber}),re("endobj")},Mi=function(x){var B;for(B in mt)mt.hasOwnProperty(B)&&(mt[B]instanceof Qr?Ea(mt[B]):mt[B]instanceof wi&&Pa(mt[B],x))},cs=function(x){for(var B in x.objectNumber=Wt(),re("<<"),x)switch(B){case"opacity":re("/ca "+$(x[B]));break;case"stroke-opacity":re("/CA "+$(x[B]))}re(">>"),re("endobj")},La=function(){var x;for(x in Pt)Pt.hasOwnProperty(x)&&cs(Pt[x])},xo=function(){for(var x in re("/XObject <<"),Zt)Zt.hasOwnProperty(x)&&Zt[x].objectNumber>=0&&re("/"+x+" "+Zt[x].objectNumber+" 0 R");vt.publish("putXobjectDict"),re(">>")},Ra=function(){rn.oid=Wt(),re("<<"),re("/Filter /Standard"),re("/V "+rn.v),re("/R "+rn.r),re("/U <"+rn.toHexString(rn.U)+">"),re("/O <"+rn.toHexString(rn.O)+">"),re("/P "+rn.P),re(">>"),re("endobj")},us=function(){for(var x in re("/Font <<"),St)St.hasOwnProperty(x)&&(m===!1||m===!0&&y.hasOwnProperty(x))&&re("/"+x+" "+St[x].objectNumber+" 0 R");re(">>")},Ma=function(){if(Object.keys(mt).length>0){for(var x in re("/Shading <<"),mt)mt.hasOwnProperty(x)&&mt[x]instanceof Qr&&mt[x].objectNumber>=0&&re("/"+x+" "+mt[x].objectNumber+" 0 R");vt.publish("putShadingPatternDict"),re(">>")}},Di=function(x){if(Object.keys(mt).length>0){for(var B in re("/Pattern <<"),mt)mt.hasOwnProperty(B)&&mt[B]instanceof v.TilingPattern&&mt[B].objectNumber>=0&&mt[B].objectNumber<x&&re("/"+B+" "+mt[B].objectNumber+" 0 R");vt.publish("putTilingPatternDict"),re(">>")}},Da=function(){if(Object.keys(Pt).length>0){var x;for(x in re("/ExtGState <<"),Pt)Pt.hasOwnProperty(x)&&Pt[x].objectNumber>=0&&re("/"+x+" "+Pt[x].objectNumber+" 0 R");vt.publish("putGStateDict"),re(">>")}},Ft=function(x){_n(x.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),us(),Ma(),Di(x.objectOid),Da(),xo(),re(">>"),re("endobj")},ds=function(){var x=[];Pi(),La(),Ri(),Mi(x),vt.publish("putResources"),x.forEach(Ft),Ft({resourcesOid:Vn,objectOid:Number.MAX_SAFE_INTEGER}),vt.publish("postPutResources")},fs=function(){vt.publish("putAdditionalObjects");for(var x=0;x<Ne.length;x++){var B=Ne[x];_n(B.objId,!0),re(B.content),re("endobj")}vt.publish("postPutAdditionalObjects")},hs=function(x){It[x.fontName]=It[x.fontName]||{},It[x.fontName][x.fontStyle]=x.id},bo=function(x,B,te,oe,he){var xe={id:"F"+(Object.keys(St).length+1).toString(10),postScriptName:x,fontName:B,fontStyle:te,encoding:oe,isStandardFont:he||!1,metadata:{}};return vt.publish("addFont",{font:xe,instance:this}),St[xe.id]=xe,hs(xe),xe.id},Fa=function(x){for(var B=0,te=ke.length;B<te;B++){var oe=bo.call(this,x[B][0],x[B][1],x[B][2],ke[B][3],!0);m===!1&&(y[oe]=!0);var he=x[B][0].split("-");hs({id:oe,fontName:he[0],fontStyle:he[1]||""})}vt.publish("addFonts",{fonts:St,dictionary:It})},Wn=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(oe){var B=oe.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var te="Error in function "+B.split(`
`)[0].split("<")[0]+": "+oe.message;if(!Je.console)throw new Error(te);Je.console.error(te,oe),Je.alert&&alert(te)}},x.foo.bar=x,x.foo},Fi=function(x,B){var te,oe,he,xe,Te,Ue,Ge,rt,tt;if(he=(B=B||{}).sourceEncoding||"Unicode",Te=B.outputEncoding,(B.autoencode||Te)&&St[lt].metadata&&St[lt].metadata[he]&&St[lt].metadata[he].encoding&&(xe=St[lt].metadata[he].encoding,!Te&&St[lt].encoding&&(Te=St[lt].encoding),!Te&&xe.codePages&&(Te=xe.codePages[0]),typeof Te=="string"&&(Te=xe[Te]),Te)){for(Ge=!1,Ue=[],te=0,oe=x.length;te<oe;te++)(rt=Te[x.charCodeAt(te)])?Ue.push(String.fromCharCode(rt)):Ue.push(x[te]),Ue[te].charCodeAt(0)>>8&&(Ge=!0);x=Ue.join("")}for(te=x.length;Ge===void 0&&te!==0;)x.charCodeAt(te-1)>>8&&(Ge=!0),te--;if(!Ge)return x;for(Ue=B.noBOM?[]:[254,255],te=0,oe=x.length;te<oe;te++){if((tt=(rt=x.charCodeAt(te))>>8)>>8)throw new Error("Character at position "+te+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ue.push(tt),Ue.push(rt-(tt<<8))}return String.fromCharCode.apply(void 0,Ue)},yn=v.__private__.pdfEscape=v.pdfEscape=function(x,B){return Fi(x,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wo=v.__private__.beginPage=function(x){Ce[++Lt]=[],et[Lt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},gs(Lt),ye(Ce[V])},ps=function(x,B){var te,oe,he;switch(n=B||n,typeof x=="string"&&(te=w(x.toLowerCase()),Array.isArray(te)&&(oe=te[0],he=te[1])),Array.isArray(x)&&(oe=x[0]*je,he=x[1]*je),isNaN(oe)&&(oe=i[0],he=i[1]),(oe>14400||he>14400)&&(At.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),oe=Math.min(14400,oe),he=Math.min(14400,he)),i=[oe,he],n.substr(0,1)){case"l":he>oe&&(i=[he,oe]);break;case"p":oe>he&&(i=[he,oe])}wo(i),ws(Ao),re($n),To!==0&&re(To+" J"),ko!==0&&re(ko+" j"),vt.publish("addPage",{pageNumber:Lt})},ja=function(x){x>0&&x<=Lt&&(Ce.splice(x,1),et.splice(x,1),Lt--,V>Lt&&(V=Lt),this.setPage(V))},gs=function(x){x>0&&x<=Lt&&(V=x)},Ua=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Ce.length-1},ms=function(x,B,te){var oe,he=void 0;return te=te||{},x=x!==void 0?x:St[lt].fontName,B=B!==void 0?B:St[lt].fontStyle,oe=x.toLowerCase(),It[oe]!==void 0&&It[oe][B]!==void 0?he=It[oe][B]:It[x]!==void 0&&It[x][B]!==void 0?he=It[x][B]:te.disableWarning===!1&&At.warn("Unable to look up font label for font '"+x+"', '"+B+"'. Refer to getFontList() for available fonts."),he||te.noFallback||(he=It.times[B])==null&&(he=It.times.normal),he},Ba=v.__private__.putInfo=function(){var x=Wt(),B=function(oe){return oe};for(var te in p!==null&&(B=rn.encryptor(x,0)),re("<<"),re("/Producer ("+yn(B("jsPDF "+We.version))+")"),Ye)Ye.hasOwnProperty(te)&&Ye[te]&&re("/"+te.substr(0,1).toUpperCase()+te.substr(1)+" ("+yn(B(Ye[te]))+")");re("/CreationDate ("+yn(B(ie))+")"),re(">>"),re("endobj")},No=v.__private__.putCatalog=function(x){var B=(x=x||{}).rootDictionaryObjId||br;switch(Wt(),re("<<"),re("/Type /Catalog"),re("/Pages "+B+" 0 R"),Fe||(Fe="fullwidth"),Fe){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var te=""+Fe;te.substr(te.length-1)==="%"&&(Fe=parseInt(Fe)/100),typeof Fe=="number"&&re("/OpenAction [3 0 R /XYZ null null "+$(Fe)+"]")}switch(at||(at="continuous"),at){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}Ze&&re("/PageMode /"+Ze),vt.publish("putCatalog"),re(">>"),re("endobj")},qa=v.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(ee+1)),re("/Root "+ee+" 0 R"),re("/Info "+(ee-1)+" 0 R"),p!==null&&re("/Encrypt "+rn.oid+" 0 R"),re("/ID [ <"+q+"> <"+q+"> ]"),re(">>")},Oa=v.__private__.putHeader=function(){re("%PDF-"+N),re("%")},Ha=v.__private__.putXRef=function(){var x="0000000000";re("xref"),re("0 "+(ee+1)),re("0000000000 65535 f ");for(var B=1;B<=ee;B++)typeof se[B]=="function"?re((x+se[B]()).slice(-10)+" 00000 n "):se[B]!==void 0?re((x+se[B]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},wr=v.__private__.buildDocument=function(){He(),ye(de),vt.publish("buildDocument"),Oa(),li(),fs(),ds(),p!==null&&Ra(),Ba(),No();var x=pe;return Ha(),qa(),re("startxref"),re(""+x),re("%%EOF"),ye(Ce[V]),de.join(`
`)},ji=v.__private__.getBlob=function(x){return new Blob([Oe(x)],{type:"application/pdf"})},Ui=v.output=v.__private__.output=Wn((function(x,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",x){case void 0:return wr();case"save":v.save(B.filename);break;case"arraybuffer":return Oe(wr());case"blob":return ji(wr());case"bloburi":case"bloburl":if(Je.URL!==void 0&&typeof Je.URL.createObjectURL=="function")return Je.URL&&Je.URL.createObjectURL(ji(wr()))||void 0;At.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var te="",oe=wr();try{te=Yl(oe)}catch{te=Yl(unescape(encodeURIComponent(oe)))}return"data:application/pdf;filename="+B.filename+";base64,"+te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Je)==="[object Window]"){var he="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(he=B.pdfObjectUrl,xe="");var Te='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+he+'"'+xe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",Ue=Je.open();return Ue!==null&&Ue.document.write(Te),Ue}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Je)==="[object Window]"){var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',rt=Je.open();if(rt!==null){rt.document.write(Ge);var tt=this;rt.document.documentElement.querySelector("#pdfViewer").onload=function(){rt.document.title=B.filename,rt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(tt.output("bloburl"))}}return rt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Je)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',Et=Je.open();if(Et!==null&&(Et.document.write(ut),Et.document.title=B.filename),Et||typeof safari>"u")return Et;break;case"datauri":case"dataurl":return Je.document.location.href=this.output("datauristring",B);default:return null}})),vs=function(x){return Array.isArray(ai)===!0&&ai.indexOf(x)>-1};switch(r){case"pt":je=1;break;case"mm":je=72/25.4;break;case"cm":je=72/2.54;break;case"in":je=72;break;case"px":je=vs("px_scaling")==1?.75:96/72;break;case"pc":case"em":je=12;break;case"ex":je=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);je=r}var rn=null;ue(),G();var Va=function(x){return p!==null?rn.encryptor(x,0):function(B){return B}},ys=v.__private__.getPageInfo=v.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:et[x].objId,pageNumber:x,pageContext:et[x]}},Xe=v.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in et)if(et[B].objId===x)break;return ys(B)},Ga=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:et[V].objId,pageNumber:V,pageContext:et[V]}};v.addPage=function(){return ps.apply(this,arguments),this},v.setPage=function(){return gs.apply(this,arguments),ye.call(this,Ce[V]),this},v.insertPage=function(x){return this.addPage(),this.movePage(V,x),this},v.movePage=function(x,B){var te,oe;if(x>B){te=Ce[x],oe=et[x];for(var he=x;he>B;he--)Ce[he]=Ce[he-1],et[he]=et[he-1];Ce[B]=te,et[B]=oe,this.setPage(B)}else if(x<B){te=Ce[x],oe=et[x];for(var xe=x;xe<B;xe++)Ce[xe]=Ce[xe+1],et[xe]=et[xe+1];Ce[B]=te,et[B]=oe,this.setPage(B)}return this},v.deletePage=function(){return ja.apply(this,arguments),this},v.__private__.text=v.text=function(x,B,te,oe,he){var xe,Te,Ue,Ge,rt,tt,ut,Et,Rt,Vt=(oe=oe||{}).scope||this;if(typeof x=="number"&&typeof B=="number"&&(typeof te=="string"||Array.isArray(te))){var on=te;te=B,B=x,x=on}if(arguments[3]instanceof $e?(M("The transform parameter of text() with a Matrix value"),Rt=he):(Ue=arguments[4],Ge=arguments[5],bt(ut=arguments[3])==="object"&&ut!==null||(typeof Ue=="string"&&(Ge=Ue,Ue=null),typeof ut=="string"&&(Ge=ut,ut=null),typeof ut=="number"&&(Ue=ut,ut=null),oe={flags:ut,angle:Ue,align:Ge})),isNaN(B)||isNaN(te)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Vt;var Yt="",Jn=!1,An=typeof oe.lineHeightFactor=="number"?oe.lineHeightFactor:ui,hr=Vt.internal.scaleFactor;function Ts(Ct){return Ct=Ct.split("	").join(Array(oe.TabLen||9).join(" ")),yn(Ct,ut)}function Ro(Ct){for(var Tt,Ut=Ct.concat(),$t=[],Cr=Ut.length;Cr--;)typeof(Tt=Ut.shift())=="string"?$t.push(Tt):Array.isArray(Ct)&&(Tt.length===1||Tt[1]===void 0&&Tt[2]===void 0)?$t.push(Tt[0]):$t.push([Tt[0],Tt[1],Tt[2]]);return $t}function Mo(Ct,Tt){var Ut;if(typeof Ct=="string")Ut=Tt(Ct)[0];else if(Array.isArray(Ct)){for(var $t,Cr,Ho=Ct.concat(),Zi=[],Ls=Ho.length;Ls--;)typeof($t=Ho.shift())=="string"?Zi.push(Tt($t)[0]):Array.isArray($t)&&typeof $t[0]=="string"&&(Cr=Tt($t[0],$t[1],$t[2]),Zi.push([Cr[0],Cr[1],Cr[2]]));Ut=Zi}return Ut}var Gi=!1,Do=!0;if(typeof x=="string")Gi=!0;else if(Array.isArray(x)){var Fo=x.concat();Te=[];for(var zi,en=Fo.length;en--;)(typeof(zi=Fo.shift())!="string"||Array.isArray(zi)&&typeof zi[0]!="string")&&(Do=!1);Gi=Do}if(Gi===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var Wi=Pe/Vt.internal.scaleFactor,$i=Wi*(An-1);switch(oe.baseline){case"bottom":te-=$i;break;case"top":te+=Wi-$i;break;case"hanging":te+=Wi-2*$i;break;case"middle":te+=Wi/2-$i}if((tt=oe.maxWidth||0)>0&&(typeof x=="string"?x=Vt.splitTextToSize(x,tt):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce((function(Ct,Tt){return Ct.concat(Vt.splitTextToSize(Tt,tt))}),[]))),xe={text:x,x:B,y:te,options:oe,mutex:{pdfEscape:yn,activeFontKey:lt,fonts:St,activeFontSize:Pe}},vt.publish("preProcessText",xe),x=xe.text,Ue=(oe=xe.options).angle,!(Rt instanceof $e)&&Ue&&typeof Ue=="number"){Ue*=Math.PI/180,oe.rotationDirection===0&&(Ue=-Ue),T===_.ADVANCED&&(Ue=-Ue);var Ji=Math.cos(Ue),jo=Math.sin(Ue);Rt=new $e(Ji,jo,-jo,Ji,0,0)}else Ue&&Ue instanceof $e&&(Rt=Ue);T!==_.ADVANCED||Rt||(Rt=lr),(rt=oe.charSpace||Oi)!==void 0&&(Yt+=P(E(rt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Et=oe.horizontalScale)!==void 0&&(Yt+=P(100*Et)+` Tz
`),oe.lang;var xn=-1,el=oe.renderingMode!==void 0?oe.renderingMode:oe.stroke,Uo=Vt.internal.getCurrentPageInfo().pageContext;switch(el){case 0:case!1:case"fill":xn=0;break;case 1:case!0:case"stroke":xn=1;break;case 2:case"fillThenStroke":xn=2;break;case 3:case"invisible":xn=3;break;case 4:case"fillAndAddForClipping":xn=4;break;case 5:case"strokeAndAddPathForClipping":xn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":xn=6;break;case 7:case"addToPathForClipping":xn=7}var ks=Uo.usedRenderingMode!==void 0?Uo.usedRenderingMode:-1;xn!==-1?Yt+=xn+` Tr
`:ks!==-1&&(Yt+=`0 Tr
`),xn!==-1&&(Uo.usedRenderingMode=xn),Ge=oe.align||"left";var Pn,Yi=Pe*An,Is=Vt.internal.pageSize.getWidth(),Es=St[lt];rt=oe.charSpace||Oi,tt=oe.maxWidth||0,ut=Object.assign({autoencode:!0,noBOM:!0},oe.flags);var Ur=[],hi=function(Ct){return Vt.getStringUnitWidth(Ct,{font:Es,charSpace:rt,fontSize:Pe,doKerning:!1})*Pe/hr};if(Object.prototype.toString.call(x)==="[object Array]"){var bn;Te=Ro(x),Ge!=="left"&&(Pn=Te.map(hi));var fn,Br=0;if(Ge==="right"){B-=Pn[0],x=[],en=Te.length;for(var Sr=0;Sr<en;Sr++)Sr===0?(fn=fr(B),bn=Nr(te)):(fn=E(Br-Pn[Sr]),bn=-Yi),x.push([Te[Sr],fn,bn]),Br=Pn[Sr]}else if(Ge==="center"){B-=Pn[0]/2,x=[],en=Te.length;for(var _r=0;_r<en;_r++)_r===0?(fn=fr(B),bn=Nr(te)):(fn=E((Br-Pn[_r])/2),bn=-Yi),x.push([Te[_r],fn,bn]),Br=Pn[_r]}else if(Ge==="left"){x=[],en=Te.length;for(var Ki=0;Ki<en;Ki++)x.push(Te[Ki])}else if(Ge==="justify"&&Es.encoding==="Identity-H"){x=[],en=Te.length,tt=tt!==0?tt:Is;for(var Ar=0,jt=0;jt<en;jt++)if(bn=jt===0?Nr(te):-Yi,fn=jt===0?fr(B):Ar,jt<en-1){var Bo=E((tt-Pn[jt])/(Te[jt].split(" ").length-1)),hn=Te[jt].split(" ");x.push([hn[0]+" ",fn,bn]),Ar=0;for(var Ln=1;Ln<hn.length;Ln++){var Xi=(hi(hn[Ln-1]+" "+hn[Ln])-hi(hn[Ln]))*hr+Bo;Ln==hn.length-1?x.push([hn[Ln],Xi,0]):x.push([hn[Ln]+" ",Xi,0]),Ar-=Xi}}else x.push([Te[jt],fn,bn]);x.push(["",Ar,0])}else{if(Ge!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],en=Te.length,tt=tt!==0?tt:Is,jt=0;jt<en;jt++)bn=jt===0?Nr(te):-Yi,fn=jt===0?fr(B):0,jt<en-1?Ur.push(P(E((tt-Pn[jt])/(Te[jt].split(" ").length-1)))):Ur.push(0),x.push([Te[jt],fn,bn])}}var Ps=typeof oe.R2L=="boolean"?oe.R2L:Ve;Ps===!0&&(x=Mo(x,(function(Ct,Tt,Ut){return[Ct.split("").reverse().join(""),Tt,Ut]}))),xe={text:x,x:B,y:te,options:oe,mutex:{pdfEscape:yn,activeFontKey:lt,fonts:St,activeFontSize:Pe}},vt.publish("postProcessText",xe),x=xe.text,Jn=xe.mutex.isHex||!1;var qo=St[lt].encoding;qo!=="WinAnsiEncoding"&&qo!=="StandardEncoding"||(x=Mo(x,(function(Ct,Tt,Ut){return[Ts(Ct),Tt,Ut]}))),Te=Ro(x),x=[];for(var pi,gi,qr,mi=0,Qi=1,vi=Array.isArray(Te[0])?Qi:mi,Or="",Oo=function(Ct,Tt,Ut){var $t="";return Ut instanceof $e?(Ut=typeof oe.angle=="number"?Hn(Ut,new $e(1,0,0,1,Ct,Tt)):Hn(new $e(1,0,0,1,Ct,Tt),Ut),T===_.ADVANCED&&(Ut=Hn(new $e(1,0,0,-1,0,0),Ut)),$t=Ut.join(" ")+` Tm
`):$t=P(Ct)+" "+P(Tt)+` Td
`,$t},Rn=0;Rn<Te.length;Rn++){switch(Or="",vi){case Qi:qr=(Jn?"<":"(")+Te[Rn][0]+(Jn?">":")"),pi=parseFloat(Te[Rn][1]),gi=parseFloat(Te[Rn][2]);break;case mi:qr=(Jn?"<":"(")+Te[Rn]+(Jn?">":")"),pi=fr(B),gi=Nr(te)}Ur!==void 0&&Ur[Rn]!==void 0&&(Or=Ur[Rn]+` Tw
`),Rn===0?x.push(Or+Oo(pi,gi,Rt)+qr):vi===mi?x.push(Or+qr):vi===Qi&&x.push(Or+Oo(pi,gi,Rt)+qr)}x=vi===mi?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Mn=`BT
/`;return Mn+=lt+" "+Pe+` Tf
`,Mn+=P(Pe*An)+` TL
`,Mn+=di+`
`,Mn+=Yt,Mn+=x,re(Mn+="ET"),y[lt]=!0,Vt};var za=v.__private__.clip=v.clip=function(x){return re(x==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return za("evenodd")},v.__private__.discardPath=v.discardPath=function(){return re("n"),this};var dr=v.__private__.isValidStyle=function(x){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(B=!0),B};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(x){return dr(x)&&(c=x),this};var xs=v.__private__.getStyle=v.getStyle=function(x){var B=c;switch(x){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=x}return B},bs=v.close=function(){return re("h"),this};v.stroke=function(){return re("S"),this},v.fill=function(x){return Bi("f",x),this},v.fillEvenOdd=function(x){return Bi("f*",x),this},v.fillStroke=function(x){return Bi("B",x),this},v.fillStrokeEvenOdd=function(x){return Bi("B*",x),this};var Bi=function(x,B){bt(B)==="object"?$a(B,x):re(x)},So=function(x){x===null||T===_.ADVANCED&&x===void 0||(x=xs(x),re(x))};function Wa(x,B,te,oe,he){var xe=new wi(B||this.boundingBox,te||this.xStep,oe||this.yStep,this.gState,he||this.matrix);xe.stream=this.stream;var Te=x+"$$"+this.cloneIndex+++"$$";return vn(Te,xe),xe}var $a=function(x,B){var te=si[x.key],oe=mt[te];if(oe instanceof Qr)re("q"),re(Ja(B)),oe.gState&&v.setGState(oe.gState),re(x.matrix.toString()+" cm"),re("/"+te+" sh"),re("Q");else if(oe instanceof wi){var he=new $e(1,0,0,-1,0,jr());x.matrix&&(he=he.multiply(x.matrix||lr),te=Wa.call(oe,x.key,x.boundingBox,x.xStep,x.yStep,he).id),re("q"),re("/Pattern cs"),re("/"+te+" scn"),oe.gState&&v.setGState(oe.gState),re(B),re("Q")}},Ja=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},_o=v.moveTo=function(x,B){return re(P(E(x))+" "+P(K(B))+" m"),this},ci=v.lineTo=function(x,B){return re(P(E(x))+" "+P(K(B))+" l"),this},Dr=v.curveTo=function(x,B,te,oe,he,xe){return re([P(E(x)),P(K(B)),P(E(te)),P(K(oe)),P(E(he)),P(K(xe)),"c"].join(" ")),this};v.__private__.line=v.line=function(x,B,te,oe,he){if(isNaN(x)||isNaN(B)||isNaN(te)||isNaN(oe)||!dr(he))throw new Error("Invalid arguments passed to jsPDF.line");return T===_.COMPAT?this.lines([[te-x,oe-B]],x,B,[1,1],he||"S"):this.lines([[te-x,oe-B]],x,B,[1,1]).stroke()},v.__private__.lines=v.lines=function(x,B,te,oe,he,xe){var Te,Ue,Ge,rt,tt,ut,Et,Rt,Vt,on,Yt,Jn;if(typeof x=="number"&&(Jn=te,te=B,B=x,x=Jn),oe=oe||[1,1],xe=xe||!1,isNaN(B)||isNaN(te)||!Array.isArray(x)||!Array.isArray(oe)||!dr(he)||typeof xe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_o(B,te),Te=oe[0],Ue=oe[1],rt=x.length,on=B,Yt=te,Ge=0;Ge<rt;Ge++)(tt=x[Ge]).length===2?(on=tt[0]*Te+on,Yt=tt[1]*Ue+Yt,ci(on,Yt)):(ut=tt[0]*Te+on,Et=tt[1]*Ue+Yt,Rt=tt[2]*Te+on,Vt=tt[3]*Ue+Yt,on=tt[4]*Te+on,Yt=tt[5]*Ue+Yt,Dr(ut,Et,Rt,Vt,on,Yt));return xe&&bs(),So(he),this},v.path=function(x){for(var B=0;B<x.length;B++){var te=x[B],oe=te.c;switch(te.op){case"m":_o(oe[0],oe[1]);break;case"l":ci(oe[0],oe[1]);break;case"c":Dr.apply(this,oe);break;case"h":bs()}}return this},v.__private__.rect=v.rect=function(x,B,te,oe,he){if(isNaN(x)||isNaN(B)||isNaN(te)||isNaN(oe)||!dr(he))throw new Error("Invalid arguments passed to jsPDF.rect");return T===_.COMPAT&&(oe=-oe),re([P(E(x)),P(K(B)),P(E(te)),P(E(oe)),"re"].join(" ")),So(he),this},v.__private__.triangle=v.triangle=function(x,B,te,oe,he,xe,Te){if(isNaN(x)||isNaN(B)||isNaN(te)||isNaN(oe)||isNaN(he)||isNaN(xe)||!dr(Te))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[te-x,oe-B],[he-te,xe-oe],[x-he,B-xe]],x,B,[1,1],Te,!0),this},v.__private__.roundedRect=v.roundedRect=function(x,B,te,oe,he,xe,Te){if(isNaN(x)||isNaN(B)||isNaN(te)||isNaN(oe)||isNaN(he)||isNaN(xe)||!dr(Te))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ue=4/3*(Math.SQRT2-1);return he=Math.min(he,.5*te),xe=Math.min(xe,.5*oe),this.lines([[te-2*he,0],[he*Ue,0,he,xe-xe*Ue,he,xe],[0,oe-2*xe],[0,xe*Ue,-he*Ue,xe,-he,xe],[2*he-te,0],[-he*Ue,0,-he,-xe*Ue,-he,-xe],[0,2*xe-oe],[0,-xe*Ue,he*Ue,-xe,he,-xe]],x+he,B,[1,1],Te,!0),this},v.__private__.ellipse=v.ellipse=function(x,B,te,oe,he){if(isNaN(x)||isNaN(B)||isNaN(te)||isNaN(oe)||!dr(he))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xe=4/3*(Math.SQRT2-1)*te,Te=4/3*(Math.SQRT2-1)*oe;return _o(x+te,B),Dr(x+te,B-Te,x+xe,B-oe,x,B-oe),Dr(x-xe,B-oe,x-te,B-Te,x-te,B),Dr(x-te,B+Te,x-xe,B+oe,x,B+oe),Dr(x+xe,B+oe,x+te,B+Te,x+te,B),So(he),this},v.__private__.circle=v.circle=function(x,B,te,oe){if(isNaN(x)||isNaN(B)||isNaN(te)||!dr(oe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,B,te,te,oe)},v.setFont=function(x,B,te){return te&&(B=F(B,te)),lt=ms(x,B,{disableWarning:!1}),this};var Ya=v.__private__.getFont=v.getFont=function(){return St[ms.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var x,B,te={};for(x in It)if(It.hasOwnProperty(x))for(B in te[x]=[],It[x])It[x].hasOwnProperty(B)&&te[x].push(B);return te},v.addFont=function(x,B,te,oe,he){var xe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xe.indexOf(arguments[3])!==-1?he=arguments[3]:arguments[3]&&xe.indexOf(arguments[3])==-1&&(te=F(te,oe)),he=he||"Identity-H",bo.call(this,x,B,te,he)};var ui,Ao=t.lineWidth||.200025,qi=v.__private__.getLineWidth=v.getLineWidth=function(){return Ao},ws=v.__private__.setLineWidth=v.setLineWidth=function(x){return Ao=x,re(P(E(x))+" w"),this};v.__private__.setLineDash=We.API.setLineDash=We.API.setLineDashPattern=function(x,B){if(x=x||[],B=B||0,isNaN(B)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map((function(te){return P(E(te))})).join(" "),B=P(E(B)),re("["+x+"] "+B+" d"),this};var Ns=v.__private__.getLineHeight=v.getLineHeight=function(){return Pe*ui};v.__private__.getLineHeight=v.getLineHeight=function(){return Pe*ui};var Ss=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(ui=x),this},_s=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return ui};Ss(t.lineHeight);var fr=v.__private__.getHorizontalCoordinate=function(x){return E(x)},Nr=v.__private__.getVerticalCoordinate=function(x){return T===_.ADVANCED?x:et[V].mediaBox.topRightY-et[V].mediaBox.bottomLeftY-E(x)},Ka=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(x){return P(fr(x))},Fr=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(x){return P(Nr(x))},$n=t.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return Gn($n)},v.__private__.setStrokeColor=v.setDrawColor=function(x,B,te,oe){return $n=zn({ch1:x,ch2:B,ch3:te,ch4:oe,pdfColorType:"draw",precision:2}),re($n),this};var Co=t.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return Gn(Co)},v.__private__.setFillColor=v.setFillColor=function(x,B,te,oe){return Co=zn({ch1:x,ch2:B,ch3:te,ch4:oe,pdfColorType:"fill",precision:2}),re(Co),this};var di=t.textColor||"0 g",Xa=v.__private__.getTextColor=v.getTextColor=function(){return Gn(di)};v.__private__.setTextColor=v.setTextColor=function(x,B,te,oe){return di=zn({ch1:x,ch2:B,ch3:te,ch4:oe,pdfColorType:"text",precision:3}),this};var Oi=t.charSpace,Qa=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Oi||0)};v.__private__.setCharSpace=v.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Oi=x,this};var To=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(x){var B=v.CapJoinStyles[x];if(B===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return To=B,re(B+" J"),this};var ko=0;v.__private__.setLineJoin=v.setLineJoin=function(x){var B=v.CapJoinStyles[x];if(B===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ko=B,re(B+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(P(E(x))+" M"),this},v.GState=as,v.setGState=function(x){(x=typeof x=="string"?Pt[On[x]]:As(null,x)).equals(xr)||(re("/"+x.id+" gs"),xr=x)};var As=function(x,B){if(!x||!On[x]){var te=!1;for(var oe in Pt)if(Pt.hasOwnProperty(oe)&&Pt[oe].equals(B)){te=!0;break}if(te)B=Pt[oe];else{var he="GS"+(Object.keys(Pt).length+1).toString(10);Pt[he]=B,B.id=he}return x&&(On[x]=B.id),vt.publish("addGState",B),B}};v.addGState=function(x,B){return As(x,B),this},v.saveGraphicsState=function(){return re("q"),or.push({key:lt,size:Pe,color:di}),this},v.restoreGraphicsState=function(){re("Q");var x=or.pop();return lt=x.key,Pe=x.size,di=x.color,xr=null,this},v.setCurrentTransformationMatrix=function(x){return re(x.toString()+" cm"),this},v.comment=function(x){return re("#"+x),this};var Hi=function(x,B){var te=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return te},set:function(xe){isNaN(xe)||(te=parseFloat(xe))}});var oe=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return oe},set:function(xe){isNaN(xe)||(oe=parseFloat(xe))}});var he="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return he},set:function(xe){he=xe.toString()}}),this},Io=function(x,B,te,oe){Hi.call(this,x,B),this.type="rect";var he=te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return he},set:function(Te){isNaN(Te)||(he=parseFloat(Te))}});var xe=oe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xe},set:function(Te){isNaN(Te)||(xe=parseFloat(Te))}}),this},Eo=function(){this.page=Lt,this.currentPage=V,this.pages=Ce.slice(0),this.pagesContext=et.slice(0),this.x=nn,this.y=ht,this.matrix=qn,this.width=fi(V),this.height=jr(V),this.outputDestination=Ie,this.id="",this.objectNumber=-1};Eo.prototype.restore=function(){Lt=this.page,V=this.currentPage,et=this.pagesContext,Ce=this.pages,nn=this.x,ht=this.y,qn=this.matrix,Po(V,this.width),Lo(V,this.height),Ie=this.outputDestination};var Cs=function(x,B,te,oe,he){ar.push(new Eo),Lt=V=0,Ce=[],nn=x,ht=B,qn=he,wo([te,oe])},Za=function(x){if(sr[x])ar.pop().restore();else{var B=new Eo,te="Xo"+(Object.keys(Zt).length+1).toString(10);B.id=te,sr[x]=te,Zt[te]=B,vt.publish("addFormObject",B),ar.pop().restore()}};for(var Vi in v.beginFormObject=function(x,B,te,oe,he){return Cs(x,B,te,oe,he),this},v.endFormObject=function(x){return Za(x),this},v.doFormObject=function(x,B){var te=Zt[sr[x]];return re("q"),re(B.toString()+" cm"),re("/"+te.id+" Do"),re("Q"),this},v.getFormObject=function(x){var B=Zt[sr[x]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},v.save=function(x,B){return x=x||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(bi(ji(wr()),x),typeof bi.unload=="function"&&Je.setTimeout&&setTimeout(bi.unload,911),this):new Promise((function(te,oe){try{var he=bi(ji(wr()),x);typeof bi.unload=="function"&&Je.setTimeout&&setTimeout(bi.unload,911),te(he)}catch(xe){oe(xe.message)}}))},We.API)We.API.hasOwnProperty(Vi)&&(Vi==="events"&&We.API.events.length?(function(x,B){var te,oe,he;for(he=B.length-1;he!==-1;he--)te=B[he][0],oe=B[he][1],x.subscribe.apply(x,[te].concat(typeof oe=="function"?[oe]:oe))})(vt,We.API.events):v[Vi]=We.API[Vi]);var fi=v.getPageWidth=function(x){return(et[x=x||V].mediaBox.topRightX-et[x].mediaBox.bottomLeftX)/je},Po=v.setPageWidth=function(x,B){et[x].mediaBox.topRightX=B*je+et[x].mediaBox.bottomLeftX},jr=v.getPageHeight=function(x){return(et[x=x||V].mediaBox.topRightY-et[x].mediaBox.bottomLeftY)/je},Lo=v.setPageHeight=function(x,B){et[x].mediaBox.topRightY=B*je+et[x].mediaBox.bottomLeftY};return v.internal={pdfEscape:yn,getStyle:xs,getFont:Ya,getFontSize:Me,getCharSpace:Qa,getTextColor:Xa,getLineHeight:Ns,getLineHeightFactor:_s,getLineWidth:qi,write:Ke,getHorizontalCoordinate:fr,getVerticalCoordinate:Nr,getCoordinateString:Ka,getVerticalCoordinateString:Fr,collections:{},newObject:Wt,newAdditionalObject:Ii,newObjectDeferred:Ht,newObjectDeferredBegin:_n,getFilters:cr,putStream:En,events:vt,scaleFactor:je,pageSize:{getWidth:function(){return fi(V)},setWidth:function(x){Po(V,x)},getHeight:function(){return jr(V)},setHeight:function(x){Lo(V,x)}},encryptionOptions:p,encryption:rn,getEncryptor:Va,output:Ui,getNumberOfPages:Ua,pages:Ce,out:re,f2:$,f3:I,getPageInfo:ys,getPageInfoByObjId:Xe,getCurrentPageInfo:Ga,getPDFVersion:A,Point:Hi,Rectangle:Io,Matrix:$e,hasHotfix:vs},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return fi(V)},set:function(x){Po(V,x)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return jr(V)},set:function(x){Lo(V,x)},enumerable:!0,configurable:!0}),Fa.call(v,ke),lt="F1",ps(i,n),vt.publish("initialized"),v}lo.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},lo.prototype.toHexString=function(t){return t.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},lo.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},lo.prototype.processOwnerPassword=function(t,e){return Xl(Kl(e).substr(0,5),t)},lo.prototype.encryptor=function(t,e){var n=Kl(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Xl(n,r)}},as.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||bt(t)!==bt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},We.API={events:[]},We.version="2.5.2";var Dt=We.API,pc=1,ki=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},io=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nt=function(t){return t.toFixed(2)},Kr=function(t){return t.toFixed(5)};Dt.__acroform__={};var Sn=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Td=function(t){return t*pc},gr=function(t){var e=new Kf,n=qe.internal.getHeight(t)||0,r=qe.internal.getWidth(t)||0;return e.BBox=[0,0,Number(nt(r)),Number(nt(n))],e},Tv=Dt.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},kv=Dt.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Iv=Dt.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Bt=Dt.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Iv(t,e-1)},qt=Dt.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Tv(t,e-1)},Ot=Dt.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return kv(t,e-1)},Ev=Dt.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],o=t[1],s=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(o+a)||0,l.upperRight_X=n(i+s)||0,l.upperRight_Y=r(o)||0,[Number(nt(l.lowerLeft_X)),Number(nt(l.lowerLeft_Y)),Number(nt(l.upperRight_X)),Number(nt(l.upperRight_Y))]},Pv=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Ql(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+nt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=gr(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},Ql=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map((function(I){return I.split(`
`)})):i.map((function(I){return[I]}));var o=n,s=qe.internal.getHeight(t)||0;s=s<0?-s:s;var a=qe.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(I,E,z){if(I+1<i.length){var K=E+" "+i[I+1][0];return oa(K,t,z).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var c,p,m=oa("3",t,o).height,y=t.multiline?s-o:(s-m)/2,v=y+=2,N=0,A=0,S=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+oa(e,t,o=12).width+", FieldWidth:"+a+`
`;break}for(var w="",_=0,T=0;T<i.length;T++)if(i.hasOwnProperty(T)){var D=!1;if(i[T].length!==1&&S!==i[T].length-1){if((m+2)*(_+2)+2>s)continue e;w+=i[T][S],D=!0,A=T,T--}else{w=(w+=i[T][S]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var k=parseInt(T),F=l(k,w,o),P=T>=i.length-1;if(F&&!P){w+=" ",S=0;continue}if(F||P){if(P)A=k;else if(t.multiline&&(m+2)*(_+2)+2>s)continue e}else{if(!t.multiline||(m+2)*(_+2)+2>s)continue e;A=k}}for(var M="",j=N;j<=A;j++){var $=i[j];if(t.multiline){if(j===A){M+=$[S]+" ",S=(S+1)%$.length;continue}if(j===N){M+=$[$.length-1]+" ";continue}}M+=$[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,p=oa(M,t,o).width,t.textAlign){case"right":c=a-p-2;break;case"center":c=(a-p)/2;break;case"left":default:c=2}e+=nt(c)+" "+nt(v)+` Td
`,e+="("+ki(M)+`) Tj
`,e+=-nt(c)+` 0 Td
`,v=-(o+2),p=0,N=D?A:A+1,_++,w=""}break}return r.text=e,r.fontSize=o,r},oa=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Lv={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Rv=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find((function(r){return r.type===n.type&&r.object===n.object}))===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Mv=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),bt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},Dv=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(rr.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Lv)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");pc=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Xf,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)})),t.internal.events.subscribe("buildDocument",(function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&Rv(o,n)}})(t)})),t.internal.events.subscribe("putCatalog",(function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)})),t.internal.events.subscribe("postPutPages",(function(n){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],l=[],c=a.Rect;if(a.Rect&&(a.Rect=Ev(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=qe.createDefaultAppearanceStream(a),bt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var p=Pv(a);l.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(a.appearanceStreamContent){var m="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var v=a.appearanceStreamContent[y];if(m+="/"+y+" ",m+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var s in v)if(v.hasOwnProperty(s)){var N=v[s];typeof N=="function"&&(N=N.call(i,a)),m+="/"+s+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=v)=="function"&&(N=N.call(i,a)),m+="/"+s+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);m+=">>"}l.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}o&&Mv(i.internal.acroformPlugin.xForms,i)})(n,t)})),t.internal.acroformPlugin.isInitialized=!0}},Yf=Dt.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(s){return s};if(Array.isArray(t)){for(var i="[",o=0;o<t.length;o++)switch(o!==0&&(i+=" "),bt(t[o])){case"boolean":case"number":case"object":i+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+ki(r(t[o].toString()))+")"):i+=t[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Cl=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+ki(r(t))+")"},mr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};mr.prototype.toString=function(){return this.objId+" 0 R"},mr.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},mr.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"}));for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:Yf(i,this.objId,this.scope)}):i instanceof mr?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var Kf=function(){mr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Sn(Kf,mr);var Xf=function(){mr.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+ki(n(t))+")"}},set:function(n){t=n}})};Sn(Xf,mr);var rr=function t(){mr.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Bt(e,3)},set:function(w){w?this.F=qt(e,3):this.F=Ot(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');n=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof xa)return;o="FieldObject"+t.FieldNum++}var w=function(_){return _};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+ki(w(o))+")"},set:function(w){o=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(w){o=w}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(w){s=w}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/pc:c},set:function(w){c=w}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(w){p=w}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof xa||this instanceof ni))return Cl(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=w}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Jt?y:Cl(y,this.objId,this.scope)},set:function(w){w=w.toString(),y=this instanceof Jt?w:w.substr(0,1)==="("?io(w.substr(1,w.length-2)):io(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Jt?io(y.substr(1,y.length-1)):y},set:function(w){w=w.toString(),y=this instanceof Jt?"/"+w:w}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Jt?v:Cl(v,this.objId,this.scope)},set:function(w){w=w.toString(),v=this instanceof Jt?w:w.substr(0,1)==="("?io(w.substr(1,w.length-2)):io(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Jt?io(v.substr(1,v.length-1)):v},set:function(w){w=w.toString(),v=this instanceof Jt?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(w){w=!!w,A=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(w){N=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,1)},set:function(w){w?this.Ff=qt(this.Ff,1):this.Ff=Ot(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,2)},set:function(w){w?this.Ff=qt(this.Ff,2):this.Ff=Ot(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,3)},set:function(w){w?this.Ff=qt(this.Ff,3):this.Ff=Ot(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');S=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(S){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};Sn(rr,mr);var Ni=function(){rr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Yf(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=(function(o,s,a){a||(a=1);for(var l,c=[];l=s.exec(o);)c.push(l[a]);return c})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,18)},set:function(n){n?this.Ff=qt(this.Ff,18):this.Ff=Ot(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=qt(this.Ff,19):this.Ff=Ot(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,20)},set:function(n){n?(this.Ff=qt(this.Ff,20),e.sort()):this.Ff=Ot(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,22)},set:function(n){n?this.Ff=qt(this.Ff,22):this.Ff=Ot(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,23)},set:function(n){n?this.Ff=qt(this.Ff,23):this.Ff=Ot(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,27)},set:function(n){n?this.Ff=qt(this.Ff,27):this.Ff=Ot(this.Ff,27)}}),this.hasAppearanceStream=!1};Sn(Ni,rr);var Si=function(){Ni.call(this),this.fontName="helvetica",this.combo=!1};Sn(Si,Ni);var _i=function(){Si.call(this),this.combo=!0};Sn(_i,Si);var ns=function(){_i.call(this),this.edit=!0};Sn(ns,_i);var Jt=function(){rr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,15)},set:function(n){n?this.Ff=qt(this.Ff,15):this.Ff=Ot(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,16)},set:function(n){n?this.Ff=qt(this.Ff,16):this.Ff=Ot(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,17)},set:function(n){n?this.Ff=qt(this.Ff,17):this.Ff=Ot(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,26)},set:function(n){n?this.Ff=qt(this.Ff,26):this.Ff=Ot(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+ki(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){bt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Sn(Jt,rr);var rs=function(){Jt.call(this),this.pushButton=!0};Sn(rs,Jt);var Ai=function(){Jt.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Sn(Ai,Jt);var xa=function(){var t,e;rr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+ki(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){bt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=qe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Sn(xa,rr),Ai.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Ai.prototype.createOption=function(t){var e=new xa;return e.Parent=this,e.optionName=t,this.Kids.push(e),Fv.call(this.scope,e),e};var is=function(){Jt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=qe.CheckBox.createAppearanceStream()};Sn(is,Jt);var ni=function(){rr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,13)},set:function(e){e?this.Ff=qt(this.Ff,13):this.Ff=Ot(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,21)},set:function(e){e?this.Ff=qt(this.Ff,21):this.Ff=Ot(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,23)},set:function(e){e?this.Ff=qt(this.Ff,23):this.Ff=Ot(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,24)},set:function(e){e?this.Ff=qt(this.Ff,24):this.Ff=Ot(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,25)},set:function(e){e?this.Ff=qt(this.Ff,25):this.Ff=Ot(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,26)},set:function(e){e?this.Ff=qt(this.Ff,26):this.Ff=Ot(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Sn(ni,rr);var os=function(){ni.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,14)},set:function(t){t?this.Ff=qt(this.Ff,14):this.Ff=Ot(this.Ff,14)}}),this.password=!0};Sn(os,ni);var qe={CheckBox:{createAppearanceStream:function(){return{N:{On:qe.CheckBox.YesNormal},D:{On:qe.CheckBox.YesPushDown,Off:qe.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=Ql(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+nt(qe.internal.getWidth(t))+" "+nt(qe.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+nt(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=gr(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],o=qe.internal.getHeight(t),s=qe.internal.getWidth(t),a=Ql(t,t.caption);return i.push("1 g"),i.push("0 0 "+nt(s)+" "+nt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+nt(s-1)+" "+nt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+nt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+nt(qe.internal.getWidth(t))+" "+nt(qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:qe.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=qe.RadioButton.Circle.YesNormal,e.D[t]=qe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=qe.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*qe.internal.Bezier_C).toFixed(5)),s=Number((r*qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:qe.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=qe.RadioButton.Cross.YesNormal,e.D[t]=qe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+nt(qe.internal.getWidth(t)-2)+" "+nt(qe.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(nt(r.x1.x)+" "+nt(r.x1.y)+" m"),n.push(nt(r.x2.x)+" "+nt(r.x2.y)+" l"),n.push(nt(r.x4.x)+" "+nt(r.x4.y)+" m"),n.push(nt(r.x3.x)+" "+nt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=qe.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+nt(qe.internal.getWidth(t))+" "+nt(qe.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+nt(qe.internal.getWidth(t)-2)+" "+nt(qe.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(nt(n.x1.x)+" "+nt(n.x1.y)+" m"),r.push(nt(n.x2.x)+" "+nt(n.x2.y)+" l"),r.push(nt(n.x4.x)+" "+nt(n.x4.y)+" m"),r.push(nt(n.x3.x)+" "+nt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+nt(qe.internal.getWidth(t))+" "+nt(qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};qe.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=qe.internal.getWidth(t),n=qe.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},qe.internal.getWidth=function(t){var e=0;return bt(t)==="object"&&(e=Td(t.Rect[2])),e},qe.internal.getHeight=function(t){var e=0;return bt(t)==="object"&&(e=Td(t.Rect[3])),e};var Fv=Dt.addField=function(t){if(Dv(this,t),!(t instanceof rr))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Dt.AcroFormChoiceField=Ni,Dt.AcroFormListBox=Si,Dt.AcroFormComboBox=_i,Dt.AcroFormEditBox=ns,Dt.AcroFormButton=Jt,Dt.AcroFormPushButton=rs,Dt.AcroFormRadioButton=Ai,Dt.AcroFormCheckBox=is,Dt.AcroFormTextField=ni,Dt.AcroFormPasswordField=os,Dt.AcroFormAppearance=qe,Dt.AcroForm={ChoiceField:Ni,ListBox:Si,ComboBox:_i,EditBox:ns,Button:Jt,PushButton:rs,RadioButton:Ai,CheckBox:is,TextField:ni,PasswordField:os,Appearance:qe},We.AcroForm={ChoiceField:Ni,ListBox:Si,ComboBox:_i,EditBox:ns,Button:Jt,PushButton:rs,RadioButton:Ai,CheckBox:is,TextField:ni,PasswordField:os,Appearance:qe};var jv=We.AcroForm;function Qf(t){return t.reduce((function(e,n,r){return e[n]=r,e}),{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(I,E){var z,K,ie,q,L,G=e;if((E=E||e)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(F(I))for(L in n)for(ie=n[L],z=0;z<ie.length;z+=1){for(q=!0,K=0;K<ie[z].length;K+=1)if(ie[z][K]!==void 0&&ie[z][K]!==I[K]){q=!1;break}if(q===!0){G=L;break}}else for(L in n)for(ie=n[L],z=0;z<ie.length;z+=1){for(q=!0,K=0;K<ie[z].length;K+=1)if(ie[z][K]!==void 0&&ie[z][K]!==I.charCodeAt(K)){q=!1;break}if(q===!0){G=L;break}}return G===e&&E!==e&&(G=E),G},i=function I(E){for(var z=this.internal.write,K=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var q=[];if(q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Image"}),q.push({key:"Width",value:E.width}),q.push({key:"Height",value:E.height}),E.colorSpace===S.INDEXED?q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(q.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===S.DEVICE_CMYK&&q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),q.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&q.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var L="",G=0,Y=E.transparency.length;G<Y;G++)L+=E.transparency[G]+" "+E.transparency[G]+" ";q.push({key:"Mask",value:"["+L+"]"})}E.sMask!==void 0&&q.push({key:"SMask",value:E.objectId+1+" 0 R"});var ne=E.filter!==void 0?["/"+E.filter]:void 0;if(K({data:E.data,additionalKeyValues:q,alreadyAppliedFilters:ne,objectId:E.objectId}),z("endobj"),"sMask"in E&&E.sMask!==void 0){var ue="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,R={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:ue,data:E.sMask};"filter"in E&&(R.filter=E.filter),I.call(this,R)}if(E.colorSpace===S.INDEXED){var V=this.internal.newObject();K({data:M(new Uint8Array(E.palette)),objectId:V}),z("endobj")}},o=function(){var I=this.internal.collections.addImage_images;for(var E in I)i.call(this,I[E])},s=function(){var I,E=this.internal.collections.addImage_images,z=this.internal.write;for(var K in E)z("/I"+(I=E[K]).index,I.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var I=this.internal.collections.addImage_images;return a.call(this),I},c=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(I){return typeof t["process"+I.toUpperCase()]=="function"},m=function(I){return bt(I)==="object"&&I.nodeType===1},y=function(I,E){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var z=""+I.getAttribute("src");if(z.indexOf("data:image/")===0)return ts(unescape(z).split("base64,").pop());var K=t.loadFile(z,!0);if(K!==void 0)return K}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var ie;switch(E){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;case"JPEG":case"JPG":default:ie="image/jpeg"}return ts(I.toDataURL(ie,1).split("base64,").pop())}},v=function(I){var E=this.internal.collections.addImage_images;if(E){for(var z in E)if(I===E[z].alias)return E[z]}},N=function(I,E,z){return I||E||(I=-96,E=-96),I<0&&(I=-1*z.width*72/I/this.internal.scaleFactor),E<0&&(E=-1*z.height*72/E/this.internal.scaleFactor),I===0&&(I=E*z.width/z.height),E===0&&(E=I*z.height/z.width),[I,E]},A=function(I,E,z,K,ie,q){var L=N.call(this,z,K,ie),G=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,ne=l.call(this);if(z=L[0],K=L[1],ne[ie.index]=ie,q){q*=Math.PI/180;var ue=Math.cos(q),R=Math.sin(q),V=function(Q){return Q.toFixed(4)},X=[V(ue),V(R),V(-1*R),V(ue),0,0,"cm"]}this.internal.write("q"),q?(this.internal.write([1,"0","0",1,G(I),Y(E+K),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([G(z),"0","0",G(K),"0","0","cm"].join(" "))):this.internal.write([G(z),"0","0",G(K),G(I),Y(E+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},S=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=t.__addimage__.sHashCode=function(I){var E,z,K=0;if(typeof I=="string")for(z=I.length,E=0;E<z;E++)K=(K<<5)-K+I.charCodeAt(E),K|=0;else if(F(I))for(z=I.byteLength/2,E=0;E<z;E++)K=(K<<5)-K+I[E],K|=0;return K},T=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var E=!0;return I.length===0&&(E=!1),I.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(E=!1),E},D=t.__addimage__.extractImageFromDataUrl=function(I){var E=(I=I||"").split("base64,"),z=null;if(E.length===2){var K=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(E[0]);Array.isArray(K)&&(z={mimeType:K[1],charset:K[2],data:E[1]})}return z},k=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(I){return k()&&I instanceof ArrayBuffer};var F=t.__addimage__.isArrayBufferView=function(I){return k()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},P=t.__addimage__.binaryStringToUint8Array=function(I){for(var E=I.length,z=new Uint8Array(E),K=0;K<E;K++)z[K]=I.charCodeAt(K);return z},M=t.__addimage__.arrayBufferToBinaryString=function(I){for(var E="",z=F(I)?I:new Uint8Array(I),K=0;K<z.length;K+=8192)E+=String.fromCharCode.apply(null,z.subarray(K,K+8192));return E};t.addImage=function(){var I,E,z,K,ie,q,L,G,Y;if(typeof arguments[1]=="number"?(E=e,z=arguments[1],K=arguments[2],ie=arguments[3],q=arguments[4],L=arguments[5],G=arguments[6],Y=arguments[7]):(E=arguments[1],z=arguments[2],K=arguments[3],ie=arguments[4],q=arguments[5],L=arguments[6],G=arguments[7],Y=arguments[8]),bt(I=arguments[0])==="object"&&!m(I)&&"imageData"in I){var ne=I;I=ne.imageData,E=ne.format||E||e,z=ne.x||z||0,K=ne.y||K||0,ie=ne.w||ne.width||ie,q=ne.h||ne.height||q,L=ne.alias||L,G=ne.compression||G,Y=ne.rotation||ne.angle||Y}var ue=this.internal.getFilters();if(G===void 0&&ue.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(z)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var R=j.call(this,I,E,L,G);return A.call(this,z,K,ie,q,R,Y),this};var j=function(I,E,z,K){var ie,q,L;if(typeof I=="string"&&r(I)===e){I=unescape(I);var G=$(I,!1);(G!==""||(G=t.loadFile(I,!0))!==void 0)&&(I=G)}if(m(I)&&(I=y(I,E)),E=r(I,E),!p(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((L=z)==null||L.length===0)&&(z=(function(Y){return typeof Y=="string"||F(Y)?_(Y):F(Y.data)?_(Y.data):null})(I)),(ie=v.call(this,z))||(k()&&(I instanceof Uint8Array||E==="RGBA"||(q=I,I=P(I))),ie=this["process"+E.toUpperCase()](I,c.call(this),z,(function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in t.image_compression?Y:w.NONE})(K),q)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},$=t.__addimage__.convertBase64ToBinaryString=function(I,E){var z;E=typeof E!="boolean"||E;var K,ie="";if(typeof I=="string"){K=(z=D(I))!==null?z.data:I;try{ie=ts(K)}catch(q){if(E)throw T(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};t.getImageProperties=function(I){var E,z,K="";if(m(I)&&(I=y(I)),typeof I=="string"&&r(I)===e&&((K=$(I,!1))===""&&(K=t.loadFile(I)||""),I=K),z=r(I),!p(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(!k()||I instanceof Uint8Array||(I=P(I)),!(E=this["process"+z.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=z,E}})(We.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};We.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,p=!1,m=0;m<c.length&&!p;m++)switch((r=c[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){r=c[y];var v=this.internal.pdfEscape,N=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(A.objId),_=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+v(w(r.contents))+")",o+=" /Popup "+S.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+v(w(_))+") >>",A.content=o;var T=A.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+T,r.open&&(o+=" /Open true"),o+=" >>",S.content=o,this.internal.write(A.objId,"0 R",S.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var D=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+v(N(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var k=this.annotations._nameMap[r.options.name];r.options.pageNumber=k.page,r.options.top=k.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+v(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var F=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+F+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,o,s){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+o)},options:s,type:"link"})},t.textWithLink=function(n,r,i,o){var s,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var p=this.splitTextToSize(n,a).length;s=Math.ceil(c*p)}else a=l,s=c;return this.text(n,r,i,o),i+=.2*c,o.align==="center"&&(r-=l/2),o.align==="right"&&(r-=l),this.link(r,i-c,a,s,o),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(We.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(A){return e[A.charCodeAt(0)]!==void 0},s=t.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},a=t.__arabicParser__.isArabicEndLetter=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(A){return s(A)&&i.indexOf(A.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(A){var S=0,w=n,_="",T=0;for(S=0;S<A.length;S+=1)w[A.charCodeAt(S)]!==void 0?(T++,typeof(w=w[A.charCodeAt(S)])=="number"&&(_+=String.fromCharCode(w),w=n,T=0),S===A.length-1&&(w=n,_+=A.charAt(S-(T-1)),S-=T-1,T=0)):(w=n,_+=A.charAt(S-T),S-=T,T=0);return _};t.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&r[A.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(A,S,w){return s(A)?o(A)===!1?-1:!c(A)||!s(S)&&!s(w)||!s(w)&&a(S)||a(A)&&!s(S)||a(A)&&l(S)||a(A)&&a(S)?0:p(A)&&s(S)&&!a(S)&&s(w)&&c(w)?3:a(A)||!s(w)?1:2:-1},v=function(A){var S=0,w=0,_=0,T="",D="",k="",F=(A=A||"").split("\\s+"),P=[];for(S=0;S<F.length;S+=1){for(P.push(""),w=0;w<F[S].length;w+=1)T=F[S][w],D=F[S][w-1],k=F[S][w+1],s(T)?(_=y(T,D,k),P[S]+=_!==-1?String.fromCharCode(e[T.charCodeAt(0)][_]):T):P[S]+=T;P[S]=m(P[S])}return P.join(" ")},N=t.__arabicParser__.processArabic=t.processArabic=function(){var A,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(S)){var _=0;for(w=[],_=0;_<S.length;_+=1)Array.isArray(S[_])?w.push([v(S[_][0]),S[_][1],S[_][2]]):w.push([v(S[_])]);A=w}else A=v(S);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};t.events.push(["preProcessText",N])})(We.API),We.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(We.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(A){l=A}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(A){c=A}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(A){p=A}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(A){m=A}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(A){y=A}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(A){v=A}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(A){N=A}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var p=(c=c||{}).fontSize||this.getFontSize(),m=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,v=0,N=0,A=0,S=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=c.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce((function(T,D){return T.concat(S.splitTextToSize(D,w))}),[])):l=Array.isArray(l)?l:[l];for(var _=0;_<l.length;_++)v<(A=this.getStringUnitWidth(l[_],{font:m})*p)&&(v=A);return v!==0&&(N=l.length),{w:v/=y,h:Math.max((N*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=m.top,v&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-p,l.y+p,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+p,{align:"center",baseline:"top",maxWidth:l.width-p-p}):this.text(l.text,l.x+p,l.y+p,{align:"left",baseline:"top",maxWidth:l.width-p-p})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,p,m,y){if(r.call(this),!p)throw new Error("No data for PDF table.");var v,N,A,S,w=[],_=[],T=[],D={},k={},F=[],P=[],M=(y=y||{}).autoSize||!1,j=y.printHeaders!==!1,$=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,I=y.margins||Object.assign({width:this.getPageWidth()},e),E=typeof y.padding=="number"?y.padding:3,z=y.headerBackgroundColor||"#c8c8c8",K=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=$,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=K,this.setFontSize($),m==null)_=w=Object.keys(p[0]),T=w.map((function(){return"left"}));else if(Array.isArray(m)&&bt(m[0])==="object")for(w=m.map((function(ne){return ne.name})),_=m.map((function(ne){return ne.prompt||ne.name||""})),T=m.map((function(ne){return ne.align||"left"})),v=0;v<m.length;v+=1)k[m[v].name]=m[v].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(_=w=m,T=w.map((function(){return"left"})));if(M||Array.isArray(m)&&typeof m[0]=="string")for(v=0;v<w.length;v+=1){for(D[S=w[v]]=p.map((function(ne){return ne[S]})),this.setFont(void 0,"bold"),F.push(this.getTextDimensions(_[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=D[S],this.setFont(void 0,"normal"),A=0;A<N.length;A+=1)F.push(this.getTextDimensions(N[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[S]=Math.max.apply(null,F)+E+E,F=[]}if(j){var ie={};for(v=0;v<w.length;v+=1)ie[w[v]]={},ie[w[v]].text=_[v],ie[w[v]].align=T[v];var q=a.call(this,ie,k);P=w.map((function(ne){return new o(l,c,k[ne],q,ie[ne].text,void 0,ie[ne].align)})),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var L=m.reduce((function(ne,ue){return ne[ue.name]=ue.align,ne}),{});for(v=0;v<p.length;v+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:v,data:p[v]},this);var G=a.call(this,p[v],k);for(A=0;A<w.length;A+=1){var Y=p[v][w[A]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:v,col:A,data:Y},this),s.call(this,new o(l,c,k[w[A]],G,Y,v+2,L[w[A]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var p=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map((function(v){var N=l[v];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,c[v]-p-p)}),this).map((function(v){return this.getLineHeightFactor()*v.length*m/y+p+p}),this).reduce((function(v,N){return Math.max(v,N)}),0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){p=this.internal.__cell__.tableHeaderRow[v].clone(),c&&(p.y=this.internal.__cell__.margins.top||0,y.push(p)),p.lineNumber=l;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,p),this.setTextColor(N)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}})(We.API);var Zf={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},eh=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Zl=Qf(eh),th=[100,200,300,400,500,600,700,800,900],Uv=Qf(th);function ec(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(o){return Zf[o=o||"normal"]?o:"normal"})(t.style),r=(function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}})(t.weight),i=(function(o){return typeof Zl[o=o||"normal"]=="number"?o:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function kd(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Bv={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Id={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ed(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function qv(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Bv,n.genericFontFamilies||{}),o=null,s=null,a=0;a<e.length;++a)if(i[(o=ec(e[a])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){s=t[o.family];break}if(!(s=s||t[r]))throw new Error("Could not find a font-family for the rule '"+Ed(o)+"' and default family '"+r+"'.");if(s=(function(l,c){if(c[l])return c[l];var p=Zl[l],m=p<=Zl.normal?-1:1,y=kd(c,eh,p,m);if(!y)throw new Error("Could not find a matching font-stretch value for "+l);return y})(o.stretch,s),s=(function(l,c){if(c[l])return c[l];for(var p=Zf[l],m=0;m<p.length;++m)if(c[p[m]])return c[p[m]];throw new Error("Could not find a matching font-style for "+l)})(o.style,s),!(s=(function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var p=Uv[l],m=kd(c,th,p,l<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+l);return m})(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+Ed(o)+"'.");return s}function Pd(t){return t.trimLeft()}function Ov(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Hv(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var sa,Ld,Rd,Tl=["times"];(function(t){var e,n,r,i,o,s,a,l,c,p=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new l,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new s,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new s,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new p}]);var m=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=R;Object.defineProperty(this,"pdf",{get:function(){return V}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(ye){X=!!ye}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(ye){Q=!!ye}});var ee=0;Object.defineProperty(this,"posX",{get:function(){return ee},set:function(ye){isNaN(ye)||(ee=ye)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(ye){isNaN(ye)||(se=ye)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ye){var re;typeof ye=="number"?re=[ye,ye,ye,ye]:((re=new Array(4))[0]=ye[0],re[1]=ye.length>=2?ye[1]:re[0],re[2]=ye.length>=3?ye[2]:re[0],re[3]=ye.length>=4?ye[3]:re[1]),c.margin=re}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(ye){de=ye}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(ye){pe=ye}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(ye){Ne=ye}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ye){ye instanceof p&&(c=ye)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ye){c.path=ye}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(ye){Ce=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var re;re=y(ye),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=re.a===0,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var re=y(ye);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=re.a===0,this.ctx.strokeOpacity=re.a,re.a===0?this.pdf.setDrawColor(255,255,255):(re.a,this.pdf.setDrawColor(re.r,re.g,re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Ee=null;function Ie(ye,re){if(Ee===null){var Ke=(function(Oe){var ke=[];return Object.keys(Oe).forEach((function(Pe){Oe[Pe].forEach((function(Fe){var Me=null;switch(Fe){case"bold":Me={family:Pe,weight:"bold"};break;case"italic":Me={family:Pe,style:"italic"};break;case"bolditalic":Me={family:Pe,weight:"bold",style:"italic"};break;case"":case"normal":Me={family:Pe}}Me!==null&&(Me.ref={name:Pe,style:Fe},ke.push(Me))}))})),ke})(ye.getFontList());Ee=(function(Oe){for(var ke={},Pe=0;Pe<Oe.length;++Pe){var Fe=ec(Oe[Pe]),Me=Fe.family,Ve=Fe.stretch,Ze=Fe.style,ot=Fe.weight;ke[Me]=ke[Me]||{},ke[Me][Ve]=ke[Me][Ve]||{},ke[Me][Ve][Ze]=ke[Me][Ve][Ze]||{},ke[Me][Ve][Ze][ot]=Fe}return ke})(Ke.concat(re))}return Ee}var He=null;Object.defineProperty(this,"fontFaces",{get:function(){return He},set:function(ye){Ee=null,He=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var re;if(this.ctx.font=ye,(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var Ke=re[1],Oe=(re[2],re[3]),ke=re[4],Pe=(re[5],re[6]),Fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ke)[2];ke=Math.floor(Fe==="px"?parseFloat(ke)*this.pdf.internal.scaleFactor:Fe==="em"?parseFloat(ke)*this.pdf.getFontSize():parseFloat(ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ke);var Me=(function(Ye){var lt,je,nn=[],ht=Ye.trim();if(ht==="")return Tl;if(ht in Id)return[Id[ht]];for(;ht!=="";){switch(je=null,lt=(ht=Pd(ht)).charAt(0)){case'"':case"'":je=Ov(ht.substring(1),lt);break;default:je=Hv(ht)}if(je===null||(nn.push(je[0]),(ht=Pd(je[1]))!==""&&ht.charAt(0)!==","))return Tl;ht=ht.replace(/^,/,"")}return nn})(Pe);if(this.fontFaces){var Ve=qv(Ie(this.pdf,this.fontFaces),Me.map((function(Ye){return{family:Ye,stretch:"normal",weight:Oe,style:Ke}})));this.pdf.setFont(Ve.ref.name,Ve.ref.style)}else{var Ze="";(Oe==="bold"||parseInt(Oe,10)>=700||Ke==="bold")&&(Ze="bold"),Ke==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ot="",at={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<Me.length;dt++){if(this.pdf.internal.getFont(Me[dt],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ot=Me[dt];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(Me[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Me[dt],Ze="bold";else if(this.pdf.internal.getFont(Me[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Me[dt],Ze="normal";break}}if(ot===""){for(var wt=0;wt<Me.length;wt++)if(at[Me[wt]]){ot=at[Me[wt]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};m.prototype.setLineDash=function(R){this.lineDash=R},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){D.call(this,"fill",!1)},m.prototype.stroke=function(){D.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(R,V){if(isNaN(R)||isNaN(V))throw At.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new s(R,V));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new s(R,V)},m.prototype.closePath=function(){var R=new s(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&bt(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){R=new s(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(R.x,R.y)},m.prototype.lineTo=function(R,V){if(isNaN(R)||isNaN(V))throw At.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new s(R,V));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new s(X.x,X.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},m.prototype.quadraticCurveTo=function(R,V,X,Q){if(isNaN(X)||isNaN(Q)||isNaN(R)||isNaN(V))throw At.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ee=this.ctx.transform.applyToPoint(new s(X,Q)),se=this.ctx.transform.applyToPoint(new s(R,V));this.path.push({type:"qct",x1:se.x,y1:se.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new s(ee.x,ee.y)},m.prototype.bezierCurveTo=function(R,V,X,Q,ee,se){if(isNaN(ee)||isNaN(se)||isNaN(R)||isNaN(V)||isNaN(X)||isNaN(Q))throw At.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new s(ee,se)),pe=this.ctx.transform.applyToPoint(new s(R,V)),Ne=this.ctx.transform.applyToPoint(new s(X,Q));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:Ne.x,y2:Ne.y,x:de.x,y:de.y}),this.ctx.lastPoint=new s(de.x,de.y)},m.prototype.arc=function(R,V,X,Q,ee,se){if(isNaN(R)||isNaN(V)||isNaN(X)||isNaN(Q)||isNaN(ee))throw At.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new s(R,V));R=de.x,V=de.y;var pe=this.ctx.transform.applyToPoint(new s(0,X)),Ne=this.ctx.transform.applyToPoint(new s(0,0));X=Math.sqrt(Math.pow(pe.x-Ne.x,2)+Math.pow(pe.y-Ne.y,2))}Math.abs(ee-Q)>=2*Math.PI&&(Q=0,ee=2*Math.PI),this.path.push({type:"arc",x:R,y:V,radius:X,startAngle:Q,endAngle:ee,counterclockwise:se})},m.prototype.arcTo=function(R,V,X,Q,ee){throw new Error("arcTo not implemented.")},m.prototype.rect=function(R,V,X,Q){if(isNaN(R)||isNaN(V)||isNaN(X)||isNaN(Q))throw At.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,V),this.lineTo(R+X,V),this.lineTo(R+X,V+Q),this.lineTo(R,V+Q),this.lineTo(R,V),this.lineTo(R+X,V),this.lineTo(R,V)},m.prototype.fillRect=function(R,V,X,Q){if(isNaN(R)||isNaN(V)||isNaN(X)||isNaN(Q))throw At.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var ee={};this.lineCap!=="butt"&&(ee.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ee.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,V,X,Q),this.fill(),ee.hasOwnProperty("lineCap")&&(this.lineCap=ee.lineCap),ee.hasOwnProperty("lineJoin")&&(this.lineJoin=ee.lineJoin)}},m.prototype.strokeRect=function(R,V,X,Q){if(isNaN(R)||isNaN(V)||isNaN(X)||isNaN(Q))throw At.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(R,V,X,Q),this.stroke())},m.prototype.clearRect=function(R,V,X,Q){if(isNaN(R)||isNaN(V)||isNaN(X)||isNaN(Q))throw At.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,V,X,Q))},m.prototype.save=function(R){R=typeof R!="boolean"||R;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},m.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(V),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(R){var V,X,Q,ee;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))V=0,X=0,Q=0,ee=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(se!==null)V=parseInt(se[1]),X=parseInt(se[2]),Q=parseInt(se[3]),ee=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)V=parseInt(se[1]),X=parseInt(se[2]),Q=parseInt(se[3]),ee=parseFloat(se[4]);else{if(ee=1,typeof R=="string"&&R.charAt(0)!=="#"){var de=new Wf(R);R=de.ok?de.toHex():"#000000"}R.length===4?(V=R.substring(1,2),V+=V,X=R.substring(2,3),X+=X,Q=R.substring(3,4),Q+=Q):(V=R.substring(1,3),X=R.substring(3,5),Q=R.substring(5,7)),V=parseInt(V,16),X=parseInt(X,16),Q=parseInt(Q,16)}}return{r:V,g:X,b:Q,a:ee,style:R}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(R,V,X,Q){if(isNaN(V)||isNaN(X)||typeof R!="string")throw At.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!v.call(this)){var ee=G(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;E.call(this,{text:R,x:V,y:X,scale:se,angle:ee,align:this.textAlign,maxWidth:Q})}},m.prototype.strokeText=function(R,V,X,Q){if(isNaN(V)||isNaN(X)||typeof R!="string")throw At.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){Q=isNaN(Q)?void 0:Q;var ee=G(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;E.call(this,{text:R,x:V,y:X,scale:se,renderingMode:"stroke",angle:ee,align:this.textAlign,maxWidth:Q})}},m.prototype.measureText=function(R){if(typeof R!="string")throw At.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,X=this.pdf.internal.scaleFactor,Q=V.internal.getFontSize(),ee=V.getStringUnitWidth(R)*Q/V.internal.scaleFactor,se=function(de){var pe=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this};return new se({width:ee*=Math.round(96*X/72*1e4)/1e4})},m.prototype.scale=function(R,V){if(isNaN(R)||isNaN(V))throw At.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new l(R,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},m.prototype.rotate=function(R){if(isNaN(R))throw At.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new l(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.translate=function(R,V){if(isNaN(R)||isNaN(V))throw At.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new l(1,0,0,1,R,V);this.ctx.transform=this.ctx.transform.multiply(X)},m.prototype.transform=function(R,V,X,Q,ee,se){if(isNaN(R)||isNaN(V)||isNaN(X)||isNaN(Q)||isNaN(ee)||isNaN(se))throw At.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new l(R,V,X,Q,ee,se);this.ctx.transform=this.ctx.transform.multiply(de)},m.prototype.setTransform=function(R,V,X,Q,ee,se){R=isNaN(R)?1:R,V=isNaN(V)?0:V,X=isNaN(X)?0:X,Q=isNaN(Q)?1:Q,ee=isNaN(ee)?0:ee,se=isNaN(se)?0:se,this.ctx.transform=new l(R,V,X,Q,ee,se)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(R,V,X,Q,ee,se,de,pe,Ne){var Ce=this.pdf.getImageProperties(R),Ee=1,Ie=1,He=1,ye=1;Q!==void 0&&pe!==void 0&&(He=pe/Q,ye=Ne/ee,Ee=Ce.width/Q*pe/Q,Ie=Ce.height/ee*Ne/ee),se===void 0&&(se=V,de=X,V=0,X=0),Q!==void 0&&pe===void 0&&(pe=Q,Ne=ee),Q===void 0&&pe===void 0&&(pe=Ce.width,Ne=Ce.height);for(var re,Ke=this.ctx.transform.decompose(),Oe=G(Ke.rotate.shx),ke=new l,Pe=(ke=(ke=(ke=ke.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale)).applyToRectangle(new a(se-V*He,de-X*ye,Q*Ee,ee*Ie)),Fe=S.call(this,Pe),Me=[],Ve=0;Ve<Fe.length;Ve+=1)Me.indexOf(Fe[Ve])===-1&&Me.push(Fe[Ve]);if(T(Me),this.autoPaging)for(var Ze=Me[0],ot=Me[Me.length-1],at=Ze;at<ot+1;at++){this.pdf.setPage(at);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wt=at===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],je=at===1?0:Ye+(at-2)*lt;if(this.ctx.clip_path.length!==0){var nn=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(re,this.posX+this.margin[3],-je+wt+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=nn}var ht=JSON.parse(JSON.stringify(Pe));ht=_([ht],this.posX+this.margin[3],-je+wt+this.ctx.prevPageLastElemOffset)[0];var qn=(at>Ze||at<ot)&&A.call(this);qn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,lt,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",ht.x,ht.y,ht.w,ht.h,null,null,Oe),qn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,Oe)};var S=function(R,V,X){var Q=[];V=V||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ee=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":Q.push(Math.floor((R.y+ee)/X)+1);break;case"arc":Q.push(Math.floor((R.y+ee-R.radius)/X)+1),Q.push(Math.floor((R.y+ee+R.radius)/X)+1);break;case"qct":var se=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);Q.push(Math.floor((se.y+ee)/X)+1),Q.push(Math.floor((se.y+se.h+ee)/X)+1);break;case"bct":var de=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);Q.push(Math.floor((de.y+ee)/X)+1),Q.push(Math.floor((de.y+de.h+ee)/X)+1);break;case"rect":Q.push(Math.floor((R.y+ee)/X)+1),Q.push(Math.floor((R.y+R.h+ee)/X)+1)}for(var pe=0;pe<Q.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<Q[pe];)w.call(this);return Q},w=function(){var R=this.fillStyle,V=this.strokeStyle,X=this.font,Q=this.lineCap,ee=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=V,this.font=X,this.lineCap=Q,this.lineWidth=ee,this.lineJoin=se},_=function(R,V,X){for(var Q=0;Q<R.length;Q++)switch(R[Q].type){case"bct":R[Q].x2+=V,R[Q].y2+=X;case"qct":R[Q].x1+=V,R[Q].y1+=X;case"mt":case"lt":case"arc":default:R[Q].x+=V,R[Q].y+=X}return R},T=function(R){return R.sort((function(V,X){return V-X}))},D=function(R,V){for(var X,Q,ee=this.fillStyle,se=this.strokeStyle,de=this.lineCap,pe=this.lineWidth,Ne=Math.abs(pe*this.ctx.transform.scaleX),Ce=this.lineJoin,Ee=JSON.parse(JSON.stringify(this.path)),Ie=JSON.parse(JSON.stringify(this.path)),He=[],ye=0;ye<Ie.length;ye++)if(Ie[ye].x!==void 0)for(var re=S.call(this,Ie[ye]),Ke=0;Ke<re.length;Ke+=1)He.indexOf(re[Ke])===-1&&He.push(re[Ke]);for(var Oe=0;Oe<He.length;Oe++)for(;this.pdf.internal.getNumberOfPages()<He[Oe];)w.call(this);if(T(He),this.autoPaging)for(var ke=He[0],Pe=He[He.length-1],Fe=ke;Fe<Pe+1;Fe++){this.pdf.setPage(Fe),this.fillStyle=ee,this.strokeStyle=se,this.lineCap=de,this.lineWidth=Ne,this.lineJoin=Ce;var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Fe===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],at=Fe===1?0:Ze+(Fe-2)*ot;if(this.ctx.clip_path.length!==0){var dt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(X,this.posX+this.margin[3],-at+Ve+this.ctx.prevPageLastElemOffset),k.call(this,R,!0),this.path=dt}if(Q=JSON.parse(JSON.stringify(Ee)),this.path=_(Q,this.posX+this.margin[3],-at+Ve+this.ctx.prevPageLastElemOffset),V===!1||Fe===0){var wt=(Fe>ke||Fe<Pe)&&A.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,ot,null).clip().discardPath()),k.call(this,R,V),wt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}else this.lineWidth=Ne,k.call(this,R,V),this.lineWidth=pe;this.path=Ee},k=function(R,V){if((R!=="stroke"||V||!N.call(this))&&(R==="stroke"||V||!v.call(this))){for(var X,Q,ee=[],se=this.path,de=0;de<se.length;de++){var pe=se[de];switch(pe.type){case"begin":ee.push({begin:!0});break;case"close":ee.push({close:!0});break;case"mt":ee.push({start:pe,deltas:[],abs:[]});break;case"lt":var Ne=ee.length;if(se[de-1]&&!isNaN(se[de-1].x)&&(X=[pe.x-se[de-1].x,pe.y-se[de-1].y],Ne>0)){for(;Ne>=0;Ne--)if(ee[Ne-1].close!==!0&&ee[Ne-1].begin!==!0){ee[Ne-1].deltas.push(X),ee[Ne-1].abs.push(pe);break}}break;case"bct":X=[pe.x1-se[de-1].x,pe.y1-se[de-1].y,pe.x2-se[de-1].x,pe.y2-se[de-1].y,pe.x-se[de-1].x,pe.y-se[de-1].y],ee[ee.length-1].deltas.push(X);break;case"qct":var Ce=se[de-1].x+2/3*(pe.x1-se[de-1].x),Ee=se[de-1].y+2/3*(pe.y1-se[de-1].y),Ie=pe.x+2/3*(pe.x1-pe.x),He=pe.y+2/3*(pe.y1-pe.y),ye=pe.x,re=pe.y;X=[Ce-se[de-1].x,Ee-se[de-1].y,Ie-se[de-1].x,He-se[de-1].y,ye-se[de-1].x,re-se[de-1].y],ee[ee.length-1].deltas.push(X);break;case"arc":ee.push({deltas:[],abs:[],arc:!0}),Array.isArray(ee[ee.length-1].abs)&&ee[ee.length-1].abs.push(pe)}}Q=V?null:R==="stroke"?"stroke":"fill";for(var Ke=!1,Oe=0;Oe<ee.length;Oe++)if(ee[Oe].arc)for(var ke=ee[Oe].abs,Pe=0;Pe<ke.length;Pe++){var Fe=ke[Pe];Fe.type==="arc"?M.call(this,Fe.x,Fe.y,Fe.radius,Fe.startAngle,Fe.endAngle,Fe.counterclockwise,void 0,V,!Ke):z.call(this,Fe.x,Fe.y),Ke=!0}else if(ee[Oe].close===!0)this.pdf.internal.out("h"),Ke=!1;else if(ee[Oe].begin!==!0){var Me=ee[Oe].start.x,Ve=ee[Oe].start.y;K.call(this,ee[Oe].deltas,Me,Ve),Ke=!0}Q&&j.call(this,Q),V&&$.call(this)}},F=function(R){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-X;case"top":return R+V-X;case"hanging":return R+V-2*X;case"middle":return R+V/2-X;case"ideographic":return R;case"alphabetic":default:return R}},P=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(V,X){this.colorStops.push([V,X])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(R,V,X,Q,ee,se,de,pe,Ne){for(var Ce=q.call(this,X,Q,ee,se),Ee=0;Ee<Ce.length;Ee++){var Ie=Ce[Ee];Ee===0&&(Ne?I.call(this,Ie.x1+R,Ie.y1+V):z.call(this,Ie.x1+R,Ie.y1+V)),ie.call(this,R,V,Ie.x2,Ie.y2,Ie.x3,Ie.y3,Ie.x4,Ie.y4)}pe?$.call(this):j.call(this,de)},j=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},$=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(R,V){this.pdf.internal.out(n(R)+" "+r(V)+" m")},E=function(R){var V;switch(R.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var X=this.pdf.getTextDimensions(R.text),Q=F.call(this,R.y),ee=P.call(this,Q)-X.h,se=this.ctx.transform.applyToPoint(new s(R.x,Q)),de=this.ctx.transform.decompose(),pe=new l;pe=(pe=(pe=pe.multiply(de.translate)).multiply(de.skew)).multiply(de.scale);for(var Ne,Ce,Ee,Ie=this.ctx.transform.applyToRectangle(new a(R.x,Q,X.w,X.h)),He=pe.applyToRectangle(new a(R.x,ee,X.w,X.h)),ye=S.call(this,He),re=[],Ke=0;Ke<ye.length;Ke+=1)re.indexOf(ye[Ke])===-1&&re.push(ye[Ke]);if(T(re),this.autoPaging)for(var Oe=re[0],ke=re[re.length-1],Pe=Oe;Pe<ke+1;Pe++){this.pdf.setPage(Pe);var Fe=Pe===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],Ze=Ve-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],at=ot-this.margin[3],dt=Pe===1?0:Me+(Pe-2)*Ze;if(this.ctx.clip_path.length!==0){var wt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(Ne,this.posX+this.margin[3],-1*dt+Fe),k.call(this,"fill",!0),this.path=wt}var Ye=_([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-dt+Fe+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*R.scale),Ee=this.lineWidth,this.lineWidth=Ee*R.scale);var lt=this.autoPaging!=="text";if(lt||Ye.y+Ye.h<=Ve){if(lt||Ye.y>=Fe&&Ye.x<=ot){var je=lt?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||ot-Ye.x)[0],nn=_([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-dt+Fe+this.ctx.prevPageLastElemOffset)[0],ht=lt&&(Pe>Oe||Pe<ke)&&A.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Ze,null).clip().discardPath()),this.pdf.text(je,nn.x,nn.y,{angle:R.angle,align:V,renderingMode:R.renderingMode}),ht&&this.pdf.restoreGraphicsState()}}else Ye.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-Ye.y);R.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ee)}else R.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*R.scale),Ee=this.lineWidth,this.lineWidth=Ee*R.scale),this.pdf.text(R.text,se.x+this.posX,se.y+this.posY,{angle:R.angle,align:V,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ee)},z=function(R,V,X,Q){X=X||0,Q=Q||0,this.pdf.internal.out(n(R+X)+" "+r(V+Q)+" l")},K=function(R,V,X){return this.pdf.lines(R,V,X,null,null)},ie=function(R,V,X,Q,ee,se,de,pe){this.pdf.internal.out([e(i(X+R)),e(o(Q+V)),e(i(ee+R)),e(o(se+V)),e(i(de+R)),e(o(pe+V)),"c"].join(" "))},q=function(R,V,X,Q){for(var ee=2*Math.PI,se=Math.PI/2;V>X;)V-=ee;var de=Math.abs(X-V);de<ee&&Q&&(de=ee-de);for(var pe=[],Ne=Q?-1:1,Ce=V;de>1e-5;){var Ee=Ce+Ne*Math.min(de,se);pe.push(L.call(this,R,Ce,Ee)),de-=Math.abs(Ee-Ce),Ce=Ee}return pe},L=function(R,V,X){var Q=(X-V)/2,ee=R*Math.cos(Q),se=R*Math.sin(Q),de=ee,pe=-se,Ne=de*de+pe*pe,Ce=Ne+de*ee+pe*se,Ee=4/3*(Math.sqrt(2*Ne*Ce)-Ce)/(de*se-pe*ee),Ie=de-Ee*pe,He=pe+Ee*de,ye=Ie,re=-He,Ke=Q+V,Oe=Math.cos(Ke),ke=Math.sin(Ke);return{x1:R*Math.cos(V),y1:R*Math.sin(V),x2:Ie*Oe-He*ke,y2:Ie*ke+He*Oe,x3:ye*Oe-re*ke,y3:ye*ke+re*Oe,x4:R*Math.cos(X),y4:R*Math.sin(X)}},G=function(R){return 180*R/Math.PI},Y=function(R,V,X,Q,ee,se){var de=R+.5*(X-R),pe=V+.5*(Q-V),Ne=ee+.5*(X-ee),Ce=se+.5*(Q-se),Ee=Math.min(R,ee,de,Ne),Ie=Math.max(R,ee,de,Ne),He=Math.min(V,se,pe,Ce),ye=Math.max(V,se,pe,Ce);return new a(Ee,He,Ie-Ee,ye-He)},ne=function(R,V,X,Q,ee,se,de,pe){var Ne,Ce,Ee,Ie,He,ye,re,Ke,Oe,ke,Pe,Fe,Me,Ve,Ze=X-R,ot=Q-V,at=ee-X,dt=se-Q,wt=de-ee,Ye=pe-se;for(Ce=0;Ce<41;Ce++)Oe=(re=(Ee=R+(Ne=Ce/40)*Ze)+Ne*((He=X+Ne*at)-Ee))+Ne*(He+Ne*(ee+Ne*wt-He)-re),ke=(Ke=(Ie=V+Ne*ot)+Ne*((ye=Q+Ne*dt)-Ie))+Ne*(ye+Ne*(se+Ne*Ye-ye)-Ke),Ce==0?(Pe=Oe,Fe=ke,Me=Oe,Ve=ke):(Pe=Math.min(Pe,Oe),Fe=Math.min(Fe,ke),Me=Math.max(Me,Oe),Ve=Math.max(Ve,ke));return new a(Math.round(Pe),Math.round(Fe),Math.round(Me-Pe),Math.round(Ve-Fe))},ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,V,X=(R=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:V}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(We.API),(function(t){var e=function(o){var s,a,l,c,p,m,y,v,N,A;for(a=[],l=0,c=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;c>l;l+=4)(p=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(m=(p=((p=((p=((p=(p-(A=p%85))/85)-(N=p%85))/85)-(v=p%85))/85)-(y=p%85))/85)%85,a.push(m+33,y+33,v+33,N+33,A+33)):a.push(122);return(function(S,w){for(var _=w;_>0;_--)S.pop()})(a,s.length),String.fromCharCode.apply(String,a)+"~>"},n=function(o){var s,a,l,c,p,m=String,y="length",v=255,N="charCodeAt",A="slice",S="replace";for(o[A](-2),o=o[A](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),l=[],c=0,p=(o+=s="uuuuu"[A](o[y]%5||5))[y];p>c;c+=5)a=52200625*(o[N](c)-33)+614125*(o[N](c+1)-33)+7225*(o[N](c+2)-33)+85*(o[N](c+3)-33)+(o[N](c+4)-33),l.push(v&a>>24,v&a>>16,v&a>>8,v&a);return(function(w,_){for(var T=_;T>0;T--)w.pop()})(l,s[y]),m.fromCharCode.apply(m,l)},r=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var a="",l=0;l<o.length;l+=2)a+=String.fromCharCode("0x"+(o[l]+o[l+1]));return a},i=function(o){for(var s=new Uint8Array(o.length),a=o.length;a--;)s[a]=o.charCodeAt(a);return o=(s=Jl(s)).reduce((function(l,c){return l+String.fromCharCode(c)}),"")};t.processDataByFilters=function(o,s){var a=0,l=o||"",c=[];for(typeof(s=s||[])=="string"&&(s=[s]),a=0;a<s.length;a+=1)switch(s[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map((function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)})).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}})(We.API),(function(t){t.loadFile=function(e,n,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(l,c,p){var m=new XMLHttpRequest,y=0,v=function(N){var A=N.length,S=[],w=String.fromCharCode;for(y=0;y<A;y+=1)S.push(w(255&N.charCodeAt(y)));return S.join("")};if(m.open("GET",l,!c),m.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(m.onload=function(){m.status===200?p(v(this.responseText)):p(void 0)}),m.send(null),c&&m.status===200)return v(m.responseText)})(i,o,s)}catch{}return a})(e,n,r)},t.loadImageFile=t.loadFile})(We.API),(function(t){function e(){return(Je.html2canvas?Promise.resolve(Je.html2canvas):Il(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))})).then((function(s){return s.default?s.default:s}))}function n(){return(Je.DOMPurify?Promise.resolve(Je.DOMPurify):Il(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(s){return Promise.reject(new Error("Could not load dompurify: "+s))})).then((function(s){return s.default?s.default:s}))}var r=function(s){var a=bt(s);return a==="undefined"?"undefined":a==="string"||s instanceof String?"string":a==="number"||s instanceof Number?"number":a==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(s,a){var l=document.createElement(s);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},o=function s(a){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),c=s.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,s,1,[s])).set(a)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,a){return s.__proto__=a||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,a){return this.then((function(){switch(a=a||(function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(s)){case"string":return this.then(n).then((function(l){return this.set({src:i("div",{innerHTML:s,dompurify:l})})}));case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=(function l(c,p){for(var m=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),y=c.firstChild;y;y=y.nextSibling)p!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||m.appendChild(l(y,p));return c.nodeType===1&&(c.nodeName==="CANVAS"?(m.width=c.width,m.height=c.height,m.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(m.value=c.value),m.addEventListener("load",(function(){m.scrollTop=c.scrollTop,m.scrollLeft=c.scrollLeft}),!0)),m})(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then((function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)})).then((function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then((function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var y=0;y<c.length;++y){var v=c[y],N=v.src.find((function(A){return A.format==="truetype"}));N&&l.addFont(N.url,v.ref.name,v.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),a(this.prop.container,m)})).then((function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(s,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,a):this.outputPdf(s,a)},o.prototype.outputPdf=function(s,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(s,a)}))},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}}))},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(s){if(r(s)!=="object")return this;var a=Object.keys(s||{}).map((function(l){if(l in o.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}}),this);return this.then((function(){return this.thenList(a)}))},o.prototype.get=function(s,a){return this.then((function(){var l=s in o.template.prop?this.prop[s]:this.opt[s];return a?a(l):l}))},o.prototype.setMargin=function(s){return this.then((function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s})).then(this.setPageSize)},o.prototype.setPageSize=function(s){function a(l,c){return Math.floor(l*c/72*96)}return this.then((function(){(s=s||We.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:a(s.inner.width,s.k),height:a(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s}))},o.prototype.setProgress=function(s,a,l,c){return s!=null&&(this.progress.val=s),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,a,l,c){return this.setProgress(s?this.progress.val+s:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},o.prototype.then=function(s,a){var l=this;return this.thenCore(s,a,(function(c,p){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,(function(m){return l.updateProgress(null,c),m})).then(c,p).then((function(m){return l.updateProgress(1),m}))}))},o.prototype.thenCore=function(s,a,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),p=l.call(c,s,a);return o.convert(p,this.__proto__)},o.prototype.thenExternal=function(s,a){return Promise.prototype.then.call(this,s,a)},o.prototype.thenList=function(s){var a=this;return s.forEach((function(l){a=a.thenCore(l)})),a},o.prototype.catch=function(s){s&&(s=s.bind(this));var a=Promise.prototype.catch.call(this,s);return o.convert(a,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then((function(){throw new Error(s)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,We.getPageSize=function(s,a,l){if(bt(s)==="object"){var c=s;s=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var p,m=(""+l).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+a}var v,N=0,A=0;if(y.hasOwnProperty(m))N=y[m][1]/p,A=y[m][0]/p;else try{N=l[1],A=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",A>N&&(v=A,A=N,N=v);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",N>A&&(v=A,A=N,N=v)}return{width:A,height:N,unit:a,k:p,orientation:s}},t.html=function(s,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(ec):null;var l=new o(a);return a.worker?l:l.from(s).doCallback()}})(We.API),We.API.addJS=function(t){return Rd=t,this.internal.events.subscribe("postPutResources",(function(){sa=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(sa+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ld=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Rd+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){sa!==void 0&&Ld!==void 0&&this.internal.out("/Names <</JavaScript "+sa+" 0 R>>")})),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,p=[];for(o=0;o<c;o++){var m=n.internal.newObject();p.push(m);var y=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var v=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<p.length;o++)n.internal.write("(page_"+(o+1)+")"+p[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+v+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var l=n.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(We.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,o,s,a){var l,c=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=s||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=(function(m){for(var y,v=256*m.charCodeAt(4)+m.charCodeAt(5),N=m.length,A={width:0,height:0,numcomponents:1},S=4;S<N;S+=2){if(S+=v,e.indexOf(m.charCodeAt(S+1))!==-1){y=256*m.charCodeAt(S+5)+m.charCodeAt(S+6),A={width:256*m.charCodeAt(S+7)+m.charCodeAt(S+8),height:y,numcomponents:m.charCodeAt(S+9)};break}v=256*m.charCodeAt(S+2)+m.charCodeAt(S+3)}return A})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}p={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return p}})(We.API);var oo,aa,Md,Dd,Fd,Vv=(function(){var t,e,n;function r(o){var s,a,l,c,p,m,y,v,N,A,S,w,_,T;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(s=this.readUInt32(),N=(function(){var D,k;for(k=[],D=0;D<4;++D)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),c=this.readUInt16()||100,m.delay=1e3*p/c,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,s-=4),o=(m!=null?m.data:void 0)||this.imgData,w=0;0<=s?w<s:w>s;0<=s?++w:--w)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((A=l-this.transparency.indexed.length)>0)for(_=0;0<=A?_<A:_>A;0<=A?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":y=(S=this.read(s)).indexOf(0),v=String.fromCharCode.apply(String,S.slice(0,y)),this.text[v]=String.fromCharCode.apply(String,S.slice(y+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var s,a;for(a=[],s=0;0<=o?s<o:s>o;0<=o?++s:--s)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var s=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*s),l=0,c=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function p(m,y,v,N){var A,S,w,_,T,D,k,F,P,M,j,$,I,E,z,K,ie,q,L,G,Y,ne=Math.ceil((c.width-m)/v),ue=Math.ceil((c.height-y)/N),R=c.width==ne&&c.height==ue;for(E=s*ne,$=R?a:new Uint8Array(E*ue),D=o.length,I=0,S=0;I<ue&&l<D;){switch(o[l++]){case 0:for(_=ie=0;ie<E;_=ie+=1)$[S++]=o[l++];break;case 1:for(_=q=0;q<E;_=q+=1)A=o[l++],T=_<s?0:$[S-s],$[S++]=(A+T)%256;break;case 2:for(_=L=0;L<E;_=L+=1)A=o[l++],w=(_-_%s)/s,z=I&&$[(I-1)*E+w*s+_%s],$[S++]=(z+A)%256;break;case 3:for(_=G=0;G<E;_=G+=1)A=o[l++],w=(_-_%s)/s,T=_<s?0:$[S-s],z=I&&$[(I-1)*E+w*s+_%s],$[S++]=(A+Math.floor((T+z)/2))%256;break;case 4:for(_=Y=0;Y<E;_=Y+=1)A=o[l++],w=(_-_%s)/s,T=_<s?0:$[S-s],I===0?z=K=0:(z=$[(I-1)*E+w*s+_%s],K=w&&$[(I-1)*E+(w-1)*s+_%s]),k=T+z-K,F=Math.abs(k-T),M=Math.abs(k-z),j=Math.abs(k-K),P=F<=M&&F<=j?T:M<=j?z:K,$[S++]=(A+P)%256;break;default:throw new Error("Invalid filter algorithm: "+o[l-1])}if(!R){var V=((y+I*N)*c.width+m)*s,X=I*E;for(_=0;_<ne;_+=1){for(var Q=0;Q<s;Q+=1)a[V++]=$[X++];V+=(v-1)*s}}I++}}return o=bv(o),c.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),a},r.prototype.decodePalette=function(){var o,s,a,l,c,p,m,y,v;for(a=this.palette,p=this.transparency.indexed||[],c=new Uint8Array((p.length||0)+a.length),l=0,o=0,s=m=0,y=a.length;m<y;s=m+=3)c[l++]=a[s],c[l++]=a[s+1],c[l++]=a[s+2],c[l++]=(v=p[o++])!=null?v:255;return c},r.prototype.copyToImageData=function(o,s){var a,l,c,p,m,y,v,N,A,S,w;if(l=this.colors,A=null,a=this.hasAlphaChannel,this.palette.length&&(A=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,a=!0),N=(c=o.data||o).length,m=A||s,p=y=0,l===1)for(;p<N;)v=A?4*s[p/4]:y,S=m[v++],c[p++]=S,c[p++]=S,c[p++]=S,c[p++]=a?m[v++]:255,y=v;else for(;p<N;)v=A?4*s[p/4]:y,c[p++]=m[v++],c[p++]=m[v++],c[p++]=m[v++],c[p++]=a?m[v++]:255,y=v},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(Je)==="[object Window]"){try{e=Je.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(o){var s;if(i()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var s,a,l,c,p,m,y,v;if(this.animation){for(v=[],a=p=0,m=(y=this.animation.frames).length;p<m;a=++p)s=y[a],l=o.createImageData(s.width,s.height),c=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,c),s.imageData=l,v.push(s.image=t(l));return v}},r.prototype.renderFrame=function(o,s){var a,l,c;return a=(l=this.animation.frames)[s],c=l[s-1],s===0&&o.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?o.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&o.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&o.clearRect(a.xOffset,a.yOffset,a.width,a.height),o.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(o){var s,a,l,c,p,m,y=this;return a=0,m=this.animation,c=m.numFrames,l=m.frames,p=m.numPlays,(s=function(){var v,N;if(v=a++%c,N=l[v],y.renderFrame(o,v),c>1&&a/c<p)return y.animation._timeout=setTimeout(s,N.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var s,a;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,s=o.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(a=s.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),s.putImageData(a,0,0))},r})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Gv(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,s=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;o&&(a=e,l=s,e+=3*s);var c=!0,p=[],m=0,y=null,v=0,N=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,N=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var A=t[e++];m=t[e++]|t[e++]<<8,y=t[e++],(1&A)==0&&(y=null),v=A>>2&7,e++;break;case 254:for(;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var S=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,D=t[e++],k=D>>6&1,F=1<<(7&D)+1,P=a,M=l,j=!1;D>>7&&(j=!0,P=e,M=F,e+=3*F);var $=e;for(e++;;){var I;if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}p.push({x:S,y:w,width:_,height:T,has_local_palette:j,palette_offset:P,palette_size:M,data_offset:$,data_length:e-$,transparent_index:y,interlaced:!!k,delay:m,disposal:v});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return N},this.frameInfo=function(E){if(E<0||E>=p.length)throw new Error("Frame index out of range.");return p[E]},this.decodeAndBlitFrameBGRA=function(E,z){var K=this.frameInfo(E),ie=K.width*K.height,q=new Uint8Array(ie);jd(t,K.data_offset,q,ie);var L=K.palette_offset,G=K.transparent_index;G===null&&(G=256);var Y=K.width,ne=n-Y,ue=Y,R=4*(K.y*n+K.x),V=4*((K.y+K.height)*n+K.x),X=R,Q=4*ne;K.interlaced===!0&&(Q+=4*n*7);for(var ee=8,se=0,de=q.length;se<de;++se){var pe=q[se];if(ue===0&&(ue=Y,(X+=Q)>=V&&(Q=4*ne+4*n*(ee-1),X=R+(Y+ne)*(ee<<1),ee>>=1)),pe===G)X+=4;else{var Ne=t[L+3*pe],Ce=t[L+3*pe+1],Ee=t[L+3*pe+2];z[X++]=Ee,z[X++]=Ce,z[X++]=Ne,z[X++]=255}--ue}},this.decodeAndBlitFrameRGBA=function(E,z){var K=this.frameInfo(E),ie=K.width*K.height,q=new Uint8Array(ie);jd(t,K.data_offset,q,ie);var L=K.palette_offset,G=K.transparent_index;G===null&&(G=256);var Y=K.width,ne=n-Y,ue=Y,R=4*(K.y*n+K.x),V=4*((K.y+K.height)*n+K.x),X=R,Q=4*ne;K.interlaced===!0&&(Q+=4*n*7);for(var ee=8,se=0,de=q.length;se<de;++se){var pe=q[se];if(ue===0&&(ue=Y,(X+=Q)>=V&&(Q=4*ne+4*n*(ee-1),X=R+(Y+ne)*(ee<<1),ee>>=1)),pe===G)X+=4;else{var Ne=t[L+3*pe],Ce=t[L+3*pe+1],Ee=t[L+3*pe+2];z[X++]=Ne,z[X++]=Ce,z[X++]=Ee,z[X++]=255}--ue}}}function jd(t,e,n,r){for(var i=t[e++],o=1<<i,s=o+1,a=s+1,l=i+1,c=(1<<l)-1,p=0,m=0,y=0,v=t[e++],N=new Int32Array(4096),A=null;;){for(;p<16&&v!==0;)m|=t[e++]<<p,p+=8,v===1?v=t[e++]:--v;if(p<l)break;var S=m&c;if(m>>=l,p-=l,S!==o){if(S===s)break;for(var w=S<a?S:A,_=0,T=w;T>o;)T=N[T]>>8,++_;var D=T;if(y+_+(w!==S?1:0)>r)return void At.log("Warning, gif stream longer than expected.");n[y++]=D;var k=y+=_;for(w!==S&&(n[y++]=D),T=w;_--;)T=N[T],n[--k]=255&T,T>>=8;A!==null&&a<4096&&(N[a++]=A<<8|D,a>=c+1&&l<12&&(++l,c=c<<1|1)),A=S}else a=s+1,c=(1<<(l=i+1))-1,A=null}return y!==r&&At.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function kl(t){var e,n,r,i,o,s=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),p=new Array(64),m=new Array(65535),y=new Array(65535),v=new Array(64),N=new Array(64),A=[],S=0,w=7,_=new Array(64),T=new Array(64),D=new Array(64),k=new Array(256),F=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function q(R,V){for(var X=0,Q=0,ee=new Array,se=1;se<=16;se++){for(var de=1;de<=R[se];de++)ee[V[Q]]=[],ee[V[Q]][0]=X,ee[V[Q]][1]=se,Q++,X++;X*=2}return ee}function L(R){for(var V=R[0],X=R[1]-1;X>=0;)V&1<<X&&(S|=1<<w),X--,--w<0&&(S==255?(G(255),G(0)):G(S),w=7,S=0)}function G(R){A.push(R)}function Y(R){G(R>>8&255),G(255&R)}function ne(R,V,X,Q,ee){for(var se,de=ee[0],pe=ee[240],Ne=(function(ke,Pe){var Fe,Me,Ve,Ze,ot,at,dt,wt,Ye,lt,je=0;for(Ye=0;Ye<8;++Ye){Fe=ke[je],Me=ke[je+1],Ve=ke[je+2],Ze=ke[je+3],ot=ke[je+4],at=ke[je+5],dt=ke[je+6];var nn=Fe+(wt=ke[je+7]),ht=Fe-wt,qn=Me+dt,St=Me-dt,It=Ve+at,or=Ve-at,mt=Ze+ot,si=Ze-ot,Pt=nn+mt,On=nn-mt,xr=qn+It,Lt=qn-It;ke[je]=Pt+xr,ke[je+4]=Pt-xr;var et=.707106781*(Lt+On);ke[je+2]=On+et,ke[je+6]=On-et;var vt=.382683433*((Pt=si+or)-(Lt=St+ht)),ai=.5411961*Pt+vt,Zt=1.306562965*Lt+vt,sr=.707106781*(xr=or+St),ar=ht+sr,$e=ht-sr;ke[je+5]=$e+ai,ke[je+3]=$e-ai,ke[je+1]=ar+Zt,ke[je+7]=ar-Zt,je+=8}for(je=0,Ye=0;Ye<8;++Ye){Fe=ke[je],Me=ke[je+8],Ve=ke[je+16],Ze=ke[je+24],ot=ke[je+32],at=ke[je+40],dt=ke[je+48];var Hn=Fe+(wt=ke[je+56]),lr=Fe-wt,vn=Me+dt,Wt=Me-dt,Ht=Ve+at,_n=Ve-at,Ii=Ze+ot,br=Ze-ot,Vn=Hn+Ii,Gn=Hn-Ii,zn=vn+Ht,cr=vn-Ht;ke[je]=Vn+zn,ke[je+32]=Vn-zn;var En=.707106781*(cr+Gn);ke[je+16]=Gn+En,ke[je+48]=Gn-En;var ur=.382683433*((Vn=br+_n)-(cr=Wt+lr)),li=.5411961*Vn+ur,Ei=1.306562965*cr+ur,Pi=.707106781*(zn=_n+Wt),Li=lr+Pi,Ri=lr-Pi;ke[je+40]=Ri+li,ke[je+24]=Ri-li,ke[je+8]=Li+Ei,ke[je+56]=Li-Ei,je++}for(Ye=0;Ye<64;++Ye)lt=ke[Ye]*Pe[Ye],v[Ye]=lt>0?lt+.5|0:lt-.5|0;return v})(R,V),Ce=0;Ce<64;++Ce)N[P[Ce]]=Ne[Ce];var Ee=N[0]-X;X=N[0],Ee==0?L(Q[0]):(L(Q[y[se=32767+Ee]]),L(m[se]));for(var Ie=63;Ie>0&&N[Ie]==0;)Ie--;if(Ie==0)return L(de),X;for(var He,ye=1;ye<=Ie;){for(var re=ye;N[ye]==0&&ye<=Ie;)++ye;var Ke=ye-re;if(Ke>=16){He=Ke>>4;for(var Oe=1;Oe<=He;++Oe)L(pe);Ke&=15}se=32767+N[ye],L(ee[(Ke<<4)+y[se]]),L(m[se]),ye++}return Ie!=63&&L(de),X}function ue(R){R=Math.min(Math.max(R,1),100),o!=R&&((function(V){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var ee=s((X[Q]*V+50)/100);ee=Math.min(Math.max(ee,1),255),a[P[Q]]=ee}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var pe=s((se[de]*V+50)/100);pe=Math.min(Math.max(pe,1),255),l[P[de]]=pe}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,Ee=0;Ee<8;Ee++)for(var Ie=0;Ie<8;Ie++)c[Ce]=1/(a[P[Ce]]*Ne[Ee]*Ne[Ie]*8),p[Ce]=1/(l[P[Ce]]*Ne[Ee]*Ne[Ie]*8),Ce++})(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),o=R)}this.encode=function(R,V){V&&ue(V),A=new Array,S=0,w=7,Y(65496),Y(65504),Y(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),Y(1),Y(1),G(0),G(0),(function(){Y(65499),Y(132),G(0);for(var Me=0;Me<64;Me++)G(a[Me]);G(1);for(var Ve=0;Ve<64;Ve++)G(l[Ve])})(),(function(Me,Ve){Y(65472),Y(17),G(8),Y(Ve),Y(Me),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)})(R.width,R.height),(function(){Y(65476),Y(418),G(0);for(var Me=0;Me<16;Me++)G(M[Me+1]);for(var Ve=0;Ve<=11;Ve++)G(j[Ve]);G(16);for(var Ze=0;Ze<16;Ze++)G($[Ze+1]);for(var ot=0;ot<=161;ot++)G(I[ot]);G(1);for(var at=0;at<16;at++)G(E[at+1]);for(var dt=0;dt<=11;dt++)G(z[dt]);G(17);for(var wt=0;wt<16;wt++)G(K[wt+1]);for(var Ye=0;Ye<=161;Ye++)G(ie[Ye])})(),Y(65498),Y(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var X=0,Q=0,ee=0;S=0,w=7,this.encode.displayName="_encode_";for(var se,de,pe,Ne,Ce,Ee,Ie,He,ye,re=R.data,Ke=R.width,Oe=R.height,ke=4*Ke,Pe=0;Pe<Oe;){for(se=0;se<ke;){for(Ce=ke*Pe+se,Ie=-1,He=0,ye=0;ye<64;ye++)Ee=Ce+(He=ye>>3)*ke+(Ie=4*(7&ye)),Pe+He>=Oe&&(Ee-=ke*(Pe+1+He-Oe)),se+Ie>=ke&&(Ee-=se+Ie-ke+4),de=re[Ee++],pe=re[Ee++],Ne=re[Ee++],_[ye]=(F[de]+F[pe+256>>0]+F[Ne+512>>0]>>16)-128,T[ye]=(F[de+768>>0]+F[pe+1024>>0]+F[Ne+1280>>0]>>16)-128,D[ye]=(F[de+1280>>0]+F[pe+1536>>0]+F[Ne+1792>>0]>>16)-128;X=ne(_,c,X,e,r),Q=ne(T,p,Q,n,i),ee=ne(D,p,ee,n,i),se+=32}Pe+=8}if(w>=0){var Fe=[];Fe[1]=w+1,Fe[0]=(1<<w+1)-1,L(Fe)}return Y(65497),new Uint8Array(A)},t=t||50,(function(){for(var R=String.fromCharCode,V=0;V<256;V++)k[V]=R(V)})(),e=q(M,j),n=q(E,z),r=q($,I),i=q(K,ie),(function(){for(var R=1,V=2,X=1;X<=15;X++){for(var Q=R;Q<V;Q++)y[32767+Q]=X,m[32767+Q]=[],m[32767+Q][1]=X,m[32767+Q][0]=Q;for(var ee=-(V-1);ee<=-R;ee++)y[32767+ee]=X,m[32767+ee]=[],m[32767+ee][1]=X,m[32767+ee][0]=V-1+ee;R<<=1,V<<=1}})(),(function(){for(var R=0;R<256;R++)F[R]=19595*R,F[R+256>>0]=38470*R,F[R+512>>0]=7471*R+32768,F[R+768>>0]=-11059*R,F[R+1024>>0]=-21709*R,F[R+1280>>0]=32768*R+8421375,F[R+1536>>0]=-27439*R,F[R+1792>>0]=-5329*R})(),ue(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Qn(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ud(t){function e(M){if(!M)throw Error("assert :P")}function n(M,j,$){for(var I=0;4>I;I++)if(M[j+I]!=$.charCodeAt(I))return!0;return!1}function r(M,j,$,I,E){for(var z=0;z<E;z++)M[j+z]=$[I+z]}function i(M,j,$,I){for(var E=0;E<I;E++)M[j+E]=$}function o(M){return new Int32Array(M)}function s(M,j){for(var $=[],I=0;I<M;I++)$.push(new j);return $}function a(M,j){var $=[];return(function I(E,z,K){for(var ie=K[z],q=0;q<ie&&(E.push(K.length>z+1?[]:new j),!(K.length<z+1));q++)I(E[q],z+1,K)})($,0,M),$}var l=function(){var M=this;function j(d,g){for(var b=1<<g-1>>>0;d&b;)b>>>=1;return b?(d&b-1)+b:d}function $(d,g,b,C,U){e(!(C%b));do d[g+(C-=b)]=U;while(0<C)}function I(d,g,b,C,U){if(e(2328>=U),512>=U)var O=o(512);else if((O=o(U))==null)return 0;return(function(H,W,J,Z,ae,ge){var me,fe,_e=W,ve=1<<J,le=o(16),ce=o(16);for(e(ae!=0),e(Z!=null),e(H!=null),e(0<J),fe=0;fe<ae;++fe){if(15<Z[fe])return 0;++le[Z[fe]]}if(le[0]==ae)return 0;for(ce[1]=0,me=1;15>me;++me){if(le[me]>1<<me)return 0;ce[me+1]=ce[me]+le[me]}for(fe=0;fe<ae;++fe)me=Z[fe],0<Z[fe]&&(ge[ce[me]++]=fe);if(ce[15]==1)return(Z=new E).g=0,Z.value=ge[0],$(H,_e,1,ve,Z),ve;var we,Ae=-1,Se=ve-1,Be=0,Le=1,ze=1,Re=1<<J;for(fe=0,me=1,ae=2;me<=J;++me,ae<<=1){if(Le+=ze<<=1,0>(ze-=le[me]))return 0;for(;0<le[me];--le[me])(Z=new E).g=me,Z.value=ge[fe++],$(H,_e+Be,ae,Re,Z),Be=j(Be,me)}for(me=J+1,ae=2;15>=me;++me,ae<<=1){if(Le+=ze<<=1,0>(ze-=le[me]))return 0;for(;0<le[me];--le[me]){if(Z=new E,(Be&Se)!=Ae){for(_e+=Re,we=1<<(Ae=me)-J;15>Ae&&!(0>=(we-=le[Ae]));)++Ae,we<<=1;ve+=Re=1<<(we=Ae-J),H[W+(Ae=Be&Se)].g=we+J,H[W+Ae].value=_e-W-Ae}Z.g=me-J,Z.value=ge[fe++],$(H,_e+(Be>>J),ae,Re,Z),Be=j(Be,me)}}return Le!=2*ce[15]-1?0:ve})(d,g,b,C,U,O)}function E(){this.value=this.g=0}function z(){this.value=this.g=0}function K(){this.G=s(5,E),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(en,z)}function ie(d,g,b,C){e(d!=null),e(g!=null),e(2147483648>C),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=g,d.pa=b,d.Jd=g,d.Yc=b+C,d.Zc=4<=C?b+C-4+1:b,se(d)}function q(d,g){for(var b=0;0<g--;)b|=pe(d,128)<<g;return b}function L(d,g){var b=q(d,g);return de(d)?-b:b}function G(d,g,b,C){var U,O=0;for(e(d!=null),e(g!=null),e(4294967288>C),d.Sb=C,d.Ra=0,d.u=0,d.h=0,4<C&&(C=4),U=0;U<C;++U)O+=g[b+U]<<8*U;d.Ra=O,d.bb=C,d.oa=g,d.pa=b}function Y(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Ji-8>>>0,++d.bb,d.u-=8;X(d)&&(d.h=1,d.u=0)}function ne(d,g){if(e(0<=g),!d.h&&g<=$i){var b=V(d)&Wi[g];return d.u+=g,Y(d),b}return d.h=1,d.u=0}function ue(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(d){return d.Ra>>>(d.u&Ji-1)>>>0}function X(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Ji}function Q(d,g){d.u=g,d.h=X(d)}function ee(d){d.u>=jo&&(e(d.u>=jo),Y(d))}function se(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function de(d){return q(d,1)}function pe(d,g){var b=d.Ca;0>d.b&&se(d);var C=d.b,U=b*g>>>8,O=(d.I>>>C>U)+0;for(O?(b-=U,d.I-=U+1<<C>>>0):b=U+1,C=b,U=0;256<=C;)U+=8,C>>=8;return C=7^U+xn[C],d.b-=C,d.Ca=(b<<C)-1,O}function Ne(d,g,b){d[g+0]=b>>24&255,d[g+1]=b>>16&255,d[g+2]=b>>8&255,d[g+3]=b>>0&255}function Ce(d,g){return d[g+0]<<0|d[g+1]<<8}function Ee(d,g){return Ce(d,g)|d[g+2]<<16}function Ie(d,g){return Ce(d,g)|Ce(d,g+2)<<16}function He(d,g){var b=1<<g;return e(d!=null),e(0<g),d.X=o(b),d.X==null?0:(d.Mb=32-g,d.Xa=g,1)}function ye(d,g){e(d!=null),e(g!=null),e(d.Xa==g.Xa),r(g.X,0,d.X,0,1<<g.Xa)}function re(){this.X=[],this.Xa=this.Mb=0}function Ke(d,g,b,C){e(b!=null),e(C!=null);var U=b[0],O=C[0];return U==0&&(U=(d*O+g/2)/g),O==0&&(O=(g*U+d/2)/d),0>=U||0>=O?0:(b[0]=U,C[0]=O,1)}function Oe(d,g){return d+(1<<g)-1>>>g}function ke(d,g){return((4278255360&d)+(4278255360&g)>>>0&4278255360)+((16711935&d)+(16711935&g)>>>0&16711935)>>>0}function Pe(d,g){M[g]=function(b,C,U,O,H,W,J){var Z;for(Z=0;Z<H;++Z){var ae=M[d](W[J+Z-1],U,O+Z);W[J+Z]=ke(b[C+Z],ae)}}}function Fe(){this.ud=this.hd=this.jd=0}function Me(d,g){return((4278124286&(d^g))>>>1)+(d&g)>>>0}function Ve(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Ze(d,g){return Ve(d+(d-g+.5>>1))}function ot(d,g,b){return Math.abs(g-b)-Math.abs(d-b)}function at(d,g,b,C,U,O,H){for(C=O[H-1],b=0;b<U;++b)O[H+b]=C=ke(d[g+b],C)}function dt(d,g,b,C,U){var O;for(O=0;O<b;++O){var H=d[g+O],W=H>>8&255,J=16711935&(J=(J=16711935&H)+((W<<16)+W));C[U+O]=(4278255360&H)+J>>>0}}function wt(d,g){g.jd=d>>0&255,g.hd=d>>8&255,g.ud=d>>16&255}function Ye(d,g,b,C,U,O){var H;for(H=0;H<C;++H){var W=g[b+H],J=W>>>8,Z=W,ae=255&(ae=(ae=W>>>16)+((d.jd<<24>>24)*(J<<24>>24)>>>5));Z=255&(Z=(Z=Z+((d.hd<<24>>24)*(J<<24>>24)>>>5))+((d.ud<<24>>24)*(ae<<24>>24)>>>5)),U[O+H]=(4278255360&W)+(ae<<16)+Z}}function lt(d,g,b,C,U){M[g]=function(O,H,W,J,Z,ae,ge,me,fe){for(J=ge;J<me;++J)for(ge=0;ge<fe;++ge)Z[ae++]=U(W[C(O[H++])])},M[d]=function(O,H,W,J,Z,ae,ge){var me=8>>O.b,fe=O.Ea,_e=O.K[0],ve=O.w;if(8>me)for(O=(1<<O.b)-1,ve=(1<<me)-1;H<W;++H){var le,ce=0;for(le=0;le<fe;++le)le&O||(ce=C(J[Z++])),ae[ge++]=U(_e[ce&ve]),ce>>=me}else M["VP8LMapColor"+b](J,Z,_e,ve,ae,ge,H,W,fe)}}function je(d,g,b,C,U){for(b=g+b;g<b;){var O=d[g++];C[U++]=O>>16&255,C[U++]=O>>8&255,C[U++]=O>>0&255}}function nn(d,g,b,C,U){for(b=g+b;g<b;){var O=d[g++];C[U++]=O>>16&255,C[U++]=O>>8&255,C[U++]=O>>0&255,C[U++]=O>>24&255}}function ht(d,g,b,C,U){for(b=g+b;g<b;){var O=(H=d[g++])>>16&240|H>>12&15,H=H>>0&240|H>>28&15;C[U++]=O,C[U++]=H}}function qn(d,g,b,C,U){for(b=g+b;g<b;){var O=(H=d[g++])>>16&248|H>>13&7,H=H>>5&224|H>>3&31;C[U++]=O,C[U++]=H}}function St(d,g,b,C,U){for(b=g+b;g<b;){var O=d[g++];C[U++]=O>>0&255,C[U++]=O>>8&255,C[U++]=O>>16&255}}function It(d,g,b,C,U,O){if(O==0)for(b=g+b;g<b;)Ne(C,((O=d[g++])[0]>>24|O[1]>>8&65280|O[2]<<8&16711680|O[3]<<24)>>>0),U+=32;else r(C,U,d,g,b)}function or(d,g){M[g][0]=M[d+"0"],M[g][1]=M[d+"1"],M[g][2]=M[d+"2"],M[g][3]=M[d+"3"],M[g][4]=M[d+"4"],M[g][5]=M[d+"5"],M[g][6]=M[d+"6"],M[g][7]=M[d+"7"],M[g][8]=M[d+"8"],M[g][9]=M[d+"9"],M[g][10]=M[d+"10"],M[g][11]=M[d+"11"],M[g][12]=M[d+"12"],M[g][13]=M[d+"13"],M[g][14]=M[d+"0"],M[g][15]=M[d+"0"]}function mt(d){return d==rl||d==il||d==Us||d==ol}function si(){this.eb=[],this.size=this.A=this.fb=0}function Pt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function On(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new si,this.f.kb=new Pt,this.sd=null}function xr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function et(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function vt(d,g){var b=d.T,C=g.ba.f.RGBA,U=C.eb,O=C.fb+d.ka*C.A,H=Fn[g.ba.S],W=d.y,J=d.O,Z=d.f,ae=d.N,ge=d.ea,me=d.W,fe=g.cc,_e=g.dc,ve=g.Mc,le=g.Nc,ce=d.ka,we=d.ka+d.T,Ae=d.U,Se=Ae+1>>1;for(ce==0?H(W,J,null,null,Z,ae,ge,me,Z,ae,ge,me,U,O,null,null,Ae):(H(g.ec,g.fc,W,J,fe,_e,ve,le,Z,ae,ge,me,U,O-C.A,U,O,Ae),++b);ce+2<we;ce+=2)fe=Z,_e=ae,ve=ge,le=me,ae+=d.Rc,me+=d.Rc,O+=2*C.A,H(W,(J+=2*d.fa)-d.fa,W,J,fe,_e,ve,le,Z,ae,ge,me,U,O-C.A,U,O,Ae);return J+=d.fa,d.j+we<d.o?(r(g.ec,g.fc,W,J,Ae),r(g.cc,g.dc,Z,ae,Se),r(g.Mc,g.Nc,ge,me,Se),b--):1&we||H(W,J,null,null,Z,ae,ge,me,Z,ae,ge,me,U,O+C.A,null,null,Ae),b}function ai(d,g,b){var C=d.F,U=[d.J];if(C!=null){var O=d.U,H=g.ba.S,W=H==js||H==Us;g=g.ba.f.RGBA;var J=[0],Z=d.ka;J[0]=d.T,d.Kb&&(Z==0?--J[0]:(--Z,U[0]-=d.width),d.j+d.ka+d.T==d.o&&(J[0]=d.o-d.j-Z));var ae=g.eb;Z=g.fb+Z*g.A,d=Tt(C,U[0],d.width,O,J,ae,Z+(W?0:3),g.A),e(b==J),d&&mt(H)&&Mn(ae,Z,W,O,J,g.A)}return 0}function Zt(d){var g=d.ma,b=g.ba.S,C=11>b,U=b==Ds||b==Fs||b==js||b==nl||b==12||mt(b);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Do(g.Oa,d,U?11:12))return 0;if(U&&mt(b)&&Te(),d.da)alert("todo:use_scaling");else{if(C){if(g.Ib=et,d.Kb){if(b=d.U+1>>1,g.memory=o(d.U+2*b),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+d.U,g.Mc=g.cc,g.Nc=g.dc+b,g.Ib=vt,Te()}}else alert("todo:EmitYUV");U&&(g.Jb=ai,C&&he())}if(C&&!_c){for(d=0;256>d;++d)Sh[d]=89858*(d-128)+qs>>Bs,Ch[d]=-22014*(d-128)+qs,Ah[d]=-45773*(d-128),_h[d]=113618*(d-128)+qs>>Bs;for(d=Go;d<ll;++d)g=76283*(d-16)+qs>>Bs,Th[d-Go]=An(g,255),kh[d-Go]=An(g+8>>4,15);_c=1}return 1}function sr(d){var g=d.ma,b=d.U,C=d.T;return e(!(1&d.ka)),0>=b||0>=C?0:(b=g.Ib(d,g),g.Jb!=null&&g.Jb(d,g,b),g.Dc+=b,1)}function ar(d){d.ma.memory=null}function $e(d,g,b,C){return ne(d,8)!=47?0:(g[0]=ne(d,14)+1,b[0]=ne(d,14)+1,C[0]=ne(d,1),ne(d,3)!=0?0:!d.h)}function Hn(d,g){if(4>d)return d+1;var b=d-2>>1;return(2+(1&d)<<b)+ne(g,b)+1}function lr(d,g){return 120<g?g-120:1<=(b=((b=ch[g-1])>>4)*d+(8-(15&b)))?b:1;var b}function vn(d,g,b){var C=V(b),U=d[g+=255&C].g-8;return 0<U&&(Q(b,b.u+8),C=V(b),g+=d[g].value,g+=C&(1<<U)-1),Q(b,b.u+d[g].g),d[g].value}function Wt(d,g,b){return b.g+=d.g,b.value+=d.value<<g>>>0,e(8>=b.g),d.g}function Ht(d,g,b){var C=d.xc;return e((g=C==0?0:d.vc[d.md*(b>>C)+(g>>C)])<d.Wb),d.Ya[g]}function _n(d,g,b,C){var U=d.ab,O=d.c*g,H=d.C;g=H+g;var W=b,J=C;for(C=d.Ta,b=d.Ua;0<U--;){var Z=d.gc[U],ae=H,ge=g,me=W,fe=J,_e=(J=C,W=b,Z.Ea);switch(e(ae<ge),e(ge<=Z.nc),Z.hc){case 2:ks(me,fe,(ge-ae)*_e,J,W);break;case 0:var ve=ae,le=ge,ce=J,we=W,Ae=(Re=Z).Ea;ve==0&&(el(me,fe,null,null,1,ce,we),at(me,fe+1,0,0,Ae-1,ce,we+1),fe+=Ae,we+=Ae,++ve);for(var Se=1<<Re.b,Be=Se-1,Le=Oe(Ae,Re.b),ze=Re.K,Re=Re.w+(ve>>Re.b)*Le;ve<le;){var gt=ze,yt=Re,ft=1;for(Uo(me,fe,ce,we-Ae,1,ce,we);ft<Ae;){var ct=(ft&~Be)+Se;ct>Ae&&(ct=Ae),(0,Ur[gt[yt++]>>8&15])(me,fe+ +ft,ce,we+ft-Ae,ct-ft,ce,we+ft),ft=ct}fe+=Ae,we+=Ae,++ve&Be||(Re+=Le)}ge!=Z.nc&&r(J,W-_e,J,W+(ge-ae-1)*_e,_e);break;case 1:for(_e=me,le=fe,Ae=(me=Z.Ea)-(we=me&~(ce=(fe=1<<Z.b)-1)),ve=Oe(me,Z.b),Se=Z.K,Z=Z.w+(ae>>Z.b)*ve;ae<ge;){for(Be=Se,Le=Z,ze=new Fe,Re=le+we,gt=le+me;le<Re;)wt(Be[Le++],ze),hi(ze,_e,le,fe,J,W),le+=fe,W+=fe;le<gt&&(wt(Be[Le++],ze),hi(ze,_e,le,Ae,J,W),le+=Ae,W+=Ae),++ae&ce||(Z+=ve)}break;case 3:if(me==J&&fe==W&&0<Z.b){for(le=J,me=_e=W+(ge-ae)*_e-(we=(ge-ae)*Oe(Z.Ea,Z.b)),fe=J,ce=W,ve=[],we=(Ae=we)-1;0<=we;--we)ve[we]=fe[ce+we];for(we=Ae-1;0<=we;--we)le[me+we]=ve[we];Pn(Z,ae,ge,J,_e,J,W)}else Pn(Z,ae,ge,me,fe,J,W)}W=C,J=b}J!=b&&r(C,b,W,J,O)}function Ii(d,g){var b=d.V,C=d.Ba+d.c*d.C,U=g-d.C;if(e(g<=d.l.o),e(16>=U),0<U){var O=d.l,H=d.Ta,W=d.Ua,J=O.width;if(_n(d,U,b,C),U=W=[W],e((b=d.C)<(C=g)),e(O.v<O.va),C>O.o&&(C=O.o),b<O.j){var Z=O.j-b;b=O.j,U[0]+=Z*J}if(b>=C?b=0:(U[0]+=4*O.v,O.ka=b-O.j,O.U=O.va-O.v,O.T=C-b,b=1),b){if(W=W[0],11>(b=d.ca).S){var ae=b.f.RGBA,ge=(C=b.S,U=O.U,O=O.T,Z=ae.eb,ae.A),me=O;for(ae=ae.fb+d.Ma*ae.A;0<me--;){var fe=H,_e=W,ve=U,le=Z,ce=ae;switch(C){case Ms:bn(fe,_e,ve,le,ce);break;case Ds:fn(fe,_e,ve,le,ce);break;case rl:fn(fe,_e,ve,le,ce),Mn(le,ce,0,ve,1,0);break;case gc:_r(fe,_e,ve,le,ce);break;case Fs:It(fe,_e,ve,le,ce,1);break;case il:It(fe,_e,ve,le,ce,1),Mn(le,ce,0,ve,1,0);break;case js:It(fe,_e,ve,le,ce,0);break;case Us:It(fe,_e,ve,le,ce,0),Mn(le,ce,1,ve,1,0);break;case nl:Br(fe,_e,ve,le,ce);break;case ol:Br(fe,_e,ve,le,ce),Ct(le,ce,ve,1,0);break;case mc:Sr(fe,_e,ve,le,ce);break;default:e(0)}W+=J,ae+=ge}d.Ma+=O}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=b.height)}}d.C=g,e(d.C<=d.i)}function br(d){var g;if(0<d.ua)return 0;for(g=0;g<d.Wb;++g){var b=d.Ya[g].G,C=d.Ya[g].H;if(0<b[1][C[1]+0].g||0<b[2][C[2]+0].g||0<b[3][C[3]+0].g)return 0}return 1}function Vn(d,g,b,C,U,O){if(d.Z!=0){var H=d.qd,W=d.rd;for(e(Vr[d.Z]!=null);g<b;++g)Vr[d.Z](H,W,C,U,C,U,O),H=C,W=U,U+=O;d.qd=H,d.rd=W}}function Gn(d,g){var b=d.l.ma,C=b.Z==0||b.Z==1?d.l.j:d.C;if(C=d.C<C?C:d.C,e(g<=d.l.o),g>C){var U=d.l.width,O=b.ca,H=b.tb+U*C,W=d.V,J=d.Ba+d.c*C,Z=d.gc;e(d.ab==1),e(Z[0].hc==3),Is(Z[0],C,g,W,J,O,H),Vn(b,C,g,O,H,U)}d.C=d.Ma=g}function zn(d,g,b,C,U,O,H){var W=d.$/C,J=d.$%C,Z=d.m,ae=d.s,ge=b+d.$,me=ge;U=b+C*U;var fe=b+C*O,_e=280+ae.ua,ve=d.Pb?W:16777216,le=0<ae.ua?ae.Wa:null,ce=ae.wc,we=ge<fe?Ht(ae,J,W):null;e(d.C<O),e(fe<=U);var Ae=!1;e:for(;;){for(;Ae||ge<fe;){var Se=0;if(W>=ve){var Be=ge-b;e((ve=d).Pb),ve.wd=ve.m,ve.xd=Be,0<ve.s.ua&&ye(ve.s.Wa,ve.s.vb),ve=W+dh}if(J&ce||(we=Ht(ae,J,W)),e(we!=null),we.Qb&&(g[ge]=we.qb,Ae=!0),!Ae)if(ee(Z),we.jc){Se=Z,Be=g;var Le=ge,ze=we.pd[V(Se)&en-1];e(we.jc),256>ze.g?(Q(Se,Se.u+ze.g),Be[Le]=ze.value,Se=0):(Q(Se,Se.u+ze.g-256),e(256<=ze.value),Se=ze.value),Se==0&&(Ae=!0)}else Se=vn(we.G[0],we.H[0],Z);if(Z.h)break;if(Ae||256>Se){if(!Ae)if(we.nd)g[ge]=(we.qb|Se<<8)>>>0;else{if(ee(Z),Ae=vn(we.G[1],we.H[1],Z),ee(Z),Be=vn(we.G[2],we.H[2],Z),Le=vn(we.G[3],we.H[3],Z),Z.h)break;g[ge]=(Le<<24|Ae<<16|Se<<8|Be)>>>0}if(Ae=!1,++ge,++J>=C&&(J=0,++W,H!=null&&W<=O&&!(W%16)&&H(d,W),le!=null))for(;me<ge;)Se=g[me++],le.X[(506832829*Se&4294967295)>>>le.Mb]=Se}else if(280>Se){if(Se=Hn(Se-256,Z),Be=vn(we.G[4],we.H[4],Z),ee(Z),Be=lr(C,Be=Hn(Be,Z)),Z.h)break;if(ge-b<Be||U-ge<Se)break e;for(Le=0;Le<Se;++Le)g[ge+Le]=g[ge+Le-Be];for(ge+=Se,J+=Se;J>=C;)J-=C,++W,H!=null&&W<=O&&!(W%16)&&H(d,W);if(e(ge<=U),J&ce&&(we=Ht(ae,J,W)),le!=null)for(;me<ge;)Se=g[me++],le.X[(506832829*Se&4294967295)>>>le.Mb]=Se}else{if(!(Se<_e))break e;for(Ae=Se-280,e(le!=null);me<ge;)Se=g[me++],le.X[(506832829*Se&4294967295)>>>le.Mb]=Se;Se=ge,e(!(Ae>>>(Be=le).Xa)),g[Se]=Be.X[Ae],Ae=!0}Ae||e(Z.h==X(Z))}if(d.Pb&&Z.h&&ge<U)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&ye(d.s.vb,d.s.Wa);else{if(Z.h)break e;H!=null&&H(d,W>O?O:W),d.a=0,d.$=ge-b}return 1}return d.a=3,0}function cr(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var g=d.Wa;g!=null&&(g.X=null),d.vb=null,e(d!=null)}function En(){var d=new Za;return d==null?null:(d.a=0,d.xb=xc,or("Predictor","VP8LPredictors"),or("Predictor","VP8LPredictors_C"),or("PredictorAdd","VP8LPredictorsAdd"),or("PredictorAdd","VP8LPredictorsAdd_C"),ks=dt,hi=Ye,bn=je,fn=nn,Br=ht,Sr=qn,_r=St,M.VP8LMapColor32b=Yi,M.VP8LMapColor8b=Es,d)}function ur(d,g,b,C,U){var O=1,H=[d],W=[g],J=C.m,Z=C.s,ae=null,ge=0;e:for(;;){if(b)for(;O&&ne(J,1);){var me=H,fe=W,_e=C,ve=1,le=_e.m,ce=_e.gc[_e.ab],we=ne(le,2);if(_e.Oc&1<<we)O=0;else{switch(_e.Oc|=1<<we,ce.hc=we,ce.Ea=me[0],ce.nc=fe[0],ce.K=[null],++_e.ab,e(4>=_e.ab),we){case 0:case 1:ce.b=ne(le,3)+2,ve=ur(Oe(ce.Ea,ce.b),Oe(ce.nc,ce.b),0,_e,ce.K),ce.K=ce.K[0];break;case 3:var Ae,Se=ne(le,8)+1,Be=16<Se?0:4<Se?1:2<Se?2:3;if(me[0]=Oe(ce.Ea,Be),ce.b=Be,Ae=ve=ur(Se,1,0,_e,ce.K)){var Le,ze=Se,Re=ce,gt=1<<(8>>Re.b),yt=o(gt);if(yt==null)Ae=0;else{var ft=Re.K[0],ct=Re.w;for(yt[0]=Re.K[0][0],Le=1;Le<1*ze;++Le)yt[Le]=ke(ft[ct+Le],yt[Le-1]);for(;Le<4*gt;++Le)yt[Le]=0;Re.K[0]=null,Re.K[0]=yt,Ae=1}}ve=Ae;break;case 2:break;default:e(0)}O=ve}}if(H=H[0],W=W[0],O&&ne(J,1)&&!(O=1<=(ge=ne(J,4))&&11>=ge)){C.a=3;break e}var _t;if(_t=O)t:{var Nt,it,Gt,wn=C,zt=H,Nn=W,xt=ge,Tn=b,kn=wn.m,Kt=wn.s,tn=[null],pn=1,jn=0,pr=uh[xt];n:for(;;){if(Tn&&ne(kn,1)){var Xt=ne(kn,3)+2,kr=Oe(zt,Xt),yi=Oe(Nn,Xt),eo=kr*yi;if(!ur(kr,yi,0,wn,tn))break n;for(tn=tn[0],Kt.xc=Xt,Nt=0;Nt<eo;++Nt){var Gr=tn[Nt]>>8&65535;tn[Nt]=Gr,Gr>=pn&&(pn=Gr+1)}}if(kn.h)break n;for(it=0;5>it;++it){var Mt=vc[it];!it&&0<xt&&(Mt+=1<<xt),jn<Mt&&(jn=Mt)}var cl=s(pn*pr,E),Tc=pn,kc=s(Tc,K);if(kc==null)var Hs=null;else e(65536>=Tc),Hs=kc;var zo=o(jn);if(Hs==null||zo==null||cl==null){wn.a=1;break n}var Vs=cl;for(Nt=Gt=0;Nt<pn;++Nt){var Kn=Hs[Nt],to=Kn.G,no=Kn.H,Ic=0,Gs=1,Ec=0;for(it=0;5>it;++it){Mt=vc[it],to[it]=Vs,no[it]=Gt,!it&&0<xt&&(Mt+=1<<xt);i:{var zs,ul=Mt,Ws=wn,Wo=zo,Ph=Vs,Lh=Gt,dl=0,zr=Ws.m,Rh=ne(zr,1);if(i(Wo,0,0,ul),Rh){var Mh=ne(zr,1)+1,Dh=ne(zr,1),Pc=ne(zr,Dh==0?1:8);Wo[Pc]=1,Mh==2&&(Wo[Pc=ne(zr,8)]=1);var $s=1}else{var Lc=o(19),Rc=ne(zr,4)+4;if(19<Rc){Ws.a=3;var Js=0;break i}for(zs=0;zs<Rc;++zs)Lc[lh[zs]]=ne(zr,3);var fl=void 0,$o=void 0,Mc=Ws,Fh=Lc,Ys=ul,Dc=Wo,hl=0,Wr=Mc.m,Fc=8,jc=s(128,E);r:for(;I(jc,0,7,Fh,19);){if(ne(Wr,1)){var jh=2+2*ne(Wr,3);if((fl=2+ne(Wr,jh))>Ys)break r}else fl=Ys;for($o=0;$o<Ys&&fl--;){ee(Wr);var Uc=jc[0+(127&V(Wr))];Q(Wr,Wr.u+Uc.g);var ro=Uc.value;if(16>ro)Dc[$o++]=ro,ro!=0&&(Fc=ro);else{var Uh=ro==16,Bc=ro-16,Bh=sh[Bc],qc=ne(Wr,oh[Bc])+Bh;if($o+qc>Ys)break r;for(var qh=Uh?Fc:0;0<qc--;)Dc[$o++]=qh}}hl=1;break r}hl||(Mc.a=3),$s=hl}($s=$s&&!zr.h)&&(dl=I(Ph,Lh,8,Wo,ul)),$s&&dl!=0?Js=dl:(Ws.a=3,Js=0)}if(Js==0)break n;if(Gs&&ah[it]==1&&(Gs=Vs[Gt].g==0),Ic+=Vs[Gt].g,Gt+=Js,3>=it){var Jo,pl=zo[0];for(Jo=1;Jo<Mt;++Jo)zo[Jo]>pl&&(pl=zo[Jo]);Ec+=pl}}if(Kn.nd=Gs,Kn.Qb=0,Gs&&(Kn.qb=(to[3][no[3]+0].value<<24|to[1][no[1]+0].value<<16|to[2][no[2]+0].value)>>>0,Ic==0&&256>to[0][no[0]+0].value&&(Kn.Qb=1,Kn.qb+=to[0][no[0]+0].value<<8)),Kn.jc=!Kn.Qb&&6>Ec,Kn.jc){var Ks,Ir=Kn;for(Ks=0;Ks<en;++Ks){var $r=Ks,Jr=Ir.pd[$r],Xs=Ir.G[0][Ir.H[0]+$r];256<=Xs.value?(Jr.g=Xs.g+256,Jr.value=Xs.value):(Jr.g=0,Jr.value=0,$r>>=Wt(Xs,8,Jr),$r>>=Wt(Ir.G[1][Ir.H[1]+$r],16,Jr),$r>>=Wt(Ir.G[2][Ir.H[2]+$r],0,Jr),Wt(Ir.G[3][Ir.H[3]+$r],24,Jr))}}}Kt.vc=tn,Kt.Wb=pn,Kt.Ya=Hs,Kt.yc=cl,_t=1;break t}_t=0}if(!(O=_t)){C.a=3;break e}if(0<ge){if(Z.ua=1<<ge,!He(Z.Wa,ge)){C.a=1,O=0;break e}}else Z.ua=0;var gl=C,Oc=H,Oh=W,ml=gl.s,vl=ml.xc;if(gl.c=Oc,gl.i=Oh,ml.md=Oe(Oc,vl),ml.wc=vl==0?-1:(1<<vl)-1,b){C.xb=yh;break e}if((ae=o(H*W))==null){C.a=1,O=0;break e}O=(O=zn(C,ae,0,H,W,W,null))&&!J.h;break e}return O?(U!=null?U[0]=ae:(e(ae==null),e(b)),C.$=0,b||cr(Z)):cr(Z),O}function li(d,g){var b=d.c*d.i,C=b+g+16*g;return e(d.c<=g),d.V=o(C),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+b+g,1)}function Ei(d,g){var b=d.C,C=g-b,U=d.V,O=d.Ba+d.c*b;for(e(g<=d.l.o);0<C;){var H=16<C?16:C,W=d.l.ma,J=d.l.width,Z=J*H,ae=W.ca,ge=W.tb+J*b,me=d.Ta,fe=d.Ua;_n(d,H,U,O),Ut(me,fe,ae,ge,Z),Vn(W,b,b+H,ae,ge,J),C-=H,U+=H*d.c,b+=H}e(b==g),d.C=d.Ma=g}function Pi(){this.ub=this.yd=this.td=this.Rb=0}function Li(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ri(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function ls(){this.Yb=(function(){var d=[];return(function g(b,C,U){for(var O=U[C],H=0;H<O&&(b.push(U.length>C+1?[]:0),!(U.length<C+1));H++)g(b[H],C+1,U)})(d,0,[3,11]),d})()}function Ea(){this.jb=o(3),this.Wc=a([4,8],ls),this.Xc=a([4,17],ls)}function Pa(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Mi(){this.ld=this.La=this.dd=this.tc=0}function cs(){this.Na=this.la=0}function La(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xo(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ra(){this.uc=this.M=this.Nb=0,this.wa=Array(new Mi),this.Y=0,this.ya=Array(new xo),this.aa=0,this.l=new Di}function us(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Ma(){this.cb=this.a=0,this.sc="",this.m=new ue,this.Od=new Pi,this.Kc=new Li,this.ed=new Pa,this.Qa=new Ri,this.Ic=this.$c=this.Aa=0,this.D=new Ra,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,ue),this.ia=0,this.pb=s(4,La),this.Pa=new Ea,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new us),this.Hd=0,this.rb=Array(new cs),this.sb=0,this.wa=Array(new Mi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xo),this.L=this.aa=0,this.gd=a([4,2],Mi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Di(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Da(){var d=new Ma;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Vo||(Vo=hs)),d}function Ft(d,g,b){return d.a==0&&(d.a=g,d.sc=b,d.cb=0),0}function ds(d,g,b){return 3<=b&&d[g+0]==157&&d[g+1]==1&&d[g+2]==42}function fs(d,g){if(d==null)return 0;if(d.a=0,d.sc="OK",g==null)return Ft(d,2,"null VP8Io passed to VP8GetHeaders()");var b=g.data,C=g.w,U=g.ha;if(4>U)return Ft(d,7,"Truncated header.");var O=b[C+0]|b[C+1]<<8|b[C+2]<<16,H=d.Od;if(H.Rb=!(1&O),H.td=O>>1&7,H.yd=O>>4&1,H.ub=O>>5,3<H.td)return Ft(d,3,"Incorrect keyframe parameters.");if(!H.yd)return Ft(d,4,"Frame not displayable.");C+=3,U-=3;var W=d.Kc;if(H.Rb){if(7>U)return Ft(d,7,"cannot parse picture header");if(!ds(b,C,U))return Ft(d,3,"Bad code word");W.c=16383&(b[C+4]<<8|b[C+3]),W.Td=b[C+4]>>6,W.i=16383&(b[C+6]<<8|b[C+5]),W.Ud=b[C+6]>>6,C+=7,U-=7,d.za=W.c+15>>4,d.Ub=W.i+15>>4,g.width=W.c,g.height=W.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i((O=d.Pa).jb,0,255,O.jb.length),e((O=d.Qa)!=null),O.Cb=0,O.Bb=0,O.Fb=1,i(O.Zb,0,0,O.Zb.length),i(O.Lb,0,0,O.Lb)}if(H.ub>U)return Ft(d,7,"bad partition length");ie(O=d.m,b,C,H.ub),C+=H.ub,U-=H.ub,H.Rb&&(W.Ld=de(O),W.Kd=de(O)),W=d.Qa;var J,Z=d.Pa;if(e(O!=null),e(W!=null),W.Cb=de(O),W.Cb){if(W.Bb=de(O),de(O)){for(W.Fb=de(O),J=0;4>J;++J)W.Zb[J]=de(O)?L(O,7):0;for(J=0;4>J;++J)W.Lb[J]=de(O)?L(O,6):0}if(W.Bb)for(J=0;3>J;++J)Z.jb[J]=de(O)?q(O,8):255}else W.Bb=0;if(O.Ka)return Ft(d,3,"cannot parse segment header");if((W=d.ed).zd=de(O),W.Tb=q(O,6),W.wb=q(O,3),W.Pc=de(O),W.Pc&&de(O)){for(Z=0;4>Z;++Z)de(O)&&(W.vd[Z]=L(O,6));for(Z=0;4>Z;++Z)de(O)&&(W.od[Z]=L(O,6))}if(d.L=W.Tb==0?0:W.zd?1:2,O.Ka)return Ft(d,3,"cannot parse filter header");var ae=U;if(U=J=C,C=J+ae,W=ae,d.Xb=(1<<q(d.m,2))-1,ae<3*(Z=d.Xb))b=7;else{for(J+=3*Z,W-=3*Z,ae=0;ae<Z;++ae){var ge=b[U+0]|b[U+1]<<8|b[U+2]<<16;ge>W&&(ge=W),ie(d.Jc[+ae],b,J,ge),J+=ge,W-=ge,U+=3}ie(d.Jc[+Z],b,J,W),b=J<C?0:5}if(b!=0)return Ft(d,b,"cannot parse partitions");for(b=q(J=d.m,7),U=de(J)?L(J,4):0,C=de(J)?L(J,4):0,W=de(J)?L(J,4):0,Z=de(J)?L(J,4):0,J=de(J)?L(J,4):0,ae=d.Qa,ge=0;4>ge;++ge){if(ae.Cb){var me=ae.Zb[ge];ae.Fb||(me+=b)}else{if(0<ge){d.pb[ge]=d.pb[0];continue}me=b}var fe=d.pb[ge];fe.Sc[0]=sl[An(me+U,127)],fe.Sc[1]=al[An(me+0,127)],fe.Eb[0]=2*sl[An(me+C,127)],fe.Eb[1]=101581*al[An(me+W,127)]>>16,8>fe.Eb[1]&&(fe.Eb[1]=8),fe.Qc[0]=sl[An(me+Z,117)],fe.Qc[1]=al[An(me+J,127)],fe.lc=me+J}if(!H.Rb)return Ft(d,4,"Not a key frame.");for(de(O),H=d.Pa,b=0;4>b;++b){for(U=0;8>U;++U)for(C=0;3>C;++C)for(W=0;11>W;++W)Z=pe(O,mh[b][U][C][W])?q(O,8):ph[b][U][C][W],H.Wc[b][U].Yb[C][W]=Z;for(U=0;17>U;++U)H.Xc[b][U]=H.Wc[b][vh[U]]}return d.kc=de(O),d.kc&&(d.Bd=q(O,8)),d.cb=1}function hs(d,g,b,C,U,O,H){var W=g[U].Yb[b];for(b=0;16>U;++U){if(!pe(d,W[b+0]))return U;for(;!pe(d,W[b+1]);)if(W=g[++U].Yb[0],b=0,U==16)return 16;var J=g[U+1].Yb;if(pe(d,W[b+2])){var Z=d,ae=0;if(pe(Z,(me=W)[(ge=b)+3]))if(pe(Z,me[ge+6])){for(W=0,ge=2*(ae=pe(Z,me[ge+8]))+(me=pe(Z,me[ge+9+ae])),ae=0,me=fh[ge];me[W];++W)ae+=ae+pe(Z,me[W]);ae+=3+(8<<ge)}else pe(Z,me[ge+7])?(ae=7+2*pe(Z,165),ae+=pe(Z,145)):ae=5+pe(Z,159);else ae=pe(Z,me[ge+4])?3+pe(Z,me[ge+5]):2;W=J[2]}else ae=1,W=J[1];J=H+hh[U],0>(Z=d).b&&se(Z);var ge,me=Z.b,fe=(ge=Z.Ca>>1)-(Z.I>>me)>>31;--Z.b,Z.Ca+=fe,Z.Ca|=1,Z.I-=(ge+1&fe)<<me,O[J]=((ae^fe)-fe)*C[(0<U)+0]}return 16}function bo(d){var g=d.rb[d.sb-1];g.la=0,g.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function Fa(d,g){if(d==null)return 0;if(g==null)return Ft(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!fs(d,g))return 0;if(e(d.cb),g.ac==null||g.ac(g)){g.ob&&(d.L=0);var b=Os[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=g.v-b>>4,d.zb=g.j-b>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=g.o+15+b>>4,d.Hb=g.va+15+b>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var C=d.ed;for(b=0;4>b;++b){var U;if(d.Qa.Cb){var O=d.Qa.Lb[b];d.Qa.Fb||(O+=C.Tb)}else O=C.Tb;for(U=0;1>=U;++U){var H=d.gd[b][U],W=O;if(C.Pc&&(W+=C.vd[0],U&&(W+=C.od[0])),0<(W=0>W?0:63<W?63:W)){var J=W;0<C.wb&&(J=4<C.wb?J>>2:J>>1)>9-C.wb&&(J=9-C.wb),1>J&&(J=1),H.dd=J,H.tc=2*W+J,H.ld=40<=W?2:15<=W?1:0}else H.tc=0;H.La=U}}}b=0}else Ft(d,6,"Frame setup failed"),b=d.a;if(b=b==0){if(b){d.$c=0,0<d.Aa||(d.Ic=Eh);e:{b=d.Ic,C=4*(J=d.za);var Z=32*J,ae=J+1,ge=0<d.L?J*(0<d.Aa?2:1):0,me=(d.Aa==2?2:1)*J;if((H=C+832+(U=3*(16*b+Os[d.L])/2*Z)+(O=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=H)b=0;else{if(H>d.Vb){if(d.Vb=0,d.Ec=o(H),d.Fc=0,d.Ec==null){b=Ft(d,1,"no memory during frame initialization.");break e}d.Vb=H}H=d.Ec,W=d.Fc,d.Ac=H,d.Bc=W,W+=C,d.Gd=s(Z,us),d.Hd=0,d.rb=s(ae+1,cs),d.sb=1,d.wa=ge?s(ge,Mi):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=J),e(!0),d.oc=H,d.pc=W,W+=832,d.ya=s(me,xo),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=J),d.R=16*J,d.B=8*J,J=(Z=Os[d.L])*d.R,Z=Z/2*d.B,d.sa=H,d.ta=W+J,d.qa=d.sa,d.ra=d.ta+16*b*d.R+Z,d.Ha=d.qa,d.Ia=d.ra+8*b*d.B+Z,d.$c=0,W+=U,d.mb=O?H:null,d.nb=O?W:null,e(W+O<=d.Fc+d.Vb),bo(d),i(d.Ac,d.Bc,0,C),b=1}}if(b){if(g.ka=0,g.y=d.sa,g.O=d.ta,g.f=d.qa,g.N=d.ra,g.ea=d.Ha,g.Vd=d.Ia,g.fa=d.R,g.Rc=d.B,g.F=null,g.J=0,!Ls){for(b=-255;255>=b;++b)$t[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)Cr[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)Ho[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)Zi[255+b]=0>b?0:255<b?255:b;Ls=1}Ki=Ba,Ar=ja,Bo=gs,hn=Ua,Ln=ms,jt=ps,Xi=Co,Ps=di,qo=Qa,pi=To,gi=Xa,qr=Oi,mi=ko,Qi=As,vi=_s,Or=fr,Oo=Nr,Rn=Ka,Yn[0]=dr,Yn[1]=qa,Yn[2]=Ga,Yn[3]=za,Yn[4]=xs,Yn[5]=Bi,Yn[6]=bs,Yn[7]=So,Yn[8]=$a,Yn[9]=Wa,Hr[0]=vs,Hr[1]=Ha,Hr[2]=wr,Hr[3]=ji,Hr[4]=rn,Hr[5]=Va,Hr[6]=ys,Tr[0]=Dr,Tr[1]=Oa,Tr[2]=Ja,Tr[3]=_o,Tr[4]=ui,Tr[5]=Ya,Tr[6]=Ao,b=1}else b=0}b&&(b=(function(fe,_e){for(fe.M=0;fe.M<fe.Va;++fe.M){var ve,le=fe.Jc[fe.M&fe.Xb],ce=fe.m,we=fe;for(ve=0;ve<we.za;++ve){var Ae=ce,Se=we,Be=Se.Ac,Le=Se.Bc+4*ve,ze=Se.zc,Re=Se.ya[Se.aa+ve];if(Se.Qa.Bb?Re.$b=pe(Ae,Se.Pa.jb[0])?2+pe(Ae,Se.Pa.jb[2]):pe(Ae,Se.Pa.jb[1]):Re.$b=0,Se.kc&&(Re.Ad=pe(Ae,Se.Bd)),Re.Za=!pe(Ae,145)+0,Re.Za){var gt=Re.Ob,yt=0;for(Se=0;4>Se;++Se){var ft,ct=ze[0+Se];for(ft=0;4>ft;++ft){ct=gh[Be[Le+ft]][ct];for(var _t=yc[pe(Ae,ct[0])];0<_t;)_t=yc[2*_t+pe(Ae,ct[_t])];ct=-_t,Be[Le+ft]=ct}r(gt,yt,Be,Le,4),yt+=4,ze[0+Se]=ct}}else ct=pe(Ae,156)?pe(Ae,128)?1:3:pe(Ae,163)?2:0,Re.Ob[0]=ct,i(Be,Le,ct,4),i(ze,0,ct,4);Re.Dd=pe(Ae,142)?pe(Ae,114)?pe(Ae,183)?1:3:2:0}if(we.m.Ka)return Ft(fe,7,"Premature end-of-partition0 encountered.");for(;fe.ja<fe.za;++fe.ja){if(we=le,Ae=(ce=fe).rb[ce.sb-1],Be=ce.rb[ce.sb+ce.ja],ve=ce.ya[ce.aa+ce.ja],Le=ce.kc?ve.Ad:0)Ae.la=Be.la=0,ve.Za||(Ae.Na=Be.Na=0),ve.Hc=0,ve.Gc=0,ve.ia=0;else{var Nt,it;if(Ae=Be,Be=we,Le=ce.Pa.Xc,ze=ce.ya[ce.aa+ce.ja],Re=ce.pb[ze.$b],Se=ze.ad,gt=0,yt=ce.rb[ce.sb-1],ct=ft=0,i(Se,gt,0,384),ze.Za)var Gt=0,wn=Le[3];else{_t=o(16);var zt=Ae.Na+yt.Na;if(zt=Vo(Be,Le[1],zt,Re.Eb,0,_t,0),Ae.Na=yt.Na=(0<zt)+0,1<zt)Ki(_t,0,Se,gt);else{var Nn=_t[0]+3>>3;for(_t=0;256>_t;_t+=16)Se[gt+_t]=Nn}Gt=1,wn=Le[0]}var xt=15&Ae.la,Tn=15&yt.la;for(_t=0;4>_t;++_t){var kn=1&Tn;for(Nn=it=0;4>Nn;++Nn)xt=xt>>1|(kn=(zt=Vo(Be,wn,zt=kn+(1&xt),Re.Sc,Gt,Se,gt))>Gt)<<7,it=it<<2|(3<zt?3:1<zt?2:Se[gt+0]!=0),gt+=16;xt>>=4,Tn=Tn>>1|kn<<7,ft=(ft<<8|it)>>>0}for(wn=xt,Gt=Tn>>4,Nt=0;4>Nt;Nt+=2){for(it=0,xt=Ae.la>>4+Nt,Tn=yt.la>>4+Nt,_t=0;2>_t;++_t){for(kn=1&Tn,Nn=0;2>Nn;++Nn)zt=kn+(1&xt),xt=xt>>1|(kn=0<(zt=Vo(Be,Le[2],zt,Re.Qc,0,Se,gt)))<<3,it=it<<2|(3<zt?3:1<zt?2:Se[gt+0]!=0),gt+=16;xt>>=2,Tn=Tn>>1|kn<<5}ct|=it<<4*Nt,wn|=xt<<4<<Nt,Gt|=(240&Tn)<<Nt}Ae.la=wn,yt.la=Gt,ze.Hc=ft,ze.Gc=ct,ze.ia=43690&ct?0:Re.ia,Le=!(ft|ct)}if(0<ce.L&&(ce.wa[ce.Y+ce.ja]=ce.gd[ve.$b][ve.Za],ce.wa[ce.Y+ce.ja].La|=!Le),we.Ka)return Ft(fe,7,"Premature end-of-file encountered.")}if(bo(fe),ce=_e,we=1,ve=(le=fe).D,Ae=0<le.L&&le.M>=le.zb&&le.M<=le.Va,le.Aa==0)e:{if(ve.M=le.M,ve.uc=Ae,Mo(le,ve),we=1,ve=(it=le.D).Nb,Ae=(ct=Os[le.L])*le.R,Be=ct/2*le.B,_t=16*ve*le.R,Nn=8*ve*le.B,Le=le.sa,ze=le.ta-Ae+_t,Re=le.qa,Se=le.ra-Be+Nn,gt=le.Ha,yt=le.Ia-Be+Nn,Tn=(xt=it.M)==0,ft=xt>=le.Va-1,le.Aa==2&&Mo(le,it),it.uc)for(kn=(zt=le).D.M,e(zt.D.uc),it=zt.yb;it<zt.Hb;++it){Gt=it,wn=kn;var Kt=(tn=(Mt=zt).D).Nb;Nt=Mt.R;var tn=tn.wa[tn.Y+Gt],pn=Mt.sa,jn=Mt.ta+16*Kt*Nt+16*Gt,pr=tn.dd,Xt=tn.tc;if(Xt!=0)if(e(3<=Xt),Mt.L==1)0<Gt&&Or(pn,jn,Nt,Xt+4),tn.La&&Rn(pn,jn,Nt,Xt),0<wn&&vi(pn,jn,Nt,Xt+4),tn.La&&Oo(pn,jn,Nt,Xt);else{var kr=Mt.B,yi=Mt.qa,eo=Mt.ra+8*Kt*kr+8*Gt,Gr=Mt.Ha,Mt=Mt.Ia+8*Kt*kr+8*Gt;Kt=tn.ld,0<Gt&&(Ps(pn,jn,Nt,Xt+4,pr,Kt),pi(yi,eo,Gr,Mt,kr,Xt+4,pr,Kt)),tn.La&&(qr(pn,jn,Nt,Xt,pr,Kt),Qi(yi,eo,Gr,Mt,kr,Xt,pr,Kt)),0<wn&&(Xi(pn,jn,Nt,Xt+4,pr,Kt),qo(yi,eo,Gr,Mt,kr,Xt+4,pr,Kt)),tn.La&&(gi(pn,jn,Nt,Xt,pr,Kt),mi(yi,eo,Gr,Mt,kr,Xt,pr,Kt))}}if(le.ia&&alert("todo:DitherRow"),ce.put!=null){if(it=16*xt,xt=16*(xt+1),Tn?(ce.y=le.sa,ce.O=le.ta+_t,ce.f=le.qa,ce.N=le.ra+Nn,ce.ea=le.Ha,ce.W=le.Ia+Nn):(it-=ct,ce.y=Le,ce.O=ze,ce.f=Re,ce.N=Se,ce.ea=gt,ce.W=yt),ft||(xt-=ct),xt>ce.o&&(xt=ce.o),ce.F=null,ce.J=null,le.Fa!=null&&0<le.Fa.length&&it<xt&&(ce.J=Lo(le,ce,it,xt-it),ce.F=le.mb,ce.F==null&&ce.F.length==0)){we=Ft(le,3,"Could not decode alpha data.");break e}it<ce.j&&(ct=ce.j-it,it=ce.j,e(!(1&ct)),ce.O+=le.R*ct,ce.N+=le.B*(ct>>1),ce.W+=le.B*(ct>>1),ce.F!=null&&(ce.J+=ce.width*ct)),it<xt&&(ce.O+=ce.v,ce.N+=ce.v>>1,ce.W+=ce.v>>1,ce.F!=null&&(ce.J+=ce.v),ce.ka=it-ce.j,ce.U=ce.va-ce.v,ce.T=xt-it,we=ce.put(ce))}ve+1!=le.Ic||ft||(r(le.sa,le.ta-Ae,Le,ze+16*le.R,Ae),r(le.qa,le.ra-Be,Re,Se+8*le.B,Be),r(le.Ha,le.Ia-Be,gt,yt+8*le.B,Be))}if(!we)return Ft(fe,6,"Output aborted.")}return 1})(d,g)),g.bc!=null&&g.bc(g),b&=1}return b?(d.cb=0,b):0}function Wn(d,g,b,C,U){U=d[g+b+32*C]+(U>>3),d[g+b+32*C]=-256&U?0>U?0:255:U}function Fi(d,g,b,C,U,O){Wn(d,g,0,b,C+U),Wn(d,g,1,b,C+O),Wn(d,g,2,b,C-O),Wn(d,g,3,b,C-U)}function yn(d){return(20091*d>>16)+d}function wo(d,g,b,C){var U,O=0,H=o(16);for(U=0;4>U;++U){var W=d[g+0]+d[g+8],J=d[g+0]-d[g+8],Z=(35468*d[g+4]>>16)-yn(d[g+12]),ae=yn(d[g+4])+(35468*d[g+12]>>16);H[O+0]=W+ae,H[O+1]=J+Z,H[O+2]=J-Z,H[O+3]=W-ae,O+=4,g++}for(U=O=0;4>U;++U)W=(d=H[O+0]+4)+H[O+8],J=d-H[O+8],Z=(35468*H[O+4]>>16)-yn(H[O+12]),Wn(b,C,0,0,W+(ae=yn(H[O+4])+(35468*H[O+12]>>16))),Wn(b,C,1,0,J+Z),Wn(b,C,2,0,J-Z),Wn(b,C,3,0,W-ae),O++,C+=32}function ps(d,g,b,C){var U=d[g+0]+4,O=35468*d[g+4]>>16,H=yn(d[g+4]),W=35468*d[g+1]>>16;Fi(b,C,0,U+H,d=yn(d[g+1]),W),Fi(b,C,1,U+O,d,W),Fi(b,C,2,U-O,d,W),Fi(b,C,3,U-H,d,W)}function ja(d,g,b,C,U){wo(d,g,b,C),U&&wo(d,g+16,b,C+4)}function gs(d,g,b,C){Ar(d,g+0,b,C,1),Ar(d,g+32,b,C+128,1)}function Ua(d,g,b,C){var U;for(d=d[g+0]+4,U=0;4>U;++U)for(g=0;4>g;++g)Wn(b,C,g,U,d)}function ms(d,g,b,C){d[g+0]&&hn(d,g+0,b,C),d[g+16]&&hn(d,g+16,b,C+4),d[g+32]&&hn(d,g+32,b,C+128),d[g+48]&&hn(d,g+48,b,C+128+4)}function Ba(d,g,b,C){var U,O=o(16);for(U=0;4>U;++U){var H=d[g+0+U]+d[g+12+U],W=d[g+4+U]+d[g+8+U],J=d[g+4+U]-d[g+8+U],Z=d[g+0+U]-d[g+12+U];O[0+U]=H+W,O[8+U]=H-W,O[4+U]=Z+J,O[12+U]=Z-J}for(U=0;4>U;++U)H=(d=O[0+4*U]+3)+O[3+4*U],W=O[1+4*U]+O[2+4*U],J=O[1+4*U]-O[2+4*U],Z=d-O[3+4*U],b[C+0]=H+W>>3,b[C+16]=Z+J>>3,b[C+32]=H-W>>3,b[C+48]=Z-J>>3,C+=64}function No(d,g,b){var C,U=g-32,O=Cn,H=255-d[U-1];for(C=0;C<b;++C){var W,J=O,Z=H+d[g-1];for(W=0;W<b;++W)d[g+W]=J[Z+d[U+W]];g+=32}}function qa(d,g){No(d,g,4)}function Oa(d,g){No(d,g,8)}function Ha(d,g){No(d,g,16)}function wr(d,g){var b;for(b=0;16>b;++b)r(d,g+32*b,d,g-32,16)}function ji(d,g){var b;for(b=16;0<b;--b)i(d,g,d[g-1],16),g+=32}function Ui(d,g,b){var C;for(C=0;16>C;++C)i(g,b+32*C,d,16)}function vs(d,g){var b,C=16;for(b=0;16>b;++b)C+=d[g-1+32*b]+d[g+b-32];Ui(C>>5,d,g)}function rn(d,g){var b,C=8;for(b=0;16>b;++b)C+=d[g-1+32*b];Ui(C>>4,d,g)}function Va(d,g){var b,C=8;for(b=0;16>b;++b)C+=d[g+b-32];Ui(C>>4,d,g)}function ys(d,g){Ui(128,d,g)}function Xe(d,g,b){return d+2*g+b+2>>2}function Ga(d,g){var b,C=g-32;for(C=new Uint8Array([Xe(d[C-1],d[C+0],d[C+1]),Xe(d[C+0],d[C+1],d[C+2]),Xe(d[C+1],d[C+2],d[C+3]),Xe(d[C+2],d[C+3],d[C+4])]),b=0;4>b;++b)r(d,g+32*b,C,0,C.length)}function za(d,g){var b=d[g-1],C=d[g-1+32],U=d[g-1+64],O=d[g-1+96];Ne(d,g+0,16843009*Xe(d[g-1-32],b,C)),Ne(d,g+32,16843009*Xe(b,C,U)),Ne(d,g+64,16843009*Xe(C,U,O)),Ne(d,g+96,16843009*Xe(U,O,O))}function dr(d,g){var b,C=4;for(b=0;4>b;++b)C+=d[g+b-32]+d[g-1+32*b];for(C>>=3,b=0;4>b;++b)i(d,g+32*b,C,4)}function xs(d,g){var b=d[g-1+0],C=d[g-1+32],U=d[g-1+64],O=d[g-1-32],H=d[g+0-32],W=d[g+1-32],J=d[g+2-32],Z=d[g+3-32];d[g+0+96]=Xe(C,U,d[g-1+96]),d[g+1+96]=d[g+0+64]=Xe(b,C,U),d[g+2+96]=d[g+1+64]=d[g+0+32]=Xe(O,b,C),d[g+3+96]=d[g+2+64]=d[g+1+32]=d[g+0+0]=Xe(H,O,b),d[g+3+64]=d[g+2+32]=d[g+1+0]=Xe(W,H,O),d[g+3+32]=d[g+2+0]=Xe(J,W,H),d[g+3+0]=Xe(Z,J,W)}function bs(d,g){var b=d[g+1-32],C=d[g+2-32],U=d[g+3-32],O=d[g+4-32],H=d[g+5-32],W=d[g+6-32],J=d[g+7-32];d[g+0+0]=Xe(d[g+0-32],b,C),d[g+1+0]=d[g+0+32]=Xe(b,C,U),d[g+2+0]=d[g+1+32]=d[g+0+64]=Xe(C,U,O),d[g+3+0]=d[g+2+32]=d[g+1+64]=d[g+0+96]=Xe(U,O,H),d[g+3+32]=d[g+2+64]=d[g+1+96]=Xe(O,H,W),d[g+3+64]=d[g+2+96]=Xe(H,W,J),d[g+3+96]=Xe(W,J,J)}function Bi(d,g){var b=d[g-1+0],C=d[g-1+32],U=d[g-1+64],O=d[g-1-32],H=d[g+0-32],W=d[g+1-32],J=d[g+2-32],Z=d[g+3-32];d[g+0+0]=d[g+1+64]=O+H+1>>1,d[g+1+0]=d[g+2+64]=H+W+1>>1,d[g+2+0]=d[g+3+64]=W+J+1>>1,d[g+3+0]=J+Z+1>>1,d[g+0+96]=Xe(U,C,b),d[g+0+64]=Xe(C,b,O),d[g+0+32]=d[g+1+96]=Xe(b,O,H),d[g+1+32]=d[g+2+96]=Xe(O,H,W),d[g+2+32]=d[g+3+96]=Xe(H,W,J),d[g+3+32]=Xe(W,J,Z)}function So(d,g){var b=d[g+0-32],C=d[g+1-32],U=d[g+2-32],O=d[g+3-32],H=d[g+4-32],W=d[g+5-32],J=d[g+6-32],Z=d[g+7-32];d[g+0+0]=b+C+1>>1,d[g+1+0]=d[g+0+64]=C+U+1>>1,d[g+2+0]=d[g+1+64]=U+O+1>>1,d[g+3+0]=d[g+2+64]=O+H+1>>1,d[g+0+32]=Xe(b,C,U),d[g+1+32]=d[g+0+96]=Xe(C,U,O),d[g+2+32]=d[g+1+96]=Xe(U,O,H),d[g+3+32]=d[g+2+96]=Xe(O,H,W),d[g+3+64]=Xe(H,W,J),d[g+3+96]=Xe(W,J,Z)}function Wa(d,g){var b=d[g-1+0],C=d[g-1+32],U=d[g-1+64],O=d[g-1+96];d[g+0+0]=b+C+1>>1,d[g+2+0]=d[g+0+32]=C+U+1>>1,d[g+2+32]=d[g+0+64]=U+O+1>>1,d[g+1+0]=Xe(b,C,U),d[g+3+0]=d[g+1+32]=Xe(C,U,O),d[g+3+32]=d[g+1+64]=Xe(U,O,O),d[g+3+64]=d[g+2+64]=d[g+0+96]=d[g+1+96]=d[g+2+96]=d[g+3+96]=O}function $a(d,g){var b=d[g-1+0],C=d[g-1+32],U=d[g-1+64],O=d[g-1+96],H=d[g-1-32],W=d[g+0-32],J=d[g+1-32],Z=d[g+2-32];d[g+0+0]=d[g+2+32]=b+H+1>>1,d[g+0+32]=d[g+2+64]=C+b+1>>1,d[g+0+64]=d[g+2+96]=U+C+1>>1,d[g+0+96]=O+U+1>>1,d[g+3+0]=Xe(W,J,Z),d[g+2+0]=Xe(H,W,J),d[g+1+0]=d[g+3+32]=Xe(b,H,W),d[g+1+32]=d[g+3+64]=Xe(C,b,H),d[g+1+64]=d[g+3+96]=Xe(U,C,b),d[g+1+96]=Xe(O,U,C)}function Ja(d,g){var b;for(b=0;8>b;++b)r(d,g+32*b,d,g-32,8)}function _o(d,g){var b;for(b=0;8>b;++b)i(d,g,d[g-1],8),g+=32}function ci(d,g,b){var C;for(C=0;8>C;++C)i(g,b+32*C,d,8)}function Dr(d,g){var b,C=8;for(b=0;8>b;++b)C+=d[g+b-32]+d[g-1+32*b];ci(C>>4,d,g)}function Ya(d,g){var b,C=4;for(b=0;8>b;++b)C+=d[g+b-32];ci(C>>3,d,g)}function ui(d,g){var b,C=4;for(b=0;8>b;++b)C+=d[g-1+32*b];ci(C>>3,d,g)}function Ao(d,g){ci(128,d,g)}function qi(d,g,b){var C=d[g-b],U=d[g+0],O=3*(U-C)+tl[1020+d[g-2*b]-d[g+b]],H=Rs[112+(O+4>>3)];d[g-b]=Cn[255+C+Rs[112+(O+3>>3)]],d[g+0]=Cn[255+U-H]}function ws(d,g,b,C){var U=d[g+0],O=d[g+b];return Dn[255+d[g-2*b]-d[g-b]]>C||Dn[255+O-U]>C}function Ns(d,g,b,C){return 4*Dn[255+d[g-b]-d[g+0]]+Dn[255+d[g-2*b]-d[g+b]]<=C}function Ss(d,g,b,C,U){var O=d[g-3*b],H=d[g-2*b],W=d[g-b],J=d[g+0],Z=d[g+b],ae=d[g+2*b],ge=d[g+3*b];return 4*Dn[255+W-J]+Dn[255+H-Z]>C?0:Dn[255+d[g-4*b]-O]<=U&&Dn[255+O-H]<=U&&Dn[255+H-W]<=U&&Dn[255+ge-ae]<=U&&Dn[255+ae-Z]<=U&&Dn[255+Z-J]<=U}function _s(d,g,b,C){var U=2*C+1;for(C=0;16>C;++C)Ns(d,g+C,b,U)&&qi(d,g+C,b)}function fr(d,g,b,C){var U=2*C+1;for(C=0;16>C;++C)Ns(d,g+C*b,1,U)&&qi(d,g+C*b,1)}function Nr(d,g,b,C){var U;for(U=3;0<U;--U)_s(d,g+=4*b,b,C)}function Ka(d,g,b,C){var U;for(U=3;0<U;--U)fr(d,g+=4,b,C)}function Fr(d,g,b,C,U,O,H,W){for(O=2*O+1;0<U--;){if(Ss(d,g,b,O,H))if(ws(d,g,b,W))qi(d,g,b);else{var J=d,Z=g,ae=b,ge=J[Z-2*ae],me=J[Z-ae],fe=J[Z+0],_e=J[Z+ae],ve=J[Z+2*ae],le=27*(we=tl[1020+3*(fe-me)+tl[1020+ge-_e]])+63>>7,ce=18*we+63>>7,we=9*we+63>>7;J[Z-3*ae]=Cn[255+J[Z-3*ae]+we],J[Z-2*ae]=Cn[255+ge+ce],J[Z-ae]=Cn[255+me+le],J[Z+0]=Cn[255+fe-le],J[Z+ae]=Cn[255+_e-ce],J[Z+2*ae]=Cn[255+ve-we]}g+=C}}function $n(d,g,b,C,U,O,H,W){for(O=2*O+1;0<U--;){if(Ss(d,g,b,O,H))if(ws(d,g,b,W))qi(d,g,b);else{var J=d,Z=g,ae=b,ge=J[Z-ae],me=J[Z+0],fe=J[Z+ae],_e=Rs[112+((ve=3*(me-ge))+4>>3)],ve=Rs[112+(ve+3>>3)],le=_e+1>>1;J[Z-2*ae]=Cn[255+J[Z-2*ae]+le],J[Z-ae]=Cn[255+ge+ve],J[Z+0]=Cn[255+me-_e],J[Z+ae]=Cn[255+fe-le]}g+=C}}function Co(d,g,b,C,U,O){Fr(d,g,b,1,16,C,U,O)}function di(d,g,b,C,U,O){Fr(d,g,1,b,16,C,U,O)}function Xa(d,g,b,C,U,O){var H;for(H=3;0<H;--H)$n(d,g+=4*b,b,1,16,C,U,O)}function Oi(d,g,b,C,U,O){var H;for(H=3;0<H;--H)$n(d,g+=4,1,b,16,C,U,O)}function Qa(d,g,b,C,U,O,H,W){Fr(d,g,U,1,8,O,H,W),Fr(b,C,U,1,8,O,H,W)}function To(d,g,b,C,U,O,H,W){Fr(d,g,1,U,8,O,H,W),Fr(b,C,1,U,8,O,H,W)}function ko(d,g,b,C,U,O,H,W){$n(d,g+4*U,U,1,8,O,H,W),$n(b,C+4*U,U,1,8,O,H,W)}function As(d,g,b,C,U,O,H,W){$n(d,g+4,1,U,8,O,H,W),$n(b,C+4,1,U,8,O,H,W)}function Hi(){this.ba=new On,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Io(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Eo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Cs(){this.ua=0,this.Wa=new re,this.vb=new re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new E}function Za(){this.xb=this.a=0,this.l=new Di,this.ca=new On,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Cs,this.ab=0,this.gc=s(4,Eo),this.Oc=0}function Vi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Di,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function fi(d,g,b,C,U,O,H){for(d=d==null?0:d[g+0],g=0;g<H;++g)U[O+g]=d+b[C+g]&255,d=U[O+g]}function Po(d,g,b,C,U,O,H){var W;if(d==null)fi(null,null,b,C,U,O,H);else for(W=0;W<H;++W)U[O+W]=d[g+W]+b[C+W]&255}function jr(d,g,b,C,U,O,H){if(d==null)fi(null,null,b,C,U,O,H);else{var W,J=d[g+0],Z=J,ae=J;for(W=0;W<H;++W)Z=ae+(J=d[g+W])-Z,ae=b[C+W]+(-256&Z?0>Z?0:255:Z)&255,Z=J,U[O+W]=ae}}function Lo(d,g,b,C){var U=g.width,O=g.o;if(e(d!=null&&g!=null),0>b||0>=C||b+C>O)return null;if(!d.Cc){if(d.ga==null){var H;if(d.ga=new Vi,(H=d.ga==null)||(H=g.width*g.o,e(d.Gb.length==0),d.Gb=o(H),d.Uc=0,d.Gb==null?H=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,H=1),H=!H),!H){H=d.ga;var W=d.Fa,J=d.P,Z=d.qc,ae=d.mb,ge=d.nb,me=J+1,fe=Z-1,_e=H.l;if(e(W!=null&&ae!=null&&g!=null),Vr[0]=null,Vr[1]=fi,Vr[2]=Po,Vr[3]=jr,H.ca=ae,H.tb=ge,H.c=g.width,H.i=g.height,e(0<H.c&&0<H.i),1>=Z)g=0;else if(H.$a=W[J+0]>>0&3,H.Z=W[J+0]>>2&3,H.Lc=W[J+0]>>4&3,J=W[J+0]>>6&3,0>H.$a||1<H.$a||4<=H.Z||1<H.Lc||J)g=0;else if(_e.put=sr,_e.ac=Zt,_e.bc=ar,_e.ma=H,_e.width=g.width,_e.height=g.height,_e.Da=g.Da,_e.v=g.v,_e.va=g.va,_e.j=g.j,_e.o=g.o,H.$a)e:{e(H.$a==1),g=En();t:for(;;){if(g==null){g=0;break e}if(e(H!=null),H.mc=g,g.c=H.c,g.i=H.i,g.l=H.l,g.l.ma=H,g.l.width=H.c,g.l.height=H.i,g.a=0,G(g.m,W,me,fe),!ur(H.c,H.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&br(g.s)?(H.ic=1,W=g.c*g.i,g.Ta=null,g.Ua=0,g.V=o(W),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(H.ic=0,g=li(g,H.c)),!g))break t;g=1;break e}H.mc=null,g=0}else g=fe>=H.c*H.i;H=!g}if(H)return null;d.ga.Lc!=1?d.Ga=0:C=O-b}e(d.ga!=null),e(b+C<=O);e:{if(g=(W=d.ga).c,O=W.l.o,W.$a==0){if(me=d.rc,fe=d.Vc,_e=d.Fa,J=d.P+1+b*g,Z=d.mb,ae=d.nb+b*g,e(J<=d.P+d.qc),W.Z!=0)for(e(Vr[W.Z]!=null),H=0;H<C;++H)Vr[W.Z](me,fe,_e,J,Z,ae,g),me=Z,fe=ae,ae+=g,J+=g;else for(H=0;H<C;++H)r(Z,ae,_e,J,g),me=Z,fe=ae,ae+=g,J+=g;d.rc=me,d.Vc=fe}else{if(e(W.mc!=null),g=b+C,e((H=W.mc)!=null),e(g<=H.i),H.C>=g)g=1;else if(W.ic||he(),W.ic){W=H.V,me=H.Ba,fe=H.c;var ve=H.i,le=(_e=1,J=H.$/fe,Z=H.$%fe,ae=H.m,ge=H.s,H.$),ce=fe*ve,we=fe*g,Ae=ge.wc,Se=le<we?Ht(ge,Z,J):null;e(le<=ce),e(g<=ve),e(br(ge));t:for(;;){for(;!ae.h&&le<we;){if(Z&Ae||(Se=Ht(ge,Z,J)),e(Se!=null),ee(ae),256>(ve=vn(Se.G[0],Se.H[0],ae)))W[me+le]=ve,++le,++Z>=fe&&(Z=0,++J<=g&&!(J%16)&&Gn(H,J));else{if(!(280>ve)){_e=0;break t}ve=Hn(ve-256,ae);var Be,Le=vn(Se.G[4],Se.H[4],ae);if(ee(ae),!(le>=(Le=lr(fe,Le=Hn(Le,ae)))&&ce-le>=ve)){_e=0;break t}for(Be=0;Be<ve;++Be)W[me+le+Be]=W[me+le+Be-Le];for(le+=ve,Z+=ve;Z>=fe;)Z-=fe,++J<=g&&!(J%16)&&Gn(H,J);le<we&&Z&Ae&&(Se=Ht(ge,Z,J))}e(ae.h==X(ae))}Gn(H,J>g?g:J);break t}!_e||ae.h&&le<ce?(_e=0,H.a=ae.h?5:3):H.$=le,g=_e}else g=zn(H,H.V,H.Ba,H.c,H.i,g,Ei);if(!g){C=0;break e}}b+C>=O&&(d.Cc=1),C=1}if(!C)return null;if(d.Cc&&((C=d.ga)!=null&&(C.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+b*U}function x(d,g,b,C,U,O){for(;0<U--;){var H,W=d,J=g+(b?1:0),Z=d,ae=g+(b?0:3);for(H=0;H<C;++H){var ge=Z[ae+4*H];ge!=255&&(ge*=32897,W[J+4*H+0]=W[J+4*H+0]*ge>>23,W[J+4*H+1]=W[J+4*H+1]*ge>>23,W[J+4*H+2]=W[J+4*H+2]*ge>>23)}g+=O}}function B(d,g,b,C,U){for(;0<C--;){var O;for(O=0;O<b;++O){var H=d[g+2*O+0],W=15&(Z=d[g+2*O+1]),J=4369*W,Z=(240&Z|Z>>4)*J>>16;d[g+2*O+0]=(240&H|H>>4)*J>>16&240|(15&H|H<<4)*J>>16>>4&15,d[g+2*O+1]=240&Z|W}g+=U}}function te(d,g,b,C,U,O,H,W){var J,Z,ae=255;for(Z=0;Z<U;++Z){for(J=0;J<C;++J){var ge=d[g+J];O[H+4*J]=ge,ae&=ge}g+=b,H+=W}return ae!=255}function oe(d,g,b,C,U){var O;for(O=0;O<U;++O)b[C+O]=d[g+O]>>8}function he(){Mn=x,Ct=B,Tt=te,Ut=oe}function xe(d,g,b){M[d]=function(C,U,O,H,W,J,Z,ae,ge,me,fe,_e,ve,le,ce,we,Ae){var Se,Be=Ae-1>>1,Le=W[J+0]|Z[ae+0]<<16,ze=ge[me+0]|fe[_e+0]<<16;e(C!=null);var Re=3*Le+ze+131074>>2;for(g(C[U+0],255&Re,Re>>16,ve,le),O!=null&&(Re=3*ze+Le+131074>>2,g(O[H+0],255&Re,Re>>16,ce,we)),Se=1;Se<=Be;++Se){var gt=W[J+Se]|Z[ae+Se]<<16,yt=ge[me+Se]|fe[_e+Se]<<16,ft=Le+gt+ze+yt+524296,ct=ft+2*(gt+ze)>>3;Re=ct+Le>>1,Le=(ft=ft+2*(Le+yt)>>3)+gt>>1,g(C[U+2*Se-1],255&Re,Re>>16,ve,le+(2*Se-1)*b),g(C[U+2*Se-0],255&Le,Le>>16,ve,le+(2*Se-0)*b),O!=null&&(Re=ft+ze>>1,Le=ct+yt>>1,g(O[H+2*Se-1],255&Re,Re>>16,ce,we+(2*Se-1)*b),g(O[H+2*Se+0],255&Le,Le>>16,ce,we+(2*Se+0)*b)),Le=gt,ze=yt}1&Ae||(Re=3*Le+ze+131074>>2,g(C[U+Ae-1],255&Re,Re>>16,ve,le+(Ae-1)*b),O!=null&&(Re=3*ze+Le+131074>>2,g(O[H+Ae-1],255&Re,Re>>16,ce,we+(Ae-1)*b)))}}function Te(){Fn[Ms]=xh,Fn[Ds]=bc,Fn[gc]=bh,Fn[Fs]=wc,Fn[js]=Nc,Fn[nl]=Sc,Fn[mc]=wh,Fn[rl]=bc,Fn[il]=wc,Fn[Us]=Nc,Fn[ol]=Sc}function Ue(d){return d&-16384?0>d?0:255:d>>Nh}function Ge(d,g){return Ue((19077*d>>8)+(26149*g>>8)-14234)}function rt(d,g,b){return Ue((19077*d>>8)-(6419*g>>8)-(13320*b>>8)+8708)}function tt(d,g){return Ue((19077*d>>8)+(33050*g>>8)-17685)}function ut(d,g,b,C,U){C[U+0]=Ge(d,b),C[U+1]=rt(d,g,b),C[U+2]=tt(d,g)}function Et(d,g,b,C,U){C[U+0]=tt(d,g),C[U+1]=rt(d,g,b),C[U+2]=Ge(d,b)}function Rt(d,g,b,C,U){var O=rt(d,g,b);g=O<<3&224|tt(d,g)>>3,C[U+0]=248&Ge(d,b)|O>>5,C[U+1]=g}function Vt(d,g,b,C,U){var O=240&tt(d,g)|15;C[U+0]=240&Ge(d,b)|rt(d,g,b)>>4,C[U+1]=O}function on(d,g,b,C,U){C[U+0]=255,ut(d,g,b,C,U+1)}function Yt(d,g,b,C,U){Et(d,g,b,C,U),C[U+3]=255}function Jn(d,g,b,C,U){ut(d,g,b,C,U),C[U+3]=255}function An(d,g){return 0>d?0:d>g?g:d}function hr(d,g,b){M[d]=function(C,U,O,H,W,J,Z,ae,ge){for(var me=ae+(-2&ge)*b;ae!=me;)g(C[U+0],O[H+0],W[J+0],Z,ae),g(C[U+1],O[H+0],W[J+0],Z,ae+b),U+=2,++H,++J,ae+=2*b;1&ge&&g(C[U+0],O[H+0],W[J+0],Z,ae)}}function Ts(d,g,b){return b==0?d==0?g==0?6:5:g==0?4:0:b}function Ro(d,g,b,C,U){switch(d>>>30){case 3:Ar(g,b,C,U,0);break;case 2:jt(g,b,C,U);break;case 1:hn(g,b,C,U)}}function Mo(d,g){var b,C,U=g.M,O=g.Nb,H=d.oc,W=d.pc+40,J=d.oc,Z=d.pc+584,ae=d.oc,ge=d.pc+600;for(b=0;16>b;++b)H[W+32*b-1]=129;for(b=0;8>b;++b)J[Z+32*b-1]=129,ae[ge+32*b-1]=129;for(0<U?H[W-1-32]=J[Z-1-32]=ae[ge-1-32]=129:(i(H,W-32-1,127,21),i(J,Z-32-1,127,9),i(ae,ge-32-1,127,9)),C=0;C<d.za;++C){var me=g.ya[g.aa+C];if(0<C){for(b=-1;16>b;++b)r(H,W+32*b-4,H,W+32*b+12,4);for(b=-1;8>b;++b)r(J,Z+32*b-4,J,Z+32*b+4,4),r(ae,ge+32*b-4,ae,ge+32*b+4,4)}var fe=d.Gd,_e=d.Hd+C,ve=me.ad,le=me.Hc;if(0<U&&(r(H,W-32,fe[_e].y,0,16),r(J,Z-32,fe[_e].f,0,8),r(ae,ge-32,fe[_e].ea,0,8)),me.Za){var ce=H,we=W-32+16;for(0<U&&(C>=d.za-1?i(ce,we,fe[_e].y[15],4):r(ce,we,fe[_e+1].y,0,4)),b=0;4>b;b++)ce[we+128+b]=ce[we+256+b]=ce[we+384+b]=ce[we+0+b];for(b=0;16>b;++b,le<<=2)ce=H,we=W+Ac[b],Yn[me.Ob[b]](ce,we),Ro(le,ve,16*+b,ce,we)}else if(ce=Ts(C,U,me.Ob[0]),Hr[ce](H,W),le!=0)for(b=0;16>b;++b,le<<=2)Ro(le,ve,16*+b,H,W+Ac[b]);for(b=me.Gc,ce=Ts(C,U,me.Dd),Tr[ce](J,Z),Tr[ce](ae,ge),le=ve,ce=J,we=Z,255&(me=b>>0)&&(170&me?Bo(le,256,ce,we):Ln(le,256,ce,we)),me=ae,le=ge,255&(b>>=8)&&(170&b?Bo(ve,320,me,le):Ln(ve,320,me,le)),U<d.Ub-1&&(r(fe[_e].y,0,H,W+480,16),r(fe[_e].f,0,J,Z+224,8),r(fe[_e].ea,0,ae,ge+224,8)),b=8*O*d.B,fe=d.sa,_e=d.ta+16*C+16*O*d.R,ve=d.qa,me=d.ra+8*C+b,le=d.Ha,ce=d.Ia+8*C+b,b=0;16>b;++b)r(fe,_e+b*d.R,H,W+32*b,16);for(b=0;8>b;++b)r(ve,me+b*d.B,J,Z+32*b,8),r(le,ce+b*d.B,ae,ge+32*b,8)}}function Gi(d,g,b,C,U,O,H,W,J){var Z=[0],ae=[0],ge=0,me=J!=null?J.kd:0,fe=J??new Io;if(d==null||12>b)return 7;fe.data=d,fe.w=g,fe.ha=b,g=[g],b=[b],fe.gb=[fe.gb];e:{var _e=g,ve=b,le=fe.gb;if(e(d!=null),e(ve!=null),e(le!=null),le[0]=0,12<=ve[0]&&!n(d,_e[0],"RIFF")){if(n(d,_e[0]+8,"WEBP")){le=3;break e}var ce=Ie(d,_e[0]+4);if(12>ce||4294967286<ce){le=3;break e}if(me&&ce>ve[0]-8){le=7;break e}le[0]=ce,_e[0]+=12,ve[0]-=12}le=0}if(le!=0)return le;for(ce=0<fe.gb[0],b=b[0];;){e:{var we=d;ve=g,le=b;var Ae=Z,Se=ae,Be=_e=[0];if((Re=ge=[ge])[0]=0,8>le[0])le=7;else{if(!n(we,ve[0],"VP8X")){if(Ie(we,ve[0]+4)!=10){le=3;break e}if(18>le[0]){le=7;break e}var Le=Ie(we,ve[0]+8),ze=1+Ee(we,ve[0]+12);if(2147483648<=ze*(we=1+Ee(we,ve[0]+15))){le=3;break e}Be!=null&&(Be[0]=Le),Ae!=null&&(Ae[0]=ze),Se!=null&&(Se[0]=we),ve[0]+=18,le[0]-=18,Re[0]=1}le=0}}if(ge=ge[0],_e=_e[0],le!=0)return le;if(ve=!!(2&_e),!ce&&ge)return 3;if(O!=null&&(O[0]=!!(16&_e)),H!=null&&(H[0]=ve),W!=null&&(W[0]=0),H=Z[0],_e=ae[0],ge&&ve&&J==null){le=0;break}if(4>b){le=7;break}if(ce&&ge||!ce&&!ge&&!n(d,g[0],"ALPH")){b=[b],fe.na=[fe.na],fe.P=[fe.P],fe.Sa=[fe.Sa];e:{Le=d,le=g,ce=b;var Re=fe.gb;Ae=fe.na,Se=fe.P,Be=fe.Sa,ze=22,e(Le!=null),e(ce!=null),we=le[0];var gt=ce[0];for(e(Ae!=null),e(Be!=null),Ae[0]=null,Se[0]=null,Be[0]=0;;){if(le[0]=we,ce[0]=gt,8>gt){le=7;break e}var yt=Ie(Le,we+4);if(4294967286<yt){le=3;break e}var ft=8+yt+1&-2;if(ze+=ft,0<Re&&ze>Re){le=3;break e}if(!n(Le,we,"VP8 ")||!n(Le,we,"VP8L")){le=0;break e}if(gt[0]<ft){le=7;break e}n(Le,we,"ALPH")||(Ae[0]=Le,Se[0]=we+8,Be[0]=yt),we+=ft,gt-=ft}}if(b=b[0],fe.na=fe.na[0],fe.P=fe.P[0],fe.Sa=fe.Sa[0],le!=0)break}b=[b],fe.Ja=[fe.Ja],fe.xa=[fe.xa];e:if(Re=d,le=g,ce=b,Ae=fe.gb[0],Se=fe.Ja,Be=fe.xa,Le=le[0],we=!n(Re,Le,"VP8 "),ze=!n(Re,Le,"VP8L"),e(Re!=null),e(ce!=null),e(Se!=null),e(Be!=null),8>ce[0])le=7;else{if(we||ze){if(Re=Ie(Re,Le+4),12<=Ae&&Re>Ae-12){le=3;break e}if(me&&Re>ce[0]-8){le=7;break e}Se[0]=Re,le[0]+=8,ce[0]-=8,Be[0]=ze}else Be[0]=5<=ce[0]&&Re[Le+0]==47&&!(Re[Le+4]>>5),Se[0]=ce[0];le=0}if(b=b[0],fe.Ja=fe.Ja[0],fe.xa=fe.xa[0],g=g[0],le!=0)break;if(4294967286<fe.Ja)return 3;if(W==null||ve||(W[0]=fe.xa?2:1),H=[H],_e=[_e],fe.xa){if(5>b){le=7;break}W=H,me=_e,ve=O,d==null||5>b?d=0:5<=b&&d[g+0]==47&&!(d[g+4]>>5)?(ce=[0],Re=[0],Ae=[0],G(Se=new R,d,g,b),$e(Se,ce,Re,Ae)?(W!=null&&(W[0]=ce[0]),me!=null&&(me[0]=Re[0]),ve!=null&&(ve[0]=Ae[0]),d=1):d=0):d=0}else{if(10>b){le=7;break}W=_e,d==null||10>b||!ds(d,g+3,b-3)?d=0:(me=d[g+0]|d[g+1]<<8|d[g+2]<<16,ve=16383&(d[g+7]<<8|d[g+6]),d=16383&(d[g+9]<<8|d[g+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=fe.Ja||!ve||!d?d=0:(H&&(H[0]=ve),W&&(W[0]=d),d=1))}if(!d||(H=H[0],_e=_e[0],ge&&(Z[0]!=H||ae[0]!=_e)))return 3;J!=null&&(J[0]=fe,J.offset=g-J.w,e(4294967286>g-J.w),e(J.offset==J.ha-b));break}return le==0||le==7&&ge&&J==null?(O!=null&&(O[0]|=fe.na!=null&&0<fe.na.length),C!=null&&(C[0]=H),U!=null&&(U[0]=_e),0):le}function Do(d,g,b){var C=g.width,U=g.height,O=0,H=0,W=C,J=U;if(g.Da=d!=null&&0<d.Da,g.Da&&(W=d.cd,J=d.bd,O=d.v,H=d.j,11>b||(O&=-2,H&=-2),0>O||0>H||0>=W||0>=J||O+W>C||H+J>U))return 0;if(g.v=O,g.j=H,g.va=O+W,g.o=H+J,g.U=W,g.T=J,g.da=d!=null&&0<d.da,g.da){if(!Ke(W,J,b=[d.ib],O=[d.hb]))return 0;g.ib=b[0],g.hb=O[0]}return g.ob=d!=null&&d.ob,g.Kb=d==null||!d.Sd,g.da&&(g.ob=g.ib<3*C/4&&g.hb<3*U/4,g.Kb=0),1}function Fo(d){if(d==null)return 2;if(11>d.S){var g=d.f.RGBA;g.fb+=(d.height-1)*g.A,g.A=-g.A}else g=d.f.kb,d=d.height,g.O+=(d-1)*g.fa,g.fa=-g.fa,g.N+=(d-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(d-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(d-1)*g.lb,g.lb=-g.lb);return 0}function zi(d,g,b,C){if(C==null||0>=d||0>=g)return 2;if(b!=null){if(b.Da){var U=b.cd,O=b.bd,H=-2&b.v,W=-2&b.j;if(0>H||0>W||0>=U||0>=O||H+U>d||W+O>g)return 2;d=U,g=O}if(b.da){if(!Ke(d,g,U=[b.ib],O=[b.hb]))return 2;d=U[0],g=O[0]}}C.width=d,C.height=g;e:{var J=C.width,Z=C.height;if(d=C.S,0>=J||0>=Z||!(d>=Ms&&13>d))d=2;else{if(0>=C.Rd&&C.sd==null){H=O=U=g=0;var ae=(W=J*Cc[d])*Z;if(11>d||(O=(Z+1)/2*(g=(J+1)/2),d==12&&(H=(U=J)*Z)),(Z=o(ae+2*O+H))==null){d=1;break e}C.sd=Z,11>d?((J=C.f.RGBA).eb=Z,J.fb=0,J.A=W,J.size=ae):((J=C.f.kb).y=Z,J.O=0,J.fa=W,J.Fd=ae,J.f=Z,J.N=0+ae,J.Ab=g,J.Cd=O,J.ea=Z,J.W=0+ae+O,J.Db=g,J.Ed=O,d==12&&(J.F=Z,J.J=0+ae+2*O),J.Tc=H,J.lb=U)}if(g=1,U=C.S,O=C.width,H=C.height,U>=Ms&&13>U)if(11>U)d=C.f.RGBA,g&=(W=Math.abs(d.A))*(H-1)+O<=d.size,g&=W>=O*Cc[U],g&=d.eb!=null;else{d=C.f.kb,W=(O+1)/2,ae=(H+1)/2,J=Math.abs(d.fa),Z=Math.abs(d.Ab);var ge=Math.abs(d.Db),me=Math.abs(d.lb),fe=me*(H-1)+O;g&=J*(H-1)+O<=d.Fd,g&=Z*(ae-1)+W<=d.Cd,g=(g&=ge*(ae-1)+W<=d.Ed)&J>=O&Z>=W&ge>=W,g&=d.y!=null,g&=d.f!=null,g&=d.ea!=null,U==12&&(g&=me>=O,g&=fe<=d.Tc,g&=d.F!=null)}else g=0;d=g?0:2}}return d!=0||b!=null&&b.fd&&(d=Fo(C)),d}var en=64,Wi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],$i=24,Ji=32,jo=8,xn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Pe("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(d){return d},M.Predictor2=function(d,g,b){return g[b+0]},M.Predictor3=function(d,g,b){return g[b+1]},M.Predictor4=function(d,g,b){return g[b-1]},M.Predictor5=function(d,g,b){return Me(Me(d,g[b+1]),g[b+0])},M.Predictor6=function(d,g,b){return Me(d,g[b-1])},M.Predictor7=function(d,g,b){return Me(d,g[b+0])},M.Predictor8=function(d,g,b){return Me(g[b-1],g[b+0])},M.Predictor9=function(d,g,b){return Me(g[b+0],g[b+1])},M.Predictor10=function(d,g,b){return Me(Me(d,g[b-1]),Me(g[b+0],g[b+1]))},M.Predictor11=function(d,g,b){var C=g[b+0];return 0>=ot(C>>24&255,d>>24&255,(g=g[b-1])>>24&255)+ot(C>>16&255,d>>16&255,g>>16&255)+ot(C>>8&255,d>>8&255,g>>8&255)+ot(255&C,255&d,255&g)?C:d},M.Predictor12=function(d,g,b){var C=g[b+0];return(Ve((d>>24&255)+(C>>24&255)-((g=g[b-1])>>24&255))<<24|Ve((d>>16&255)+(C>>16&255)-(g>>16&255))<<16|Ve((d>>8&255)+(C>>8&255)-(g>>8&255))<<8|Ve((255&d)+(255&C)-(255&g)))>>>0},M.Predictor13=function(d,g,b){var C=g[b-1];return(Ze((d=Me(d,g[b+0]))>>24&255,C>>24&255)<<24|Ze(d>>16&255,C>>16&255)<<16|Ze(d>>8&255,C>>8&255)<<8|Ze(d>>0&255,C>>0&255))>>>0};var el=M.PredictorAdd0;M.PredictorAdd1=at,Pe("Predictor2","PredictorAdd2"),Pe("Predictor3","PredictorAdd3"),Pe("Predictor4","PredictorAdd4"),Pe("Predictor5","PredictorAdd5"),Pe("Predictor6","PredictorAdd6"),Pe("Predictor7","PredictorAdd7"),Pe("Predictor8","PredictorAdd8"),Pe("Predictor9","PredictorAdd9"),Pe("Predictor10","PredictorAdd10"),Pe("Predictor11","PredictorAdd11"),Pe("Predictor12","PredictorAdd12"),Pe("Predictor13","PredictorAdd13");var Uo=M.PredictorAdd2;lt("ColorIndexInverseTransform","MapARGB","32b",(function(d){return d>>8&255}),(function(d){return d})),lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(d){return d}),(function(d){return d>>8&255}));var ks,Pn=M.ColorIndexInverseTransform,Yi=M.MapARGB,Is=M.VP8LColorIndexInverseTransformAlpha,Es=M.MapAlpha,Ur=M.VP8LPredictorsAdd=[];Ur.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var hi,bn,fn,Br,Sr,_r,Ki,Ar,jt,Bo,hn,Ln,Xi,Ps,qo,pi,gi,qr,mi,Qi,vi,Or,Oo,Rn,Mn,Ct,Tt,Ut,$t=o(511),Cr=o(2041),Ho=o(225),Zi=o(767),Ls=0,tl=Cr,Rs=Ho,Cn=Zi,Dn=$t,Ms=0,Ds=1,gc=2,Fs=3,js=4,nl=5,mc=6,rl=7,il=8,Us=9,ol=10,oh=[2,3,7],sh=[3,3,11],vc=[280,256,256,256,40],ah=[0,1,1,1,0],lh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ch=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],uh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],dh=8,sl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],al=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vo=null,fh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],hh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],yc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ph=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],mh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],vh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hr=[],Yn=[],Tr=[],yh=1,xc=2,Vr=[],Fn=[];xe("UpsampleRgbLinePair",ut,3),xe("UpsampleBgrLinePair",Et,3),xe("UpsampleRgbaLinePair",Jn,4),xe("UpsampleBgraLinePair",Yt,4),xe("UpsampleArgbLinePair",on,4),xe("UpsampleRgba4444LinePair",Vt,2),xe("UpsampleRgb565LinePair",Rt,2);var xh=M.UpsampleRgbLinePair,bh=M.UpsampleBgrLinePair,bc=M.UpsampleRgbaLinePair,wc=M.UpsampleBgraLinePair,Nc=M.UpsampleArgbLinePair,Sc=M.UpsampleRgba4444LinePair,wh=M.UpsampleRgb565LinePair,Bs=16,qs=1<<Bs-1,Go=-227,ll=482,Nh=6,_c=0,Sh=o(256),_h=o(256),Ah=o(256),Ch=o(256),Th=o(ll-Go),kh=o(ll-Go);hr("YuvToRgbRow",ut,3),hr("YuvToBgrRow",Et,3),hr("YuvToRgbaRow",Jn,4),hr("YuvToBgraRow",Yt,4),hr("YuvToArgbRow",on,4),hr("YuvToRgba4444Row",Vt,2),hr("YuvToRgb565Row",Rt,2);var Ac=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Os=[0,2,8],Ih=[8,7,6,4,4,2,2,2,1,1,1,1],Eh=1;this.WebPDecodeRGBA=function(d,g,b,C,U){var O=Ds,H=new Hi,W=new On;H.ba=W,W.S=O,W.width=[W.width],W.height=[W.height];var J=W.width,Z=W.height,ae=new xr;if(ae==null||d==null)var ge=2;else e(ae!=null),ge=Gi(d,g,b,ae.width,ae.height,ae.Pd,ae.Qd,ae.format,null);if(ge!=0?J=0:(J!=null&&(J[0]=ae.width[0]),Z!=null&&(Z[0]=ae.height[0]),J=1),J){W.width=W.width[0],W.height=W.height[0],C!=null&&(C[0]=W.width),U!=null&&(U[0]=W.height);e:{if(C=new Di,(U=new Io).data=d,U.w=g,U.ha=b,U.kd=1,g=[0],e(U!=null),((d=Gi(U.data,U.w,U.ha,null,null,null,g,null,U))==0||d==7)&&g[0]&&(d=4),(g=d)==0){if(e(H!=null),C.data=U.data,C.w=U.w+U.offset,C.ha=U.ha-U.offset,C.put=sr,C.ac=Zt,C.bc=ar,C.ma=H,U.xa){if((d=En())==null){H=1;break e}if((function(me,fe){var _e=[0],ve=[0],le=[0];t:for(;;){if(me==null)return 0;if(fe==null)return me.a=2,0;if(me.l=fe,me.a=0,G(me.m,fe.data,fe.w,fe.ha),!$e(me.m,_e,ve,le)){me.a=3;break t}if(me.xb=xc,fe.width=_e[0],fe.height=ve[0],!ur(_e[0],ve[0],1,me,null))break t;return 1}return e(me.a!=0),0})(d,C)){if(C=(g=zi(C.width,C.height,H.Oa,H.ba))==0){t:{C=d;n:for(;;){if(C==null){C=0;break t}if(e(C.s.yc!=null),e(C.s.Ya!=null),e(0<C.s.Wb),e((b=C.l)!=null),e((U=b.ma)!=null),C.xb!=0){if(C.ca=U.ba,C.tb=U.tb,e(C.ca!=null),!Do(U.Oa,b,Fs)){C.a=2;break n}if(!li(C,b.width)||b.da)break n;if((b.da||mt(C.ca.S))&&he(),11>C.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),C.ca.f.kb.F!=null&&he()),C.Pb&&0<C.s.ua&&C.s.vb.X==null&&!He(C.s.vb,C.s.Wa.Xa)){C.a=1;break n}C.xb=0}if(!zn(C,C.V,C.Ba,C.c,C.i,b.o,Ii))break n;U.Dc=C.Ma,C=1;break t}e(C.a!=0),C=0}C=!C}C&&(g=d.a)}else g=d.a}else{if((d=new Da)==null){H=1;break e}if(d.Fa=U.na,d.P=U.P,d.qc=U.Sa,fs(d,C)){if((g=zi(C.width,C.height,H.Oa,H.ba))==0){if(d.Aa=0,b=H.Oa,e((U=d)!=null),b!=null){if(0<(J=0>(J=b.Md)?0:100<J?255:255*J/100)){for(Z=ae=0;4>Z;++Z)12>(ge=U.pb[Z]).lc&&(ge.ia=J*Ih[0>ge.lc?0:ge.lc]>>3),ae|=ge.ia;ae&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=b.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}Fa(d,C)||(g=d.a)}}else g=d.a}g==0&&H.Oa!=null&&H.Oa.fd&&(g=Fo(H.ba))}H=g}O=H!=0?null:11>O?W.f.RGBA.eb:W.f.kb.y}else O=null;return O};var Cc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(M,j){for(var $="",I=0;I<4;I++)$+=String.fromCharCode(M[j++]);return $}function p(M,j){return(M[j+0]<<0|M[j+1]<<8|M[j+2]<<16)>>>0}function m(M,j){return(M[j+0]<<0|M[j+1]<<8|M[j+2]<<16|M[j+3]<<24)>>>0}new l;var y=[0],v=[0],N=[],A=new l,S=t,w=(function(M,j){var $={},I=0,E=!1,z=0,K=0;if($.frames=[],!(function(V,X,Q,ee){for(var se=0;se<ee;se++)if(V[X+se]!=Q.charCodeAt(se))return!0;return!1})(M,j,"RIFF",4)){var ie,q;for(m(M,j+=4),j+=8;j<M.length;){var L=c(M,j),G=m(M,j+=4);j+=4;var Y=G+(1&G);switch(L){case"VP8 ":case"VP8L":$.frames[I]===void 0&&($.frames[I]={}),(R=$.frames[I]).src_off=E?K:j-8,R.src_size=z+G+8,I++,E&&(E=!1,z=0,K=0);break;case"VP8X":(R=$.header={}).feature_flags=M[j];var ne=j+4;R.canvas_width=1+p(M,ne),ne+=3,R.canvas_height=1+p(M,ne),ne+=3;break;case"ALPH":E=!0,z=Y+8,K=j-8;break;case"ANIM":(R=$.header).bgcolor=m(M,j),ne=j+4,R.loop_count=(ie=M)[(q=ne)+0]<<0|ie[q+1]<<8,ne+=2;break;case"ANMF":var ue,R;(R=$.frames[I]={}).offset_x=2*p(M,j),j+=3,R.offset_y=2*p(M,j),j+=3,R.width=1+p(M,j),j+=3,R.height=1+p(M,j),j+=3,R.duration=p(M,j),j+=3,ue=M[j++],R.dispose=1&ue,R.blend=ue>>1&1}L!="ANMF"&&(j+=Y)}return $}})(S,0);w.response=S,w.rgbaoutput=!0,w.dataurl=!1;var _=w.header?w.header:null,T=w.frames?w.frames:null;if(_){_.loop_counter=_.loop_count,y=[_.canvas_height],v=[_.canvas_width];for(var D=0;D<T.length&&T[D].blend!=0;D++);}var k=T[0],F=A.WebPDecodeRGBA(S,k.src_off,k.src_size,v,y);k.rgba=F,k.imgwidth=v[0],k.imgheight=y[0];for(var P=0;P<v[0]*y[0]*4;P++)N[P]=F[P];return this.width=v,this.height=y,this.data=N,this}(function(t){var e=function(){return typeof Jl=="function"},n=function(y,v,N,A){var S=4,w=s;switch(A){case t.image_compression.FAST:S=1,w=o;break;case t.image_compression.MEDIUM:S=6,w=a;break;case t.image_compression.SLOW:S=9,w=l}y=r(y,v,N,w);var _=Jl(y,{level:S});return t.__addimage__.arrayBufferToBinaryString(_)},r=function(y,v,N,A){for(var S,w,_,T=y.length/v,D=new Uint8Array(y.length+T),k=p(),F=0;F<T;F+=1){if(_=F*v,S=y.subarray(_,_+v),A)D.set(A(S,N,w),_+F);else{for(var P,M=k.length,j=[];P<M;P+=1)j[P]=k[P](S,N,w);var $=m(j.concat());D.set(j[$],_+F)}w=S}return D},i=function(y){var v=Array.apply([],y);return v.unshift(0),v},o=function(y,v){var N,A=[],S=y.length;A[0]=1;for(var w=0;w<S;w+=1)N=y[w-v]||0,A[w+1]=y[w]-N+256&255;return A},s=function(y,v,N){var A,S=[],w=y.length;S[0]=2;for(var _=0;_<w;_+=1)A=N&&N[_]||0,S[_+1]=y[_]-A+256&255;return S},a=function(y,v,N){var A,S,w=[],_=y.length;w[0]=3;for(var T=0;T<_;T+=1)A=y[T-v]||0,S=N&&N[T]||0,w[T+1]=y[T]+256-(A+S>>>1)&255;return w},l=function(y,v,N){var A,S,w,_,T=[],D=y.length;T[0]=4;for(var k=0;k<D;k+=1)A=y[k-v]||0,S=N&&N[k]||0,w=N&&N[k-v]||0,_=c(A,S,w),T[k+1]=y[k]-_+256&255;return T},c=function(y,v,N){if(y===v&&v===N)return y;var A=Math.abs(v-N),S=Math.abs(y-N),w=Math.abs(y+v-N-N);return A<=S&&A<=w?y:S<=w?v:N},p=function(){return[i,o,s,a,l]},m=function(y){var v=y.map((function(N){return N.reduce((function(A,S){return A+Math.abs(S)}),0)}));return v.indexOf(Math.min.apply(null,v))};t.processPNG=function(y,v,N,A){var S,w,_,T,D,k,F,P,M,j,$,I,E,z,K,ie=this.decode.FLATE_DECODE,q="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(_=new Vv(y)).imgData,w=_.bits,S=_.colorSpace,D=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){M=(P=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,$=new Uint8Array(M*_.colors),j=new Uint8Array(M);var L,G=_.pixelBitlength-_.bits;for(z=0,K=0;z<M;z++){for(E=P[z],L=0;L<G;)$[K++]=E>>>L&255,L+=_.bits;j[z]=E>>>L&255}}if(_.bits===16){M=(P=new Uint32Array(_.decodePixels().buffer)).length,$=new Uint8Array(M*(32/_.pixelBitlength)*_.colors),j=new Uint8Array(M*(32/_.pixelBitlength)),I=_.colors>1,z=0,K=0;for(var Y=0;z<M;)E=P[z++],$[K++]=E>>>0&255,I&&($[K++]=E>>>16&255,E=P[z++],$[K++]=E>>>0&255),j[Y++]=E>>>16&255;w=8}A!==t.image_compression.NONE&&e()?(y=n($,_.width*_.colors,_.colors,A),F=n(j,_.width,1,A)):(y=$,F=j,ie=void 0)}if(_.colorType===3&&(S=this.color_spaces.INDEXED,k=_.palette,_.transparency.indexed)){var ne=_.transparency.indexed,ue=0;for(z=0,M=ne.length;z<M;++z)ue+=ne[z];if((ue/=255)===M-1&&ne.indexOf(0)!==-1)T=[ne.indexOf(0)];else if(ue!==M){for(P=_.decodePixels(),j=new Uint8Array(P.length),z=0,M=P.length;z<M;z++)j[z]=ne[P[z]];F=n(j,_.width,1)}}var R=(function(V){var X;switch(V){case t.image_compression.FAST:X=11;break;case t.image_compression.MEDIUM:X=13;break;case t.image_compression.SLOW:X=14;break;default:X=12}return X})(A);return ie===this.decode.FLATE_DECODE&&(q="/Predictor "+R+" "),q+="/Colors "+D+" /BitsPerComponent "+w+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(F&&this.__addimage__.isArrayBuffer(F)||this.__addimage__.isArrayBufferView(F))&&(F=this.__addimage__.arrayBufferToBinaryString(F)),{alias:N,data:y,index:v,filter:ie,decodeParameters:q,transparency:T,palette:k,sMask:F,predictor:R,width:_.width,height:_.height,bitsPerComponent:w,colorSpace:S}}}})(We.API),(function(t){t.processGIF89A=function(e,n,r,i){var o=new Gv(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:a},p=new kl(100).encode(c,100);return t.processJPEG.call(this,p,n,r,i)},t.processGIF87A=t.processGIF89A})(We.API),Qn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Qn.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){At.log("bit decode error:"+n)}},Qn.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Qn.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,l=15&o,c=this.palette[a];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Qn.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},Qn.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,c=o>>15?255:0,p=r*this.width*4+4*i;this.data[p]=l,this.data[p+1]=a,this.data[p+2]=s,this.data[p+3]=c}this.pos+=t}},Qn.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&n)/n*255|0,c=(s>>11)/e*255|0,p=i*this.width*4+4*o;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=a,this.data[p+3]=255}this.pos+=t}},Qn.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Qn.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},Qn.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,i){var o=new Qn(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new kl(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}})(We.API),Ud.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,i){var o=new Ud(e),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new kl(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}})(We.API),We.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var p=r[c],m=r[c+1],y=r[c+2],v=r[c+3];o[a++]=p,o[a++]=m,o[a++]=y,s[l++]=v}var N=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:N,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},We.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},oo=We.API,aa=oo.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=c.fof?c.fof:1,m=e.doKerning!==!1,y=0,v=t.length,N=0,A=a[0]||l,S=[];for(n=0;n<v;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?S.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(y=m&&bt(c[r])==="object"&&!isNaN(parseInt(c[r][N],10))?c[r][N]/p:0,S.push((a[r]||A)/l+y)),N=r;return S},Md=oo.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return oo.processArabic&&(t=oo.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:aa.apply(this,arguments).reduce((function(o,s){return o+s}),0)},Dd=function(t,e,n,r){for(var i=[],o=0,s=t.length,a=0;o!==s&&a+e[o]<n;)a+=e[o],o++;i.push(t.slice(0,o));var l=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(t.slice(l,o)),a=0,l=o),a+=e[o],o++;return l!==o&&i.push(t.slice(l,o)),i},Fd=function(t,e,n){n||(n={});var r,i,o,s,a,l,c,p=[],m=[p],y=n.textIndent||0,v=0,N=0,A=t.split(" "),S=aa.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?A[0].length+2:n.lineIndent||0){var w=Array(l).join(" "),_=[];A.map((function(D){(D=D.split(/\s*\n/)).length>1?_=_.concat(D.map((function(k,F){return(F&&k.length?`
`:"")+k}))):_.push(D[0])})),A=_,l=Md.apply(this,[w,n])}for(o=0,s=A.length;o<s;o++){var T=0;if(r=A[o],l&&r[0]==`
`&&(r=r.substr(1),T=1),y+v+(N=(i=aa.apply(this,[r,n])).reduce((function(D,k){return D+k}),0))>e||T){if(N>e){for(a=Dd.apply(this,[r,i,e-(y+v),e]),p.push(a.shift()),p=[a.pop()];a.length;)m.push([a.shift()]);N=i.slice(r.length-(p[0]?p[0].length:0)).reduce((function(D,k){return D+k}),0)}else p=[r];m.push(p),y=N+l,v=S}else p.push(r),y+=v+N,v=S}return c=l?function(D,k){return(k?w:"")+D.join(" ")}:function(D){return D.join(" ")},m.map(c)},oo.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var m=this.internal.getFont(p.fontName,p.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(Fd.apply(this,[r[a],s,o]));return c},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(m){return"0x"+parseInt(m,10).toString(16)},s=t.__fontmetrics__.compress=function(m){var y,v,N,A,S=["{"];for(var w in m){if(y=m[w],isNaN(parseInt(w,10))?v="'"+w+"'":(w=parseInt(w,10),v=(v=o(w).slice(2)).slice(0,-1)+r[v.slice(-1)]),typeof y=="number")y<0?(N=o(y).slice(3),A="-"):(N=o(y).slice(2),A=""),N=A+N.slice(0,-1)+r[N.slice(-1)];else{if(bt(y)!=="object")throw new Error("Don't know what to do with value type "+bt(y)+".");N=s(y)}S.push(v+N)}return S.push("}"),S.join("")},a=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,v,N,A,S={},w=1,_=S,T=[],D="",k="",F=m.length-1,P=1;P<F;P+=1)(A=m[P])=="'"?y?(N=y.join(""),y=void 0):y=[]:y?y.push(A):A=="{"?(T.push([_,N]),_={},N=void 0):A=="}"?((v=T.pop())[0][v[1]]=_,N=void 0,_=v[0]):A=="-"?w=-1:N===void 0?n.hasOwnProperty(A)?(D+=n[A],N=parseInt(D,16)*w,w=1,D=""):D+=A:n.hasOwnProperty(A)?(k+=n[A],_[N]=parseInt(k,16)*w,w=1,N=void 0,k=""):k+=A;return S},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var y=m.font,v=p.Unicode[y.postScriptName];v&&(y.metadata.Unicode={},y.metadata.Unicode.widths=v.widths,y.metadata.Unicode.kerning=v.kerning);var N=c.Unicode[y.postScriptName];N&&(y.metadata.Unicode.encoding=N,y.encoding=N.codePages[0])}])})(We.API),(function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(ts(a)),s.metadata=t.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(We),(function(t){function e(){return(Je.canvg?Promise.resolve(Je.canvg):Il(()=>import("./index.es-BhWgyJ9m.js"),__vite__mapDeps([0,1,2,3]))).catch((function(n){return Promise.reject(new Error("Could not load canvg: "+n))})).then((function(n){return n.default?n.default:n}))}We.API.addSvgAsImage=function(n,r,i,o,s,a,l,c){if(isNaN(r)||isNaN(i))throw At.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(s))throw At.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=o,p.height=s;var m=p.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,p.width,p.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return e().then((function(N){return N.fromString(m,n,y)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(N){return N.render(y)})).then((function(){v.addImage(p.toDataURL("image/jpeg",1),r,i,o,s,l,c)}))}})(),We.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},We.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],c=0,p=0,m=0;function y(N,A){var S,w=!1;for(S=0;S<N.length;S+=1)N[S]===A&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var v=a.length;for(m=0;m<v;m+=1)n[a[m]].value=n[a[m]].defaultValue,n[a[m]].explicitSet=!1}if(bt(t)==="object"){for(i in t)if(o=t[i],y(a,i)&&o!==void 0){if(n[i].type==="boolean"&&typeof o=="boolean")n[i].value=o;else if(n[i].type==="name"&&y(n[i].valueSet,o))n[i].value=o;else if(n[i].type==="integer"&&Number.isInteger(o))n[i].value=o;else if(n[i].type==="array"){for(c=0;c<o.length;c+=1)if(r=!0,o[c].length===1&&typeof o[c][0]=="number")l.push(String(o[c]-1));else if(o[c].length>1){for(p=0;p<o[c].length;p+=1)typeof o[c][p]!="number"&&(r=!1);r===!0&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var N,A=[];for(N in n)n[N].explicitSet===!0&&(n[N].type==="name"?A.push("/"+N+" /"+n[N].value):A.push("/"+N+" "+n[N].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=o.length+s.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(We.API),(function(t){var e=t.API,n=e.pdfEscape16=function(o,s){for(var a,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],p=[""],m=0,y=o.length;m<y;++m){if(a=s.metadata.characterToGlyph(o.charCodeAt(m)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(m),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return p.join("");a=a.toString(16),p.push(c[4-a.length],a)}return p.join("")},r=function(o){var s,a,l,c,p,m,y;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],m=0,y=(a=Object.keys(o).sort((function(v,N){return v-N}))).length;m<y;m++)s=a[m],l.length>=100&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(c=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,p=s.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var m=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),v="",N=0;N<y.length;N++)v+=String.fromCharCode(y[N]);var A=c();p({data:v,addLength1:!0,objectId:A}),l("endobj");var S=c();p({data:r(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var w=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+co(a.fontName)),l("/FontFile2 "+A+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var _=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+co(a.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(m)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+co(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+_+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,p=s.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var m=a.metadata.rawData,y="",v=0;v<m.length;v++)y+=String.fromCharCode(m[v]);var N=c();p({data:y,addLength1:!0,objectId:N}),l("endobj");var A=c();p({data:r(a.metadata.toUnicode),addLength1:!0,objectId:A}),l("endobj");var S=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+N+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+co(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var w=0;w<a.metadata.hmtx.widths.length;w++)a.metadata.hmtx.widths[w]=parseInt(a.metadata.hmtx.widths[w]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+co(a.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",l=o.x,c=o.y,p=o.options||{},m=o.mutex||{},y=m.pdfEscape,v=m.activeFontKey,N=m.fonts,A=v,S="",w=0,_="",T=N[A].encoding;if(N[A].encoding!=="Identity-H")return{text:a,x:l,y:c,options:p,mutex:m};for(_=a,A=v,Array.isArray(a)&&(_=a[0]),w=0;w<_.length;w+=1)N[A].metadata.hasOwnProperty("cmap")&&(s=N[A].metadata.cmap.unicode.codeMap[_[w].charCodeAt(0)]),s||_[w].charCodeAt(0)<256&&N[A].metadata.hasOwnProperty("Unicode")?S+=_[w]:S+="";var D="";return parseInt(A.slice(1))<14||T==="WinAnsiEncoding"?D=y(S,A).split("").map((function(k){return k.charCodeAt(0).toString(16)})).join(""):T==="Identity-H"&&(D=n(S,N[A])),m.isHex=!0,{text:D,x:l,y:c,options:p,mutex:m}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],l={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?a.push([i(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):a.push(i(Object.assign({},l,{text:s[c]})).text);o.text=a}else o.text=i(Object.assign({},l,{text:s})).text}])})(We),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(We.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,o,s,a,l,c,p,m=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,T=0;this.__bidiEngine__={};var D=function(I){var E=I.charCodeAt(),z=E>>8,K=A[z];return K!==void 0?m[256*K+(255&E)]:z===252||z===253?"AL":w.test(z)?"L":z===8?"R":"N"},k=function(I){for(var E,z=0;z<I.length;z++){if((E=D(I.charAt(z)))==="L")return!1;if(E==="R")return!0}return!1},F=function(I,E,z,K){var ie,q,L,G,Y=E[K];switch(Y){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(Y="AN");break;case"AL":_=!0,Y="R";break;case"WS":Y="N";break;case"CS":K<1||K+1>=E.length||(ie=z[K-1])!=="EN"&&ie!=="AN"||(q=E[K+1])!=="EN"&&q!=="AN"?Y="N":_&&(q="AN"),Y=q===ie?q:"N";break;case"ES":Y=(ie=K>0?z[K-1]:"B")==="EN"&&K+1<E.length&&E[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&z[K-1]==="EN"){Y="EN";break}if(_){Y="N";break}for(L=K+1,G=E.length;L<G&&E[L]==="ET";)L++;Y=L<G&&E[L]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(G=E.length,L=K+1;L<G&&E[L]==="NSM";)L++;if(L<G){var ne=I[K],ue=ne>=1425&&ne<=2303||ne===64286;if(ie=E[L],ue&&(ie==="R"||ie==="AL")){Y="R";break}}}Y=K<1||(ie=E[K-1])==="B"?"N":z[K-1];break;case"B":_=!1,i=!0,Y=T;break;case"S":o=!0,Y="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":Y="N"}return Y},P=function(I,E,z){var K=I.split("");return z&&M(K,z,{hiLevel:T}),K.reverse(),E&&E.reverse(),K.join("")},M=function(I,E,z){var K,ie,q,L,G,Y=-1,ne=I.length,ue=0,R=[],V=T?v:y,X=[];for(_=!1,i=!1,o=!1,ie=0;ie<ne;ie++)X[ie]=D(I[ie]);for(q=0;q<ne;q++){if(G=ue,R[q]=F(I,X,R,q),K=240&(ue=V[G][N[R[q]]]),ue&=15,E[q]=L=V[ue][5],K>0)if(K===16){for(ie=Y;ie<q;ie++)E[ie]=1;Y=-1}else Y=-1;if(V[ue][6])Y===-1&&(Y=q);else if(Y>-1){for(ie=Y;ie<q;ie++)E[ie]=L;Y=-1}X[q]==="B"&&(E[q]=0),z.hiLevel|=L}o&&(function(Q,ee,se){for(var de=0;de<se;de++)if(Q[de]==="S"){ee[de]=T;for(var pe=de-1;pe>=0&&Q[pe]==="WS";pe--)ee[pe]=T}})(X,E,ne)},j=function(I,E,z,K,ie){if(!(ie.hiLevel<I)){if(I===1&&T===1&&!i)return E.reverse(),void(z&&z.reverse());for(var q,L,G,Y,ne=E.length,ue=0;ue<ne;){if(K[ue]>=I){for(G=ue+1;G<ne&&K[G]>=I;)G++;for(Y=ue,L=G-1;Y<L;Y++,L--)q=E[Y],E[Y]=E[L],E[L]=q,z&&(q=z[Y],z[Y]=z[L],z[L]=q);ue=G}ue++}}},$=function(I,E,z){var K=I.split(""),ie={hiLevel:T};return z||(z=[]),M(K,z,ie),(function(q,L,G){if(G.hiLevel!==0&&p)for(var Y,ne=0;ne<q.length;ne++)L[ne]===1&&(Y=S.indexOf(q[ne]))>=0&&(q[ne]=S[Y+1])})(K,z,ie),j(2,K,E,z,ie),j(1,K,E,z,ie),K.join("")};return this.__bidiEngine__.doBidiReorder=function(I,E,z){if((function(ie,q){if(q)for(var L=0;L<ie.length;L++)q[L]=L;a===void 0&&(a=k(ie)),c===void 0&&(c=k(ie))})(I,E),s||!l||c)if(s&&l&&a^c)T=a?1:0,I=P(I,E,z);else if(!s&&l&&c)T=a?1:0,I=$(I,E,z),I=P(I,E);else if(!s||a||l||c){if(s&&!l&&a^c)I=P(I,E),a?(T=0,I=$(I,E,z)):(T=1,I=$(I,E,z),I=P(I,E));else if(s&&a&&!l&&c)T=1,I=$(I,E,z),I=P(I,E);else if(!s&&!l&&a^c){var K=p;a?(T=1,I=$(I,E,z),T=0,p=!1,I=$(I,E,z),p=K):(T=0,I=$(I,E,z),I=P(I,E),T=1,p=!1,I=$(I,E,z),p=K,I=P(I,E))}}else T=0,I=$(I,E,z);else T=a?1:0,I=$(I,E,z);return I},this.__bidiEngine__.setOptions=function(I){I&&(s=I.isInputVisual,l=I.isOutputVisual,a=I.isInputRtl,c=I.isOutputRtl,p=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,o=(r.x,r.y,r.options||{}),s=(r.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([n.doBidiReorder(i[a])]);r.text=s}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])})(We),We.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new ii(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new oy(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new zv(this.contents),this.head=new $v(this),this.name=new Qv(this),this.cmap=new nh(this),this.toUnicode={},this.hhea=new Jv(this),this.maxp=new Zv(this),this.hmtx=new ey(this),this.post=new Kv(this),this.os2=new Yv(this),this.loca=new iy(this),this.glyf=new ty(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,l,c;for(c=[],s=0,a=(l=this.bbox).length;s<a;s++)e=l[s],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(n=i>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return s*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var ir,ii=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,o,s,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],o.push(this.writeByte(n));return o},t})(),zv=(function(){var t;function e(n){var r,i,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,o,s,a,l,c,p,m,y,v,N,A;for(A in v=Object.keys(n).length,l=Math.log(2),m=16*Math.floor(Math.log(v)/l),s=Math.floor(m/l),p=16*v-m,(i=new ii).writeInt(this.scalarType),i.writeShort(v),i.writeShort(m),i.writeShort(s),i.writeShort(p),o=16*v,c=i.pos+o,a=null,N=[],n)for(y=n[A],i.writeString(A),i.writeInt(t(y)),i.writeInt(c),i.writeInt(y.length),N=N.concat(y),A==="head"&&(a=c),c+=y.length;c%4;)N.push(0),c++;return i.write(N),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,o,s;for(n=rh.call(n);n.length%4;)n.push(0);for(o=new ii(n),i=0,r=0,s=n.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),Wv={}.hasOwnProperty,yr=function(t,e){for(var n in e)Wv.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};ir=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var $v=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new ii).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e})(),Bd=(function(){function t(e,n){var r,i,o,s,a,l,c,p,m,y,v,N,A,S,w,_,T;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(v=e.readUInt16(),y=v/2,e.pos+=6,o=(function(){var D,k;for(k=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)k.push(e.readUInt16());return k})(),e.pos+=2,A=(function(){var D,k;for(k=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)k.push(e.readUInt16());return k})(),c=(function(){var D,k;for(k=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)k.push(e.readUInt16());return k})(),p=(function(){var D,k;for(k=[],l=D=0;0<=y?D<y:D>y;l=0<=y?++D:--D)k.push(e.readUInt16());return k})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var D,k;for(k=[],l=D=0;0<=i?D<i:D>i;l=0<=i?++D:--D)k.push(e.readUInt16());return k})(),l=w=0,T=o.length;w<T;l=++w)for(S=o[l],r=_=N=A[l];N<=S?_<=S:_>=S;r=N<=S?++_:--_)p[l]===0?s=r+c[l]:(s=a[p[l]/2+(r-N)-(y-l)]||0)!==0&&(s+=c[l]),this.codeMap[r]=65535&s}e.pos=m}return t.encode=function(e,n){var r,i,o,s,a,l,c,p,m,y,v,N,A,S,w,_,T,D,k,F,P,M,j,$,I,E,z,K,ie,q,L,G,Y,ne,ue,R,V,X,Q,ee,se,de,pe,Ne,Ce,Ee;switch(K=new ii,s=Object.keys(e).sort((function(Ie,He){return Ie-He})),n){case"macroman":for(A=0,S=(function(){var Ie=[];for(N=0;N<256;++N)Ie.push(0);return Ie})(),_={0:0},o={},ie=0,Y=s.length;ie<Y;ie++)_[pe=e[i=s[ie]]]==null&&(_[pe]=++A),o[i]={old:e[i],new:_[e[i]]},S[i]=_[e[i]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(S),{charMap:o,subtable:K.data,maxGlyphID:A+1};case"unicode":for(E=[],m=[],T=0,_={},r={},w=c=null,q=0,ne=s.length;q<ne;q++)_[k=e[i=s[q]]]==null&&(_[k]=++T),r[i]={old:k,new:_[k]},a=_[k]-i,w!=null&&a===c||(w&&m.push(w),E.push(i),c=a),w=i;for(w&&m.push(w),m.push(65535),E.push(65535),$=2*(j=E.length),M=2*Math.pow(Math.log(j)/Math.LN2,2),y=Math.log(M/2)/Math.LN2,P=2*j-M,l=[],F=[],v=[],N=L=0,ue=E.length;L<ue;N=++L){if(I=E[N],p=m[N],I===65535){l.push(0),F.push(0);break}if(I-(z=r[I].new)>=32768)for(l.push(0),F.push(2*(v.length+j-N)),i=G=I;I<=p?G<=p:G>=p;i=I<=p?++G:--G)v.push(r[i].new);else l.push(z-I),F.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*j+2*v.length),K.writeUInt16(0),K.writeUInt16($),K.writeUInt16(M),K.writeUInt16(y),K.writeUInt16(P),se=0,R=m.length;se<R;se++)i=m[se],K.writeUInt16(i);for(K.writeUInt16(0),de=0,V=E.length;de<V;de++)i=E[de],K.writeUInt16(i);for(Ne=0,X=l.length;Ne<X;Ne++)a=l[Ne],K.writeUInt16(a);for(Ce=0,Q=F.length;Ce<Q;Ce++)D=F[Ce],K.writeUInt16(D);for(Ee=0,ee=v.length;Ee<ee;Ee++)A=v[Ee],K.writeUInt16(A);return{charMap:r,subtable:K.data,maxGlyphID:T+1}}},t})(),nh=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new Bd(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,o;return r==null&&(r="macroman"),i=Bd.encode(n,r),(o=new ii).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},e})(),Jv=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e})(),Yv=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i})(),this.charRange=(function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e})(),Kv=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var s;for(i=n.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)r=n.readByte(),o.push(this.names.push(n.readString(r)));return o;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],s=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;s=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e})(),Xv=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Qv=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,o,s,a,l,c,p,m,y,v;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},s=m=0,y=i.length;m<y;s=++m)o=i[s],n.pos=o.offset,p=n.readString(o.length),a=new Xv(p,o),c[v=o.nameID]==null&&(c[v]=[]),c[o.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e})(),Zv=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e})(),ey=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,o,s,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,m;for(m=[],r=p=0;0<=o?p<o:p>o;r=0<=o?++p:--p)m.push(n.readInt16());return m})(),this.widths=(function(){var p,m,y,v;for(v=[],p=0,m=(y=this.metrics).length;p<m;p++)s=y[p],v.push(s.advance);return v}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=o?a<o:a>o;r=0<=o?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e})(),rh=[].slice,ty=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,o,s,a,l,c,p,m,y;return n in this.cache?this.cache[n]:(s=this.file.loca,r=this.file.contents,i=s.indexOf(n),(o=s.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new ii(r.read(o))).readShort(),p=l.readShort(),y=l.readShort(),c=l.readShort(),m=l.readShort(),this.cache[n]=a===-1?new ry(l,p,y,c,m):new ny(l,a,p,y,c,m),this.cache[n]))},e.prototype.encode=function(n,r,i){var o,s,a,l,c;for(a=[],s=[],l=0,c=r.length;l<c;l++)o=n[r[l]],s.push(a.length),o&&(a=a.concat(o.encode(i)));return s.push(a.length),{table:a,offsets:s}},e})(),ny=(function(){function t(e,n,r,i,o,s){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),ry=(function(){function t(e,n,r,i,o){var s,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new ii(rh.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),iy=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=2)s.push(2*n.readUInt16());return s}).call(this):(function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=4)s.push(n.readUInt32());return s}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),o=0,s=0,a=0;a<i.length;++a)if(i[a]=o,s<r.length&&r[s]==a){++s,i[a]=o;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(o+=c)}for(var p=new Array(4*i.length),m=0;m<i.length;++m)p[4*m+3]=255&i[m],p[4*m+2]=(65280&i[m])>>8,p[4*m+1]=(16711680&i[m])>>16,p[4*m]=(4278190080&i[m])>>24;return p},e})(),oy=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,o;for(n in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,o,s,a,l;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in n=[],i)(r=i[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in l=this.glyphsFor(n))r=l[o],i[o]=r;return i},t.prototype.encode=function(e,n){var r,i,o,s,a,l,c,p,m,y,v,N,A,S,w;for(i in r=nh.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),v={0:0},w=r.charMap)v[(l=w[i]).old]=l.new;for(N in y=r.maxGlyphID,s)N in v||(v[N]=y++);return p=(function(_){var T,D;for(T in D={},_)D[_[T]]=T;return D})(v),m=Object.keys(p).sort((function(_,T){return _-T})),A=(function(){var _,T,D;for(D=[],_=0,T=m.length;_<T;_++)a=m[_],D.push(p[a]);return D})(),o=this.font.glyf.encode(s,A,v),c=this.font.loca.encode(o.offsets,A),S={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},t})();We.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,o,s;if(Array.isArray(n))return"["+(function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in o=["<<"],n)s=n[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+n},e})();const sy=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:jv,AcroFormAppearance:qe,AcroFormButton:Jt,AcroFormCheckBox:is,AcroFormChoiceField:Ni,AcroFormComboBox:_i,AcroFormEditBox:ns,AcroFormListBox:Si,AcroFormPasswordField:os,AcroFormPushButton:rs,AcroFormRadioButton:Ai,AcroFormTextField:ni,GState:as,ShadingPattern:Qr,TilingPattern:wi,default:We,jsPDF:We},Symbol.toStringTag,{value:"Module"}));var fa={exports:{}};const ay=Hh(sy);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var qd=fa.exports,Od;function ly(){return Od||(Od=1,(function(t,e){(function(r,i){t.exports=i((function(){try{return ay}catch{}})())})(typeof globalThis<"u"?globalThis:typeof qd<"u"?qd:typeof window<"u"?window:typeof self<"u"?self:Vh,function(n){return(function(){var r={172:(function(a,l){var c=this&&this.__extends||(function(){var y=function(v,N){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,S){A.__proto__=S}||function(A,S){for(var w in S)Object.prototype.hasOwnProperty.call(S,w)&&(A[w]=S[w])},y(v,N)};return function(v,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");y(v,N);function A(){this.constructor=v}v.prototype=N===null?Object.create(N):(A.prototype=N.prototype,new A)}})();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var p=(function(){function y(v,N,A){this.table=N,this.pageNumber=N.pageNumber,this.pageCount=this.pageNumber,this.settings=N.settings,this.cursor=A,this.doc=v.getDocument()}return y})();l.HookData=p;var m=(function(y){c(v,y);function v(N,A,S,w,_,T){var D=y.call(this,N,A,T)||this;return D.cell=S,D.row=w,D.column=_,D.section=w.section,D}return v})(p);l.CellHookData=m}),340:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var p=c(4),m=c(136),y=c(744),v=c(776),N=c(664),A=c(972);function S(w){w.API.autoTable=function(){for(var _=[],T=0;T<arguments.length;T++)_[T]=arguments[T];var D;_.length===1?D=_[0]:(console.error("Use of deprecated autoTable initiation"),D=_[2]||{},D.columns=_[0],D.body=_[1]);var k=(0,v.parseInput)(this,D),F=(0,A.createTable)(this,k);return(0,N.drawTable)(this,F),this},w.API.lastAutoTable=!1,w.API.previousAutoTable=!1,w.API.autoTable.previous=!1,w.API.autoTableText=function(_,T,D,k){(0,m.default)(_,T,D,k,this)},w.API.autoTableSetDefaults=function(_){return y.DocHandler.setDefaults(_,this),this},w.autoTableSetDefaults=function(_,T){y.DocHandler.setDefaults(_,T)},w.API.autoTableHtmlToJson=function(_,T){var D;if(T===void 0&&(T=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var k=new y.DocHandler(this),F=(0,p.parseHtml)(k,_,window,T,!1),P=F.head,M=F.body,j=((D=P[0])===null||D===void 0?void 0:D.map(function($){return $.content}))||[];return{columns:j,rows:M,data:M}},w.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var _=this.lastAutoTable;return _&&_.finalY?_.finalY:0},w.API.autoTableAddPageContent=function(_){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),w.API.autoTable.globalDefaults||(w.API.autoTable.globalDefaults={}),w.API.autoTable.globalDefaults.addPageContent=_,this},w.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=S}),136:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(p,m,y,v,N){v=v||{};var A=1.15,S=N.internal.scaleFactor,w=N.internal.getFontSize()/S,_=N.getLineHeightFactor?N.getLineHeightFactor():A,T=w*_,D=/\r\n|\r|\n/g,k="",F=1;if((v.valign==="middle"||v.valign==="bottom"||v.halign==="center"||v.halign==="right")&&(k=typeof p=="string"?p.split(D):p,F=k.length||1),y+=w*(2-A),v.valign==="middle"?y-=F/2*T:v.valign==="bottom"&&(y-=F*T),v.halign==="center"||v.halign==="right"){var P=w;if(v.halign==="center"&&(P*=.5),k&&F>=1){for(var M=0;M<k.length;M++)N.text(k[M],m-N.getStringUnitWidth(k[M])*P,y),y+=T;return N}m-=N.getStringUnitWidth(p)*P}return v.halign==="justify"?N.text(p,m,y,{maxWidth:v.maxWidth||100,align:"justify"}):N.text(p,m,y),N}l.default=c}),420:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(N,A,S){S.applyStyles(A,!0);var w=Array.isArray(N)?N:[N],_=w.map(function(T){return S.getTextWidth(T)}).reduce(function(T,D){return Math.max(T,D)},0);return _}l.getStringWidth=c;function p(N,A,S,w){var _=A.settings.tableLineWidth,T=A.settings.tableLineColor;N.applyStyles({lineWidth:_,lineColor:T});var D=m(_,!1);D&&N.rect(S.x,S.y,A.getWidth(N.pageSize().width),w.y-S.y,D)}l.addTableBorder=p;function m(N,A){var S=N>0,w=A||A===0;return S&&w?"DF":S?"S":w?"F":null}l.getFillStyle=m;function y(N,A){var S,w,_,T;if(N=N||A,Array.isArray(N)){if(N.length>=4)return{top:N[0],right:N[1],bottom:N[2],left:N[3]};if(N.length===3)return{top:N[0],right:N[1],bottom:N[2],left:N[1]};if(N.length===2)return{top:N[0],right:N[1],bottom:N[0],left:N[1]};N.length===1?N=N[0]:N=A}return typeof N=="object"?(typeof N.vertical=="number"&&(N.top=N.vertical,N.bottom=N.vertical),typeof N.horizontal=="number"&&(N.right=N.horizontal,N.left=N.horizontal),{left:(S=N.left)!==null&&S!==void 0?S:A,top:(w=N.top)!==null&&w!==void 0?w:A,right:(_=N.right)!==null&&_!==void 0?_:A,bottom:(T=N.bottom)!==null&&T!==void 0?T:A}):(typeof N!="number"&&(N=A),{top:N,right:N,bottom:N,left:N})}l.parseSpacing=y;function v(N,A){var S=y(A.settings.margin,0);return N.pageSize().width-(S.left+S.right)}l.getPageAvailableWidth=v}),796:(function(a,l){var c=this&&this.__extends||(function(){var v=function(N,A){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,w){S.__proto__=w}||function(S,w){for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(S[_]=w[_])},v(N,A)};return function(N,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");v(N,A);function S(){this.constructor=N}N.prototype=A===null?Object.create(A):(S.prototype=A.prototype,new S)}})();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var p=(function(v){c(N,v);function N(A){var S=v.call(this)||this;return S._element=A,S}return N})(Array);l.HtmlRowInput=p;function m(v){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/v,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=m;function y(v){var N={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return N[v]}l.getTheme=y}),903:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var p=c(420);function m(S,w,_,T,D){var k={},F=1.3333333333333333,P=v(w,function(Y){return D.getComputedStyle(Y).backgroundColor});P!=null&&(k.fillColor=P);var M=v(w,function(Y){return D.getComputedStyle(Y).color});M!=null&&(k.textColor=M);var j=A(T,_);j&&(k.cellPadding=j);var $="borderTopColor",I=F*_,E=T.borderTopWidth;if(T.borderBottomWidth===E&&T.borderRightWidth===E&&T.borderLeftWidth===E){var z=(parseFloat(E)||0)/I;z&&(k.lineWidth=z)}else k.lineWidth={top:(parseFloat(T.borderTopWidth)||0)/I,right:(parseFloat(T.borderRightWidth)||0)/I,bottom:(parseFloat(T.borderBottomWidth)||0)/I,left:(parseFloat(T.borderLeftWidth)||0)/I},k.lineWidth.top||(k.lineWidth.right?$="borderRightColor":k.lineWidth.bottom?$="borderBottomColor":k.lineWidth.left&&($="borderLeftColor"));var K=v(w,function(Y){return D.getComputedStyle(Y)[$]});K!=null&&(k.lineColor=K);var ie=["left","right","center","justify"];ie.indexOf(T.textAlign)!==-1&&(k.halign=T.textAlign),ie=["middle","bottom","top"],ie.indexOf(T.verticalAlign)!==-1&&(k.valign=T.verticalAlign);var q=parseInt(T.fontSize||"");isNaN(q)||(k.fontSize=q/F);var L=y(T);L&&(k.fontStyle=L);var G=(T.fontFamily||"").toLowerCase();return S.indexOf(G)!==-1&&(k.font=G),k}l.parseCss=m;function y(S){var w="";return(S.fontWeight==="bold"||S.fontWeight==="bolder"||parseInt(S.fontWeight)>=700)&&(w="bold"),(S.fontStyle==="italic"||S.fontStyle==="oblique")&&(w+="italic"),w}function v(S,w){var _=N(S,w);if(!_)return null;var T=_.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!T||!Array.isArray(T))return null;var D=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3])],k=parseInt(T[4]);return k===0||isNaN(D[0])||isNaN(D[1])||isNaN(D[2])?null:D}function N(S,w){var _=w(S);return _==="rgba(0, 0, 0, 0)"||_==="transparent"||_==="initial"||_==="inherit"?S.parentElement==null?null:N(S.parentElement,w):_}function A(S,w){var _=[S.paddingTop,S.paddingRight,S.paddingBottom,S.paddingLeft],T=96/(72/w),D=(parseInt(S.lineHeight)-parseInt(S.fontSize))/w/2,k=_.map(function(P){return parseInt(P||"0")/T}),F=(0,p.parseSpacing)(k,0);return D>F.top&&(F.top=D),D>F.bottom&&(F.bottom=D),F}}),744:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},p=(function(){function m(y){this.jsPDFDocument=y,this.userStyles={textColor:y.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:y.internal.getFontSize(),fontStyle:y.internal.getFont().fontStyle,font:y.internal.getFont().fontName,lineWidth:y.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:y.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return m.setDefaults=function(y,v){v===void 0&&(v=null),v?v.__autoTableDocumentDefaults=y:c=y},m.unifyColor=function(y){return Array.isArray(y)?y:typeof y=="number"?[y,y,y]:typeof y=="string"?[y]:null},m.prototype.applyStyles=function(y,v){var N,A,S;v===void 0&&(v=!1),y.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(y.fontStyle);var w=this.jsPDFDocument.internal.getFont(),_=w.fontStyle,T=w.fontName;if(y.font&&(T=y.font),y.fontStyle){_=y.fontStyle;var D=this.getFontList()[T];D&&D.indexOf(_)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(D[0]),_=D[0])}if(this.jsPDFDocument.setFont(T,_),y.fontSize&&this.jsPDFDocument.setFontSize(y.fontSize),!v){var k=m.unifyColor(y.fillColor);k&&(N=this.jsPDFDocument).setFillColor.apply(N,k),k=m.unifyColor(y.textColor),k&&(A=this.jsPDFDocument).setTextColor.apply(A,k),k=m.unifyColor(y.lineColor),k&&(S=this.jsPDFDocument).setDrawColor.apply(S,k),typeof y.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(y.lineWidth)}},m.prototype.splitTextToSize=function(y,v,N){return this.jsPDFDocument.splitTextToSize(y,v,N)},m.prototype.rect=function(y,v,N,A,S){return this.jsPDFDocument.rect(y,v,N,A,S)},m.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},m.prototype.getTextWidth=function(y){return this.jsPDFDocument.getTextWidth(y)},m.prototype.getDocument=function(){return this.jsPDFDocument},m.prototype.setPage=function(y){this.jsPDFDocument.setPage(y)},m.prototype.addPage=function(){return this.jsPDFDocument.addPage()},m.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},m.prototype.getGlobalOptions=function(){return c||{}},m.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},m.prototype.pageSize=function(){var y=this.jsPDFDocument.internal.pageSize;return y.width==null&&(y={width:y.getWidth(),height:y.getHeight()}),y},m.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},m.prototype.getLineHeightFactor=function(){var y=this.jsPDFDocument;return y.getLineHeightFactor?y.getLineHeightFactor():1.15},m.prototype.getLineHeight=function(y){return y/this.scaleFactor()*this.getLineHeightFactor()},m.prototype.pageNumber=function(){var y=this.jsPDFDocument.internal.getCurrentPageInfo();return y?y.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},m})();l.DocHandler=p}),4:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var p=c(903),m=c(796);function y(A,S,w,_,T){var D,k;_===void 0&&(_=!1),T===void 0&&(T=!1);var F;typeof S=="string"?F=w.document.querySelector(S):F=S;var P=Object.keys(A.getFontList()),M=A.scaleFactor(),j=[],$=[],I=[];if(!F)return console.error("Html table could not be found with input: ",S),{head:j,body:$,foot:I};for(var E=0;E<F.rows.length;E++){var z=F.rows[E],K=(k=(D=z==null?void 0:z.parentElement)===null||D===void 0?void 0:D.tagName)===null||k===void 0?void 0:k.toLowerCase(),ie=v(P,M,w,z,_,T);ie&&(K==="thead"?j.push(ie):K==="tfoot"?I.push(ie):$.push(ie))}return{head:j,body:$,foot:I}}l.parseHtml=y;function v(A,S,w,_,T,D){for(var k=new m.HtmlRowInput(_),F=0;F<_.cells.length;F++){var P=_.cells[F],M=w.getComputedStyle(P);if(T||M.display!=="none"){var j=void 0;D&&(j=(0,p.parseCss)(A,P,S,M,w)),k.push({rowSpan:P.rowSpan,colSpan:P.colSpan,styles:j,_element:P,content:N(P)})}}var $=w.getComputedStyle(_);if(k.length>0&&(T||$.display!=="none"))return k}function N(A){var S=A.cloneNode(!0);return S.innerHTML=S.innerHTML.replace(/\n/g,"").replace(/ +/g," "),S.innerHTML=S.innerHTML.split(/<br.*?>/).map(function(w){return w.trim()}).join(`
`),S.innerText||S.textContent||""}}),776:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var p=c(4),m=c(356),y=c(420),v=c(744),N=c(792);function A(F,P){var M=new v.DocHandler(F),j=M.getDocumentOptions(),$=M.getGlobalOptions();(0,N.default)(M,$,j,P);var I=(0,m.assign)({},$,j,P),E;typeof window<"u"&&(E=window);var z=S($,j,P),K=w($,j,P),ie=_(M,I),q=D(M,I,E);return{id:P.tableId,content:q,hooks:K,styles:z,settings:ie}}l.parseInput=A;function S(F,P,M){for(var j={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},$=function(K){if(K==="columnStyles"){var ie=F[K],q=P[K],L=M[K];j.columnStyles=(0,m.assign)({},ie,q,L)}else{var G=[F,P,M],Y=G.map(function(ne){return ne[K]||{}});j[K]=(0,m.assign)({},Y[0],Y[1],Y[2])}},I=0,E=Object.keys(j);I<E.length;I++){var z=E[I];$(z)}return j}function w(F,P,M){for(var j=[F,P,M],$={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},I=0,E=j;I<E.length;I++){var z=E[I];z.didParseCell&&$.didParseCell.push(z.didParseCell),z.willDrawCell&&$.willDrawCell.push(z.willDrawCell),z.didDrawCell&&$.didDrawCell.push(z.didDrawCell),z.willDrawPage&&$.willDrawPage.push(z.willDrawPage),z.didDrawPage&&$.didDrawPage.push(z.didDrawPage)}return $}function _(F,P){var M,j,$,I,E,z,K,ie,q,L,G,Y,ne=(0,y.parseSpacing)(P.margin,40/F.scaleFactor()),ue=(M=T(F,P.startY))!==null&&M!==void 0?M:ne.top,R;P.showFoot===!0?R="everyPage":P.showFoot===!1?R="never":R=(j=P.showFoot)!==null&&j!==void 0?j:"everyPage";var V;P.showHead===!0?V="everyPage":P.showHead===!1?V="never":V=($=P.showHead)!==null&&$!==void 0?$:"everyPage";var X=(I=P.useCss)!==null&&I!==void 0?I:!1,Q=P.theme||(X?"plain":"striped"),ee=!!P.horizontalPageBreak,se=(E=P.horizontalPageBreakRepeat)!==null&&E!==void 0?E:null;return{includeHiddenHtml:(z=P.includeHiddenHtml)!==null&&z!==void 0?z:!1,useCss:X,theme:Q,startY:ue,margin:ne,pageBreak:(K=P.pageBreak)!==null&&K!==void 0?K:"auto",rowPageBreak:(ie=P.rowPageBreak)!==null&&ie!==void 0?ie:"auto",tableWidth:(q=P.tableWidth)!==null&&q!==void 0?q:"auto",showHead:V,showFoot:R,tableLineWidth:(L=P.tableLineWidth)!==null&&L!==void 0?L:0,tableLineColor:(G=P.tableLineColor)!==null&&G!==void 0?G:200,horizontalPageBreak:ee,horizontalPageBreakRepeat:se,horizontalPageBreakBehaviour:(Y=P.horizontalPageBreakBehaviour)!==null&&Y!==void 0?Y:"afterAllRows"}}function T(F,P){var M=F.getLastAutoTable(),j=F.scaleFactor(),$=F.pageNumber(),I=!1;if(M&&M.startPageNumber){var E=M.startPageNumber+M.pageNumber-1;I=E===$}return typeof P=="number"?P:(P==null||P===!1)&&I&&(M==null?void 0:M.finalY)!=null?M.finalY+20/j:null}function D(F,P,M){var j=P.head||[],$=P.body||[],I=P.foot||[];if(P.html){var E=P.includeHiddenHtml;if(M){var z=(0,p.parseHtml)(F,P.html,M,E,P.useCss)||{};j=z.head||j,$=z.body||j,I=z.foot||j}else console.error("Cannot parse html in non browser environment")}var K=P.columns||k(j,$,I);return{columns:K,head:j,body:$,foot:I}}function k(F,P,M){var j=F[0]||P[0]||M[0]||[],$=[];return Object.keys(j).filter(function(I){return I!=="_element"}).forEach(function(I){var E=1,z;Array.isArray(j)?z=j[parseInt(I)]:z=j[I],typeof z=="object"&&!Array.isArray(z)&&(E=(z==null?void 0:z.colSpan)||1);for(var K=0;K<E;K++){var ie=void 0;Array.isArray(j)?ie=$.length:ie=I+(K>0?"_".concat(K):"");var q={dataKey:ie};$.push(q)}}),$}}),792:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(m,y,v,N){for(var A=function(T){T&&typeof T!="object"&&console.error("The options parameter should be of type object, is: "+typeof T),typeof T.extendWidth<"u"&&(T.tableWidth=T.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof T.margins<"u"&&(typeof T.margin>"u"&&(T.margin=T.margins),console.error("Use of deprecated option: margins, use margin instead.")),T.startY&&typeof T.startY!="number"&&(console.error("Invalid value for startY option",T.startY),delete T.startY),!T.didDrawPage&&(T.afterPageContent||T.beforePageContent||T.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),T.didDrawPage=function(I){m.applyStyles(m.userStyles),T.beforePageContent&&T.beforePageContent(I),m.applyStyles(m.userStyles),T.afterPageContent&&T.afterPageContent(I),m.applyStyles(m.userStyles),T.afterPageAdd&&I.pageNumber>1&&I.afterPageAdd(I),m.applyStyles(m.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(I){T[I]&&console.error('The "'.concat(I,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(I){var E=I[0],z=I[1];T[z]&&(console.error("Use of deprecated option ".concat(z,". Use ").concat(E," instead")),T[E]=T[z])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(I){var E=typeof I=="string"?I:I[0],z=typeof I=="string"?I:I[1];typeof T[E]<"u"&&(typeof T.styles[z]>"u"&&(T.styles[z]=T[E]),console.error("Use of deprecated option: "+E+", use the style "+z+" instead."))});for(var D=0,k=["styles","bodyStyles","headStyles","footStyles"];D<k.length;D++){var F=k[D];p(T[F]||{})}for(var P=T.columnStyles||{},M=0,j=Object.keys(P);M<j.length;M++){var $=j[M];p(P[$]||{})}},S=0,w=[y,v,N];S<w.length;S++){var _=w[S];A(_)}}l.default=c;function p(m){m.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),m.minCellHeight||(m.minCellHeight=m.rowHeight)):m.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),m.cellWidth||(m.cellWidth=m.columnWidth))}}),260:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var p=c(796),m=c(172),y=c(420),v=(function(){function w(_,T){this.pageNumber=1,this.pageCount=1,this.id=_.id,this.settings=_.settings,this.styles=_.styles,this.hooks=_.hooks,this.columns=T.columns,this.head=T.head,this.body=T.body,this.foot=T.foot}return w.prototype.getHeadHeight=function(_){return this.head.reduce(function(T,D){return T+D.getMaxCellHeight(_)},0)},w.prototype.getFootHeight=function(_){return this.foot.reduce(function(T,D){return T+D.getMaxCellHeight(_)},0)},w.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},w.prototype.callCellHooks=function(_,T,D,k,F,P){for(var M=0,j=T;M<j.length;M++){var $=j[M],I=new m.CellHookData(_,this,D,k,F,P),E=$(I)===!1;if(D.text=Array.isArray(D.text)?D.text:[D.text],E)return!1}return!0},w.prototype.callEndPageHooks=function(_,T){_.applyStyles(_.userStyles);for(var D=0,k=this.hooks.didDrawPage;D<k.length;D++){var F=k[D];F(new m.HookData(_,this,T))}},w.prototype.callWillDrawPageHooks=function(_,T){for(var D=0,k=this.hooks.willDrawPage;D<k.length;D++){var F=k[D];F(new m.HookData(_,this,T))}},w.prototype.getWidth=function(_){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var T=this.columns.reduce(function(k,F){return k+F.wrappedWidth},0);return T}else{var D=this.settings.margin;return _-D.left-D.right}},w})();l.Table=v;var N=(function(){function w(_,T,D,k,F){F===void 0&&(F=!1),this.height=0,this.raw=_,_ instanceof p.HtmlRowInput&&(this.raw=_._element,this.element=_._element),this.index=T,this.section=D,this.cells=k,this.spansMultiplePages=F}return w.prototype.getMaxCellHeight=function(_){var T=this;return _.reduce(function(D,k){var F;return Math.max(D,((F=T.cells[k.index])===null||F===void 0?void 0:F.height)||0)},0)},w.prototype.hasRowSpan=function(_){var T=this;return _.filter(function(D){var k=T.cells[D.index];return k?k.rowSpan>1:!1}).length>0},w.prototype.canEntireRowFit=function(_,T){return this.getMaxCellHeight(T)<=_},w.prototype.getMinimumRowHeight=function(_,T){var D=this;return _.reduce(function(k,F){var P=D.cells[F.index];if(!P)return 0;var M=T.getLineHeight(P.styles.fontSize),j=P.padding("vertical"),$=j+M;return $>k?$:k},0)},w})();l.Row=N;var A=(function(){function w(_,T,D){var k,F;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=T,this.section=D,this.raw=_;var P=_;_!=null&&typeof _=="object"&&!Array.isArray(_)?(this.rowSpan=_.rowSpan||1,this.colSpan=_.colSpan||1,P=(F=(k=_.content)!==null&&k!==void 0?k:_.title)!==null&&F!==void 0?F:_,_._element&&(this.raw=_._element)):(this.rowSpan=1,this.colSpan=1);var M=P!=null?""+P:"",j=/\r\n|\r|\n/g;this.text=M.split(j)}return w.prototype.getTextPos=function(){var _;if(this.styles.valign==="top")_=this.y+this.padding("top");else if(this.styles.valign==="bottom")_=this.y+this.height-this.padding("bottom");else{var T=this.height-this.padding("vertical");_=this.y+T/2+this.padding("top")}var D;if(this.styles.halign==="right")D=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var k=this.width-this.padding("horizontal");D=this.x+k/2+this.padding("left")}else D=this.x+this.padding("left");return{x:D,y:_}},w.prototype.getContentHeight=function(_,T){T===void 0&&(T=1.15);var D=Array.isArray(this.text)?this.text.length:1,k=this.styles.fontSize/_*T,F=D*k+this.padding("vertical");return Math.max(F,this.styles.minCellHeight)},w.prototype.padding=function(_){var T=(0,y.parseSpacing)(this.styles.cellPadding,0);return _==="vertical"?T.top+T.bottom:_==="horizontal"?T.left+T.right:T[_]},w})();l.Cell=A;var S=(function(){function w(_,T,D){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=_,this.raw=T,this.index=D}return w.prototype.getMaxCustomCellWidth=function(_){for(var T=0,D=0,k=_.allRows();D<k.length;D++){var F=k[D],P=F.cells[this.index];P&&typeof P.styles.cellWidth=="number"&&(T=Math.max(T,P.styles.cellWidth))}return T},w})();l.Column=S}),356:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(p,m,y,v,N){if(p==null)throw new TypeError("Cannot convert undefined or null to object");for(var A=Object(p),S=1;S<arguments.length;S++){var w=arguments[S];if(w!=null)for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(A[_]=w[_])}return A}l.assign=c}),972:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var p=c(744),m=c(260),y=c(324),v=c(796),N=c(356);function A(F,P){var M=new p.DocHandler(F),j=S(P,M.scaleFactor()),$=new m.Table(P,j);return(0,y.calculateWidths)(M,$),M.applyStyles(M.userStyles),$}l.createTable=A;function S(F,P){var M=F.content,j=D(M.columns);if(M.head.length===0){var $=_(j,"head");$&&M.head.push($)}if(M.foot.length===0){var $=_(j,"foot");$&&M.foot.push($)}var I=F.settings.theme,E=F.styles;return{columns:j,head:w("head",M.head,j,E,I,P),body:w("body",M.body,j,E,I,P),foot:w("foot",M.foot,j,E,I,P)}}function w(F,P,M,j,$,I){var E={},z=P.map(function(K,ie){for(var q=0,L={},G=0,Y=0,ne=0,ue=M;ne<ue.length;ne++){var R=ue[ne];if(E[R.index]==null||E[R.index].left===0)if(Y===0){var V=void 0;Array.isArray(K)?V=K[R.index-G-q]:V=K[R.dataKey];var X={};typeof V=="object"&&!Array.isArray(V)&&(X=(V==null?void 0:V.styles)||{});var Q=k(F,R,ie,$,j,I,X),ee=new m.Cell(V,Q,F);L[R.dataKey]=ee,L[R.index]=ee,Y=ee.colSpan-1,E[R.index]={left:ee.rowSpan-1,times:Y}}else Y--,G++;else E[R.index].left--,Y=E[R.index].times,q++}return new m.Row(K,ie,F,L)});return z}function _(F,P){var M={};return F.forEach(function(j){if(j.raw!=null){var $=T(P,j.raw);$!=null&&(M[j.dataKey]=$)}}),Object.keys(M).length>0?M:null}function T(F,P){if(F==="head"){if(typeof P=="object")return P.header||P.title||null;if(typeof P=="string"||typeof P=="number")return P}else if(F==="foot"&&typeof P=="object")return P.footer;return null}function D(F){return F.map(function(P,M){var j,$,I;return typeof P=="object"?I=($=(j=P.dataKey)!==null&&j!==void 0?j:P.key)!==null&&$!==void 0?$:M:I=M,new m.Column(I,P,M)})}function k(F,P,M,j,$,I,E){var z=(0,v.getTheme)(j),K;F==="head"?K=$.headStyles:F==="body"?K=$.bodyStyles:F==="foot"&&(K=$.footStyles);var ie=(0,N.assign)({},z.table,z[F],$.styles,K),q=$.columnStyles[P.dataKey]||$.columnStyles[P.index]||{},L=F==="body"?q:{},G=F==="body"&&M%2===0?(0,N.assign)({},z.alternateRow,$.alternateRowStyles):{},Y=(0,v.defaultStyles)(I),ne=(0,N.assign)({},Y,ie,G,L);return(0,N.assign)(ne,E)}}),664:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var p=c(420),m=c(260),y=c(744),v=c(356),N=c(136),A=c(224);function S(q,L){var G=L.settings,Y=G.startY,ne=G.margin,ue={x:ne.left,y:Y},R=L.getHeadHeight(L.columns)+L.getFootHeight(L.columns),V=Y+ne.bottom+R;if(G.pageBreak==="avoid"){var X=L.body,Q=X.reduce(function(de,pe){return de+pe.height},0);V+=Q}var ee=new y.DocHandler(q);(G.pageBreak==="always"||G.startY!=null&&V>ee.pageSize().height)&&(ie(ee),ue.y=ne.top),L.callWillDrawPageHooks(ee,ue);var se=(0,v.assign)({},ue);L.startPageNumber=ee.pageNumber(),G.horizontalPageBreak?w(ee,L,se,ue):(ee.applyStyles(ee.userStyles),(G.showHead==="firstPage"||G.showHead==="everyPage")&&L.head.forEach(function(de){return $(ee,L,de,ue,L.columns)}),ee.applyStyles(ee.userStyles),L.body.forEach(function(de,pe){var Ne=pe===L.body.length-1;j(ee,L,de,Ne,se,ue,L.columns)}),ee.applyStyles(ee.userStyles),(G.showFoot==="lastPage"||G.showFoot==="everyPage")&&L.foot.forEach(function(de){return $(ee,L,de,ue,L.columns)})),(0,p.addTableBorder)(ee,L,se,ue),L.callEndPageHooks(ee,ue),L.finalY=ue.y,q.lastAutoTable=L,q.previousAutoTable=L,q.autoTable&&(q.autoTable.previous=L),ee.applyStyles(ee.userStyles)}l.drawTable=S;function w(q,L,G,Y){var ne=(0,A.calculateAllColumnsCanFitInPage)(q,L),ue=L.settings;if(ue.horizontalPageBreakBehaviour==="afterAllRows")ne.forEach(function(Q,ee){q.applyStyles(q.userStyles),ee>0?K(q,L,G,Y,Q.columns,!0):_(q,L,Y,Q.columns),T(q,L,G,Y,Q.columns),k(q,L,Y,Q.columns)});else for(var R=-1,V=ne[0],X=function(){var Q=R;if(V){q.applyStyles(q.userStyles);var ee=V.columns;R>=0?K(q,L,G,Y,ee,!0):_(q,L,Y,ee),Q=D(q,L,R+1,Y,ee),k(q,L,Y,ee)}var se=Q-R;ne.slice(1).forEach(function(de){q.applyStyles(q.userStyles),K(q,L,G,Y,de.columns,!0),D(q,L,R+1,Y,de.columns,se),k(q,L,Y,de.columns)}),R=Q};R<L.body.length-1;)X()}function _(q,L,G,Y){var ne=L.settings;q.applyStyles(q.userStyles),(ne.showHead==="firstPage"||ne.showHead==="everyPage")&&L.head.forEach(function(ue){return $(q,L,ue,G,Y)})}function T(q,L,G,Y,ne){q.applyStyles(q.userStyles),L.body.forEach(function(ue,R){var V=R===L.body.length-1;j(q,L,ue,V,G,Y,ne)})}function D(q,L,G,Y,ne,ue){q.applyStyles(q.userStyles),ue=ue??L.body.length;var R=Math.min(G+ue,L.body.length),V=-1;return L.body.slice(G,R).forEach(function(X,Q){var ee=G+Q===L.body.length-1,se=z(q,L,ee,Y);X.canEntireRowFit(se,ne)&&($(q,L,X,Y,ne),V=G+Q)}),V}function k(q,L,G,Y){var ne=L.settings;q.applyStyles(q.userStyles),(ne.showFoot==="lastPage"||ne.showFoot==="everyPage")&&L.foot.forEach(function(ue){return $(q,L,ue,G,Y)})}function F(q,L,G){var Y=G.getLineHeight(q.styles.fontSize),ne=q.padding("vertical"),ue=Math.floor((L-ne)/Y);return Math.max(0,ue)}function P(q,L,G,Y){var ne={};q.spansMultiplePages=!0,q.height=0;for(var ue=0,R=0,V=G.columns;R<V.length;R++){var X=V[R],Q=q.cells[X.index];if(Q){Array.isArray(Q.text)||(Q.text=[Q.text]);var ee=new m.Cell(Q.raw,Q.styles,Q.section);ee=(0,v.assign)(ee,Q),ee.text=[];var se=F(Q,L,Y);Q.text.length>se&&(ee.text=Q.text.splice(se,Q.text.length));var de=Y.scaleFactor(),pe=Y.getLineHeightFactor();Q.contentHeight=Q.getContentHeight(de,pe),Q.contentHeight>=L&&(Q.contentHeight=L,ee.styles.minCellHeight-=L),Q.contentHeight>q.height&&(q.height=Q.contentHeight),ee.contentHeight=ee.getContentHeight(de,pe),ee.contentHeight>ue&&(ue=ee.contentHeight),ne[X.index]=ee}}var Ne=new m.Row(q.raw,-1,q.section,ne,!0);Ne.height=ue;for(var Ce=0,Ee=G.columns;Ce<Ee.length;Ce++){var X=Ee[Ce],ee=Ne.cells[X.index];ee&&(ee.height=Ne.height);var Q=q.cells[X.index];Q&&(Q.height=q.height)}return Ne}function M(q,L,G,Y){var ne=q.pageSize().height,ue=Y.settings.margin,R=ue.top+ue.bottom,V=ne-R;L.section==="body"&&(V-=Y.getHeadHeight(Y.columns)+Y.getFootHeight(Y.columns));var X=L.getMinimumRowHeight(Y.columns,q),Q=X<G;if(X>V)return console.error("Will not be able to print row ".concat(L.index," correctly since it's minimum height is larger than page height")),!0;if(!Q)return!1;var ee=L.hasRowSpan(Y.columns),se=L.getMaxCellHeight(Y.columns)>V;return se?(ee&&console.error("The content of row ".concat(L.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ee||Y.settings.rowPageBreak==="avoid")}function j(q,L,G,Y,ne,ue,R){var V=z(q,L,Y,ue);if(G.canEntireRowFit(V,R))$(q,L,G,ue,R);else if(M(q,G,V,L)){var X=P(G,V,L,q);$(q,L,G,ue,R),K(q,L,ne,ue,R),j(q,L,X,Y,ne,ue,R)}else K(q,L,ne,ue,R),j(q,L,G,Y,ne,ue,R)}function $(q,L,G,Y,ne){Y.x=L.settings.margin.left;for(var ue=0,R=ne;ue<R.length;ue++){var V=R[ue],X=G.cells[V.index];if(!X){Y.x+=V.width;continue}q.applyStyles(X.styles),X.x=Y.x,X.y=Y.y;var Q=L.callCellHooks(q,L.hooks.willDrawCell,X,G,V,Y);if(Q===!1){Y.x+=V.width;continue}I(q,X,Y);var ee=X.getTextPos();(0,N.default)(X.text,ee.x,ee.y,{halign:X.styles.halign,valign:X.styles.valign,maxWidth:Math.ceil(X.width-X.padding("left")-X.padding("right"))},q.getDocument()),L.callCellHooks(q,L.hooks.didDrawCell,X,G,V,Y),Y.x+=V.width}Y.y+=G.height}function I(q,L,G){var Y=L.styles;if(q.getDocument().setFillColor(q.getDocument().getFillColor()),typeof Y.lineWidth=="number"){var ne=(0,p.getFillStyle)(Y.lineWidth,Y.fillColor);ne&&q.rect(L.x,G.y,L.width,L.height,ne)}else typeof Y.lineWidth=="object"&&(Y.fillColor&&q.rect(L.x,G.y,L.width,L.height,"F"),E(q,L,G,Y.lineWidth))}function E(q,L,G,Y){var ne,ue,R,V;Y.top&&(ne=G.x,ue=G.y,R=G.x+L.width,V=G.y,Y.right&&(R+=.5*Y.right),Y.left&&(ne-=.5*Y.left),X(Y.top,ne,ue,R,V)),Y.bottom&&(ne=G.x,ue=G.y+L.height,R=G.x+L.width,V=G.y+L.height,Y.right&&(R+=.5*Y.right),Y.left&&(ne-=.5*Y.left),X(Y.bottom,ne,ue,R,V)),Y.left&&(ne=G.x,ue=G.y,R=G.x,V=G.y+L.height,Y.top&&(ue-=.5*Y.top),Y.bottom&&(V+=.5*Y.bottom),X(Y.left,ne,ue,R,V)),Y.right&&(ne=G.x+L.width,ue=G.y,R=G.x+L.width,V=G.y+L.height,Y.top&&(ue-=.5*Y.top),Y.bottom&&(V+=.5*Y.bottom),X(Y.right,ne,ue,R,V));function X(Q,ee,se,de,pe){q.getDocument().setLineWidth(Q),q.getDocument().line(ee,se,de,pe,"S")}}function z(q,L,G,Y){var ne=L.settings.margin.bottom,ue=L.settings.showFoot;return(ue==="everyPage"||ue==="lastPage"&&G)&&(ne+=L.getFootHeight(L.columns)),q.pageSize().height-Y.y-ne}function K(q,L,G,Y,ne,ue){ne===void 0&&(ne=[]),ue===void 0&&(ue=!1),q.applyStyles(q.userStyles),L.settings.showFoot==="everyPage"&&!ue&&L.foot.forEach(function(V){return $(q,L,V,Y,ne)}),L.callEndPageHooks(q,Y);var R=L.settings.margin;(0,p.addTableBorder)(q,L,G,Y),ie(q),L.pageNumber++,L.pageCount++,Y.x=R.left,Y.y=R.top,G.y=R.top,L.callWillDrawPageHooks(q,Y),L.settings.showHead==="everyPage"&&(L.head.forEach(function(V){return $(q,L,V,Y,ne)}),q.applyStyles(q.userStyles))}l.addPage=K;function ie(q){var L=q.pageNumber();q.setPage(L+1);var G=q.pageNumber();return G===L?(q.addPage(),!0):!1}}),224:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var p=c(420);function m(v,N,A){var S;A===void 0&&(A={});var w=(0,p.getPageAvailableWidth)(v,N),_=new Map,T=[],D=[],k=[];N.settings.horizontalPageBreakRepeat,Array.isArray(N.settings.horizontalPageBreakRepeat)?k=N.settings.horizontalPageBreakRepeat:(typeof N.settings.horizontalPageBreakRepeat=="string"||typeof N.settings.horizontalPageBreakRepeat=="number")&&(k=[N.settings.horizontalPageBreakRepeat]),k.forEach(function(j){var $=N.columns.find(function(I){return I.dataKey===j||I.index===j});$&&!_.has($.index)&&(_.set($.index,!0),T.push($.index),D.push(N.columns[$.index]),w-=$.wrappedWidth)});for(var F=!0,P=(S=A==null?void 0:A.start)!==null&&S!==void 0?S:0;P<N.columns.length;){if(_.has(P)){P++;continue}var M=N.columns[P].wrappedWidth;if(F||w>=M)F=!1,T.push(P),D.push(N.columns[P]),w-=M;else break;P++}return{colIndexes:T,columns:D,lastIndex:P-1}}function y(v,N){for(var A=[],S=0;S<N.columns.length;S++){var w=m(v,N,{start:S});w.columns.length&&(A.push(w),S=w.lastIndex)}return A}l.calculateAllColumnsCanFitInPage=y}),324:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var p=c(420);function m(T,D){y(T,D);var k=[],F=0;D.columns.forEach(function(M){var j=M.getMaxCustomCellWidth(D);j?M.width=j:(M.width=M.wrappedWidth,k.push(M)),F+=M.width});var P=D.getWidth(T.pageSize().width)-F;P&&(P=v(k,P,function(M){return Math.max(M.minReadableWidth,M.minWidth)})),P&&(P=v(k,P,function(M){return M.minWidth})),P=Math.abs(P),!D.settings.horizontalPageBreak&&P>.1/T.scaleFactor()&&(P=P<1?P:Math.round(P),console.warn("Of the table content, ".concat(P," units width could not fit page"))),A(D),S(D,T),N(D)}l.calculateWidths=m;function y(T,D){var k=T.scaleFactor(),F=D.settings.horizontalPageBreak,P=(0,p.getPageAvailableWidth)(T,D);D.allRows().forEach(function(M){for(var j=0,$=D.columns;j<$.length;j++){var I=$[j],E=M.cells[I.index];if(E){var z=D.hooks.didParseCell;D.callCellHooks(T,z,E,M,I,null);var K=E.padding("horizontal");E.contentWidth=(0,p.getStringWidth)(E.text,E.styles,T)+K;var ie=(0,p.getStringWidth)(E.text.join(" ").split(/[^\S\u00A0]+/),E.styles,T);if(E.minReadableWidth=ie+E.padding("horizontal"),typeof E.styles.cellWidth=="number")E.minWidth=E.styles.cellWidth,E.wrappedWidth=E.styles.cellWidth;else if(E.styles.cellWidth==="wrap"||F===!0)E.contentWidth>P?(E.minWidth=P,E.wrappedWidth=P):(E.minWidth=E.contentWidth,E.wrappedWidth=E.contentWidth);else{var q=10/k;E.minWidth=E.styles.minCellWidth||q,E.wrappedWidth=E.contentWidth,E.minWidth>E.wrappedWidth&&(E.wrappedWidth=E.minWidth)}}}}),D.allRows().forEach(function(M){for(var j=0,$=D.columns;j<$.length;j++){var I=$[j],E=M.cells[I.index];if(E&&E.colSpan===1)I.wrappedWidth=Math.max(I.wrappedWidth,E.wrappedWidth),I.minWidth=Math.max(I.minWidth,E.minWidth),I.minReadableWidth=Math.max(I.minReadableWidth,E.minReadableWidth);else{var z=D.styles.columnStyles[I.dataKey]||D.styles.columnStyles[I.index]||{},K=z.cellWidth||z.minCellWidth;K&&typeof K=="number"&&(I.minWidth=K,I.wrappedWidth=K)}E&&(E.colSpan>1&&!I.minWidth&&(I.minWidth=E.minWidth),E.colSpan>1&&!I.wrappedWidth&&(I.wrappedWidth=E.minWidth))}})}function v(T,D,k){for(var F=D,P=T.reduce(function(q,L){return q+L.wrappedWidth},0),M=0;M<T.length;M++){var j=T[M],$=j.wrappedWidth/P,I=F*$,E=j.width+I,z=k(j),K=E<z?z:E;D-=K-j.width,j.width=K}if(D=Math.round(D*1e10)/1e10,D){var ie=T.filter(function(q){return D<0?q.width>k(q):!0});ie.length&&(D=v(ie,D,k))}return D}l.resizeColumns=v;function N(T){for(var D={},k=1,F=T.allRows(),P=0;P<F.length;P++)for(var M=F[P],j=0,$=T.columns;j<$.length;j++){var I=$[j],E=D[I.index];if(k>1)k--,delete M.cells[I.index];else if(E)E.cell.height+=M.height,k=E.cell.colSpan,delete M.cells[I.index],E.left--,E.left<=1&&delete D[I.index];else{var z=M.cells[I.index];if(!z)continue;if(z.height=M.height,z.rowSpan>1){var K=F.length-P,ie=z.rowSpan>K?K:z.rowSpan;D[I.index]={cell:z,left:ie,row:M}}}}}function A(T){for(var D=T.allRows(),k=0;k<D.length;k++)for(var F=D[k],P=null,M=0,j=0,$=0;$<T.columns.length;$++){var I=T.columns[$];if(j-=1,j>1&&T.columns[$+1])M+=I.width,delete F.cells[I.index];else if(P){var E=P;delete F.cells[I.index],P=null,E.width=I.width+M}else{var E=F.cells[I.index];if(!E)continue;if(j=E.colSpan,M=0,E.colSpan>1){P=E,M+=I.width;continue}E.width=I.width+M}}}function S(T,D){for(var k={count:0,height:0},F=0,P=T.allRows();F<P.length;F++){for(var M=P[F],j=0,$=T.columns;j<$.length;j++){var I=$[j],E=M.cells[I.index];if(E){D.applyStyles(E.styles,!0);var z=E.width-E.padding("horizontal");if(E.styles.overflow==="linebreak")E.text=D.splitTextToSize(E.text,z+1/D.scaleFactor(),{fontSize:E.styles.fontSize});else if(E.styles.overflow==="ellipsize")E.text=w(E.text,z,E.styles,D,"...");else if(E.styles.overflow==="hidden")E.text=w(E.text,z,E.styles,D,"");else if(typeof E.styles.overflow=="function"){var K=E.styles.overflow(E.text,z);typeof K=="string"?E.text=[K]:E.text=K}E.contentHeight=E.getContentHeight(D.scaleFactor(),D.getLineHeightFactor());var ie=E.contentHeight/E.rowSpan;E.rowSpan>1&&k.count*k.height<ie*E.rowSpan?k={height:ie,count:E.rowSpan}:k&&k.count>0&&k.height>ie&&(ie=k.height),ie>M.height&&(M.height=ie)}}k.count--}}function w(T,D,k,F,P){return T.map(function(M){return _(M,D,k,F,P)})}l.ellipsize=w;function _(T,D,k,F,P){var M=1e4*F.scaleFactor();if(D=Math.ceil(D*M)/M,D>=(0,p.getStringWidth)(T,k,F))return T;for(;D<(0,p.getStringWidth)(T+P,k,F)&&!(T.length<=1);)T=T.substring(0,T.length-1);return T.trim()+P}}),964:(function(a){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=n})},i={};function o(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,o),c.exports}var s={};return(function(){var a=s;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=o(340),c=o(776),p=o(664),m=o(972),y=o(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return y.Table}});var v=o(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return v.CellHookData}});var N=o(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return N.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return N.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return N.Row}});function A(D){(0,l.default)(D)}a.applyPlugin=A;function S(D,k){var F=(0,c.parseInput)(D,k),P=(0,m.createTable)(D,F);(0,p.drawTable)(D,P)}function w(D,k){var F=(0,c.parseInput)(D,k);return(0,m.createTable)(D,F)}a.__createTable=w;function _(D,k){(0,p.drawTable)(D,k)}a.__drawTable=_;try{var T=o(964);T.jsPDF&&(T=T.jsPDF),A(T)}catch{}a.default=S})(),s})()})})(fa)),fa.exports}ly();const Hd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Vy=({data:t,grandTotals:e,sortConfig:n,onToggleSort:r,showAllPages:i,setShowAllPages:o,onExportPDF:s,isExporting:a,onPreviewImage:l,onNavigate:c,onMonthClick:p})=>{const[m,y]=be.useState(!0),[v,N]=be.useState(!1),[A,S]=be.useState(!0),[w,_]=be.useState(!0),{rowSpans:T,displayRow:D}=be.useMemo(()=>{const F=new Array(t.length).fill(0),P=new Array(t.length).fill(!0);let M=0;for(;M<t.length;){const j=t[M].teamName;let $=1;for(;M+$<t.length&&t[M+$].teamName===j;)$++;F[M]=$,P[M]=!0;for(let I=1;I<$;I++)F[M+I]=0,P[M+I]=!1;M+=$}return{rowSpans:F,displayRow:P}},[t]),k=(F,P)=>{const M=[{key:"index",label:"#"},{key:"teamName",label:" (Team)",sortable:!0,sortKey:"teamName"},{key:"logo",label:"Logo"},{key:"pageName",label:" Page",sortable:!0,sortKey:"pageName"},{key:`total${F}`,label:` (${F})`,sortable:!0,sortKey:F.toLowerCase()},...Hd.map(j=>({key:`${P}_${j}`,label:j}))];return h.jsxs("div",{className:"hidden xl:flex page-card flex-col mb-8 !p-6 border-gray-700/50 shadow-xl overflow-hidden bg-gray-900/40",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("h3",{className:`text-xl font-black flex items-center gap-2 ${F==="Revenue"?"text-blue-300":"text-green-400"}`,children:[h.jsx("span",{className:`w-2 h-6 rounded-full ${F==="Revenue"?"bg-blue-600":"bg-green-600"}`}),"",F==="Revenue"?"":""," Page (Desktop)"]}),h.jsxs("div",{className:"flex items-center gap-2",children:[F==="Revenue"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>o(!i),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${i?"bg-purple-600 border-purple-500 text-white shadow-lg shadow-purple-900/20":"bg-gray-800 border-gray-700 text-gray-400"}`,children:i?"ALL PAGES":"ACTIVE ONLY"}),h.jsxs("button",{onClick:s,disabled:a,className:"btn !py-1 !px-4 text-[10px] font-black bg-red-600/20 border border-red-500/30 text-red-400 hover:bg-red-600 hover:text-white transition-all flex items-center gap-2",children:[a?h.jsx(Pr,{size:"sm"}):h.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"EXPORT PDF"]})]}),h.jsx("button",{onClick:()=>_(!w),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${w?"bg-indigo-600 border-indigo-500 text-white":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"MERGE"}),h.jsx("button",{onClick:()=>S(!A),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${A?"bg-orange-600 border-orange-500 text-white":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"COLOR"}),h.jsx("button",{onClick:()=>N(!v),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${v?"bg-blue-600 border-blue-500 text-white shadow-lg":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"FREEZE"}),h.jsx("button",{onClick:()=>y(!m),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${m?"bg-gray-700 border-gray-600 text-white shadow-lg":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"BORDER"})]})]}),h.jsx("div",{className:`overflow-x-auto custom-scrollbar pb-2 ${m?"border-2 border-white/20 rounded-2xl shadow-[0_0_40px_rgba(0,0,0,0.6)]":""}`,children:h.jsxs("table",{className:`report-table w-full border-separate border-spacing-0 text-sm ${m?"border-collapse":""}`,children:[h.jsx("thead",{className:"bg-[#0f172a] backdrop-blur-md",children:h.jsx("tr",{className:"border-b-2 border-white/20",children:M.map(j=>{let $="",I={};v&&(j.key==="index"?($="sticky left-0 z-30 bg-[#0f172a]",I={width:"45px",minWidth:"45px"}):j.key==="teamName"?($="sticky left-[45px] z-30 bg-[#0f172a] border-r border-white/20 shadow-md",I={minWidth:"130px"}):j.key==="logo"?($="sticky z-30 bg-[#0f172a]",I={left:"175px",width:"50px",minWidth:"50px"}):j.key==="pageName"?($="sticky z-30 bg-[#0f172a] shadow-md",I={left:"225px",minWidth:"160px"}):j.key.includes("total")&&($="sticky z-30 bg-[#0f172a] border-r border-white/20 shadow-lg",I={left:"385px",width:"100px",minWidth:"100px"}));const E=j.key.includes("total")?F==="Revenue"?"bg-blue-900/80":"bg-green-900/80":"";return h.jsx("th",{onClick:()=>j.sortable&&r(j.sortKey),className:`px-4 py-5 whitespace-nowrap text-left font-black uppercase tracking-wider border-b-2 border-white/20 ${m?"border-x border-white/10":""} ${$} ${E} ${j.sortable?"cursor-pointer hover:bg-gray-700":""}`,style:I,children:h.jsxs("div",{className:"flex items-center gap-1",children:[j.label," ",j.sortable&&n.key===j.sortKey&&h.jsx("span",{children:n.direction==="asc"?"":""})]})},j.key)})})}),h.jsx("tbody",{className:"divide-y divide-white/10",children:t.map((j,$)=>{const I=w?D[$]:!0,E=w?T[$]:1,z=Array.from(String(j.teamName)).reduce((L,G)=>L+G.charCodeAt(0),0)%5,ie=[{bg:"bg-blue-500/5",border:"border-l-4 border-l-blue-500"},{bg:"bg-purple-500/5",border:"border-l-4 border-l-purple-500"},{bg:"bg-emerald-500/5",border:"border-l-4 border-l-emerald-500"},{bg:"bg-orange-500/5",border:"border-l-4 border-l-orange-500"},{bg:"bg-pink-500/5",border:"border-l-4 border-l-pink-500"}][z],q=A?ie.bg:"hover:bg-blue-500/5";return h.jsx("tr",{className:`${q} transition-colors group border-b border-white/10`,children:M.map(L=>{const G=`px-4 py-4 lg:py-5 whitespace-nowrap border-white/10 ${m?"border-x border-white/10":""}`;let Y="",ne={};if(v&&(L.key==="index"?(Y="sticky left-0 z-10 bg-[#020617]",ne={width:"45px",minWidth:"45px"}):L.key==="teamName"?(Y="sticky left-[45px] z-10 bg-[#020617] border-r border-white/20 shadow-md",ne={width:"130px",minWidth:"130px"}):L.key==="logo"?(Y="sticky z-10 bg-[#020617]",ne={left:"175px",width:"50px",minWidth:"50px"}):L.key==="pageName"?(Y="sticky z-10 bg-[#020617] shadow-md",ne={left:"225px",minWidth:"160px"}):L.key.includes("total")&&(Y="sticky z-10 bg-[#020617] border-r border-white/20 shadow-lg",ne={left:"385px",width:"100px",minWidth:"100px"})),L.key==="index")return h.jsx("td",{className:`${G} text-center font-bold text-gray-500 ${Y}`,style:ne,children:$+1},L.key);if(L.key==="teamName")return I?h.jsx("td",{rowSpan:E,className:`${G} font-black text-white bg-gray-900/95 align-middle text-center ${Y} ${A?ie.border:""} border-b border-white/10 cursor-pointer hover:text-blue-400`,style:ne,onClick:()=>c("team",j.teamName),children:h.jsx("div",{className:"bg-gray-800/80 py-1 px-3 rounded-xl border border-white/5 shadow-sm inline-block",children:j.teamName})},L.key):null;if(L.key==="logo")return h.jsx("td",{className:`${G} text-center ${Y} border-b border-white/10`,style:ne,children:h.jsx("img",{src:st(j.logoUrl),className:"w-9 h-9 rounded-full border border-gray-700 mx-auto shadow-md cursor-pointer hover:scale-110 transition-transform",alt:"logo",onClick:()=>l(st(j.logoUrl))})},L.key);if(L.key==="pageName")return h.jsx("td",{className:`${G} font-black text-white ${Y} border-b border-white/10 cursor-pointer hover:text-blue-400 hover:underline transition-colors`,style:ne,onClick:()=>c("page",j.pageName),children:j.pageName},L.key);if(L.key.includes("total"))return h.jsxs("td",{className:`${G} text-right font-black ${Y} ${F==="Revenue"?"text-blue-100 bg-blue-600/10 hover:text-blue-300":"text-green-100 bg-green-600/10"} border-b border-white/10 cursor-pointer`,style:ne,onClick:()=>c("page",j.pageName),children:["$",(F==="Revenue"?j.revenue:j.profit).toLocaleString(void 0,{minimumFractionDigits:2})]},L.key);if(L.key.startsWith(P)){const ue=j[L.key]||0,R=F==="Profit"?ue>0?"text-green-400":ue<0?"text-red-400":"text-gray-500":ue>0?"text-blue-300":"text-gray-500",V=Hd.indexOf(L.key.split("_")[1]);return h.jsx("td",{className:`${G} text-right font-bold font-mono ${R} border-b border-white/10 cursor-pointer hover:bg-gray-800 transition-colors`,onClick:()=>p(j.pageName,V),children:ue!==0?`$${ue.toLocaleString(void 0,{minimumFractionDigits:2})}`:"-"},L.key)}return h.jsx("td",{className:`${G} border-b border-white/10`,children:"-"},L.key)})},j.pageName)})}),h.jsx("tfoot",{className:"bg-[#0f172a] font-black border-t-2 border-white/20",children:h.jsx("tr",{className:"border-t-2 border-white/20",children:M.map((j,$)=>{const I=`px-4 py-5 whitespace-nowrap border-t-2 border-white/20 ${m?"border-x border-white/10":""}`;let E="",z={};return v&&(j.key==="index"?(E="sticky left-0 z-30 bg-[#0f172a]",z={width:"45px",minWidth:"45px"}):j.key==="teamName"?(E="sticky left-[45px] z-30 bg-[#0f172a] border-r border-white/20 shadow-md",z={minWidth:"130px"}):j.key==="logo"?(E="sticky z-30 bg-[#0f172a]",z={left:"175px",width:"50px",minWidth:"50px"}):j.key==="pageName"?(E="sticky z-30 bg-[#0f172a] shadow-md",z={left:"225px",minWidth:"160px"}):j.key.includes("total")&&(E="sticky z-30 bg-[#0f172a] border-r border-white/20 shadow-lg",z={left:"385px",width:"100px",minWidth:"100px"})),$===0?h.jsx("td",{className:`${I} uppercase tracking-widest text-white font-black ${E}`,style:z,colSpan:4,children:" (GRAND TOTAL)"},j.key):["teamName","logo","pageName"].includes(j.key)?null:j.key.includes("total")?h.jsxs("td",{className:`${I} text-right ${E} ${F==="Revenue"?"text-blue-300 bg-blue-600/10":"text-green-300 bg-green-600/10"}`,style:z,children:["$",(F==="Revenue"?e.revenue:e.profit).toLocaleString(void 0,{minimumFractionDigits:2})]},j.key):j.key.startsWith(P)?h.jsxs("td",{className:`${I} text-right text-gray-300 font-mono`,children:["$",e[j.key].toLocaleString(void 0,{minimumFractionDigits:2})]},j.key):h.jsx("td",{className:I},j.key)})})})]})})]})};return h.jsxs(h.Fragment,{children:[k("Revenue","rev"),k("Profit","prof")]})},cy=({data:t,dataType:e,rowSpans:n,displayRow:r,MONTHS:i,grandTotals:o,onNavigate:s,onPreviewImage:a,onMonthClick:l})=>h.jsx("div",{className:"bg-[#0f172a] border border-white/10 rounded-[2.5rem] overflow-hidden shadow-2xl animate-fade-in flex flex-col w-full relative",children:h.jsx("div",{className:"overflow-x-auto custom-scrollbar w-full relative",children:h.jsxs("table",{className:"w-max min-w-full text-sm border-separate border-spacing-0",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"h-16 bg-[#0f172a]",children:[h.jsx("th",{className:"sticky left-0 z-30 bg-[#0f172a] px-2 text-center text-gray-500 font-black border-b border-white/10 w-[50px] min-w-[50px] border-r border-white/5",children:"#"}),h.jsx("th",{className:"sticky left-[50px] z-30 bg-[#0f172a] px-4 text-left text-white font-black uppercase tracking-wider border-b border-white/10 w-[110px] min-w-[110px] border-r border-white/5",children:"Team"}),h.jsx("th",{className:"sticky left-[160px] z-30 bg-[#0f172a] px-4 text-left text-white font-black uppercase tracking-wider border-b border-white/10 w-[200px] min-w-[200px] shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] border-r border-white/5",children:"Page Name"}),h.jsxs("th",{className:`px-6 text-right font-black uppercase tracking-wider border-b border-white/10 ${e==="revenue"?"text-blue-300 bg-blue-900/10":"text-green-300 bg-green-900/10"} min-w-[140px]`,children:["Total ",e==="revenue"?"Rev":"Prof"]}),i.map(c=>h.jsx("th",{className:"px-4 text-right text-gray-400 font-bold uppercase border-b border-white/10 min-w-[90px]",children:c},c))]})}),h.jsx("tbody",{className:"divide-y divide-white/5",children:t.map((c,p)=>{const m=Array.from(String(c.teamName)).reduce((S,w)=>S+w.charCodeAt(0),0)%5,v=["bg-blue-500/[0.02]","bg-purple-500/[0.02]","bg-emerald-500/[0.02]","bg-orange-500/[0.02]","bg-pink-500/[0.02]"][m],N="bg-[#111827]",A=e==="revenue"?"rev":"prof";return h.jsxs("tr",{className:`${v} hover:bg-white/5 transition-colors h-16 group`,children:[h.jsx("td",{className:`sticky left-0 z-20 ${N} border-r border-white/5 border-b border-white/5 text-center font-bold text-gray-600`,children:p+1}),r[p]?h.jsx("td",{rowSpan:n[p],className:`sticky left-[50px] z-20 ${N} border-r border-white/5 border-b border-white/5 align-middle px-4 cursor-pointer hover:bg-gray-800`,onClick:()=>s("team",c.teamName),children:h.jsx("div",{className:"font-black text-white bg-gray-800 border border-white/10 px-2.5 py-1.5 rounded-xl inline-block shadow-sm text-[10px] tracking-wide truncate max-w-[90px]",children:c.teamName})}):null,h.jsx("td",{className:`sticky left-[160px] z-20 ${N} border-r border-white/5 border-b border-white/5 shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] px-4 cursor-pointer hover:bg-gray-800`,onClick:()=>s("page",c.pageName),children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-lg p-0.5 bg-gray-800 border border-white/10 flex-shrink-0",onClick:S=>{S.stopPropagation(),a(st(c.logoUrl))},children:h.jsx("img",{src:st(c.logoUrl),className:"w-full h-full rounded-md object-cover",alt:""})}),h.jsx("span",{className:"truncate max-w-[140px] text-xs font-bold text-gray-200 group-hover:text-blue-300 transition-colors",title:c.pageName,children:c.pageName})]})}),h.jsxs("td",{className:`px-6 text-right font-black ${e==="revenue"?"text-blue-400 bg-blue-900/5 group-hover:bg-blue-900/20":"text-emerald-400 bg-emerald-900/5 group-hover:bg-emerald-900/20"} border-r border-white/5 border-b border-white/5 text-sm cursor-pointer`,onClick:()=>s("page",c.pageName),children:["$",(e==="revenue"?c.revenue:c.profit).toLocaleString()]}),i.map((S,w)=>{const _=c[`${A}_${S}`]||0;return h.jsx("td",{className:`px-4 text-right font-mono text-xs border-b border-white/5 cursor-pointer hover:bg-gray-800 transition-colors ${_>0?"text-gray-300 font-bold":"text-gray-700"}`,onClick:()=>l(c.pageName,w),children:_!==0?_.toLocaleString():"-"},S)})]},c.pageName)})}),o&&h.jsx("tfoot",{className:"bg-[#0f172a] font-black border-t-2 border-white/20",children:h.jsxs("tr",{className:"h-16",children:[h.jsx("td",{className:"sticky left-0 bg-[#0f172a] z-30 border-r border-white/5 border-b border-white/5"}),h.jsx("td",{className:"sticky left-[50px] bg-[#0f172a] z-30 border-r border-white/5 border-b border-white/5"}),h.jsx("td",{className:"sticky left-[160px] bg-[#0f172a] z-30 px-4 text-right uppercase tracking-widest text-white shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] border-r border-white/5 border-b border-white/5 text-xs flex items-center justify-end h-16",children:"Grand Total"}),h.jsxs("td",{className:`px-6 text-right ${e==="revenue"?"text-blue-300":"text-green-300"} border-r border-white/5 border-b border-white/5 text-base bg-[#1e293b]`,children:["$",(e==="revenue"?o.revenue:o.profit).toLocaleString()]}),i.map(c=>{const m=o[`${e==="revenue"?"rev":"prof"}_${c}`]||0;return h.jsx("td",{className:"px-4 text-right text-gray-400 font-mono text-[10px] border-b border-white/5 bg-[#0f172a]",children:m!==0?m.toLocaleString():"-"},c)})]})})]})})}),uy=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Gy=({data:t,grandTotals:e,onPreviewImage:n,onNavigate:r,onMonthClick:i})=>{const[o,s]=be.useState("table"),[a,l]=be.useState("revenue"),{rowSpans:c,displayRow:p}=be.useMemo(()=>{if(o!=="table")return{rowSpans:[],displayRow:[]};const m=new Array(t.length).fill(0),y=new Array(t.length).fill(!0);let v=0;for(;v<t.length;){const N=t[v].teamName;let A=1;for(;v+A<t.length&&t[v+A].teamName===N;)A++;m[v]=A,y[v]=!0;for(let S=1;S<A;S++)m[v+S]=0,y[v+S]=!1;v+=A}return{rowSpans:m,displayRow:y}},[t,o]);return h.jsxs("div",{className:"hidden md:block xl:hidden space-y-5 pb-12 px-1",children:[h.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl p-4 rounded-3xl border border-white/10 shadow-2xl flex flex-col sm:flex-row justify-between items-center gap-4 sticky top-20 z-40",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-900/30",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight",children:"Tablet Report"}),h.jsxs("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),t.length," Active Pages"]})]})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("div",{className:"bg-black/40 p-1.5 rounded-2xl border border-white/5 flex",children:[h.jsx("button",{onClick:()=>l("revenue"),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${a==="revenue"?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:"Revenue"}),h.jsx("button",{onClick:()=>l("profit"),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${a==="profit"?"bg-emerald-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:"Profit"})]}),h.jsxs("div",{className:"bg-black/40 p-1.5 rounded-2xl border border-white/5 flex",children:[h.jsx("button",{onClick:()=>s("table"),className:`p-2.5 rounded-xl transition-all ${o==="table"?"bg-gray-700 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),h.jsx("button",{onClick:()=>s("grid"),className:`p-2.5 rounded-xl transition-all ${o==="grid"?"bg-gray-700 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2z"})})})]})]})]}),o==="grid"?h.jsx("div",{className:"grid grid-cols-2 gap-5 animate-fade-in",children:t.map(m=>h.jsxs("div",{className:"bg-gray-800/40 border border-white/10 rounded-[2.5rem] p-6 shadow-xl flex flex-col relative overflow-hidden group hover:border-blue-500/30 transition-all cursor-pointer",onClick:()=>r("page",m.pageName),children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-white/5 to-transparent rounded-bl-[100px] pointer-events-none transition-opacity group-hover:opacity-100 opacity-50"}),h.jsxs("div",{className:"flex items-center gap-5 mb-5 relative z-10",children:[h.jsx("div",{className:"w-14 h-14 rounded-2xl overflow-hidden border-2 border-gray-700 bg-gray-950 p-0.5 flex-shrink-0 shadow-2xl group-hover:scale-105 transition-transform",onClick:y=>{y.stopPropagation(),n(st(m.logoUrl))},children:h.jsx("img",{src:st(m.logoUrl),className:"w-full h-full object-cover rounded-xl",alt:""})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("h4",{className:"text-base font-black text-white truncate leading-tight uppercase tracking-tight group-hover:text-blue-300 transition-colors",children:m.pageName}),h.jsx("span",{className:"text-[10px] bg-blue-900/30 text-blue-300 px-3 py-1 rounded-full border border-blue-500/20 font-black uppercase mt-1.5 inline-block tracking-widest",children:m.teamName})]})]}),h.jsxs("div",{className:"space-y-3 flex-grow relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-2xl border border-white/5 group-hover:bg-blue-600/10 transition-colors",children:[h.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Revenue"}),h.jsxs("span",{className:"text-base font-black text-blue-400 tracking-tight",children:["$",m.revenue.toLocaleString()]})]}),h.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-2xl border border-white/5",children:[h.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Profit"}),h.jsxs("span",{className:"text-base font-black text-emerald-400 tracking-tight",children:["$",m.profit.toLocaleString()]})]})]})]},m.pageName))}):h.jsx(cy,{data:t,dataType:a,rowSpans:c,displayRow:p,MONTHS:uy,grandTotals:e,onNavigate:r,onPreviewImage:n,onMonthClick:i})]})},la=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],zy=({data:t,onPreviewImage:e,onNavigate:n,onMonthClick:r,sortConfig:i,onToggleSort:o})=>{const[s,a]=be.useState(()=>{const c=localStorage.getItem("mobile_view_preference");return c==="card"||c==="table"?c:"table"}),l=c=>{a(c),localStorage.setItem("mobile_view_preference",c)};return h.jsxs("div",{className:"md:hidden space-y-4 pb-12 px-1",children:[h.jsxs("div",{className:"flex justify-between items-center px-2 mb-2",children:[h.jsxs("h3",{className:"text-lg font-black text-white flex items-center gap-2",children:[h.jsx("span",{className:"w-1.5 h-5 bg-indigo-500 rounded-full"}),"Page Report"]}),h.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-xl border border-white/10",children:[h.jsx("button",{onClick:()=>l("card"),className:`p-2 rounded-lg transition-all ${s==="card"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Card View",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})})}),h.jsx("button",{onClick:()=>l("table"),className:`p-2 rounded-lg transition-all ${s==="table"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Table View",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),s==="card"?t.map(c=>{const p=c.orderCount>0?c.revenue/c.orderCount:0;return h.jsxs("div",{className:"bg-gray-800/40 border border-white/10 rounded-[2.5rem] p-6 shadow-xl space-y-5 animate-fade-in-up group relative overflow-hidden active:scale-[0.98] transition-all cursor-pointer",onClick:()=>n("page",c.pageName),children:[h.jsx("div",{className:"flex justify-between items-center border-b border-white/5 pb-4",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden border border-gray-700 bg-gray-950 shadow-inner p-0.5",onClick:m=>{m.stopPropagation(),e(st(c.logoUrl))},children:h.jsx("img",{src:st(c.logoUrl),className:"w-full h-full object-cover rounded-lg",alt:""})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("h4",{className:"text-base font-black text-white truncate leading-tight uppercase tracking-tight",children:c.pageName}),h.jsx("p",{className:"text-[10px] text-indigo-400 font-black uppercase tracking-[0.2em] mt-1",onClick:m=>{m.stopPropagation(),n("team",c.teamName)},children:c.teamName})]})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl border border-white/5",children:[h.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1.5",children:""}),h.jsxs("p",{className:"text-lg font-black text-blue-400 tracking-tighter",children:["$",c.revenue.toLocaleString()]})]}),h.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl border border-white/5",children:[h.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1.5",children:""}),h.jsxs("p",{className:"text-lg font-black text-emerald-400 tracking-tighter",children:["$",c.profit.toLocaleString()]})]})]}),r&&h.jsxs("div",{className:"pt-4 border-t border-white/5",children:[h.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-2 ml-1",children:"Monthly Breakdown"}),h.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 hide-scrollbar",children:[la.map((m,y)=>{const v=c[`rev_${m}`]||0;return v===0?null:h.jsxs("button",{onClick:N=>{N.stopPropagation(),r(c.pageName,y)},className:"flex-shrink-0 bg-gray-900/60 p-2.5 rounded-xl border border-white/5 min-w-[70px] flex flex-col items-center hover:bg-gray-800 hover:border-blue-500/30 transition-all active:scale-95",children:[h.jsx("span",{className:"text-[8px] font-bold text-gray-500 uppercase mb-0.5",children:m}),h.jsxs("span",{className:"text-[10px] font-black text-blue-300",children:["$",v.toLocaleString(void 0,{maximumFractionDigits:0})]})]},m)}),la.every(m=>(c[`rev_${m}`]||0)===0)&&h.jsx("span",{className:"text-[9px] text-gray-600 italic pl-1",children:"No monthly data"})]})]}),h.jsxs("div",{className:"flex items-center justify-between px-1 pt-2 border-t border-white/5",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),h.jsxs("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:[c.orderCount," Orders"]})]}),h.jsxs("span",{className:"text-[10px] font-black text-purple-400 uppercase tracking-widest",children:["AOV: $",p.toFixed(0)]})]}),h.jsx("div",{className:"absolute -right-8 -bottom-8 w-24 h-24 bg-indigo-600/10 rounded-full blur-[40px] pointer-events-none group-hover:bg-indigo-600/20 transition-all duration-700"})]},c.pageName)}):h.jsx("div",{className:"bg-gray-900/60 border border-white/10 rounded-3xl overflow-hidden shadow-2xl animate-fade-in",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-[#0f172a] border-b border-white/10 text-xs text-gray-400 font-bold uppercase tracking-wider",children:[h.jsx("th",{className:"p-3 sticky left-0 z-20 bg-[#0f172a] border-r border-white/10 min-w-[140px] shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)] cursor-pointer hover:bg-gray-800 transition-colors",onClick:()=>o&&o("pageName"),children:h.jsxs("div",{className:"flex items-center gap-1",children:["Page Name",(i==null?void 0:i.key)==="pageName"&&h.jsx("span",{className:"text-blue-400",children:i.direction==="asc"?"":""})]})}),h.jsx("th",{className:"p-3 text-right min-w-[100px] text-blue-300 bg-blue-900/10 cursor-pointer hover:bg-blue-900/20 transition-colors",onClick:()=>o&&o("revenue"),children:h.jsxs("div",{className:"flex items-center justify-end gap-1",children:["Total Rev",(i==null?void 0:i.key)==="revenue"&&h.jsx("span",{className:"text-white",children:i.direction==="asc"?"":""})]})}),la.map(c=>h.jsx("th",{className:"p-3 text-right min-w-[80px]",children:c},c))]})}),h.jsx("tbody",{className:"divide-y divide-white/5 text-xs",children:t.map((c,p)=>h.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[h.jsx("td",{className:"p-3 sticky left-0 z-20 bg-gray-900 border-r border-white/10 shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)]",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-7 h-7 rounded-lg bg-gray-800 border border-white/10 overflow-hidden flex-shrink-0",onClick:m=>{m.stopPropagation(),e(st(c.logoUrl))},children:h.jsx("img",{src:st(c.logoUrl),className:"w-full h-full object-cover",alt:""})}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx("div",{className:"font-black text-white truncate max-w-[120px] leading-tight",onClick:()=>n("page",c.pageName),children:c.pageName}),h.jsx("div",{className:"text-[9px] text-gray-500 font-bold uppercase truncate max-w-[120px]",onClick:()=>n("team",c.teamName),children:c.teamName})]})]})}),h.jsxs("td",{className:"p-3 text-right font-black text-blue-400 bg-blue-900/5",children:["$",c.revenue.toLocaleString()]}),la.map((m,y)=>{const v=c[`rev_${m}`]||0;return h.jsx("td",{className:`p-3 text-right font-mono ${v>0?"text-gray-300 font-bold":"text-gray-700"}`,onClick:()=>r&&r(c.pageName,y),children:v>0?v.toLocaleString():"-"},m)})]},c.pageName))})]})})}),h.jsx("style",{children:`
                .hide-scrollbar::-webkit-scrollbar { display: none; }
                .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `})]})},dy=({product:t,isOpen:e,onClose:n,onConfirm:r,showTagEditor:i=!0})=>{const{refreshData:o}=be.useContext(go),[s,a]=be.useState(""),[l,c]=be.useState(window.innerWidth<768),[p,m]=be.useState(!1),[y,v]=be.useState(!1),[N,A]=be.useState(!1),[S,w]=be.useState(null),_=be.useRef(null);be.useEffect(()=>{const P=()=>c(window.innerWidth<768);return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),be.useEffect(()=>{t&&e&&(a(t.Tags||""),w(t.ImageURL),v(!1))},[t,e]);const T=be.useMemo(()=>{if(!t)return!1;const P=S||t.ImageURL;return P&&!P.includes("placehold.co")&&!P.includes("text=N/A")},[t,S]),D=P=>{if(P.key==="Enter"){P.preventDefault();const M=s.trim();M&&!M.endsWith(",")&&a(M+", ")}},k=async()=>{if(t){A(!0);try{const P=s.split(",").map(M=>M.trim()).filter(M=>M!=="").join(", ");if(P!==(t.Tags||"")){if(!(await fetch(`${ti}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:t.ProductName},newData:{Tags:P}})})).ok)throw new Error("Failed to update product tags");await o(),r(t.ProductName,P)}else r(t.ProductName,P)}catch(P){console.error(P),alert(`Save failed: ${P.message}`),r(t.ProductName,s)}finally{A(!1)}}},F=async P=>{var j;const M=(j=P.target.files)==null?void 0:j[0];if(!(!M||!t)){m(!0),v(!1);try{const $=await Wh(M,.7,1024),I=await Gh($),E=await fetch(`${ti}/api/upload-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileData:I,fileName:M.name,mimeType:$.type})}),z=await E.json();if(!E.ok||z.status!=="success")throw new Error(z.message);const K=z.url;await fetch(`${ti}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:t.ProductName},newData:{ImageURL:K}})}),w(K),v(!0),setTimeout(()=>v(!1),2500),await o()}catch($){alert(`Update Error: ${$.message}`)}finally{m(!1),_.current&&(_.current.value="")}}};return t?h.jsx(tc,{isOpen:e,onClose:n,maxWidth:l?"max-w-[95vw]":"max-w-4xl",children:h.jsxs("div",{className:`
                bg-[#09090b] border border-white/10 overflow-hidden relative flex flex-col
                ${l?"h-[85vh] rounded-[2rem]":"h-[500px] rounded-[2rem] md:flex-row"}
                shadow-2xl transition-all duration-300
            `,children:[h.jsx("div",{className:`
                    relative group flex items-center justify-center bg-black/20
                    ${l?"h-[40%] w-full border-b border-white/5":"w-[40%] h-full border-r border-white/5"}
                `,children:h.jsxs("div",{className:"relative w-full h-full flex items-center justify-center cursor-pointer p-6",onClick:()=>{var P;return!p&&((P=_.current)==null?void 0:P.click())},children:[T?h.jsxs(h.Fragment,{children:[h.jsx("img",{src:st(S||t.ImageURL),className:`
                                        w-full h-full object-contain relative z-10 transition-all duration-500 rounded-xl
                                        ${p?"opacity-30 grayscale blur-sm":"group-hover:scale-105"}
                                    `,alt:t.ProductName}),!p&&!y&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/40 backdrop-blur-[2px] z-20",children:h.jsxs("div",{className:"bg-white/10 px-3 py-1.5 rounded-full border border-white/20 backdrop-blur-md flex items-center gap-2",children:[h.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),h.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-wider",children:"Change"})]})})]}):h.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 text-gray-600 group-hover:text-blue-400 transition-colors",children:[h.jsx("div",{className:"p-4 rounded-full border-2 border-dashed border-gray-700 group-hover:border-blue-500/50 transition-all",children:h.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),h.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Upload Image"})]}),p&&h.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center",children:[h.jsx(Pr,{size:"md"}),h.jsx("span",{className:"text-[9px] font-bold text-gray-400 mt-2 uppercase tracking-wider",children:"Uploading..."})]}),y&&h.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:[h.jsx("div",{className:"w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center shadow-lg mb-2 animate-scale-in",children:h.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),h.jsx("span",{className:"text-[9px] font-bold text-emerald-400 uppercase tracking-widest",children:"Success"})]})]})}),h.jsxs("div",{className:`
                    flex flex-col p-6 md:p-10 relative
                    ${l?"h-[60%] justify-between":"w-[60%] h-full justify-center gap-8"}
                `,children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"px-2 py-1 bg-white/5 rounded text-[10px] font-mono text-gray-400 border border-white/5",children:["#",t.Barcode||"NO-CODE"]}),h.jsxs("span",{className:"px-2 py-1 bg-emerald-500/10 text-emerald-400 rounded text-[10px] font-bold border border-emerald-500/20",children:["$",t.Price.toFixed(2)]})]}),h.jsx("h2",{className:`font-black text-white leading-tight ${l?"text-2xl line-clamp-2":"text-4xl line-clamp-3"}`,children:t.ProductName}),i&&h.jsxs("div",{className:"space-y-2 pt-2",children:[h.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:"Operational Tags"}),h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",value:s,onChange:P=>a(P.target.value),onKeyDown:D,className:"w-full bg-transparent border-b border-gray-700 py-2 text-sm font-medium text-gray-200 focus:border-blue-500 outline-none transition-colors placeholder:text-gray-700",placeholder:"Add tags..."}),h.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 text-[9px] font-bold text-gray-600 opacity-0 group-focus-within:opacity-100 transition-opacity",children:"ENTER"})]})]})]}),h.jsxs("div",{className:"flex gap-3 mt-4",children:[h.jsx("button",{onClick:n,className:"px-6 py-4 rounded-xl border border-white/10 text-gray-400 font-bold text-xs uppercase tracking-wider hover:bg-white/5 hover:text-white transition-all active:scale-95",children:"Cancel"}),h.jsxs("button",{onClick:k,disabled:N,className:"flex-1 px-6 py-4 rounded-xl bg-blue-600 text-white font-bold text-xs uppercase tracking-wider hover:bg-blue-500 transition-all active:scale-95 shadow-lg shadow-blue-900/20 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[N?h.jsx(Pr,{size:"sm"}):"Confirm Selection",!N&&h.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),h.jsx("input",{type:"file",ref:_,className:"hidden",accept:"image/*",onChange:F}),h.jsx("style",{children:`
                    @keyframes scale-in {
                        0% { transform: scale(0); opacity: 0; }
                        60% { transform: scale(1.1); opacity: 1; }
                        100% { transform: scale(1); }
                    }
                    .animate-scale-in { animation: scale-in 0.3s ease-out forwards; }
                `})]})}):null},fy=(t,e)=>{if(!e||!t)return h.jsx("span",{children:t});const n=e.split(" ").filter(Boolean).map(i=>i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));if(n.length===0)return h.jsx("span",{children:t});const r=new RegExp(`(${n.join("|")})`,"gi");return h.jsx(h.Fragment,{children:t.split(r).map((i,o)=>r.test(i)&&i.trim()!==""?h.jsx("strong",{className:"text-yellow-300 bg-yellow-900/50 rounded-sm px-0.5",children:i},o):i)})},hy=(t,e)=>{const n=(t.ProductName||"").toLowerCase(),r=(t.Barcode||"").toLowerCase(),i=`${n} ${r}`,o=e.toLowerCase().trim();if(!o)return 1;const s=o.split(" ").filter(Boolean);if(!s.every(c=>i.includes(c)))return 0;let l=10;return s.forEach(c=>{n.includes(c)&&(l+=20),r.includes(c)&&(l+=10)}),n.startsWith(o)&&(l+=500),l},py=({products:t,selectedProductName:e,onSelect:n,showTagEditor:r=!0})=>{const[i,o]=be.useState(!1),[s,a]=be.useState(""),[l,c]=be.useState(0),[p,m]=be.useState(null),y=be.useRef(null),v=be.useRef(null);be.useEffect(()=>{a(e)},[e]),be.useEffect(()=>{const k=F=>{y.current&&!y.current.contains(F.target)&&(o(!1),a(e))};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[e]);const N=be.useMemo(()=>{const k=s||"";return k.trim()?t.map(F=>({product:F,score:hy(F,k)})).filter(F=>F.score>0).sort((F,P)=>P.score-F.score||F.product.ProductName.localeCompare(P.product.ProductName)).map(F=>F.product):[]},[t,s]),A=be.useMemo(()=>{const k=s.trim();return k?!t.some(F=>F.ProductName.trim().toLowerCase()===k.toLowerCase()):!1},[s,t]),S=be.useMemo(()=>{const k=[...N];return A&&k.unshift({isAddNew:!0,ProductName:s.trim()}),k},[N,A,s]),w=be.useCallback((k,F)=>{var P;n(k,F),a(k),o(!1),m(null),c(0),(P=v.current)==null||P.blur()},[n]),_=k=>{k.isAddNew?w(k.ProductName):(m(k),o(!1))},T=be.useCallback(()=>{var k;n("",""),a(""),o(!0),c(0),(k=v.current)==null||k.focus()},[n]),D=k=>{var P;const F=S.length;if(F!==0)switch(k.key){case"ArrowDown":k.preventDefault(),i||o(!0),c(M=>(M+1)%F);break;case"ArrowUp":k.preventDefault(),i||o(!0),c(M=>(M-1+F)%F);break;case"Enter":if(k.preventDefault(),!i)return;l>-1&&S[l]&&_(S[l]);break;case"Escape":o(!1),a(e),(P=v.current)==null||P.blur();break}};return h.jsxs("div",{className:"relative",ref:y,children:[h.jsxs("div",{className:"relative group",children:[h.jsx("input",{ref:v,type:"text",className:"form-input !pr-16 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:"...",value:s,onChange:k=>{a(k.target.value),o(!0),c(0)},onFocus:()=>o(!0),onKeyDown:D}),h.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[s&&h.jsx("button",{type:"button",onClick:T,className:"text-gray-500 hover:text-white text-2xl",children:""}),h.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),i&&h.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden animate-fade-in-down max-h-80 overflow-y-auto custom-scrollbar",children:h.jsx("ul",{className:"p-2 space-y-1",children:S.length===0?h.jsx("li",{className:"p-4 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:""}):S.map((k,F)=>{if("isAddNew"in k&&k.isAddNew)return h.jsxs("li",{className:`p-3.5 rounded-2xl cursor-pointer flex items-center gap-4 transition-all ${l===F?"bg-blue-600 text-white":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>_(k),children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center border border-blue-500/30",children:h.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"})})}),h.jsx("div",{className:"min-w-0",children:h.jsxs("p",{className:"font-black text-sm leading-tight",children:[" ",h.jsxs("span",{className:"text-yellow-400",children:['"',k.ProductName,'"']})]})})]},"add-new");const P=k;return h.jsxs("li",{className:`p-2.5 rounded-2xl cursor-pointer flex items-center gap-3 transition-all ${l===F?"bg-blue-600 text-white shadow-lg":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>_(P),children:[h.jsx("img",{src:st(P.ImageURL),className:"w-12 h-12 rounded-xl object-cover border border-white/10",alt:""}),h.jsxs("div",{className:"min-w-0 flex-grow",children:[h.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:fy(P.ProductName,s)}),h.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:h.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-md border border-blue-500/10",children:["$",P.Price.toFixed(2)]})})]})]},P.ProductName)})})}),h.jsx(dy,{product:p,isOpen:!!p,onClose:()=>m(null),onConfirm:w,showTagEditor:r})]})},gy=t=>{if(!t)return"";const e=t.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(e){const i=e[1],o=e[2].padStart(2,"0"),s=e[3].padStart(2,"0"),a=e[4].padStart(2,"0"),l=e[5].padStart(2,"0");return`${i}-${o}-${s}T${a}:${l}`}const n=new Date(t);if(isNaN(n.getTime()))return"";const r=i=>i.toString().padStart(2,"0");return`${n.getFullYear()}-${r(n.getMonth()+1)}-${r(n.getDate())}T${r(n.getHours())}:${r(n.getMinutes())}`},so=(t,e)=>{const n=t.reduce((s,a)=>s+(a.total||0),0),r=n+e,i=t.reduce((s,a)=>s+(a.cost||0)*(a.quantity||0),0),o=t.reduce((s,a)=>s+(a.originalPrice-a.finalPrice)*a.quantity,0);return{Subtotal:n,"Grand Total":r,"Total Product Cost ($)":i,"Discount ($)":o}},my=(t,e)=>{var l,c;const n=[];["Customer Name","Customer Phone","Location","Address Details","Grand Total","Payment Status","Internal Shipping Method","Internal Shipping Details","Internal Cost","Discount ($)","Shipping Fee (Customer)","Fulfillment Store"].forEach(p=>{const m=t[p],y=e[p],v=m==null?"":String(m),N=y==null?"":String(y);v!=N&&n.push({field:p,oldValue:v,newValue:N})});const i=JSON.stringify(t.Products||[]),o=JSON.stringify(e.Products||[]);i!==o&&n.push({field:"Products List",oldValue:`${((l=t.Products)==null?void 0:l.length)||0} items`,newValue:`${((c=e.Products)==null?void 0:c.length)||0} items`});const s=t.Note||"",a=e.Note||"";return s!==a&&n.push({field:"Note",oldValue:s,newValue:a}),n},Vd=async(t,e,n)=>{try{await fetch(`${ti}/api/logging/activity`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,action:e,details:n,timestamp:new Date().toISOString(),User:t,Action:e,Details:n})})}catch{}},vy=async(t,e,n,r,i)=>{if(n)try{const o={orderId:t,user:e,field:n,oldValue:r,newValue:i,timestamp:new Date().toISOString(),OrderID:t,Requester:e,"Field Changed":n,"Old Value":r,"New Value":i,OldValue:r,NewValue:i};await fetch(`${ti}/api/logging/edit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}catch(o){console.warn("[Audit] Failed to log edit:",o)}},yy=({provinces:t,selectedProvince:e,onSelect:n})=>{const[r,i]=be.useState(!1),[o,s]=be.useState(""),a=be.useRef(null);be.useEffect(()=>{s(e)},[e]),be.useEffect(()=>{const c=p=>{a.current&&!a.current.contains(p.target)&&(i(!1),s(e))};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[e]);const l=be.useMemo(()=>{const c=t.filter(N=>N.toLowerCase().includes(o.toLowerCase())),p=c.filter(N=>!N.includes("")&&!N.includes("")).sort((N,A)=>N.localeCompare(A,"km")),m=[],y=c.find(N=>N.includes("")),v=c.find(N=>N.includes(""));return y&&m.push(y),v&&m.push(v),[...m,...p]},[t,o]);return h.jsxs("div",{className:"relative w-full",ref:a,children:[h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",className:"form-input !pl-10 !py-3 rounded-xl border-gray-700 bg-gray-900 focus:border-blue-500/50 transition-all font-bold text-gray-200",placeholder:" /...",value:o,onChange:c=>{s(c.target.value),i(!0)},onFocus:()=>i(!0)}),h.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:h.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),r&&h.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800 border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-down max-h-60 overflow-y-auto custom-scrollbar",children:l.length>0?l.map((c,p)=>h.jsx("button",{type:"button",onClick:()=>{n(c),s(c),i(!1)},className:`w-full text-left px-4 py-3 text-sm font-bold transition-colors border-b border-white/5 last:border-0 ${e===c?"bg-blue-600 text-white":"text-gray-300 hover:bg-white/5"}`,children:h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{children:c}),p<2&&o===""&&h.jsx("span",{className:"text-[8px] bg-white/10 px-1.5 py-0.5 rounded uppercase tracking-widest opacity-50",children:"Priority"})]})},c)):h.jsx("div",{className:"p-4 text-center text-xs text-gray-500",children:""})})]})},xy=({methods:t,selectedMethodName:e,onSelect:n})=>h.jsxs("div",{className:"w-full",children:[h.jsx("style",{children:`
                @keyframes spin-border {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }
                .card-flux {
                    position: relative;
                    background: #0f172a; /* Slate 900 */
                    border-radius: 1rem;
                    z-index: 1;
                }
                /* The spinning border effect */
                .card-flux-active::after, .card-flux-active::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    background: conic-gradient(from var(--angle), transparent 70%, #3b82f6, #8b5cf6, #ec4899, #3b82f6);
                    border-radius: inherit;
                    animation: spin-border 3s linear infinite;
                }
                .card-flux-active::before {
                    filter: blur(10px);
                    opacity: 0.7;
                }
                
                @keyframes float-y {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-5px); }
                }
                .animate-float-y {
                    animation: float-y 3s ease-in-out infinite;
                }
                
                @keyframes pulse-soft {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.6; }
                }
                .animate-pulse-soft {
                    animation: pulse-soft 2s ease-in-out infinite;
                }
            `}),h.jsx("div",{className:"grid grid-cols-2 gap-4 max-h-80 overflow-y-auto custom-scrollbar px-2 pb-2 pt-2",children:t.map(r=>{const i=e===r.MethodName;return h.jsx("button",{type:"button",onClick:()=>n(r),className:`
                                relative group rounded-2xl transition-all duration-300 min-h-[140px] flex flex-col
                                ${i?"card-flux card-flux-active scale-[1.02]":"bg-gray-900 border border-gray-800 hover:bg-gray-800"}
                            `,children:h.jsxs("div",{className:`
                                w-full h-full rounded-2xl flex flex-col items-center justify-center p-4 relative overflow-hidden
                                ${i?"bg-[#0f172a]":"bg-transparent"}
                            `,children:[i&&h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-blue-500/10 via-purple-500/5 to-transparent pointer-events-none"}),h.jsx("div",{className:"absolute top-3 right-3 flex gap-1",children:i&&h.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-blue-500"})]})}),h.jsx("div",{className:`
                                    relative z-10 w-14 h-14 mb-3 transition-all duration-300
                                    ${i?"animate-float-y drop-shadow-[0_0_15px_rgba(59,130,246,0.5)]":"opacity-80 group-hover:opacity-100"}
                                `,children:h.jsx("img",{src:st(r.LogosURL),className:"w-full h-full object-contain",alt:r.MethodName})}),h.jsxs("div",{className:"relative z-10 text-center w-full",children:[h.jsx("p",{className:`
                                        text-xs font-black uppercase tracking-widest transition-all
                                        ${i?"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-pink-400 animate-pulse-soft":"text-gray-400 group-hover:text-gray-200"}
                                    `,children:r.MethodName}),r.RequireDriverSelection&&h.jsxs("div",{className:`
                                            mt-2 inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-[8px] font-bold uppercase tracking-wider
                                            ${i?"bg-purple-900/30 text-purple-300 border border-purple-500/30":"bg-gray-800 text-gray-500"}
                                        `,children:[h.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Driver Req"]})]})]})},r.MethodName)})}),t.length===0&&h.jsx("div",{className:"p-8 text-center border border-dashed border-gray-700 rounded-2xl bg-gray-900/50",children:h.jsx("p",{className:"text-xs text-gray-500 font-black uppercase tracking-widest animate-pulse",children:"No Signal"})})]}),by=({drivers:t,selectedDriverName:e,onSelect:n})=>{const r=be.useRef(null),i=be.useRef(null);be.useEffect(()=>{r.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"),i.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2570/2570-preview.mp3"),r.current&&(r.current.volume=.15),i.current&&(i.current.volume=.4)},[]);const o=()=>{r.current&&(r.current.currentTime=0,r.current.play().catch(()=>{}))},s=a=>{e!==a&&(i.current&&(i.current.currentTime=0,i.current.play().catch(()=>{})),n(a))};return h.jsxs("div",{className:"w-full py-4",children:[h.jsx("style",{children:`
                /* CSS Variable for Rotation */
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }

                /* Flux Animation Keyframes */
                @keyframes spin-flux {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }

                /* Base Card Style */
                .flux-card {
                    position: relative;
                    background: #0f172a; /* Slate 900 */
                    border-radius: 1rem;
                    z-index: 1;
                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
                }

                /* Electric Flux Effect (Active State) */
                .flux-card.selected::after, .flux-card.selected::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    /* Electric Gradient Colors: Cyan -> Blue -> Purple -> Cyan */
                    background: conic-gradient(from var(--angle), transparent 60%, #22d3ee, #3b82f6, #a855f7, #22d3ee);
                    border-radius: inherit;
                    animation: spin-flux 2s linear infinite;
                }

                /* Outer Glow (Blur) */
                .flux-card.selected::before {
                    filter: blur(10px);
                    opacity: 0.7;
                }

                /* Floating Text Animation */
                @keyframes float-text {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-2px); }
                }
                .animate-float-text {
                    animation: float-text 3s ease-in-out infinite;
                }
            `}),t.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-gray-800 rounded-2xl bg-gray-900/30",children:[h.jsx("div",{className:"w-10 h-10 border-2 border-gray-700 border-t-cyan-500 rounded-full animate-spin mb-3"}),h.jsx("p",{className:"text-gray-500 font-black uppercase tracking-[0.2em] text-[10px]",children:"NO DRIVERS DETECTED"})]}):h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5 p-2",children:t.map(a=>h.jsx(wy,{driver:a,isSelected:e===a.DriverName,onSelect:()=>s(a.DriverName),onHover:o},a.DriverName))})]})},wy=({driver:t,isSelected:e,onSelect:n,onHover:r})=>h.jsxs("div",{onClick:n,onMouseEnter:r,className:`
                flux-card relative h-48 cursor-pointer transition-all duration-300 group overflow-visible
                flex flex-col items-center justify-end pb-3
                ${e?"selected scale-[1.03]":"border border-white/5 hover:border-blue-500/30 grayscale opacity-70 hover:opacity-100 hover:grayscale-0"}
            `,children:[h.jsxs("div",{className:"absolute inset-0 rounded-2xl overflow-hidden bg-gray-900",children:[h.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(#3b82f6 1px, transparent 1px)",backgroundSize:"10px 10px"}}),e&&h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/2 bg-gradient-to-t from-blue-900/40 to-transparent"})]}),h.jsx("div",{className:`
                absolute inset-x-0 transition-all duration-500 z-10 flex justify-center
                ${e?"top-3 bottom-12":"top-4 bottom-10"}
            `,children:h.jsx("div",{className:`
                    relative w-full h-full max-w-[85%] rounded-xl overflow-hidden transition-all duration-500
                    ${e?"shadow-[0_0_20px_rgba(59,130,246,0.4)] ring-1 ring-blue-400/30":"shadow-none"}
                `,children:h.jsx("img",{src:st(t.ImageURL),className:"w-full h-full object-cover object-top",alt:t.DriverName})})}),h.jsxs("div",{className:"relative z-20 w-full px-2 text-center",children:[h.jsx("div",{className:`
                    transition-all duration-300 transform
                    ${e?"translate-y-0 animate-float-text":"translate-y-1"}
                `,children:h.jsx("h3",{className:`
                        text-[11px] font-black uppercase tracking-widest leading-tight
                        ${e?"text-white drop-shadow-[0_0_5px_rgba(34,211,238,0.8)]":"text-gray-400"}
                    `,children:t.DriverName})}),h.jsxs("div",{className:`
                    mt-2 flex items-center justify-center gap-1.5 transition-all duration-300
                    ${e?"opacity-100":"opacity-0 scale-0"}
                `,children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse shadow-[0_0_5px_#22d3ee]"}),h.jsx("span",{className:"text-[7px] font-bold text-cyan-300 uppercase tracking-[0.2em] border border-cyan-500/30 px-1.5 py-0.5 rounded bg-cyan-950/50",children:"ONLINE"})]})]})]}),Ny=({formData:t,appData:e,onChange:n,onProvinceSelect:r,onDistrictChange:i,onSangkatChange:o,onShippingMethodSelect:s,onDriverSelect:a,onBankChange:l,selectedDistrict:c,selectedSangkat:p,bankLogo:m})=>{var T,D,k;const[y,v]=be.useState(!1),N=[...new Set(e.locations.map(F=>F.Province))],A=[...new Set(e.locations.filter(F=>F.Province===t.Location).map(F=>F.District))].sort(),S=[...new Set(e.locations.filter(F=>F.Province===t.Location&&F.District===c).map(F=>F.Sangkat))].sort(),w=(T=e.shippingMethods)==null?void 0:T.find(F=>F.MethodName===t["Internal Shipping Method"]),_=(D=e.drivers)==null?void 0:D.find(F=>F.DriverName===t["Internal Shipping Details"]);return h.jsxs("div",{className:"flex flex-col gap-4 h-full overflow-y-auto custom-scrollbar pr-2 pb-20 lg:pb-2",children:[h.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg relative overflow-hidden flex-shrink-0",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:h.jsx("svg",{className:"w-24 h-24 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),h.jsxs("h3",{className:"text-xs font-black text-blue-400 uppercase tracking-[0.25em] mb-4 relative z-10 flex items-center gap-2",children:[h.jsx("span",{className:"w-1.5 h-4 bg-blue-500 rounded-full"}),""]}),h.jsxs("div",{className:"space-y-3 relative z-10",children:[h.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[h.jsx("input",{type:"text",name:"Customer Name",value:t["Customer Name"]||"",onChange:n,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl font-bold text-sm text-white placeholder-gray-600 focus:border-blue-500",placeholder:"",required:!0}),h.jsx("input",{type:"tel",name:"Customer Phone",value:t["Customer Phone"]||"",onChange:n,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl font-mono font-black text-sm text-blue-300 placeholder-gray-600 focus:border-blue-500",placeholder:"",required:!0})]}),h.jsxs("div",{className:"space-y-3 pt-2",children:[h.jsx(yy,{provinces:N,selectedProvince:t.Location||"",onSelect:r}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("select",{value:c,onChange:F=>i(F.target.value),className:"form-select bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-gray-300 h-12",disabled:!t.Location,children:[h.jsx("option",{value:"",children:"/"}),A.map(F=>h.jsx("option",{value:F,children:F},F))]}),h.jsxs("select",{value:p,onChange:F=>o(F.target.value),className:"form-select bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-gray-300 h-12",disabled:!c,children:[h.jsx("option",{value:"",children:"/"}),S.map(F=>h.jsx("option",{value:F,children:F},F))]})]}),h.jsx("input",{type:"text",name:"Address Details",value:t["Address Details"]||"",onChange:n,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-white placeholder-gray-600 focus:border-blue-500",placeholder:", ..."})]})]})]}),h.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg relative overflow-hidden flex-shrink-0",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:h.jsx("svg",{className:"w-24 h-24 text-orange-500",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"})})}),h.jsxs("h3",{className:"text-xs font-black text-orange-400 uppercase tracking-[0.25em] mb-4 relative z-10 flex items-center gap-2",children:[h.jsx("span",{className:"w-1.5 h-4 bg-orange-500 rounded-full"})," & "]}),h.jsxs("div",{className:"space-y-4 relative z-10",children:[h.jsx(xy,{methods:e.shippingMethods||[],selectedMethodName:t["Internal Shipping Method"]||"",onSelect:s}),(w==null?void 0:w.RequireDriverSelection)&&h.jsxs("div",{className:"space-y-3 pt-2 border-t border-white/5 animate-fade-in",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("label",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest ml-1",children:""}),!t["Internal Shipping Details"]&&h.jsx("span",{className:"text-[9px] text-red-400 font-bold animate-pulse",children:"* Required"})]}),h.jsx("div",{onClick:()=>v(!0),className:`
                                    relative p-3 rounded-2xl border transition-all cursor-pointer group flex items-center gap-4 shadow-lg
                                    ${_?"bg-gradient-to-r from-gray-800 to-gray-900 border-blue-500/30 hover:border-blue-500/50":"bg-red-500/5 border-red-500/20 hover:bg-red-500/10 border-dashed"}
                                `,children:_?h.jsxs(h.Fragment,{children:[h.jsx("img",{src:st(_.ImageURL),alt:_.DriverName,className:"w-12 h-12 rounded-xl object-cover border border-white/10 shadow-sm"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-white font-black text-sm truncate",children:_.DriverName}),h.jsx("p",{className:"text-[9px] text-blue-400 font-bold uppercase tracking-wider mt-0.5",children:"Driver Selected"})]}),h.jsx("div",{className:"bg-black/40 p-2.5 rounded-xl border border-white/10 group-hover:bg-blue-600 group-hover:text-white group-hover:border-blue-500 transition-colors text-gray-500 shadow-inner",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})})]}):h.jsxs("div",{className:"w-full py-2 flex items-center justify-center gap-3 text-gray-500 group-hover:text-red-400 transition-colors",children:[h.jsx("span",{className:"bg-gray-800 p-2 rounded-full border border-gray-700 group-hover:border-red-500/50 transition-colors",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),h.jsx("span",{className:"font-bold text-xs uppercase tracking-wider",children:"Tap to Select Driver"})]})})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[h.jsxs("div",{className:"relative group",children:[h.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase absolute -top-2 left-2 bg-[#161f32] px-1 group-focus-within:text-orange-400 transition-colors",children:"Cost ($)"}),h.jsx("input",{type:"text",inputMode:"decimal",name:"Internal Cost",value:t["Internal Cost"],onChange:n,className:"form-input !py-2.5 !px-3 bg-gray-900/80 border-gray-700 rounded-xl font-black text-orange-400 text-sm text-center focus:border-orange-500"})]}),h.jsxs("div",{className:"relative group",children:[h.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase absolute -top-2 left-2 bg-[#161f32] px-1 group-focus-within:text-white transition-colors",children:"Status"}),h.jsxs("select",{name:"Payment Status",value:t["Payment Status"],onChange:n,className:`form-select !py-2.5 !px-2 rounded-xl font-black text-xs uppercase border-none w-full ${t["Payment Status"]==="Paid"?"bg-emerald-600 text-white shadow-lg shadow-emerald-900/50":"bg-red-900/40 text-red-400 border border-red-500/20"}`,children:[h.jsx("option",{value:"Unpaid",children:"Unpaid"}),h.jsx("option",{value:"Paid",children:"Paid"})]})]})]}),t["Payment Status"]==="Paid"&&h.jsxs("div",{className:"flex items-center gap-3 animate-fade-in bg-black/30 p-2 rounded-2xl border border-white/5",children:[h.jsxs("select",{value:t["Payment Info"],onChange:l,className:"form-select bg-transparent border-none text-xs font-bold flex-grow text-white focus:ring-0",children:[h.jsx("option",{value:"",children:"Select Bank..."}),(k=e.bankAccounts)==null?void 0:k.map(F=>h.jsx("option",{value:F.BankName,children:F.BankName},F.BankName))]}),m&&h.jsx("img",{src:m,className:"w-10 h-10 object-contain bg-white/10 p-1 rounded-xl border border-white/10",alt:""})]})]})]}),h.jsx("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg mt-auto flex-shrink-0",children:h.jsx("textarea",{name:"Note",value:t.Note||"",onChange:n,rows:3,className:"form-textarea bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold w-full resize-none text-gray-300 placeholder-gray-600 focus:border-blue-500",placeholder:"..."})}),y&&h.jsx(tc,{isOpen:!0,onClose:()=>v(!1),maxWidth:"max-w-3xl",children:h.jsxs("div",{className:"p-6 sm:p-8 bg-[#0f172a] rounded-[2.5rem] border border-white/10",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("h3",{className:"text-xl sm:text-2xl font-black text-white uppercase tracking-tighter flex items-center gap-3",children:[h.jsx("span",{className:"w-2 h-8 bg-blue-600 rounded-full"}),"Select Driver"]}),h.jsx("button",{onClick:()=>v(!1),className:"w-10 h-10 rounded-2xl bg-gray-800 text-gray-400 hover:text-white flex items-center justify-center transition-all hover:bg-gray-700 active:scale-90",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar pr-2 bg-black/20 rounded-3xl p-2 border border-white/5",children:h.jsx(by,{drivers:e.drivers||[],selectedDriverName:t["Internal Shipping Details"]||"",onSelect:F=>{a(F),v(!1)}})})]})})]})},Sy=({value:t,onChange:e,label:n="*",min:r=1,max:i=99})=>{var A;const o=be.useRef(null),[s,a]=be.useState(!1),l=()=>{const S=Math.min(i,t+1);e(S)},c=()=>{const S=Math.max(r,t-1);e(S)},p=S=>{const w=S.target.value;if(w===""){a(!0);return}const _=parseInt(w,10);isNaN(_)||(_<r||_>i?a(!0):(e(_),a(!1)))},m=()=>{if(s){const S=o.current;if(S&&S.value){let w=parseInt(S.value,10);isNaN(w)||w<r?w=r:w>i&&(w=i),e(w)}else e(r);a(!1)}},y=S=>{var w;S.key==="Enter"?(S.preventDefault(),m(),(w=o.current)==null||w.blur()):S.key==="ArrowUp"?(S.preventDefault(),l()):S.key==="ArrowDown"&&(S.preventDefault(),c())},v=()=>{a(!0)},N=s?((A=o.current)==null?void 0:A.value)||"":t;return h.jsxs("div",{className:"space-y-1.5 w-full",children:[h.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:n}),h.jsxs("div",{className:"flex items-center bg-black/40 rounded-2xl border border-gray-700 h-12 w-full overflow-hidden focus-within:border-blue-500/50 transition-all focus-within:shadow-[0_0_20px_rgba(59,130,246,0.15)] ring-1 ring-white/5",children:[h.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${t<=r?"text-gray-600 cursor-not-allowed opacity-50":"text-gray-400 hover:text-white hover:bg-white/5 active:scale-90"}
                        transition-all border-r border-gray-700/50
                    `,onClick:c,disabled:t<=r,"aria-label":"",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{d:"M20 12H4"})})}),h.jsx("input",{ref:o,type:"number",inputMode:"numeric",value:N,onChange:p,onBlur:m,onFocus:v,onKeyDown:y,min:r,max:i,step:"1",className:"flex-1 h-full bg-transparent text-center text-white font-black text-base outline-none border-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:r.toString(),"aria-label":""}),h.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${t>=i?"text-gray-600 cursor-not-allowed opacity-50":"text-blue-400 hover:text-white hover:bg-blue-600/10 active:scale-90"}
                        transition-all border-l border-gray-700/50
                    `,onClick:l,disabled:t>=i,"aria-label":"",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{d:"M12 4v16m8-8H4"})})})]}),h.jsxs("div",{className:"text-xs text-gray-500 px-1 flex justify-between",children:[h.jsxs("span",{children:[": ",r]}),h.jsxs("span",{children:[": ",i]})]})]})},_y=({products:t,masterProducts:e,onProductChange:n,onAddProduct:r,onRemoveProduct:i,onPreviewImage:o,onScanBarcode:s})=>h.jsxs("div",{className:"flex-1 bg-gray-800/30 border border-white/5 rounded-[2rem] p-4 lg:p-6 overflow-y-auto custom-scrollbar flex flex-col relative shadow-inner",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 z-20 bg-[#121a2b]/95 backdrop-blur-md p-3 -mx-2 -mt-2 rounded-2xl border border-white/5 shadow-lg",children:[h.jsxs("h3",{className:"text-xs font-black text-white uppercase tracking-widest pl-2 flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Items List (",t.length,")"]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{type:"button",onClick:s,className:"px-4 py-2.5 bg-blue-600/10 border border-blue-500/30 text-blue-400 rounded-xl shadow-lg hover:bg-blue-600 hover:text-white transition-all active:scale-95 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"Scan"]}),h.jsxs("button",{type:"button",onClick:r,className:"px-5 py-2.5 bg-blue-600 text-white rounded-xl shadow-lg shadow-blue-600/30 text-[10px] font-black uppercase hover:bg-blue-500 transition-all active:scale-95 flex items-center gap-2",children:[h.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{d:"M12 4v16m8-8H4"})})," Add"]})]})]}),h.jsx("div",{className:"space-y-4 pb-4",children:t.map((a,l)=>h.jsxs("div",{className:"group relative bg-[#0f1523] rounded-[1.5rem] p-4 border border-white/5 hover:border-blue-500/30 transition-all flex flex-col sm:flex-row gap-5 items-start shadow-md hover:shadow-xl",children:[h.jsx("button",{type:"button",onClick:()=>i(l),className:"absolute top-3 right-3 text-gray-600 hover:text-red-500 hover:bg-red-500/10 rounded-full w-8 h-8 flex items-center justify-center transition-all opacity-0 group-hover:opacity-100 focus:opacity-100",children:""}),h.jsx("div",{className:"w-20 h-20 bg-gray-900 rounded-2xl border border-white/10 overflow-hidden flex-shrink-0 cursor-pointer shadow-lg group-hover:scale-105 transition-transform",onClick:()=>a.image&&o(st(a.image)),children:h.jsx("img",{src:st(a.image),className:"w-full h-full object-cover",alt:""})}),h.jsxs("div",{className:"flex-1 w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-4 items-center",children:[h.jsxs("div",{className:"lg:col-span-6 space-y-3",children:[h.jsx(py,{products:e,selectedProductName:a.name,onSelect:(c,p)=>n(l,"name",c,p)}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:a.colorInfo,onChange:c=>n(l,"colorInfo",c.target.value),className:"bg-gray-800/50 border-none rounded-lg py-1.5 px-3 text-[10px] font-bold text-white w-full focus:ring-1 focus:ring-blue-500 placeholder-gray-600",placeholder:"Color/Size..."}),h.jsx("input",{type:"text",value:a.tags||"",onChange:c=>n(l,"tags",c.target.value),className:"bg-gray-800/50 border-none rounded-lg py-1.5 px-3 text-[10px] font-bold text-blue-300 w-full focus:ring-1 focus:ring-blue-500 placeholder-gray-600",placeholder:"Tags..."})]})]}),h.jsx("div",{className:"lg:col-span-3 flex justify-center",children:h.jsx("div",{className:"w-32",children:h.jsx(Sy,{value:Number(a.quantity)||1,onChange:c=>n(l,"quantity",c),label:""})})}),h.jsxs("div",{className:"lg:col-span-3 flex flex-row lg:flex-col justify-between items-center lg:items-end gap-2 h-full",children:[h.jsxs("div",{className:"relative group/price",children:[h.jsx("label",{className:"absolute -top-3 right-0 text-[8px] font-black text-gray-500 uppercase opacity-0 group-hover/price:opacity-100 transition-opacity",children:"Unit Price"}),h.jsx("input",{type:"text",inputMode:"decimal",value:a.finalPrice,onChange:c=>n(l,"finalPrice",c.target.value),className:"w-24 bg-transparent border-b border-gray-700 py-1 font-black text-right text-emerald-400 focus:border-emerald-500 outline-none text-sm transition-all"})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-[9px] text-gray-500 uppercase font-black tracking-wider",children:"Total"}),h.jsxs("p",{className:"text-lg font-black text-white tracking-tight",children:["$",(Number(a.total)||0).toFixed(2)]})]})]})]})]},a.id||l))})]}),Ay=({subtotal:t,grandTotal:e,shippingFee:n,onShippingFeeChange:r,onSave:i,onDelete:o,loading:s})=>h.jsxs("div",{className:"flex-shrink-0 bg-[#0f1523]/80 backdrop-blur-xl border border-white/5 rounded-[2.5rem] p-5 lg:p-6 flex flex-col lg:flex-row gap-6 items-center justify-between shadow-[0_-10px_40px_rgba(0,0,0,0.3)] relative z-30",children:[h.jsxs("div",{className:"flex flex-wrap gap-8 items-center justify-center lg:justify-start w-full lg:w-auto",children:[h.jsxs("div",{className:"text-center lg:text-left",children:[h.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1",children:"Subtotal"}),h.jsxs("p",{className:"text-xl font-bold text-gray-300",children:["$",t.toFixed(2)]})]}),h.jsx("div",{className:"w-px h-10 bg-white/10 hidden lg:block"}),h.jsxs("div",{className:"text-center lg:text-left relative group",children:[h.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1 group-focus-within:text-blue-400 transition-colors",children:"Shipping Fee"}),h.jsxs("div",{className:"relative inline-flex items-center",children:[h.jsx("input",{type:"text",inputMode:"decimal",name:"Shipping Fee (Customer)",value:n,onChange:r,className:"w-20 bg-transparent border-b-2 border-gray-600 text-center font-black text-xl text-white outline-none focus:border-blue-500 transition-all py-0.5"}),h.jsx("span",{className:"text-gray-500 font-black ml-1 text-sm",children:"$"})]})]}),h.jsx("div",{className:"w-px h-10 bg-white/10 hidden lg:block"}),h.jsxs("div",{className:"text-center lg:text-left",children:[h.jsx("p",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-[0.2em] mb-1",children:"Grand Total"}),h.jsxs("p",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-emerald-200 tracking-tighter drop-shadow-md",children:["$",e.toFixed(2)]})]})]}),h.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 w-full lg:w-auto items-center",children:[h.jsxs("button",{type:"button",onClick:o,disabled:s,className:"w-full lg:w-auto px-8 py-5 bg-red-500/10 hover:bg-red-600 text-red-500 hover:text-white rounded-[1.5rem] font-black uppercase text-xs tracking-[0.2em] transition-all flex items-center justify-center gap-3 border border-red-500/20 active:scale-95 group order-last lg:order-first",children:[h.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:rotate-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",strokeWidth:"2.5"})}),"Delete"]}),h.jsx("button",{onClick:i,disabled:s,className:"w-full lg:w-auto px-12 py-5 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white rounded-[1.5rem] font-black uppercase text-xs tracking-[0.2em] shadow-[0_10px_30px_rgba(37,99,235,0.4)] transform active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50 disabled:cursor-not-allowed group border border-white/10",children:s?h.jsx(Pr,{size:"sm"}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"relative z-10",children:"Save Changes"}),h.jsx("div",{className:"w-8 h-8 bg-white/10 rounded-full flex items-center justify-center group-hover:bg-white/20 transition-colors",children:h.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]})})]})]}),Ci=()=>{if(typeof window>"u"||typeof navigator>"u")return!1;const t=navigator.userAgent||navigator.vendor||window.opera;return!!(/iPad|iPhone|iPod/.test(t)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)};let Zo=null,ca=null;const Cy=t=>{if(!t||t.videoWidth===0)return null;const e=80,n=80;if(Zo||(Zo=document.createElement("canvas"),Zo.width=e,Zo.height=n,ca=Zo.getContext("2d",{willReadFrequently:!0})),!ca)return null;ca.drawImage(t,0,0,e,n);const i=ca.getImageData(0,0,e,n).data,o=new Float32Array(n).fill(0),s=new Float32Array(e).fill(0);let a=0;for(let A=1;A<n-1;A++)for(let S=1;S<e-1;S++){const w=(A*e+S)*4,_=(i[w]+i[w+1]+i[w+2])/3,T=(i[w-4]+i[w-3]+i[w-2])/3,D=(i[w-e*4]+i[w-e*4+1]+i[w-e*4+2])/3,k=Math.abs(_-T),F=Math.abs(_-D);let P=k+F>30?k+F:0;o[A]+=P,s[S]+=P,a+=P}if(a<15e3)return null;const l=(A,S)=>{const w=new Float32Array(S);for(let P=2;P<S-2;P++)w[P]=(A[P-2]+A[P-1]+A[P]+A[P+1]+A[P+2])/5;let _=0,T=S/2;for(let P=0;P<S;P++)w[P]>_&&(_=w[P],T=P);const D=_*.25;let k=T,F=T;for(;k>0&&w[k]>D;)k--;for(;F<S-1&&w[F]>D;)F++;return{min:Math.max(0,k-2),max:Math.min(S,F+2)}},c=l(s,e),p=l(o,n),m=(c.max-c.min)/e*100,y=(p.max-p.min)/n*100,v=(c.min+c.max)/2/e*100,N=(p.min+p.max)/2/n*100;return m>90||y>90||m<5||y<5?null:{x:v,y:N,width:m,height:y,score:Math.min(1,a/2e5)}},Xr=(t,e,n)=>t+(e-t)*n,Ty=(t,e,n,r,i)=>{const[o,s]=be.useState(null),[a,l]=be.useState(!1),c=be.useRef(0),p=be.useRef(0),m=be.useRef(0),y=be.useRef(null),v=be.useRef(0),N=be.useRef(!1),A=be.useRef(!1),S=be.useRef(null);be.useEffect(()=>{if("BarcodeDetector"in window&&!Ci())try{console.log("Initializing Native BarcodeDetector..."),S.current=new window.BarcodeDetector({formats:["qr_code","ean_13","code_128","code_39"]})}catch(T){console.warn("Native BarcodeDetector failed to init:",T)}},[]);const w=()=>{v.current=Date.now()+3e3,l(!1)},_=be.useCallback(async()=>{if(Ci())return;if(!t||t.paused||t.ended){c.current=requestAnimationFrame(_);return}let T=null;if(S.current)if(A.current)y.current;else{A.current=!0;try{const D=await S.current.detect(t);if(D.length>0){const F=D.sort((j,$)=>$.boundingBox.width*$.boundingBox.height-j.boundingBox.width*j.boundingBox.height)[0].boundingBox,P=t.videoWidth,M=t.videoHeight;P>0&&M>0&&(T={x:(F.x+F.width/2)/P*100,y:(F.y+F.height/2)/M*100,width:F.width/P*100,height:F.height/M*100})}}catch{}finally{A.current=!1}}else T=Cy(t);if(T){if(m.current=0,y.current?y.current={x:Xr(y.current.x,T.x,.4),y:Xr(y.current.y,T.y,.4),width:Xr(y.current.width,T.width,.4),height:Xr(y.current.height,T.height,.4)}:y.current=T,s(D=>D?{x:Xr(D.x,y.current.x,.25),y:Xr(D.y,y.current.y,.25),width:Xr(D.width,y.current.width,.2),height:Xr(D.height,y.current.height,.2)}:y.current),Date.now()>v.current){const D=T.x>30&&T.x<70&&T.y>30&&T.y<70,k=60,F=T.width<k;if(D&&F?p.current++:p.current=Math.max(0,p.current-1),p.current>3){let P=5;try{const $=e!=null&&e.getCapabilities?e.getCapabilities():{};$.zoom&&$.zoom.max&&(P=$.zoom.max)}catch{}const M=Math.min(P,8),j=k-T.width;if(Math.abs(j)>2&&n<M&&!N.current){l(!0);let I=j*.01*n;I=Math.max(-.2,Math.min(I,.2));const E=Math.min(Math.max(n+I,1),M);Math.abs(E-n)>.02&&(N.current=!0,r(E),i(E).catch(z=>{}).finally(()=>{N.current=!1}))}}}}else m.current++,m.current>10&&(s(null),y.current=null,l(!1),p.current=0);c.current=requestAnimationFrame(_)},[t,n,r,i,e]);return be.useEffect(()=>(Ci()||(c.current=requestAnimationFrame(_)),()=>{c.current&&cancelAnimationFrame(c.current)}),[_]),{trackingBox:o,isAutoZooming:a,notifyManualZoom:w}},ky=(t,e,n)=>{const r=be.useRef(null),[i,o]=be.useState(!0),[s,a]=be.useState(null),[l,c]=be.useState(1),[p,m]=be.useState(null),[y,v]=be.useState(!1),[N,A]=be.useState(!1),[S,w]=be.useState("environment"),_=be.useRef(null),T=be.useRef(null),D=be.useRef(new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3")),k=be.useCallback(()=>{w(q=>q==="environment"?"user":"environment")},[]),F=()=>{var L,G,Y;if(T.current&&T.current.readyState==="live")return T.current;if((L=r.current)!=null&&L.html5QrCode){const ne=(Y=(G=r.current.html5QrCode).getRunningTrackCamera)==null?void 0:Y.call(G);if(ne)return ne}const q=document.querySelector(`#${t} video`);if(q&&q.srcObject){const ue=q.srcObject.getVideoTracks()[0];if(ue)return ue}return null},P=be.useCallback(async q=>{const L=F();if(!L)return;const G=Ci();try{await L.applyConstraints(q)}catch{if(q.zoom&&G)try{await L.applyConstraints({advanced:[{zoom:q.zoom}]})}catch{}}},[]),M=be.useCallback(async q=>{if(!F())return;let G=q;p&&(G=Math.max(p.min,Math.min(q,p.max))),c(G),await P({zoom:G})},[p,P]),{trackingBox:j,isAutoZooming:$,notifyManualZoom:I}=Ty(_.current,T.current,l,c,q=>P({zoom:q})),E=be.useCallback(q=>{I(),M(q)},[I,M]),z=be.useCallback(async()=>{const q=F();if(!q||Ci())return;const L=!y;try{await q.applyConstraints({advanced:[{torch:L}]}),v(L)}catch{try{await q.applyConstraints({torch:L}),v(L)}catch{}}},[y]),K=be.useCallback(async()=>{const q=F();if(q){try{await P({focusMode:"continuous"})}catch{}try{const L=q.getCapabilities?q.getCapabilities():{};L.focusMode&&L.focusMode.includes("single-shot")&&await P({focusMode:"single-shot"})}catch{}}},[P]),ie=be.useCallback(async q=>{if(!r.current)throw new Error("Scanner not initialized");return await r.current.scanFile(q,!0)},[]);return be.useEffect(()=>{if(!window.Html5Qrcode){a("Scanner library missing.");return}return(async()=>{o(!0),v(!1),c(1);const L=new window.Html5Qrcode(t);r.current=L;const G=Ci(),ne={fps:30,qrbox:{width:280,height:280},...G?{}:{aspectRatio:1.777777778},disableFlip:!1,experimentalFeatures:{useBarCodeDetectorIfSupported:!G},videoConstraints:G?{facingMode:"environment",width:{min:1280,ideal:1920},height:{min:720,ideal:1080}}:{facingMode:S,width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080},frameRate:{ideal:60,min:30},aspectRatio:1.777777778,focusMode:"continuous"}};let ue=0;const R=V=>{const X=Date.now();X-ue<1500||(ue=X,D.current.currentTime=0,D.current.play().catch(()=>{}),navigator.vibrate&&navigator.vibrate(50),e(V))};try{await L.start({facingMode:S},ne,R,void 0);const V=document.querySelector(`#${t} video`);V&&(_.current=V,V.setAttribute("playsinline","true"),V.style.objectFit="cover");const X=F();if(X){T.current=X;const Q=X.getCapabilities?X.getCapabilities():{},ee=X.getSettings();if(!G&&"torch"in Q?A(!0):A(!1),G){const se=ee.zoom?Math.min(ee.zoom,1):1;m({min:se>=1?1:.5,max:5,step:.1}),c(ee.zoom||1)}else Q.zoom?(m({min:Q.zoom.min,max:Q.zoom.max,step:Q.zoom.step}),c(ee.zoom||Q.zoom.min)):m(null)}o(!1)}catch(V){console.error("Camera Start Error:",V),a(V.name==="NotAllowedError"?"Camera permission denied.":"Camera error."),o(!1)}})(),()=>{r.current&&r.current.isScanning&&r.current.stop().then(()=>r.current.clear()).catch(console.error)}},[S]),{isInitializing:i,error:s,zoom:l,zoomCapabilities:p,handleZoomChange:E,isTorchOn:y,isTorchSupported:N,toggleTorch:z,trackingBox:j,isAutoZooming:$,triggerFocus:K,switchCamera:k,facingMode:S,scanFromImage:ie}},Iy=({isScanning:t,error:e,scanSuccessFlash:n,zoom:r,useSimulatedZoom:i,trackingBox:o,focusPoint:s})=>h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
              .hud-grid {
                background-size: 40px 40px;
                background-image: linear-gradient(to right, rgba(59, 130, 246, 0.1) 1px, transparent 1px), linear-gradient(to bottom, rgba(59, 130, 246, 0.1) 1px, transparent 1px);
              }
              .scanner-laser {
                position: absolute; left: 0; width: 100%; height: 2px; background: #3b82f6; box-shadow: 0 0 15px #3b82f6; animation: laser-scan 2s ease-in-out infinite;
              }
              @keyframes laser-scan { 0% { top: 0%; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
              
              /* Enhanced Success Animation */
              .scan-flash-overlay { animation: flash-screen 0.4s ease-out forwards; }
              @keyframes flash-screen { 
                  0% { background-color: rgba(16, 185, 129, 0); } 
                  20% { background-color: rgba(16, 185, 129, 0.4); } 
                  100% { background-color: rgba(16, 185, 129, 0); } 
              }
              
              .tracking-box {
                  position: absolute;
                  border: 2px solid #10b981;
                  background-color: rgba(16, 185, 129, 0.1);
                  box-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
                  border-radius: 8px;
                  transition: all 0.1s linear; /* Smooth movement */
                  pointer-events: none;
                  z-index: 10;
                  transform: translate(-50%, -50%); /* Center based on x, y */
              }

              /* Focus Reticle Animation */
              @keyframes focus-ping {
                  0% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; border-color: white; }
                  20% { opacity: 1; }
                  100% { transform: translate(-50%, -50%) scale(1); opacity: 0; border-color: #f59e0b; }
              }
              .focus-reticle {
                  position: absolute;
                  width: 60px;
                  height: 60px;
                  border: 2px solid white;
                  border-radius: 50%;
                  pointer-events: none;
                  animation: focus-ping 0.6s ease-out forwards;
                  z-index: 20;
                  box-shadow: 0 0 10px rgba(255,255,255,0.5);
              }
            `}),h.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[!t&&!e&&h.jsx("div",{className:"absolute inset-0 hud-grid opacity-30"}),n&&h.jsx("div",{className:"absolute inset-0 z-50 scan-flash-overlay"}),s&&h.jsx("div",{className:"focus-reticle",style:{left:s.x,top:s.y}}),o&&h.jsx("div",{className:"tracking-box",style:{left:`${o.x}%`,top:`${o.y}%`,width:`${o.width}%`,height:`${o.height}%`},children:h.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-emerald-500 text-white text-[9px] font-black px-2 py-0.5 rounded uppercase tracking-wider shadow-lg whitespace-nowrap animate-pulse",children:"AI TRACKING"})}),!t&&!e&&!o&&h.jsxs("div",{className:`
                        absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 
                        w-[260px] h-[260px] border-2 transition-all duration-300
                        ${n?"border-emerald-500 scale-110 shadow-[0_0_50px_rgba(16,185,129,0.8)]":"border-white/30"}
                        rounded-[2rem]
                    `,children:[h.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-blue-500 rounded-tl-2xl -translate-x-1 -translate-y-1"}),h.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-blue-500 rounded-tr-2xl translate-x-1 -translate-y-1"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-blue-500 rounded-bl-2xl -translate-x-1 translate-y-1"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-blue-500 rounded-br-2xl translate-x-1 translate-y-1"}),h.jsx("div",{className:"scanner-laser"})]}),h.jsxs("div",{className:"absolute top-[18%] right-4 flex flex-col gap-2 items-end",children:[h.jsxs("div",{className:"text-[9px] font-mono text-blue-400 bg-black/60 px-2 py-1 rounded border border-blue-500/20 flex items-center gap-2 backdrop-blur-md",children:[h.jsxs("span",{children:[r.toFixed(1),"x"]}),i&&h.jsx("span",{className:"bg-white/10 px-1 rounded text-[8px] text-white",children:"DIGITAL"})]}),o&&h.jsx("div",{className:"text-[9px] font-mono text-emerald-400 bg-black/60 px-2 py-1 rounded border border-emerald-500/20 flex items-center gap-2 backdrop-blur-md animate-pulse",children:h.jsx("span",{children:"SMART-ZOOM"})})]})]})]}),Ey=({history:t,isOpen:e,setIsOpen:n,onClear:r})=>{const i=be.useRef(null),o=a=>{i.current=a.touches[0].clientY},s=a=>{i.current!==null&&a.touches[0].clientY-i.current>50&&(n(!1),i.current=null)};return h.jsxs("div",{className:`
                absolute bottom-0 left-0 right-0 bg-[#0f172a] rounded-t-[2.5rem] border-t border-white/10 shadow-[0_-20px_60px_rgba(0,0,0,0.9)] z-50 transition-all duration-300 ease-out flex flex-col
                ${e?"h-[80vh]":"h-0 overflow-hidden"}
            `,onTouchStart:o,onTouchMove:s,onTouchEnd:()=>{i.current=null},children:[h.jsx("div",{className:"w-full flex justify-center py-5 cursor-pointer active:bg-white/5 transition-colors rounded-t-[2.5rem]",onClick:()=>n(!e),children:h.jsx("div",{className:"w-16 h-1.5 bg-gray-600 rounded-full"})}),h.jsxs("div",{className:"flex-grow flex flex-col overflow-hidden px-5 pb-6 animate-fade-in",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-1.5 h-6 bg-blue-500 rounded-full"}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-base font-black text-white uppercase tracking-tight",children:"Scanned History"}),h.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:[t.length," items logged"]})]})]}),h.jsx("button",{onClick:r,className:"text-[10px] text-red-400 font-black uppercase tracking-widest bg-red-500/10 px-4 py-2 rounded-xl border border-red-500/20 active:scale-95 transition-all hover:bg-red-500 hover:text-white",children:"Clear All"})]}),h.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar space-y-3 pb-safe-bottom",children:t.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-48 opacity-40",children:[h.jsx("svg",{className:"w-12 h-12 text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),h.jsx("p",{className:"text-xs font-black uppercase text-gray-500 tracking-widest",children:"No items scanned yet"})]}):t.map((a,l)=>{var c;return h.jsxs("div",{className:"flex items-center gap-4 bg-gray-800/40 p-3 rounded-2xl border border-white/5 shadow-sm",children:[h.jsx("div",{className:"w-12 h-12 bg-black rounded-xl overflow-hidden border border-white/10 flex-shrink-0 shadow-inner",children:a.product?h.jsx("img",{src:st(a.product.ImageURL),className:"w-full h-full object-cover",alt:""}):h.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 font-black text-xs",children:"?"})}),h.jsxs("div",{className:"flex-grow min-w-0",children:[h.jsx("h4",{className:"text-white font-bold text-sm truncate leading-tight",children:((c=a.product)==null?void 0:c.ProductName)||"Unknown Product"}),h.jsx("p",{className:"text-[10px] text-gray-500 font-mono mt-1 font-bold tracking-wider",children:a.code})]}),h.jsxs("div",{className:"text-right flex flex-col items-end",children:[h.jsxs("span",{className:"bg-blue-600/20 text-blue-400 text-xs font-black px-2 py-0.5 rounded-lg border border-blue-500/20 mb-1",children:["x",a.count]}),h.jsx("span",{className:"text-[9px] text-gray-600 font-bold",children:new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},l)})})]})]})},Py=({onClose:t,onSwitchCamera:e,onToggleTorch:n,isTorchOn:r,isTorchSupported:i,isAutoZooming:o})=>{const s=!Ci()&&i;return h.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent pointer-events-none",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[h.jsxs("div",{className:"pointer-events-auto bg-black/40 backdrop-blur-md px-3 py-1.5 rounded-full border border-blue-500/30 flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),h.jsx("span",{className:"text-white font-black text-xs uppercase tracking-widest",children:"LIVE"}),o&&h.jsx("span",{className:"text-[9px] text-blue-400 font-bold ml-1 animate-pulse",children:"AUTO-ZOOM"})]}),h.jsxs("div",{className:"flex gap-3 pointer-events-auto",children:[h.jsx("button",{onClick:e,className:"w-10 h-10 bg-gray-800/60 backdrop-blur-md rounded-full text-white border border-white/10 flex items-center justify-center active:scale-90 transition-all hover:bg-gray-700/60",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s&&h.jsx("button",{onClick:n,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all backdrop-blur-md border ${r?"bg-yellow-500 text-black border-yellow-400 shadow-[0_0_15px_rgba(234,179,8,0.5)]":"bg-gray-800/60 text-gray-300 border-white/10"}`,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),h.jsx("button",{onClick:t,className:"w-10 h-10 bg-gray-800/60 backdrop-blur-md rounded-full text-white border border-white/10 flex items-center justify-center active:scale-90 transition-all hover:bg-red-500/80 hover:border-red-500/50",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})]})},Ly=({zoom:t,zoomCapabilities:e,handleZoomChange:n,scanMode:r,setScanMode:i,onOpenHistory:o,onUpload:s})=>{const a=be.useRef(null),l=e&&e.min<1,c=e&&e.max>=2,p=e&&e.max>=5,m=y=>{y.target.files&&y.target.files[0]&&(s(y.target.files[0]),y.target.value="")};return h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 z-40 bg-gradient-to-t from-black via-black/90 to-transparent flex flex-col gap-5 pointer-events-none",style:{paddingBottom:"max(1.5rem, env(safe-area-inset-bottom))"},children:[e&&h.jsxs("div",{className:"flex justify-center items-center gap-4 pointer-events-auto mb-1 animate-fade-in-up",children:[l&&h.jsx("button",{onClick:()=>n(.5),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-.5)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:".5"}),h.jsx("button",{onClick:()=>n(1),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-1)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"1x"}),c&&h.jsx("button",{onClick:()=>n(2),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-2)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"2"}),p&&h.jsx("button",{onClick:()=>n(5),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-5)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"5"})]}),e&&h.jsxs("div",{className:"flex items-center gap-3 px-2 pointer-events-auto",children:[h.jsxs("span",{className:"text-[9px] font-black text-gray-500 w-6 text-center",children:[e.min,"x"]}),h.jsx("input",{type:"range",min:e.min,max:e.max,step:e.step,value:t,onChange:y=>n(parseFloat(y.target.value)),className:"flex-1 h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500"}),h.jsxs("span",{className:"text-[9px] font-black text-gray-500 w-6 text-center",children:[e.max,"x"]})]}),h.jsxs("div",{className:"flex justify-between items-center gap-3 pointer-events-auto px-2",children:[h.jsx("input",{type:"file",accept:"image/*",ref:a,className:"hidden",onChange:m}),h.jsx("button",{onClick:()=>{var y;return(y=a.current)==null?void 0:y.click()},className:"w-12 h-12 rounded-2xl bg-gray-800 border border-white/10 flex items-center justify-center text-gray-400 active:scale-90 transition-all shadow-lg hover:text-white",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),h.jsxs("div",{className:"flex bg-gray-800 p-1.5 rounded-2xl border border-white/10 shadow-lg flex-grow max-w-[200px]",children:[h.jsx("button",{onClick:()=>i("single"),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all duration-300 ${r==="single"?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,children:"Single"}),h.jsx("button",{onClick:()=>i("increment"),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all duration-300 ${r==="increment"?"bg-emerald-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,children:"Multi"})]}),h.jsx("div",{className:"w-12"})]}),h.jsx("div",{className:"w-full flex justify-center pb-2 cursor-pointer opacity-70 hover:opacity-100 transition-opacity pointer-events-auto",onClick:o,children:h.jsxs("div",{className:"flex flex-col items-center gap-1",children:[h.jsx("div",{className:"w-10 h-1 bg-gray-600 rounded-full"}),h.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase tracking-widest",children:"Swipe for History"})]})})]})},Ry=({onClose:t,onCodeScanned:e,scanMode:n,setScanMode:r,productsInOrder:i,masterProducts:o})=>{var X;const[s,a]=be.useState([]),[l,c]=be.useState(!1),[p,m]=be.useState(null),[y,v]=be.useState(!1),[N,A]=be.useState(null),S=be.useRef(null),w=be.useRef(null),_=be.useRef(null),T=be.useRef(0),D=be.useRef(1),k=be.useRef(0);be.useEffect(()=>(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[]);const F=be.useCallback(Q=>{v(!0),setTimeout(()=>v(!1),400);const ee=o.find(se=>se.Barcode&&se.Barcode.trim()===Q.trim());if(a(se=>{const de=se.findIndex(Ne=>Ne.code===Q),pe=Date.now();if(de>-1){const Ne=[...se];return Ne[de]={...Ne[de],count:Ne[de].count+1,timestamp:pe},[Ne.splice(de,1)[0],...Ne]}return[{code:Q,product:ee,timestamp:pe,count:1},...se]}),ee){const se=i.find(de=>de.name===ee.ProductName);n==="single"&&se?m({status:"warning",message:"",product:ee}):(e(Q),m({status:"success",message:"",product:ee}))}else m({status:"error",message:`: ${Q}`,product:void 0});setTimeout(()=>m(null),2e3)},[o,i,n,e]),{isInitializing:P,error:M,zoom:j,zoomCapabilities:$,handleZoomChange:I,isTorchOn:E,isTorchSupported:z,toggleTorch:K,trackingBox:ie,isAutoZooming:q,triggerFocus:L,switchCamera:G,scanFromImage:Y}=ky("barcode-reader-container",F),ne=Q=>{if(Q.touches.length===2){const ee=Math.hypot(Q.touches[0].pageX-Q.touches[1].pageX,Q.touches[0].pageY-Q.touches[1].pageY);S.current=ee,D.current=j}else if(Q.touches.length===1){w.current=Q.touches[0].clientY,_.current=Q.touches[0].clientX,T.current=Date.now();const ee=Date.now();ee-k.current<300&&$&&I($.min||1),k.current=ee}},ue=Q=>{if(Q.touches.length===2&&S.current!==null&&$){const se=Math.hypot(Q.touches[0].pageX-Q.touches[1].pageX,Q.touches[0].pageY-Q.touches[1].pageY)/S.current,de=$.max-$.min,pe=(se-1)*de*.8;I(D.current+pe)}else if(Q.touches.length===1&&w.current!==null){const ee=Q.touches[0].clientY-w.current;ee<-50&&!l?(c(!0),w.current=null):ee>50&&l&&(c(!1),w.current=null)}},R=Q=>{if(_.current!==null&&w.current!==null){const ee=Q.changedTouches[0].clientX,se=Q.changedTouches[0].clientY,de=Math.abs(ee-_.current),pe=Math.abs(se-w.current);Date.now()-T.current<300&&de<15&&pe<15&&(A({x:ee,y:se}),L(),setTimeout(()=>A(null),1e3))}S.current=null,w.current=null,_.current=null},V=async Q=>{try{const ee=await Y(Q);F(ee)}catch{m({status:"error",message:" Barcode ",product:void 0}),setTimeout(()=>m(null),2e3)}};return h.jsxs("div",{className:"fixed inset-0 bg-black z-[100] flex flex-col animate-fade-in touch-none overflow-hidden h-screen",style:{height:"100dvh"},onTouchStart:ne,onTouchMove:ue,onTouchEnd:R,children:[h.jsx("style",{children:`
              #barcode-reader-container { width: 100%; height: 100%; background: #000; overflow: hidden; }
              #barcode-reader-container video { object-fit: cover; width: 100%; height: 100%; }
              @keyframes pop-in { 0% { transform: translate(-50%, -40%) scale(0.8); opacity: 0; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; } }
              .animate-pop-in { animation: pop-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
            `}),h.jsx(Py,{onClose:t,onSwitchCamera:G,onToggleTorch:K,isTorchOn:E,isTorchSupported:z,isAutoZooming:q}),h.jsxs("div",{className:"relative flex-grow w-full overflow-hidden bg-black",children:[h.jsx("div",{id:"barcode-reader-container"}),h.jsx(Iy,{isScanning:P,error:M,scanSuccessFlash:y,zoom:j,useSimulatedZoom:!1,trackingBox:ie,focusPoint:N}),p&&h.jsx("div",{className:"absolute top-1/2 left-1/2 w-[85%] max-w-sm z-50 animate-pop-in transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",children:h.jsxs("div",{className:`
                            bg-gray-900/95 backdrop-blur-2xl border p-4 rounded-3xl shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex items-center gap-4
                            ${p.status==="success"?"border-emerald-500 shadow-emerald-900/30":p.status==="warning"?"border-yellow-500 shadow-yellow-900/30":"border-red-500 shadow-red-900/30"}
                        `,children:[p.product?h.jsx("div",{className:"w-14 h-14 rounded-2xl bg-black border border-white/10 overflow-hidden flex-shrink-0",children:h.jsx("img",{src:st(p.product.ImageURL),className:"w-full h-full object-cover",alt:""})}):h.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gray-800 flex items-center justify-center text-red-400",children:h.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:2})})}),h.jsxs("div",{className:"min-w-0 flex-grow",children:[h.jsx("p",{className:`text-[10px] font-black uppercase tracking-widest mb-0.5 ${p.status==="success"?"text-emerald-400":p.status==="warning"?"text-yellow-400":"text-red-400"}`,children:p.status==="success"?"SUCCESS":p.status==="warning"?"ALREADY ADDED":"ERROR"}),h.jsx("h3",{className:"text-white font-bold text-sm truncate",children:((X=p.product)==null?void 0:X.ProductName)||"Unknown Product"}),p.product&&h.jsxs("p",{className:"text-white font-mono font-black text-lg mt-0.5",children:["$",p.product.Price.toFixed(2)]})]})]})}),M&&h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 z-30 p-6 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-red-500/20 text-red-500 rounded-full flex items-center justify-center mb-4",children:h.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:2})})}),h.jsx("p",{className:"text-red-400 font-bold text-sm",children:M})]}),P&&h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black z-30",children:[h.jsx(Pr,{size:"lg"}),h.jsx("p",{className:"text-blue-500 font-black text-[10px] uppercase tracking-widest mt-4 animate-pulse",children:"Initializing..."})]})]}),!l&&h.jsx(Ly,{zoom:j,zoomCapabilities:$,handleZoomChange:I,scanMode:n,setScanMode:r,onOpenHistory:()=>c(!0),onUpload:V}),h.jsx(Ey,{history:s,isOpen:l,setIsOpen:c,onClear:()=>a([])})]})},Wy=({order:t,onSaveSuccess:e,onCancel:n})=>{const{appData:r,currentUser:i,previewImage:o,refreshData:s}=be.useContext(go),a=be.useRef(t),[l,c]=be.useState(t),[p,m]=be.useState(!1),[y,v]=be.useState(""),[N,A]=be.useState(""),[S,w]=be.useState(!1),[_,T]=be.useState("increment"),[D,k]=be.useState(""),[F,P]=be.useState("");be.useEffect(()=>{i&&Vd(i.UserName,"VIEW_EDIT_PAGE",`Opened Order #${t["Order ID"]} for editing`)},[]),be.useEffect(()=>{c(t),a.current=t},[t]),be.useEffect(()=>{var q;if(l["Payment Status"]==="Paid"&&l["Payment Info"]){const L=(q=r.bankAccounts)==null?void 0:q.find(G=>G.BankName===l["Payment Info"]);L&&A(st(L.LogoURL))}},[l["Payment Status"],l["Payment Info"],r.bankAccounts]);const M=q=>{if(!q.target.value)return;const L=new Date(q.target.value);isNaN(L.getTime())||c(G=>({...G,Timestamp:L.toISOString()}))},j=()=>{c(q=>{const L={id:Date.now()+Math.random(),name:"",quantity:1,originalPrice:0,finalPrice:0,total:0,discountPercent:0,colorInfo:"",image:"",cost:0,tags:""},G=[...q.Products,L],Y=parseFloat(String(q["Shipping Fee (Customer)"]))||0,ne=so(G,Y);return{...q,Products:G,...ne}})},$=q=>{if(l.Products.length<=1){alert(" (Cannot remove last item)");return}c(L=>{const G=L.Products.filter((ue,R)=>R!==q),Y=Number(L["Shipping Fee (Customer)"])||0,ne=so(G,Y);return{...L,Products:G,...ne}})},I=q=>{const L=r.products.find(G=>G.Barcode&&G.Barcode.trim()===q.trim());L&&(c(G=>{const Y=[...G.Products],ne=Y.findIndex(V=>V.name===L.ProductName);if(ne>-1){if(_==="increment"){const V={...Y[ne]};V.quantity=(Number(V.quantity)||0)+1,V.total=V.quantity*(Number(V.finalPrice)||0),Y[ne]=V}}else{const V={id:Date.now(),name:L.ProductName,quantity:1,originalPrice:L.Price,finalPrice:L.Price,total:L.Price,discountPercent:0,colorInfo:"",image:L.ImageURL,cost:L.Cost,tags:L.Tags};Y.push(V)}const ue=parseFloat(String(G["Shipping Fee (Customer)"]))||0,R=so(Y,ue);return{...G,Products:Y,...R}}),_==="single"&&w(!1))},E=q=>{const{name:L,value:G}=q.target;c(Y=>{let ne=G;L==="Customer Phone"?(ne=G.replace(/[^0-9]/g,""),ne.length>0&&!ne.startsWith("0")&&(ne="0"+ne)):(L==="Shipping Fee (Customer)"||L==="Internal Cost")&&(G===""||G.endsWith(".")?ne=G:ne=Math.max(0,parseFloat(G)||0));const ue={...Y,[L]:ne};if(L==="Shipping Fee (Customer)"){const R=parseFloat(String(ne))||0,V=so(ue.Products,R);return{...ue,...V}}return L==="Payment Status"&&ne==="Unpaid"&&(ue["Payment Info"]="",A("")),ue})},z=(q,L,G,Y)=>{c(ne=>{const ue=[...ne.Products],R={...ue[q]};if(L==="name"){R.name=G;const se=r.products.find(de=>de.ProductName===G);se?(R.originalPrice=se.Price,R.finalPrice=se.Price,R.cost=se.Cost,R.image=se.ImageURL,R.tags=Y!==void 0?Y:se.Tags):(R.originalPrice=0,R.finalPrice=0,R.cost=0,R.image="",R.tags="")}else L==="finalPrice"||L==="quantity"?G===""||String(G).endsWith(".")?R[L]=G:R[L]=Math.max(L==="quantity"?1:0,parseFloat(G)||0):R[L]=G;const V=parseFloat(String(R.quantity))||0,X=parseFloat(String(R.finalPrice))||0;R.total=V*X,ue[q]=R;const Q=parseFloat(String(ne["Shipping Fee (Customer)"]))||0,ee=so(ue,Q);return{...ne,Products:ue,...ee}})},K=async()=>{if(!window.confirm(` ID: ${l["Order ID"]} ?`)||!i)return;const q=i.UserName||"Unknown User";try{const L=await fetch(`${ti}/api/admin/delete-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:l["Order ID"],team:l.Team,userName:q,telegramMessageId1:l["Telegram Message ID 1"],telegramMessageId2:l["Telegram Message ID 2"],telegramChatId:l.TelegramValue})}),G=await L.json();if(!L.ok||G.status!=="success")throw new Error(G.message||"Delete failed");await Vd(q,"DELETE_ORDER",`Deleted Order #${l["Order ID"]}`),await s(),e()}catch(L){v(`: ${L.message}`)}},ie=async q=>{var Y;if(q.preventDefault(),m(!0),v(""),!l.Products.every(ne=>ne.name&&parseFloat(String(ne.quantity))>0)){v(" ( )"),m(!1);return}const L=(Y=r.shippingMethods)==null?void 0:Y.find(ne=>ne.MethodName===l["Internal Shipping Method"]);if(L!=null&&L.RequireDriverSelection&&!l["Internal Shipping Details"]){v(" (Driver) "),m(!1);return}const G=(i==null?void 0:i.UserName)||"Unknown User";try{const ne=parseFloat(String(l["Shipping Fee (Customer)"]))||0,ue=so(l.Products,ne),R={...l,"Shipping Fee (Customer)":ne,Subtotal:ue.Subtotal,"Grand Total":ue["Grand Total"],"Internal Cost":parseFloat(String(l["Internal Cost"]))||0,"Discount ($)":ue["Discount ($)"],"Total Product Cost ($)":ue["Total Product Cost ($)"],IsVerified:!!l.IsVerified},V=l.Products.map(se=>({...se,quantity:parseFloat(String(se.quantity))||0,finalPrice:parseFloat(String(se.finalPrice))||0,total:(parseFloat(String(se.quantity))||0)*(parseFloat(String(se.finalPrice))||0)}));R["Products (JSON)"]=JSON.stringify(V);const X=my(a.current,R);X&&X.length>0&&await Promise.all(X.map(se=>vy(l["Order ID"],G,se.field,se.oldValue,se.newValue)));const Q=await fetch(`${ti}/api/admin/update-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:l["Order ID"],team:l.Team,userName:G,newData:R})}),ee=await Q.json();if(!Q.ok||ee.status!=="success")throw new Error(ee.message||"Update failed");await s(),e()}catch(ne){v(`: ${ne.message}`)}finally{m(!1)}};return h.jsxs("div",{className:"w-full h-full lg:h-[calc(100vh-40px)] flex flex-col animate-fade-in lg:overflow-hidden",children:[S&&h.jsx(Ry,{onClose:()=>w(!1),onCodeScanned:I,scanMode:_,setScanMode:T,productsInOrder:l.Products,masterProducts:r.products}),h.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 px-1 lg:px-4 pt-2",children:[h.jsxs("div",{children:[h.jsxs("h1",{className:"text-2xl font-black text-white uppercase tracking-tighter italic flex items-center gap-3",children:[h.jsx("span",{className:"w-1.5 h-6 bg-blue-600 rounded-full"}),"Edit Order"]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[h.jsxs("span",{className:"text-[10px] font-mono font-bold text-gray-500 bg-gray-900 px-2 py-0.5 rounded border border-gray-800",children:["#",l["Order ID"]]}),h.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:l.Team}),h.jsxs("div",{className:"flex items-center gap-1 bg-gray-900 px-2 py-0.5 rounded border border-gray-800",children:[h.jsx("label",{htmlFor:"order-date",className:"text-[10px] font-black text-gray-600 uppercase cursor-pointer",children:"Date"}),h.jsx("input",{id:"order-date",type:"datetime-local",value:gy(l.Timestamp),onChange:M,className:"bg-transparent border-none text-[10px] font-bold text-blue-400 p-0 focus:ring-0 h-4",style:{colorScheme:"dark"}})]})]})]}),h.jsx("button",{onClick:n,className:"px-6 py-2.5 bg-gray-800 border border-gray-700 hover:bg-gray-700 text-gray-400 font-black rounded-xl uppercase text-[10px] tracking-widest transition-all",children:""})]}),y&&h.jsxs("div",{className:"flex-shrink-0 mb-4 mx-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 flex items-center gap-3 animate-shake",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:"2"})}),h.jsx("span",{className:"font-bold text-xs",children:y})]}),h.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-6 overflow-hidden px-1 lg:px-4 pb-4",children:[h.jsx("div",{className:"w-full lg:w-[380px] xl:w-[420px] flex-shrink-0 h-full overflow-hidden",children:h.jsx(Ny,{formData:l,appData:r,onChange:E,onProvinceSelect:q=>{c(L=>({...L,Location:q})),k(""),P("")},onDistrictChange:q=>{k(q),P("")},onSangkatChange:P,onShippingMethodSelect:q=>c(L=>({...L,"Internal Shipping Method":q.MethodName,"Internal Shipping Details":q.RequireDriverSelection?"":q.MethodName})),onDriverSelect:q=>c(L=>({...L,"Internal Shipping Details":q})),onBankChange:q=>{var Y;const L=q.target.value;c(ne=>({...ne,"Payment Info":L}));const G=(Y=r.bankAccounts)==null?void 0:Y.find(ne=>ne.BankName===L);A(G?st(G.LogoURL):"")},selectedDistrict:D,selectedSangkat:F,bankLogo:N})}),h.jsxs("div",{className:"flex-1 flex flex-col gap-4 overflow-hidden h-full",children:[h.jsx(_y,{products:l.Products,masterProducts:r.products,onProductChange:z,onAddProduct:j,onRemoveProduct:$,onPreviewImage:o,onScanBarcode:()=>w(!0)}),h.jsx(Ay,{subtotal:Number(l.Subtotal)||0,grandTotal:Number(l["Grand Total"])||0,shippingFee:l["Shipping Fee (Customer)"],onShippingFeeChange:E,onSave:ie,onDelete:K,loading:p})]})]})]})},My=t=>be.useMemo(()=>t.reduce((e,n)=>({grandTotal:e.grandTotal+(Number(n["Grand Total"])||0),internalCost:e.internalCost+(Number(n["Internal Cost"])||0),count:e.count+1,paidCount:e.paidCount+(n["Payment Status"]==="Paid"?1:0),unpaidCount:e.unpaidCount+(n["Payment Status"]==="Unpaid"?1:0)}),{grandTotal:0,internalCost:0,count:0,paidCount:0,unpaidCount:0}),[t]),Dy=({totals:t,isVisible:e,showSelection:n})=>t.count===0?null:h.jsxs("tr",{className:"bg-blue-900/30 border-b-2 border-blue-500/20 sticky top-0 z-20 backdrop-blur-md shadow-lg",children:[n&&h.jsx("td",{className:"px-4 py-4"}),e("index")&&h.jsx("td",{className:"px-4 py-4 text-center font-black text-blue-400 text-[clamp(12px,0.9vw,14px)]",children:t.count}),e("actions")&&h.jsx("td",{className:"px-4 py-4"}),e("customerName")&&h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"font-black text-white uppercase tracking-widest text-[clamp(11px,0.8vw,13px)]",children:"Grand Total ()"})}),e("productInfo")&&h.jsx("td",{className:"px-6 py-4"}),e("location")&&h.jsx("td",{className:"px-6 py-4"}),e("pageInfo")&&h.jsx("td",{className:"px-6 py-4"}),e("fulfillment")&&h.jsx("td",{className:"px-6 py-4"}),e("total")&&h.jsx("td",{className:"px-6 py-4",children:h.jsxs("span",{className:"font-black text-emerald-400 tracking-tighter shadow-emerald-500/20 drop-shadow-sm text-[clamp(16px,1.2vw,20px)]",children:["$",t.grandTotal.toLocaleString(void 0,{minimumFractionDigits:2})]})}),e("shippingService")&&h.jsx("td",{className:"px-6 py-4"}),e("shippingCost")&&h.jsx("td",{className:"px-6 py-4",children:h.jsxs("span",{className:"font-black text-orange-400 font-mono text-[clamp(13px,0.9vw,15px)]",children:["$",t.internalCost.toLocaleString(void 0,{minimumFractionDigits:2})]})}),e("status")&&h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex flex-col gap-1.5 items-start",children:[t.paidCount>0&&h.jsxs("span",{className:"font-black text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20 uppercase tracking-wider whitespace-nowrap text-[clamp(10px,0.7vw,12px)]",children:["Paid: ",t.paidCount]}),t.unpaidCount>0&&h.jsxs("span",{className:"font-black text-red-400 bg-red-500/10 px-2 py-0.5 rounded border border-red-500/20 uppercase tracking-wider whitespace-nowrap text-[clamp(10px,0.7vw,12px)]",children:["Unpaid: ",t.unpaidCount]})]})}),e("date")&&h.jsx("td",{className:"px-4 py-4"}),e("print")&&h.jsx("td",{className:"px-4 py-4"}),e("check")&&h.jsx("td",{className:"px-2 py-4"}),e("orderId")&&h.jsx("td",{className:"px-2 py-4"})]}),ih=({totals:t})=>t.count===0?null:h.jsxs("div",{className:"bg-blue-900/20 backdrop-blur-xl border border-blue-500/30 rounded-[2.2rem] p-5 shadow-2xl relative overflow-hidden animate-fade-in",children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("h3",{className:"text-sm font-black text-blue-300 uppercase tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"w-1.5 h-4 bg-blue-500 rounded-full"}),"Grand Total"]}),h.jsxs("span",{className:"text-[10px] font-bold text-gray-400 bg-black/30 px-3 py-1 rounded-full",children:[t.count," Orders"]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[h.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl border border-white/5",children:[h.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase mb-1",children:"Total Revenue"}),h.jsxs("p",{className:"text-xl font-black text-emerald-400 tracking-tighter",children:["$",t.grandTotal.toLocaleString()]})]}),h.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl border border-white/5",children:[h.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase mb-1",children:"Total Cost"}),h.jsxs("p",{className:"text-lg font-black text-orange-400 tracking-tighter",children:["$",t.internalCost.toLocaleString()]})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"flex-1 bg-emerald-500/10 p-2 rounded-xl border border-emerald-500/20 flex justify-between items-center px-3",children:[h.jsx("span",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-widest",children:"PAID"}),h.jsx("span",{className:"text-sm font-black text-white",children:t.paidCount})]}),h.jsxs("div",{className:"flex-1 bg-red-500/10 p-2 rounded-xl border border-red-500/20 flex justify-between items-center px-3",children:[h.jsx("span",{className:"text-[9px] font-black text-red-500 uppercase tracking-widest",children:"UNPAID"}),h.jsx("span",{className:"text-sm font-black text-white",children:t.unpaidCount})]})]})]}),Fy=({orders:t,totals:e,visibleColumns:n,selectedIds:r,onToggleSelect:i,onToggleSelectAll:o,onEdit:s,handlePrint:a,handleCopy:l,handleCopyTemplate:c,copiedId:p,copiedTemplateId:m,toggleOrderVerified:y,updatingIds:v})=>{const{appData:N,previewImage:A}=be.useContext(go),S=be.useRef(null),[w,_]=be.useState(0),T=88,D=5,k=ie=>!n||n.has(ie),F=t.length>0&&t.every(ie=>r.has(ie["Order ID"])),{virtualItems:P,totalHeight:M,paddingTop:j}=be.useMemo(()=>{var ue;const ie=t.length*T,q=((ue=S.current)==null?void 0:ue.clientHeight)||800;let L=Math.floor(w/T),G=Math.min(t.length-1,Math.floor((w+q)/T));L=Math.max(0,L-D),G=Math.min(t.length-1,G+D);const Y=[];for(let R=L;R<=G;R++)Y.push({index:R,data:t[R]});const ne=L*T;return{virtualItems:Y,totalHeight:ie,paddingTop:ne}},[t,w]),$=ie=>{_(ie.currentTarget.scrollTop)},I=ie=>{if(!ie||!N.phoneCarriers)return null;const L=ie.replace(/\s/g,"").substring(0,3),G=N.phoneCarriers.find(Y=>Y.Prefixes.split(",").map(ne=>ne.trim()).includes(L));return G?st(G.CarrierLogoURL):null},E=ie=>{if(!ie||!N.shippingMethods)return null;const q=N.shippingMethods.find(L=>L.MethodName===ie);return q?st(q.LogosURL):null},z=ie=>{let q=(ie||"").replace(/[^0-9]/g,"");return q.length>0&&(q="0"+q.replace(/^0+/,"")),q},K=ie=>{if(!ie)return new Date;const q=ie.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(q)return new Date(parseInt(q[1]),parseInt(q[2])-1,parseInt(q[3]),parseInt(q[4]),parseInt(q[5]));try{const L=new Date(ie);return isNaN(L.getTime())?new Date:L}catch{return new Date}};return h.jsxs("div",{className:"page-card !p-0 shadow-2xl border-white/5 bg-gray-900/60 backdrop-blur-3xl rounded-[2.5rem] flex flex-col h-[calc(100vh-220px)]",children:[h.jsx("div",{className:"flex-shrink-0 z-20 bg-gray-900 rounded-t-[2.5rem] border-b border-white/10",children:h.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed"},children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-gray-800/80",children:[o&&h.jsx("th",{className:"px-4 py-6 w-12 text-center",children:h.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-600 bg-gray-900 text-blue-500 cursor-pointer focus:ring-blue-500/20",checked:F,onChange:()=>o(t.map(ie=>ie["Order ID"]))})}),k("index")&&h.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-12 text-[clamp(10px,0.8vw,12px)]",children:"#"}),k("actions")&&h.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-24 text-[clamp(10px,0.8vw,12px)]",children:"Command"}),k("customerName")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-56 text-[clamp(10px,0.8vw,12px)]",children:"Merchant/Client"}),k("productInfo")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-44 text-[clamp(10px,0.8vw,12px)]",children:"Assets"}),k("location")&&h.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-40 text-[clamp(10px,0.8vw,12px)]",children:"Geography"}),k("pageInfo")&&h.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-40 text-[clamp(10px,0.8vw,12px)]",children:"Source Page"}),k("fulfillment")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Fulfillment"}),k("total")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Valuation"}),k("shippingService")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-48 text-[clamp(10px,0.8vw,12px)]",children:"Logistics"}),k("shippingCost")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-28 text-[clamp(10px,0.8vw,12px)]",children:"Exp. Cost"}),k("status")&&h.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Status"}),k("date")&&h.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-24 text-[clamp(10px,0.8vw,12px)]",children:"Time"}),k("print")&&h.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Output"}),k("check")&&h.jsx("th",{className:"px-2 py-6 font-normal uppercase tracking-[0.15em] text-center text-emerald-500/80 w-14 text-[9px]",children:"VERIFIED"}),k("orderId")&&h.jsx("th",{className:"px-2 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-16 text-[clamp(10px,0.8vw,12px)]",children:"Node ID"})]})}),h.jsx("tbody",{className:"bg-[#0f172a]",children:h.jsx(Dy,{totals:e,isVisible:k,showSelection:!!i})})]})}),h.jsx("div",{ref:S,className:"flex-grow overflow-y-auto custom-scrollbar",onScroll:$,children:h.jsx("div",{style:{height:`${M}px`,position:"relative"},children:h.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed",transform:`translateY(${j}px)`},children:[h.jsx("thead",{className:"invisible h-0",children:h.jsxs("tr",{children:[o&&h.jsx("th",{className:"w-12"}),k("index")&&h.jsx("th",{className:"w-12"}),k("actions")&&h.jsx("th",{className:"w-24"}),k("customerName")&&h.jsx("th",{className:"w-56"}),k("productInfo")&&h.jsx("th",{className:"w-44"}),k("location")&&h.jsx("th",{className:"w-40"}),k("pageInfo")&&h.jsx("th",{className:"w-40"}),k("fulfillment")&&h.jsx("th",{className:"w-32"}),k("total")&&h.jsx("th",{className:"w-32"}),k("shippingService")&&h.jsx("th",{className:"w-48"}),k("shippingCost")&&h.jsx("th",{className:"w-28"}),k("status")&&h.jsx("th",{className:"w-32"}),k("date")&&h.jsx("th",{className:"w-24"}),k("print")&&h.jsx("th",{className:"w-32"}),k("check")&&h.jsx("th",{className:"w-14"}),k("orderId")&&h.jsx("th",{className:"w-16"})]})}),h.jsx("tbody",{className:"divide-y divide-white/5",children:P.map(({index:ie,data:q})=>{var Ee;const L=(Ee=N.pages)==null?void 0:Ee.find(Ie=>Ie.PageName===q.Page),G=L?st(L.PageLogoURL):"",Y=z(q["Customer Phone"]),ne=I(Y),ue=p===q["Order ID"],R=m===q["Order ID"],V=E(q["Internal Shipping Method"]),X=q["Order ID"],Q=q.IsVerified===!0||String(q.IsVerified).toUpperCase()==="TRUE",ee=v.has(X),se=r.has(X),de=ie>t.length-3&&t.length>4,pe=de?"bottom-full mb-3":"top-full mt-3",Ne=de?"-bottom-2 border-r border-b":"-top-2 border-t border-l",Ce=K(q.Timestamp);return h.jsxs("tr",{className:`${Q?"bg-emerald-500/[0.03]":se?"bg-blue-500/10":"hover:bg-white/[0.02]"} transition-all group relative`,style:{height:`${T}px`},children:[i&&h.jsx("td",{className:"px-4 py-5 text-center",children:h.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-700 bg-gray-950 text-blue-500 cursor-pointer transition-all",checked:se,onChange:()=>i(X)})}),k("index")&&h.jsx("td",{className:"px-4 py-5 text-center font-bold text-gray-600 text-[clamp(11px,0.8vw,13px)]",children:ie+1}),k("actions")&&h.jsx("td",{className:"px-4 py-5 text-center",children:h.jsx("button",{onClick:()=>s&&s(q),className:"text-blue-400/80 hover:text-white bg-blue-400/5 hover:bg-blue-600 px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border border-blue-400/10 active:scale-95 shadow-md",children:"Edit"})}),k("customerName")&&h.jsxs("td",{className:"px-6 py-5",children:[h.jsx("div",{className:"font-black text-gray-100 truncate mb-1 leading-tight tracking-tight text-[clamp(14px,1.1vw,16px)]",children:q["Customer Name"]}),h.jsxs("div",{className:"flex items-center gap-2",children:[ne&&h.jsx("img",{src:ne,className:"w-4 h-4 object-contain opacity-80",alt:"carrier"}),h.jsx("div",{className:"text-blue-400/80 font-mono font-black tracking-tighter text-[clamp(12px,0.9vw,14px)]",children:Y})]})]}),k("productInfo")&&h.jsx("td",{className:"px-6 py-5 relative overflow-visible",children:h.jsxs("div",{className:"group/prod flex flex-col gap-1 cursor-help",children:[q.Products.slice(0,2).map((Ie,He)=>h.jsxs("div",{className:"bg-black/40 p-1.5 rounded-lg border border-white/5 flex flex-col",children:[h.jsx("span",{className:"font-bold text-gray-300 line-clamp-1 text-[clamp(11px,0.8vw,12px)]",children:Ie.name}),h.jsxs("span",{className:"text-blue-400/80 font-black mt-0.5 text-[clamp(10px,0.7vw,11px)]",children:["x",Ie.quantity]})]},He)),q.Products.length>2&&h.jsxs("p",{className:"text-[8px] text-gray-600 font-black ml-1 uppercase tracking-widest",children:["+ ",q.Products.length-2," items"]}),h.jsxs("div",{className:`invisible group-hover/prod:visible opacity-0 group-hover/prod:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${pe} w-80 p-5 bg-[#1a2235] border border-white/10 rounded-[2.5rem] shadow-[0_40px_100px_rgba(0,0,0,0.8)] transition-all duration-300 pointer-events-none backdrop-blur-3xl`,children:[h.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-[0.3em] mb-4 border-b border-white/5 pb-3",children:"Operational Asset Data"}),h.jsx("div",{className:"space-y-3 max-h-[350px] overflow-y-auto custom-scrollbar pr-1",children:q.Products.map((Ie,He)=>{var Ke;const ye=(Ke=N.products)==null?void 0:Ke.find(Oe=>Oe.ProductName===Ie.name),re=Ie.image||(ye==null?void 0:ye.ImageURL)||"";return h.jsxs("div",{className:"flex items-center gap-4 text-left p-2.5 bg-black/30 rounded-2xl border border-white/5",children:[h.jsx("div",{className:"w-14 h-14 flex-shrink-0 bg-gray-900 rounded-xl border border-gray-800 overflow-hidden shadow-inner",children:h.jsx("img",{src:st(re),className:"w-full h-full object-cover",alt:Ie.name,onError:Oe=>Oe.currentTarget.src="https://placehold.co/100x100/1f2937/4b5563?text=N/A"})}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx("p",{className:"font-black text-white leading-tight mb-1 line-clamp-2 text-xs",children:Ie.name}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2.5 py-0.5 rounded-lg border border-blue-500/10",children:["x",Ie.quantity]}),Ie.colorInfo&&h.jsxs("span",{className:"text-[9px] text-purple-400 font-bold uppercase",children:["Node: ",Ie.colorInfo]})]})]})]},He)})}),h.jsx("div",{className:`absolute ${Ne} left-1/2 -translate-x-1/2 w-5 h-5 bg-[#1a2235] border-white/10 rotate-45`})]})]})}),k("location")&&h.jsx("td",{className:"px-4 py-5 relative overflow-visible",children:h.jsxs("div",{className:"group/loc cursor-help",children:[h.jsx("div",{className:"font-black text-gray-200 leading-tight truncate text-[clamp(12px,0.9vw,14px)]",children:q.Location}),h.jsx("div",{className:"font-bold text-gray-600 mt-1 line-clamp-1 text-[clamp(10px,0.7vw,12px)]",children:q["Address Details"]}),h.jsxs("div",{className:`invisible group-hover/loc:visible opacity-0 group-hover/loc:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${pe} w-72 p-5 bg-[#1a2235] border border-white/10 rounded-[2.5rem] shadow-[0_40px_100px_rgba(0,0,0,0.8)] transition-all duration-300 pointer-events-none backdrop-blur-3xl`,children:[h.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-[0.3em] mb-3 border-b border-white/5 pb-2",children:"Geographic Assignment"}),h.jsxs("div",{className:"space-y-4 text-left",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-[8px] font-black text-gray-600 uppercase tracking-widest",children:"Region Node"}),h.jsx("p",{className:"text-sm font-black text-white mt-0.5",children:q.Location})]}),h.jsxs("div",{className:"bg-black/30 p-3.5 rounded-2xl border border-white/5",children:[h.jsx("span",{className:"text-[8px] font-black text-gray-600 uppercase block mb-1.5 tracking-widest",children:"Local Matrix"}),h.jsx("p",{className:"text-[11px] text-gray-300 leading-relaxed font-bold",children:q["Address Details"]||"No precise location data"})]})]}),h.jsx("div",{className:`absolute ${Ne} left-1/2 -translate-x-1/2 w-5 h-5 bg-[#1a2235] border-white/10 rotate-45`})]})]})}),k("pageInfo")&&h.jsx("td",{className:"px-4 py-5",children:h.jsxs("div",{className:"flex items-center gap-3",children:[G?h.jsx("img",{src:G,className:"w-8 h-8 rounded-full border border-white/10 shadow-sm object-cover",alt:"logo"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border border-white/5 flex items-center justify-center text-[7px] text-gray-600 font-bold uppercase",children:"Null"}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("span",{className:"font-black text-gray-300 block truncate leading-none mb-1 text-[clamp(12px,0.9vw,13px)]",children:q.Page}),h.jsx("span",{className:"text-[9px] text-gray-600 uppercase font-black tracking-widest",children:q.Team})]})]})}),k("fulfillment")&&h.jsx("td",{className:"px-6 py-5",children:h.jsx("span",{className:"font-bold text-gray-300 bg-gray-800 px-2 py-1 rounded border border-white/5 text-[clamp(11px,0.8vw,12px)]",children:q["Fulfillment Store"]})}),k("total")&&h.jsxs("td",{className:"px-6 py-5 font-black text-blue-400 tracking-tighter text-[clamp(16px,1.2vw,18px)]",children:["$",q["Grand Total"].toFixed(2)]}),k("shippingService")&&h.jsx("td",{className:"px-6 py-5",children:h.jsxs("div",{className:"flex items-center gap-2.5",children:[V&&h.jsx("img",{src:V,className:"w-5 h-5 rounded-lg object-contain bg-gray-950 p-0.5 border border-white/5",alt:"shipping"}),h.jsx("span",{className:"text-orange-400/80 font-black uppercase truncate tracking-tight text-[clamp(10px,0.8vw,12px)]",children:q["Internal Shipping Method"]||"-"})]})}),k("shippingCost")&&h.jsxs("td",{className:"px-6 py-5 text-gray-400 font-mono font-black tracking-tighter text-[clamp(13px,0.9vw,15px)]",children:["$",(Number(q["Internal Cost"])||0).toFixed(2)]}),k("status")&&h.jsx("td",{className:"px-6 py-5",children:h.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border ${q["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:q["Payment Status"]})}),k("date")&&h.jsx("td",{className:"px-4 py-5",children:h.jsxs("div",{className:"flex flex-col items-start",children:[h.jsx("span",{className:"font-bold text-gray-400 text-[clamp(11px,0.8vw,12px)]",children:Ce.toLocaleDateString("km-KH")}),h.jsx("span",{className:"font-mono text-blue-500/80 font-black text-[clamp(10px,0.7vw,11px)]",children:Ce.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]})}),k("print")&&h.jsx("td",{className:"px-4 py-5 text-center",children:h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("button",{onClick:()=>c(q),className:`p-2.5 rounded-xl transition-all border active:scale-90 ${R?"bg-indigo-500/20 border-indigo-500/50 text-indigo-400":"bg-gray-800 text-gray-400 border-white/10 hover:text-white hover:bg-gray-700"}`,title:"Copy Telegram Template",children:R?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})}),h.jsx("button",{onClick:()=>a(q),className:"text-emerald-400/60 hover:text-white bg-emerald-400/5 hover:bg-emerald-600 p-2.5 rounded-xl transition-all border border-emerald-400/10 active:scale-90",title:"Print Label",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:h.jsx("path",{d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})]})}),k("check")&&h.jsx("td",{className:"px-2 py-5 text-center",children:h.jsxs("div",{className:"relative flex items-center justify-center",children:[h.jsx("input",{type:"checkbox",checked:Q,onChange:()=>y(X,Q),className:`h-6 w-6 rounded-lg border-gray-700 bg-gray-950 text-emerald-500 focus:ring-emerald-500/10 transition-all ${ee?"opacity-20":"hover:scale-110 active:scale-150 cursor-pointer"}`}),ee&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:h.jsx(Pr,{size:"sm"})})]})}),k("orderId")&&h.jsx("td",{className:"px-2 py-5 text-center",children:h.jsx("button",{onClick:()=>l(q["Order ID"]),className:`p-2 rounded-xl transition-all border ${ue?"bg-green-500/20 border-green-500/40 text-green-400":"bg-gray-800 border-white/5 text-gray-500 hover:text-blue-400 active:scale-90"}`,children:h.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:ue?"":"ID"})})})]},X)})})]})})})]})},jy=({orders:t,totals:e,visibleColumns:n,selectedIds:r,onToggleSelect:i,onEdit:o,handlePrint:s,handleCopy:a,handleCopyTemplate:l,copiedId:c,copiedTemplateId:p,toggleOrderVerified:m,updatingIds:y})=>{const{appData:v,previewImage:N}=be.useContext(go),[A,S]=be.useState(()=>{const L=localStorage.getItem("mobile_view_preference");return L==="card"||L==="table"?L:"table"}),[w,_]=be.useState(null),T=L=>{S(L),localStorage.setItem("mobile_view_preference",L)},[D,k]=be.useState(20),F=be.useMemo(()=>t.slice(0,D),[t,D]),P=()=>{k(L=>L+20)},M=!n||n.has("productInfo"),j=!n||n.has("actions"),$=!n||n.has("print"),I=!n||n.has("check"),E=!n||n.has("fulfillment"),z=L=>{if(!L||!v.phoneCarriers)return null;const Y=L.replace(/\s/g,"").substring(0,3),ne=v.phoneCarriers.find(ue=>ue.Prefixes.split(",").map(R=>R.trim()).includes(Y));return ne?st(ne.CarrierLogoURL):null},K=L=>{if(!L||!v.shippingMethods)return null;const G=v.shippingMethods.find(Y=>Y.MethodName===L);return G?st(G.LogosURL):null},ie=L=>{let G=(L||"").replace(/[^0-9]/g,"");return G.length>0&&(G="0"+G.replace(/^0+/,"")),G},q=L=>{if(!L)return"";const G=L.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(G)return new Date(parseInt(G[1]),parseInt(G[2])-1,parseInt(G[3]),parseInt(G[4]),parseInt(G[5])).toLocaleDateString("km-KH");try{const Y=new Date(L);return isNaN(Y.getTime())?L:Y.toLocaleDateString("km-KH")}catch{return L}};return h.jsxs("div",{className:"space-y-5 pb-40",children:[h.jsx(ih,{totals:e}),h.jsxs("div",{className:"flex justify-between items-center px-2",children:[h.jsxs("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:[t.length," Entries"]}),h.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-xl border border-white/10",children:[h.jsx("button",{onClick:()=>T("card"),className:`p-2 rounded-lg transition-all ${A==="card"?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Card View",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4z"})})}),h.jsx("button",{onClick:()=>T("table"),className:`p-2 rounded-lg transition-all ${A==="table"?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Table View",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),A==="table"?h.jsx("div",{className:"bg-[#0f172a] border border-white/10 rounded-3xl overflow-hidden shadow-2xl animate-fade-in relative",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-[#0f172a] border-b border-white/10 text-[10px] text-gray-400 font-black uppercase tracking-wider",children:[h.jsx("th",{className:"p-3 sticky left-0 z-20 bg-[#0f172a] border-r border-white/10 min-w-[130px] shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)]",children:"Customer"}),E&&h.jsx("th",{className:"p-3 min-w-[100px] text-gray-400",children:"Store"}),h.jsx("th",{className:"p-3 text-right min-w-[80px]",children:"Total"}),h.jsx("th",{className:"p-3 text-center min-w-[90px]",children:"Status"}),h.jsx("th",{className:"p-3 text-center min-w-[50px]",children:"Act"}),h.jsx("th",{className:"p-3 min-w-[100px]",children:"Date"})]})}),h.jsx("tbody",{className:"divide-y divide-white/5 text-xs",children:F.map(L=>{const G=r.has(L["Order ID"]),Y=L.IsVerified===!0||String(L.IsVerified).toUpperCase()==="TRUE",ne=p===L["Order ID"];return h.jsxs("tr",{className:`${G?"bg-blue-900/20":Y?"bg-emerald-900/5":"hover:bg-white/5"} transition-colors`,children:[h.jsx("td",{className:"p-3 sticky left-0 z-20 bg-gray-900 border-r border-white/10 shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)]",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"font-bold text-white truncate max-w-[110px]",children:L["Customer Name"]}),h.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:L["Customer Phone"]})]})}),E&&h.jsx("td",{className:"p-3 text-gray-300 font-bold text-[10px]",children:L["Fulfillment Store"]}),h.jsxs("td",{className:"p-3 text-right font-black text-blue-400",children:["$",L["Grand Total"].toFixed(2)]}),h.jsx("td",{className:"p-3 text-center",children:h.jsx("span",{className:`px-2 py-0.5 rounded text-[8px] font-black uppercase border ${L["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:L["Payment Status"]})}),h.jsx("td",{className:"p-3 text-center",children:h.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[h.jsx("button",{onClick:()=>l(L),className:`text-gray-400 hover:text-white transition-all active:scale-90 ${ne?"text-indigo-400":""}`,children:ne?h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})}),o&&h.jsx("button",{onClick:()=>o(L),className:"text-gray-400 hover:text-white",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})}),h.jsx("td",{className:"p-3 text-[9px] text-gray-500 font-bold",children:q(L.Timestamp)})]},L["Order ID"])})})]})})}):F.map(L=>{var de,pe;const G=(de=v.pages)==null?void 0:de.find(Ne=>Ne.PageName===L.Page),Y=G?st(G.PageLogoURL):"",ne=ie(L["Customer Phone"]),ue=z(ne),R=L.IsVerified===!0||String(L.IsVerified).toUpperCase()==="TRUE",V=y.has(L["Order ID"]),X=r.has(L["Order ID"]),Q=K(L["Internal Shipping Method"]),ee=c===L["Order ID"],se=p===L["Order ID"];return h.jsxs("div",{className:`
                                relative rounded-[2.5rem] p-5 shadow-2xl transition-all duration-300 overflow-hidden group
                                ${X?"bg-blue-900/20 border-2 border-blue-500/50 shadow-blue-900/30":R?"bg-emerald-900/10 border border-emerald-500/20 shadow-emerald-900/10":"bg-[#1e293b]/70 border border-white/5 shadow-black/40 backdrop-blur-xl"}
                            `,children:[X&&h.jsx("div",{className:"absolute inset-0 bg-blue-500/5 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[i&&h.jsx("div",{className:"relative z-10",children:h.jsx("input",{type:"checkbox",className:"h-6 w-6 rounded-xl border-gray-600 bg-gray-800 text-blue-500 focus:ring-blue-500/20 cursor-pointer transition-all",checked:X,onChange:()=>i(L["Order ID"])})}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:()=>a(L["Order ID"]),className:`
                                                flex items-center gap-2 px-3 py-1 rounded-xl border transition-all active:scale-95
                                                ${ee?"bg-emerald-500/20 border-emerald-500/50 text-emerald-400":"bg-black/30 border-white/5 text-gray-400 hover:text-white"}
                                            `,children:[h.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest font-mono",children:["#",L["Order ID"].substring(0,8)]}),ee&&h.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})]}),h.jsx("button",{onClick:()=>l(L),className:`
                                                flex items-center justify-center w-8 h-8 rounded-xl border transition-all active:scale-95
                                                ${se?"bg-indigo-500/20 border-indigo-500/50 text-indigo-400":"bg-black/30 border-white/5 text-gray-400 hover:text-white"}
                                            `,children:se?h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]}),h.jsxs("div",{className:"flex flex-col items-end",children:[h.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[8px] font-black uppercase tracking-wider border ${L["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:L["Payment Status"]}),h.jsx("span",{className:"text-[9px] text-gray-600 font-bold mt-1",children:q(L.Timestamp)})]})]}),h.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[h.jsxs("div",{className:"relative w-14 h-14 rounded-2xl bg-black/40 border border-white/10 p-1 flex-shrink-0",children:[Y?h.jsx("img",{src:Y,className:"w-full h-full object-cover rounded-xl",alt:"page logo"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 text-[10px] font-black",children:"N/A"}),h.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-900 rounded-lg p-0.5 border border-gray-700",children:ue&&h.jsx("img",{src:ue,className:"w-4 h-4 object-contain",alt:"carrier"})})]}),h.jsxs("div",{className:"flex-grow min-w-0",children:[h.jsx("h3",{className:"text-white font-black text-sm truncate leading-tight mb-1",children:L["Customer Name"]}),h.jsx("p",{className:"text-blue-400 font-mono font-bold text-xs tracking-wide mb-1",children:ne}),h.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-gray-500 font-bold truncate",children:[h.jsxs("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsx("span",{className:"truncate",children:L.Location||"N/A"})]})]})]}),M&&L.Products&&L.Products.length>0&&h.jsx("div",{className:"bg-black/20 rounded-2xl p-3 border border-white/5 mb-5 shadow-inner",children:h.jsxs("div",{className:"flex overflow-x-auto gap-3 pb-2 snap-x no-scrollbar",children:[L.Products.slice(0,4).map((Ne,Ce)=>{var He;const Ee=(He=v.products)==null?void 0:He.find(ye=>ye.ProductName===Ne.name),Ie=Ne.image||(Ee==null?void 0:Ee.ImageURL)||"";return h.jsxs("div",{className:"flex-shrink-0 w-[200px] snap-center bg-gray-800/50 rounded-xl p-2 border border-white/5 flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-lg bg-black/50 flex-shrink-0 overflow-hidden border border-white/5",onClick:()=>N(st(Ie)),children:h.jsx("img",{src:st(Ie),className:"w-full h-full object-cover",alt:""})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("p",{className:"text-[11px] font-bold text-gray-200 truncate",children:Ne.name}),h.jsxs("div",{className:"flex justify-between items-center mt-0.5",children:[h.jsxs("span",{className:"text-[9px] text-gray-500 font-bold",children:["Qty: ",h.jsx("span",{className:"text-white",children:Ne.quantity})]}),Ne.colorInfo&&h.jsx("span",{className:"text-[8px] bg-purple-500/10 text-purple-400 px-1.5 rounded uppercase font-bold",children:Ne.colorInfo})]})]})]},Ce)}),L.Products.length>4&&h.jsxs("button",{onClick:()=>_(L),className:"flex-shrink-0 w-[100px] snap-center bg-gray-800/80 rounded-xl p-2 border border-white/10 flex flex-col items-center justify-center gap-2 hover:bg-gray-700 transition-colors active:scale-95",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600/20 text-blue-400 flex items-center justify-center border border-blue-500/30",children:h.jsxs("span",{className:"font-black text-sm",children:["+",L.Products.length-4]})}),h.jsx("span",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-wider",children:"View All"})]})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[h.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:[h.jsx("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Total Amount"}),h.jsxs("p",{className:"text-lg font-black text-white tracking-tight",children:["$",L["Grand Total"].toFixed(2)]})]}),h.jsx("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Shipping"}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[Q&&h.jsx("img",{src:Q,className:"w-3.5 h-3.5 object-contain",alt:""}),h.jsx("span",{className:"text-xs font-bold text-orange-400",children:(pe=L["Internal Shipping Method"])==null?void 0:pe.substring(0,10)})]})]}),L["Internal Cost"]>0&&h.jsxs("span",{className:"text-[9px] font-mono text-gray-600 font-bold bg-black/20 px-1.5 py-0.5 rounded",children:["-$",L["Internal Cost"]]})]})})]}),h.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-white/5",children:[j&&h.jsx("button",{onClick:()=>o&&o(L),className:"flex-1 py-3 bg-blue-600/10 text-blue-400 rounded-xl border border-blue-500/20 font-black text-[10px] uppercase tracking-widest hover:bg-blue-600 hover:text-white transition-all active:scale-95",children:"Edit"}),$&&h.jsx("button",{onClick:()=>s(L),className:"w-12 h-12 flex items-center justify-center bg-gray-800 text-gray-400 rounded-xl border border-white/10 hover:text-white active:scale-90 transition-all",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})}),I&&h.jsxs("div",{className:"ml-auto relative",children:[h.jsx("input",{type:"checkbox",checked:R,onChange:()=>m(L["Order ID"],R),className:`w-12 h-12 rounded-xl appearance-none border transition-all cursor-pointer ${R?"bg-emerald-500 border-emerald-400":"bg-gray-800 border-gray-600"}`}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:V?h.jsx(Pr,{size:"sm"}):R?h.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):h.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase",children:"Check"})})]})]})]},L["Order ID"])}),D<t.length&&h.jsx("div",{className:"flex justify-center pt-4",children:h.jsxs("button",{onClick:P,className:"px-8 py-3 bg-gray-800 text-white rounded-full text-xs font-black uppercase tracking-widest border border-white/10 shadow-lg active:scale-95 transition-all",children:["Load More (",t.length-D," remaining)"]})}),w&&h.jsx(tc,{isOpen:!0,onClose:()=>_(null),maxWidth:"max-w-lg",children:h.jsxs("div",{className:"p-6 bg-[#0f172a] rounded-[2rem] border border-white/10 shadow-2xl",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/10 pb-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight",children:"Products List"}),h.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:["Order #",w["Order ID"].substring(0,8)]})]}),h.jsx("button",{onClick:()=>_(null),className:"p-2 bg-gray-800 rounded-full text-gray-400 hover:text-white transition-all active:scale-90",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:w.Products.map((L,G)=>{var ue,R;const Y=(ue=v.products)==null?void 0:ue.find(V=>V.ProductName===L.name),ne=L.image||(Y==null?void 0:Y.ImageURL)||"";return h.jsxs("div",{className:"flex items-start gap-4 p-3 bg-gray-800/50 rounded-2xl border border-white/5 hover:border-white/10 transition-colors",children:[h.jsx("div",{className:"w-16 h-16 rounded-xl bg-black/40 overflow-hidden border border-white/10 flex-shrink-0 shadow-inner",children:h.jsx("img",{src:st(ne),className:"w-full h-full object-cover",alt:""})}),h.jsxs("div",{className:"flex-grow min-w-0 pt-1",children:[h.jsx("h4",{className:"text-sm font-bold text-white leading-tight mb-1 line-clamp-2",children:L.name}),h.jsxs("div",{className:"flex flex-wrap gap-2 text-[10px]",children:[h.jsxs("span",{className:"bg-blue-600/20 text-blue-400 px-2 py-0.5 rounded font-black border border-blue-500/20",children:["x",L.quantity]}),h.jsxs("span",{className:"text-gray-400 font-bold self-center",children:["Price: $",(R=L.finalPrice)==null?void 0:R.toFixed(2)]}),L.colorInfo&&h.jsx("span",{className:"bg-purple-600/20 text-purple-400 px-2 py-0.5 rounded font-bold border border-purple-500/20",children:L.colorInfo})]}),h.jsxs("p",{className:"text-xs font-black text-white mt-1.5 text-right tracking-tight",children:["$",(L.total||0).toFixed(2)]})]})]},G)})}),h.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 flex justify-between items-center",children:[h.jsx("span",{className:"text-gray-400 text-xs font-bold uppercase tracking-widest",children:"Total Items"}),h.jsx("span",{className:"text-white font-black text-lg",children:w.Products.reduce((L,G)=>L+(Number(G.quantity)||0),0)})]})]})}),h.jsx("style",{children:`
                .no-scrollbar::-webkit-scrollbar { display: none; }
                .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `})]})},Uy=({orders:t,totals:e,visibleColumns:n,selectedIds:r,onToggleSelect:i,onEdit:o,handlePrint:s,handleCopy:a,handleCopyTemplate:l,copiedId:c,copiedTemplateId:p,toggleOrderVerified:m,updatingIds:y})=>{const{appData:v,previewImage:N}=be.useContext(go),A=_=>{if(!_||!v.phoneCarriers)return null;const D=_.replace(/\s/g,"").substring(0,3),k=v.phoneCarriers.find(F=>F.Prefixes.split(",").map(P=>P.trim()).includes(D));return k?st(k.CarrierLogoURL):null},S=_=>{if(!_||!v.shippingMethods)return null;const T=v.shippingMethods.find(D=>D.MethodName===_);return T?st(T.LogosURL):null},w=_=>{let T=(_||"").replace(/[^0-9]/g,"");return T.length>0&&(T="0"+T.replace(/^0+/,"")),T};return h.jsxs("div",{className:"space-y-6 pb-20",children:[h.jsx("div",{className:"w-full",children:h.jsx(ih,{totals:e})}),h.jsx("div",{className:"grid grid-cols-2 gap-5",children:t.map(_=>{var z,K;const T=(z=v.pages)==null?void 0:z.find(ie=>ie.PageName===_.Page),D=T?st(T.PageLogoURL):"",k=w(_["Customer Phone"]),F=A(k),P=_.IsVerified===!0||String(_.IsVerified).toUpperCase()==="TRUE",M=y.has(_["Order ID"]),j=r.has(_["Order ID"]),$=S(_["Internal Shipping Method"]),I=c===_["Order ID"],E=p===_["Order ID"];return h.jsxs("div",{className:`
                                relative rounded-[2rem] p-5 shadow-xl transition-all duration-300 overflow-hidden group flex flex-col justify-between
                                ${j?"bg-blue-900/20 border-2 border-blue-500/50 shadow-blue-900/20":P?"bg-emerald-900/10 border border-emerald-500/20 shadow-emerald-900/10":"bg-[#1e293b]/60 border border-white/5 shadow-black/30 backdrop-blur-md hover:bg-[#1e293b]/80"}
                            `,children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[i&&h.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-lg border-gray-600 bg-gray-800 text-blue-500 cursor-pointer focus:ring-0",checked:j,onChange:()=>i(_["Order ID"])}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:()=>a(_["Order ID"]),className:`flex items-center gap-2 px-3 py-1.5 rounded-xl border transition-all active:scale-95 ${I?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":"bg-black/30 text-gray-400 border-white/5 hover:text-white"}`,children:[h.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest font-mono",children:["#",_["Order ID"].substring(0,8)]}),I&&h.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})]}),h.jsx("button",{onClick:()=>l(_),className:`flex items-center justify-center w-8 h-8 rounded-xl border transition-all active:scale-95 ${E?"bg-indigo-500/20 border-indigo-500/50 text-indigo-400":"bg-black/30 border-white/5 text-gray-400 hover:text-white"}`,children:E?h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]}),h.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-wider border ${_["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:_["Payment Status"]})]}),h.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[h.jsx("div",{className:"relative w-12 h-12 rounded-xl bg-black/40 border border-white/10 p-0.5 flex-shrink-0",children:D?h.jsx("img",{src:D,className:"w-full h-full object-cover rounded-[10px]",alt:"logo"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center text-[9px]",children:"N/A"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("h3",{className:"text-white font-black text-sm truncate",children:_["Customer Name"]}),h.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[F&&h.jsx("img",{src:F,className:"h-3 w-auto object-contain opacity-70",alt:"carrier"}),h.jsx("p",{className:"text-blue-400 font-mono font-bold text-xs",children:k})]}),h.jsxs("div",{className:"text-[10px] text-gray-500 font-bold truncate mt-1 flex items-center gap-1",children:[h.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),_.Location||"N/A"]})]})]}),h.jsx("div",{className:"bg-black/20 rounded-xl p-2.5 border border-white/5 mb-4 overflow-hidden",children:h.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:_.Products&&_.Products.length>0?_.Products.map((ie,q)=>{var Y;const L=(Y=v.products)==null?void 0:Y.find(ne=>ne.ProductName===ie.name),G=ie.image||(L==null?void 0:L.ImageURL)||"";return h.jsxs("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-gray-800 border border-white/5 overflow-hidden relative cursor-pointer",onClick:()=>N(st(G)),children:[h.jsx("img",{src:st(G),className:"w-full h-full object-cover",alt:""}),h.jsxs("div",{className:"absolute bottom-0 right-0 bg-blue-600 text-white text-[8px] font-black px-1 rounded-tl-md",children:["x",ie.quantity]})]},q)}):h.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"No products"})})}),h.jsxs("div",{className:"mt-auto",children:[h.jsxs("div",{className:"flex justify-between items-end mb-4 pt-3 border-t border-white/5",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-wider",children:"Total"}),h.jsxs("p",{className:"text-xl font-black text-white tracking-tight",children:["$",_["Grand Total"].toFixed(2)]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-wider",children:"Shipping"}),h.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[$&&h.jsx("img",{src:$,className:"w-3.5 h-3.5 object-contain",alt:""}),h.jsx("span",{className:"text-xs font-bold text-orange-400",children:(K=_["Internal Shipping Method"])==null?void 0:K.substring(0,10)})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[o&&h.jsx("button",{onClick:()=>o(_),className:"flex-1 py-2.5 bg-blue-600/10 text-blue-400 hover:bg-blue-600 hover:text-white rounded-xl border border-blue-500/20 font-black text-[10px] uppercase tracking-widest transition-all",children:"Edit"}),h.jsx("button",{onClick:()=>s(_),className:"w-10 h-10 flex items-center justify-center bg-gray-800 text-gray-400 hover:text-white rounded-xl border border-white/10 transition-all",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"checkbox",checked:P,onChange:()=>m(_["Order ID"],P),className:`w-10 h-10 rounded-xl appearance-none border transition-all cursor-pointer ${P?"bg-emerald-500 border-emerald-400":"bg-gray-800 border-gray-600"}`}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:M?h.jsx(Pr,{size:"sm"}):P?h.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):h.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase",children:"OK"})})]})]})]})]},_["Order ID"])})})]})},$y=({orders:t,onEdit:e,showActions:n,visibleColumns:r,selectedIds:i=new Set,onToggleSelect:o,onToggleSelectAll:s})=>{const{refreshData:a}=be.useContext(go),[l,c]=be.useState(null),[p,m]=be.useState(null),[y,v]=be.useState(new Set),[N,A]=be.useState(t);be.useEffect(()=>{A(t)},[t]);const S=My(t),w=async(M,j)=>{const $=!j;A(I=>I.map(E=>E["Order ID"]===M?{...E,IsVerified:$}:E)),v(I=>new Set(I).add(M));try{if(!(await fetch(`${ti}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"AllOrders",primaryKey:{"Order ID":M},newData:{IsVerified:$}})})).ok)throw new Error("Failed to save");a()}catch(I){console.error("Verification toggle failed:",I),A(E=>E.map(z=>z["Order ID"]===M?{...z,IsVerified:j}:z)),alert("!")}finally{v(I=>{const E=new Set(I);return E.delete(M),E})}},_=M=>{let j=(M||"").replace(/[^0-9]/g,"");return j.length>0&&(j="0"+j.replace(/^0+/,"")),j},T=M=>{navigator.clipboard.writeText(M),c(M),setTimeout(()=>c(null),2e3)},D=M=>{const j=M.Products.map(z=>{const K=parseFloat(String(z.finalPrice||0)),ie=Number.isInteger(K)?K:K.toFixed(2),q=z.colorInfo?`-${z.colorInfo}`:"";return` ${z.name}(${ie}$)${q} - x${z.quantity} ($${(z.total||0).toFixed(2)})`}).join(`
`),$=M["Payment Status"]==="Paid"?" Paid":" COD (Unpaid)";let I="";try{const z=new Date(M.Timestamp);isNaN(z.getTime())?I=String(M.Timestamp||"").split(" ")[0]:I=`${String(z.getDate()).padStart(2,"0")}/${String(z.getMonth()+1).padStart(2,"0")}/${z.getFullYear()}`}catch{I=String(M.Timestamp||"")}const E=M["Address Details"]||"()";return`  
 Page: ${M.Page}
 : ${M["Customer Name"]}
 : ${M["Customer Phone"]}
 : ${M.Location}
 : ${E}

 -----------  -----------
${j}
--------------------------------------

 :
  - : $${(M.Subtotal||0).toFixed(2)}
  - : $${(M["Shipping Fee (Customer)"]||0).toFixed(2)}
  - : $${(M["Grand Total"]||0).toFixed(2)}
 ${$}

 : ${M["Internal Shipping Method"]}
${I}
--------------------------------------
 | ID: ${M["Order ID"]}`},P={orders:N,totals:S,visibleColumns:r,selectedIds:i,onToggleSelect:o,onEdit:e,handlePrint:M=>{if(!M)return;const j=_(M["Customer Phone"]),$=new URLSearchParams({id:M["Order ID"],name:M["Customer Name"]||"",phone:j,location:M.Location||"",address:M["Address Details"]||"",total:(M["Grand Total"]||0).toString(),payment:M["Payment Status"]||"Unpaid",shipping:M["Internal Shipping Method"]||"N/A",page:M.Page||"",user:M.User||""}),E=(M.Note||"").match(/https?:\/\/(www\.)?(google\.com\/maps|maps\.app\.goo\.gl)\/[^\s]+/);E&&$.set("map",E[0]),window.open(`${zh}?${$.toString()}`,"_blank")},handleCopy:T,handleCopyTemplate:M=>{const j=D(M);navigator.clipboard.writeText(j),m(M["Order ID"]),setTimeout(()=>m(null),2e3)},copiedId:l,copiedTemplateId:p,toggleOrderVerified:w,updatingIds:y};return h.jsxs("div",{className:"w-full flex flex-col",children:[h.jsxs("div",{className:"flex-grow space-y-4",children:[h.jsx("div",{className:"hidden xl:block",children:h.jsx(Fy,{...P,onToggleSelectAll:s})}),h.jsx("div",{className:"hidden md:block xl:hidden",children:h.jsx(Uy,{...P})}),h.jsx("div",{className:"md:hidden",children:h.jsx(jy,{...P})})]}),h.jsx("div",{className:"h-64 md:h-[400px] w-full pointer-events-none opacity-0 shrink-0","aria-hidden":"true"})]})};export{Ry as B,by as D,We as E,av as G,$y as O,Qs as S,bt as _,Oy as a,ov as b,Hy as c,Vy as d,Gy as e,zy as f,py as g,xy as h,Wy as i,Sy as j,yy as k};
