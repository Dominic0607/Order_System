const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-BaLc3Z8j.js","assets/index-BlX76rUu.js","assets/index-BXlZ-H93.css","assets/imageCompressor-D5vYYzIg.js"])))=>i.map(i=>d[i]);
import{j as p,S as Pr,r as be,c as at,_ as Il,g as qh,b as Oh,A as po,M as Od,W as uo,f as Hh,L as Vh}from"./index-BlX76rUu.js";import{c as Gh}from"./imageCompressor-D5vYYzIg.js";const Xs=({label:t,value:e,icon:n,colorClass:r})=>p.jsxs("div",{className:"relative group overflow-hidden bg-gray-800/30 backdrop-blur-xl border border-white/5 p-6 rounded-[2rem] transition-all duration-500 hover:bg-gray-800/50 hover:border-white/10 hover:shadow-2xl",children:[p.jsxs("div",{className:"relative z-10 flex justify-between items-center gap-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-gray-400 text-xs lg:text-sm font-black uppercase tracking-widest mb-1.5 transition-all",children:t}),p.jsx("h3",{className:"text-3xl lg:text-4xl 2xl:text-5xl font-black text-white tracking-tighter transition-all",children:e})]}),p.jsx("div",{className:`w-12 h-12 lg:w-16 lg:h-16 rounded-2xl bg-gradient-to-br ${r} flex items-center justify-center text-white text-xl lg:text-2xl shadow-lg shadow-blue-900/20 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 flex-shrink-0`,children:n})]}),p.jsx("div",{className:`absolute -right-6 -bottom-6 w-32 h-32 lg:w-40 lg:h-40 rounded-full bg-gradient-to-br ${r} opacity-0 group-hover:opacity-10 blur-[40px] transition-opacity duration-700`})]});var zh={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Wh,$h;function Jh(){return{geminiUrl:Wh,vertexUrl:$h}}function Yh(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=Jh();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rr{}function De(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const h=l[c];f(h,e.slice(o+1),n[c])}else for(const c of l)f(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];f(l[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function u(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(a=>u(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Kh(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){const c=o[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}kl(t,i,o,0,s)}}function kl(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const l of a[s])kl(l,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(const c of a)l[c]=s[c];for(const[c,h]of Object.entries(l)){const m=[];for(const v of n.slice(r))v==="*"?m.push(c):m.push(v);f(s,m,h)}for(const c of a)delete s[c]}}else{const s=t;o in s&&kl(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ec(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xh(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["operationName"],n);const r=u(t,["resourceName"]);return r!=null&&f(e,["_url","resourceName"],r),e}function Qh(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response","generateVideoResponse"]);return s!=null&&f(e,["response"],ep(s)),e}function Zh(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],tp(s)),e}function ep(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>np(s))),f(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function tp(t){const e={},n=u(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>rp(s))),f(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function np(t){const e={},n=u(t,["video"]);return n!=null&&f(e,["video"],cp(n)),e}function rp(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],up(n)),e}function ip(t){const e={},n=u(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function op(t){const e={},n=u(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function sp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],ap(s)),e}function ap(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&f(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function Hd(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],lp(s)),e}function lp(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&f(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function cp(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["uri"],n);const r=u(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],ec(r));const i=u(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function up(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],ec(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qc;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(qc||(qc={}));var Oc;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Oc||(Oc={}));var Hc;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Hc||(Hc={}));var Zr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Zr||(Zr={}));var Vc;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Vc||(Vc={}));var Gc;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Gc||(Gc={}));var zc;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(zc||(zc={}));var Wc;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Wc||(Wc={}));var $c;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})($c||($c={}));var Jc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Jc||(Jc={}));var Yc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Yc||(Yc={}));var Kc;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Kc||(Kc={}));var Xc;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Xc||(Xc={}));var Qc;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Qc||(Qc={}));var Zc;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Zc||(Zc={}));var eu;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(eu||(eu={}));var tu;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(tu||(tu={}));var nu;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(nu||(nu={}));var ru;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ru||(ru={}));var iu;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(iu||(iu={}));var ou;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ou||(ou={}));var fa;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(fa||(fa={}));var su;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(su||(su={}));var au;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(au||(au={}));var lu;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(lu||(lu={}));var El;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(El||(El={}));var cu;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(cu||(cu={}));var uu;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(uu||(uu={}));var du;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(du||(du={}));var fu;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(fu||(fu={}));var hu;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(hu||(hu={}));var pu;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(pu||(pu={}));var gu;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(gu||(gu={}));var mu;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(mu||(mu={}));var vu;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(vu||(vu={}));var yu;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(yu||(yu={}));var xu;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xu||(xu={}));var bu;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(bu||(bu={}));var wu;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(wu||(wu={}));var Nu;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Nu||(Nu={}));var Su;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Su||(Su={}));var _u;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(_u||(_u={}));var Au;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Au||(Au={}));var Cu;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Cu||(Cu={}));var Tu;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Tu||(Tu={}));var Iu;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Iu||(Iu={}));var ku;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ku||(ku={}));var Eu;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Eu||(Eu={}));var Pu;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Pu||(Pu={}));var Lu;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Lu||(Lu={}));var Ru;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Ru||(Ru={}));var Mu;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Mu||(Mu={}));var Du;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Du||(Du={}));var Fu;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Fu||(Fu={}));var lo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(lo||(lo={}));class Pl{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Jo{get text(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",h=!1;const m=[];for(const v of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,S]of Object.entries(v))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(S!==null||S!==void 0)&&m.push(y);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;h=!0,c+=v.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?c:void 0}get data(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const h=[];for(const m of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[v,y]of Object.entries(m))v!=="inlineData"&&(y!==null||y!==void 0)&&h.push(v);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,o,s,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,o,s,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.output}}class Uu{}class ju{}class dp{}class fp{}class hp{}class pp{}class Bu{}class qu{}class Ou{}class gp{}class ha{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ha;let i;const o=e;return n?i=Zh(o):i=Qh(o),Object.assign(r,i),r}}class Hu{}class Vu{}class Gu{}class zu{}class mp{}class vp{}class yp{}class tc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new tc,o=sp(e);return Object.assign(r,o),r}}class xp{}class bp{}class wp{}class Wu{}class Np{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Sp{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class nc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new nc,o=Hd(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Vd(t,e){const n=pt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Gd(t){return Array.isArray(t)?t.map(e=>pa(e)):[pa(t)]}function pa(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function zd(t){const e=pa(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Wd(t){const e=pa(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $u(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function $d(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>$u(e)):[$u(t)]}function Ll(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Ju(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Yu(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function dn(t){if(t==null)throw new Error("ContentUnion is required");return Ll(t)?t:{role:"user",parts:$d(t)}}function rc(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=dn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=dn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>dn(n)):[dn(e)]}function jn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Ju(t)||Yu(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dn(t)]}const e=[],n=[],r=Ll(t[0]);for(const i of t){const o=Ll(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Ju(i)||Yu(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:$d(n)}),e}function _p(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Zr).includes(n[0].toUpperCase())?n[0].toUpperCase():Zr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Zr).includes(r.toUpperCase())?r.toUpperCase():Zr.TYPE_UNSPECIFIED})}}function fo(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&_p(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Zr).includes(a.toUpperCase())?a.toUpperCase():Zr.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=fo(a);else if(r.includes(s)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(fo(c))}e[s]=l}else if(i.includes(s)){const l={};for(const[c,h]of Object.entries(a))l[c]=fo(h);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function ic(t){return fo(t)}function oc(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function sc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function go(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=fo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=fo(e.response));return t}function mo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Ap(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Mr(t,e){if(typeof e!="string")throw new Error("name must be a string");return Ap(t,e,"cachedContents")}function Jd(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ii(t){return ec(t)}function Cp(t){return t!=null&&typeof t=="object"&&"name"in t}function Tp(t){return t!=null&&typeof t=="object"&&"video"in t}function Ip(t){return t!=null&&typeof t=="object"&&"uri"in t}function Yd(t){var e;let n;if(Cp(t)&&(n=t.name),!(Ip(t)&&(n=t.uri,n===void 0))&&!(Tp(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Kd(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Xd(t){for(const e of["models","tunedModels","publisherModels"])if(kp(t,e))return t[e];return[]}function kp(t,e){return t!==null&&typeof t=="object"&&e in t}function Ep(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Pp(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=Ep(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Qd(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Lp(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Zd(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function vo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function ef(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rp(t){const e={},n=u(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const r=u(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>h0(s))),f(e,["inlinedResponses"],o)}const i=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["inlinedEmbedContentResponses"],o)}return e}function Mp(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const r=u(t,["gcsDestination","outputUriPrefix"]);r!=null&&f(e,["gcsUri"],r);const i=u(t,["bigqueryDestination","outputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function Dp(t){const e={},n=u(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const r=u(t,["gcsUri"]);r!=null&&f(e,["gcsDestination","outputUriPrefix"],r);const i=u(t,["bigqueryUri"]);if(i!=null&&f(e,["bigqueryDestination","outputUri"],i),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ca(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata","displayName"]);r!=null&&f(e,["displayName"],r);const i=u(t,["metadata","state"]);i!=null&&f(e,["state"],ef(i));const o=u(t,["metadata","createTime"]);o!=null&&f(e,["createTime"],o);const s=u(t,["metadata","endTime"]);s!=null&&f(e,["endTime"],s);const a=u(t,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);const l=u(t,["metadata","model"]);l!=null&&f(e,["model"],l);const c=u(t,["metadata","output"]);return c!=null&&f(e,["dest"],Rp(Zd(c))),e}function Rl(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=u(t,["state"]);i!=null&&f(e,["state"],ef(i));const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["createTime"]);s!=null&&f(e,["createTime"],s);const a=u(t,["startTime"]);a!=null&&f(e,["startTime"],a);const l=u(t,["endTime"]);l!=null&&f(e,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const h=u(t,["model"]);h!=null&&f(e,["model"],h);const m=u(t,["inputConfig"]);m!=null&&f(e,["src"],Fp(m));const v=u(t,["outputConfig"]);v!=null&&f(e,["dest"],Mp(Zd(v)));const y=u(t,["completionStats"]);return y!=null&&f(e,["completionStats"],y),e}function Fp(t){const e={},n=u(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const r=u(t,["gcsSource","uris"]);r!=null&&f(e,["gcsUri"],r);const i=u(t,["bigquerySource","inputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function Up(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=u(e,["fileName"]);r!=null&&f(n,["fileName"],r);const i=u(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>f0(t,s))),f(n,["requests","requests"],o)}return n}function jp(t){const e={},n=u(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const r=u(t,["gcsUri"]);r!=null&&f(e,["gcsSource","uris"],r);const i=u(t,["bigqueryUri"]);if(i!=null&&f(e,["bigquerySource","inputUri"],i),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Bp(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function qp(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],vo(t,r)),n}function Op(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],vo(t,r)),n}function Hp(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],n);const r=u(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],Vp(r));const i=u(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const o=u(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const s=u(t,["avgLogprobs"]);s!=null&&f(e,["avgLogprobs"],s);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&f(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const h=u(t,["safetyRatings"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(y=>y)),f(e,["safetyRatings"],v)}const m=u(t,["urlContextMetadata"]);return m!=null&&f(e,["urlContextMetadata"],m),e}function Vp(t){const e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function tf(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>b0(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function Gp(t,e){const n={},r=u(t,["displayName"]);if(e!==void 0&&r!=null&&f(e,["batch","displayName"],r),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function zp(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=u(t,["dest"]);return e!==void 0&&i!=null&&f(e,["outputConfig"],Dp(Lp(i))),n}function Ku(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["src"]);i!=null&&f(n,["batch","inputConfig"],Up(t,Qd(t,i)));const o=u(e,["config"]);return o!=null&&Gp(o,n),n}function Wp(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["model"],pt(t,r));const i=u(e,["src"]);i!=null&&f(n,["inputConfig"],jp(Qd(t,i)));const o=u(e,["config"]);return o!=null&&zp(o,n),n}function $p(t,e){const n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["batch","displayName"],r),n}function Jp(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["src"]);i!=null&&f(n,["batch","inputConfig"],t0(t,i));const o=u(e,["config"]);return o!=null&&$p(o,n),n}function Yp(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],vo(t,r)),n}function Kp(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],vo(t,r)),n}function Xp(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);return o!=null&&f(e,["error"],o),e}function Qp(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);return o!=null&&f(e,["error"],o),e}function Zp(t,e){const n={},r=u(e,["contents"]);if(r!=null){let o=rc(t,r);Array.isArray(o)&&(o=o.map(s=>s)),f(n,["requests[]","request","content"],o)}const i=u(e,["config"]);return i!=null&&(f(n,["_self"],e0(i,n)),Kh(n,{"requests[].*":"requests[].request.*"})),n}function e0(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const o=u(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function t0(t,e){const n={},r=u(e,["fileName"]);r!=null&&f(n,["file_name"],r);const i=u(e,["inlinedRequests"]);return i!=null&&f(n,["requests"],Zp(t,i)),n}function n0(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function r0(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function i0(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&f(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function o0(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],tf(dn(i)));const o=u(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&f(r,["topP"],s);const a=u(e,["topK"]);a!=null&&f(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);const h=u(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const m=u(e,["responseLogprobs"]);m!=null&&f(r,["responseLogprobs"],m);const v=u(e,["logprobs"]);v!=null&&f(r,["logprobs"],v);const y=u(e,["presencePenalty"]);y!=null&&f(r,["presencePenalty"],y);const S=u(e,["frequencyPenalty"]);S!=null&&f(r,["frequencyPenalty"],S);const A=u(e,["seed"]);A!=null&&f(r,["seed"],A);const w=u(e,["responseMimeType"]);w!=null&&f(r,["responseMimeType"],w);const N=u(e,["responseSchema"]);N!=null&&f(r,["responseSchema"],ic(N));const T=u(e,["responseJsonSchema"]);if(T!=null&&f(r,["responseJsonSchema"],T),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=u(e,["safetySettings"]);if(n!==void 0&&_!=null){let F=_;Array.isArray(F)&&(F=F.map(H=>w0(H))),f(n,["safetySettings"],F)}const R=u(e,["tools"]);if(n!==void 0&&R!=null){let F=mo(R);Array.isArray(F)&&(F=F.map(H=>S0(go(H)))),f(n,["tools"],F)}const P=u(e,["toolConfig"]);if(n!==void 0&&P!=null&&f(n,["toolConfig"],N0(P)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=u(e,["cachedContent"]);n!==void 0&&D!=null&&f(n,["cachedContent"],Mr(t,D));const I=u(e,["responseModalities"]);I!=null&&f(r,["responseModalities"],I);const M=u(e,["mediaResolution"]);M!=null&&f(r,["mediaResolution"],M);const j=u(e,["speechConfig"]);if(j!=null&&f(r,["speechConfig"],oc(j)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=u(e,["thinkingConfig"]);J!=null&&f(r,["thinkingConfig"],J);const E=u(e,["imageConfig"]);E!=null&&f(r,["imageConfig"],d0(E));const k=u(e,["enableEnhancedCivicAnswers"]);return k!=null&&f(r,["enableEnhancedCivicAnswers"],k),r}function s0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Hp(c))),f(e,["candidates"],l)}const i=u(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const s=u(t,["responseId"]);s!=null&&f(e,["responseId"],s);const a=u(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function a0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],vo(t,r)),n}function l0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],vo(t,r)),n}function c0(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function u0(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function d0(t){const e={},n=u(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const r=u(t,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function f0(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["request","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let a=jn(i);Array.isArray(a)&&(a=a.map(l=>tf(l))),f(n,["request","contents"],a)}const o=u(e,["metadata"]);o!=null&&f(n,["metadata"],o);const s=u(e,["config"]);return s!=null&&f(n,["request","generationConfig"],o0(t,s,u(n,["request"],{}))),n}function h0(t){const e={},n=u(t,["response"]);n!=null&&f(e,["response"],s0(n));const r=u(t,["error"]);return r!=null&&f(e,["error"],r),e}function p0(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);if(e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function g0(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),n}function m0(t){const e={},n=u(t,["config"]);return n!=null&&p0(n,e),e}function v0(t){const e={},n=u(t,["config"]);return n!=null&&g0(n,e),e}function y0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>ca(s))),f(e,["batchJobs"],o)}return e}function x0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Rl(s))),f(e,["batchJobs"],o)}return e}function b0(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],n0(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],r0(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],Bp(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const h=u(t,["thought"]);h!=null&&f(e,["thought"],h);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const v=u(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function w0(t){const e={},n=u(t,["category"]);if(n!=null&&f(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function N0(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],i0(r)),e}function S0(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>m)),f(e,["functionDeclarations"],h)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],c0(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],u0(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Lr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Lr||(Lr={}));class Ci{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _0 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ci(Lr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Ku(this.apiClient,e),r=n._url,i=De("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const h of l){const m=Object.assign({},h);if(m.systemInstruction){const v=m.systemInstruction;delete m.systemInstruction;const y=m.request;y.systemInstruction=v,m.request=y}c.push(m)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Wp(this.apiClient,e);return a=De("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Rl(h))}else{const c=Ku(this.apiClient,e);return a=De("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>ca(h))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Jp(this.apiClient,e);return o=De("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>ca(l))}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=l0(this.apiClient,e);return a=De("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Rl(h))}else{const c=a0(this.apiClient,e);return a=De("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>ca(h))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const l=Op(this.apiClient,e);s=De("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=qp(this.apiClient,e);s=De("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=v0(e);return a=De("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=x0(h),v=new Wu;return Object.assign(v,m),v})}else{const c=m0(e);return a=De("batches",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=y0(h),v=new Wu;return Object.assign(v,m),v})}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Kp(this.apiClient,e);return a=De("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>Qp(h))}else{const c=Yp(this.apiClient,e);return a=De("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>Xp(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A0(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Xu(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>J0(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function C0(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=u(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const o=u(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const s=u(t,["contents"]);if(e!==void 0&&s!=null){let h=jn(s);Array.isArray(h)&&(h=h.map(m=>Xu(m))),f(e,["contents"],h)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],Xu(dn(a)));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>K0(m))),f(e,["tools"],h)}const c=u(t,["toolConfig"]);if(e!==void 0&&c!=null&&f(e,["toolConfig"],Y0(c)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function T0(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=u(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const o=u(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const s=u(t,["contents"]);if(e!==void 0&&s!=null){let m=jn(s);Array.isArray(m)&&(m=m.map(v=>v)),f(e,["contents"],m)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],dn(a));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(v=>X0(v))),f(e,["tools"],m)}const c=u(t,["toolConfig"]);e!==void 0&&c!=null&&f(e,["toolConfig"],c);const h=u(t,["kmsKeyName"]);return e!==void 0&&h!=null&&f(e,["encryption_spec","kmsKeyName"],h),n}function I0(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["model"],Vd(t,r));const i=u(e,["config"]);return i!=null&&C0(i,n),n}function k0(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["model"],Vd(t,r));const i=u(e,["config"]);return i!=null&&T0(i,n),n}function E0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],Mr(t,r)),n}function P0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],Mr(t,r)),n}function L0(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function R0(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function M0(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function D0(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function F0(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&f(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function U0(t){const e={},n=u(t,["description"]);n!=null&&f(e,["description"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["parameters"]);i!=null&&f(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&f(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function j0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],Mr(t,r)),n}function B0(t,e){const n={},r=u(e,["name"]);return r!=null&&f(n,["_url","name"],Mr(t,r)),n}function q0(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function O0(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function H0(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function V0(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function G0(t){const e={},n=u(t,["config"]);return n!=null&&H0(n,e),e}function z0(t){const e={},n=u(t,["config"]);return n!=null&&V0(n,e),e}function W0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["cachedContents"],o)}return e}function $0(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["cachedContents"],o)}return e}function J0(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],M0(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],D0(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],A0(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const h=u(t,["thought"]);h!=null&&f(e,["thought"],h);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const v=u(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function Y0(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],F0(r)),e}function K0(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>m)),f(e,["functionDeclarations"],h)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],q0(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],O0(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function X0(t){const e={},n=u(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>U0(v))),f(e,["functionDeclarations"],m)}const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);const h=u(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function Q0(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=u(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function Z0(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=u(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function eg(t,e){const n={},r=u(e,["name"]);r!=null&&f(n,["_url","name"],Mr(t,r));const i=u(e,["config"]);return i!=null&&Q0(i,n),n}function tg(t,e){const n={},r=u(e,["name"]);r!=null&&f(n,["_url","name"],Mr(t,r));const i=u(e,["config"]);return i!=null&&Z0(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ng extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ci(Lr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=k0(this.apiClient,e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const c=I0(this.apiClient,e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=B0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const c=j0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=P0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=R0(h),v=new Gu;return Object.assign(v,m),v})}else{const c=E0(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=L0(h),v=new Gu;return Object.assign(v,m),v})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=tg(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const c=eg(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=z0(e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=$0(h),v=new zu;return Object.assign(v,m),v})}else{const c=G0(e);return a=De("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=W0(h),v=new zu;return Object.assign(v,m),v})}}}function ga(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Qu(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xe(t){return this instanceof Xe?(this.v=t,this):new Xe(t)}function er(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,m)}}function a(y,S){r[y]&&(i[y]=function(A){return new Promise(function(w,N){o.push([y,A,w,N])>1||l(y,A)})},S&&(i[y]=S(i[y])))}function l(y,S){try{c(r[y](S))}catch(A){v(o[0][3],A)}}function c(y){y.value instanceof Xe?Promise.resolve(y.value.v).then(h,m):v(o[0][2],y)}function h(y){l("next",y)}function m(y){l("throw",y)}function v(y,S){y(S),o.shift(),o.length&&l(o[0][0],o[0][1])}}function tr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Qu=="function"?Qu(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rg(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:nf(n)}function nf(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ig(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Zu(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!nf(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class og{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new sg(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class sg{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),ig(o)}async sendMessage(e){var n;await this.sendPromise;const r=dn(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const l=await i,c=(s=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let v=[];h!=null&&(v=(a=h.slice(m))!==null&&a!==void 0?a:[]);const y=c?[c]:[];this.recordHistory(r,y,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=dn(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?Zu(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return er(this,arguments,function*(){var i,o,s,a,l,c;const h=[];try{for(var m=!0,v=tr(e),y;y=yield Xe(v.next()),i=y.done,!i;m=!0){a=y.value,m=!1;const S=a;if(rg(S)){const A=(c=(l=S.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;A!==void 0&&h.push(A)}yield yield Xe(S)}}catch(S){o={error:S}}finally{try{!m&&!i&&(s=v.return)&&(yield Xe(s.call(v)))}finally{if(o)throw o.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Zu(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xa extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,xa.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ag(t){const e={},n=u(t,["file"]);return n!=null&&f(e,["file"],n),e}function lg(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function cg(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","file"],Yd(n)),e}function ug(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function dg(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","file"],Yd(n)),e}function fg(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function hg(t){const e={},n=u(t,["config"]);return n!=null&&fg(n,e),e}function pg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gg extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ci(Lr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hg(e);return o=De("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const c=pg(l),h=new xp;return Object.assign(h,c),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ag(e);return o=De("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=lg(l),h=new bp;return Object.assign(h,c),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=dg(e);return o=De("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=cg(e);return o=De("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const c=ug(l),h=new wp;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ua(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function mg(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Lg(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function vg(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function yg(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xg(t){const e={},n=u(t,["description"]);n!=null&&f(e,["description"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["parameters"]);i!=null&&f(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&f(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function bg(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const r=u(t,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const i=u(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const o=u(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const s=u(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);const a=u(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const h=u(t,["mediaResolution"]);h!=null&&f(e,["mediaResolution"],h);const m=u(t,["presencePenalty"]);m!=null&&f(e,["presencePenalty"],m);const v=u(t,["responseLogprobs"]);v!=null&&f(e,["responseLogprobs"],v);const y=u(t,["responseMimeType"]);y!=null&&f(e,["responseMimeType"],y);const S=u(t,["responseModalities"]);S!=null&&f(e,["responseModalities"],S);const A=u(t,["responseSchema"]);A!=null&&f(e,["responseSchema"],A);const w=u(t,["routingConfig"]);w!=null&&f(e,["routingConfig"],w);const N=u(t,["seed"]);N!=null&&f(e,["seed"],N);const T=u(t,["speechConfig"]);T!=null&&f(e,["speechConfig"],T);const _=u(t,["stopSequences"]);_!=null&&f(e,["stopSequences"],_);const R=u(t,["temperature"]);R!=null&&f(e,["temperature"],R);const P=u(t,["thinkingConfig"]);P!=null&&f(e,["thinkingConfig"],P);const D=u(t,["topK"]);D!=null&&f(e,["topK"],D);const I=u(t,["topP"]);if(I!=null&&f(e,["topP"],I),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function wg(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Ng(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function Sg(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","speechConfig"],sc(m));const v=u(t,["thinkingConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","thinkingConfig"],v);const y=u(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],y);const S=u(t,["systemInstruction"]);e!==void 0&&S!=null&&f(e,["setup","systemInstruction"],mg(dn(S)));const A=u(t,["tools"]);if(e!==void 0&&A!=null){let D=mo(A);Array.isArray(D)&&(D=D.map(I=>Mg(go(I)))),f(e,["setup","tools"],D)}const w=u(t,["sessionResumption"]);e!==void 0&&w!=null&&f(e,["setup","sessionResumption"],Rg(w));const N=u(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&f(e,["setup","inputAudioTranscription"],N);const T=u(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&f(e,["setup","outputAudioTranscription"],T);const _=u(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&f(e,["setup","realtimeInputConfig"],_);const R=u(t,["contextWindowCompression"]);e!==void 0&&R!=null&&f(e,["setup","contextWindowCompression"],R);const P=u(t,["proactivity"]);if(e!==void 0&&P!=null&&f(e,["setup","proactivity"],P),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function _g(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],bg(r));const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","speechConfig"],sc(m));const v=u(t,["thinkingConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","thinkingConfig"],v);const y=u(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],y);const S=u(t,["systemInstruction"]);e!==void 0&&S!=null&&f(e,["setup","systemInstruction"],dn(S));const A=u(t,["tools"]);if(e!==void 0&&A!=null){let I=mo(A);Array.isArray(I)&&(I=I.map(M=>Dg(go(M)))),f(e,["setup","tools"],I)}const w=u(t,["sessionResumption"]);e!==void 0&&w!=null&&f(e,["setup","sessionResumption"],w);const N=u(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&f(e,["setup","inputAudioTranscription"],N);const T=u(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&f(e,["setup","outputAudioTranscription"],T);const _=u(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&f(e,["setup","realtimeInputConfig"],_);const R=u(t,["contextWindowCompression"]);e!==void 0&&R!=null&&f(e,["setup","contextWindowCompression"],R);const P=u(t,["proactivity"]);e!==void 0&&P!=null&&f(e,["setup","proactivity"],P);const D=u(t,["explicitVadSignal"]);return e!==void 0&&D!=null&&f(e,["setup","explicitVadSignal"],D),n}function Ag(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["setup","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&f(n,["config"],Sg(i,n)),n}function Cg(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["setup","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&f(n,["config"],_g(i,n)),n}function Tg(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function Ig(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["weightedPrompts"],r)}return e}function kg(t){const e={},n=u(t,["media"]);if(n!=null){let c=Gd(n);Array.isArray(c)&&(c=c.map(h=>ua(h))),f(e,["mediaChunks"],c)}const r=u(t,["audio"]);r!=null&&f(e,["audio"],ua(Wd(r)));const i=u(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const o=u(t,["video"]);o!=null&&f(e,["video"],ua(zd(o)));const s=u(t,["text"]);s!=null&&f(e,["text"],s);const a=u(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function Eg(t){const e={},n=u(t,["media"]);if(n!=null){let c=Gd(n);Array.isArray(c)&&(c=c.map(h=>h)),f(e,["mediaChunks"],c)}const r=u(t,["audio"]);r!=null&&f(e,["audio"],Wd(r));const i=u(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const o=u(t,["video"]);o!=null&&f(e,["video"],zd(o));const s=u(t,["text"]);s!=null&&f(e,["text"],s);const a=u(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function Pg(t){const e={},n=u(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const r=u(t,["serverContent"]);r!=null&&f(e,["serverContent"],r);const i=u(t,["toolCall"]);i!=null&&f(e,["toolCall"],i);const o=u(t,["toolCallCancellation"]);o!=null&&f(e,["toolCallCancellation"],o);const s=u(t,["usageMetadata"]);s!=null&&f(e,["usageMetadata"],Fg(s));const a=u(t,["goAway"]);a!=null&&f(e,["goAway"],a);const l=u(t,["sessionResumptionUpdate"]);l!=null&&f(e,["sessionResumptionUpdate"],l);const c=u(t,["voiceActivityDetectionSignal"]);return c!=null&&f(e,["voiceActivityDetectionSignal"],c),e}function Lg(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],vg(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],yg(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],ua(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const h=u(t,["thought"]);h!=null&&f(e,["thought"],h);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const v=u(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function Rg(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Mg(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>m)),f(e,["functionDeclarations"],h)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],wg(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],Ng(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function Dg(t){const e={},n=u(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>xg(v))),f(e,["functionDeclarations"],m)}const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);const h=u(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function Fg(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const r=u(t,["cachedContentTokenCount"]);r!=null&&f(e,["cachedContentTokenCount"],r);const i=u(t,["candidatesTokenCount"]);i!=null&&f(e,["responseTokenCount"],i);const o=u(t,["toolUsePromptTokenCount"]);o!=null&&f(e,["toolUsePromptTokenCount"],o);const s=u(t,["thoughtsTokenCount"]);s!=null&&f(e,["thoughtsTokenCount"],s);const a=u(t,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);const l=u(t,["promptTokensDetails"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(S=>S)),f(e,["promptTokensDetails"],y)}const c=u(t,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(S=>S)),f(e,["cacheTokensDetails"],y)}const h=u(t,["candidatesTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(S=>S)),f(e,["responseTokensDetails"],y)}const m=u(t,["toolUsePromptTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(S=>S)),f(e,["toolUsePromptTokensDetails"],y)}const v=u(t,["trafficType"]);return v!=null&&f(e,["trafficType"],v),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ug(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function jg(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],n);const r=u(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],Bg(r));const i=u(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const o=u(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const s=u(t,["avgLogprobs"]);s!=null&&f(e,["avgLogprobs"],s);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&f(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const h=u(t,["safetyRatings"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(y=>y)),f(e,["safetyRatings"],v)}const m=u(t,["urlContextMetadata"]);return m!=null&&f(e,["urlContextMetadata"],m),e}function Bg(t){const e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function qg(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let o=jn(i);Array.isArray(o)&&(o=o.map(s=>s)),f(n,["contents"],o)}return n}function Og(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["tokensInfo"],i)}return e}function Hg(t){const e={},n=u(t,["values"]);n!=null&&f(e,["values"],n);const r=u(t,["statistics"]);return r!=null&&f(e,["statistics"],Vg(r)),e}function Vg(t){const e={},n=u(t,["truncated"]);n!=null&&f(e,["truncated"],n);const r=u(t,["token_count"]);return r!=null&&f(e,["tokenCount"],r),e}function ba(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Qm(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function Gg(t){const e={},n=u(t,["controlType"]);n!=null&&f(e,["controlType"],n);const r=u(t,["enableControlImageComputation"]);return r!=null&&f(e,["computeControl"],r),e}function zg(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Wg(t,e){const n={},r=u(t,["systemInstruction"]);e!==void 0&&r!=null&&f(e,["systemInstruction"],dn(r));const i=u(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>af(a))),f(e,["tools"],s)}const o=u(t,["generationConfig"]);return e!==void 0&&o!=null&&f(e,["generationConfig"],Um(o)),n}function $g(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=jn(i);Array.isArray(s)&&(s=s.map(a=>ba(a))),f(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&zg(o),n}function Jg(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=jn(i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&Wg(o,n),n}function Yg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["totalTokens"]);r!=null&&f(e,["totalTokens"],r);const i=u(t,["cachedContentTokenCount"]);return i!=null&&f(e,["cachedContentTokenCount"],i),e}function Kg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["totalTokens"]);return r!=null&&f(e,["totalTokens"],r),e}function Xg(t,e){const n={},r=u(e,["model"]);return r!=null&&f(n,["_url","name"],pt(t,r)),n}function Qg(t,e){const n={},r=u(e,["model"]);return r!=null&&f(n,["_url","name"],pt(t,r)),n}function Zg(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function em(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function tm(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=u(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const o=u(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const v=u(t,["includeRaiReason"]);e!==void 0&&v!=null&&f(e,["parameters","includeRaiReason"],v);const y=u(t,["language"]);e!==void 0&&y!=null&&f(e,["parameters","language"],y);const S=u(t,["outputMimeType"]);e!==void 0&&S!=null&&f(e,["parameters","outputOptions","mimeType"],S);const A=u(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","compressionQuality"],A);const w=u(t,["addWatermark"]);e!==void 0&&w!=null&&f(e,["parameters","addWatermark"],w);const N=u(t,["labels"]);e!==void 0&&N!=null&&f(e,["labels"],N);const T=u(t,["editMode"]);e!==void 0&&T!=null&&f(e,["parameters","editMode"],T);const _=u(t,["baseSteps"]);return e!==void 0&&_!=null&&f(e,["parameters","editConfig","baseSteps"],_),n}function nm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>i1(l))),f(n,["instances[0]","referenceImages"],a)}const s=u(e,["config"]);return s!=null&&tm(s,n),n}function rm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>wa(o))),f(e,["generatedImages"],i)}return e}function im(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const o=u(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function om(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&f(e,["instances[]","task_type"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&f(e,["instances[]","title"],i);const o=u(t,["outputDimensionality"]);e!==void 0&&o!=null&&f(e,["parameters","outputDimensionality"],o);const s=u(t,["mimeType"]);e!==void 0&&s!=null&&f(e,["instances[]","mimeType"],s);const a=u(t,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),n}function sm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let a=rc(t,i);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}const o=u(e,["config"]);o!=null&&im(o,n);const s=u(e,["model"]);return s!==void 0&&f(n,["requests[]","model"],pt(t,s)),n}function am(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=rc(t,i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["instances[]","content"],s)}const o=u(e,["config"]);return o!=null&&om(o,n),n}function lm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["embeddings"],o)}const i=u(t,["metadata"]);return i!=null&&f(e,["metadata"],i),e}function cm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Hg(s))),f(e,["embeddings"],o)}const i=u(t,["metadata"]);return i!=null&&f(e,["metadata"],i),e}function um(t){const e={},n=u(t,["endpoint"]);n!=null&&f(e,["name"],n);const r=u(t,["deployedModelId"]);return r!=null&&f(e,["deployedModelId"],r),e}function dm(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function fm(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hm(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&f(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function pm(t){const e={},n=u(t,["description"]);n!=null&&f(e,["description"],n);const r=u(t,["name"]);r!=null&&f(e,["name"],r);const i=u(t,["parameters"]);i!=null&&f(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&f(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function gm(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],ba(dn(i)));const o=u(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&f(r,["topP"],s);const a=u(e,["topK"]);a!=null&&f(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);const h=u(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const m=u(e,["responseLogprobs"]);m!=null&&f(r,["responseLogprobs"],m);const v=u(e,["logprobs"]);v!=null&&f(r,["logprobs"],v);const y=u(e,["presencePenalty"]);y!=null&&f(r,["presencePenalty"],y);const S=u(e,["frequencyPenalty"]);S!=null&&f(r,["frequencyPenalty"],S);const A=u(e,["seed"]);A!=null&&f(r,["seed"],A);const w=u(e,["responseMimeType"]);w!=null&&f(r,["responseMimeType"],w);const N=u(e,["responseSchema"]);N!=null&&f(r,["responseSchema"],ic(N));const T=u(e,["responseJsonSchema"]);if(T!=null&&f(r,["responseJsonSchema"],T),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=u(e,["safetySettings"]);if(n!==void 0&&_!=null){let F=_;Array.isArray(F)&&(F=F.map(H=>o1(H))),f(n,["safetySettings"],F)}const R=u(e,["tools"]);if(n!==void 0&&R!=null){let F=mo(R);Array.isArray(F)&&(F=F.map(H=>f1(go(H)))),f(n,["tools"],F)}const P=u(e,["toolConfig"]);if(n!==void 0&&P!=null&&f(n,["toolConfig"],d1(P)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=u(e,["cachedContent"]);n!==void 0&&D!=null&&f(n,["cachedContent"],Mr(t,D));const I=u(e,["responseModalities"]);I!=null&&f(r,["responseModalities"],I);const M=u(e,["mediaResolution"]);M!=null&&f(r,["mediaResolution"],M);const j=u(e,["speechConfig"]);if(j!=null&&f(r,["speechConfig"],oc(j)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=u(e,["thinkingConfig"]);J!=null&&f(r,["thinkingConfig"],J);const E=u(e,["imageConfig"]);E!=null&&f(r,["imageConfig"],Hm(E));const k=u(e,["enableEnhancedCivicAnswers"]);return k!=null&&f(r,["enableEnhancedCivicAnswers"],k),r}function mm(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],dn(i));const o=u(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&f(r,["topP"],s);const a=u(e,["topK"]);a!=null&&f(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);const h=u(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const m=u(e,["responseLogprobs"]);m!=null&&f(r,["responseLogprobs"],m);const v=u(e,["logprobs"]);v!=null&&f(r,["logprobs"],v);const y=u(e,["presencePenalty"]);y!=null&&f(r,["presencePenalty"],y);const S=u(e,["frequencyPenalty"]);S!=null&&f(r,["frequencyPenalty"],S);const A=u(e,["seed"]);A!=null&&f(r,["seed"],A);const w=u(e,["responseMimeType"]);w!=null&&f(r,["responseMimeType"],w);const N=u(e,["responseSchema"]);N!=null&&f(r,["responseSchema"],ic(N));const T=u(e,["responseJsonSchema"]);T!=null&&f(r,["responseJsonSchema"],T);const _=u(e,["routingConfig"]);_!=null&&f(r,["routingConfig"],_);const R=u(e,["modelSelectionConfig"]);R!=null&&f(r,["modelConfig"],R);const P=u(e,["safetySettings"]);if(n!==void 0&&P!=null){let $=P;Array.isArray($)&&($=$.map(q=>q)),f(n,["safetySettings"],$)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let $=mo(D);Array.isArray($)&&($=$.map(q=>af(go(q)))),f(n,["tools"],$)}const I=u(e,["toolConfig"]);n!==void 0&&I!=null&&f(n,["toolConfig"],I);const M=u(e,["labels"]);n!==void 0&&M!=null&&f(n,["labels"],M);const j=u(e,["cachedContent"]);n!==void 0&&j!=null&&f(n,["cachedContent"],Mr(t,j));const J=u(e,["responseModalities"]);J!=null&&f(r,["responseModalities"],J);const E=u(e,["mediaResolution"]);E!=null&&f(r,["mediaResolution"],E);const k=u(e,["speechConfig"]);k!=null&&f(r,["speechConfig"],oc(k));const F=u(e,["audioTimestamp"]);F!=null&&f(r,["audioTimestamp"],F);const H=u(e,["thinkingConfig"]);H!=null&&f(r,["thinkingConfig"],H);const ie=u(e,["imageConfig"]);if(ie!=null&&f(r,["imageConfig"],Vm(ie)),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function ed(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=jn(i);Array.isArray(s)&&(s=s.map(a=>ba(a))),f(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&f(n,["generationConfig"],gm(t,o,n)),n}function td(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["contents"]);if(i!=null){let s=jn(i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}const o=u(e,["config"]);return o!=null&&f(n,["generationConfig"],mm(t,o,n)),n}function nd(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>jg(c))),f(e,["candidates"],l)}const i=u(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const s=u(t,["responseId"]);s!=null&&f(e,["responseId"],s);const a=u(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function rd(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),f(e,["candidates"],c)}const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const o=u(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const s=u(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const a=u(t,["responseId"]);a!=null&&f(e,["responseId"],a);const l=u(t,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function vm(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=u(t,["aspectRatio"]);e!==void 0&&i!=null&&f(e,["parameters","aspectRatio"],i);const o=u(t,["guidanceScale"]);if(e!==void 0&&o!=null&&f(e,["parameters","guidanceScale"],o),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=u(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&f(e,["parameters","safetySetting"],s);const a=u(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const l=u(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&f(e,["parameters","includeSafetyAttributes"],l);const c=u(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=u(t,["language"]);e!==void 0&&h!=null&&f(e,["parameters","language"],h);const m=u(t,["outputMimeType"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","mimeType"],m);const v=u(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=u(t,["imageSize"]);if(e!==void 0&&y!=null&&f(e,["parameters","sampleImageSize"],y),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function ym(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=u(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const o=u(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const v=u(t,["includeRaiReason"]);e!==void 0&&v!=null&&f(e,["parameters","includeRaiReason"],v);const y=u(t,["language"]);e!==void 0&&y!=null&&f(e,["parameters","language"],y);const S=u(t,["outputMimeType"]);e!==void 0&&S!=null&&f(e,["parameters","outputOptions","mimeType"],S);const A=u(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","compressionQuality"],A);const w=u(t,["addWatermark"]);e!==void 0&&w!=null&&f(e,["parameters","addWatermark"],w);const N=u(t,["labels"]);e!==void 0&&N!=null&&f(e,["labels"],N);const T=u(t,["imageSize"]);e!==void 0&&T!=null&&f(e,["parameters","sampleImageSize"],T);const _=u(t,["enhancePrompt"]);return e!==void 0&&_!=null&&f(e,["parameters","enhancePrompt"],_),n}function xm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["config"]);return o!=null&&vm(o,n),n}function bm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["config"]);return o!=null&&ym(o,n),n}function wm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Rm(s))),f(e,["generatedImages"],o)}const i=u(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],of(i)),e}function Nm(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>wa(s))),f(e,["generatedImages"],o)}const i=u(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],sf(i)),e}function Sm(t,e){const n={},r=u(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=u(t,["durationSeconds"]);if(e!==void 0&&i!=null&&f(e,["parameters","durationSeconds"],i),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const s=u(t,["resolution"]);e!==void 0&&s!=null&&f(e,["parameters","resolution"],s);const a=u(t,["personGeneration"]);if(e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=u(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const c=u(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&f(e,["parameters","enhancePrompt"],c),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=u(t,["lastFrame"]);e!==void 0&&h!=null&&f(e,["instances[0]","lastFrame"],Na(h));const m=u(t,["referenceImages"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(y=>A1(y))),f(e,["instances[0]","referenceImages"],v)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function _m(t,e){const n={},r=u(t,["numberOfVideos"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=u(t,["fps"]);e!==void 0&&o!=null&&f(e,["parameters","fps"],o);const s=u(t,["durationSeconds"]);e!==void 0&&s!=null&&f(e,["parameters","durationSeconds"],s);const a=u(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const l=u(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=u(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const m=u(t,["pubsubTopic"]);e!==void 0&&m!=null&&f(e,["parameters","pubsubTopic"],m);const v=u(t,["negativePrompt"]);e!==void 0&&v!=null&&f(e,["parameters","negativePrompt"],v);const y=u(t,["enhancePrompt"]);e!==void 0&&y!=null&&f(e,["parameters","enhancePrompt"],y);const S=u(t,["generateAudio"]);e!==void 0&&S!=null&&f(e,["parameters","generateAudio"],S);const A=u(t,["lastFrame"]);e!==void 0&&A!=null&&f(e,["instances[0]","lastFrame"],nr(A));const w=u(t,["referenceImages"]);if(e!==void 0&&w!=null){let _=w;Array.isArray(_)&&(_=_.map(R=>C1(R))),f(e,["instances[0]","referenceImages"],_)}const N=u(t,["mask"]);e!==void 0&&N!=null&&f(e,["instances[0]","mask"],_1(N));const T=u(t,["compressionQuality"]);return e!==void 0&&T!=null&&f(e,["parameters","compressionQuality"],T),n}function Am(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response","generateVideoResponse"]);return s!=null&&f(e,["response"],km(s)),e}function Cm(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],Em(s)),e}function Tm(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["image"]);o!=null&&f(n,["instances[0]","image"],Na(o));const s=u(e,["video"]);s!=null&&f(n,["instances[0]","video"],lf(s));const a=u(e,["source"]);a!=null&&Pm(a,n);const l=u(e,["config"]);return l!=null&&Sm(l,n),n}function Im(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=u(e,["image"]);o!=null&&f(n,["instances[0]","image"],nr(o));const s=u(e,["video"]);s!=null&&f(n,["instances[0]","video"],cf(s));const a=u(e,["source"]);a!=null&&Lm(a,n);const l=u(e,["config"]);return l!=null&&_m(l,n),n}function km(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Dm(s))),f(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function Em(t){const e={},n=u(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Fm(s))),f(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function Pm(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=u(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],Na(i));const o=u(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],lf(o)),n}function Lm(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=u(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],nr(i));const o=u(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],cf(o)),n}function Rm(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],Gm(n));const r=u(t,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const i=u(t,["_self"]);return i!=null&&f(e,["safetyAttributes"],of(i)),e}function wa(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],rf(n));const r=u(t,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const i=u(t,["_self"]);i!=null&&f(e,["safetyAttributes"],sf(i));const o=u(t,["prompt"]);return o!=null&&f(e,["enhancedPrompt"],o),e}function Mm(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["mask"],rf(n));const r=u(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["labels"],i)}return e}function Dm(t){const e={},n=u(t,["video"]);return n!=null&&f(e,["video"],N1(n)),e}function Fm(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],S1(n)),e}function Um(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const r=u(t,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const i=u(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const o=u(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const s=u(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);const a=u(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const h=u(t,["mediaResolution"]);h!=null&&f(e,["mediaResolution"],h);const m=u(t,["presencePenalty"]);m!=null&&f(e,["presencePenalty"],m);const v=u(t,["responseLogprobs"]);v!=null&&f(e,["responseLogprobs"],v);const y=u(t,["responseMimeType"]);y!=null&&f(e,["responseMimeType"],y);const S=u(t,["responseModalities"]);S!=null&&f(e,["responseModalities"],S);const A=u(t,["responseSchema"]);A!=null&&f(e,["responseSchema"],A);const w=u(t,["routingConfig"]);w!=null&&f(e,["routingConfig"],w);const N=u(t,["seed"]);N!=null&&f(e,["seed"],N);const T=u(t,["speechConfig"]);T!=null&&f(e,["speechConfig"],T);const _=u(t,["stopSequences"]);_!=null&&f(e,["stopSequences"],_);const R=u(t,["temperature"]);R!=null&&f(e,["temperature"],R);const P=u(t,["thinkingConfig"]);P!=null&&f(e,["thinkingConfig"],P);const D=u(t,["topK"]);D!=null&&f(e,["topK"],D);const I=u(t,["topP"]);if(I!=null&&f(e,["topP"],I),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function jm(t,e){const n={},r=u(e,["model"]);return r!=null&&f(n,["_url","name"],pt(t,r)),n}function Bm(t,e){const n={},r=u(e,["model"]);return r!=null&&f(n,["_url","name"],pt(t,r)),n}function qm(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Om(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function Hm(t){const e={},n=u(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const r=u(t,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Vm(t){const e={},n=u(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const r=u(t,["imageSize"]);r!=null&&f(e,["imageSize"],r);const i=u(t,["personGeneration"]);i!=null&&f(e,["personGeneration"],i);const o=u(t,["outputMimeType"]);o!=null&&f(e,["imageOutputOptions","mimeType"],o);const s=u(t,["outputCompressionQuality"]);return s!=null&&f(e,["imageOutputOptions","compressionQuality"],s),e}function Gm(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],ii(n));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function rf(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&f(e,["imageBytes"],ii(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Na(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],ii(n));const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function nr(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const r=u(t,["imageBytes"]);r!=null&&f(e,["bytesBase64Encoded"],ii(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function zm(t,e,n){const r={},i=u(e,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const o=u(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const s=u(e,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);const a=u(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],Kd(t,a)),r}function Wm(t,e,n){const r={},i=u(e,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const o=u(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const s=u(e,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);const a=u(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],Kd(t,a)),r}function $m(t,e){const n={},r=u(e,["config"]);return r!=null&&zm(t,r,n),n}function Jm(t,e){const n={},r=u(e,["config"]);return r!=null&&Wm(t,r,n),n}function Ym(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["_self"]);if(i!=null){let o=Xd(i);Array.isArray(o)&&(o=o.map(s=>Ml(s))),f(e,["models"],o)}return e}function Km(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["_self"]);if(i!=null){let o=Xd(i);Array.isArray(o)&&(o=o.map(s=>Dl(s))),f(e,["models"],o)}return e}function Xm(t){const e={},n=u(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const r=u(t,["segmentationClasses"]);r!=null&&f(e,["maskClasses"],r);const i=u(t,["maskDilation"]);return i!=null&&f(e,["dilation"],i),e}function Ml(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const o=u(t,["version"]);o!=null&&f(e,["version"],o);const s=u(t,["_self"]);s!=null&&f(e,["tunedModelInfo"],h1(s));const a=u(t,["inputTokenLimit"]);a!=null&&f(e,["inputTokenLimit"],a);const l=u(t,["outputTokenLimit"]);l!=null&&f(e,["outputTokenLimit"],l);const c=u(t,["supportedGenerationMethods"]);c!=null&&f(e,["supportedActions"],c);const h=u(t,["temperature"]);h!=null&&f(e,["temperature"],h);const m=u(t,["maxTemperature"]);m!=null&&f(e,["maxTemperature"],m);const v=u(t,["topP"]);v!=null&&f(e,["topP"],v);const y=u(t,["topK"]);y!=null&&f(e,["topK"],y);const S=u(t,["thinking"]);return S!=null&&f(e,["thinking"],S),e}function Dl(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=u(t,["description"]);i!=null&&f(e,["description"],i);const o=u(t,["versionId"]);o!=null&&f(e,["version"],o);const s=u(t,["deployedModels"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>um(v))),f(e,["endpoints"],m)}const a=u(t,["labels"]);a!=null&&f(e,["labels"],a);const l=u(t,["_self"]);l!=null&&f(e,["tunedModelInfo"],p1(l));const c=u(t,["defaultCheckpointId"]);c!=null&&f(e,["defaultCheckpointId"],c);const h=u(t,["checkpoints"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>v)),f(e,["checkpoints"],m)}return e}function Qm(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],dm(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],fm(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],Ug(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const h=u(t,["thought"]);h!=null&&f(e,["thought"],h);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const v=u(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function Zm(t){const e={},n=u(t,["productImage"]);return n!=null&&f(e,["image"],nr(n)),e}function e1(t,e){const n={},r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=u(t,["baseSteps"]);e!==void 0&&i!=null&&f(e,["parameters","baseSteps"],i);const o=u(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const s=u(t,["seed"]);e!==void 0&&s!=null&&f(e,["parameters","seed"],s);const a=u(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=u(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=u(t,["addWatermark"]);e!==void 0&&c!=null&&f(e,["parameters","addWatermark"],c);const h=u(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const m=u(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m);const v=u(t,["enhancePrompt"]);e!==void 0&&v!=null&&f(e,["parameters","enhancePrompt"],v);const y=u(t,["labels"]);return e!==void 0&&y!=null&&f(e,["labels"],y),n}function t1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["source"]);i!=null&&r1(i,n);const o=u(e,["config"]);return o!=null&&e1(o,n),n}function n1(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>wa(i))),f(e,["generatedImages"],r)}return e}function r1(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=u(t,["personImage"]);e!==void 0&&i!=null&&f(e,["instances[0]","personImage","image"],nr(i));const o=u(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Zm(a))),f(e,["instances[0]","productImages"],s)}return n}function i1(t){const e={},n=u(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],nr(n));const r=u(t,["referenceId"]);r!=null&&f(e,["referenceId"],r);const i=u(t,["referenceType"]);i!=null&&f(e,["referenceType"],i);const o=u(t,["maskImageConfig"]);o!=null&&f(e,["maskImageConfig"],Xm(o));const s=u(t,["controlImageConfig"]);s!=null&&f(e,["controlImageConfig"],Gg(s));const a=u(t,["styleImageConfig"]);a!=null&&f(e,["styleImageConfig"],a);const l=u(t,["subjectImageConfig"]);return l!=null&&f(e,["subjectImageConfig"],l),e}function of(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const r=u(t,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const i=u(t,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function sf(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const r=u(t,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const i=u(t,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function o1(t){const e={},n=u(t,["category"]);if(n!=null&&f(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function s1(t){const e={},n=u(t,["image"]);return n!=null&&f(e,["image"],nr(n)),e}function a1(t,e){const n={},r=u(t,["mode"]);e!==void 0&&r!=null&&f(e,["parameters","mode"],r);const i=u(t,["maxPredictions"]);e!==void 0&&i!=null&&f(e,["parameters","maxPredictions"],i);const o=u(t,["confidenceThreshold"]);e!==void 0&&o!=null&&f(e,["parameters","confidenceThreshold"],o);const s=u(t,["maskDilation"]);e!==void 0&&s!=null&&f(e,["parameters","maskDilation"],s);const a=u(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","binaryColorThreshold"],a);const l=u(t,["labels"]);return e!==void 0&&l!=null&&f(e,["labels"],l),n}function l1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["source"]);i!=null&&u1(i,n);const o=u(e,["config"]);return o!=null&&a1(o,n),n}function c1(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Mm(i))),f(e,["generatedMasks"],r)}return e}function u1(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=u(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],nr(i));const o=u(t,["scribbleImage"]);return e!==void 0&&o!=null&&f(e,["instances[0]","scribble"],s1(o)),n}function d1(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],hm(r)),e}function f1(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>m)),f(e,["functionDeclarations"],h)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],qm(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],Om(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function af(t){const e={},n=u(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>pm(v))),f(e,["functionDeclarations"],m)}const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);const h=u(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function h1(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const r=u(t,["createTime"]);r!=null&&f(e,["createTime"],r);const i=u(t,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function p1(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const r=u(t,["createTime"]);r!=null&&f(e,["createTime"],r);const i=u(t,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function g1(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=u(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const o=u(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function m1(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=u(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const o=u(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function v1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","name"],pt(t,r));const i=u(e,["config"]);return i!=null&&g1(i,n),n}function y1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&m1(i,n),n}function x1(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=u(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&f(e,["parameters","safetySetting"],i);const o=u(t,["personGeneration"]);e!==void 0&&o!=null&&f(e,["parameters","personGeneration"],o);const s=u(t,["includeRaiReason"]);e!==void 0&&s!=null&&f(e,["parameters","includeRaiReason"],s);const a=u(t,["outputMimeType"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","mimeType"],a);const l=u(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&f(e,["parameters","outputOptions","compressionQuality"],l);const c=u(t,["enhanceInputImage"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],c);const h=u(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const m=u(t,["labels"]);e!==void 0&&m!=null&&f(e,["labels"],m);const v=u(t,["numberOfImages"]);e!==void 0&&v!=null&&f(e,["parameters","sampleCount"],v);const y=u(t,["mode"]);return e!==void 0&&y!=null&&f(e,["parameters","mode"],y),n}function b1(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["_url","model"],pt(t,r));const i=u(e,["image"]);i!=null&&f(n,["instances[0]","image"],nr(i));const o=u(e,["upscaleFactor"]);o!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=u(e,["config"]);return s!=null&&x1(s,n),n}function w1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>wa(o))),f(e,["generatedImages"],i)}return e}function N1(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["uri"],n);const r=u(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],ii(r));const i=u(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function S1(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],ii(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function _1(t){const e={},n=u(t,["image"]);n!=null&&f(e,["_self"],nr(n));const r=u(t,["maskMode"]);return r!=null&&f(e,["maskMode"],r),e}function A1(t){const e={},n=u(t,["image"]);n!=null&&f(e,["image"],Na(n));const r=u(t,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function C1(t){const e={},n=u(t,["image"]);n!=null&&f(e,["image"],nr(n));const r=u(t,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function lf(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["uri"],n);const r=u(t,["videoBytes"]);r!=null&&f(e,["encodedVideo"],ii(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["encoding"],i),e}function cf(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const r=u(t,["videoBytes"]);r!=null&&f(e,["bytesBase64Encoded"],ii(r));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T1(t,e){const n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["displayName"],r),n}function I1(t){const e={},n=u(t,["config"]);return n!=null&&T1(n,e),e}function k1(t,e){const n={},r=u(t,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),n}function E1(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const r=u(t,["config"]);return r!=null&&k1(r,e),e}function P1(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function L1(t,e){const n={},r=u(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["customMetadata"],o)}const i=u(t,["chunkingConfig"]);return e!==void 0&&i!=null&&f(e,["chunkingConfig"],i),n}function R1(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const r=u(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=u(t,["done"]);i!=null&&f(e,["done"],i);const o=u(t,["error"]);o!=null&&f(e,["error"],o);const s=u(t,["response"]);return s!=null&&f(e,["response"],D1(s)),e}function M1(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const r=u(t,["fileName"]);r!=null&&f(e,["fileName"],r);const i=u(t,["config"]);return i!=null&&L1(i,e),e}function D1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&f(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function F1(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function U1(t){const e={},n=u(t,["config"]);return n!=null&&F1(n,e),e}function j1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["fileSearchStores"],o)}return e}function uf(t,e){const n={},r=u(t,["mimeType"]);e!==void 0&&r!=null&&f(e,["mimeType"],r);const i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=u(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["customMetadata"],a)}const s=u(t,["chunkingConfig"]);return e!==void 0&&s!=null&&f(e,["chunkingConfig"],s),n}function B1(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const r=u(t,["config"]);return r!=null&&uf(r,e),e}function q1(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O1="Content-Type",H1="X-Server-Timeout",V1="User-Agent",Fl="x-goog-api-client",G1="1.35.0",z1=`google-genai-sdk/${G1}`,W1="v1beta1",$1="v1beta";class J1{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:W1,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:$1,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&Y1(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await id(i),new Pl(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await id(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return er(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:h}=yield Xe(i.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=o.decode(h,{stream:!0});try{const S=JSON.parse(m);if("error"in S){const A=JSON.parse(JSON.stringify(S.error)),w=A.status,N=A.code,T=`got status: ${w}. ${JSON.stringify(S)}`;if(N>=400&&N<600)throw new xa({message:T,status:N})}}catch(S){if(S.name==="ApiError")throw S}s+=m;let v=-1,y=0;for(;;){v=-1,y=0;for(const w of l){const N=s.indexOf(w);N!==-1&&(v===-1||N<v)&&(v=N,y=w.length)}if(v===-1)break;const S=s.substring(0,v);s=s.substring(v+y);const A=S.trim();if(A.startsWith(a)){const w=A.substring(a.length).trim();try{const N=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Xe(new Pl(N))}catch(N){throw new Error(`exception parsing stream chunk ${w}. ${N}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=z1+" "+this.clientOptions.userAgentExtra;return e[V1]=n,e[Fl]=n,e[O1]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(H1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},c=this.getFileName(e),h=De("upload/v1beta/files",l._url),m=await this.fetchUploadUrl(h,i.sizeBytes,i.mimeType,c,l,n==null?void 0:n.httpOptions);return o.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),a=String(s.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),m={};r!=null&&uf(r,m);const v=await this.fetchUploadUrl(c,a,l,h,m,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function id(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new xa({message:i,status:n}):new Error(i)}}function Y1(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const c=s[l],h=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&h&&typeof h=="object"&&!Array.isArray(h)?a[l]=r(h,c):(h&&c&&typeof h!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof h}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const K1="mcp_used/unknown";let X1=!1;function df(t){for(const e of t)if(Q1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return X1}function ff(t){var e;const n=(e=t[Fl])!==null&&e!==void 0?e:"";t[Fl]=(n+` ${K1}`).trimStart()}function Q1(t){return t!==null&&typeof t=="object"&&t instanceof ac}function Z1(t){return er(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const s=yield Xe(n.listTools({cursor:i}));for(const a of s.tools)yield yield Xe(a),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class ac{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new ac(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var a=!0,l=(n=void 0,tr(Z1(h))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const m=i;s.push(m);const v=m.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=h}}catch(m){n={error:m}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),Pp(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function e2(t,e,n){const r=new Sp;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class t2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=i2(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const h=new Promise(_=>{c=_}),m=e.callbacks,v=function(){c({})},y=this.apiClient,S={onopen:v,onmessage:_=>{e2(y,m.onmessage,_)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(_){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(_){}},A=this.webSocketFactory.create(l,r2(s),S);A.connect(),await h;const T={setup:{model:pt(this.apiClient,e.model)}};return A.send(JSON.stringify(T)),new n2(A,this.apiClient)}}class n2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Ig(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Tg(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(lo.PLAY)}pause(){this.sendPlaybackControl(lo.PAUSE)}stop(){this.sendPlaybackControl(lo.STOP)}resetContext(){this.sendPlaybackControl(lo.RESET_CONTEXT)}close(){this.conn.close()}}function r2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function i2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function s2(t,e,n){const r=new Np;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=Pg(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class a2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new t2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let h;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&df(e.config.tools)&&ff(m);const v=d2(m);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,h);else{const j=this.apiClient.getApiKey();let J="BidiGenerateContent",E="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),J="BidiGenerateContentConstrained",E="access_token"),h=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${J}?${E}=${j}`}let y=()=>{};const S=new Promise(j=>{y=j}),A=e.callbacks,w=function(){var j;(j=A==null?void 0:A.onopen)===null||j===void 0||j.call(A),y({})},N=this.apiClient,T={onopen:w,onmessage:j=>{s2(N,A.onmessage,j)},onerror:(n=A==null?void 0:A.onerror)!==null&&n!==void 0?n:function(j){},onclose:(r=A==null?void 0:A.onclose)!==null&&r!==void 0?r:function(j){}},_=this.webSocketFactory.create(h,u2(v),T);_.connect(),await S;let R=pt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const j=this.apiClient.getProject(),J=this.apiClient.getLocation();R=`projects/${j}/locations/${J}/`+R}let P={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[fa.AUDIO]}:e.config.responseModalities=[fa.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const D=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],I=[];for(const j of D)if(this.isCallableTool(j)){const J=j;I.push(await J.tool())}else I.push(j);I.length>0&&(e.config.tools=I);const M={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=Cg(this.apiClient,M):P=Ag(this.apiClient,M),delete P.config,_.send(JSON.stringify(P)),new c2(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const l2={turnComplete:!0};class c2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=jn(n.turns),e.isVertexAI()||(r=r.map(i=>ba(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(o2)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},l2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Eg(e)}:n={realtimeInput:kg(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function u2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function d2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const od=10;function sd(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ho(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ho(t){return"callTool"in t&&typeof t.callTool=="function"}function f2(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>ho(i)))!==null&&r!==void 0?r:!1}function ad(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(ho(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function ld(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h2 extends Rr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!f2(n)||sd(n.config))return await this.generateContentInternal(l);const c=ad(n);if(c.length>0){const A=c.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let h,m;const v=jn(l.contents),y=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:od;let S=0;for(;S<y&&(h=await this.generateContentInternal(l),!(!h.functionCalls||h.functionCalls.length===0));){const A=h.candidates[0].content,w=[];for(const N of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(ho(N)){const _=await N.callTool(h.functionCalls);w.push(..._)}S++,m={role:"user",parts:w},l.contents=jn(l.contents),l.contents.push(A),l.contents.push(m),ld(l.config)&&(v.push(A),v.push(m))}return ld(l.config)&&(h.automaticFunctionCallingHistory=v),h},this.generateContentStream=async n=>{var r,i,o,s,a;if(this.maybeMoveToResponseJsonSchem(n),sd(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const l=ad(n);if(l.length>0){const m=l.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,h=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:s.push(l);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Ci(Lr.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async l=>ho(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&df(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),ff(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ho(s)){const a=s,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:od;let s=!1,a=0;const l=await this.initAfcToolsMap(e);return(function(c,h,m){return er(this,arguments,function*(){for(var v,y,S,A,w,N;a<o;){s&&(a++,s=!1);const P=yield Xe(c.processParamsMaybeAddMcpUsage(m)),D=yield Xe(c.generateContentStreamInternal(P)),I=[],M=[];try{for(var T=!0,_=(y=void 0,tr(D)),R;R=yield Xe(_.next()),v=R.done,!v;T=!0){A=R.value,T=!1;const j=A;if(yield yield Xe(j),j.candidates&&(!((w=j.candidates[0])===null||w===void 0)&&w.content)){M.push(j.candidates[0].content);for(const J of(N=j.candidates[0].content.parts)!==null&&N!==void 0?N:[])if(a<o&&J.functionCall){if(!J.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(J.functionCall.name)){const E=yield Xe(h.get(J.functionCall.name).callTool([J.functionCall]));I.push(...E)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${J.functionCall.name}`)}}}}catch(j){y={error:j}}finally{try{!T&&!v&&(S=_.return)&&(yield Xe(S.call(_)))}finally{if(y)throw y.error}}if(I.length>0){s=!0;const j=new Jo;j.candidates=[{content:{role:"user",parts:I}}],yield yield Xe(j);const J=[];J.push(...M),J.push({role:"user",parts:I});const E=jn(m.contents).concat(J);m.contents=E}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=td(this.apiClient,e);return a=De("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=rd(h),v=new Jo;return Object.assign(v,m),v})}else{const c=ed(this.apiClient,e);return a=De("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=nd(h),v=new Jo;return Object.assign(v,m),v})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=td(this.apiClient,e);return a=De("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(m){return er(this,arguments,function*(){var v,y,S,A;try{for(var w=!0,N=tr(m),T;T=yield Xe(N.next()),v=T.done,!v;w=!0){A=T.value,w=!1;const _=A,R=rd(yield Xe(_.json()));R.sdkHttpResponse={headers:_.headers};const P=new Jo;Object.assign(P,R),yield yield Xe(P)}}catch(_){y={error:_}}finally{try{!w&&!v&&(S=N.return)&&(yield Xe(S.call(N)))}finally{if(y)throw y.error}}})})}else{const c=ed(this.apiClient,e);return a=De("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(m){return er(this,arguments,function*(){var v,y,S,A;try{for(var w=!0,N=tr(m),T;T=yield Xe(N.next()),v=T.done,!v;w=!0){A=T.value,w=!1;const _=A,R=nd(yield Xe(_.json()));R.sdkHttpResponse={headers:_.headers};const P=new Jo;Object.assign(P,R),yield yield Xe(P)}}catch(_){y={error:_}}finally{try{!w&&!v&&(S=N.return)&&(yield Xe(S.call(N)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=am(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=cm(h),v=new Uu;return Object.assign(v,m),v})}else{const c=sm(this.apiClient,e);return a=De("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=lm(h),v=new Uu;return Object.assign(v,m),v})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=bm(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Nm(h),v=new ju;return Object.assign(v,m),v})}else{const c=xm(this.apiClient,e);return a=De("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=wm(h),v=new ju;return Object.assign(v,m),v})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=nm(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const c=rm(l),h=new dp;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=b1(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const c=w1(l),h=new fp;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=t1(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=n1(l),h=new hp;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=l1(this.apiClient,e);return o=De("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=c1(l),h=new pp;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Bm(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Dl(h))}else{const c=jm(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Ml(h))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Jm(this.apiClient,e);return a=De("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Km(h),v=new Bu;return Object.assign(v,m),v})}else{const c=$m(this.apiClient,e);return a=De("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Ym(h),v=new Bu;return Object.assign(v,m),v})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=y1(this.apiClient,e);return a=De("{model}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Dl(h))}else{const c=v1(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Ml(h))}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Qg(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=em(h),v=new qu;return Object.assign(v,m),v})}else{const c=Xg(this.apiClient,e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Zg(h),v=new qu;return Object.assign(v,m),v})}}async countTokens(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Jg(this.apiClient,e);return a=De("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Kg(h),v=new Ou;return Object.assign(v,m),v})}else{const c=$g(this.apiClient,e);return a=De("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Yg(h),v=new Ou;return Object.assign(v,m),v})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=qg(this.apiClient,e);return o=De("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const c=Og(l),h=new gp;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Im(this.apiClient,e);return a=De("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const m=Cm(h),v=new ha;return Object.assign(v,m),v})}else{const c=Tm(this.apiClient,e);return a=De("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const m=Am(h),v=new ha;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p2 extends Rr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=op(e);return a=De("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const c=ip(e);return a=De("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=Xh(e);return o=De("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g2(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function m2(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>A2(o))),f(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&f(e,["role"],r),e}function v2(t,e,n){const r={},i=u(e,["expireTime"]);n!==void 0&&i!=null&&f(n,["expireTime"],i);const o=u(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&f(n,["newSessionExpireTime"],o);const s=u(e,["uses"]);n!==void 0&&s!=null&&f(n,["uses"],s);const a=u(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],_2(t,a));const l=u(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),r}function y2(t,e){const n={},r=u(e,["config"]);return r!=null&&f(n,["config"],v2(t,r,n)),n}function x2(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function b2(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const r=u(t,["args"]);r!=null&&f(e,["args"],r);const i=u(t,["name"]);if(i!=null&&f(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function w2(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function N2(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function S2(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","speechConfig"],sc(m));const v=u(t,["thinkingConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","thinkingConfig"],v);const y=u(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],y);const S=u(t,["systemInstruction"]);e!==void 0&&S!=null&&f(e,["setup","systemInstruction"],m2(dn(S)));const A=u(t,["tools"]);if(e!==void 0&&A!=null){let D=mo(A);Array.isArray(D)&&(D=D.map(I=>T2(go(I)))),f(e,["setup","tools"],D)}const w=u(t,["sessionResumption"]);e!==void 0&&w!=null&&f(e,["setup","sessionResumption"],C2(w));const N=u(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&f(e,["setup","inputAudioTranscription"],N);const T=u(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&f(e,["setup","outputAudioTranscription"],T);const _=u(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&f(e,["setup","realtimeInputConfig"],_);const R=u(t,["contextWindowCompression"]);e!==void 0&&R!=null&&f(e,["setup","contextWindowCompression"],R);const P=u(t,["proactivity"]);if(e!==void 0&&P!=null&&f(e,["setup","proactivity"],P),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function _2(t,e){const n={},r=u(e,["model"]);r!=null&&f(n,["setup","model"],pt(t,r));const i=u(e,["config"]);return i!=null&&f(n,["config"],S2(i,n)),n}function A2(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&f(e,["fileData"],x2(o));const s=u(t,["functionCall"]);s!=null&&f(e,["functionCall"],b2(s));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],g2(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const h=u(t,["thought"]);h!=null&&f(e,["thought"],h);const m=u(t,["thoughtSignature"]);m!=null&&f(e,["thoughtSignature"],m);const v=u(t,["videoMetadata"]);return v!=null&&f(e,["videoMetadata"],v),e}function C2(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function T2(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>m)),f(e,["functionDeclarations"],h)}const s=u(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],w2(s));const a=u(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],N2(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I2(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function k2(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=I2(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>s.includes(c)?`generationConfig.${c}`:c));const l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class E2 extends Rr{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=y2(this.apiClient,e);o=De("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const l=k2(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P2(t,e){const n={},r=u(t,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),n}function L2(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const r=u(t,["config"]);return r!=null&&P2(r,e),e}function R2(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function M2(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function D2(t){const e={},n=u(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const r=u(t,["config"]);return r!=null&&M2(r,e),e}function F2(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=u(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U2 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ci(Lr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=R2(e);return o=De("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=L2(e);i=De("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=D2(e);return o=De("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=F2(l),h=new mp;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j2 extends Rr{constructor(e,n=new U2(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Ci(Lr.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=I1(e);return o=De("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=P1(e);return o=De("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=E1(e);i=De("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=U1(e);return o=De("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=j1(l),h=new vp;return Object.assign(h,c),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=B1(e);return o=De("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=q1(l),h=new yp;return Object.assign(h,c),h})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=M1(e);return o=De("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=R1(l),h=new tc;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hf=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return hf=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const B2=()=>hf();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ul(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const jl=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bn extends Error{}class mn extends Bn{constructor(e,n,r,i){super(`${mn.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Sa({message:r,cause:jl(n)});const o=n;return e===400?new gf(e,o,r,i):e===401?new mf(e,o,r,i):e===403?new vf(e,o,r,i):e===404?new yf(e,o,r,i):e===409?new xf(e,o,r,i):e===422?new bf(e,o,r,i):e===429?new wf(e,o,r,i):e>=500?new Nf(e,o,r,i):new mn(e,o,r,i)}}class Bl extends mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Sa extends mn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class pf extends Sa{constructor({message:e}={}){super({message:e??"Request timed out."})}}class gf extends mn{}class mf extends mn{}class vf extends mn{}class yf extends mn{}class xf extends mn{}class bf extends mn{}class wf extends mn{}class Nf extends mn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q2=/^[a-z][a-z0-9+.-]*:/i,O2=t=>q2.test(t);let ql=t=>(ql=Array.isArray,ql(t));const H2=ql;let V2=H2;const cd=V2;function G2(t){if(!t)return!0;for(const e in t)return!1;return!0}function z2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const W2=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Bn(`${t} must be an integer`);if(e<0)throw new Bn(`${t} must be a positive integer`);return e},$2=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J2=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y2(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const K2=()=>{var t,e,n,r,i;const o=Y2();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oo,"X-Stainless-OS":dd(Deno.build.os),"X-Stainless-Arch":ud(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oo,"X-Stainless-OS":dd((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":ud((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=X2();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function X2(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const ud=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",dd=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Qs;const Q2=()=>Qs??(Qs=K2());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z2(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Sf(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function e5(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Sf({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function _f(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function t5(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n5=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Af=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function vl(t,e,n){return Af(),new File(t,e??"unknown_file",n)}function r5(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const i5=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cf=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",o5=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Cf(t),s5=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function a5(t,e,n){if(Af(),t=await t,o5(t))return t instanceof File?t:vl([await t.arrayBuffer()],t.name);if(s5(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),vl(await Ol(i),e,n)}const r=await Ol(t);if(e||(e=r5(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return vl(r,e,n)}async function Ol(t){var e,n,r,i,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(Cf(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(i5(t))try{for(var a=!0,l=tr(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const h=i;s.push(...await Ol(h))}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const h=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${h?`; constructor: ${h}`:""}${l5(t)}`)}return s}function l5(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tf{constructor(e){this._client=e}}Tf._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function If(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const fd=Object.freeze(Object.create(null)),c5=(t=If)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],s=n.reduce((h,m,v)=>{var y,S,A;/[?#]/.test(m)&&(i=!0);const w=r[v];let N=(i?encodeURIComponent:t)(""+w);return v!==r.length&&(w==null||typeof w=="object"&&w.toString===((A=Object.getPrototypeOf((S=Object.getPrototypeOf((y=w.hasOwnProperty)!==null&&y!==void 0?y:fd))!==null&&S!==void 0?S:fd))===null||A===void 0?void 0:A.toString))&&(N=w+"",o.push({start:h.length+m.length,length:N.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),h+m+(v===r.length?"":N)},""),a=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)o.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(o.sort((h,m)=>h.start-m.start),o.length>0){let h=0;const m=o.reduce((v,y)=>{const S=" ".repeat(y.start-h),A="^".repeat(y.length);return h=y.start+y.length,v+S+A},"");throw new Bn(`Path parameters result in path with invalid segments:
${o.map(v=>v.error).join(`
`)}
${s}
${m}`)}return s}),Zs=c5(If);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kf extends Tf{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=ga(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Bn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Bn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Zs`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Zs`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Zs`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:s=this._client.apiVersion}=o,a=ga(o,["api_version"]);return this._client.get(Zs`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}kf._key=Object.freeze(["interactions"]);class Ef extends kf{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u5(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let ea;function lc(t){let e;return(ea??(e=new globalThis.TextEncoder,ea=e.encode.bind(e)))(t)}let ta;function hd(t){let e;return(ta??(e=new globalThis.TextDecoder,ta=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _a{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?lc(e):e;this.buffer=u5([this.buffer,n]);const r=[];let i;for(;(i=d5(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(hd(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=hd(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}_a.NEWLINE_CHARS=new Set([`
`,"\r"]);_a.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function d5(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function f5(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ma={off:0,error:200,warn:300,info:400,debug:500},pd=(t,e,n)=>{if(t){if(z2(ma,t))return t;gn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ma))}`)}};function Zo(){}function na(t,e,n){return!e||ma[t]>ma[n]?Zo:e[t].bind(e)}const h5={error:Zo,warn:Zo,info:Zo,debug:Zo};let gd=new WeakMap;function gn(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return h5;const i=gd.get(n);if(i&&i[0]===r)return i[1];const o={error:na("error",n,r),warn:na("warn",n,r),info:na("info",n,r),debug:na("debug",n,r)};return gd.set(n,[r,o]),o}const yi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class co{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?gn(r):console;function s(){return er(this,arguments,function*(){var l,c,h,m;if(i)throw new Bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let v=!1;try{try{for(var y=!0,S=tr(p5(e,n)),A;A=yield Xe(S.next()),l=A.done,!l;y=!0){m=A.value,y=!1;const w=m;if(!v)if(w.data.startsWith("[DONE]")){v=!0;continue}else try{yield yield Xe(JSON.parse(w.data))}catch(N){throw o.error("Could not parse message into JSON:",w.data),o.error("From chunk:",w.raw),N}}}catch(w){c={error:w}}finally{try{!y&&!l&&(h=S.return)&&(yield Xe(h.call(S)))}finally{if(c)throw c.error}}v=!0}catch(w){if(Ul(w))return yield Xe(void 0);throw w}finally{v||n.abort()}})}return new co(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return er(this,arguments,function*(){var l,c,h,m;const v=new _a,y=_f(e);try{for(var S=!0,A=tr(y),w;w=yield Xe(A.next()),l=w.done,!l;S=!0){m=w.value,S=!1;const N=m;for(const T of v.decode(N))yield yield Xe(T)}}catch(N){c={error:N}}finally{try{!S&&!l&&(h=A.return)&&(yield Xe(h.call(A)))}finally{if(c)throw c.error}}for(const N of v.flush())yield yield Xe(N)})}function s(){return er(this,arguments,function*(){var l,c,h,m;if(i)throw new Bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let v=!1;try{try{for(var y=!0,S=tr(o()),A;A=yield Xe(S.next()),l=A.done,!l;y=!0){m=A.value,y=!1;const w=m;v||w&&(yield yield Xe(JSON.parse(w)))}}catch(w){c={error:w}}finally{try{!y&&!l&&(h=S.return)&&(yield Xe(h.call(S)))}finally{if(c)throw c.error}}v=!0}catch(w){if(Ul(w))return yield Xe(void 0);throw w}finally{v||n.abort()}})}return new co(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new co(()=>i(e),this.controller,this.client),new co(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Sf({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const s=lc(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function p5(t,e){return er(this,arguments,function*(){var r,i,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Bn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Bn("Attempted to iterate over a response with no body");const a=new m5,l=new _a,c=_f(t.body);try{for(var h=!0,m=tr(g5(c)),v;v=yield Xe(m.next()),r=v.done,!r;h=!0){s=v.value,h=!1;const y=s;for(const S of l.decode(y)){const A=a.decode(S);A&&(yield yield Xe(A))}}}catch(y){i={error:y}}finally{try{!h&&!r&&(o=m.return)&&(yield Xe(o.call(m)))}finally{if(i)throw i.error}}for(const y of l.flush()){const S=a.decode(y);S&&(yield yield Xe(S))}})}function g5(t){return er(this,arguments,function*(){var n,r,i,o;let s=new Uint8Array;try{for(var a=!0,l=tr(t),c;c=yield Xe(l.next()),n=c.done,!n;a=!0){o=c.value,a=!1;const h=o;if(h==null)continue;const m=h instanceof ArrayBuffer?new Uint8Array(h):typeof h=="string"?lc(h):h;let v=new Uint8Array(s.length+m.length);v.set(s),v.set(m,s.length),s=v;let y;for(;(y=f5(s))!==-1;)yield yield Xe(s.slice(0,y)),s=s.slice(y)}}catch(h){r={error:h}}finally{try{!a&&!n&&(i=l.return)&&(yield Xe(i.call(l)))}finally{if(r)throw r.error}}s.length>0&&(yield yield Xe(s))})}class m5{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=v5(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function v5(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function y5(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=await(async()=>{var a;if(e.options.stream)return gn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):co.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return gn(t).debug(`[${r}] response parsed`,yi({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cc extends Promise{constructor(e,n,r=y5){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new cc(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pf=Symbol("brand.privateNullableHeaders");function*x5(t){if(!t)return;if(Pf in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():cd(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=cd(r[1])?r[1]:[r[1]];let s=!1;for(const a of o)a!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,a])}}const Yo=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,s]of x5(r)){const a=o.toLowerCase();i.has(a)||(e.delete(o),i.add(a)),s===null?(e.delete(o),n.add(a)):(e.append(o,s),n.delete(a))}}return{[Pf]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yl=t=>{var e,n,r,i,o,s;if(typeof globalThis.process<"u")return(r=(n=(e=zh)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Lf;class Aa{constructor(e){var n,r,i,o,s,a,l,{baseURL:c=yl("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=yl("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,v=ga(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:h,apiVersion:m},v),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(r=y.timeout)!==null&&r!==void 0?r:Aa.DEFAULT_TIMEOUT,this.logger=(i=y.logger)!==null&&i!==void 0?i:console;const S="warn";this.logLevel=S,this.logLevel=(s=(o=pd(y.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:pd(yl("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:S,this.fetchOptions=y.fetchOptions,this.maxRetries=(a=y.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=y.fetch)!==null&&l!==void 0?l:Z2(),this.encoder=n5,this._options=y,this.apiKey=h,this.apiVersion=m,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Yo([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Yo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Yo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Bn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${oo}`}defaultIdempotencyKey(){return`stainless-node-retry-${B2()}`}makeStatusError(e,n,r,i){return mn.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=O2(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return G2(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new cc(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,s;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:h,timeout:m}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:h,options:a});const v="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=r===void 0?"":`, retryOf: ${r}`,S=Date.now();if(gn(this).debug(`[${v}] sending request`,yi({retryOfRequestLogID:r,method:a.method,url:h,options:a,headers:c.headers})),!((o=a.signal)===null||o===void 0)&&o.aborted)throw new Bl;const A=new AbortController,w=await this.fetchWithTimeout(h,c,m,A).catch(jl),N=Date.now();if(w instanceof globalThis.Error){const _=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Bl;const R=Ul(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(n)return gn(this).info(`[${v}] connection ${R?"timed out":"failed"} - ${_}`),gn(this).debug(`[${v}] connection ${R?"timed out":"failed"} (${_})`,yi({retryOfRequestLogID:r,url:h,durationMs:N-S,message:w.message})),this.retryRequest(a,n,r??v);throw gn(this).info(`[${v}] connection ${R?"timed out":"failed"} - error; no more retries left`),gn(this).debug(`[${v}] connection ${R?"timed out":"failed"} (error; no more retries left)`,yi({retryOfRequestLogID:r,url:h,durationMs:N-S,message:w.message})),R?new pf:new Sa({cause:w})}const T=`[${v}${y}] ${c.method} ${h} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${N-S}ms`;if(!w.ok){const _=await this.shouldRetry(w);if(n&&_){const j=`retrying, ${n} attempts remaining`;return await t5(w.body),gn(this).info(`${T} - ${j}`),gn(this).debug(`[${v}] response error (${j})`,yi({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:N-S})),this.retryRequest(a,n,r??v,w.headers)}const R=_?"error; no more retries left":"error; not retryable";gn(this).info(`${T} - ${R}`);const P=await w.text().catch(j=>jl(j).message),D=$2(P),I=D?void 0:P;throw gn(this).debug(`[${v}] response error (${R})`,yi({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,message:I,durationMs:Date.now()-S})),this.makeStatusError(w.status,D,I,w.headers)}return gn(this).info(T),gn(this).debug(`[${v}] response start`,yi({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:N-S})),{response:w,options:a,controller:A,requestLogID:v,retryOfRequestLogID:r,startTime:S}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:s,method:a}=o,l=ga(o,["signal","method"]);s&&s.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),h=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m=Object.assign(Object.assign(Object.assign({signal:i.signal},h?{duplex:"half"}:{}),{method:"GET"}),l);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let s;const a=i==null?void 0:i.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(s=c)}const l=i==null?void 0:i.get("retry-after");if(l&&!s){const c=parseFloat(l);Number.isNaN(c)?s=Date.parse(l)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await J2(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const s=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:h}=s,m=this.buildURL(l,c,h);"timeout"in s&&W2("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:v,body:y}=this.buildBody({options:s}),S=await this.buildHeaders({options:e,method:a,bodyHeaders:v,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:S},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:m,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let a=Yo([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Q2()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Yo([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:e5(e)}:this.encoder({body:e,headers:r})}}Aa.DEFAULT_TIMEOUT=6e4;class Qt extends Aa{constructor(){super(...arguments),this.interactions=new Ef(this)}}Lf=Qt;Qt.GeminiNextGenAPIClient=Lf;Qt.GeminiNextGenAPIClientError=Bn;Qt.APIError=mn;Qt.APIConnectionError=Sa;Qt.APIConnectionTimeoutError=pf;Qt.APIUserAbortError=Bl;Qt.NotFoundError=yf;Qt.ConflictError=xf;Qt.RateLimitError=wf;Qt.BadRequestError=gf;Qt.AuthenticationError=mf;Qt.InternalServerError=Nf;Qt.PermissionDeniedError=vf;Qt.UnprocessableEntityError=bf;Qt.toFile=a5;Qt.Interactions=Ef;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b5(t,e){const n={},r=u(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function w5(t,e){const n={},r=u(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function N5(t,e){const n={},r=u(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function S5(t,e){const n={},r=u(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function _5(t,e,n){const r={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=u(t,["epochCount"]);e!==void 0&&o!=null&&f(e,["tuningTask","hyperparameters","epochCount"],o);const s=u(t,["learningRateMultiplier"]);if(s!=null&&f(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=u(t,["batchSize"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","batchSize"],a);const l=u(t,["learningRate"]);if(e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","learningRate"],l),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function A5(t,e,n){const r={};let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const y=u(t,["validationDataset"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec"],md(y))}else if(i==="PREFERENCE_TUNING"){const y=u(t,["validationDataset"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec"],md(y))}const o=u(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&f(e,["tunedModelDisplayName"],o);const s=u(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const y=u(t,["epochCount"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(a==="PREFERENCE_TUNING"){const y=u(t,["epochCount"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const y=u(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(l==="PREFERENCE_TUNING"){const y=u(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=u(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(c==="PREFERENCE_TUNING"){const y=u(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let h=u(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const y=u(t,["adapterSize"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(h==="PREFERENCE_TUNING"){const y=u(t,["adapterSize"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=u(t,["labels"]);e!==void 0&&m!=null&&f(e,["labels"],m);const v=u(t,["beta"]);return e!==void 0&&v!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],v),r}function C5(t,e){const n={},r=u(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);const i=u(t,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);const o=u(t,["trainingDataset"]);o!=null&&U5(o);const s=u(t,["config"]);return s!=null&&_5(s,n),n}function T5(t,e){const n={},r=u(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);const i=u(t,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);const o=u(t,["trainingDataset"]);o!=null&&j5(o,n,e);const s=u(t,["config"]);return s!=null&&A5(s,n,e),n}function I5(t,e){const n={},r=u(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function k5(t,e){const n={},r=u(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function E5(t,e,n){const r={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const s=u(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),r}function P5(t,e,n){const r={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const s=u(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),r}function L5(t,e){const n={},r=u(t,["config"]);return r!=null&&E5(r,n),n}function R5(t,e){const n={},r=u(t,["config"]);return r!=null&&P5(r,n),n}function M5(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);const o=u(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Rf(a))),f(n,["tuningJobs"],s)}return n}function D5(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);const o=u(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Hl(a))),f(n,["tuningJobs"],s)}return n}function F5(t,e){const n={},r=u(t,["name"]);r!=null&&f(n,["model"],r);const i=u(t,["name"]);return i!=null&&f(n,["endpoint"],i),n}function U5(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=u(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(n,["examples","examples"],i)}return n}function j5(t,e,n){const r={};let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=u(t,["gcsUri"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=u(t,["gcsUri"]);e!==void 0&&s!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Rf(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&f(n,["name"],i);const o=u(t,["state"]);o!=null&&f(n,["state"],Jd(o));const s=u(t,["createTime"]);s!=null&&f(n,["createTime"],s);const a=u(t,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);const l=u(t,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);const h=u(t,["description"]);h!=null&&f(n,["description"],h);const m=u(t,["baseModel"]);m!=null&&f(n,["baseModel"],m);const v=u(t,["_self"]);return v!=null&&f(n,["tunedModel"],F5(v)),n}function Hl(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&f(n,["name"],i);const o=u(t,["state"]);o!=null&&f(n,["state"],Jd(o));const s=u(t,["createTime"]);s!=null&&f(n,["createTime"],s);const a=u(t,["startTime"]);a!=null&&f(n,["startTime"],a);const l=u(t,["endTime"]);l!=null&&f(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);const h=u(t,["error"]);h!=null&&f(n,["error"],h);const m=u(t,["description"]);m!=null&&f(n,["description"],m);const v=u(t,["baseModel"]);v!=null&&f(n,["baseModel"],v);const y=u(t,["tunedModel"]);y!=null&&f(n,["tunedModel"],y);const S=u(t,["preTunedModel"]);S!=null&&f(n,["preTunedModel"],S);const A=u(t,["supervisedTuningSpec"]);A!=null&&f(n,["supervisedTuningSpec"],A);const w=u(t,["preferenceOptimizationSpec"]);w!=null&&f(n,["preferenceOptimizationSpec"],w);const N=u(t,["tuningDataStats"]);N!=null&&f(n,["tuningDataStats"],N);const T=u(t,["encryptionSpec"]);T!=null&&f(n,["encryptionSpec"],T);const _=u(t,["partnerModelTuningSpec"]);_!=null&&f(n,["partnerModelTuningSpec"],_);const R=u(t,["customBaseModel"]);R!=null&&f(n,["customBaseModel"],R);const P=u(t,["experiment"]);P!=null&&f(n,["experiment"],P);const D=u(t,["labels"]);D!=null&&f(n,["labels"],D);const I=u(t,["outputUri"]);I!=null&&f(n,["outputUri"],I);const M=u(t,["pipelineJob"]);M!=null&&f(n,["pipelineJob"],M);const j=u(t,["serviceAccount"]);j!=null&&f(n,["serviceAccount"],j);const J=u(t,["tunedModelDisplayName"]);J!=null&&f(n,["tunedModelDisplayName"],J);const E=u(t,["veoTuningSpec"]);return E!=null&&f(n,["veoTuningSpec"],E),n}function B5(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&f(n,["name"],i);const o=u(t,["metadata"]);o!=null&&f(n,["metadata"],o);const s=u(t,["done"]);s!=null&&f(n,["done"],s);const a=u(t,["error"]);return a!=null&&f(n,["error"],a),n}function md(t,e){const n={},r=u(t,["gcsUri"]);r!=null&&f(n,["validationDatasetUri"],r);const i=u(t,["vertexDatasetResource"]);return i!=null&&f(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q5 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ci(Lr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:El.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=k5(e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>Hl(h))}else{const c=I5(e);return a=De("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>Rf(h))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=R5(e);return a=De("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=D5(h),v=new Hu;return Object.assign(v,m),v})}else{const c=L5(e);return a=De("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=M5(h),v=new Hu;return Object.assign(v,m),v})}}async cancel(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=w5(e);return a=De("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=S5(h),v=new Vu;return Object.assign(v,m),v})}else{const c=b5(e);return a=De("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=N5(h),v=new Vu;return Object.assign(v,m),v})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=T5(e,e);return o=De("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>Hl(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=C5(e);return o=De("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>B5(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O5{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const H5=1024*1024*8,V5=3,G5=1e3,z5=2,va="x-goog-upload-status";async function W5(t,e,n){var r;const i=await Mf(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[va])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function $5(t,e,n){var r;const i=await Mf(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[va])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=Hd(o),a=new nc;return Object.assign(a,s),a}async function Mf(t,e,n){var r,i;let o=0,s=0,a=new Pl(new Response),l="upload";for(o=t.size;s<o;){const c=Math.min(H5,o-s),h=t.slice(s,s+c);s+c>=o&&(l+=", finalize");let m=0,v=G5;for(;m<V5&&(a=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[va]));)m++,await Y5(v),v=v*z5;if(s+=c,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[va])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function J5(t){return{size:t.size,type:t.type}}function Y5(t){return new Promise(e=>setTimeout(e,t))}class K5{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await W5(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $5(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await J5(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X5{create(e,n,r){return new Q5(e,n,r)}}class Q5{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vd="x-goog-api-key";class Z5{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(vd)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(vd,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ev="gl-node/";class tv{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Qt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Yh(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new Z5(this.apiKey);this.apiClient=new J1({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:ev+"web",uploader:new K5,downloader:new O5}),this.models=new h2(this.apiClient),this.live=new a2(this.apiClient,i,new X5),this.batches=new _0(this.apiClient),this.chats=new og(this.models,this.apiClient),this.caches=new ng(this.apiClient),this.files=new gg(this.apiClient),this.operations=new p2(this.apiClient),this.authTokens=new E2(this.apiClient),this.tunings=new q5(this.apiClient),this.fileSearchStores=new j2(this.apiClient)}}const nv=t=>t.text||"",rv=async(t,e)=>{var r;const n=new tv({apiKey:"PLACEHOLDER_API_KEY"});try{const o=`
            As a business data analyst, review the following sales data for an online business in Cambodia. Provide a concise summary of key insights and actionable recommendations, **written in clear Khmer language**.

            **Filters Applied for this Report:** ${[`Date Range: ${e.datePreset==="all"?"All Time":`${e.startDate} to ${e.endDate}`}`,`Team: ${e.team||"All"}`,`User: ${e.user||"All"}`,`Payment Status: ${e.paymentStatus||"All"}`].join("; ")}

            **Key Metrics Summary:**
            - Total Revenue: $${((r=t.revenue)==null?void 0:r.toFixed(2))||0}
            - Total Orders: ${t.totalOrders||0}

            **Your analysis should be a bulleted list covering:**
            1.  An overall summary of business performance.
            2.  Identify potential areas of concern or opportunities for growth.
            3.  Provide one strategic recommendation to improve sales.
        `,s=await n.models.generateContent({model:"gemini-3-pro-preview",contents:o});return nv(s)||"Could not generate analysis from Gemini."}catch(i){return console.error("Gemini report analysis error:",i),"Could not generate analysis from Gemini."}},iv=()=>p.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-2",children:[p.jsx("path",{d:"M12 2C11.4696 2 10.9609 2.21071 10.5858 2.58579C10.2107 2.96086 10 3.46957 10 4V4.53C8.7 5.2 7.64 6.27 7 7.53L6.5 7.03C6.12275 6.65624 5.6122 6.44963 5.08003 6.44963C4.54786 6.44963 4.03731 6.65624 3.65997 7.03C3.28263 7.40376 3.07602 7.91431 3.07602 8.44648C3.07602 8.97865 3.28263 9.4892 3.65997 9.86297L4.16 10.3C3.5 11.56 2.82 12.98 2.59 14.5H2C1.46957 14.5 0.960859 14.7107 0.585786 15.0858C0.210714 15.4609 0 15.9696 0 16.5C0 17.0304 0.210714 17.5391 0.585786 17.9142C0.960859 18.2893 1.46957 18.5 2 18.5H2.59C3.12 20.31 4.28 21.88 5.84 22.95C6.34 23.23 6.94 23.09 7.22 22.59C7.5 22.09 7.36 21.49 6.86 21.21C5.7 20.41 4.81 19.24 4.34 17.87L12 14.01L19.66 17.87C19.19 19.24 18.3 20.41 17.14 21.21C16.64 21.5 16.5 22.1 16.78 22.59C17.06 23.09 17.66 23.23 18.16 22.95C19.72 21.88 20.88 20.31 21.41 18.5H22C22.5304 18.5 23.0391 18.2893 23.4142 17.9142C23.7893 17.5391 24 17.0304 24 16.5C24 15.9696 23.7893 15.4609 23.4142 15.0858C23.0391 14.7107 22.5304 14.5 22 14.5H21.41C21.18 12.98 20.5 11.56 19.84 10.3L20.34 9.86297C20.7174 9.4892 20.924 8.97865 20.924 8.44648C20.924 7.91431 20.7174 7.40376 20.34 7.03C19.9627 6.65624 19.4521 6.44963 18.92 6.44963C18.3878 6.44963 17.8773 6.65624 17.5 7.03L17 7.53C16.36 6.27 15.3 5.2 14 4.53V4C14 3.46957 13.7893 2.96086 13.4142 2.58579C13.0391 2.21071 12.5304 2 12 2Z",fill:"url(#paint0_linear_1_2)"}),p.jsx("defs",{children:p.jsxs("linearGradient",{id:"paint0_linear_1_2",x1:"12",y1:"2",x2:"12",y2:"22.95",gradientUnits:"userSpaceOnUse",children:[p.jsx("stop",{stopColor:"#93c5fd"}),p.jsx("stop",{offset:"1",stopColor:"#3b82f6"})]})})]}),ov=({onClick:t,isLoading:e,disabled:n=!1,children:r,className:i=""})=>p.jsxs("button",{type:"button",onClick:t,disabled:e||n,className:`btn btn-secondary flex items-center justify-center !p-2 text-sm transition-all duration-300 ease-in-out border border-blue-500/50 bg-gray-700 hover:bg-blue-800/40 hover:border-blue-500 disabled:cursor-not-allowed disabled:bg-gray-800 disabled:opacity-50 ${i}`,children:[e?p.jsx(Pr,{size:"sm"}):p.jsx(iv,{}),p.jsx("span",{className:"ml-1",children:r})]}),Fy=({orders:t,appData:e,dateFilter:n,startDate:r,endDate:i,onNavigate:o,contextFilters:s,onBack:a})=>{var R;const[l,c]=be.useState(""),[h,m]=be.useState(!1),[v,y]=be.useState("All"),S=(P,D)=>{if(o){const I={};s&&(s.team&&(I.team=s.team),s.store&&(I.store=s.store),s.paymentStatus&&(I.paymentStatus=s.paymentStatus),s.user&&(I.user=s.user),s.page&&(I.page=s.page),s.bank&&(I.bank=s.bank),s.product&&(I.product=s.product),s.internalCost&&(I.internalCost=s.internalCost),s.location&&(I.location=s.location)),P==="shippingFilter"&&(I.shipping=D),P==="driverFilter"&&(I.driver=D),P==="fulfillmentStore"&&(I.fulfillmentStore=D),v!=="All"&&P!=="fulfillmentStore"&&(I.fulfillmentStore=v),I.datePreset=n,I.startDate=r,I.endDate=i,o(I)}},A=be.useMemo(()=>v==="All"?t:t.filter(P=>P["Fulfillment Store"]===v),[t,v]),w=be.useMemo(()=>{const P=A.reduce((E,k)=>E+(Number(k["Internal Cost"])||0),0),D=A.reduce((E,k)=>E+(Number(k["Shipping Fee (Customer)"])||0),0),I=D-P,M={},j={},J={};return A.forEach(E=>{var ie,$;const k=E["Internal Shipping Method"]||"Other";if(!M[k]){const q=(ie=e.shippingMethods)==null?void 0:ie.find(z=>z.MethodName===k);M[k]={name:k,cost:0,orders:0,logo:(q==null?void 0:q.LogosURL)||""}}M[k].cost+=Number(E["Internal Cost"])||0,M[k].orders+=1;const F=E["Internal Shipping Details"]||"N/A";if(F!=="N/A"){if(!j[F]){const q=($=e.drivers)==null?void 0:$.find(z=>z.DriverName===F);j[F]={name:F,cost:0,orders:0,photo:(q==null?void 0:q.ImageURL)||""}}j[F].cost+=Number(E["Internal Cost"])||0,j[F].orders+=1}const H=E["Fulfillment Store"]||"Unassigned";J[H]||(J[H]={name:H,cost:0,orders:0}),J[H].cost+=Number(E["Internal Cost"])||0,J[H].orders+=1}),{totalInternalCost:P,totalCustomerFee:D,netShipping:I,totalOrders:A.length,methods:Object.values(M).sort((E,k)=>k.cost-E.cost),drivers:Object.values(j).sort((E,k)=>k.cost-E.cost),stores:Object.values(J).sort((E,k)=>k.cost-E.cost)}},[A,e]),N=async()=>{m(!0);try{const P=await rv(w,{reportType:"shipping"});c(P)}catch{c("AI Analysis error.")}finally{m(!1)}},T=()=>{let P="\uFEFF";P+=`SHIPPING COST REPORT SUMMARY
`,P+=`Generated Date,${new Date().toLocaleDateString()}
`,P+=`Period,${n==="custom"?`${r} to ${i}`:n}
`,P+=`Filter Store,${v}

`,P+=`Metric,Value
`,P+=`Total Internal Cost,${w.totalInternalCost.toFixed(2)}
`,P+=`Total Customer Fee,${w.totalCustomerFee.toFixed(2)}
`,P+=`Net Shipping,${w.netShipping.toFixed(2)}
`,P+=`Total Orders,${w.totalOrders}

`,P+=`SHIPPING METHODS (COMPANIES)
`,P+=`Company Name,Total Orders,Total Cost ($)
`,w.methods.forEach(j=>{P+=`"${j.name}",${j.orders},${j.cost.toFixed(2)}
`}),P+=`
`,P+=`DRIVERS
`,P+=`Driver Name,Total Orders,Total Cost ($)
`,w.drivers.forEach(j=>{P+=`"${j.name}",${j.orders},${j.cost.toFixed(2)}
`}),P+=`
`,P+=`FULFILLMENT STORES (STOCK)
`,P+=`Store Name,Total Orders,Total Cost ($)
`,w.stores.forEach(j=>{P+=`"${j.name}",${j.orders},${j.cost.toFixed(2)}
`});const D=new Blob([P],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a"),M=URL.createObjectURL(D);I.setAttribute("href",M),I.setAttribute("download",`Shipping_Report_${v}_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(I),I.click(),document.body.removeChild(I)},_=()=>{const P=window.open("","_blank");if(!P){alert("Please allow popups to view the report.");return}const D=n==="custom"?`${r} to ${i}`:n.toUpperCase(),I=(j,J)=>j.map((E,k)=>`
                <tr class="border-b border-gray-200 hover:bg-gray-50">
                    <td class="py-3 px-4 text-sm text-gray-700 font-bold">${k+1}</td>
                    <td class="py-3 px-4 text-sm font-bold text-gray-800">${E.name}</td>
                    <td class="py-3 px-4 text-center text-sm font-mono font-bold text-blue-600">${E.orders}</td>
                    <td class="py-3 px-4 text-right text-sm font-mono font-bold text-gray-800">$${E.cost.toLocaleString(void 0,{minimumFractionDigits:2})}</td>
                </tr>
            `).join(""),M=`
            <!DOCTYPE html>
            <html lang="km">
            <head>
                <meta charset="UTF-8">
                <title>Shipping Report - ${v}</title>
                <script src="https://cdn.tailwindcss.com"><\/script>
                <link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
                <style>
                    body { font-family: 'Kantumruy Pro', sans-serif; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
                    @media print { 
                        .no-print { display: none !important; } 
                        body { background: white; }
                        .page-break { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body class="bg-gray-100 min-h-screen py-10 print:py-0">
                
                <!-- Action Bar (Hidden on Print) -->
                <div class="no-print fixed top-0 left-0 right-0 bg-gray-900 text-white p-4 shadow-lg flex justify-between items-center z-50">
                    <div class="font-bold text-lg">Shipping Report Preview</div>
                    <div class="flex gap-3">
                        <button onclick="window.close()" class="px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 transition">Close</button>
                        <button onclick="window.print()" class="px-6 py-2 rounded bg-blue-600 hover:bg-blue-500 font-bold transition shadow-lg flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg>
                            Print / Save as PDF
                        </button>
                    </div>
                </div>

                <!-- Report Container (A4 Style) -->
                <div class="max-w-[210mm] mx-auto bg-white p-10 shadow-2xl print:shadow-none print:w-full mt-10 print:mt-0 mb-10">
                    
                    <!-- Header -->
                    <div class="flex justify-between items-start border-b-2 border-black pb-6 mb-8">
                        <div>
                            <h1 class="text-3xl font-black text-gray-900 uppercase tracking-tight"></h1>
                            <p class="text-sm text-gray-500 font-bold mt-1 uppercase tracking-widest">Shipping & Fulfillment Cost</p>
                        </div>
                        <div class="text-right">
                            <p class="text-xs font-bold text-gray-500 uppercase">Period</p>
                            <p class="text-sm font-black text-gray-900">${D}</p>
                            <p class="text-xs font-bold text-gray-500 uppercase mt-2">Filter Store</p>
                            <p class="text-sm font-black text-blue-600">${v}</p>
                        </div>
                    </div>

                    <!-- Summary Cards -->
                    <div class="grid grid-cols-3 gap-6 mb-10">
                        <div class="p-4 bg-red-50 rounded-xl border border-red-100 text-center">
                            <p class="text-xs font-black text-red-400 uppercase tracking-widest mb-1">Total Internal Cost</p>
                            <p class="text-2xl font-black text-gray-800">$${w.totalInternalCost.toLocaleString()}</p>
                        </div>
                        <div class="p-4 bg-green-50 rounded-xl border border-green-100 text-center">
                            <p class="text-xs font-black text-green-500 uppercase tracking-widest mb-1">Customer Fees</p>
                            <p class="text-2xl font-black text-gray-800">$${w.totalCustomerFee.toLocaleString()}</p>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-xl border border-gray-200 text-center">
                            <p class="text-xs font-black text-gray-500 uppercase tracking-widest mb-1">Total Orders</p>
                            <p class="text-2xl font-black text-gray-800">${w.totalOrders}</p>
                        </div>
                    </div>

                    <!-- Table 1: Companies -->
                    <div class="mb-10 page-break">
                        <h2 class="text-lg font-black text-blue-800 border-l-4 border-blue-600 pl-3 mb-4 uppercase">1.  (Companies)</h2>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-blue-600 text-white">
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase w-12">#</th>
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase">Company Name</th>
                                    <th class="py-2 px-4 text-center text-xs font-black uppercase w-24">Orders</th>
                                    <th class="py-2 px-4 text-right text-xs font-black uppercase w-32">Cost ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${I(w.methods)}
                            </tbody>
                            <tfoot class="bg-gray-100 font-black">
                                <tr>
                                    <td colspan="2" class="py-3 px-4 text-right uppercase text-xs tracking-widest text-gray-500">Total</td>
                                    <td class="py-3 px-4 text-center text-blue-600">${w.methods.reduce((j,J)=>j+J.orders,0)}</td>
                                    <td class="py-3 px-4 text-right text-gray-900">$${w.methods.reduce((j,J)=>j+J.cost,0).toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <!-- Table 2: Drivers -->
                    <div class="mb-10 page-break">
                        <h2 class="text-lg font-black text-emerald-700 border-l-4 border-emerald-600 pl-3 mb-4 uppercase">2.  (Drivers)</h2>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-emerald-600 text-white">
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase w-12">#</th>
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase">Driver Name</th>
                                    <th class="py-2 px-4 text-center text-xs font-black uppercase w-24">Orders</th>
                                    <th class="py-2 px-4 text-right text-xs font-black uppercase w-32">Cost ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${I(w.drivers)}
                            </tbody>
                            <tfoot class="bg-gray-100 font-black">
                                <tr>
                                    <td colspan="2" class="py-3 px-4 text-right uppercase text-xs tracking-widest text-gray-500">Total</td>
                                    <td class="py-3 px-4 text-center text-blue-600">${w.drivers.reduce((j,J)=>j+J.orders,0)}</td>
                                    <td class="py-3 px-4 text-right text-gray-900">$${w.drivers.reduce((j,J)=>j+J.cost,0).toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <!-- Table 3: Stores -->
                    <div class="page-break">
                        <h2 class="text-lg font-black text-orange-700 border-l-4 border-orange-500 pl-3 mb-4 uppercase">3.  (Fulfillment Stores)</h2>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-orange-500 text-white">
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase w-12">#</th>
                                    <th class="py-2 px-4 text-left text-xs font-black uppercase">Store Name</th>
                                    <th class="py-2 px-4 text-center text-xs font-black uppercase w-24">Orders</th>
                                    <th class="py-2 px-4 text-right text-xs font-black uppercase w-32">Cost ($)</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${I(w.stores)}
                            </tbody>
                            <tfoot class="bg-gray-100 font-black">
                                <tr>
                                    <td colspan="2" class="py-3 px-4 text-right uppercase text-xs tracking-widest text-gray-500">Total</td>
                                    <td class="py-3 px-4 text-center text-blue-600">${w.stores.reduce((j,J)=>j+J.orders,0)}</td>
                                    <td class="py-3 px-4 text-right text-gray-900">$${w.stores.reduce((j,J)=>j+J.cost,0).toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <div class="mt-12 pt-6 border-t border-gray-200 text-center text-xs text-gray-400">
                        Generated by O-System on ${new Date().toLocaleString("km-KH")}
                    </div>

                </div>
            </body>
            </html>
        `;P.document.write(M),P.document.close()};return p.jsxs("div",{className:"space-y-8 animate-fade-in pb-12",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-gray-900/40 p-4 rounded-3xl border border-white/5",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[a&&p.jsx("button",{onClick:a,className:"bg-gray-800 p-3 rounded-2xl border border-gray-700 hover:bg-gray-700 active:scale-95 transition-all",children:p.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tight",children:""}),p.jsx("p",{className:"text-xs text-gray-500 font-bold mt-1",children:"Shipping & Fulfillment Cost Analysis"})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center w-full sm:w-auto",children:[p.jsxs("div",{className:"bg-gray-800 p-1 rounded-xl border border-white/10 flex items-center w-full sm:w-auto",children:[p.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase px-3 whitespace-nowrap",children:"View:"}),p.jsxs("select",{value:v,onChange:P=>y(P.target.value),className:"bg-transparent border-none text-xs font-black text-white focus:ring-0 cursor-pointer py-1.5 pr-8 pl-1 w-full",children:[p.jsx("option",{value:"All",children:"All Stores"}),(R=e.stores)==null?void 0:R.map(P=>p.jsx("option",{value:P.StoreName,children:P.StoreName},P.StoreName))]})]}),p.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[p.jsxs("button",{onClick:T,className:"flex-1 sm:flex-none justify-center px-4 py-2.5 bg-emerald-600/10 border border-emerald-500/30 text-emerald-400 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-emerald-600 hover:text-white transition-all flex items-center gap-2 active:scale-95",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Excel"]}),p.jsxs("button",{onClick:_,className:"flex-1 sm:flex-none justify-center px-4 py-2.5 bg-red-600/10 border border-red-500/30 text-red-400 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-red-600 hover:text-white transition-all flex items-center gap-2 active:scale-95",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"View & Print"]})]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(Xs,{label:"",value:`$${w.totalInternalCost.toLocaleString()}`,icon:"",colorClass:"from-orange-600 to-red-500"}),p.jsx(Xs,{label:"",value:`$${w.totalCustomerFee.toLocaleString()}`,icon:"",colorClass:"from-blue-600 to-indigo-500"}),p.jsx(Xs,{label:" (Net)",value:`$${w.netShipping.toLocaleString()}`,icon:"",colorClass:w.netShipping>=0?"from-emerald-600 to-teal-500":"from-red-600 to-pink-500"}),p.jsx(Xs,{label:"",value:w.totalOrders,icon:"",colorClass:"from-purple-600 to-blue-500"})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[p.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[p.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5",children:[p.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-2",children:""}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-sm text-left",children:[p.jsx("thead",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest border-b border-gray-800",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-3",children:""}),p.jsx("th",{className:"px-4 py-3 text-center",children:" Orders"}),p.jsx("th",{className:"px-4 py-3 text-right",children:" ($)"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-800",children:w.methods.map((P,D)=>p.jsxs("tr",{className:"hover:bg-white/5",children:[p.jsxs("td",{className:"px-4 py-3 font-bold text-gray-200 flex items-center gap-3",children:[p.jsx("img",{src:at(P.logo),className:"w-8 h-8 rounded-lg object-contain bg-gray-800 p-1 border border-gray-700",alt:""}),P.name]}),p.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-400 cursor-pointer hover:underline hover:text-blue-300 transition-colors",onClick:()=>S("shippingFilter",P.name),children:P.orders}),p.jsxs("td",{className:"px-4 py-3 text-right font-black text-white cursor-pointer hover:underline hover:text-gray-300 transition-colors",onClick:()=>S("shippingFilter",P.name),children:["$",P.cost.toLocaleString(void 0,{minimumFractionDigits:2})]})]},D))}),p.jsx("tfoot",{className:"bg-white/5 border-t-2 border-white/10",children:p.jsxs("tr",{children:[p.jsx("td",{className:"px-4 py-3 text-right text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Grand Total"}),p.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-300 text-base",children:w.methods.reduce((P,D)=>P+D.orders,0)}),p.jsxs("td",{className:"px-4 py-3 text-right font-black text-emerald-400 text-base",children:["$",w.methods.reduce((P,D)=>P+D.cost,0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})})]}),p.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5",children:[p.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-2",children:" (Drivers)"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-sm text-left",children:[p.jsx("thead",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest border-b border-gray-800",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-3",children:""}),p.jsx("th",{className:"px-4 py-3 text-center",children:" Orders"}),p.jsx("th",{className:"px-4 py-3 text-right",children:" ($)"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-800",children:w.drivers.map((P,D)=>p.jsxs("tr",{className:"hover:bg-white/5",children:[p.jsxs("td",{className:"px-4 py-3 font-bold text-gray-200 flex items-center gap-3",children:[p.jsx("img",{src:at(P.photo),className:"w-8 h-8 rounded-full object-cover bg-gray-800 border border-gray-700",alt:""}),P.name]}),p.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-400 cursor-pointer hover:underline hover:text-blue-300 transition-colors",onClick:()=>S("driverFilter",P.name),children:P.orders}),p.jsxs("td",{className:"px-4 py-3 text-right font-black text-white cursor-pointer hover:underline hover:text-gray-300 transition-colors",onClick:()=>S("driverFilter",P.name),children:["$",P.cost.toLocaleString(void 0,{minimumFractionDigits:2})]})]},D))}),p.jsx("tfoot",{className:"bg-white/5 border-t-2 border-white/10",children:p.jsxs("tr",{children:[p.jsx("td",{className:"px-4 py-3 text-right text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Grand Total"}),p.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-300 text-base",children:w.drivers.reduce((P,D)=>P+D.orders,0)}),p.jsxs("td",{className:"px-4 py-3 text-right font-black text-emerald-400 text-base",children:["$",w.drivers.reduce((P,D)=>P+D.cost,0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})})]}),p.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5",children:[p.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-2",children:" Fulfillment Store (Stock)"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-sm text-left",children:[p.jsx("thead",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest border-b border-gray-800",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-3",children:" (Store)"}),p.jsx("th",{className:"px-4 py-3 text-center",children:" Orders"}),p.jsx("th",{className:"px-4 py-3 text-right",children:" ($)"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-800",children:w.stores.map((P,D)=>p.jsxs("tr",{className:"hover:bg-white/5",children:[p.jsxs("td",{className:"px-4 py-3 font-bold text-gray-200 flex items-center gap-3",children:[p.jsxs("span",{className:"w-8 h-8 rounded-lg bg-gray-800 text-gray-400 flex items-center justify-center text-[10px] border border-gray-700",children:["#",D+1]}),P.name]}),p.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-400 cursor-pointer hover:underline hover:text-blue-300 transition-colors",onClick:()=>S("fulfillmentStore",P.name),children:P.orders}),p.jsxs("td",{className:"px-4 py-3 text-right font-black text-white cursor-pointer hover:underline hover:text-gray-300 transition-colors",onClick:()=>S("fulfillmentStore",P.name),children:["$",P.cost.toLocaleString(void 0,{minimumFractionDigits:2})]})]},D))}),p.jsx("tfoot",{className:"bg-white/5 border-t-2 border-white/10",children:p.jsxs("tr",{children:[p.jsx("td",{className:"px-4 py-3 text-right text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Grand Total"}),p.jsx("td",{className:"px-4 py-3 text-center font-black text-blue-300 text-base",children:w.stores.reduce((P,D)=>P+D.orders,0)}),p.jsxs("td",{className:"px-4 py-3 text-right font-black text-emerald-400 text-base",children:["$",w.stores.reduce((P,D)=>P+D.cost,0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})})]})]}),p.jsx("div",{className:"lg:col-span-4",children:p.jsxs("div",{className:"page-card !p-6 bg-gray-900/40 border-white/5 h-full flex flex-col shadow-2xl relative overflow-hidden group",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8 relative z-10",children:[p.jsx("div",{children:p.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest",children:" AI"})}),p.jsx(ov,{onClick:N,isLoading:h,children:"Analyze"})]}),p.jsx("div",{className:"flex-grow bg-black/40 rounded-3xl p-6 border border-white/5 overflow-y-auto custom-scrollbar min-h-[300px] relative z-10",children:l?p.jsx("div",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:l}):p.jsx("div",{className:"flex flex-col items-center justify-center h-full opacity-20 text-center",children:p.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:' "Analyze" '})})})]})})]})]})},Uy=({data:t,title:e})=>{const[n,r]=be.useState(null);if(!t||t.length===0)return p.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 min-h-[300px]",children:"No data available for chart."});const i=350,o=500,s=50,a=100,l=40,c=10,h=i-l-10,m=o/t.length-c,v=Math.max(...t.map(T=>T.value),0),y=v===0?0:h/v,S=(T,_)=>{const R=T.currentTarget.getBoundingClientRect(),P=`${_.label}: $${_.value.toFixed(2)}`;r({visible:!0,x:R.left+window.scrollX,y:R.top+window.scrollY,content:P})},A=()=>{r(null)},N=(T=>{if(T===0)return[0];const _=5;let R=Math.ceil(T/_);const P=Math.pow(10,Math.floor(Math.log10(R||1))),D=R/P;return P>0&&(D>5?R=10*P:D>2?R=5*P:D>1&&(R=2*P)),R===0?[0,T]:Array.from({length:_+2},(I,M)=>M*R).filter(I=>I<=T*1.1)})(v);return p.jsxs("div",{className:"relative",children:[p.jsx("h3",{className:"text-lg font-bold mb-4 text-white text-center",children:e}),p.jsx("div",{className:"w-full overflow-x-auto",children:p.jsxs("svg",{viewBox:`0 0 ${o+s} ${i+a}`,className:"min-w-[500px]",preserveAspectRatio:"xMinYMin meet",children:[p.jsx("g",{className:"y-axis",children:N.map(T=>p.jsxs("g",{transform:`translate(0, ${i-T*y})`,children:[p.jsx("line",{x1:s-5,y1:"0",x2:o+s,y2:"0",stroke:"#374151"}),p.jsx("text",{x:s-10,y:"3",textAnchor:"end",fill:"#9ca3af",fontSize:"12",children:T>=1e3?`${(T/1e3).toFixed(0)}k`:T})]},T))}),p.jsx("g",{className:"bars",transform:`translate(${s}, 0)`,children:t.map((T,_)=>{const R=T.value*y,P=_*(m+c)+c/2,D=i-R,I=30;return p.jsxs("g",{children:[T.imageUrl&&p.jsx("image",{href:at(T.imageUrl),x:P+m/2-I/2,y:D-I-5,height:I,width:I,clipPath:`circle(${I/2}px at center)`}),p.jsx("rect",{x:P,y:D,width:m,height:R,fill:"#3b82f6",className:"transition-all duration-300 hover:opacity-80",onMouseOver:M=>S(M,T),onMouseOut:A}),p.jsx("text",{x:P+m/2,y:i+15,textAnchor:"end",fill:"#9ca3af",fontSize:"12",className:"select-none",transform:`rotate(-60 ${P+m/2},${i+15})`,children:T.label})]},_)})})]})}),n&&p.jsx("div",{className:"fixed p-2 text-xs text-white bg-gray-900 border border-gray-600 rounded-md shadow-lg z-50",style:{left:n.x,top:n.y-35,pointerEvents:"none",transform:"translateX(-50%)"},children:n.content})]})};function bt(t){"@babel/helpers - typeof";return bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(t)}var un=Uint8Array,kn=Uint16Array,uc=Int32Array,Ca=new un([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ta=new un([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Vl=new un([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Df=function(t,e){for(var n=new kn(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new uc(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},Ff=Df(Ca,2),Uf=Ff.b,Gl=Ff.r;Uf[28]=258,Gl[258]=28;var jf=Df(Ta,0),sv=jf.b,yd=jf.r,zl=new kn(32768);for(var It=0;It<32768;++It){var Yr=(It&43690)>>1|(It&21845)<<1;Yr=(Yr&52428)>>2|(Yr&13107)<<2,Yr=(Yr&61680)>>4|(Yr&3855)<<4,zl[It]=((Yr&65280)>>8|(Yr&255)<<8)>>1}var vr=(function(t,e,n){for(var r=t.length,i=0,o=new kn(e);i<r;++i)t[i]&&++o[t[i]-1];var s=new kn(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(n){a=new kn(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],h=e-t[i],m=s[t[i]-1]++<<h,v=m|(1<<h)-1;m<=v;++m)a[zl[m]>>l]=c}else for(a=new kn(r),i=0;i<r;++i)t[i]&&(a[i]=zl[s[t[i]-1]++]>>15-t[i]);return a}),ni=new un(288);for(var It=0;It<144;++It)ni[It]=8;for(var It=144;It<256;++It)ni[It]=9;for(var It=256;It<280;++It)ni[It]=7;for(var It=280;It<288;++It)ni[It]=8;var os=new un(32);for(var It=0;It<32;++It)os[It]=5;var av=vr(ni,9,0),lv=vr(ni,9,1),cv=vr(os,5,0),uv=vr(os,5,1),xl=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Xn=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},bl=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},dc=function(t){return(t+7)/8|0},Bf=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new un(t.subarray(e,n))},dv=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Zn=function(t,e,n){var r=new Error(e||dv[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Zn),!n)throw r;return r},fv=function(t,e,n,r){var i=t.length,o=0;if(!i||e.f&&!e.l)return n||new un(0);var s=!n,a=s||e.i!=2,l=e.i;s&&(n=new un(i*3));var c=function(Ce){var ke=n.length;if(Ce>ke){var Le=new un(Math.max(ke*2,Ce));Le.set(n),n=Le}},h=e.f||0,m=e.p||0,v=e.b||0,y=e.l,S=e.d,A=e.m,w=e.n,N=i*8;do{if(!y){h=Xn(t,m,1);var T=Xn(t,m+1,3);if(m+=3,T)if(T==1)y=lv,S=uv,A=9,w=5;else if(T==2){var D=Xn(t,m,31)+257,I=Xn(t,m+10,15)+4,M=D+Xn(t,m+5,31)+1;m+=14;for(var j=new un(M),J=new un(19),E=0;E<I;++E)J[Vl[E]]=Xn(t,m+E*3,7);m+=I*3;for(var k=xl(J),F=(1<<k)-1,H=vr(J,k,1),E=0;E<M;){var ie=H[Xn(t,m,F)];m+=ie&15;var _=ie>>4;if(_<16)j[E++]=_;else{var $=0,q=0;for(_==16?(q=3+Xn(t,m,3),m+=2,$=j[E-1]):_==17?(q=3+Xn(t,m,7),m+=3):_==18&&(q=11+Xn(t,m,127),m+=7);q--;)j[E++]=$}}var z=j.subarray(0,D),X=j.subarray(D);A=xl(z),w=xl(X),y=vr(z,A,1),S=vr(X,w,1)}else Zn(1);else{var _=dc(m)+4,R=t[_-4]|t[_-3]<<8,P=_+R;if(P>i){l&&Zn(0);break}a&&c(v+R),n.set(t.subarray(_,P),v),e.b=v+=R,e.p=m=P*8,e.f=h;continue}if(m>N){l&&Zn(0);break}}a&&c(v+131072);for(var ne=(1<<A)-1,se=(1<<w)-1,L=m;;L=m){var $=y[bl(t,m)&ne],V=$>>4;if(m+=$&15,m>N){l&&Zn(0);break}if($||Zn(2),V<256)n[v++]=V;else if(V==256){L=m,y=null;break}else{var K=V-254;if(V>264){var E=V-257,Q=Ca[E];K=Xn(t,m,(1<<Q)-1)+Uf[E],m+=Q}var ee=S[bl(t,m)&se],ce=ee>>4;ee||Zn(3),m+=ee&15;var X=sv[ce];if(ce>3){var Q=Ta[ce];X+=bl(t,m)&(1<<Q)-1,m+=Q}if(m>N){l&&Zn(0);break}a&&c(v+131072);var de=v+K;if(v<X){var pe=o-X,we=Math.min(X,de);for(pe+v<0&&Zn(3);v<we;++v)n[v]=r[pe+v]}for(;v<de;++v)n[v]=n[v-X]}}e.l=y,e.p=L,e.b=v,e.f=h,y&&(h=1,e.m=A,e.d=S,e.n=w)}while(!h);return v!=n.length&&s?Bf(n,0,v):n.subarray(0,v)},Er=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Ko=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},wl=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,o=n.slice();if(!i)return{t:Of,l:0};if(i==1){var s=new un(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(P,D){return P.f-D.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,h=1,m=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=i-1;)a=n[n[c].f<n[m].f?c++:m++],l=n[c!=h&&n[c].f<n[m].f?c++:m++],n[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=o[0].s,r=1;r<i;++r)o[r].s>v&&(v=o[r].s);var y=new kn(v+1),S=Wl(n[h-1],y,0);if(S>e){var r=0,A=0,w=S-e,N=1<<w;for(o.sort(function(D,I){return y[I.s]-y[D.s]||D.f-I.f});r<i;++r){var T=o[r].s;if(y[T]>e)A+=N-(1<<S-y[T]),y[T]=e;else break}for(A>>=w;A>0;){var _=o[r].s;y[_]<e?A-=1<<e-y[_]++-1:++r}for(;r>=0&&A;--r){var R=o[r].s;y[R]==e&&(--y[R],++A)}S=e}return{t:new un(y),l:S}},Wl=function(t,e,n){return t.s==-1?Math.max(Wl(t.l,e,n+1),Wl(t.r,e,n+1)):e[t.s]=n},xd=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new kn(++e),r=0,i=t[0],o=1,s=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Xo=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},qf=function(t,e,n){var r=n.length,i=dc(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var o=0;o<r;++o)t[i+o+4]=n[o];return(i+4+r)*8},bd=function(t,e,n,r,i,o,s,a,l,c,h){Er(e,h++,n),++i[256];for(var m=wl(i,15),v=m.t,y=m.l,S=wl(o,15),A=S.t,w=S.l,N=xd(v),T=N.c,_=N.n,R=xd(A),P=R.c,D=R.n,I=new kn(19),M=0;M<T.length;++M)++I[T[M]&31];for(var M=0;M<P.length;++M)++I[P[M]&31];for(var j=wl(I,7),J=j.t,E=j.l,k=19;k>4&&!J[Vl[k-1]];--k);var F=c+5<<3,H=Xo(i,ni)+Xo(o,os)+s,ie=Xo(i,v)+Xo(o,A)+s+14+3*k+Xo(I,J)+2*I[16]+3*I[17]+7*I[18];if(l>=0&&F<=H&&F<=ie)return qf(e,h,t.subarray(l,l+c));var $,q,z,X;if(Er(e,h,1+(ie<H)),h+=2,ie<H){$=vr(v,y,0),q=v,z=vr(A,w,0),X=A;var ne=vr(J,E,0);Er(e,h,_-257),Er(e,h+5,D-1),Er(e,h+10,k-4),h+=14;for(var M=0;M<k;++M)Er(e,h+3*M,J[Vl[M]]);h+=3*k;for(var se=[T,P],L=0;L<2;++L)for(var V=se[L],M=0;M<V.length;++M){var K=V[M]&31;Er(e,h,ne[K]),h+=J[K],K>15&&(Er(e,h,V[M]>>5&127),h+=V[M]>>12)}}else $=av,q=ni,z=cv,X=os;for(var M=0;M<a;++M){var Q=r[M];if(Q>255){var K=Q>>18&31;Ko(e,h,$[K+257]),h+=q[K+257],K>7&&(Er(e,h,Q>>23&31),h+=Ca[K]);var ee=Q&31;Ko(e,h,z[ee]),h+=X[ee],ee>3&&(Ko(e,h,Q>>5&8191),h+=Ta[ee])}else Ko(e,h,$[Q]),h+=q[Q]}return Ko(e,h,$[256]),h+q[256]},hv=new uc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Of=new un(0),pv=function(t,e,n,r,i,o){var s=o.z||t.length,a=new un(r+s+5*(1+Math.ceil(s/7e3))+i),l=a.subarray(r,a.length-i),c=o.l,h=(o.r||0)&7;if(e){h&&(l[0]=o.r>>3);for(var m=hv[e-1],v=m>>13,y=m&8191,S=(1<<n)-1,A=o.p||new kn(32768),w=o.h||new kn(S+1),N=Math.ceil(n/3),T=2*N,_=function(Ge){return(t[Ge]^t[Ge+1]<<N^t[Ge+2]<<T)&S},R=new uc(25e3),P=new kn(288),D=new kn(32),I=0,M=0,j=o.i||0,J=0,E=o.w||0,k=0;j+2<s;++j){var F=_(j),H=j&32767,ie=w[F];if(A[H]=ie,w[F]=H,E<=j){var $=s-j;if((I>7e3||J>24576)&&($>423||!c)){h=bd(t,l,0,R,P,D,M,J,k,j-k,h),J=I=M=0,k=j;for(var q=0;q<286;++q)P[q]=0;for(var q=0;q<30;++q)D[q]=0}var z=2,X=0,ne=y,se=H-ie&32767;if($>2&&F==_(j-se))for(var L=Math.min(v,$)-1,V=Math.min(32767,j),K=Math.min(258,$);se<=V&&--ne&&H!=ie;){if(t[j+z]==t[j+z-se]){for(var Q=0;Q<K&&t[j+Q]==t[j+Q-se];++Q);if(Q>z){if(z=Q,X=se,Q>L)break;for(var ee=Math.min(se,Q-2),ce=0,q=0;q<ee;++q){var de=j-se+q&32767,pe=A[de],we=de-pe&32767;we>ce&&(ce=we,ie=de)}}}H=ie,ie=A[H],se+=H-ie&32767}if(X){R[J++]=268435456|Gl[z]<<18|yd[X];var Ce=Gl[z]&31,ke=yd[X]&31;M+=Ca[Ce]+Ta[ke],++P[257+Ce],++D[ke],E=j+z,++I}else R[J++]=t[j],++P[t[j]]}}for(j=Math.max(j,E);j<s;++j)R[J++]=t[j],++P[t[j]];h=bd(t,l,c,R,P,D,M,J,k,j-k,h),c||(o.r=h&7|l[h/8|0]<<3,h-=7,o.h=w,o.p=A,o.i=j,o.w=E)}else{for(var j=o.w||0;j<s+c;j+=65535){var Le=j+65535;Le>=s&&(l[h/8|0]=c,Le=s),h=qf(l,h+1,t.subarray(j,Le))}o.i=s}return Bf(a,0,r+dc(h)+i)},Hf=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,o=n.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=n[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},gv=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new un(o.length+t.length);s.set(o),s.set(t,o.length),t=s,i.w=o.length}return pv(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},Vf=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},mv=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=Hf();i.p(e.dictionary),Vf(t,2,i.d())}},vv=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Zn(6,"invalid zlib data"),(t[1]>>5&1)==1&&Zn(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function $l(t,e){e||(e={});var n=Hf();n.p(t);var r=gv(t,e,e.dictionary?6:2,4);return mv(r,e),Vf(r,r.length-4,n.d()),r}function yv(t,e){return fv(t.subarray(vv(t),-4),{i:2},e,e)}var xv=typeof TextDecoder<"u"&&new TextDecoder,bv=0;try{xv.decode(Of,{stream:!0}),bv=1}catch{}var Je=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Nl(){Je.console&&typeof Je.console.log=="function"&&Je.console.log.apply(Je.console,arguments)}var At={log:Nl,warn:function(t){Je.console&&(typeof Je.console.warn=="function"?Je.console.warn.apply(Je.console,arguments):Nl.call(null,arguments))},error:function(t){Je.console&&(typeof Je.console.error=="function"?Je.console.error.apply(Je.console,arguments):Nl(t))}};function Sl(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){xi(r.response,e,n)},r.onerror=function(){At.error("could not download file")},r.send()}function wd(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ra(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var es,Jl,xi=Je.saveAs||((typeof window>"u"?"undefined":bt(window))!=="object"||window!==Je?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Je.URL||Je.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?wd(i.href)?Sl(t,e,n):ra(i,i.target="_blank"):ra(i)):(i.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){ra(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(wd(t))Sl(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){ra(r)}))}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:bt(o)!=="object"&&(At.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Sl(t,e,n);var i=t.type==="application/octet-stream",o=/constructor/i.test(Je.HTMLElement)||Je.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":bt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=s?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},a.readAsDataURL(t)}else{var l=Je.URL||Je.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout((function(){l.revokeObjectURL(c)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Gf(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,s=i.exec(t);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function _l(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];n=sn(n,r,i,o,e[0],7,-680876936),o=sn(o,n,r,i,e[1],12,-389564586),i=sn(i,o,n,r,e[2],17,606105819),r=sn(r,i,o,n,e[3],22,-1044525330),n=sn(n,r,i,o,e[4],7,-176418897),o=sn(o,n,r,i,e[5],12,1200080426),i=sn(i,o,n,r,e[6],17,-1473231341),r=sn(r,i,o,n,e[7],22,-45705983),n=sn(n,r,i,o,e[8],7,1770035416),o=sn(o,n,r,i,e[9],12,-1958414417),i=sn(i,o,n,r,e[10],17,-42063),r=sn(r,i,o,n,e[11],22,-1990404162),n=sn(n,r,i,o,e[12],7,1804603682),o=sn(o,n,r,i,e[13],12,-40341101),i=sn(i,o,n,r,e[14],17,-1502002290),n=an(n,r=sn(r,i,o,n,e[15],22,1236535329),i,o,e[1],5,-165796510),o=an(o,n,r,i,e[6],9,-1069501632),i=an(i,o,n,r,e[11],14,643717713),r=an(r,i,o,n,e[0],20,-373897302),n=an(n,r,i,o,e[5],5,-701558691),o=an(o,n,r,i,e[10],9,38016083),i=an(i,o,n,r,e[15],14,-660478335),r=an(r,i,o,n,e[4],20,-405537848),n=an(n,r,i,o,e[9],5,568446438),o=an(o,n,r,i,e[14],9,-1019803690),i=an(i,o,n,r,e[3],14,-187363961),r=an(r,i,o,n,e[8],20,1163531501),n=an(n,r,i,o,e[13],5,-1444681467),o=an(o,n,r,i,e[2],9,-51403784),i=an(i,o,n,r,e[7],14,1735328473),n=ln(n,r=an(r,i,o,n,e[12],20,-1926607734),i,o,e[5],4,-378558),o=ln(o,n,r,i,e[8],11,-2022574463),i=ln(i,o,n,r,e[11],16,1839030562),r=ln(r,i,o,n,e[14],23,-35309556),n=ln(n,r,i,o,e[1],4,-1530992060),o=ln(o,n,r,i,e[4],11,1272893353),i=ln(i,o,n,r,e[7],16,-155497632),r=ln(r,i,o,n,e[10],23,-1094730640),n=ln(n,r,i,o,e[13],4,681279174),o=ln(o,n,r,i,e[0],11,-358537222),i=ln(i,o,n,r,e[3],16,-722521979),r=ln(r,i,o,n,e[6],23,76029189),n=ln(n,r,i,o,e[9],4,-640364487),o=ln(o,n,r,i,e[12],11,-421815835),i=ln(i,o,n,r,e[15],16,530742520),n=cn(n,r=ln(r,i,o,n,e[2],23,-995338651),i,o,e[0],6,-198630844),o=cn(o,n,r,i,e[7],10,1126891415),i=cn(i,o,n,r,e[14],15,-1416354905),r=cn(r,i,o,n,e[5],21,-57434055),n=cn(n,r,i,o,e[12],6,1700485571),o=cn(o,n,r,i,e[3],10,-1894986606),i=cn(i,o,n,r,e[10],15,-1051523),r=cn(r,i,o,n,e[1],21,-2054922799),n=cn(n,r,i,o,e[8],6,1873313359),o=cn(o,n,r,i,e[15],10,-30611744),i=cn(i,o,n,r,e[6],15,-1560198380),r=cn(r,i,o,n,e[13],21,1309151649),n=cn(n,r,i,o,e[4],6,-145523070),o=cn(o,n,r,i,e[11],10,-1120210379),i=cn(i,o,n,r,e[2],15,718787259),r=cn(r,i,o,n,e[9],21,-343485551),t[0]=ei(n,t[0]),t[1]=ei(r,t[1]),t[2]=ei(i,t[2]),t[3]=ei(o,t[3])}function Ia(t,e,n,r,i,o){return e=ei(ei(e,t),ei(r,o)),ei(e<<i|e>>>32-i,n)}function sn(t,e,n,r,i,o,s){return Ia(e&n|~e&r,t,e,i,o,s)}function an(t,e,n,r,i,o,s){return Ia(e&r|n&~r,t,e,i,o,s)}function ln(t,e,n,r,i,o,s){return Ia(e^n^r,t,e,i,o,s)}function cn(t,e,n,r,i,o,s){return Ia(n^(e|~r),t,e,i,o,s)}function zf(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)_l(r,wv(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(_l(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,_l(r,i),r}function wv(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}es=Je.atob.bind(Je),Jl=Je.btoa.bind(Je);var Nd="0123456789abcdef".split("");function Nv(t){for(var e="",n=0;n<4;n++)e+=Nd[t>>8*n+4&15]+Nd[t>>8*n&15];return e}function Sv(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Yl(t){return zf(t).map(Sv).join("")}var _v=(function(t){for(var e=0;e<t.length;e++)t[e]=Nv(t[e]);return t.join("")})(zf("hello"))!="5d41402abc4b2a76b9719d911017c592";function ei(t,e){if(_v){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Kl(t,e){var n,r,i,o;if(t!==n){for(var s=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var h=a[l];c=(c+h+s.charCodeAt(l))%256,a[l]=a[c],a[c]=h}n=t,r=a}else a=r;var m=e.length,v=0,y=0,S="";for(l=0;l<m;l++)y=(y+(h=a[v=(v+1)%256]))%256,a[v]=a[y],a[y]=h,s=a[(a[v]+a[y])%256],S+=String.fromCharCode(e.charCodeAt(l)^s);return S}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Sd={print:4,modify:8,copy:16,"annot-forms":32};function so(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach((function(a){if(Sd.perm!==void 0)throw new Error("Invalid permission: "+a);i+=Sd[a]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=Yl(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Kl(this.encryptionKey,this.padding)}function ao(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function _d(t){if(bt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[r,!!i],o},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[n]){var s=e[n][o];try{s[0].apply(t,r)}catch(a){Je.console&&At.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function ss(t){if(!(this instanceof ss))return new ss(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Wf(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Qr(t,e,n,r,i){if(!(this instanceof Qr))return new Qr(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Wf.call(this,r,i)}function bi(t,e,n,r,i){if(!(this instanceof bi))return new bi(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Wf.call(this,r,i)}function We(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,l=16,c="S",h=null;bt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,o=t.compress||t.compressPdf||o,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),s=t.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,v={},y={internal:{},__private__:{}};y.__private__.PubSub=_d;var S="1.3",A=y.__private__.getPdfVersion=function(){return S};y.__private__.setPdfVersion=function(x){S=x};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return w};var N=y.__private__.getPageFormat=function(x){return w[x]};i=i||"a4";var T={COMPAT:"compat",ADVANCED:"advanced"},_=T.COMPAT;function R(){this.saveGraphicsState(),re(new $e(Ue,0,0,-Ue,0,Ur()*Ue).toString()+" cm"),this.setFontSize(this.getFontSize()/Ue),c="n",_=T.ADVANCED}function P(){this.restoreGraphicsState(),c="S",_=T.COMPAT}var D=y.__private__.combineFontStyleAndFontWeight=function(x,B){if(x=="bold"&&B=="normal"||x=="bold"&&B==400||x=="normal"&&B=="italic"||x=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(x=B==400||B==="normal"?x==="italic"?"italic":"normal":B!=700&&B!=="bold"||x!=="normal"?(B==700?"bold":B)+""+x:"bold"),x};y.advancedAPI=function(x){var B=_===T.COMPAT;return B&&R.call(this),typeof x!="function"||(x(this),B&&P.call(this)),this},y.compatAPI=function(x){var B=_===T.ADVANCED;return B&&P.call(this),typeof x!="function"||(x(this),B&&R.call(this)),this},y.isAdvancedAPI=function(){return _===T.ADVANCED};var I,M=function(x){if(_!==T.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=y.roundToPrecision=y.__private__.roundToPrecision=function(x,B){var te=e||B;if(isNaN(x)||isNaN(te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(te).replace(/0+$/,"")};I=y.hpf=y.__private__.hpf=typeof l=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return j(x,l)}:l==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return j(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return j(x,16)};var J=y.f2=y.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return j(x,2)},E=y.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return j(x,3)},k=y.scale=y.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return _===T.COMPAT?x*Ue:_===T.ADVANCED?x:void 0},F=function(x){return _===T.COMPAT?Ur()-x:_===T.ADVANCED?x:void 0},H=function(x){return k(F(x))};y.__private__.setPrecision=y.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(e=parseInt(x,10))};var ie,$="00000000000000000000000000000000",q=y.__private__.getFileId=function(){return $},z=y.__private__.setFileId=function(x){return $=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():$.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),h!==null&&(rn=new so(h.userPermissions,h.userPassword,h.ownerPassword,$)),$};y.setFileId=function(x){return z(x),this},y.getFileId=function(){return q()};var X=y.__private__.convertDateToPDFDate=function(x){var B=x.getTimezoneOffset(),te=B<0?"+":"-",oe=Math.floor(Math.abs(B/60)),he=Math.abs(B%60),xe=[te,K(oe),"'",K(he),"'"].join("");return["D:",x.getFullYear(),K(x.getMonth()+1),K(x.getDate()),K(x.getHours()),K(x.getMinutes()),K(x.getSeconds()),xe].join("")},ne=y.__private__.convertPDFDateToDate=function(x){var B=parseInt(x.substr(2,4),10),te=parseInt(x.substr(6,2),10)-1,oe=parseInt(x.substr(8,2),10),he=parseInt(x.substr(10,2),10),xe=parseInt(x.substr(12,2),10),Te=parseInt(x.substr(14,2),10);return new Date(B,te,oe,he,xe,Te,0)},se=y.__private__.setCreationDate=function(x){var B;if(x===void 0&&(x=new Date),x instanceof Date)B=X(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=x}return ie=B},L=y.__private__.getCreationDate=function(x){var B=ie;return x==="jsDate"&&(B=ne(ie)),B};y.setCreationDate=function(x){return se(x),this},y.getCreationDate=function(x){return L(x)};var V,K=y.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},Q=y.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},ee=0,ce=[],de=[],pe=0,we=[],Ce=[],ke=!1,Le=de,Ge=function(){ee=0,pe=0,de=[],ce=[],we=[],br=Ht(),Vn=Ht()};y.__private__.setCustomOutputDestination=function(x){ke=!0,Le=x};var ye=function(x){ke||(Le=x)};y.__private__.resetCustomOutputDestination=function(){ke=!1,Le=de};var re=y.__private__.out=function(x){return x=x.toString(),pe+=x.length+1,Le.push(x),Le},nt=y.__private__.write=function(x){return re(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Oe=y.__private__.getArrayBuffer=function(x){for(var B=x.length,te=new ArrayBuffer(B),oe=new Uint8Array(te);B--;)oe[B]=x.charCodeAt(B);return te},Ie=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return Ie};var Ee=t.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(x){return Ee=_===T.ADVANCED?x/Ue:x,this};var Fe,Me=y.__private__.getFontSize=y.getFontSize=function(){return _===T.COMPAT?Ee:Ee*Ue},He=t.R2L||!1;y.__private__.setR2L=y.setR2L=function(x){return He=x,this},y.__private__.getR2L=y.getR2L=function(){return He};var Qe,ot=y.__private__.setZoomMode=function(x){var B=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Fe=x;else if(isNaN(x)){if(B.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Fe=x}else Fe=parseInt(x,10)};y.__private__.getZoomMode=function(){return Fe};var st,dt=y.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');Qe=x};y.__private__.getPageMode=function(){return Qe};var wt=y.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');st=x};y.__private__.getLayoutMode=function(){return st},y.__private__.setDisplayMode=y.setDisplayMode=function(x,B,te){return ot(x),wt(B),dt(te),this};var Ye={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(x){if(Object.keys(Ye).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ye[x]},y.__private__.getDocumentProperties=function(){return Ye},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(x){for(var B in Ye)Ye.hasOwnProperty(B)&&x[B]&&(Ye[B]=x[B]);return this},y.__private__.setDocumentProperty=function(x,B){if(Object.keys(Ye).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ye[x]=B};var lt,Ue,nn,ht,qn,St={},kt={},or=[],mt={},oi={},Pt={},On={},xr=null,Lt=0,Ze=[],vt=new _d(y),si=t.hotfixes||[],Zt={},sr={},ar=[],$e=function x(B,te,oe,he,xe,Te){if(!(this instanceof x))return new x(B,te,oe,he,xe,Te);isNaN(B)&&(B=1),isNaN(te)&&(te=0),isNaN(oe)&&(oe=0),isNaN(he)&&(he=1),isNaN(xe)&&(xe=0),isNaN(Te)&&(Te=0),this._matrix=[B,te,oe,he,xe,Te]};Object.defineProperty($e.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty($e.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty($e.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty($e.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty($e.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty($e.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty($e.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty($e.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty($e.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty($e.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty($e.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty($e.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty($e.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty($e.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty($e.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty($e.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),$e.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(x)},$e.prototype.multiply=function(x){var B=x.sx*this.sx+x.shy*this.shx,te=x.sx*this.shy+x.shy*this.sy,oe=x.shx*this.sx+x.sy*this.shx,he=x.shx*this.shy+x.sy*this.sy,xe=x.tx*this.sx+x.ty*this.shx+this.tx,Te=x.tx*this.shy+x.ty*this.sy+this.ty;return new $e(B,te,oe,he,xe,Te)},$e.prototype.decompose=function(){var x=this.sx,B=this.shy,te=this.shx,oe=this.sy,he=this.tx,xe=this.ty,Te=Math.sqrt(x*x+B*B),je=(x/=Te)*te+(B/=Te)*oe;te-=x*je,oe-=B*je;var Ve=Math.sqrt(te*te+oe*oe);return je/=Ve,x*(oe/=Ve)<B*(te/=Ve)&&(x=-x,B=-B,je=-je,Te=-Te),{scale:new $e(Te,0,0,Ve,0,0),translate:new $e(1,0,0,1,he,xe),rotate:new $e(x,B,-B,x,0,0),skew:new $e(1,0,je,1,0,0)}},$e.prototype.toString=function(x){return this.join(" ")},$e.prototype.inversed=function(){var x=this.sx,B=this.shy,te=this.shx,oe=this.sy,he=this.tx,xe=this.ty,Te=1/(x*oe-B*te),je=oe*Te,Ve=-B*Te,rt=-te*Te,et=x*Te;return new $e(je,Ve,rt,et,-je*he-rt*xe,-Ve*he-et*xe)},$e.prototype.applyToPoint=function(x){var B=x.x*this.sx+x.y*this.shx+this.tx,te=x.x*this.shy+x.y*this.sy+this.ty;return new Oi(B,te)},$e.prototype.applyToRectangle=function(x){var B=this.applyToPoint(x),te=this.applyToPoint(new Oi(x.x+x.w,x.y+x.h));return new Io(B.x,B.y,te.x-B.x,te.y-B.y)},$e.prototype.clone=function(){var x=this.sx,B=this.shy,te=this.shx,oe=this.sy,he=this.tx,xe=this.ty;return new $e(x,B,te,oe,he,xe)},y.Matrix=$e;var Hn=y.matrixMult=function(x,B){return B.multiply(x)},lr=new $e(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=lr;var vn=function(x,B){if(!oi[x]){var te=(B instanceof Qr?"Sh":"P")+(Object.keys(mt).length+1).toString(10);B.id=te,oi[x]=te,mt[te]=B,vt.publish("addPattern",B)}};y.ShadingPattern=Qr,y.TilingPattern=bi,y.addShadingPattern=function(x,B){return M("addShadingPattern()"),vn(x,B),this},y.beginTilingPattern=function(x){M("beginTilingPattern()"),As(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},y.endTilingPattern=function(x,B){M("endTilingPattern()"),B.stream=Ce[V].join(`
`),vn(x,B),vt.publish("endTilingPattern",B),ar.pop().restore()};var Wt=y.__private__.newObject=function(){var x=Ht();return _n(x,!0),x},Ht=y.__private__.newObjectDeferred=function(){return ee++,ce[ee]=function(){return pe},ee},_n=function(x,B){return B=typeof B=="boolean"&&B,ce[x]=pe,B&&re(x+" 0 obj"),x},Ii=y.__private__.newAdditionalObject=function(){var x={objId:Ht(),content:""};return we.push(x),x},br=Ht(),Vn=Ht(),Gn=y.__private__.decodeColorString=function(x){var B=x.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length===5&&(B[4]==="k"||B[4]==="K")&&(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var te=parseFloat(B[0]);B=[te,te,te,"r"]}for(var oe="#",he=0;he<3;he++)oe+=("0"+Math.floor(255*parseFloat(B[he])).toString(16)).slice(-2);return oe},zn=y.__private__.encodeColorString=function(x){var B;typeof x=="string"&&(x={ch1:x});var te=x.ch1,oe=x.ch2,he=x.ch3,xe=x.ch4,Te=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof te=="string"&&te.charAt(0)!=="#"){var je=new Gf(te);if(je.ok)te=je.toHex();else if(!/^\d*\.?\d*$/.test(te))throw new Error('Invalid color "'+te+'" passed to jsPDF.encodeColorString.')}if(typeof te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(te)&&(te="#"+te[1]+te[1]+te[2]+te[2]+te[3]+te[3]),typeof te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(te)){var Ve=parseInt(te.substr(1),16);te=Ve>>16&255,oe=Ve>>8&255,he=255&Ve}if(oe===void 0||xe===void 0&&te===oe&&oe===he)if(typeof te=="string")B=te+" "+Te[0];else switch(x.precision){case 2:B=J(te/255)+" "+Te[0];break;case 3:default:B=E(te/255)+" "+Te[0]}else if(xe===void 0||bt(xe)==="object"){if(xe&&!isNaN(xe.a)&&xe.a===0)return B=["1.","1.","1.",Te[1]].join(" ");if(typeof te=="string")B=[te,oe,he,Te[1]].join(" ");else switch(x.precision){case 2:B=[J(te/255),J(oe/255),J(he/255),Te[1]].join(" ");break;default:case 3:B=[E(te/255),E(oe/255),E(he/255),Te[1]].join(" ")}}else if(typeof te=="string")B=[te,oe,he,xe,Te[2]].join(" ");else switch(x.precision){case 2:B=[J(te),J(oe),J(he),J(xe),Te[2]].join(" ");break;case 3:default:B=[E(te),E(oe),E(he),E(xe),Te[2]].join(" ")}return B},cr=y.__private__.getFilters=function(){return s},En=y.__private__.putStream=function(x){var B=(x=x||{}).data||"",te=x.filters||cr(),oe=x.alreadyAppliedFilters||[],he=x.addLength1||!1,xe=B.length,Te=x.objectId,je=function(on){return on};if(h!==null&&Te===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(je=rn.encryptor(Te,0));var Ve={};te===!0&&(te=["FlateEncode"]);var rt=x.additionalKeyValues||[],et=(Ve=We.API.processDataByFilters!==void 0?We.API.processDataByFilters(B,te):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(oe)?oe.join(" "):oe.toString());if(Ve.data.length!==0&&(rt.push({key:"Length",value:Ve.data.length}),he===!0&&rt.push({key:"Length1",value:xe})),et.length!=0)if(et.split("/").length-1==1)rt.push({key:"Filter",value:et});else{rt.push({key:"Filter",value:"["+et+"]"});for(var ut=0;ut<rt.length;ut+=1)if(rt[ut].key==="DecodeParms"){for(var Et=[],Rt=0;Rt<Ve.reverseChain.split("/").length-1;Rt+=1)Et.push("null");Et.push(rt[ut].value),rt[ut].value="["+Et.join(" ")+"]"}}re("<<");for(var Vt=0;Vt<rt.length;Vt++)re("/"+rt[Vt].key+" "+rt[Vt].value);re(">>"),Ve.data.length!==0&&(re("stream"),re(je(Ve.data)),re("endstream"))},ur=y.__private__.putPage=function(x){var B=x.number,te=x.data,oe=x.objId,he=x.contentsObjId;_n(oe,!0),re("<</Type /Page"),re("/Parent "+x.rootDictionaryObjId+" 0 R"),re("/Resources "+x.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(I(x.mediaBox.bottomLeftX))+" "+parseFloat(I(x.mediaBox.bottomLeftY))+" "+I(x.mediaBox.topRightX)+" "+I(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&re("/CropBox ["+I(x.cropBox.bottomLeftX)+" "+I(x.cropBox.bottomLeftY)+" "+I(x.cropBox.topRightX)+" "+I(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&re("/BleedBox ["+I(x.bleedBox.bottomLeftX)+" "+I(x.bleedBox.bottomLeftY)+" "+I(x.bleedBox.topRightX)+" "+I(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&re("/TrimBox ["+I(x.trimBox.bottomLeftX)+" "+I(x.trimBox.bottomLeftY)+" "+I(x.trimBox.topRightX)+" "+I(x.trimBox.topRightY)+"]"),x.artBox!==null&&re("/ArtBox ["+I(x.artBox.bottomLeftX)+" "+I(x.artBox.bottomLeftY)+" "+I(x.artBox.topRightX)+" "+I(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&re("/UserUnit "+x.userUnit),vt.publish("putPage",{objId:oe,pageContext:Ze[B],pageNumber:B,page:te}),re("/Contents "+he+" 0 R"),re(">>"),re("endobj");var xe=te.join(`
`);return _===T.ADVANCED&&(xe+=`
Q`),_n(he,!0),En({data:xe,filters:cr(),objectId:he}),re("endobj"),oe},ai=y.__private__.putPages=function(){var x,B,te=[];for(x=1;x<=Lt;x++)Ze[x].objId=Ht(),Ze[x].contentsObjId=Ht();for(x=1;x<=Lt;x++)te.push(ur({number:x,data:Ce[x],objId:Ze[x].objId,contentsObjId:Ze[x].contentsObjId,mediaBox:Ze[x].mediaBox,cropBox:Ze[x].cropBox,bleedBox:Ze[x].bleedBox,trimBox:Ze[x].trimBox,artBox:Ze[x].artBox,userUnit:Ze[x].userUnit,rootDictionaryObjId:br,resourceDictionaryObjId:Vn}));_n(br,!0),re("<</Type /Pages");var oe="/Kids [";for(B=0;B<Lt;B++)oe+=te[B]+" 0 R ";re(oe+"]"),re("/Count "+Lt),re(">>"),re("endobj"),vt.publish("postPutPages")},ki=function(x){vt.publish("putFont",{font:x,out:re,newObject:Wt,putStream:En}),x.isAlreadyPutted!==!0&&(x.objectNumber=Wt(),re("<<"),re("/Type /Font"),re("/BaseFont /"+ao(x.postScriptName)),re("/Subtype /Type1"),typeof x.encoding=="string"&&re("/Encoding /"+x.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},Ei=function(){for(var x in St)St.hasOwnProperty(x)&&(m===!1||m===!0&&v.hasOwnProperty(x))&&ki(St[x])},Pi=function(x){x.objectNumber=Wt();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[I(x.x),I(x.y),I(x.x+x.width),I(x.y+x.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var te=x.pages[1].join(`
`);En({data:te,additionalKeyValues:B,objectId:x.objectNumber}),re("endobj")},Li=function(){for(var x in Zt)Zt.hasOwnProperty(x)&&Pi(Zt[x])},as=function(x,B){var te,oe=[],he=1/(B-1);for(te=0;te<1;te+=he)oe.push(te);if(oe.push(1),x[0].offset!=0){var xe={offset:0,color:x[0].color};x.unshift(xe)}if(x[x.length-1].offset!=1){var Te={offset:1,color:x[x.length-1].color};x.push(Te)}for(var je="",Ve=0,rt=0;rt<oe.length;rt++){for(te=oe[rt];te>x[Ve+1].offset;)Ve++;var et=x[Ve].offset,ut=(te-et)/(x[Ve+1].offset-et),Et=x[Ve].color,Rt=x[Ve+1].color;je+=Q(Math.round((1-ut)*Et[0]+ut*Rt[0]).toString(16))+Q(Math.round((1-ut)*Et[1]+ut*Rt[1]).toString(16))+Q(Math.round((1-ut)*Et[2]+ut*Rt[2]).toString(16))}return je.trim()},ka=function(x,B){B||(B=21);var te=Wt(),oe=as(x.colors,B),he=[];he.push({key:"FunctionType",value:"0"}),he.push({key:"Domain",value:"[0.0 1.0]"}),he.push({key:"Size",value:"["+B+"]"}),he.push({key:"BitsPerSample",value:"8"}),he.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),En({data:oe,additionalKeyValues:he,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:te}),re("endobj"),x.objectNumber=Wt(),re("<< /ShadingType "+x.type),re("/ColorSpace /DeviceRGB");var xe="/Coords ["+I(parseFloat(x.coords[0]))+" "+I(parseFloat(x.coords[1]))+" ";x.type===2?xe+=I(parseFloat(x.coords[2]))+" "+I(parseFloat(x.coords[3])):xe+=I(parseFloat(x.coords[2]))+" "+I(parseFloat(x.coords[3]))+" "+I(parseFloat(x.coords[4]))+" "+I(parseFloat(x.coords[5])),re(xe+="]"),x.matrix&&re("/Matrix ["+x.matrix.toString()+"]"),re("/Function "+te+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},Ea=function(x,B){var te=Ht(),oe=Wt();B.push({resourcesOid:te,objectOid:oe}),x.objectNumber=oe;var he=[];he.push({key:"Type",value:"/Pattern"}),he.push({key:"PatternType",value:"1"}),he.push({key:"PaintType",value:"1"}),he.push({key:"TilingType",value:"1"}),he.push({key:"BBox",value:"["+x.boundingBox.map(I).join(" ")+"]"}),he.push({key:"XStep",value:I(x.xStep)}),he.push({key:"YStep",value:I(x.yStep)}),he.push({key:"Resources",value:te+" 0 R"}),x.matrix&&he.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),En({data:x.stream,additionalKeyValues:he,objectId:x.objectNumber}),re("endobj")},Ri=function(x){var B;for(B in mt)mt.hasOwnProperty(B)&&(mt[B]instanceof Qr?ka(mt[B]):mt[B]instanceof bi&&Ea(mt[B],x))},ls=function(x){for(var B in x.objectNumber=Wt(),re("<<"),x)switch(B){case"opacity":re("/ca "+J(x[B]));break;case"stroke-opacity":re("/CA "+J(x[B]))}re(">>"),re("endobj")},Pa=function(){var x;for(x in Pt)Pt.hasOwnProperty(x)&&ls(Pt[x])},yo=function(){for(var x in re("/XObject <<"),Zt)Zt.hasOwnProperty(x)&&Zt[x].objectNumber>=0&&re("/"+x+" "+Zt[x].objectNumber+" 0 R");vt.publish("putXobjectDict"),re(">>")},La=function(){rn.oid=Wt(),re("<<"),re("/Filter /Standard"),re("/V "+rn.v),re("/R "+rn.r),re("/U <"+rn.toHexString(rn.U)+">"),re("/O <"+rn.toHexString(rn.O)+">"),re("/P "+rn.P),re(">>"),re("endobj")},cs=function(){for(var x in re("/Font <<"),St)St.hasOwnProperty(x)&&(m===!1||m===!0&&v.hasOwnProperty(x))&&re("/"+x+" "+St[x].objectNumber+" 0 R");re(">>")},Ra=function(){if(Object.keys(mt).length>0){for(var x in re("/Shading <<"),mt)mt.hasOwnProperty(x)&&mt[x]instanceof Qr&&mt[x].objectNumber>=0&&re("/"+x+" "+mt[x].objectNumber+" 0 R");vt.publish("putShadingPatternDict"),re(">>")}},Mi=function(x){if(Object.keys(mt).length>0){for(var B in re("/Pattern <<"),mt)mt.hasOwnProperty(B)&&mt[B]instanceof y.TilingPattern&&mt[B].objectNumber>=0&&mt[B].objectNumber<x&&re("/"+B+" "+mt[B].objectNumber+" 0 R");vt.publish("putTilingPatternDict"),re(">>")}},Ma=function(){if(Object.keys(Pt).length>0){var x;for(x in re("/ExtGState <<"),Pt)Pt.hasOwnProperty(x)&&Pt[x].objectNumber>=0&&re("/"+x+" "+Pt[x].objectNumber+" 0 R");vt.publish("putGStateDict"),re(">>")}},Ft=function(x){_n(x.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),cs(),Ra(),Mi(x.objectOid),Ma(),yo(),re(">>"),re("endobj")},us=function(){var x=[];Ei(),Pa(),Li(),Ri(x),vt.publish("putResources"),x.forEach(Ft),Ft({resourcesOid:Vn,objectOid:Number.MAX_SAFE_INTEGER}),vt.publish("postPutResources")},ds=function(){vt.publish("putAdditionalObjects");for(var x=0;x<we.length;x++){var B=we[x];_n(B.objId,!0),re(B.content),re("endobj")}vt.publish("postPutAdditionalObjects")},fs=function(x){kt[x.fontName]=kt[x.fontName]||{},kt[x.fontName][x.fontStyle]=x.id},xo=function(x,B,te,oe,he){var xe={id:"F"+(Object.keys(St).length+1).toString(10),postScriptName:x,fontName:B,fontStyle:te,encoding:oe,isStandardFont:he||!1,metadata:{}};return vt.publish("addFont",{font:xe,instance:this}),St[xe.id]=xe,fs(xe),xe.id},Da=function(x){for(var B=0,te=Ie.length;B<te;B++){var oe=xo.call(this,x[B][0],x[B][1],x[B][2],Ie[B][3],!0);m===!1&&(v[oe]=!0);var he=x[B][0].split("-");fs({id:oe,fontName:he[0],fontStyle:he[1]||""})}vt.publish("addFonts",{fonts:St,dictionary:kt})},Wn=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(oe){var B=oe.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var te="Error in function "+B.split(`
`)[0].split("<")[0]+": "+oe.message;if(!Je.console)throw new Error(te);Je.console.error(te,oe),Je.alert&&alert(te)}},x.foo.bar=x,x.foo},Di=function(x,B){var te,oe,he,xe,Te,je,Ve,rt,et;if(he=(B=B||{}).sourceEncoding||"Unicode",Te=B.outputEncoding,(B.autoencode||Te)&&St[lt].metadata&&St[lt].metadata[he]&&St[lt].metadata[he].encoding&&(xe=St[lt].metadata[he].encoding,!Te&&St[lt].encoding&&(Te=St[lt].encoding),!Te&&xe.codePages&&(Te=xe.codePages[0]),typeof Te=="string"&&(Te=xe[Te]),Te)){for(Ve=!1,je=[],te=0,oe=x.length;te<oe;te++)(rt=Te[x.charCodeAt(te)])?je.push(String.fromCharCode(rt)):je.push(x[te]),je[te].charCodeAt(0)>>8&&(Ve=!0);x=je.join("")}for(te=x.length;Ve===void 0&&te!==0;)x.charCodeAt(te-1)>>8&&(Ve=!0),te--;if(!Ve)return x;for(je=B.noBOM?[]:[254,255],te=0,oe=x.length;te<oe;te++){if((et=(rt=x.charCodeAt(te))>>8)>>8)throw new Error("Character at position "+te+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");je.push(et),je.push(rt-(et<<8))}return String.fromCharCode.apply(void 0,je)},yn=y.__private__.pdfEscape=y.pdfEscape=function(x,B){return Di(x,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bo=y.__private__.beginPage=function(x){Ce[++Lt]=[],Ze[Lt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},ps(Lt),ye(Ce[V])},hs=function(x,B){var te,oe,he;switch(n=B||n,typeof x=="string"&&(te=N(x.toLowerCase()),Array.isArray(te)&&(oe=te[0],he=te[1])),Array.isArray(x)&&(oe=x[0]*Ue,he=x[1]*Ue),isNaN(oe)&&(oe=i[0],he=i[1]),(oe>14400||he>14400)&&(At.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),oe=Math.min(14400,oe),he=Math.min(14400,he)),i=[oe,he],n.substr(0,1)){case"l":he>oe&&(i=[he,oe]);break;case"p":oe>he&&(i=[he,oe])}bo(i),bs(_o),re($n),Co!==0&&re(Co+" J"),To!==0&&re(To+" j"),vt.publish("addPage",{pageNumber:Lt})},Fa=function(x){x>0&&x<=Lt&&(Ce.splice(x,1),Ze.splice(x,1),Lt--,V>Lt&&(V=Lt),this.setPage(V))},ps=function(x){x>0&&x<=Lt&&(V=x)},Ua=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return Ce.length-1},gs=function(x,B,te){var oe,he=void 0;return te=te||{},x=x!==void 0?x:St[lt].fontName,B=B!==void 0?B:St[lt].fontStyle,oe=x.toLowerCase(),kt[oe]!==void 0&&kt[oe][B]!==void 0?he=kt[oe][B]:kt[x]!==void 0&&kt[x][B]!==void 0?he=kt[x][B]:te.disableWarning===!1&&At.warn("Unable to look up font label for font '"+x+"', '"+B+"'. Refer to getFontList() for available fonts."),he||te.noFallback||(he=kt.times[B])==null&&(he=kt.times.normal),he},ja=y.__private__.putInfo=function(){var x=Wt(),B=function(oe){return oe};for(var te in h!==null&&(B=rn.encryptor(x,0)),re("<<"),re("/Producer ("+yn(B("jsPDF "+We.version))+")"),Ye)Ye.hasOwnProperty(te)&&Ye[te]&&re("/"+te.substr(0,1).toUpperCase()+te.substr(1)+" ("+yn(B(Ye[te]))+")");re("/CreationDate ("+yn(B(ie))+")"),re(">>"),re("endobj")},wo=y.__private__.putCatalog=function(x){var B=(x=x||{}).rootDictionaryObjId||br;switch(Wt(),re("<<"),re("/Type /Catalog"),re("/Pages "+B+" 0 R"),Fe||(Fe="fullwidth"),Fe){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var te=""+Fe;te.substr(te.length-1)==="%"&&(Fe=parseInt(Fe)/100),typeof Fe=="number"&&re("/OpenAction [3 0 R /XYZ null null "+J(Fe)+"]")}switch(st||(st="continuous"),st){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}Qe&&re("/PageMode /"+Qe),vt.publish("putCatalog"),re(">>"),re("endobj")},Ba=y.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(ee+1)),re("/Root "+ee+" 0 R"),re("/Info "+(ee-1)+" 0 R"),h!==null&&re("/Encrypt "+rn.oid+" 0 R"),re("/ID [ <"+$+"> <"+$+"> ]"),re(">>")},qa=y.__private__.putHeader=function(){re("%PDF-"+S),re("%")},Oa=y.__private__.putXRef=function(){var x="0000000000";re("xref"),re("0 "+(ee+1)),re("0000000000 65535 f ");for(var B=1;B<=ee;B++)typeof ce[B]=="function"?re((x+ce[B]()).slice(-10)+" 00000 n "):ce[B]!==void 0?re((x+ce[B]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},wr=y.__private__.buildDocument=function(){Ge(),ye(de),vt.publish("buildDocument"),qa(),ai(),ds(),us(),h!==null&&La(),ja(),wo();var x=pe;return Oa(),Ba(),re("startxref"),re(""+x),re("%%EOF"),ye(Ce[V]),de.join(`
`)},Fi=y.__private__.getBlob=function(x){return new Blob([Oe(x)],{type:"application/pdf"})},Ui=y.output=y.__private__.output=Wn((function(x,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",x){case void 0:return wr();case"save":y.save(B.filename);break;case"arraybuffer":return Oe(wr());case"blob":return Fi(wr());case"bloburi":case"bloburl":if(Je.URL!==void 0&&typeof Je.URL.createObjectURL=="function")return Je.URL&&Je.URL.createObjectURL(Fi(wr()))||void 0;At.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var te="",oe=wr();try{te=Jl(oe)}catch{te=Jl(unescape(encodeURIComponent(oe)))}return"data:application/pdf;filename="+B.filename+";base64,"+te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Je)==="[object Window]"){var he="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(he=B.pdfObjectUrl,xe="");var Te='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+he+'"'+xe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",je=Je.open();return je!==null&&je.document.write(Te),je}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Je)==="[object Window]"){var Ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',rt=Je.open();if(rt!==null){rt.document.write(Ve);var et=this;rt.document.documentElement.querySelector("#pdfViewer").onload=function(){rt.document.title=B.filename,rt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(et.output("bloburl"))}}return rt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Je)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',Et=Je.open();if(Et!==null&&(Et.document.write(ut),Et.document.title=B.filename),Et||typeof safari>"u")return Et;break;case"datauri":case"dataurl":return Je.document.location.href=this.output("datauristring",B);default:return null}})),ms=function(x){return Array.isArray(si)===!0&&si.indexOf(x)>-1};switch(r){case"pt":Ue=1;break;case"mm":Ue=72/25.4;break;case"cm":Ue=72/2.54;break;case"in":Ue=72;break;case"px":Ue=ms("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ue=12;break;case"ex":Ue=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ue=r}var rn=null;se(),z();var Ha=function(x){return h!==null?rn.encryptor(x,0):function(B){return B}},vs=y.__private__.getPageInfo=y.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ze[x].objId,pageNumber:x,pageContext:Ze[x]}},Ke=y.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in Ze)if(Ze[B].objId===x)break;return vs(B)},Va=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:Ze[V].objId,pageNumber:V,pageContext:Ze[V]}};y.addPage=function(){return hs.apply(this,arguments),this},y.setPage=function(){return ps.apply(this,arguments),ye.call(this,Ce[V]),this},y.insertPage=function(x){return this.addPage(),this.movePage(V,x),this},y.movePage=function(x,B){var te,oe;if(x>B){te=Ce[x],oe=Ze[x];for(var he=x;he>B;he--)Ce[he]=Ce[he-1],Ze[he]=Ze[he-1];Ce[B]=te,Ze[B]=oe,this.setPage(B)}else if(x<B){te=Ce[x],oe=Ze[x];for(var xe=x;xe<B;xe++)Ce[xe]=Ce[xe+1],Ze[xe]=Ze[xe+1];Ce[B]=te,Ze[B]=oe,this.setPage(B)}return this},y.deletePage=function(){return Fa.apply(this,arguments),this},y.__private__.text=y.text=function(x,B,te,oe,he){var xe,Te,je,Ve,rt,et,ut,Et,Rt,Vt=(oe=oe||{}).scope||this;if(typeof x=="number"&&typeof B=="number"&&(typeof te=="string"||Array.isArray(te))){var on=te;te=B,B=x,x=on}if(arguments[3]instanceof $e?(M("The transform parameter of text() with a Matrix value"),Rt=he):(je=arguments[4],Ve=arguments[5],bt(ut=arguments[3])==="object"&&ut!==null||(typeof je=="string"&&(Ve=je,je=null),typeof ut=="string"&&(Ve=ut,ut=null),typeof ut=="number"&&(je=ut,ut=null),oe={flags:ut,angle:je,align:Ve})),isNaN(B)||isNaN(te)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Vt;var Yt="",Jn=!1,An=typeof oe.lineHeightFactor=="number"?oe.lineHeightFactor:ci,hr=Vt.internal.scaleFactor;function Cs(Ct){return Ct=Ct.split("	").join(Array(oe.TabLen||9).join(" ")),yn(Ct,ut)}function Lo(Ct){for(var Tt,jt=Ct.concat(),$t=[],Cr=jt.length;Cr--;)typeof(Tt=jt.shift())=="string"?$t.push(Tt):Array.isArray(Ct)&&(Tt.length===1||Tt[1]===void 0&&Tt[2]===void 0)?$t.push(Tt[0]):$t.push([Tt[0],Tt[1],Tt[2]]);return $t}function Ro(Ct,Tt){var jt;if(typeof Ct=="string")jt=Tt(Ct)[0];else if(Array.isArray(Ct)){for(var $t,Cr,Oo=Ct.concat(),Qi=[],Ps=Oo.length;Ps--;)typeof($t=Oo.shift())=="string"?Qi.push(Tt($t)[0]):Array.isArray($t)&&typeof $t[0]=="string"&&(Cr=Tt($t[0],$t[1],$t[2]),Qi.push([Cr[0],Cr[1],Cr[2]]));jt=Qi}return jt}var Vi=!1,Mo=!0;if(typeof x=="string")Vi=!0;else if(Array.isArray(x)){var Do=x.concat();Te=[];for(var Gi,en=Do.length;en--;)(typeof(Gi=Do.shift())!="string"||Array.isArray(Gi)&&typeof Gi[0]!="string")&&(Mo=!1);Vi=Mo}if(Vi===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var zi=Ee/Vt.internal.scaleFactor,Wi=zi*(An-1);switch(oe.baseline){case"bottom":te-=Wi;break;case"top":te+=zi-Wi;break;case"hanging":te+=zi-2*Wi;break;case"middle":te+=zi/2-Wi}if((et=oe.maxWidth||0)>0&&(typeof x=="string"?x=Vt.splitTextToSize(x,et):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce((function(Ct,Tt){return Ct.concat(Vt.splitTextToSize(Tt,et))}),[]))),xe={text:x,x:B,y:te,options:oe,mutex:{pdfEscape:yn,activeFontKey:lt,fonts:St,activeFontSize:Ee}},vt.publish("preProcessText",xe),x=xe.text,je=(oe=xe.options).angle,!(Rt instanceof $e)&&je&&typeof je=="number"){je*=Math.PI/180,oe.rotationDirection===0&&(je=-je),_===T.ADVANCED&&(je=-je);var $i=Math.cos(je),Fo=Math.sin(je);Rt=new $e($i,Fo,-Fo,$i,0,0)}else je&&je instanceof $e&&(Rt=je);_!==T.ADVANCED||Rt||(Rt=lr),(rt=oe.charSpace||qi)!==void 0&&(Yt+=I(k(rt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Et=oe.horizontalScale)!==void 0&&(Yt+=I(100*Et)+` Tz
`),oe.lang;var xn=-1,Za=oe.renderingMode!==void 0?oe.renderingMode:oe.stroke,Uo=Vt.internal.getCurrentPageInfo().pageContext;switch(Za){case 0:case!1:case"fill":xn=0;break;case 1:case!0:case"stroke":xn=1;break;case 2:case"fillThenStroke":xn=2;break;case 3:case"invisible":xn=3;break;case 4:case"fillAndAddForClipping":xn=4;break;case 5:case"strokeAndAddPathForClipping":xn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":xn=6;break;case 7:case"addToPathForClipping":xn=7}var Ts=Uo.usedRenderingMode!==void 0?Uo.usedRenderingMode:-1;xn!==-1?Yt+=xn+` Tr
`:Ts!==-1&&(Yt+=`0 Tr
`),xn!==-1&&(Uo.usedRenderingMode=xn),Ve=oe.align||"left";var Pn,Ji=Ee*An,Is=Vt.internal.pageSize.getWidth(),ks=St[lt];rt=oe.charSpace||qi,et=oe.maxWidth||0,ut=Object.assign({autoencode:!0,noBOM:!0},oe.flags);var jr=[],fi=function(Ct){return Vt.getStringUnitWidth(Ct,{font:ks,charSpace:rt,fontSize:Ee,doKerning:!1})*Ee/hr};if(Object.prototype.toString.call(x)==="[object Array]"){var bn;Te=Lo(x),Ve!=="left"&&(Pn=Te.map(fi));var fn,Br=0;if(Ve==="right"){B-=Pn[0],x=[],en=Te.length;for(var Sr=0;Sr<en;Sr++)Sr===0?(fn=fr(B),bn=Nr(te)):(fn=k(Br-Pn[Sr]),bn=-Ji),x.push([Te[Sr],fn,bn]),Br=Pn[Sr]}else if(Ve==="center"){B-=Pn[0]/2,x=[],en=Te.length;for(var _r=0;_r<en;_r++)_r===0?(fn=fr(B),bn=Nr(te)):(fn=k((Br-Pn[_r])/2),bn=-Ji),x.push([Te[_r],fn,bn]),Br=Pn[_r]}else if(Ve==="left"){x=[],en=Te.length;for(var Yi=0;Yi<en;Yi++)x.push(Te[Yi])}else if(Ve==="justify"&&ks.encoding==="Identity-H"){x=[],en=Te.length,et=et!==0?et:Is;for(var Ar=0,Ut=0;Ut<en;Ut++)if(bn=Ut===0?Nr(te):-Ji,fn=Ut===0?fr(B):Ar,Ut<en-1){var jo=k((et-Pn[Ut])/(Te[Ut].split(" ").length-1)),hn=Te[Ut].split(" ");x.push([hn[0]+" ",fn,bn]),Ar=0;for(var Ln=1;Ln<hn.length;Ln++){var Ki=(fi(hn[Ln-1]+" "+hn[Ln])-fi(hn[Ln]))*hr+jo;Ln==hn.length-1?x.push([hn[Ln],Ki,0]):x.push([hn[Ln]+" ",Ki,0]),Ar-=Ki}}else x.push([Te[Ut],fn,bn]);x.push(["",Ar,0])}else{if(Ve!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],en=Te.length,et=et!==0?et:Is,Ut=0;Ut<en;Ut++)bn=Ut===0?Nr(te):-Ji,fn=Ut===0?fr(B):0,Ut<en-1?jr.push(I(k((et-Pn[Ut])/(Te[Ut].split(" ").length-1)))):jr.push(0),x.push([Te[Ut],fn,bn])}}var Es=typeof oe.R2L=="boolean"?oe.R2L:He;Es===!0&&(x=Ro(x,(function(Ct,Tt,jt){return[Ct.split("").reverse().join(""),Tt,jt]}))),xe={text:x,x:B,y:te,options:oe,mutex:{pdfEscape:yn,activeFontKey:lt,fonts:St,activeFontSize:Ee}},vt.publish("postProcessText",xe),x=xe.text,Jn=xe.mutex.isHex||!1;var Bo=St[lt].encoding;Bo!=="WinAnsiEncoding"&&Bo!=="StandardEncoding"||(x=Ro(x,(function(Ct,Tt,jt){return[Cs(Ct),Tt,jt]}))),Te=Lo(x),x=[];for(var hi,pi,qr,gi=0,Xi=1,mi=Array.isArray(Te[0])?Xi:gi,Or="",qo=function(Ct,Tt,jt){var $t="";return jt instanceof $e?(jt=typeof oe.angle=="number"?Hn(jt,new $e(1,0,0,1,Ct,Tt)):Hn(new $e(1,0,0,1,Ct,Tt),jt),_===T.ADVANCED&&(jt=Hn(new $e(1,0,0,-1,0,0),jt)),$t=jt.join(" ")+` Tm
`):$t=I(Ct)+" "+I(Tt)+` Td
`,$t},Rn=0;Rn<Te.length;Rn++){switch(Or="",mi){case Xi:qr=(Jn?"<":"(")+Te[Rn][0]+(Jn?">":")"),hi=parseFloat(Te[Rn][1]),pi=parseFloat(Te[Rn][2]);break;case gi:qr=(Jn?"<":"(")+Te[Rn]+(Jn?">":")"),hi=fr(B),pi=Nr(te)}jr!==void 0&&jr[Rn]!==void 0&&(Or=jr[Rn]+` Tw
`),Rn===0?x.push(Or+qo(hi,pi,Rt)+qr):mi===gi?x.push(Or+qr):mi===Xi&&x.push(Or+qo(hi,pi,Rt)+qr)}x=mi===gi?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Mn=`BT
/`;return Mn+=lt+" "+Ee+` Tf
`,Mn+=I(Ee*An)+` TL
`,Mn+=ui+`
`,Mn+=Yt,Mn+=x,re(Mn+="ET"),v[lt]=!0,Vt};var Ga=y.__private__.clip=y.clip=function(x){return re(x==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return Ga("evenodd")},y.__private__.discardPath=y.discardPath=function(){return re("n"),this};var dr=y.__private__.isValidStyle=function(x){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(B=!0),B};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(x){return dr(x)&&(c=x),this};var ys=y.__private__.getStyle=y.getStyle=function(x){var B=c;switch(x){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=x}return B},xs=y.close=function(){return re("h"),this};y.stroke=function(){return re("S"),this},y.fill=function(x){return ji("f",x),this},y.fillEvenOdd=function(x){return ji("f*",x),this},y.fillStroke=function(x){return ji("B",x),this},y.fillStrokeEvenOdd=function(x){return ji("B*",x),this};var ji=function(x,B){bt(B)==="object"?Wa(B,x):re(x)},No=function(x){x===null||_===T.ADVANCED&&x===void 0||(x=ys(x),re(x))};function za(x,B,te,oe,he){var xe=new bi(B||this.boundingBox,te||this.xStep,oe||this.yStep,this.gState,he||this.matrix);xe.stream=this.stream;var Te=x+"$$"+this.cloneIndex+++"$$";return vn(Te,xe),xe}var Wa=function(x,B){var te=oi[x.key],oe=mt[te];if(oe instanceof Qr)re("q"),re($a(B)),oe.gState&&y.setGState(oe.gState),re(x.matrix.toString()+" cm"),re("/"+te+" sh"),re("Q");else if(oe instanceof bi){var he=new $e(1,0,0,-1,0,Ur());x.matrix&&(he=he.multiply(x.matrix||lr),te=za.call(oe,x.key,x.boundingBox,x.xStep,x.yStep,he).id),re("q"),re("/Pattern cs"),re("/"+te+" scn"),oe.gState&&y.setGState(oe.gState),re(B),re("Q")}},$a=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},So=y.moveTo=function(x,B){return re(I(k(x))+" "+I(H(B))+" m"),this},li=y.lineTo=function(x,B){return re(I(k(x))+" "+I(H(B))+" l"),this},Dr=y.curveTo=function(x,B,te,oe,he,xe){return re([I(k(x)),I(H(B)),I(k(te)),I(H(oe)),I(k(he)),I(H(xe)),"c"].join(" ")),this};y.__private__.line=y.line=function(x,B,te,oe,he){if(isNaN(x)||isNaN(B)||isNaN(te)||isNaN(oe)||!dr(he))throw new Error("Invalid arguments passed to jsPDF.line");return _===T.COMPAT?this.lines([[te-x,oe-B]],x,B,[1,1],he||"S"):this.lines([[te-x,oe-B]],x,B,[1,1]).stroke()},y.__private__.lines=y.lines=function(x,B,te,oe,he,xe){var Te,je,Ve,rt,et,ut,Et,Rt,Vt,on,Yt,Jn;if(typeof x=="number"&&(Jn=te,te=B,B=x,x=Jn),oe=oe||[1,1],xe=xe||!1,isNaN(B)||isNaN(te)||!Array.isArray(x)||!Array.isArray(oe)||!dr(he)||typeof xe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(So(B,te),Te=oe[0],je=oe[1],rt=x.length,on=B,Yt=te,Ve=0;Ve<rt;Ve++)(et=x[Ve]).length===2?(on=et[0]*Te+on,Yt=et[1]*je+Yt,li(on,Yt)):(ut=et[0]*Te+on,Et=et[1]*je+Yt,Rt=et[2]*Te+on,Vt=et[3]*je+Yt,on=et[4]*Te+on,Yt=et[5]*je+Yt,Dr(ut,Et,Rt,Vt,on,Yt));return xe&&xs(),No(he),this},y.path=function(x){for(var B=0;B<x.length;B++){var te=x[B],oe=te.c;switch(te.op){case"m":So(oe[0],oe[1]);break;case"l":li(oe[0],oe[1]);break;case"c":Dr.apply(this,oe);break;case"h":xs()}}return this},y.__private__.rect=y.rect=function(x,B,te,oe,he){if(isNaN(x)||isNaN(B)||isNaN(te)||isNaN(oe)||!dr(he))throw new Error("Invalid arguments passed to jsPDF.rect");return _===T.COMPAT&&(oe=-oe),re([I(k(x)),I(H(B)),I(k(te)),I(k(oe)),"re"].join(" ")),No(he),this},y.__private__.triangle=y.triangle=function(x,B,te,oe,he,xe,Te){if(isNaN(x)||isNaN(B)||isNaN(te)||isNaN(oe)||isNaN(he)||isNaN(xe)||!dr(Te))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[te-x,oe-B],[he-te,xe-oe],[x-he,B-xe]],x,B,[1,1],Te,!0),this},y.__private__.roundedRect=y.roundedRect=function(x,B,te,oe,he,xe,Te){if(isNaN(x)||isNaN(B)||isNaN(te)||isNaN(oe)||isNaN(he)||isNaN(xe)||!dr(Te))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var je=4/3*(Math.SQRT2-1);return he=Math.min(he,.5*te),xe=Math.min(xe,.5*oe),this.lines([[te-2*he,0],[he*je,0,he,xe-xe*je,he,xe],[0,oe-2*xe],[0,xe*je,-he*je,xe,-he,xe],[2*he-te,0],[-he*je,0,-he,-xe*je,-he,-xe],[0,2*xe-oe],[0,-xe*je,he*je,-xe,he,-xe]],x+he,B,[1,1],Te,!0),this},y.__private__.ellipse=y.ellipse=function(x,B,te,oe,he){if(isNaN(x)||isNaN(B)||isNaN(te)||isNaN(oe)||!dr(he))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xe=4/3*(Math.SQRT2-1)*te,Te=4/3*(Math.SQRT2-1)*oe;return So(x+te,B),Dr(x+te,B-Te,x+xe,B-oe,x,B-oe),Dr(x-xe,B-oe,x-te,B-Te,x-te,B),Dr(x-te,B+Te,x-xe,B+oe,x,B+oe),Dr(x+xe,B+oe,x+te,B+Te,x+te,B),No(he),this},y.__private__.circle=y.circle=function(x,B,te,oe){if(isNaN(x)||isNaN(B)||isNaN(te)||!dr(oe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,B,te,te,oe)},y.setFont=function(x,B,te){return te&&(B=D(B,te)),lt=gs(x,B,{disableWarning:!1}),this};var Ja=y.__private__.getFont=y.getFont=function(){return St[gs.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var x,B,te={};for(x in kt)if(kt.hasOwnProperty(x))for(B in te[x]=[],kt[x])kt[x].hasOwnProperty(B)&&te[x].push(B);return te},y.addFont=function(x,B,te,oe,he){var xe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xe.indexOf(arguments[3])!==-1?he=arguments[3]:arguments[3]&&xe.indexOf(arguments[3])==-1&&(te=D(te,oe)),he=he||"Identity-H",xo.call(this,x,B,te,he)};var ci,_o=t.lineWidth||.200025,Bi=y.__private__.getLineWidth=y.getLineWidth=function(){return _o},bs=y.__private__.setLineWidth=y.setLineWidth=function(x){return _o=x,re(I(k(x))+" w"),this};y.__private__.setLineDash=We.API.setLineDash=We.API.setLineDashPattern=function(x,B){if(x=x||[],B=B||0,isNaN(B)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map((function(te){return I(k(te))})).join(" "),B=I(k(B)),re("["+x+"] "+B+" d"),this};var ws=y.__private__.getLineHeight=y.getLineHeight=function(){return Ee*ci};y.__private__.getLineHeight=y.getLineHeight=function(){return Ee*ci};var Ns=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(ci=x),this},Ss=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return ci};Ns(t.lineHeight);var fr=y.__private__.getHorizontalCoordinate=function(x){return k(x)},Nr=y.__private__.getVerticalCoordinate=function(x){return _===T.ADVANCED?x:Ze[V].mediaBox.topRightY-Ze[V].mediaBox.bottomLeftY-k(x)},Ya=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(x){return I(fr(x))},Fr=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(x){return I(Nr(x))},$n=t.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return Gn($n)},y.__private__.setStrokeColor=y.setDrawColor=function(x,B,te,oe){return $n=zn({ch1:x,ch2:B,ch3:te,ch4:oe,pdfColorType:"draw",precision:2}),re($n),this};var Ao=t.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return Gn(Ao)},y.__private__.setFillColor=y.setFillColor=function(x,B,te,oe){return Ao=zn({ch1:x,ch2:B,ch3:te,ch4:oe,pdfColorType:"fill",precision:2}),re(Ao),this};var ui=t.textColor||"0 g",Ka=y.__private__.getTextColor=y.getTextColor=function(){return Gn(ui)};y.__private__.setTextColor=y.setTextColor=function(x,B,te,oe){return ui=zn({ch1:x,ch2:B,ch3:te,ch4:oe,pdfColorType:"text",precision:3}),this};var qi=t.charSpace,Xa=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(qi||0)};y.__private__.setCharSpace=y.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return qi=x,this};var Co=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(x){var B=y.CapJoinStyles[x];if(B===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Co=B,re(B+" J"),this};var To=0;y.__private__.setLineJoin=y.setLineJoin=function(x){var B=y.CapJoinStyles[x];if(B===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return To=B,re(B+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(I(k(x))+" M"),this},y.GState=ss,y.setGState=function(x){(x=typeof x=="string"?Pt[On[x]]:_s(null,x)).equals(xr)||(re("/"+x.id+" gs"),xr=x)};var _s=function(x,B){if(!x||!On[x]){var te=!1;for(var oe in Pt)if(Pt.hasOwnProperty(oe)&&Pt[oe].equals(B)){te=!0;break}if(te)B=Pt[oe];else{var he="GS"+(Object.keys(Pt).length+1).toString(10);Pt[he]=B,B.id=he}return x&&(On[x]=B.id),vt.publish("addGState",B),B}};y.addGState=function(x,B){return _s(x,B),this},y.saveGraphicsState=function(){return re("q"),or.push({key:lt,size:Ee,color:ui}),this},y.restoreGraphicsState=function(){re("Q");var x=or.pop();return lt=x.key,Ee=x.size,ui=x.color,xr=null,this},y.setCurrentTransformationMatrix=function(x){return re(x.toString()+" cm"),this},y.comment=function(x){return re("#"+x),this};var Oi=function(x,B){var te=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return te},set:function(xe){isNaN(xe)||(te=parseFloat(xe))}});var oe=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return oe},set:function(xe){isNaN(xe)||(oe=parseFloat(xe))}});var he="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return he},set:function(xe){he=xe.toString()}}),this},Io=function(x,B,te,oe){Oi.call(this,x,B),this.type="rect";var he=te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return he},set:function(Te){isNaN(Te)||(he=parseFloat(Te))}});var xe=oe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xe},set:function(Te){isNaN(Te)||(xe=parseFloat(Te))}}),this},ko=function(){this.page=Lt,this.currentPage=V,this.pages=Ce.slice(0),this.pagesContext=Ze.slice(0),this.x=nn,this.y=ht,this.matrix=qn,this.width=di(V),this.height=Ur(V),this.outputDestination=Le,this.id="",this.objectNumber=-1};ko.prototype.restore=function(){Lt=this.page,V=this.currentPage,Ze=this.pagesContext,Ce=this.pages,nn=this.x,ht=this.y,qn=this.matrix,Eo(V,this.width),Po(V,this.height),Le=this.outputDestination};var As=function(x,B,te,oe,he){ar.push(new ko),Lt=V=0,Ce=[],nn=x,ht=B,qn=he,bo([te,oe])},Qa=function(x){if(sr[x])ar.pop().restore();else{var B=new ko,te="Xo"+(Object.keys(Zt).length+1).toString(10);B.id=te,sr[x]=te,Zt[te]=B,vt.publish("addFormObject",B),ar.pop().restore()}};for(var Hi in y.beginFormObject=function(x,B,te,oe,he){return As(x,B,te,oe,he),this},y.endFormObject=function(x){return Qa(x),this},y.doFormObject=function(x,B){var te=Zt[sr[x]];return re("q"),re(B.toString()+" cm"),re("/"+te.id+" Do"),re("Q"),this},y.getFormObject=function(x){var B=Zt[sr[x]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},y.save=function(x,B){return x=x||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(xi(Fi(wr()),x),typeof xi.unload=="function"&&Je.setTimeout&&setTimeout(xi.unload,911),this):new Promise((function(te,oe){try{var he=xi(Fi(wr()),x);typeof xi.unload=="function"&&Je.setTimeout&&setTimeout(xi.unload,911),te(he)}catch(xe){oe(xe.message)}}))},We.API)We.API.hasOwnProperty(Hi)&&(Hi==="events"&&We.API.events.length?(function(x,B){var te,oe,he;for(he=B.length-1;he!==-1;he--)te=B[he][0],oe=B[he][1],x.subscribe.apply(x,[te].concat(typeof oe=="function"?[oe]:oe))})(vt,We.API.events):y[Hi]=We.API[Hi]);var di=y.getPageWidth=function(x){return(Ze[x=x||V].mediaBox.topRightX-Ze[x].mediaBox.bottomLeftX)/Ue},Eo=y.setPageWidth=function(x,B){Ze[x].mediaBox.topRightX=B*Ue+Ze[x].mediaBox.bottomLeftX},Ur=y.getPageHeight=function(x){return(Ze[x=x||V].mediaBox.topRightY-Ze[x].mediaBox.bottomLeftY)/Ue},Po=y.setPageHeight=function(x,B){Ze[x].mediaBox.topRightY=B*Ue+Ze[x].mediaBox.bottomLeftY};return y.internal={pdfEscape:yn,getStyle:ys,getFont:Ja,getFontSize:Me,getCharSpace:Xa,getTextColor:Ka,getLineHeight:ws,getLineHeightFactor:Ss,getLineWidth:Bi,write:nt,getHorizontalCoordinate:fr,getVerticalCoordinate:Nr,getCoordinateString:Ya,getVerticalCoordinateString:Fr,collections:{},newObject:Wt,newAdditionalObject:Ii,newObjectDeferred:Ht,newObjectDeferredBegin:_n,getFilters:cr,putStream:En,events:vt,scaleFactor:Ue,pageSize:{getWidth:function(){return di(V)},setWidth:function(x){Eo(V,x)},getHeight:function(){return Ur(V)},setHeight:function(x){Po(V,x)}},encryptionOptions:h,encryption:rn,getEncryptor:Ha,output:Ui,getNumberOfPages:Ua,pages:Ce,out:re,f2:J,f3:E,getPageInfo:vs,getPageInfoByObjId:Ke,getCurrentPageInfo:Va,getPDFVersion:A,Point:Oi,Rectangle:Io,Matrix:$e,hasHotfix:ms},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return di(V)},set:function(x){Eo(V,x)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return Ur(V)},set:function(x){Po(V,x)},enumerable:!0,configurable:!0}),Da.call(y,Ie),lt="F1",hs(i,n),vt.publish("initialized"),y}so.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},so.prototype.toHexString=function(t){return t.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},so.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},so.prototype.processOwnerPassword=function(t,e){return Kl(Yl(e).substr(0,5),t)},so.prototype.encryptor=function(t,e){var n=Yl(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Kl(n,r)}},ss.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||bt(t)!==bt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},We.API={events:[]},We.version="2.5.2";var Dt=We.API,fc=1,Ti=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ro=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},tt=function(t){return t.toFixed(2)},Kr=function(t){return t.toFixed(5)};Dt.__acroform__={};var Sn=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Ad=function(t){return t*fc},gr=function(t){var e=new Jf,n=qe.internal.getHeight(t)||0,r=qe.internal.getWidth(t)||0;return e.BBox=[0,0,Number(tt(r)),Number(tt(n))],e},Av=Dt.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Cv=Dt.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Tv=Dt.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Bt=Dt.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Tv(t,e-1)},qt=Dt.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Av(t,e-1)},Ot=Dt.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Cv(t,e-1)},Iv=Dt.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],o=t[1],s=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(o+a)||0,l.upperRight_X=n(i+s)||0,l.upperRight_Y=r(o)||0,[Number(tt(l.lowerLeft_X)),Number(tt(l.lowerLeft_Y)),Number(tt(l.upperRight_X)),Number(tt(l.upperRight_Y))]},kv=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Xl(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+tt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=gr(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},Xl=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map((function(E){return E.split(`
`)})):i.map((function(E){return[E]}));var o=n,s=qe.internal.getHeight(t)||0;s=s<0?-s:s;var a=qe.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(E,k,F){if(E+1<i.length){var H=k+" "+i[E+1][0];return ia(H,t,F).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var c,h,m=ia("3",t,o).height,v=t.multiline?s-o:(s-m)/2,y=v+=2,S=0,A=0,w=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+ia(e,t,o=12).width+", FieldWidth:"+a+`
`;break}for(var N="",T=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var R=!1;if(i[_].length!==1&&w!==i[_].length-1){if((m+2)*(T+2)+2>s)continue e;N+=i[_][w],R=!0,A=_,_--}else{N=(N+=i[_][w]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var P=parseInt(_),D=l(P,N,o),I=_>=i.length-1;if(D&&!I){N+=" ",w=0;continue}if(D||I){if(I)A=P;else if(t.multiline&&(m+2)*(T+2)+2>s)continue e}else{if(!t.multiline||(m+2)*(T+2)+2>s)continue e;A=P}}for(var M="",j=S;j<=A;j++){var J=i[j];if(t.multiline){if(j===A){M+=J[w]+" ",w=(w+1)%J.length;continue}if(j===S){M+=J[J.length-1]+" ";continue}}M+=J[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,h=ia(M,t,o).width,t.textAlign){case"right":c=a-h-2;break;case"center":c=(a-h)/2;break;case"left":default:c=2}e+=tt(c)+" "+tt(y)+` Td
`,e+="("+Ti(M)+`) Tj
`,e+=-tt(c)+` 0 Td
`,y=-(o+2),h=0,S=R?A:A+1,T++,N=""}break}return r.text=e,r.fontSize=o,r},ia=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Ev={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Pv=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find((function(r){return r.type===n.type&&r.object===n.object}))===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Lv=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),bt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},Rv=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(rr.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Ev)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");fc=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Yf,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)})),t.internal.events.subscribe("buildDocument",(function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&Pv(o,n)}})(t)})),t.internal.events.subscribe("putCatalog",(function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)})),t.internal.events.subscribe("postPutPages",(function(n){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],l=[],c=a.Rect;if(a.Rect&&(a.Rect=Iv(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=qe.createDefaultAppearanceStream(a),bt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=kv(a);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var m="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var y=a.appearanceStreamContent[v];if(m+="/"+v+" ",m+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var s in y)if(y.hasOwnProperty(s)){var S=y[s];typeof S=="function"&&(S=S.call(i,a)),m+="/"+s+" "+S+" ",i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S)}}else typeof(S=y)=="function"&&(S=S.call(i,a)),m+="/"+s+" "+S,i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S);m+=">>"}l.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}o&&Lv(i.internal.acroformPlugin.xForms,i)})(n,t)})),t.internal.acroformPlugin.isInitialized=!0}},$f=Dt.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(s){return s};if(Array.isArray(t)){for(var i="[",o=0;o<t.length;o++)switch(o!==0&&(i+=" "),bt(t[o])){case"boolean":case"number":case"object":i+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Ti(r(t[o].toString()))+")"):i+=t[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Al=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ti(r(t))+")"},mr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};mr.prototype.toString=function(){return this.objId+" 0 R"},mr.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},mr.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"}));for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:$f(i,this.objId,this.scope)}):i instanceof mr?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var Jf=function(){mr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Sn(Jf,mr);var Yf=function(){mr.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ti(n(t))+")"}},set:function(n){t=n}})};Sn(Yf,mr);var rr=function t(){mr.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Bt(e,3)},set:function(N){N?this.F=qt(e,3):this.F=Ot(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');n=N}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(N){r=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(N){r[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(N){r[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(N){r[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(N){r[3]=N}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof ya)return;o="FieldObject"+t.FieldNum++}var N=function(T){return T};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+Ti(N(o))+")"},set:function(N){o=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(N){o=N}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(N){s=N}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(N){a=N}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/fc:c},set:function(N){c=N}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(N){h=N}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof ya||this instanceof ti))return Al(m,this.objId,this.scope)},set:function(N){N=N.toString(),m=N}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Jt?v:Al(v,this.objId,this.scope)},set:function(N){N=N.toString(),v=this instanceof Jt?N:N.substr(0,1)==="("?ro(N.substr(1,N.length-2)):ro(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Jt?ro(v.substr(1,v.length-1)):v},set:function(N){N=N.toString(),v=this instanceof Jt?"/"+N:N}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Jt?y:Al(y,this.objId,this.scope)},set:function(N){N=N.toString(),y=this instanceof Jt?N:N.substr(0,1)==="("?ro(N.substr(1,N.length-2)):ro(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Jt?ro(y.substr(1,y.length-1)):y},set:function(N){N=N.toString(),y=this instanceof Jt?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var S,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(N){N=!!N,A=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(S)return S},set:function(N){S=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,1)},set:function(N){N?this.Ff=qt(this.Ff,1):this.Ff=Ot(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,2)},set:function(N){N?this.Ff=qt(this.Ff,2):this.Ff=Ot(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,3)},set:function(N){N?this.Ff=qt(this.Ff,3):this.Ff=Ot(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');w=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(w){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:w=2;break;case"center":case 1:w=1;break;case"left":case 0:default:w=0}}})};Sn(rr,mr);var wi=function(){rr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return $f(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=(function(o,s,a){a||(a=1);for(var l,c=[];l=s.exec(o);)c.push(l[a]);return c})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,18)},set:function(n){n?this.Ff=qt(this.Ff,18):this.Ff=Ot(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=qt(this.Ff,19):this.Ff=Ot(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,20)},set:function(n){n?(this.Ff=qt(this.Ff,20),e.sort()):this.Ff=Ot(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,22)},set:function(n){n?this.Ff=qt(this.Ff,22):this.Ff=Ot(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,23)},set:function(n){n?this.Ff=qt(this.Ff,23):this.Ff=Ot(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,27)},set:function(n){n?this.Ff=qt(this.Ff,27):this.Ff=Ot(this.Ff,27)}}),this.hasAppearanceStream=!1};Sn(wi,rr);var Ni=function(){wi.call(this),this.fontName="helvetica",this.combo=!1};Sn(Ni,wi);var Si=function(){Ni.call(this),this.combo=!0};Sn(Si,Ni);var ts=function(){Si.call(this),this.edit=!0};Sn(ts,Si);var Jt=function(){rr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,15)},set:function(n){n?this.Ff=qt(this.Ff,15):this.Ff=Ot(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,16)},set:function(n){n?this.Ff=qt(this.Ff,16):this.Ff=Ot(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,17)},set:function(n){n?this.Ff=qt(this.Ff,17):this.Ff=Ot(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,26)},set:function(n){n?this.Ff=qt(this.Ff,26):this.Ff=Ot(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ti(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){bt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Sn(Jt,rr);var ns=function(){Jt.call(this),this.pushButton=!0};Sn(ns,Jt);var _i=function(){Jt.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Sn(_i,Jt);var ya=function(){var t,e;rr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+Ti(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){bt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=qe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Sn(ya,rr),_i.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},_i.prototype.createOption=function(t){var e=new ya;return e.Parent=this,e.optionName=t,this.Kids.push(e),Mv.call(this.scope,e),e};var rs=function(){Jt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=qe.CheckBox.createAppearanceStream()};Sn(rs,Jt);var ti=function(){rr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,13)},set:function(e){e?this.Ff=qt(this.Ff,13):this.Ff=Ot(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,21)},set:function(e){e?this.Ff=qt(this.Ff,21):this.Ff=Ot(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,23)},set:function(e){e?this.Ff=qt(this.Ff,23):this.Ff=Ot(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,24)},set:function(e){e?this.Ff=qt(this.Ff,24):this.Ff=Ot(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,25)},set:function(e){e?this.Ff=qt(this.Ff,25):this.Ff=Ot(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,26)},set:function(e){e?this.Ff=qt(this.Ff,26):this.Ff=Ot(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Sn(ti,rr);var is=function(){ti.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Bt(this.Ff,14)},set:function(t){t?this.Ff=qt(this.Ff,14):this.Ff=Ot(this.Ff,14)}}),this.password=!0};Sn(is,ti);var qe={CheckBox:{createAppearanceStream:function(){return{N:{On:qe.CheckBox.YesNormal},D:{On:qe.CheckBox.YesPushDown,Off:qe.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=Xl(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+tt(qe.internal.getWidth(t))+" "+tt(qe.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+tt(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=gr(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],o=qe.internal.getHeight(t),s=qe.internal.getWidth(t),a=Xl(t,t.caption);return i.push("1 g"),i.push("0 0 "+tt(s)+" "+tt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+tt(s-1)+" "+tt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+tt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+tt(qe.internal.getWidth(t))+" "+tt(qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:qe.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=qe.RadioButton.Circle.YesNormal,e.D[t]=qe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=qe.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*qe.internal.Bezier_C).toFixed(5)),s=Number((r*qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Kr(qe.internal.getWidth(t)/2)+" "+Kr(qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:qe.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=qe.RadioButton.Cross.YesNormal,e.D[t]=qe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=gr(t);e.scope=t.scope;var n=[],r=qe.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+tt(qe.internal.getWidth(t)-2)+" "+tt(qe.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(tt(r.x1.x)+" "+tt(r.x1.y)+" m"),n.push(tt(r.x2.x)+" "+tt(r.x2.y)+" l"),n.push(tt(r.x4.x)+" "+tt(r.x4.y)+" m"),n.push(tt(r.x3.x)+" "+tt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=qe.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+tt(qe.internal.getWidth(t))+" "+tt(qe.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+tt(qe.internal.getWidth(t)-2)+" "+tt(qe.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(tt(n.x1.x)+" "+tt(n.x1.y)+" m"),r.push(tt(n.x2.x)+" "+tt(n.x2.y)+" l"),r.push(tt(n.x4.x)+" "+tt(n.x4.y)+" m"),r.push(tt(n.x3.x)+" "+tt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=gr(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+tt(qe.internal.getWidth(t))+" "+tt(qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};qe.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=qe.internal.getWidth(t),n=qe.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},qe.internal.getWidth=function(t){var e=0;return bt(t)==="object"&&(e=Ad(t.Rect[2])),e},qe.internal.getHeight=function(t){var e=0;return bt(t)==="object"&&(e=Ad(t.Rect[3])),e};var Mv=Dt.addField=function(t){if(Rv(this,t),!(t instanceof rr))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Dt.AcroFormChoiceField=wi,Dt.AcroFormListBox=Ni,Dt.AcroFormComboBox=Si,Dt.AcroFormEditBox=ts,Dt.AcroFormButton=Jt,Dt.AcroFormPushButton=ns,Dt.AcroFormRadioButton=_i,Dt.AcroFormCheckBox=rs,Dt.AcroFormTextField=ti,Dt.AcroFormPasswordField=is,Dt.AcroFormAppearance=qe,Dt.AcroForm={ChoiceField:wi,ListBox:Ni,ComboBox:Si,EditBox:ts,Button:Jt,PushButton:ns,RadioButton:_i,CheckBox:rs,TextField:ti,PasswordField:is,Appearance:qe},We.AcroForm={ChoiceField:wi,ListBox:Ni,ComboBox:Si,EditBox:ts,Button:Jt,PushButton:ns,RadioButton:_i,CheckBox:rs,TextField:ti,PasswordField:is,Appearance:qe};var Dv=We.AcroForm;function Kf(t){return t.reduce((function(e,n,r){return e[n]=r,e}),{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(E,k){var F,H,ie,$,q,z=e;if((k=k||e)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(D(E))for(q in n)for(ie=n[q],F=0;F<ie.length;F+=1){for($=!0,H=0;H<ie[F].length;H+=1)if(ie[F][H]!==void 0&&ie[F][H]!==E[H]){$=!1;break}if($===!0){z=q;break}}else for(q in n)for(ie=n[q],F=0;F<ie.length;F+=1){for($=!0,H=0;H<ie[F].length;H+=1)if(ie[F][H]!==void 0&&ie[F][H]!==E.charCodeAt(H)){$=!1;break}if($===!0){z=q;break}}return z===e&&k!==e&&(z=k),z},i=function E(k){for(var F=this.internal.write,H=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:k.width}),$.push({key:"Height",value:k.height}),k.colorSpace===w.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===w.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var q="",z=0,X=k.transparency.length;z<X;z++)q+=k.transparency[z]+" "+k.transparency[z]+" ";$.push({key:"Mask",value:"["+q+"]"})}k.sMask!==void 0&&$.push({key:"SMask",value:k.objectId+1+" 0 R"});var ne=k.filter!==void 0?["/"+k.filter]:void 0;if(H({data:k.data,additionalKeyValues:$,alreadyAppliedFilters:ne,objectId:k.objectId}),F("endobj"),"sMask"in k&&k.sMask!==void 0){var se="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,L={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:se,data:k.sMask};"filter"in k&&(L.filter=k.filter),E.call(this,L)}if(k.colorSpace===w.INDEXED){var V=this.internal.newObject();H({data:M(new Uint8Array(k.palette)),objectId:V}),F("endobj")}},o=function(){var E=this.internal.collections.addImage_images;for(var k in E)i.call(this,E[k])},s=function(){var E,k=this.internal.collections.addImage_images,F=this.internal.write;for(var H in k)F("/I"+(E=k[H]).index,E.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var E=this.internal.collections.addImage_images;return a.call(this),E},c=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(E){return typeof t["process"+E.toUpperCase()]=="function"},m=function(E){return bt(E)==="object"&&E.nodeType===1},v=function(E,k){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var F=""+E.getAttribute("src");if(F.indexOf("data:image/")===0)return es(unescape(F).split("base64,").pop());var H=t.loadFile(F,!0);if(H!==void 0)return H}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var ie;switch(k){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;case"JPEG":case"JPG":default:ie="image/jpeg"}return es(E.toDataURL(ie,1).split("base64,").pop())}},y=function(E){var k=this.internal.collections.addImage_images;if(k){for(var F in k)if(E===k[F].alias)return k[F]}},S=function(E,k,F){return E||k||(E=-96,k=-96),E<0&&(E=-1*F.width*72/E/this.internal.scaleFactor),k<0&&(k=-1*F.height*72/k/this.internal.scaleFactor),E===0&&(E=k*F.width/F.height),k===0&&(k=E*F.height/F.width),[E,k]},A=function(E,k,F,H,ie,$){var q=S.call(this,F,H,ie),z=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,ne=l.call(this);if(F=q[0],H=q[1],ne[ie.index]=ie,$){$*=Math.PI/180;var se=Math.cos($),L=Math.sin($),V=function(Q){return Q.toFixed(4)},K=[V(se),V(L),V(-1*L),V(se),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,z(E),X(k+H),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([z(F),"0","0",z(H),"0","0","cm"].join(" "))):this.internal.write([z(F),"0","0",z(H),z(E),X(k+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=t.__addimage__.sHashCode=function(E){var k,F,H=0;if(typeof E=="string")for(F=E.length,k=0;k<F;k++)H=(H<<5)-H+E.charCodeAt(k),H|=0;else if(D(E))for(F=E.byteLength/2,k=0;k<F;k++)H=(H<<5)-H+E[k],H|=0;return H},_=t.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var k=!0;return E.length===0&&(k=!1),E.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(k=!1),k},R=t.__addimage__.extractImageFromDataUrl=function(E){var k=(E=E||"").split("base64,"),F=null;if(k.length===2){var H=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(k[0]);Array.isArray(H)&&(F={mimeType:H[1],charset:H[2],data:k[1]})}return F},P=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(E){return P()&&E instanceof ArrayBuffer};var D=t.__addimage__.isArrayBufferView=function(E){return P()&&typeof Uint32Array<"u"&&(E instanceof Int8Array||E instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array)},I=t.__addimage__.binaryStringToUint8Array=function(E){for(var k=E.length,F=new Uint8Array(k),H=0;H<k;H++)F[H]=E.charCodeAt(H);return F},M=t.__addimage__.arrayBufferToBinaryString=function(E){for(var k="",F=D(E)?E:new Uint8Array(E),H=0;H<F.length;H+=8192)k+=String.fromCharCode.apply(null,F.subarray(H,H+8192));return k};t.addImage=function(){var E,k,F,H,ie,$,q,z,X;if(typeof arguments[1]=="number"?(k=e,F=arguments[1],H=arguments[2],ie=arguments[3],$=arguments[4],q=arguments[5],z=arguments[6],X=arguments[7]):(k=arguments[1],F=arguments[2],H=arguments[3],ie=arguments[4],$=arguments[5],q=arguments[6],z=arguments[7],X=arguments[8]),bt(E=arguments[0])==="object"&&!m(E)&&"imageData"in E){var ne=E;E=ne.imageData,k=ne.format||k||e,F=ne.x||F||0,H=ne.y||H||0,ie=ne.w||ne.width||ie,$=ne.h||ne.height||$,q=ne.alias||q,z=ne.compression||z,X=ne.rotation||ne.angle||X}var se=this.internal.getFilters();if(z===void 0&&se.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(F)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var L=j.call(this,E,k,q,z);return A.call(this,F,H,ie,$,L,X),this};var j=function(E,k,F,H){var ie,$,q;if(typeof E=="string"&&r(E)===e){E=unescape(E);var z=J(E,!1);(z!==""||(z=t.loadFile(E,!0))!==void 0)&&(E=z)}if(m(E)&&(E=v(E,k)),k=r(E,k),!h(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((q=F)==null||q.length===0)&&(F=(function(X){return typeof X=="string"||D(X)?T(X):D(X.data)?T(X.data):null})(E)),(ie=y.call(this,F))||(P()&&(E instanceof Uint8Array||k==="RGBA"||($=E,E=I(E))),ie=this["process"+k.toUpperCase()](E,c.call(this),F,(function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in t.image_compression?X:N.NONE})(H),$)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},J=t.__addimage__.convertBase64ToBinaryString=function(E,k){var F;k=typeof k!="boolean"||k;var H,ie="";if(typeof E=="string"){H=(F=R(E))!==null?F.data:E;try{ie=es(H)}catch($){if(k)throw _(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};t.getImageProperties=function(E){var k,F,H="";if(m(E)&&(E=v(E)),typeof E=="string"&&r(E)===e&&((H=J(E,!1))===""&&(H=t.loadFile(E)||""),E=H),F=r(E),!h(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(!P()||E instanceof Uint8Array||(E=I(E)),!(k=this["process"+F.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=F,k}})(We.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};We.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,h=!1,m=0;m<c.length&&!h;m++)switch((r=c[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var y=this.internal.pdfEscape,S=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(A.objId),T=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+y(N(r.contents))+")",o+=" /Popup "+w.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+y(N(T))+") >>",A.content=o;var _=A.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+_,r.open&&(o+=" /Open true"),o+=" >>",w.content=o,this.internal.write(A.objId,"0 R",w.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var R=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+y(S(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var P=this.annotations._nameMap[r.options.name];r.options.pageNumber=P.page,r.options.top=P.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+y(S(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var D=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+D+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,o,s){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+o)},options:s,type:"link"})},t.textWithLink=function(n,r,i,o){var s,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var h=this.splitTextToSize(n,a).length;s=Math.ceil(c*h)}else a=l,s=c;return this.text(n,r,i,o),i+=.2*c,o.align==="center"&&(r-=l/2),o.align==="right"&&(r-=l),this.link(r,i-c,a,s,o),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(We.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(A){return e[A.charCodeAt(0)]!==void 0},s=t.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},a=t.__arabicParser__.isArabicEndLetter=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(A){return s(A)&&i.indexOf(A.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(A){return s(A)&&o(A)&&e[A.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(A){var w=0,N=n,T="",_=0;for(w=0;w<A.length;w+=1)N[A.charCodeAt(w)]!==void 0?(_++,typeof(N=N[A.charCodeAt(w)])=="number"&&(T+=String.fromCharCode(N),N=n,_=0),w===A.length-1&&(N=n,T+=A.charAt(w-(_-1)),w-=_-1,_=0)):(N=n,T+=A.charAt(w-_),w-=_,_=0);return T};t.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&r[A.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(A,w,N){return s(A)?o(A)===!1?-1:!c(A)||!s(w)&&!s(N)||!s(N)&&a(w)||a(A)&&!s(w)||a(A)&&l(w)||a(A)&&a(w)?0:h(A)&&s(w)&&!a(w)&&s(N)&&c(N)?3:a(A)||!s(N)?1:2:-1},y=function(A){var w=0,N=0,T=0,_="",R="",P="",D=(A=A||"").split("\\s+"),I=[];for(w=0;w<D.length;w+=1){for(I.push(""),N=0;N<D[w].length;N+=1)_=D[w][N],R=D[w][N-1],P=D[w][N+1],s(_)?(T=v(_,R,P),I[w]+=T!==-1?String.fromCharCode(e[_.charCodeAt(0)][T]):_):I[w]+=_;I[w]=m(I[w])}return I.join(" ")},S=t.__arabicParser__.processArabic=t.processArabic=function(){var A,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(w)){var T=0;for(N=[],T=0;T<w.length;T+=1)Array.isArray(w[T])?N.push([y(w[T][0]),w[T][1],w[T][2]]):N.push([y(w[T])]);A=N}else A=y(w);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};t.events.push(["preProcessText",S])})(We.API),We.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(We.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(A){l=A}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(A){c=A}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(A){h=A}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(A){m=A}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(A){v=A}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(A){y=A}});var S=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return S},set:function(A){S=A}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var h=(c=c||{}).fontSize||this.getFontSize(),m=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,y=0,S=0,A=0,w=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var N=c.maxWidth;N>0?typeof l=="string"?l=this.splitTextToSize(l,N):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce((function(_,R){return _.concat(w.splitTextToSize(R,N))}),[])):l=Array.isArray(l)?l:[l];for(var T=0;T<l.length;T++)y<(A=this.getStringUnitWidth(l[T],{font:m})*h)&&(y=A);return y!==0&&(S=l.length),{w:y/=v,h:Math.max((S*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=m.top,y&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,h,m,v){if(r.call(this),!h)throw new Error("No data for PDF table.");var y,S,A,w,N=[],T=[],_=[],R={},P={},D=[],I=[],M=(v=v||{}).autoSize||!1,j=v.printHeaders!==!1,J=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,E=v.margins||Object.assign({width:this.getPageWidth()},e),k=typeof v.padding=="number"?v.padding:3,F=v.headerBackgroundColor||"#c8c8c8",H=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=H,this.setFontSize(J),m==null)T=N=Object.keys(h[0]),_=N.map((function(){return"left"}));else if(Array.isArray(m)&&bt(m[0])==="object")for(N=m.map((function(ne){return ne.name})),T=m.map((function(ne){return ne.prompt||ne.name||""})),_=m.map((function(ne){return ne.align||"left"})),y=0;y<m.length;y+=1)P[m[y].name]=m[y].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(T=N=m,_=N.map((function(){return"left"})));if(M||Array.isArray(m)&&typeof m[0]=="string")for(y=0;y<N.length;y+=1){for(R[w=N[y]]=h.map((function(ne){return ne[w]})),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(T[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),S=R[w],this.setFont(void 0,"normal"),A=0;A<S.length;A+=1)D.push(this.getTextDimensions(S[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[w]=Math.max.apply(null,D)+k+k,D=[]}if(j){var ie={};for(y=0;y<N.length;y+=1)ie[N[y]]={},ie[N[y]].text=T[y],ie[N[y]].align=_[y];var $=a.call(this,ie,P);I=N.map((function(ne){return new o(l,c,P[ne],$,ie[ne].text,void 0,ie[ne].align)})),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var q=m.reduce((function(ne,se){return ne[se.name]=se.align,ne}),{});for(y=0;y<h.length;y+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:y,data:h[y]},this);var z=a.call(this,h[y],P);for(A=0;A<N.length;A+=1){var X=h[y][N[A]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:y,col:A,data:X},this),s.call(this,new o(l,c,P[N[A]],z,X,y+2,q[N[A]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var h=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map((function(y){var S=l[y];return this.splitTextToSize(S.hasOwnProperty("text")?S.text:S,c[y]-h-h)}),this).map((function(y){return this.getLineHeightFactor()*y.length*m/v+h+h}),this).reduce((function(y,S){return Math.max(y,S)}),0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){h=this.internal.__cell__.tableHeaderRow[y].clone(),c&&(h.y=this.internal.__cell__.margins.top||0,v.push(h)),h.lineNumber=l;var S=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,h),this.setTextColor(S)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}})(We.API);var Xf={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Qf=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ql=Kf(Qf),Zf=[100,200,300,400,500,600,700,800,900],Fv=Kf(Zf);function Zl(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(o){return Xf[o=o||"normal"]?o:"normal"})(t.style),r=(function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}})(t.weight),i=(function(o){return typeof Ql[o=o||"normal"]=="number"?o:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function Cd(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Uv={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Td={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Id(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function jv(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Uv,n.genericFontFamilies||{}),o=null,s=null,a=0;a<e.length;++a)if(i[(o=Zl(e[a])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){s=t[o.family];break}if(!(s=s||t[r]))throw new Error("Could not find a font-family for the rule '"+Id(o)+"' and default family '"+r+"'.");if(s=(function(l,c){if(c[l])return c[l];var h=Ql[l],m=h<=Ql.normal?-1:1,v=Cd(c,Qf,h,m);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v})(o.stretch,s),s=(function(l,c){if(c[l])return c[l];for(var h=Xf[l],m=0;m<h.length;++m)if(c[h[m]])return c[h[m]];throw new Error("Could not find a matching font-style for "+l)})(o.style,s),!(s=(function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var h=Fv[l],m=Cd(c,Zf,h,l<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+l);return m})(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+Id(o)+"'.");return s}function kd(t){return t.trimLeft()}function Bv(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function qv(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var oa,Ed,Pd,Cl=["times"];(function(t){var e,n,r,i,o,s,a,l,c,h=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new s,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new s,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new h}]);var m=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=L;Object.defineProperty(this,"pdf",{get:function(){return V}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(ye){K=!!ye}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(ye){Q=!!ye}});var ee=0;Object.defineProperty(this,"posX",{get:function(){return ee},set:function(ye){isNaN(ye)||(ee=ye)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(ye){isNaN(ye)||(ce=ye)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ye){var re;typeof ye=="number"?re=[ye,ye,ye,ye]:((re=new Array(4))[0]=ye[0],re[1]=ye.length>=2?ye[1]:re[0],re[2]=ye.length>=3?ye[2]:re[0],re[3]=ye.length>=4?ye[3]:re[1]),c.margin=re}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(ye){de=ye}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(ye){pe=ye}});var we=[];Object.defineProperty(this,"pageBreaks",{get:function(){return we},set:function(ye){we=ye}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ye){ye instanceof h&&(c=ye)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ye){c.path=ye}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(ye){Ce=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var re;re=v(ye),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=re.a===0,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var re=v(ye);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=re.a===0,this.ctx.strokeOpacity=re.a,re.a===0?this.pdf.setDrawColor(255,255,255):(re.a,this.pdf.setDrawColor(re.r,re.g,re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var ke=null;function Le(ye,re){if(ke===null){var nt=(function(Oe){var Ie=[];return Object.keys(Oe).forEach((function(Ee){Oe[Ee].forEach((function(Fe){var Me=null;switch(Fe){case"bold":Me={family:Ee,weight:"bold"};break;case"italic":Me={family:Ee,style:"italic"};break;case"bolditalic":Me={family:Ee,weight:"bold",style:"italic"};break;case"":case"normal":Me={family:Ee}}Me!==null&&(Me.ref={name:Ee,style:Fe},Ie.push(Me))}))})),Ie})(ye.getFontList());ke=(function(Oe){for(var Ie={},Ee=0;Ee<Oe.length;++Ee){var Fe=Zl(Oe[Ee]),Me=Fe.family,He=Fe.stretch,Qe=Fe.style,ot=Fe.weight;Ie[Me]=Ie[Me]||{},Ie[Me][He]=Ie[Me][He]||{},Ie[Me][He][Qe]=Ie[Me][He][Qe]||{},Ie[Me][He][Qe][ot]=Fe}return Ie})(nt.concat(re))}return ke}var Ge=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ge},set:function(ye){ke=null,Ge=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var re;if(this.ctx.font=ye,(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var nt=re[1],Oe=(re[2],re[3]),Ie=re[4],Ee=(re[5],re[6]),Fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ie)[2];Ie=Math.floor(Fe==="px"?parseFloat(Ie)*this.pdf.internal.scaleFactor:Fe==="em"?parseFloat(Ie)*this.pdf.getFontSize():parseFloat(Ie)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ie);var Me=(function(Ye){var lt,Ue,nn=[],ht=Ye.trim();if(ht==="")return Cl;if(ht in Td)return[Td[ht]];for(;ht!=="";){switch(Ue=null,lt=(ht=kd(ht)).charAt(0)){case'"':case"'":Ue=Bv(ht.substring(1),lt);break;default:Ue=qv(ht)}if(Ue===null||(nn.push(Ue[0]),(ht=kd(Ue[1]))!==""&&ht.charAt(0)!==","))return Cl;ht=ht.replace(/^,/,"")}return nn})(Ee);if(this.fontFaces){var He=jv(Le(this.pdf,this.fontFaces),Me.map((function(Ye){return{family:Ye,stretch:"normal",weight:Oe,style:nt}})));this.pdf.setFont(He.ref.name,He.ref.style)}else{var Qe="";(Oe==="bold"||parseInt(Oe,10)>=700||nt==="bold")&&(Qe="bold"),nt==="italic"&&(Qe+="italic"),Qe.length===0&&(Qe="normal");for(var ot="",st={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<Me.length;dt++){if(this.pdf.internal.getFont(Me[dt],Qe,{noFallback:!0,disableWarning:!0})!==void 0){ot=Me[dt];break}if(Qe==="bolditalic"&&this.pdf.internal.getFont(Me[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Me[dt],Qe="bold";else if(this.pdf.internal.getFont(Me[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Me[dt],Qe="normal";break}}if(ot===""){for(var wt=0;wt<Me.length;wt++)if(st[Me[wt]]){ot=st[Me[wt]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,Qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};m.prototype.setLineDash=function(L){this.lineDash=L},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){R.call(this,"fill",!1)},m.prototype.stroke=function(){R.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(L,V){if(isNaN(L)||isNaN(V))throw At.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new s(L,V));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new s(L,V)},m.prototype.closePath=function(){var L=new s(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&bt(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){L=new s(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(L.x,L.y)},m.prototype.lineTo=function(L,V){if(isNaN(L)||isNaN(V))throw At.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new s(L,V));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new s(K.x,K.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},m.prototype.quadraticCurveTo=function(L,V,K,Q){if(isNaN(K)||isNaN(Q)||isNaN(L)||isNaN(V))throw At.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ee=this.ctx.transform.applyToPoint(new s(K,Q)),ce=this.ctx.transform.applyToPoint(new s(L,V));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new s(ee.x,ee.y)},m.prototype.bezierCurveTo=function(L,V,K,Q,ee,ce){if(isNaN(ee)||isNaN(ce)||isNaN(L)||isNaN(V)||isNaN(K)||isNaN(Q))throw At.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new s(ee,ce)),pe=this.ctx.transform.applyToPoint(new s(L,V)),we=this.ctx.transform.applyToPoint(new s(K,Q));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:we.x,y2:we.y,x:de.x,y:de.y}),this.ctx.lastPoint=new s(de.x,de.y)},m.prototype.arc=function(L,V,K,Q,ee,ce){if(isNaN(L)||isNaN(V)||isNaN(K)||isNaN(Q)||isNaN(ee))throw At.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new s(L,V));L=de.x,V=de.y;var pe=this.ctx.transform.applyToPoint(new s(0,K)),we=this.ctx.transform.applyToPoint(new s(0,0));K=Math.sqrt(Math.pow(pe.x-we.x,2)+Math.pow(pe.y-we.y,2))}Math.abs(ee-Q)>=2*Math.PI&&(Q=0,ee=2*Math.PI),this.path.push({type:"arc",x:L,y:V,radius:K,startAngle:Q,endAngle:ee,counterclockwise:ce})},m.prototype.arcTo=function(L,V,K,Q,ee){throw new Error("arcTo not implemented.")},m.prototype.rect=function(L,V,K,Q){if(isNaN(L)||isNaN(V)||isNaN(K)||isNaN(Q))throw At.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,V),this.lineTo(L+K,V),this.lineTo(L+K,V+Q),this.lineTo(L,V+Q),this.lineTo(L,V),this.lineTo(L+K,V),this.lineTo(L,V)},m.prototype.fillRect=function(L,V,K,Q){if(isNaN(L)||isNaN(V)||isNaN(K)||isNaN(Q))throw At.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var ee={};this.lineCap!=="butt"&&(ee.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ee.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,V,K,Q),this.fill(),ee.hasOwnProperty("lineCap")&&(this.lineCap=ee.lineCap),ee.hasOwnProperty("lineJoin")&&(this.lineJoin=ee.lineJoin)}},m.prototype.strokeRect=function(L,V,K,Q){if(isNaN(L)||isNaN(V)||isNaN(K)||isNaN(Q))throw At.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");S.call(this)||(this.beginPath(),this.rect(L,V,K,Q),this.stroke())},m.prototype.clearRect=function(L,V,K,Q){if(isNaN(L)||isNaN(V)||isNaN(K)||isNaN(Q))throw At.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,V,K,Q))},m.prototype.save=function(L){L=typeof L!="boolean"||L;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},m.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(V),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(L){var V,K,Q,ee;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))V=0,K=0,Q=0,ee=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(ce!==null)V=parseInt(ce[1]),K=parseInt(ce[2]),Q=parseInt(ce[3]),ee=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)V=parseInt(ce[1]),K=parseInt(ce[2]),Q=parseInt(ce[3]),ee=parseFloat(ce[4]);else{if(ee=1,typeof L=="string"&&L.charAt(0)!=="#"){var de=new Gf(L);L=de.ok?de.toHex():"#000000"}L.length===4?(V=L.substring(1,2),V+=V,K=L.substring(2,3),K+=K,Q=L.substring(3,4),Q+=Q):(V=L.substring(1,3),K=L.substring(3,5),Q=L.substring(5,7)),V=parseInt(V,16),K=parseInt(K,16),Q=parseInt(Q,16)}}return{r:V,g:K,b:Q,a:ee,style:L}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},S=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(L,V,K,Q){if(isNaN(V)||isNaN(K)||typeof L!="string")throw At.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!y.call(this)){var ee=z(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;k.call(this,{text:L,x:V,y:K,scale:ce,angle:ee,align:this.textAlign,maxWidth:Q})}},m.prototype.strokeText=function(L,V,K,Q){if(isNaN(V)||isNaN(K)||typeof L!="string")throw At.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!S.call(this)){Q=isNaN(Q)?void 0:Q;var ee=z(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;k.call(this,{text:L,x:V,y:K,scale:ce,renderingMode:"stroke",angle:ee,align:this.textAlign,maxWidth:Q})}},m.prototype.measureText=function(L){if(typeof L!="string")throw At.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,K=this.pdf.internal.scaleFactor,Q=V.internal.getFontSize(),ee=V.getStringUnitWidth(L)*Q/V.internal.scaleFactor,ce=function(de){var pe=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this};return new ce({width:ee*=Math.round(96*K/72*1e4)/1e4})},m.prototype.scale=function(L,V){if(isNaN(L)||isNaN(V))throw At.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(L,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},m.prototype.rotate=function(L){if(isNaN(L))throw At.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.translate=function(L,V){if(isNaN(L)||isNaN(V))throw At.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,L,V);this.ctx.transform=this.ctx.transform.multiply(K)},m.prototype.transform=function(L,V,K,Q,ee,ce){if(isNaN(L)||isNaN(V)||isNaN(K)||isNaN(Q)||isNaN(ee)||isNaN(ce))throw At.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new l(L,V,K,Q,ee,ce);this.ctx.transform=this.ctx.transform.multiply(de)},m.prototype.setTransform=function(L,V,K,Q,ee,ce){L=isNaN(L)?1:L,V=isNaN(V)?0:V,K=isNaN(K)?0:K,Q=isNaN(Q)?1:Q,ee=isNaN(ee)?0:ee,ce=isNaN(ce)?0:ce,this.ctx.transform=new l(L,V,K,Q,ee,ce)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(L,V,K,Q,ee,ce,de,pe,we){var Ce=this.pdf.getImageProperties(L),ke=1,Le=1,Ge=1,ye=1;Q!==void 0&&pe!==void 0&&(Ge=pe/Q,ye=we/ee,ke=Ce.width/Q*pe/Q,Le=Ce.height/ee*we/ee),ce===void 0&&(ce=V,de=K,V=0,K=0),Q!==void 0&&pe===void 0&&(pe=Q,we=ee),Q===void 0&&pe===void 0&&(pe=Ce.width,we=Ce.height);for(var re,nt=this.ctx.transform.decompose(),Oe=z(nt.rotate.shx),Ie=new l,Ee=(Ie=(Ie=(Ie=Ie.multiply(nt.translate)).multiply(nt.skew)).multiply(nt.scale)).applyToRectangle(new a(ce-V*Ge,de-K*ye,Q*ke,ee*Le)),Fe=w.call(this,Ee),Me=[],He=0;He<Fe.length;He+=1)Me.indexOf(Fe[He])===-1&&Me.push(Fe[He]);if(_(Me),this.autoPaging)for(var Qe=Me[0],ot=Me[Me.length-1],st=Qe;st<ot+1;st++){this.pdf.setPage(st);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wt=st===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ue=st===1?0:Ye+(st-2)*lt;if(this.ctx.clip_path.length!==0){var nn=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(re,this.posX+this.margin[3],-Ue+wt+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=nn}var ht=JSON.parse(JSON.stringify(Ee));ht=T([ht],this.posX+this.margin[3],-Ue+wt+this.ctx.prevPageLastElemOffset)[0];var qn=(st>Qe||st<ot)&&A.call(this);qn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,lt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",ht.x,ht.y,ht.w,ht.h,null,null,Oe),qn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",Ee.x,Ee.y,Ee.w,Ee.h,null,null,Oe)};var w=function(L,V,K){var Q=[];V=V||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ee=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":Q.push(Math.floor((L.y+ee)/K)+1);break;case"arc":Q.push(Math.floor((L.y+ee-L.radius)/K)+1),Q.push(Math.floor((L.y+ee+L.radius)/K)+1);break;case"qct":var ce=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);Q.push(Math.floor((ce.y+ee)/K)+1),Q.push(Math.floor((ce.y+ce.h+ee)/K)+1);break;case"bct":var de=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);Q.push(Math.floor((de.y+ee)/K)+1),Q.push(Math.floor((de.y+de.h+ee)/K)+1);break;case"rect":Q.push(Math.floor((L.y+ee)/K)+1),Q.push(Math.floor((L.y+L.h+ee)/K)+1)}for(var pe=0;pe<Q.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<Q[pe];)N.call(this);return Q},N=function(){var L=this.fillStyle,V=this.strokeStyle,K=this.font,Q=this.lineCap,ee=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=V,this.font=K,this.lineCap=Q,this.lineWidth=ee,this.lineJoin=ce},T=function(L,V,K){for(var Q=0;Q<L.length;Q++)switch(L[Q].type){case"bct":L[Q].x2+=V,L[Q].y2+=K;case"qct":L[Q].x1+=V,L[Q].y1+=K;case"mt":case"lt":case"arc":default:L[Q].x+=V,L[Q].y+=K}return L},_=function(L){return L.sort((function(V,K){return V-K}))},R=function(L,V){for(var K,Q,ee=this.fillStyle,ce=this.strokeStyle,de=this.lineCap,pe=this.lineWidth,we=Math.abs(pe*this.ctx.transform.scaleX),Ce=this.lineJoin,ke=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),Ge=[],ye=0;ye<Le.length;ye++)if(Le[ye].x!==void 0)for(var re=w.call(this,Le[ye]),nt=0;nt<re.length;nt+=1)Ge.indexOf(re[nt])===-1&&Ge.push(re[nt]);for(var Oe=0;Oe<Ge.length;Oe++)for(;this.pdf.internal.getNumberOfPages()<Ge[Oe];)N.call(this);if(_(Ge),this.autoPaging)for(var Ie=Ge[0],Ee=Ge[Ge.length-1],Fe=Ie;Fe<Ee+1;Fe++){this.pdf.setPage(Fe),this.fillStyle=ee,this.strokeStyle=ce,this.lineCap=de,this.lineWidth=we,this.lineJoin=Ce;var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=Fe===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],st=Fe===1?0:Qe+(Fe-2)*ot;if(this.ctx.clip_path.length!==0){var dt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(K,this.posX+this.margin[3],-st+He+this.ctx.prevPageLastElemOffset),P.call(this,L,!0),this.path=dt}if(Q=JSON.parse(JSON.stringify(ke)),this.path=T(Q,this.posX+this.margin[3],-st+He+this.ctx.prevPageLastElemOffset),V===!1||Fe===0){var wt=(Fe>Ie||Fe<Ee)&&A.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,ot,null).clip().discardPath()),P.call(this,L,V),wt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}else this.lineWidth=we,P.call(this,L,V),this.lineWidth=pe;this.path=ke},P=function(L,V){if((L!=="stroke"||V||!S.call(this))&&(L==="stroke"||V||!y.call(this))){for(var K,Q,ee=[],ce=this.path,de=0;de<ce.length;de++){var pe=ce[de];switch(pe.type){case"begin":ee.push({begin:!0});break;case"close":ee.push({close:!0});break;case"mt":ee.push({start:pe,deltas:[],abs:[]});break;case"lt":var we=ee.length;if(ce[de-1]&&!isNaN(ce[de-1].x)&&(K=[pe.x-ce[de-1].x,pe.y-ce[de-1].y],we>0)){for(;we>=0;we--)if(ee[we-1].close!==!0&&ee[we-1].begin!==!0){ee[we-1].deltas.push(K),ee[we-1].abs.push(pe);break}}break;case"bct":K=[pe.x1-ce[de-1].x,pe.y1-ce[de-1].y,pe.x2-ce[de-1].x,pe.y2-ce[de-1].y,pe.x-ce[de-1].x,pe.y-ce[de-1].y],ee[ee.length-1].deltas.push(K);break;case"qct":var Ce=ce[de-1].x+2/3*(pe.x1-ce[de-1].x),ke=ce[de-1].y+2/3*(pe.y1-ce[de-1].y),Le=pe.x+2/3*(pe.x1-pe.x),Ge=pe.y+2/3*(pe.y1-pe.y),ye=pe.x,re=pe.y;K=[Ce-ce[de-1].x,ke-ce[de-1].y,Le-ce[de-1].x,Ge-ce[de-1].y,ye-ce[de-1].x,re-ce[de-1].y],ee[ee.length-1].deltas.push(K);break;case"arc":ee.push({deltas:[],abs:[],arc:!0}),Array.isArray(ee[ee.length-1].abs)&&ee[ee.length-1].abs.push(pe)}}Q=V?null:L==="stroke"?"stroke":"fill";for(var nt=!1,Oe=0;Oe<ee.length;Oe++)if(ee[Oe].arc)for(var Ie=ee[Oe].abs,Ee=0;Ee<Ie.length;Ee++){var Fe=Ie[Ee];Fe.type==="arc"?M.call(this,Fe.x,Fe.y,Fe.radius,Fe.startAngle,Fe.endAngle,Fe.counterclockwise,void 0,V,!nt):F.call(this,Fe.x,Fe.y),nt=!0}else if(ee[Oe].close===!0)this.pdf.internal.out("h"),nt=!1;else if(ee[Oe].begin!==!0){var Me=ee[Oe].start.x,He=ee[Oe].start.y;H.call(this,ee[Oe].deltas,Me,He),nt=!0}Q&&j.call(this,Q),V&&J.call(this)}},D=function(L){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-K;case"top":return L+V-K;case"hanging":return L+V-2*K;case"middle":return L+V/2-K;case"ideographic":return L;case"alphabetic":default:return L}},I=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(V,K){this.colorStops.push([V,K])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(L,V,K,Q,ee,ce,de,pe,we){for(var Ce=$.call(this,K,Q,ee,ce),ke=0;ke<Ce.length;ke++){var Le=Ce[ke];ke===0&&(we?E.call(this,Le.x1+L,Le.y1+V):F.call(this,Le.x1+L,Le.y1+V)),ie.call(this,L,V,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}pe?J.call(this):j.call(this,de)},j=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(L,V){this.pdf.internal.out(n(L)+" "+r(V)+" m")},k=function(L){var V;switch(L.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var K=this.pdf.getTextDimensions(L.text),Q=D.call(this,L.y),ee=I.call(this,Q)-K.h,ce=this.ctx.transform.applyToPoint(new s(L.x,Q)),de=this.ctx.transform.decompose(),pe=new l;pe=(pe=(pe=pe.multiply(de.translate)).multiply(de.skew)).multiply(de.scale);for(var we,Ce,ke,Le=this.ctx.transform.applyToRectangle(new a(L.x,Q,K.w,K.h)),Ge=pe.applyToRectangle(new a(L.x,ee,K.w,K.h)),ye=w.call(this,Ge),re=[],nt=0;nt<ye.length;nt+=1)re.indexOf(ye[nt])===-1&&re.push(ye[nt]);if(_(re),this.autoPaging)for(var Oe=re[0],Ie=re[re.length-1],Ee=Oe;Ee<Ie+1;Ee++){this.pdf.setPage(Ee);var Fe=Ee===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[2],Qe=He-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],st=ot-this.margin[3],dt=Ee===1?0:Me+(Ee-2)*Qe;if(this.ctx.clip_path.length!==0){var wt=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(we,this.posX+this.margin[3],-1*dt+Fe),P.call(this,"fill",!0),this.path=wt}var Ye=T([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-dt+Fe+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*L.scale),ke=this.lineWidth,this.lineWidth=ke*L.scale);var lt=this.autoPaging!=="text";if(lt||Ye.y+Ye.h<=He){if(lt||Ye.y>=Fe&&Ye.x<=ot){var Ue=lt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||ot-Ye.x)[0],nn=T([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-dt+Fe+this.ctx.prevPageLastElemOffset)[0],ht=lt&&(Ee>Oe||Ee<Ie)&&A.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,Qe,null).clip().discardPath()),this.pdf.text(Ue,nn.x,nn.y,{angle:L.angle,align:V,renderingMode:L.renderingMode}),ht&&this.pdf.restoreGraphicsState()}}else Ye.y<He&&(this.ctx.prevPageLastElemOffset+=He-Ye.y);L.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=ke)}else L.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*L.scale),ke=this.lineWidth,this.lineWidth=ke*L.scale),this.pdf.text(L.text,ce.x+this.posX,ce.y+this.posY,{angle:L.angle,align:V,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=ke)},F=function(L,V,K,Q){K=K||0,Q=Q||0,this.pdf.internal.out(n(L+K)+" "+r(V+Q)+" l")},H=function(L,V,K){return this.pdf.lines(L,V,K,null,null)},ie=function(L,V,K,Q,ee,ce,de,pe){this.pdf.internal.out([e(i(K+L)),e(o(Q+V)),e(i(ee+L)),e(o(ce+V)),e(i(de+L)),e(o(pe+V)),"c"].join(" "))},$=function(L,V,K,Q){for(var ee=2*Math.PI,ce=Math.PI/2;V>K;)V-=ee;var de=Math.abs(K-V);de<ee&&Q&&(de=ee-de);for(var pe=[],we=Q?-1:1,Ce=V;de>1e-5;){var ke=Ce+we*Math.min(de,ce);pe.push(q.call(this,L,Ce,ke)),de-=Math.abs(ke-Ce),Ce=ke}return pe},q=function(L,V,K){var Q=(K-V)/2,ee=L*Math.cos(Q),ce=L*Math.sin(Q),de=ee,pe=-ce,we=de*de+pe*pe,Ce=we+de*ee+pe*ce,ke=4/3*(Math.sqrt(2*we*Ce)-Ce)/(de*ce-pe*ee),Le=de-ke*pe,Ge=pe+ke*de,ye=Le,re=-Ge,nt=Q+V,Oe=Math.cos(nt),Ie=Math.sin(nt);return{x1:L*Math.cos(V),y1:L*Math.sin(V),x2:Le*Oe-Ge*Ie,y2:Le*Ie+Ge*Oe,x3:ye*Oe-re*Ie,y3:ye*Ie+re*Oe,x4:L*Math.cos(K),y4:L*Math.sin(K)}},z=function(L){return 180*L/Math.PI},X=function(L,V,K,Q,ee,ce){var de=L+.5*(K-L),pe=V+.5*(Q-V),we=ee+.5*(K-ee),Ce=ce+.5*(Q-ce),ke=Math.min(L,ee,de,we),Le=Math.max(L,ee,de,we),Ge=Math.min(V,ce,pe,Ce),ye=Math.max(V,ce,pe,Ce);return new a(ke,Ge,Le-ke,ye-Ge)},ne=function(L,V,K,Q,ee,ce,de,pe){var we,Ce,ke,Le,Ge,ye,re,nt,Oe,Ie,Ee,Fe,Me,He,Qe=K-L,ot=Q-V,st=ee-K,dt=ce-Q,wt=de-ee,Ye=pe-ce;for(Ce=0;Ce<41;Ce++)Oe=(re=(ke=L+(we=Ce/40)*Qe)+we*((Ge=K+we*st)-ke))+we*(Ge+we*(ee+we*wt-Ge)-re),Ie=(nt=(Le=V+we*ot)+we*((ye=Q+we*dt)-Le))+we*(ye+we*(ce+we*Ye-ye)-nt),Ce==0?(Ee=Oe,Fe=Ie,Me=Oe,He=Ie):(Ee=Math.min(Ee,Oe),Fe=Math.min(Fe,Ie),Me=Math.max(Me,Oe),He=Math.max(He,Ie));return new a(Math.round(Ee),Math.round(Fe),Math.round(Me-Ee),Math.round(He-Fe))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,V,K=(L=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:V}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(We.API),(function(t){var e=function(o){var s,a,l,c,h,m,v,y,S,A;for(a=[],l=0,c=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;c>l;l+=4)(h=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(m=(h=((h=((h=((h=(h-(A=h%85))/85)-(S=h%85))/85)-(y=h%85))/85)-(v=h%85))/85)%85,a.push(m+33,v+33,y+33,S+33,A+33)):a.push(122);return(function(w,N){for(var T=N;T>0;T--)w.pop()})(a,s.length),String.fromCharCode.apply(String,a)+"~>"},n=function(o){var s,a,l,c,h,m=String,v="length",y=255,S="charCodeAt",A="slice",w="replace";for(o[A](-2),o=o[A](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),l=[],c=0,h=(o+=s="uuuuu"[A](o[v]%5||5))[v];h>c;c+=5)a=52200625*(o[S](c)-33)+614125*(o[S](c+1)-33)+7225*(o[S](c+2)-33)+85*(o[S](c+3)-33)+(o[S](c+4)-33),l.push(y&a>>24,y&a>>16,y&a>>8,y&a);return(function(N,T){for(var _=T;_>0;_--)N.pop()})(l,s[v]),m.fromCharCode.apply(m,l)},r=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var a="",l=0;l<o.length;l+=2)a+=String.fromCharCode("0x"+(o[l]+o[l+1]));return a},i=function(o){for(var s=new Uint8Array(o.length),a=o.length;a--;)s[a]=o.charCodeAt(a);return o=(s=$l(s)).reduce((function(l,c){return l+String.fromCharCode(c)}),"")};t.processDataByFilters=function(o,s){var a=0,l=o||"",c=[];for(typeof(s=s||[])=="string"&&(s=[s]),a=0;a<s.length;a+=1)switch(s[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map((function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)})).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}})(We.API),(function(t){t.loadFile=function(e,n,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(l,c,h){var m=new XMLHttpRequest,v=0,y=function(S){var A=S.length,w=[],N=String.fromCharCode;for(v=0;v<A;v+=1)w.push(N(255&S.charCodeAt(v)));return w.join("")};if(m.open("GET",l,!c),m.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(m.onload=function(){m.status===200?h(y(this.responseText)):h(void 0)}),m.send(null),c&&m.status===200)return y(m.responseText)})(i,o,s)}catch{}return a})(e,n,r)},t.loadImageFile=t.loadFile})(We.API),(function(t){function e(){return(Je.html2canvas?Promise.resolve(Je.html2canvas):Il(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))})).then((function(s){return s.default?s.default:s}))}function n(){return(Je.DOMPurify?Promise.resolve(Je.DOMPurify):Il(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(s){return Promise.reject(new Error("Could not load dompurify: "+s))})).then((function(s){return s.default?s.default:s}))}var r=function(s){var a=bt(s);return a==="undefined"?"undefined":a==="string"||s instanceof String?"string":a==="number"||s instanceof Number?"number":a==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(s,a){var l=document.createElement(s);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},o=function s(a){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),c=s.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,s,1,[s])).set(a)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,a){return s.__proto__=a||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,a){return this.then((function(){switch(a=a||(function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(s)){case"string":return this.then(n).then((function(l){return this.set({src:i("div",{innerHTML:s,dompurify:l})})}));case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=(function l(c,h){for(var m=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)h!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||m.appendChild(l(v,h));return c.nodeType===1&&(c.nodeName==="CANVAS"?(m.width=c.width,m.height=c.height,m.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(m.value=c.value),m.addEventListener("load",(function(){m.scrollTop=c.scrollTop,m.scrollLeft=c.scrollLeft}),!0)),m})(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then((function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)})).then((function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then((function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var v=0;v<c.length;++v){var y=c[v],S=y.src.find((function(A){return A.format==="truetype"}));S&&l.addFont(S.url,y.ref.name,y.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),a(this.prop.container,m)})).then((function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(s,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,a):this.outputPdf(s,a)},o.prototype.outputPdf=function(s,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(s,a)}))},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}}))},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(s){if(r(s)!=="object")return this;var a=Object.keys(s||{}).map((function(l){if(l in o.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}}),this);return this.then((function(){return this.thenList(a)}))},o.prototype.get=function(s,a){return this.then((function(){var l=s in o.template.prop?this.prop[s]:this.opt[s];return a?a(l):l}))},o.prototype.setMargin=function(s){return this.then((function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s})).then(this.setPageSize)},o.prototype.setPageSize=function(s){function a(l,c){return Math.floor(l*c/72*96)}return this.then((function(){(s=s||We.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:a(s.inner.width,s.k),height:a(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s}))},o.prototype.setProgress=function(s,a,l,c){return s!=null&&(this.progress.val=s),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,a,l,c){return this.setProgress(s?this.progress.val+s:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},o.prototype.then=function(s,a){var l=this;return this.thenCore(s,a,(function(c,h){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,(function(m){return l.updateProgress(null,c),m})).then(c,h).then((function(m){return l.updateProgress(1),m}))}))},o.prototype.thenCore=function(s,a,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),h=l.call(c,s,a);return o.convert(h,this.__proto__)},o.prototype.thenExternal=function(s,a){return Promise.prototype.then.call(this,s,a)},o.prototype.thenList=function(s){var a=this;return s.forEach((function(l){a=a.thenCore(l)})),a},o.prototype.catch=function(s){s&&(s=s.bind(this));var a=Promise.prototype.catch.call(this,s);return o.convert(a,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then((function(){throw new Error(s)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,We.getPageSize=function(s,a,l){if(bt(s)==="object"){var c=s;s=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var h,m=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var y,S=0,A=0;if(v.hasOwnProperty(m))S=v[m][1]/h,A=v[m][0]/h;else try{S=l[1],A=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",A>S&&(y=A,A=S,S=y);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",S>A&&(y=A,A=S,S=y)}return{width:A,height:S,unit:a,k:h,orientation:s}},t.html=function(s,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Zl):null;var l=new o(a);return a.worker?l:l.from(s).doCallback()}})(We.API),We.API.addJS=function(t){return Pd=t,this.internal.events.subscribe("postPutResources",(function(){oa=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(oa+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ed=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Pd+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){oa!==void 0&&Ed!==void 0&&this.internal.out("/Names <</JavaScript "+oa+" 0 R>>")})),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,h=[];for(o=0;o<c;o++){var m=n.internal.newObject();h.push(m);var v=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var y=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<h.length;o++)n.internal.write("(page_"+(o+1)+")"+h[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+y+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var l=n.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(We.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,o,s,a){var l,c=this.decode.DCT_DECODE,h=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=s||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=(function(m){for(var v,y=256*m.charCodeAt(4)+m.charCodeAt(5),S=m.length,A={width:0,height:0,numcomponents:1},w=4;w<S;w+=2){if(w+=y,e.indexOf(m.charCodeAt(w+1))!==-1){v=256*m.charCodeAt(w+5)+m.charCodeAt(w+6),A={width:256*m.charCodeAt(w+7)+m.charCodeAt(w+8),height:v,numcomponents:m.charCodeAt(w+9)};break}y=256*m.charCodeAt(w+2)+m.charCodeAt(w+3)}return A})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return h}})(We.API);var io,sa,Ld,Rd,Md,Ov=(function(){var t,e,n;function r(o){var s,a,l,c,h,m,v,y,S,A,w,N,T,_;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(s=this.readUInt32(),S=(function(){var R,P;for(P=[],R=0;R<4;++R)P.push(String.fromCharCode(this.data[this.pos++]));return P}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),c=this.readUInt16()||100,m.delay=1e3*h/c,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(S==="fdAT"&&(this.pos+=4,s-=4),o=(m!=null?m.data:void 0)||this.imgData,N=0;0<=s?N<s:N>s;0<=s?++N:--N)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((A=l-this.transparency.indexed.length)>0)for(T=0;0<=A?T<A:T>A;0<=A?++T:--T)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":v=(w=this.read(s)).indexOf(0),y=String.fromCharCode.apply(String,w.slice(0,v)),this.text[y]=String.fromCharCode.apply(String,w.slice(v+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var s,a;for(a=[],s=0;0<=o?s<o:s>o;0<=o?++s:--s)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var s=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*s),l=0,c=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function h(m,v,y,S){var A,w,N,T,_,R,P,D,I,M,j,J,E,k,F,H,ie,$,q,z,X,ne=Math.ceil((c.width-m)/y),se=Math.ceil((c.height-v)/S),L=c.width==ne&&c.height==se;for(k=s*ne,J=L?a:new Uint8Array(k*se),R=o.length,E=0,w=0;E<se&&l<R;){switch(o[l++]){case 0:for(T=ie=0;ie<k;T=ie+=1)J[w++]=o[l++];break;case 1:for(T=$=0;$<k;T=$+=1)A=o[l++],_=T<s?0:J[w-s],J[w++]=(A+_)%256;break;case 2:for(T=q=0;q<k;T=q+=1)A=o[l++],N=(T-T%s)/s,F=E&&J[(E-1)*k+N*s+T%s],J[w++]=(F+A)%256;break;case 3:for(T=z=0;z<k;T=z+=1)A=o[l++],N=(T-T%s)/s,_=T<s?0:J[w-s],F=E&&J[(E-1)*k+N*s+T%s],J[w++]=(A+Math.floor((_+F)/2))%256;break;case 4:for(T=X=0;X<k;T=X+=1)A=o[l++],N=(T-T%s)/s,_=T<s?0:J[w-s],E===0?F=H=0:(F=J[(E-1)*k+N*s+T%s],H=N&&J[(E-1)*k+(N-1)*s+T%s]),P=_+F-H,D=Math.abs(P-_),M=Math.abs(P-F),j=Math.abs(P-H),I=D<=M&&D<=j?_:M<=j?F:H,J[w++]=(A+I)%256;break;default:throw new Error("Invalid filter algorithm: "+o[l-1])}if(!L){var V=((v+E*S)*c.width+m)*s,K=E*k;for(T=0;T<ne;T+=1){for(var Q=0;Q<s;Q+=1)a[V++]=J[K++];V+=(y-1)*s}}E++}}return o=yv(o),c.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},r.prototype.decodePalette=function(){var o,s,a,l,c,h,m,v,y;for(a=this.palette,h=this.transparency.indexed||[],c=new Uint8Array((h.length||0)+a.length),l=0,o=0,s=m=0,v=a.length;m<v;s=m+=3)c[l++]=a[s],c[l++]=a[s+1],c[l++]=a[s+2],c[l++]=(y=h[o++])!=null?y:255;return c},r.prototype.copyToImageData=function(o,s){var a,l,c,h,m,v,y,S,A,w,N;if(l=this.colors,A=null,a=this.hasAlphaChannel,this.palette.length&&(A=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),l=4,a=!0),S=(c=o.data||o).length,m=A||s,h=v=0,l===1)for(;h<S;)y=A?4*s[h/4]:v,w=m[y++],c[h++]=w,c[h++]=w,c[h++]=w,c[h++]=a?m[y++]:255,v=y;else for(;h<S;)y=A?4*s[h/4]:v,c[h++]=m[y++],c[h++]=m[y++],c[h++]=m[y++],c[h++]=a?m[y++]:255,v=y},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(Je)==="[object Window]"){try{e=Je.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(o){var s;if(i()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var s,a,l,c,h,m,v,y;if(this.animation){for(y=[],a=h=0,m=(v=this.animation.frames).length;h<m;a=++h)s=v[a],l=o.createImageData(s.width,s.height),c=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,c),s.imageData=l,y.push(s.image=t(l));return y}},r.prototype.renderFrame=function(o,s){var a,l,c;return a=(l=this.animation.frames)[s],c=l[s-1],s===0&&o.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?o.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&o.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&o.clearRect(a.xOffset,a.yOffset,a.width,a.height),o.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(o){var s,a,l,c,h,m,v=this;return a=0,m=this.animation,c=m.numFrames,l=m.frames,h=m.numPlays,(s=function(){var y,S;if(y=a++%c,S=l[y],v.renderFrame(o,y),c>1&&a/c<h)return v.animation._timeout=setTimeout(s,S.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var s,a;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,s=o.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(a=s.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),s.putImageData(a,0,0))},r})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Hv(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,s=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;o&&(a=e,l=s,e+=3*s);var c=!0,h=[],m=0,v=null,y=0,S=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,S=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var A=t[e++];m=t[e++]|t[e++]<<8,v=t[e++],(1&A)==0&&(v=null),y=A>>2&7,e++;break;case 254:for(;;){if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var w=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,R=t[e++],P=R>>6&1,D=1<<(7&R)+1,I=a,M=l,j=!1;R>>7&&(j=!0,I=e,M=D,e+=3*D);var J=e;for(e++;;){var E;if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}h.push({x:w,y:N,width:T,height:_,has_local_palette:j,palette_offset:I,palette_size:M,data_offset:J,data_length:e-J,transparent_index:v,interlaced:!!P,delay:m,disposal:y});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return S},this.frameInfo=function(k){if(k<0||k>=h.length)throw new Error("Frame index out of range.");return h[k]},this.decodeAndBlitFrameBGRA=function(k,F){var H=this.frameInfo(k),ie=H.width*H.height,$=new Uint8Array(ie);Dd(t,H.data_offset,$,ie);var q=H.palette_offset,z=H.transparent_index;z===null&&(z=256);var X=H.width,ne=n-X,se=X,L=4*(H.y*n+H.x),V=4*((H.y+H.height)*n+H.x),K=L,Q=4*ne;H.interlaced===!0&&(Q+=4*n*7);for(var ee=8,ce=0,de=$.length;ce<de;++ce){var pe=$[ce];if(se===0&&(se=X,(K+=Q)>=V&&(Q=4*ne+4*n*(ee-1),K=L+(X+ne)*(ee<<1),ee>>=1)),pe===z)K+=4;else{var we=t[q+3*pe],Ce=t[q+3*pe+1],ke=t[q+3*pe+2];F[K++]=ke,F[K++]=Ce,F[K++]=we,F[K++]=255}--se}},this.decodeAndBlitFrameRGBA=function(k,F){var H=this.frameInfo(k),ie=H.width*H.height,$=new Uint8Array(ie);Dd(t,H.data_offset,$,ie);var q=H.palette_offset,z=H.transparent_index;z===null&&(z=256);var X=H.width,ne=n-X,se=X,L=4*(H.y*n+H.x),V=4*((H.y+H.height)*n+H.x),K=L,Q=4*ne;H.interlaced===!0&&(Q+=4*n*7);for(var ee=8,ce=0,de=$.length;ce<de;++ce){var pe=$[ce];if(se===0&&(se=X,(K+=Q)>=V&&(Q=4*ne+4*n*(ee-1),K=L+(X+ne)*(ee<<1),ee>>=1)),pe===z)K+=4;else{var we=t[q+3*pe],Ce=t[q+3*pe+1],ke=t[q+3*pe+2];F[K++]=we,F[K++]=Ce,F[K++]=ke,F[K++]=255}--se}}}function Dd(t,e,n,r){for(var i=t[e++],o=1<<i,s=o+1,a=s+1,l=i+1,c=(1<<l)-1,h=0,m=0,v=0,y=t[e++],S=new Int32Array(4096),A=null;;){for(;h<16&&y!==0;)m|=t[e++]<<h,h+=8,y===1?y=t[e++]:--y;if(h<l)break;var w=m&c;if(m>>=l,h-=l,w!==o){if(w===s)break;for(var N=w<a?w:A,T=0,_=N;_>o;)_=S[_]>>8,++T;var R=_;if(v+T+(N!==w?1:0)>r)return void At.log("Warning, gif stream longer than expected.");n[v++]=R;var P=v+=T;for(N!==w&&(n[v++]=R),_=N;T--;)_=S[_],n[--P]=255&_,_>>=8;A!==null&&a<4096&&(S[a++]=A<<8|R,a>=c+1&&l<12&&(++l,c=c<<1|1)),A=w}else a=s+1,c=(1<<(l=i+1))-1,A=null}return v!==r&&At.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Tl(t){var e,n,r,i,o,s=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),h=new Array(64),m=new Array(65535),v=new Array(65535),y=new Array(64),S=new Array(64),A=[],w=0,N=7,T=new Array(64),_=new Array(64),R=new Array(64),P=new Array(256),D=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(L,V){for(var K=0,Q=0,ee=new Array,ce=1;ce<=16;ce++){for(var de=1;de<=L[ce];de++)ee[V[Q]]=[],ee[V[Q]][0]=K,ee[V[Q]][1]=ce,Q++,K++;K*=2}return ee}function q(L){for(var V=L[0],K=L[1]-1;K>=0;)V&1<<K&&(w|=1<<N),K--,--N<0&&(w==255?(z(255),z(0)):z(w),N=7,w=0)}function z(L){A.push(L)}function X(L){z(L>>8&255),z(255&L)}function ne(L,V,K,Q,ee){for(var ce,de=ee[0],pe=ee[240],we=(function(Ie,Ee){var Fe,Me,He,Qe,ot,st,dt,wt,Ye,lt,Ue=0;for(Ye=0;Ye<8;++Ye){Fe=Ie[Ue],Me=Ie[Ue+1],He=Ie[Ue+2],Qe=Ie[Ue+3],ot=Ie[Ue+4],st=Ie[Ue+5],dt=Ie[Ue+6];var nn=Fe+(wt=Ie[Ue+7]),ht=Fe-wt,qn=Me+dt,St=Me-dt,kt=He+st,or=He-st,mt=Qe+ot,oi=Qe-ot,Pt=nn+mt,On=nn-mt,xr=qn+kt,Lt=qn-kt;Ie[Ue]=Pt+xr,Ie[Ue+4]=Pt-xr;var Ze=.707106781*(Lt+On);Ie[Ue+2]=On+Ze,Ie[Ue+6]=On-Ze;var vt=.382683433*((Pt=oi+or)-(Lt=St+ht)),si=.5411961*Pt+vt,Zt=1.306562965*Lt+vt,sr=.707106781*(xr=or+St),ar=ht+sr,$e=ht-sr;Ie[Ue+5]=$e+si,Ie[Ue+3]=$e-si,Ie[Ue+1]=ar+Zt,Ie[Ue+7]=ar-Zt,Ue+=8}for(Ue=0,Ye=0;Ye<8;++Ye){Fe=Ie[Ue],Me=Ie[Ue+8],He=Ie[Ue+16],Qe=Ie[Ue+24],ot=Ie[Ue+32],st=Ie[Ue+40],dt=Ie[Ue+48];var Hn=Fe+(wt=Ie[Ue+56]),lr=Fe-wt,vn=Me+dt,Wt=Me-dt,Ht=He+st,_n=He-st,Ii=Qe+ot,br=Qe-ot,Vn=Hn+Ii,Gn=Hn-Ii,zn=vn+Ht,cr=vn-Ht;Ie[Ue]=Vn+zn,Ie[Ue+32]=Vn-zn;var En=.707106781*(cr+Gn);Ie[Ue+16]=Gn+En,Ie[Ue+48]=Gn-En;var ur=.382683433*((Vn=br+_n)-(cr=Wt+lr)),ai=.5411961*Vn+ur,ki=1.306562965*cr+ur,Ei=.707106781*(zn=_n+Wt),Pi=lr+Ei,Li=lr-Ei;Ie[Ue+40]=Li+ai,Ie[Ue+24]=Li-ai,Ie[Ue+8]=Pi+ki,Ie[Ue+56]=Pi-ki,Ue++}for(Ye=0;Ye<64;++Ye)lt=Ie[Ye]*Ee[Ye],y[Ye]=lt>0?lt+.5|0:lt-.5|0;return y})(L,V),Ce=0;Ce<64;++Ce)S[I[Ce]]=we[Ce];var ke=S[0]-K;K=S[0],ke==0?q(Q[0]):(q(Q[v[ce=32767+ke]]),q(m[ce]));for(var Le=63;Le>0&&S[Le]==0;)Le--;if(Le==0)return q(de),K;for(var Ge,ye=1;ye<=Le;){for(var re=ye;S[ye]==0&&ye<=Le;)++ye;var nt=ye-re;if(nt>=16){Ge=nt>>4;for(var Oe=1;Oe<=Ge;++Oe)q(pe);nt&=15}ce=32767+S[ye],q(ee[(nt<<4)+v[ce]]),q(m[ce]),ye++}return Le!=63&&q(de),K}function se(L){L=Math.min(Math.max(L,1),100),o!=L&&((function(V){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var ee=s((K[Q]*V+50)/100);ee=Math.min(Math.max(ee,1),255),a[I[Q]]=ee}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var pe=s((ce[de]*V+50)/100);pe=Math.min(Math.max(pe,1),255),l[I[de]]=pe}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,ke=0;ke<8;ke++)for(var Le=0;Le<8;Le++)c[Ce]=1/(a[I[Ce]]*we[ke]*we[Le]*8),h[Ce]=1/(l[I[Ce]]*we[ke]*we[Le]*8),Ce++})(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),o=L)}this.encode=function(L,V){V&&se(V),A=new Array,w=0,N=7,X(65496),X(65504),X(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),X(1),X(1),z(0),z(0),(function(){X(65499),X(132),z(0);for(var Me=0;Me<64;Me++)z(a[Me]);z(1);for(var He=0;He<64;He++)z(l[He])})(),(function(Me,He){X(65472),X(17),z(8),X(He),X(Me),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)})(L.width,L.height),(function(){X(65476),X(418),z(0);for(var Me=0;Me<16;Me++)z(M[Me+1]);for(var He=0;He<=11;He++)z(j[He]);z(16);for(var Qe=0;Qe<16;Qe++)z(J[Qe+1]);for(var ot=0;ot<=161;ot++)z(E[ot]);z(1);for(var st=0;st<16;st++)z(k[st+1]);for(var dt=0;dt<=11;dt++)z(F[dt]);z(17);for(var wt=0;wt<16;wt++)z(H[wt+1]);for(var Ye=0;Ye<=161;Ye++)z(ie[Ye])})(),X(65498),X(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var K=0,Q=0,ee=0;w=0,N=7,this.encode.displayName="_encode_";for(var ce,de,pe,we,Ce,ke,Le,Ge,ye,re=L.data,nt=L.width,Oe=L.height,Ie=4*nt,Ee=0;Ee<Oe;){for(ce=0;ce<Ie;){for(Ce=Ie*Ee+ce,Le=-1,Ge=0,ye=0;ye<64;ye++)ke=Ce+(Ge=ye>>3)*Ie+(Le=4*(7&ye)),Ee+Ge>=Oe&&(ke-=Ie*(Ee+1+Ge-Oe)),ce+Le>=Ie&&(ke-=ce+Le-Ie+4),de=re[ke++],pe=re[ke++],we=re[ke++],T[ye]=(D[de]+D[pe+256>>0]+D[we+512>>0]>>16)-128,_[ye]=(D[de+768>>0]+D[pe+1024>>0]+D[we+1280>>0]>>16)-128,R[ye]=(D[de+1280>>0]+D[pe+1536>>0]+D[we+1792>>0]>>16)-128;K=ne(T,c,K,e,r),Q=ne(_,h,Q,n,i),ee=ne(R,h,ee,n,i),ce+=32}Ee+=8}if(N>=0){var Fe=[];Fe[1]=N+1,Fe[0]=(1<<N+1)-1,q(Fe)}return X(65497),new Uint8Array(A)},t=t||50,(function(){for(var L=String.fromCharCode,V=0;V<256;V++)P[V]=L(V)})(),e=$(M,j),n=$(k,F),r=$(J,E),i=$(H,ie),(function(){for(var L=1,V=2,K=1;K<=15;K++){for(var Q=L;Q<V;Q++)v[32767+Q]=K,m[32767+Q]=[],m[32767+Q][1]=K,m[32767+Q][0]=Q;for(var ee=-(V-1);ee<=-L;ee++)v[32767+ee]=K,m[32767+ee]=[],m[32767+ee][1]=K,m[32767+ee][0]=V-1+ee;L<<=1,V<<=1}})(),(function(){for(var L=0;L<256;L++)D[L]=19595*L,D[L+256>>0]=38470*L,D[L+512>>0]=7471*L+32768,D[L+768>>0]=-11059*L,D[L+1024>>0]=-21709*L,D[L+1280>>0]=32768*L+8421375,D[L+1536>>0]=-27439*L,D[L+1792>>0]=-5329*L})(),se(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Qn(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Fd(t){function e(M){if(!M)throw Error("assert :P")}function n(M,j,J){for(var E=0;4>E;E++)if(M[j+E]!=J.charCodeAt(E))return!0;return!1}function r(M,j,J,E,k){for(var F=0;F<k;F++)M[j+F]=J[E+F]}function i(M,j,J,E){for(var k=0;k<E;k++)M[j+k]=J}function o(M){return new Int32Array(M)}function s(M,j){for(var J=[],E=0;E<M;E++)J.push(new j);return J}function a(M,j){var J=[];return(function E(k,F,H){for(var ie=H[F],$=0;$<ie&&(k.push(H.length>F+1?[]:new j),!(H.length<F+1));$++)E(k[$],F+1,H)})(J,0,M),J}var l=function(){var M=this;function j(d,g){for(var b=1<<g-1>>>0;d&b;)b>>>=1;return b?(d&b-1)+b:d}function J(d,g,b,C,U){e(!(C%b));do d[g+(C-=b)]=U;while(0<C)}function E(d,g,b,C,U){if(e(2328>=U),512>=U)var O=o(512);else if((O=o(U))==null)return 0;return(function(G,W,Y,Z,ae,ge){var me,fe,_e=W,ve=1<<Y,le=o(16),ue=o(16);for(e(ae!=0),e(Z!=null),e(G!=null),e(0<Y),fe=0;fe<ae;++fe){if(15<Z[fe])return 0;++le[Z[fe]]}if(le[0]==ae)return 0;for(ue[1]=0,me=1;15>me;++me){if(le[me]>1<<me)return 0;ue[me+1]=ue[me]+le[me]}for(fe=0;fe<ae;++fe)me=Z[fe],0<Z[fe]&&(ge[ue[me]++]=fe);if(ue[15]==1)return(Z=new k).g=0,Z.value=ge[0],J(G,_e,1,ve,Z),ve;var Ne,Ae=-1,Se=ve-1,Be=0,Pe=1,ze=1,Re=1<<Y;for(fe=0,me=1,ae=2;me<=Y;++me,ae<<=1){if(Pe+=ze<<=1,0>(ze-=le[me]))return 0;for(;0<le[me];--le[me])(Z=new k).g=me,Z.value=ge[fe++],J(G,_e+Be,ae,Re,Z),Be=j(Be,me)}for(me=Y+1,ae=2;15>=me;++me,ae<<=1){if(Pe+=ze<<=1,0>(ze-=le[me]))return 0;for(;0<le[me];--le[me]){if(Z=new k,(Be&Se)!=Ae){for(_e+=Re,Ne=1<<(Ae=me)-Y;15>Ae&&!(0>=(Ne-=le[Ae]));)++Ae,Ne<<=1;ve+=Re=1<<(Ne=Ae-Y),G[W+(Ae=Be&Se)].g=Ne+Y,G[W+Ae].value=_e-W-Ae}Z.g=me-Y,Z.value=ge[fe++],J(G,_e+(Be>>Y),ae,Re,Z),Be=j(Be,me)}}return Pe!=2*ue[15]-1?0:ve})(d,g,b,C,U,O)}function k(){this.value=this.g=0}function F(){this.value=this.g=0}function H(){this.G=s(5,k),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(en,F)}function ie(d,g,b,C){e(d!=null),e(g!=null),e(2147483648>C),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=g,d.pa=b,d.Jd=g,d.Yc=b+C,d.Zc=4<=C?b+C-4+1:b,ce(d)}function $(d,g){for(var b=0;0<g--;)b|=pe(d,128)<<g;return b}function q(d,g){var b=$(d,g);return de(d)?-b:b}function z(d,g,b,C){var U,O=0;for(e(d!=null),e(g!=null),e(4294967288>C),d.Sb=C,d.Ra=0,d.u=0,d.h=0,4<C&&(C=4),U=0;U<C;++U)O+=g[b+U]<<8*U;d.Ra=O,d.bb=C,d.oa=g,d.pa=b}function X(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<$i-8>>>0,++d.bb,d.u-=8;K(d)&&(d.h=1,d.u=0)}function ne(d,g){if(e(0<=g),!d.h&&g<=Wi){var b=V(d)&zi[g];return d.u+=g,X(d),b}return d.h=1,d.u=0}function se(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(d){return d.Ra>>>(d.u&$i-1)>>>0}function K(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>$i}function Q(d,g){d.u=g,d.h=K(d)}function ee(d){d.u>=Fo&&(e(d.u>=Fo),X(d))}function ce(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function de(d){return $(d,1)}function pe(d,g){var b=d.Ca;0>d.b&&ce(d);var C=d.b,U=b*g>>>8,O=(d.I>>>C>U)+0;for(O?(b-=U,d.I-=U+1<<C>>>0):b=U+1,C=b,U=0;256<=C;)U+=8,C>>=8;return C=7^U+xn[C],d.b-=C,d.Ca=(b<<C)-1,O}function we(d,g,b){d[g+0]=b>>24&255,d[g+1]=b>>16&255,d[g+2]=b>>8&255,d[g+3]=b>>0&255}function Ce(d,g){return d[g+0]<<0|d[g+1]<<8}function ke(d,g){return Ce(d,g)|d[g+2]<<16}function Le(d,g){return Ce(d,g)|Ce(d,g+2)<<16}function Ge(d,g){var b=1<<g;return e(d!=null),e(0<g),d.X=o(b),d.X==null?0:(d.Mb=32-g,d.Xa=g,1)}function ye(d,g){e(d!=null),e(g!=null),e(d.Xa==g.Xa),r(g.X,0,d.X,0,1<<g.Xa)}function re(){this.X=[],this.Xa=this.Mb=0}function nt(d,g,b,C){e(b!=null),e(C!=null);var U=b[0],O=C[0];return U==0&&(U=(d*O+g/2)/g),O==0&&(O=(g*U+d/2)/d),0>=U||0>=O?0:(b[0]=U,C[0]=O,1)}function Oe(d,g){return d+(1<<g)-1>>>g}function Ie(d,g){return((4278255360&d)+(4278255360&g)>>>0&4278255360)+((16711935&d)+(16711935&g)>>>0&16711935)>>>0}function Ee(d,g){M[g]=function(b,C,U,O,G,W,Y){var Z;for(Z=0;Z<G;++Z){var ae=M[d](W[Y+Z-1],U,O+Z);W[Y+Z]=Ie(b[C+Z],ae)}}}function Fe(){this.ud=this.hd=this.jd=0}function Me(d,g){return((4278124286&(d^g))>>>1)+(d&g)>>>0}function He(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Qe(d,g){return He(d+(d-g+.5>>1))}function ot(d,g,b){return Math.abs(g-b)-Math.abs(d-b)}function st(d,g,b,C,U,O,G){for(C=O[G-1],b=0;b<U;++b)O[G+b]=C=Ie(d[g+b],C)}function dt(d,g,b,C,U){var O;for(O=0;O<b;++O){var G=d[g+O],W=G>>8&255,Y=16711935&(Y=(Y=16711935&G)+((W<<16)+W));C[U+O]=(4278255360&G)+Y>>>0}}function wt(d,g){g.jd=d>>0&255,g.hd=d>>8&255,g.ud=d>>16&255}function Ye(d,g,b,C,U,O){var G;for(G=0;G<C;++G){var W=g[b+G],Y=W>>>8,Z=W,ae=255&(ae=(ae=W>>>16)+((d.jd<<24>>24)*(Y<<24>>24)>>>5));Z=255&(Z=(Z=Z+((d.hd<<24>>24)*(Y<<24>>24)>>>5))+((d.ud<<24>>24)*(ae<<24>>24)>>>5)),U[O+G]=(4278255360&W)+(ae<<16)+Z}}function lt(d,g,b,C,U){M[g]=function(O,G,W,Y,Z,ae,ge,me,fe){for(Y=ge;Y<me;++Y)for(ge=0;ge<fe;++ge)Z[ae++]=U(W[C(O[G++])])},M[d]=function(O,G,W,Y,Z,ae,ge){var me=8>>O.b,fe=O.Ea,_e=O.K[0],ve=O.w;if(8>me)for(O=(1<<O.b)-1,ve=(1<<me)-1;G<W;++G){var le,ue=0;for(le=0;le<fe;++le)le&O||(ue=C(Y[Z++])),ae[ge++]=U(_e[ue&ve]),ue>>=me}else M["VP8LMapColor"+b](Y,Z,_e,ve,ae,ge,G,W,fe)}}function Ue(d,g,b,C,U){for(b=g+b;g<b;){var O=d[g++];C[U++]=O>>16&255,C[U++]=O>>8&255,C[U++]=O>>0&255}}function nn(d,g,b,C,U){for(b=g+b;g<b;){var O=d[g++];C[U++]=O>>16&255,C[U++]=O>>8&255,C[U++]=O>>0&255,C[U++]=O>>24&255}}function ht(d,g,b,C,U){for(b=g+b;g<b;){var O=(G=d[g++])>>16&240|G>>12&15,G=G>>0&240|G>>28&15;C[U++]=O,C[U++]=G}}function qn(d,g,b,C,U){for(b=g+b;g<b;){var O=(G=d[g++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;C[U++]=O,C[U++]=G}}function St(d,g,b,C,U){for(b=g+b;g<b;){var O=d[g++];C[U++]=O>>0&255,C[U++]=O>>8&255,C[U++]=O>>16&255}}function kt(d,g,b,C,U,O){if(O==0)for(b=g+b;g<b;)we(C,((O=d[g++])[0]>>24|O[1]>>8&65280|O[2]<<8&16711680|O[3]<<24)>>>0),U+=32;else r(C,U,d,g,b)}function or(d,g){M[g][0]=M[d+"0"],M[g][1]=M[d+"1"],M[g][2]=M[d+"2"],M[g][3]=M[d+"3"],M[g][4]=M[d+"4"],M[g][5]=M[d+"5"],M[g][6]=M[d+"6"],M[g][7]=M[d+"7"],M[g][8]=M[d+"8"],M[g][9]=M[d+"9"],M[g][10]=M[d+"10"],M[g][11]=M[d+"11"],M[g][12]=M[d+"12"],M[g][13]=M[d+"13"],M[g][14]=M[d+"0"],M[g][15]=M[d+"0"]}function mt(d){return d==nl||d==rl||d==Us||d==il}function oi(){this.eb=[],this.size=this.A=this.fb=0}function Pt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function On(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new oi,this.f.kb=new Pt,this.sd=null}function xr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ze(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function vt(d,g){var b=d.T,C=g.ba.f.RGBA,U=C.eb,O=C.fb+d.ka*C.A,G=Fn[g.ba.S],W=d.y,Y=d.O,Z=d.f,ae=d.N,ge=d.ea,me=d.W,fe=g.cc,_e=g.dc,ve=g.Mc,le=g.Nc,ue=d.ka,Ne=d.ka+d.T,Ae=d.U,Se=Ae+1>>1;for(ue==0?G(W,Y,null,null,Z,ae,ge,me,Z,ae,ge,me,U,O,null,null,Ae):(G(g.ec,g.fc,W,Y,fe,_e,ve,le,Z,ae,ge,me,U,O-C.A,U,O,Ae),++b);ue+2<Ne;ue+=2)fe=Z,_e=ae,ve=ge,le=me,ae+=d.Rc,me+=d.Rc,O+=2*C.A,G(W,(Y+=2*d.fa)-d.fa,W,Y,fe,_e,ve,le,Z,ae,ge,me,U,O-C.A,U,O,Ae);return Y+=d.fa,d.j+Ne<d.o?(r(g.ec,g.fc,W,Y,Ae),r(g.cc,g.dc,Z,ae,Se),r(g.Mc,g.Nc,ge,me,Se),b--):1&Ne||G(W,Y,null,null,Z,ae,ge,me,Z,ae,ge,me,U,O+C.A,null,null,Ae),b}function si(d,g,b){var C=d.F,U=[d.J];if(C!=null){var O=d.U,G=g.ba.S,W=G==Fs||G==Us;g=g.ba.f.RGBA;var Y=[0],Z=d.ka;Y[0]=d.T,d.Kb&&(Z==0?--Y[0]:(--Z,U[0]-=d.width),d.j+d.ka+d.T==d.o&&(Y[0]=d.o-d.j-Z));var ae=g.eb;Z=g.fb+Z*g.A,d=Tt(C,U[0],d.width,O,Y,ae,Z+(W?0:3),g.A),e(b==Y),d&&mt(G)&&Mn(ae,Z,W,O,Y,g.A)}return 0}function Zt(d){var g=d.ma,b=g.ba.S,C=11>b,U=b==Ms||b==Ds||b==Fs||b==tl||b==12||mt(b);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Mo(g.Oa,d,U?11:12))return 0;if(U&&mt(b)&&Te(),d.da)alert("todo:use_scaling");else{if(C){if(g.Ib=Ze,d.Kb){if(b=d.U+1>>1,g.memory=o(d.U+2*b),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+d.U,g.Mc=g.cc,g.Nc=g.dc+b,g.Ib=vt,Te()}}else alert("todo:EmitYUV");U&&(g.Jb=si,C&&he())}if(C&&!Nc){for(d=0;256>d;++d)wh[d]=89858*(d-128)+Bs>>js,_h[d]=-22014*(d-128)+Bs,Sh[d]=-45773*(d-128),Nh[d]=113618*(d-128)+Bs>>js;for(d=Vo;d<al;++d)g=76283*(d-16)+Bs>>js,Ah[d-Vo]=An(g,255),Ch[d-Vo]=An(g+8>>4,15);Nc=1}return 1}function sr(d){var g=d.ma,b=d.U,C=d.T;return e(!(1&d.ka)),0>=b||0>=C?0:(b=g.Ib(d,g),g.Jb!=null&&g.Jb(d,g,b),g.Dc+=b,1)}function ar(d){d.ma.memory=null}function $e(d,g,b,C){return ne(d,8)!=47?0:(g[0]=ne(d,14)+1,b[0]=ne(d,14)+1,C[0]=ne(d,1),ne(d,3)!=0?0:!d.h)}function Hn(d,g){if(4>d)return d+1;var b=d-2>>1;return(2+(1&d)<<b)+ne(g,b)+1}function lr(d,g){return 120<g?g-120:1<=(b=((b=ah[g-1])>>4)*d+(8-(15&b)))?b:1;var b}function vn(d,g,b){var C=V(b),U=d[g+=255&C].g-8;return 0<U&&(Q(b,b.u+8),C=V(b),g+=d[g].value,g+=C&(1<<U)-1),Q(b,b.u+d[g].g),d[g].value}function Wt(d,g,b){return b.g+=d.g,b.value+=d.value<<g>>>0,e(8>=b.g),d.g}function Ht(d,g,b){var C=d.xc;return e((g=C==0?0:d.vc[d.md*(b>>C)+(g>>C)])<d.Wb),d.Ya[g]}function _n(d,g,b,C){var U=d.ab,O=d.c*g,G=d.C;g=G+g;var W=b,Y=C;for(C=d.Ta,b=d.Ua;0<U--;){var Z=d.gc[U],ae=G,ge=g,me=W,fe=Y,_e=(Y=C,W=b,Z.Ea);switch(e(ae<ge),e(ge<=Z.nc),Z.hc){case 2:Ts(me,fe,(ge-ae)*_e,Y,W);break;case 0:var ve=ae,le=ge,ue=Y,Ne=W,Ae=(Re=Z).Ea;ve==0&&(Za(me,fe,null,null,1,ue,Ne),st(me,fe+1,0,0,Ae-1,ue,Ne+1),fe+=Ae,Ne+=Ae,++ve);for(var Se=1<<Re.b,Be=Se-1,Pe=Oe(Ae,Re.b),ze=Re.K,Re=Re.w+(ve>>Re.b)*Pe;ve<le;){var gt=ze,yt=Re,ft=1;for(Uo(me,fe,ue,Ne-Ae,1,ue,Ne);ft<Ae;){var ct=(ft&~Be)+Se;ct>Ae&&(ct=Ae),(0,jr[gt[yt++]>>8&15])(me,fe+ +ft,ue,Ne+ft-Ae,ct-ft,ue,Ne+ft),ft=ct}fe+=Ae,Ne+=Ae,++ve&Be||(Re+=Pe)}ge!=Z.nc&&r(Y,W-_e,Y,W+(ge-ae-1)*_e,_e);break;case 1:for(_e=me,le=fe,Ae=(me=Z.Ea)-(Ne=me&~(ue=(fe=1<<Z.b)-1)),ve=Oe(me,Z.b),Se=Z.K,Z=Z.w+(ae>>Z.b)*ve;ae<ge;){for(Be=Se,Pe=Z,ze=new Fe,Re=le+Ne,gt=le+me;le<Re;)wt(Be[Pe++],ze),fi(ze,_e,le,fe,Y,W),le+=fe,W+=fe;le<gt&&(wt(Be[Pe++],ze),fi(ze,_e,le,Ae,Y,W),le+=Ae,W+=Ae),++ae&ue||(Z+=ve)}break;case 3:if(me==Y&&fe==W&&0<Z.b){for(le=Y,me=_e=W+(ge-ae)*_e-(Ne=(ge-ae)*Oe(Z.Ea,Z.b)),fe=Y,ue=W,ve=[],Ne=(Ae=Ne)-1;0<=Ne;--Ne)ve[Ne]=fe[ue+Ne];for(Ne=Ae-1;0<=Ne;--Ne)le[me+Ne]=ve[Ne];Pn(Z,ae,ge,Y,_e,Y,W)}else Pn(Z,ae,ge,me,fe,Y,W)}W=C,Y=b}Y!=b&&r(C,b,W,Y,O)}function Ii(d,g){var b=d.V,C=d.Ba+d.c*d.C,U=g-d.C;if(e(g<=d.l.o),e(16>=U),0<U){var O=d.l,G=d.Ta,W=d.Ua,Y=O.width;if(_n(d,U,b,C),U=W=[W],e((b=d.C)<(C=g)),e(O.v<O.va),C>O.o&&(C=O.o),b<O.j){var Z=O.j-b;b=O.j,U[0]+=Z*Y}if(b>=C?b=0:(U[0]+=4*O.v,O.ka=b-O.j,O.U=O.va-O.v,O.T=C-b,b=1),b){if(W=W[0],11>(b=d.ca).S){var ae=b.f.RGBA,ge=(C=b.S,U=O.U,O=O.T,Z=ae.eb,ae.A),me=O;for(ae=ae.fb+d.Ma*ae.A;0<me--;){var fe=G,_e=W,ve=U,le=Z,ue=ae;switch(C){case Rs:bn(fe,_e,ve,le,ue);break;case Ms:fn(fe,_e,ve,le,ue);break;case nl:fn(fe,_e,ve,le,ue),Mn(le,ue,0,ve,1,0);break;case hc:_r(fe,_e,ve,le,ue);break;case Ds:kt(fe,_e,ve,le,ue,1);break;case rl:kt(fe,_e,ve,le,ue,1),Mn(le,ue,0,ve,1,0);break;case Fs:kt(fe,_e,ve,le,ue,0);break;case Us:kt(fe,_e,ve,le,ue,0),Mn(le,ue,1,ve,1,0);break;case tl:Br(fe,_e,ve,le,ue);break;case il:Br(fe,_e,ve,le,ue),Ct(le,ue,ve,1,0);break;case pc:Sr(fe,_e,ve,le,ue);break;default:e(0)}W+=Y,ae+=ge}d.Ma+=O}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=b.height)}}d.C=g,e(d.C<=d.i)}function br(d){var g;if(0<d.ua)return 0;for(g=0;g<d.Wb;++g){var b=d.Ya[g].G,C=d.Ya[g].H;if(0<b[1][C[1]+0].g||0<b[2][C[2]+0].g||0<b[3][C[3]+0].g)return 0}return 1}function Vn(d,g,b,C,U,O){if(d.Z!=0){var G=d.qd,W=d.rd;for(e(Vr[d.Z]!=null);g<b;++g)Vr[d.Z](G,W,C,U,C,U,O),G=C,W=U,U+=O;d.qd=G,d.rd=W}}function Gn(d,g){var b=d.l.ma,C=b.Z==0||b.Z==1?d.l.j:d.C;if(C=d.C<C?C:d.C,e(g<=d.l.o),g>C){var U=d.l.width,O=b.ca,G=b.tb+U*C,W=d.V,Y=d.Ba+d.c*C,Z=d.gc;e(d.ab==1),e(Z[0].hc==3),Is(Z[0],C,g,W,Y,O,G),Vn(b,C,g,O,G,U)}d.C=d.Ma=g}function zn(d,g,b,C,U,O,G){var W=d.$/C,Y=d.$%C,Z=d.m,ae=d.s,ge=b+d.$,me=ge;U=b+C*U;var fe=b+C*O,_e=280+ae.ua,ve=d.Pb?W:16777216,le=0<ae.ua?ae.Wa:null,ue=ae.wc,Ne=ge<fe?Ht(ae,Y,W):null;e(d.C<O),e(fe<=U);var Ae=!1;e:for(;;){for(;Ae||ge<fe;){var Se=0;if(W>=ve){var Be=ge-b;e((ve=d).Pb),ve.wd=ve.m,ve.xd=Be,0<ve.s.ua&&ye(ve.s.Wa,ve.s.vb),ve=W+ch}if(Y&ue||(Ne=Ht(ae,Y,W)),e(Ne!=null),Ne.Qb&&(g[ge]=Ne.qb,Ae=!0),!Ae)if(ee(Z),Ne.jc){Se=Z,Be=g;var Pe=ge,ze=Ne.pd[V(Se)&en-1];e(Ne.jc),256>ze.g?(Q(Se,Se.u+ze.g),Be[Pe]=ze.value,Se=0):(Q(Se,Se.u+ze.g-256),e(256<=ze.value),Se=ze.value),Se==0&&(Ae=!0)}else Se=vn(Ne.G[0],Ne.H[0],Z);if(Z.h)break;if(Ae||256>Se){if(!Ae)if(Ne.nd)g[ge]=(Ne.qb|Se<<8)>>>0;else{if(ee(Z),Ae=vn(Ne.G[1],Ne.H[1],Z),ee(Z),Be=vn(Ne.G[2],Ne.H[2],Z),Pe=vn(Ne.G[3],Ne.H[3],Z),Z.h)break;g[ge]=(Pe<<24|Ae<<16|Se<<8|Be)>>>0}if(Ae=!1,++ge,++Y>=C&&(Y=0,++W,G!=null&&W<=O&&!(W%16)&&G(d,W),le!=null))for(;me<ge;)Se=g[me++],le.X[(506832829*Se&4294967295)>>>le.Mb]=Se}else if(280>Se){if(Se=Hn(Se-256,Z),Be=vn(Ne.G[4],Ne.H[4],Z),ee(Z),Be=lr(C,Be=Hn(Be,Z)),Z.h)break;if(ge-b<Be||U-ge<Se)break e;for(Pe=0;Pe<Se;++Pe)g[ge+Pe]=g[ge+Pe-Be];for(ge+=Se,Y+=Se;Y>=C;)Y-=C,++W,G!=null&&W<=O&&!(W%16)&&G(d,W);if(e(ge<=U),Y&ue&&(Ne=Ht(ae,Y,W)),le!=null)for(;me<ge;)Se=g[me++],le.X[(506832829*Se&4294967295)>>>le.Mb]=Se}else{if(!(Se<_e))break e;for(Ae=Se-280,e(le!=null);me<ge;)Se=g[me++],le.X[(506832829*Se&4294967295)>>>le.Mb]=Se;Se=ge,e(!(Ae>>>(Be=le).Xa)),g[Se]=Be.X[Ae],Ae=!0}Ae||e(Z.h==K(Z))}if(d.Pb&&Z.h&&ge<U)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&ye(d.s.vb,d.s.Wa);else{if(Z.h)break e;G!=null&&G(d,W>O?O:W),d.a=0,d.$=ge-b}return 1}return d.a=3,0}function cr(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var g=d.Wa;g!=null&&(g.X=null),d.vb=null,e(d!=null)}function En(){var d=new Qa;return d==null?null:(d.a=0,d.xb=vc,or("Predictor","VP8LPredictors"),or("Predictor","VP8LPredictors_C"),or("PredictorAdd","VP8LPredictorsAdd"),or("PredictorAdd","VP8LPredictorsAdd_C"),Ts=dt,fi=Ye,bn=Ue,fn=nn,Br=ht,Sr=qn,_r=St,M.VP8LMapColor32b=Ji,M.VP8LMapColor8b=ks,d)}function ur(d,g,b,C,U){var O=1,G=[d],W=[g],Y=C.m,Z=C.s,ae=null,ge=0;e:for(;;){if(b)for(;O&&ne(Y,1);){var me=G,fe=W,_e=C,ve=1,le=_e.m,ue=_e.gc[_e.ab],Ne=ne(le,2);if(_e.Oc&1<<Ne)O=0;else{switch(_e.Oc|=1<<Ne,ue.hc=Ne,ue.Ea=me[0],ue.nc=fe[0],ue.K=[null],++_e.ab,e(4>=_e.ab),Ne){case 0:case 1:ue.b=ne(le,3)+2,ve=ur(Oe(ue.Ea,ue.b),Oe(ue.nc,ue.b),0,_e,ue.K),ue.K=ue.K[0];break;case 3:var Ae,Se=ne(le,8)+1,Be=16<Se?0:4<Se?1:2<Se?2:3;if(me[0]=Oe(ue.Ea,Be),ue.b=Be,Ae=ve=ur(Se,1,0,_e,ue.K)){var Pe,ze=Se,Re=ue,gt=1<<(8>>Re.b),yt=o(gt);if(yt==null)Ae=0;else{var ft=Re.K[0],ct=Re.w;for(yt[0]=Re.K[0][0],Pe=1;Pe<1*ze;++Pe)yt[Pe]=Ie(ft[ct+Pe],yt[Pe-1]);for(;Pe<4*gt;++Pe)yt[Pe]=0;Re.K[0]=null,Re.K[0]=yt,Ae=1}}ve=Ae;break;case 2:break;default:e(0)}O=ve}}if(G=G[0],W=W[0],O&&ne(Y,1)&&!(O=1<=(ge=ne(Y,4))&&11>=ge)){C.a=3;break e}var _t;if(_t=O)t:{var Nt,it,Gt,wn=C,zt=G,Nn=W,xt=ge,Tn=b,In=wn.m,Kt=wn.s,tn=[null],pn=1,Un=0,pr=lh[xt];n:for(;;){if(Tn&&ne(In,1)){var Xt=ne(In,3)+2,Ir=Oe(zt,Xt),vi=Oe(Nn,Xt),Zi=Ir*vi;if(!ur(Ir,vi,0,wn,tn))break n;for(tn=tn[0],Kt.xc=Xt,Nt=0;Nt<Zi;++Nt){var Gr=tn[Nt]>>8&65535;tn[Nt]=Gr,Gr>=pn&&(pn=Gr+1)}}if(In.h)break n;for(it=0;5>it;++it){var Mt=gc[it];!it&&0<xt&&(Mt+=1<<xt),Un<Mt&&(Un=Mt)}var ll=s(pn*pr,k),Ac=pn,Cc=s(Ac,H);if(Cc==null)var Os=null;else e(65536>=Ac),Os=Cc;var Go=o(Un);if(Os==null||Go==null||ll==null){wn.a=1;break n}var Hs=ll;for(Nt=Gt=0;Nt<pn;++Nt){var Kn=Os[Nt],eo=Kn.G,to=Kn.H,Tc=0,Vs=1,Ic=0;for(it=0;5>it;++it){Mt=gc[it],eo[it]=Hs,to[it]=Gt,!it&&0<xt&&(Mt+=1<<xt);i:{var Gs,cl=Mt,zs=wn,zo=Go,kh=Hs,Eh=Gt,ul=0,zr=zs.m,Ph=ne(zr,1);if(i(zo,0,0,cl),Ph){var Lh=ne(zr,1)+1,Rh=ne(zr,1),kc=ne(zr,Rh==0?1:8);zo[kc]=1,Lh==2&&(zo[kc=ne(zr,8)]=1);var Ws=1}else{var Ec=o(19),Pc=ne(zr,4)+4;if(19<Pc){zs.a=3;var $s=0;break i}for(Gs=0;Gs<Pc;++Gs)Ec[sh[Gs]]=ne(zr,3);var dl=void 0,Wo=void 0,Lc=zs,Mh=Ec,Js=cl,Rc=zo,fl=0,Wr=Lc.m,Mc=8,Dc=s(128,k);r:for(;E(Dc,0,7,Mh,19);){if(ne(Wr,1)){var Dh=2+2*ne(Wr,3);if((dl=2+ne(Wr,Dh))>Js)break r}else dl=Js;for(Wo=0;Wo<Js&&dl--;){ee(Wr);var Fc=Dc[0+(127&V(Wr))];Q(Wr,Wr.u+Fc.g);var no=Fc.value;if(16>no)Rc[Wo++]=no,no!=0&&(Mc=no);else{var Fh=no==16,Uc=no-16,Uh=ih[Uc],jc=ne(Wr,rh[Uc])+Uh;if(Wo+jc>Js)break r;for(var jh=Fh?Mc:0;0<jc--;)Rc[Wo++]=jh}}fl=1;break r}fl||(Lc.a=3),Ws=fl}(Ws=Ws&&!zr.h)&&(ul=E(kh,Eh,8,zo,cl)),Ws&&ul!=0?$s=ul:(zs.a=3,$s=0)}if($s==0)break n;if(Vs&&oh[it]==1&&(Vs=Hs[Gt].g==0),Tc+=Hs[Gt].g,Gt+=$s,3>=it){var $o,hl=Go[0];for($o=1;$o<Mt;++$o)Go[$o]>hl&&(hl=Go[$o]);Ic+=hl}}if(Kn.nd=Vs,Kn.Qb=0,Vs&&(Kn.qb=(eo[3][to[3]+0].value<<24|eo[1][to[1]+0].value<<16|eo[2][to[2]+0].value)>>>0,Tc==0&&256>eo[0][to[0]+0].value&&(Kn.Qb=1,Kn.qb+=eo[0][to[0]+0].value<<8)),Kn.jc=!Kn.Qb&&6>Ic,Kn.jc){var Ys,kr=Kn;for(Ys=0;Ys<en;++Ys){var $r=Ys,Jr=kr.pd[$r],Ks=kr.G[0][kr.H[0]+$r];256<=Ks.value?(Jr.g=Ks.g+256,Jr.value=Ks.value):(Jr.g=0,Jr.value=0,$r>>=Wt(Ks,8,Jr),$r>>=Wt(kr.G[1][kr.H[1]+$r],16,Jr),$r>>=Wt(kr.G[2][kr.H[2]+$r],0,Jr),Wt(kr.G[3][kr.H[3]+$r],24,Jr))}}}Kt.vc=tn,Kt.Wb=pn,Kt.Ya=Os,Kt.yc=ll,_t=1;break t}_t=0}if(!(O=_t)){C.a=3;break e}if(0<ge){if(Z.ua=1<<ge,!Ge(Z.Wa,ge)){C.a=1,O=0;break e}}else Z.ua=0;var pl=C,Bc=G,Bh=W,gl=pl.s,ml=gl.xc;if(pl.c=Bc,pl.i=Bh,gl.md=Oe(Bc,ml),gl.wc=ml==0?-1:(1<<ml)-1,b){C.xb=mh;break e}if((ae=o(G*W))==null){C.a=1,O=0;break e}O=(O=zn(C,ae,0,G,W,W,null))&&!Y.h;break e}return O?(U!=null?U[0]=ae:(e(ae==null),e(b)),C.$=0,b||cr(Z)):cr(Z),O}function ai(d,g){var b=d.c*d.i,C=b+g+16*g;return e(d.c<=g),d.V=o(C),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+b+g,1)}function ki(d,g){var b=d.C,C=g-b,U=d.V,O=d.Ba+d.c*b;for(e(g<=d.l.o);0<C;){var G=16<C?16:C,W=d.l.ma,Y=d.l.width,Z=Y*G,ae=W.ca,ge=W.tb+Y*b,me=d.Ta,fe=d.Ua;_n(d,G,U,O),jt(me,fe,ae,ge,Z),Vn(W,b,b+G,ae,ge,Y),C-=G,U+=G*d.c,b+=G}e(b==g),d.C=d.Ma=g}function Ei(){this.ub=this.yd=this.td=this.Rb=0}function Pi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Li(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function as(){this.Yb=(function(){var d=[];return(function g(b,C,U){for(var O=U[C],G=0;G<O&&(b.push(U.length>C+1?[]:0),!(U.length<C+1));G++)g(b[G],C+1,U)})(d,0,[3,11]),d})()}function ka(){this.jb=o(3),this.Wc=a([4,8],as),this.Xc=a([4,17],as)}function Ea(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Ri(){this.ld=this.La=this.dd=this.tc=0}function ls(){this.Na=this.la=0}function Pa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function yo(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function La(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ri),this.Y=0,this.ya=Array(new yo),this.aa=0,this.l=new Mi}function cs(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Ra(){this.cb=this.a=0,this.sc="",this.m=new se,this.Od=new Ei,this.Kc=new Pi,this.ed=new Ea,this.Qa=new Li,this.Ic=this.$c=this.Aa=0,this.D=new La,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,se),this.ia=0,this.pb=s(4,Pa),this.Pa=new ka,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new cs),this.Hd=0,this.rb=Array(new ls),this.sb=0,this.wa=Array(new Ri),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new yo),this.L=this.aa=0,this.gd=a([4,2],Ri),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Mi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ma(){var d=new Ra;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Ho||(Ho=fs)),d}function Ft(d,g,b){return d.a==0&&(d.a=g,d.sc=b,d.cb=0),0}function us(d,g,b){return 3<=b&&d[g+0]==157&&d[g+1]==1&&d[g+2]==42}function ds(d,g){if(d==null)return 0;if(d.a=0,d.sc="OK",g==null)return Ft(d,2,"null VP8Io passed to VP8GetHeaders()");var b=g.data,C=g.w,U=g.ha;if(4>U)return Ft(d,7,"Truncated header.");var O=b[C+0]|b[C+1]<<8|b[C+2]<<16,G=d.Od;if(G.Rb=!(1&O),G.td=O>>1&7,G.yd=O>>4&1,G.ub=O>>5,3<G.td)return Ft(d,3,"Incorrect keyframe parameters.");if(!G.yd)return Ft(d,4,"Frame not displayable.");C+=3,U-=3;var W=d.Kc;if(G.Rb){if(7>U)return Ft(d,7,"cannot parse picture header");if(!us(b,C,U))return Ft(d,3,"Bad code word");W.c=16383&(b[C+4]<<8|b[C+3]),W.Td=b[C+4]>>6,W.i=16383&(b[C+6]<<8|b[C+5]),W.Ud=b[C+6]>>6,C+=7,U-=7,d.za=W.c+15>>4,d.Ub=W.i+15>>4,g.width=W.c,g.height=W.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i((O=d.Pa).jb,0,255,O.jb.length),e((O=d.Qa)!=null),O.Cb=0,O.Bb=0,O.Fb=1,i(O.Zb,0,0,O.Zb.length),i(O.Lb,0,0,O.Lb)}if(G.ub>U)return Ft(d,7,"bad partition length");ie(O=d.m,b,C,G.ub),C+=G.ub,U-=G.ub,G.Rb&&(W.Ld=de(O),W.Kd=de(O)),W=d.Qa;var Y,Z=d.Pa;if(e(O!=null),e(W!=null),W.Cb=de(O),W.Cb){if(W.Bb=de(O),de(O)){for(W.Fb=de(O),Y=0;4>Y;++Y)W.Zb[Y]=de(O)?q(O,7):0;for(Y=0;4>Y;++Y)W.Lb[Y]=de(O)?q(O,6):0}if(W.Bb)for(Y=0;3>Y;++Y)Z.jb[Y]=de(O)?$(O,8):255}else W.Bb=0;if(O.Ka)return Ft(d,3,"cannot parse segment header");if((W=d.ed).zd=de(O),W.Tb=$(O,6),W.wb=$(O,3),W.Pc=de(O),W.Pc&&de(O)){for(Z=0;4>Z;++Z)de(O)&&(W.vd[Z]=q(O,6));for(Z=0;4>Z;++Z)de(O)&&(W.od[Z]=q(O,6))}if(d.L=W.Tb==0?0:W.zd?1:2,O.Ka)return Ft(d,3,"cannot parse filter header");var ae=U;if(U=Y=C,C=Y+ae,W=ae,d.Xb=(1<<$(d.m,2))-1,ae<3*(Z=d.Xb))b=7;else{for(Y+=3*Z,W-=3*Z,ae=0;ae<Z;++ae){var ge=b[U+0]|b[U+1]<<8|b[U+2]<<16;ge>W&&(ge=W),ie(d.Jc[+ae],b,Y,ge),Y+=ge,W-=ge,U+=3}ie(d.Jc[+Z],b,Y,W),b=Y<C?0:5}if(b!=0)return Ft(d,b,"cannot parse partitions");for(b=$(Y=d.m,7),U=de(Y)?q(Y,4):0,C=de(Y)?q(Y,4):0,W=de(Y)?q(Y,4):0,Z=de(Y)?q(Y,4):0,Y=de(Y)?q(Y,4):0,ae=d.Qa,ge=0;4>ge;++ge){if(ae.Cb){var me=ae.Zb[ge];ae.Fb||(me+=b)}else{if(0<ge){d.pb[ge]=d.pb[0];continue}me=b}var fe=d.pb[ge];fe.Sc[0]=ol[An(me+U,127)],fe.Sc[1]=sl[An(me+0,127)],fe.Eb[0]=2*ol[An(me+C,127)],fe.Eb[1]=101581*sl[An(me+W,127)]>>16,8>fe.Eb[1]&&(fe.Eb[1]=8),fe.Qc[0]=ol[An(me+Z,117)],fe.Qc[1]=sl[An(me+Y,127)],fe.lc=me+Y}if(!G.Rb)return Ft(d,4,"Not a key frame.");for(de(O),G=d.Pa,b=0;4>b;++b){for(U=0;8>U;++U)for(C=0;3>C;++C)for(W=0;11>W;++W)Z=pe(O,ph[b][U][C][W])?$(O,8):fh[b][U][C][W],G.Wc[b][U].Yb[C][W]=Z;for(U=0;17>U;++U)G.Xc[b][U]=G.Wc[b][gh[U]]}return d.kc=de(O),d.kc&&(d.Bd=$(O,8)),d.cb=1}function fs(d,g,b,C,U,O,G){var W=g[U].Yb[b];for(b=0;16>U;++U){if(!pe(d,W[b+0]))return U;for(;!pe(d,W[b+1]);)if(W=g[++U].Yb[0],b=0,U==16)return 16;var Y=g[U+1].Yb;if(pe(d,W[b+2])){var Z=d,ae=0;if(pe(Z,(me=W)[(ge=b)+3]))if(pe(Z,me[ge+6])){for(W=0,ge=2*(ae=pe(Z,me[ge+8]))+(me=pe(Z,me[ge+9+ae])),ae=0,me=uh[ge];me[W];++W)ae+=ae+pe(Z,me[W]);ae+=3+(8<<ge)}else pe(Z,me[ge+7])?(ae=7+2*pe(Z,165),ae+=pe(Z,145)):ae=5+pe(Z,159);else ae=pe(Z,me[ge+4])?3+pe(Z,me[ge+5]):2;W=Y[2]}else ae=1,W=Y[1];Y=G+dh[U],0>(Z=d).b&&ce(Z);var ge,me=Z.b,fe=(ge=Z.Ca>>1)-(Z.I>>me)>>31;--Z.b,Z.Ca+=fe,Z.Ca|=1,Z.I-=(ge+1&fe)<<me,O[Y]=((ae^fe)-fe)*C[(0<U)+0]}return 16}function xo(d){var g=d.rb[d.sb-1];g.la=0,g.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function Da(d,g){if(d==null)return 0;if(g==null)return Ft(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!ds(d,g))return 0;if(e(d.cb),g.ac==null||g.ac(g)){g.ob&&(d.L=0);var b=qs[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=g.v-b>>4,d.zb=g.j-b>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=g.o+15+b>>4,d.Hb=g.va+15+b>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var C=d.ed;for(b=0;4>b;++b){var U;if(d.Qa.Cb){var O=d.Qa.Lb[b];d.Qa.Fb||(O+=C.Tb)}else O=C.Tb;for(U=0;1>=U;++U){var G=d.gd[b][U],W=O;if(C.Pc&&(W+=C.vd[0],U&&(W+=C.od[0])),0<(W=0>W?0:63<W?63:W)){var Y=W;0<C.wb&&(Y=4<C.wb?Y>>2:Y>>1)>9-C.wb&&(Y=9-C.wb),1>Y&&(Y=1),G.dd=Y,G.tc=2*W+Y,G.ld=40<=W?2:15<=W?1:0}else G.tc=0;G.La=U}}}b=0}else Ft(d,6,"Frame setup failed"),b=d.a;if(b=b==0){if(b){d.$c=0,0<d.Aa||(d.Ic=Ih);e:{b=d.Ic,C=4*(Y=d.za);var Z=32*Y,ae=Y+1,ge=0<d.L?Y*(0<d.Aa?2:1):0,me=(d.Aa==2?2:1)*Y;if((G=C+832+(U=3*(16*b+qs[d.L])/2*Z)+(O=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=G)b=0;else{if(G>d.Vb){if(d.Vb=0,d.Ec=o(G),d.Fc=0,d.Ec==null){b=Ft(d,1,"no memory during frame initialization.");break e}d.Vb=G}G=d.Ec,W=d.Fc,d.Ac=G,d.Bc=W,W+=C,d.Gd=s(Z,cs),d.Hd=0,d.rb=s(ae+1,ls),d.sb=1,d.wa=ge?s(ge,Ri):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=Y),e(!0),d.oc=G,d.pc=W,W+=832,d.ya=s(me,yo),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=Y),d.R=16*Y,d.B=8*Y,Y=(Z=qs[d.L])*d.R,Z=Z/2*d.B,d.sa=G,d.ta=W+Y,d.qa=d.sa,d.ra=d.ta+16*b*d.R+Z,d.Ha=d.qa,d.Ia=d.ra+8*b*d.B+Z,d.$c=0,W+=U,d.mb=O?G:null,d.nb=O?W:null,e(W+O<=d.Fc+d.Vb),xo(d),i(d.Ac,d.Bc,0,C),b=1}}if(b){if(g.ka=0,g.y=d.sa,g.O=d.ta,g.f=d.qa,g.N=d.ra,g.ea=d.Ha,g.Vd=d.Ia,g.fa=d.R,g.Rc=d.B,g.F=null,g.J=0,!Ps){for(b=-255;255>=b;++b)$t[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)Cr[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)Oo[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)Qi[255+b]=0>b?0:255<b?255:b;Ps=1}Yi=ja,Ar=Fa,jo=ps,hn=Ua,Ln=gs,Ut=hs,Ki=Ao,Es=ui,Bo=Xa,hi=Co,pi=Ka,qr=qi,gi=To,Xi=_s,mi=Ss,Or=fr,qo=Nr,Rn=Ya,Yn[0]=dr,Yn[1]=Ba,Yn[2]=Va,Yn[3]=Ga,Yn[4]=ys,Yn[5]=ji,Yn[6]=xs,Yn[7]=No,Yn[8]=Wa,Yn[9]=za,Hr[0]=ms,Hr[1]=Oa,Hr[2]=wr,Hr[3]=Fi,Hr[4]=rn,Hr[5]=Ha,Hr[6]=vs,Tr[0]=Dr,Tr[1]=qa,Tr[2]=$a,Tr[3]=So,Tr[4]=ci,Tr[5]=Ja,Tr[6]=_o,b=1}else b=0}b&&(b=(function(fe,_e){for(fe.M=0;fe.M<fe.Va;++fe.M){var ve,le=fe.Jc[fe.M&fe.Xb],ue=fe.m,Ne=fe;for(ve=0;ve<Ne.za;++ve){var Ae=ue,Se=Ne,Be=Se.Ac,Pe=Se.Bc+4*ve,ze=Se.zc,Re=Se.ya[Se.aa+ve];if(Se.Qa.Bb?Re.$b=pe(Ae,Se.Pa.jb[0])?2+pe(Ae,Se.Pa.jb[2]):pe(Ae,Se.Pa.jb[1]):Re.$b=0,Se.kc&&(Re.Ad=pe(Ae,Se.Bd)),Re.Za=!pe(Ae,145)+0,Re.Za){var gt=Re.Ob,yt=0;for(Se=0;4>Se;++Se){var ft,ct=ze[0+Se];for(ft=0;4>ft;++ft){ct=hh[Be[Pe+ft]][ct];for(var _t=mc[pe(Ae,ct[0])];0<_t;)_t=mc[2*_t+pe(Ae,ct[_t])];ct=-_t,Be[Pe+ft]=ct}r(gt,yt,Be,Pe,4),yt+=4,ze[0+Se]=ct}}else ct=pe(Ae,156)?pe(Ae,128)?1:3:pe(Ae,163)?2:0,Re.Ob[0]=ct,i(Be,Pe,ct,4),i(ze,0,ct,4);Re.Dd=pe(Ae,142)?pe(Ae,114)?pe(Ae,183)?1:3:2:0}if(Ne.m.Ka)return Ft(fe,7,"Premature end-of-partition0 encountered.");for(;fe.ja<fe.za;++fe.ja){if(Ne=le,Ae=(ue=fe).rb[ue.sb-1],Be=ue.rb[ue.sb+ue.ja],ve=ue.ya[ue.aa+ue.ja],Pe=ue.kc?ve.Ad:0)Ae.la=Be.la=0,ve.Za||(Ae.Na=Be.Na=0),ve.Hc=0,ve.Gc=0,ve.ia=0;else{var Nt,it;if(Ae=Be,Be=Ne,Pe=ue.Pa.Xc,ze=ue.ya[ue.aa+ue.ja],Re=ue.pb[ze.$b],Se=ze.ad,gt=0,yt=ue.rb[ue.sb-1],ct=ft=0,i(Se,gt,0,384),ze.Za)var Gt=0,wn=Pe[3];else{_t=o(16);var zt=Ae.Na+yt.Na;if(zt=Ho(Be,Pe[1],zt,Re.Eb,0,_t,0),Ae.Na=yt.Na=(0<zt)+0,1<zt)Yi(_t,0,Se,gt);else{var Nn=_t[0]+3>>3;for(_t=0;256>_t;_t+=16)Se[gt+_t]=Nn}Gt=1,wn=Pe[0]}var xt=15&Ae.la,Tn=15&yt.la;for(_t=0;4>_t;++_t){var In=1&Tn;for(Nn=it=0;4>Nn;++Nn)xt=xt>>1|(In=(zt=Ho(Be,wn,zt=In+(1&xt),Re.Sc,Gt,Se,gt))>Gt)<<7,it=it<<2|(3<zt?3:1<zt?2:Se[gt+0]!=0),gt+=16;xt>>=4,Tn=Tn>>1|In<<7,ft=(ft<<8|it)>>>0}for(wn=xt,Gt=Tn>>4,Nt=0;4>Nt;Nt+=2){for(it=0,xt=Ae.la>>4+Nt,Tn=yt.la>>4+Nt,_t=0;2>_t;++_t){for(In=1&Tn,Nn=0;2>Nn;++Nn)zt=In+(1&xt),xt=xt>>1|(In=0<(zt=Ho(Be,Pe[2],zt,Re.Qc,0,Se,gt)))<<3,it=it<<2|(3<zt?3:1<zt?2:Se[gt+0]!=0),gt+=16;xt>>=2,Tn=Tn>>1|In<<5}ct|=it<<4*Nt,wn|=xt<<4<<Nt,Gt|=(240&Tn)<<Nt}Ae.la=wn,yt.la=Gt,ze.Hc=ft,ze.Gc=ct,ze.ia=43690&ct?0:Re.ia,Pe=!(ft|ct)}if(0<ue.L&&(ue.wa[ue.Y+ue.ja]=ue.gd[ve.$b][ve.Za],ue.wa[ue.Y+ue.ja].La|=!Pe),Ne.Ka)return Ft(fe,7,"Premature end-of-file encountered.")}if(xo(fe),ue=_e,Ne=1,ve=(le=fe).D,Ae=0<le.L&&le.M>=le.zb&&le.M<=le.Va,le.Aa==0)e:{if(ve.M=le.M,ve.uc=Ae,Ro(le,ve),Ne=1,ve=(it=le.D).Nb,Ae=(ct=qs[le.L])*le.R,Be=ct/2*le.B,_t=16*ve*le.R,Nn=8*ve*le.B,Pe=le.sa,ze=le.ta-Ae+_t,Re=le.qa,Se=le.ra-Be+Nn,gt=le.Ha,yt=le.Ia-Be+Nn,Tn=(xt=it.M)==0,ft=xt>=le.Va-1,le.Aa==2&&Ro(le,it),it.uc)for(In=(zt=le).D.M,e(zt.D.uc),it=zt.yb;it<zt.Hb;++it){Gt=it,wn=In;var Kt=(tn=(Mt=zt).D).Nb;Nt=Mt.R;var tn=tn.wa[tn.Y+Gt],pn=Mt.sa,Un=Mt.ta+16*Kt*Nt+16*Gt,pr=tn.dd,Xt=tn.tc;if(Xt!=0)if(e(3<=Xt),Mt.L==1)0<Gt&&Or(pn,Un,Nt,Xt+4),tn.La&&Rn(pn,Un,Nt,Xt),0<wn&&mi(pn,Un,Nt,Xt+4),tn.La&&qo(pn,Un,Nt,Xt);else{var Ir=Mt.B,vi=Mt.qa,Zi=Mt.ra+8*Kt*Ir+8*Gt,Gr=Mt.Ha,Mt=Mt.Ia+8*Kt*Ir+8*Gt;Kt=tn.ld,0<Gt&&(Es(pn,Un,Nt,Xt+4,pr,Kt),hi(vi,Zi,Gr,Mt,Ir,Xt+4,pr,Kt)),tn.La&&(qr(pn,Un,Nt,Xt,pr,Kt),Xi(vi,Zi,Gr,Mt,Ir,Xt,pr,Kt)),0<wn&&(Ki(pn,Un,Nt,Xt+4,pr,Kt),Bo(vi,Zi,Gr,Mt,Ir,Xt+4,pr,Kt)),tn.La&&(pi(pn,Un,Nt,Xt,pr,Kt),gi(vi,Zi,Gr,Mt,Ir,Xt,pr,Kt))}}if(le.ia&&alert("todo:DitherRow"),ue.put!=null){if(it=16*xt,xt=16*(xt+1),Tn?(ue.y=le.sa,ue.O=le.ta+_t,ue.f=le.qa,ue.N=le.ra+Nn,ue.ea=le.Ha,ue.W=le.Ia+Nn):(it-=ct,ue.y=Pe,ue.O=ze,ue.f=Re,ue.N=Se,ue.ea=gt,ue.W=yt),ft||(xt-=ct),xt>ue.o&&(xt=ue.o),ue.F=null,ue.J=null,le.Fa!=null&&0<le.Fa.length&&it<xt&&(ue.J=Po(le,ue,it,xt-it),ue.F=le.mb,ue.F==null&&ue.F.length==0)){Ne=Ft(le,3,"Could not decode alpha data.");break e}it<ue.j&&(ct=ue.j-it,it=ue.j,e(!(1&ct)),ue.O+=le.R*ct,ue.N+=le.B*(ct>>1),ue.W+=le.B*(ct>>1),ue.F!=null&&(ue.J+=ue.width*ct)),it<xt&&(ue.O+=ue.v,ue.N+=ue.v>>1,ue.W+=ue.v>>1,ue.F!=null&&(ue.J+=ue.v),ue.ka=it-ue.j,ue.U=ue.va-ue.v,ue.T=xt-it,Ne=ue.put(ue))}ve+1!=le.Ic||ft||(r(le.sa,le.ta-Ae,Pe,ze+16*le.R,Ae),r(le.qa,le.ra-Be,Re,Se+8*le.B,Be),r(le.Ha,le.Ia-Be,gt,yt+8*le.B,Be))}if(!Ne)return Ft(fe,6,"Output aborted.")}return 1})(d,g)),g.bc!=null&&g.bc(g),b&=1}return b?(d.cb=0,b):0}function Wn(d,g,b,C,U){U=d[g+b+32*C]+(U>>3),d[g+b+32*C]=-256&U?0>U?0:255:U}function Di(d,g,b,C,U,O){Wn(d,g,0,b,C+U),Wn(d,g,1,b,C+O),Wn(d,g,2,b,C-O),Wn(d,g,3,b,C-U)}function yn(d){return(20091*d>>16)+d}function bo(d,g,b,C){var U,O=0,G=o(16);for(U=0;4>U;++U){var W=d[g+0]+d[g+8],Y=d[g+0]-d[g+8],Z=(35468*d[g+4]>>16)-yn(d[g+12]),ae=yn(d[g+4])+(35468*d[g+12]>>16);G[O+0]=W+ae,G[O+1]=Y+Z,G[O+2]=Y-Z,G[O+3]=W-ae,O+=4,g++}for(U=O=0;4>U;++U)W=(d=G[O+0]+4)+G[O+8],Y=d-G[O+8],Z=(35468*G[O+4]>>16)-yn(G[O+12]),Wn(b,C,0,0,W+(ae=yn(G[O+4])+(35468*G[O+12]>>16))),Wn(b,C,1,0,Y+Z),Wn(b,C,2,0,Y-Z),Wn(b,C,3,0,W-ae),O++,C+=32}function hs(d,g,b,C){var U=d[g+0]+4,O=35468*d[g+4]>>16,G=yn(d[g+4]),W=35468*d[g+1]>>16;Di(b,C,0,U+G,d=yn(d[g+1]),W),Di(b,C,1,U+O,d,W),Di(b,C,2,U-O,d,W),Di(b,C,3,U-G,d,W)}function Fa(d,g,b,C,U){bo(d,g,b,C),U&&bo(d,g+16,b,C+4)}function ps(d,g,b,C){Ar(d,g+0,b,C,1),Ar(d,g+32,b,C+128,1)}function Ua(d,g,b,C){var U;for(d=d[g+0]+4,U=0;4>U;++U)for(g=0;4>g;++g)Wn(b,C,g,U,d)}function gs(d,g,b,C){d[g+0]&&hn(d,g+0,b,C),d[g+16]&&hn(d,g+16,b,C+4),d[g+32]&&hn(d,g+32,b,C+128),d[g+48]&&hn(d,g+48,b,C+128+4)}function ja(d,g,b,C){var U,O=o(16);for(U=0;4>U;++U){var G=d[g+0+U]+d[g+12+U],W=d[g+4+U]+d[g+8+U],Y=d[g+4+U]-d[g+8+U],Z=d[g+0+U]-d[g+12+U];O[0+U]=G+W,O[8+U]=G-W,O[4+U]=Z+Y,O[12+U]=Z-Y}for(U=0;4>U;++U)G=(d=O[0+4*U]+3)+O[3+4*U],W=O[1+4*U]+O[2+4*U],Y=O[1+4*U]-O[2+4*U],Z=d-O[3+4*U],b[C+0]=G+W>>3,b[C+16]=Z+Y>>3,b[C+32]=G-W>>3,b[C+48]=Z-Y>>3,C+=64}function wo(d,g,b){var C,U=g-32,O=Cn,G=255-d[U-1];for(C=0;C<b;++C){var W,Y=O,Z=G+d[g-1];for(W=0;W<b;++W)d[g+W]=Y[Z+d[U+W]];g+=32}}function Ba(d,g){wo(d,g,4)}function qa(d,g){wo(d,g,8)}function Oa(d,g){wo(d,g,16)}function wr(d,g){var b;for(b=0;16>b;++b)r(d,g+32*b,d,g-32,16)}function Fi(d,g){var b;for(b=16;0<b;--b)i(d,g,d[g-1],16),g+=32}function Ui(d,g,b){var C;for(C=0;16>C;++C)i(g,b+32*C,d,16)}function ms(d,g){var b,C=16;for(b=0;16>b;++b)C+=d[g-1+32*b]+d[g+b-32];Ui(C>>5,d,g)}function rn(d,g){var b,C=8;for(b=0;16>b;++b)C+=d[g-1+32*b];Ui(C>>4,d,g)}function Ha(d,g){var b,C=8;for(b=0;16>b;++b)C+=d[g+b-32];Ui(C>>4,d,g)}function vs(d,g){Ui(128,d,g)}function Ke(d,g,b){return d+2*g+b+2>>2}function Va(d,g){var b,C=g-32;for(C=new Uint8Array([Ke(d[C-1],d[C+0],d[C+1]),Ke(d[C+0],d[C+1],d[C+2]),Ke(d[C+1],d[C+2],d[C+3]),Ke(d[C+2],d[C+3],d[C+4])]),b=0;4>b;++b)r(d,g+32*b,C,0,C.length)}function Ga(d,g){var b=d[g-1],C=d[g-1+32],U=d[g-1+64],O=d[g-1+96];we(d,g+0,16843009*Ke(d[g-1-32],b,C)),we(d,g+32,16843009*Ke(b,C,U)),we(d,g+64,16843009*Ke(C,U,O)),we(d,g+96,16843009*Ke(U,O,O))}function dr(d,g){var b,C=4;for(b=0;4>b;++b)C+=d[g+b-32]+d[g-1+32*b];for(C>>=3,b=0;4>b;++b)i(d,g+32*b,C,4)}function ys(d,g){var b=d[g-1+0],C=d[g-1+32],U=d[g-1+64],O=d[g-1-32],G=d[g+0-32],W=d[g+1-32],Y=d[g+2-32],Z=d[g+3-32];d[g+0+96]=Ke(C,U,d[g-1+96]),d[g+1+96]=d[g+0+64]=Ke(b,C,U),d[g+2+96]=d[g+1+64]=d[g+0+32]=Ke(O,b,C),d[g+3+96]=d[g+2+64]=d[g+1+32]=d[g+0+0]=Ke(G,O,b),d[g+3+64]=d[g+2+32]=d[g+1+0]=Ke(W,G,O),d[g+3+32]=d[g+2+0]=Ke(Y,W,G),d[g+3+0]=Ke(Z,Y,W)}function xs(d,g){var b=d[g+1-32],C=d[g+2-32],U=d[g+3-32],O=d[g+4-32],G=d[g+5-32],W=d[g+6-32],Y=d[g+7-32];d[g+0+0]=Ke(d[g+0-32],b,C),d[g+1+0]=d[g+0+32]=Ke(b,C,U),d[g+2+0]=d[g+1+32]=d[g+0+64]=Ke(C,U,O),d[g+3+0]=d[g+2+32]=d[g+1+64]=d[g+0+96]=Ke(U,O,G),d[g+3+32]=d[g+2+64]=d[g+1+96]=Ke(O,G,W),d[g+3+64]=d[g+2+96]=Ke(G,W,Y),d[g+3+96]=Ke(W,Y,Y)}function ji(d,g){var b=d[g-1+0],C=d[g-1+32],U=d[g-1+64],O=d[g-1-32],G=d[g+0-32],W=d[g+1-32],Y=d[g+2-32],Z=d[g+3-32];d[g+0+0]=d[g+1+64]=O+G+1>>1,d[g+1+0]=d[g+2+64]=G+W+1>>1,d[g+2+0]=d[g+3+64]=W+Y+1>>1,d[g+3+0]=Y+Z+1>>1,d[g+0+96]=Ke(U,C,b),d[g+0+64]=Ke(C,b,O),d[g+0+32]=d[g+1+96]=Ke(b,O,G),d[g+1+32]=d[g+2+96]=Ke(O,G,W),d[g+2+32]=d[g+3+96]=Ke(G,W,Y),d[g+3+32]=Ke(W,Y,Z)}function No(d,g){var b=d[g+0-32],C=d[g+1-32],U=d[g+2-32],O=d[g+3-32],G=d[g+4-32],W=d[g+5-32],Y=d[g+6-32],Z=d[g+7-32];d[g+0+0]=b+C+1>>1,d[g+1+0]=d[g+0+64]=C+U+1>>1,d[g+2+0]=d[g+1+64]=U+O+1>>1,d[g+3+0]=d[g+2+64]=O+G+1>>1,d[g+0+32]=Ke(b,C,U),d[g+1+32]=d[g+0+96]=Ke(C,U,O),d[g+2+32]=d[g+1+96]=Ke(U,O,G),d[g+3+32]=d[g+2+96]=Ke(O,G,W),d[g+3+64]=Ke(G,W,Y),d[g+3+96]=Ke(W,Y,Z)}function za(d,g){var b=d[g-1+0],C=d[g-1+32],U=d[g-1+64],O=d[g-1+96];d[g+0+0]=b+C+1>>1,d[g+2+0]=d[g+0+32]=C+U+1>>1,d[g+2+32]=d[g+0+64]=U+O+1>>1,d[g+1+0]=Ke(b,C,U),d[g+3+0]=d[g+1+32]=Ke(C,U,O),d[g+3+32]=d[g+1+64]=Ke(U,O,O),d[g+3+64]=d[g+2+64]=d[g+0+96]=d[g+1+96]=d[g+2+96]=d[g+3+96]=O}function Wa(d,g){var b=d[g-1+0],C=d[g-1+32],U=d[g-1+64],O=d[g-1+96],G=d[g-1-32],W=d[g+0-32],Y=d[g+1-32],Z=d[g+2-32];d[g+0+0]=d[g+2+32]=b+G+1>>1,d[g+0+32]=d[g+2+64]=C+b+1>>1,d[g+0+64]=d[g+2+96]=U+C+1>>1,d[g+0+96]=O+U+1>>1,d[g+3+0]=Ke(W,Y,Z),d[g+2+0]=Ke(G,W,Y),d[g+1+0]=d[g+3+32]=Ke(b,G,W),d[g+1+32]=d[g+3+64]=Ke(C,b,G),d[g+1+64]=d[g+3+96]=Ke(U,C,b),d[g+1+96]=Ke(O,U,C)}function $a(d,g){var b;for(b=0;8>b;++b)r(d,g+32*b,d,g-32,8)}function So(d,g){var b;for(b=0;8>b;++b)i(d,g,d[g-1],8),g+=32}function li(d,g,b){var C;for(C=0;8>C;++C)i(g,b+32*C,d,8)}function Dr(d,g){var b,C=8;for(b=0;8>b;++b)C+=d[g+b-32]+d[g-1+32*b];li(C>>4,d,g)}function Ja(d,g){var b,C=4;for(b=0;8>b;++b)C+=d[g+b-32];li(C>>3,d,g)}function ci(d,g){var b,C=4;for(b=0;8>b;++b)C+=d[g-1+32*b];li(C>>3,d,g)}function _o(d,g){li(128,d,g)}function Bi(d,g,b){var C=d[g-b],U=d[g+0],O=3*(U-C)+el[1020+d[g-2*b]-d[g+b]],G=Ls[112+(O+4>>3)];d[g-b]=Cn[255+C+Ls[112+(O+3>>3)]],d[g+0]=Cn[255+U-G]}function bs(d,g,b,C){var U=d[g+0],O=d[g+b];return Dn[255+d[g-2*b]-d[g-b]]>C||Dn[255+O-U]>C}function ws(d,g,b,C){return 4*Dn[255+d[g-b]-d[g+0]]+Dn[255+d[g-2*b]-d[g+b]]<=C}function Ns(d,g,b,C,U){var O=d[g-3*b],G=d[g-2*b],W=d[g-b],Y=d[g+0],Z=d[g+b],ae=d[g+2*b],ge=d[g+3*b];return 4*Dn[255+W-Y]+Dn[255+G-Z]>C?0:Dn[255+d[g-4*b]-O]<=U&&Dn[255+O-G]<=U&&Dn[255+G-W]<=U&&Dn[255+ge-ae]<=U&&Dn[255+ae-Z]<=U&&Dn[255+Z-Y]<=U}function Ss(d,g,b,C){var U=2*C+1;for(C=0;16>C;++C)ws(d,g+C,b,U)&&Bi(d,g+C,b)}function fr(d,g,b,C){var U=2*C+1;for(C=0;16>C;++C)ws(d,g+C*b,1,U)&&Bi(d,g+C*b,1)}function Nr(d,g,b,C){var U;for(U=3;0<U;--U)Ss(d,g+=4*b,b,C)}function Ya(d,g,b,C){var U;for(U=3;0<U;--U)fr(d,g+=4,b,C)}function Fr(d,g,b,C,U,O,G,W){for(O=2*O+1;0<U--;){if(Ns(d,g,b,O,G))if(bs(d,g,b,W))Bi(d,g,b);else{var Y=d,Z=g,ae=b,ge=Y[Z-2*ae],me=Y[Z-ae],fe=Y[Z+0],_e=Y[Z+ae],ve=Y[Z+2*ae],le=27*(Ne=el[1020+3*(fe-me)+el[1020+ge-_e]])+63>>7,ue=18*Ne+63>>7,Ne=9*Ne+63>>7;Y[Z-3*ae]=Cn[255+Y[Z-3*ae]+Ne],Y[Z-2*ae]=Cn[255+ge+ue],Y[Z-ae]=Cn[255+me+le],Y[Z+0]=Cn[255+fe-le],Y[Z+ae]=Cn[255+_e-ue],Y[Z+2*ae]=Cn[255+ve-Ne]}g+=C}}function $n(d,g,b,C,U,O,G,W){for(O=2*O+1;0<U--;){if(Ns(d,g,b,O,G))if(bs(d,g,b,W))Bi(d,g,b);else{var Y=d,Z=g,ae=b,ge=Y[Z-ae],me=Y[Z+0],fe=Y[Z+ae],_e=Ls[112+((ve=3*(me-ge))+4>>3)],ve=Ls[112+(ve+3>>3)],le=_e+1>>1;Y[Z-2*ae]=Cn[255+Y[Z-2*ae]+le],Y[Z-ae]=Cn[255+ge+ve],Y[Z+0]=Cn[255+me-_e],Y[Z+ae]=Cn[255+fe-le]}g+=C}}function Ao(d,g,b,C,U,O){Fr(d,g,b,1,16,C,U,O)}function ui(d,g,b,C,U,O){Fr(d,g,1,b,16,C,U,O)}function Ka(d,g,b,C,U,O){var G;for(G=3;0<G;--G)$n(d,g+=4*b,b,1,16,C,U,O)}function qi(d,g,b,C,U,O){var G;for(G=3;0<G;--G)$n(d,g+=4,1,b,16,C,U,O)}function Xa(d,g,b,C,U,O,G,W){Fr(d,g,U,1,8,O,G,W),Fr(b,C,U,1,8,O,G,W)}function Co(d,g,b,C,U,O,G,W){Fr(d,g,1,U,8,O,G,W),Fr(b,C,1,U,8,O,G,W)}function To(d,g,b,C,U,O,G,W){$n(d,g+4*U,U,1,8,O,G,W),$n(b,C+4*U,U,1,8,O,G,W)}function _s(d,g,b,C,U,O,G,W){$n(d,g+4,1,U,8,O,G,W),$n(b,C+4,1,U,8,O,G,W)}function Oi(){this.ba=new On,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Io(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ko(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function As(){this.ua=0,this.Wa=new re,this.vb=new re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new k}function Qa(){this.xb=this.a=0,this.l=new Mi,this.ca=new On,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new As,this.ab=0,this.gc=s(4,ko),this.Oc=0}function Hi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Mi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function di(d,g,b,C,U,O,G){for(d=d==null?0:d[g+0],g=0;g<G;++g)U[O+g]=d+b[C+g]&255,d=U[O+g]}function Eo(d,g,b,C,U,O,G){var W;if(d==null)di(null,null,b,C,U,O,G);else for(W=0;W<G;++W)U[O+W]=d[g+W]+b[C+W]&255}function Ur(d,g,b,C,U,O,G){if(d==null)di(null,null,b,C,U,O,G);else{var W,Y=d[g+0],Z=Y,ae=Y;for(W=0;W<G;++W)Z=ae+(Y=d[g+W])-Z,ae=b[C+W]+(-256&Z?0>Z?0:255:Z)&255,Z=Y,U[O+W]=ae}}function Po(d,g,b,C){var U=g.width,O=g.o;if(e(d!=null&&g!=null),0>b||0>=C||b+C>O)return null;if(!d.Cc){if(d.ga==null){var G;if(d.ga=new Hi,(G=d.ga==null)||(G=g.width*g.o,e(d.Gb.length==0),d.Gb=o(G),d.Uc=0,d.Gb==null?G=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,G=1),G=!G),!G){G=d.ga;var W=d.Fa,Y=d.P,Z=d.qc,ae=d.mb,ge=d.nb,me=Y+1,fe=Z-1,_e=G.l;if(e(W!=null&&ae!=null&&g!=null),Vr[0]=null,Vr[1]=di,Vr[2]=Eo,Vr[3]=Ur,G.ca=ae,G.tb=ge,G.c=g.width,G.i=g.height,e(0<G.c&&0<G.i),1>=Z)g=0;else if(G.$a=W[Y+0]>>0&3,G.Z=W[Y+0]>>2&3,G.Lc=W[Y+0]>>4&3,Y=W[Y+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||Y)g=0;else if(_e.put=sr,_e.ac=Zt,_e.bc=ar,_e.ma=G,_e.width=g.width,_e.height=g.height,_e.Da=g.Da,_e.v=g.v,_e.va=g.va,_e.j=g.j,_e.o=g.o,G.$a)e:{e(G.$a==1),g=En();t:for(;;){if(g==null){g=0;break e}if(e(G!=null),G.mc=g,g.c=G.c,g.i=G.i,g.l=G.l,g.l.ma=G,g.l.width=G.c,g.l.height=G.i,g.a=0,z(g.m,W,me,fe),!ur(G.c,G.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&br(g.s)?(G.ic=1,W=g.c*g.i,g.Ta=null,g.Ua=0,g.V=o(W),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(G.ic=0,g=ai(g,G.c)),!g))break t;g=1;break e}G.mc=null,g=0}else g=fe>=G.c*G.i;G=!g}if(G)return null;d.ga.Lc!=1?d.Ga=0:C=O-b}e(d.ga!=null),e(b+C<=O);e:{if(g=(W=d.ga).c,O=W.l.o,W.$a==0){if(me=d.rc,fe=d.Vc,_e=d.Fa,Y=d.P+1+b*g,Z=d.mb,ae=d.nb+b*g,e(Y<=d.P+d.qc),W.Z!=0)for(e(Vr[W.Z]!=null),G=0;G<C;++G)Vr[W.Z](me,fe,_e,Y,Z,ae,g),me=Z,fe=ae,ae+=g,Y+=g;else for(G=0;G<C;++G)r(Z,ae,_e,Y,g),me=Z,fe=ae,ae+=g,Y+=g;d.rc=me,d.Vc=fe}else{if(e(W.mc!=null),g=b+C,e((G=W.mc)!=null),e(g<=G.i),G.C>=g)g=1;else if(W.ic||he(),W.ic){W=G.V,me=G.Ba,fe=G.c;var ve=G.i,le=(_e=1,Y=G.$/fe,Z=G.$%fe,ae=G.m,ge=G.s,G.$),ue=fe*ve,Ne=fe*g,Ae=ge.wc,Se=le<Ne?Ht(ge,Z,Y):null;e(le<=ue),e(g<=ve),e(br(ge));t:for(;;){for(;!ae.h&&le<Ne;){if(Z&Ae||(Se=Ht(ge,Z,Y)),e(Se!=null),ee(ae),256>(ve=vn(Se.G[0],Se.H[0],ae)))W[me+le]=ve,++le,++Z>=fe&&(Z=0,++Y<=g&&!(Y%16)&&Gn(G,Y));else{if(!(280>ve)){_e=0;break t}ve=Hn(ve-256,ae);var Be,Pe=vn(Se.G[4],Se.H[4],ae);if(ee(ae),!(le>=(Pe=lr(fe,Pe=Hn(Pe,ae)))&&ue-le>=ve)){_e=0;break t}for(Be=0;Be<ve;++Be)W[me+le+Be]=W[me+le+Be-Pe];for(le+=ve,Z+=ve;Z>=fe;)Z-=fe,++Y<=g&&!(Y%16)&&Gn(G,Y);le<Ne&&Z&Ae&&(Se=Ht(ge,Z,Y))}e(ae.h==K(ae))}Gn(G,Y>g?g:Y);break t}!_e||ae.h&&le<ue?(_e=0,G.a=ae.h?5:3):G.$=le,g=_e}else g=zn(G,G.V,G.Ba,G.c,G.i,g,ki);if(!g){C=0;break e}}b+C>=O&&(d.Cc=1),C=1}if(!C)return null;if(d.Cc&&((C=d.ga)!=null&&(C.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+b*U}function x(d,g,b,C,U,O){for(;0<U--;){var G,W=d,Y=g+(b?1:0),Z=d,ae=g+(b?0:3);for(G=0;G<C;++G){var ge=Z[ae+4*G];ge!=255&&(ge*=32897,W[Y+4*G+0]=W[Y+4*G+0]*ge>>23,W[Y+4*G+1]=W[Y+4*G+1]*ge>>23,W[Y+4*G+2]=W[Y+4*G+2]*ge>>23)}g+=O}}function B(d,g,b,C,U){for(;0<C--;){var O;for(O=0;O<b;++O){var G=d[g+2*O+0],W=15&(Z=d[g+2*O+1]),Y=4369*W,Z=(240&Z|Z>>4)*Y>>16;d[g+2*O+0]=(240&G|G>>4)*Y>>16&240|(15&G|G<<4)*Y>>16>>4&15,d[g+2*O+1]=240&Z|W}g+=U}}function te(d,g,b,C,U,O,G,W){var Y,Z,ae=255;for(Z=0;Z<U;++Z){for(Y=0;Y<C;++Y){var ge=d[g+Y];O[G+4*Y]=ge,ae&=ge}g+=b,G+=W}return ae!=255}function oe(d,g,b,C,U){var O;for(O=0;O<U;++O)b[C+O]=d[g+O]>>8}function he(){Mn=x,Ct=B,Tt=te,jt=oe}function xe(d,g,b){M[d]=function(C,U,O,G,W,Y,Z,ae,ge,me,fe,_e,ve,le,ue,Ne,Ae){var Se,Be=Ae-1>>1,Pe=W[Y+0]|Z[ae+0]<<16,ze=ge[me+0]|fe[_e+0]<<16;e(C!=null);var Re=3*Pe+ze+131074>>2;for(g(C[U+0],255&Re,Re>>16,ve,le),O!=null&&(Re=3*ze+Pe+131074>>2,g(O[G+0],255&Re,Re>>16,ue,Ne)),Se=1;Se<=Be;++Se){var gt=W[Y+Se]|Z[ae+Se]<<16,yt=ge[me+Se]|fe[_e+Se]<<16,ft=Pe+gt+ze+yt+524296,ct=ft+2*(gt+ze)>>3;Re=ct+Pe>>1,Pe=(ft=ft+2*(Pe+yt)>>3)+gt>>1,g(C[U+2*Se-1],255&Re,Re>>16,ve,le+(2*Se-1)*b),g(C[U+2*Se-0],255&Pe,Pe>>16,ve,le+(2*Se-0)*b),O!=null&&(Re=ft+ze>>1,Pe=ct+yt>>1,g(O[G+2*Se-1],255&Re,Re>>16,ue,Ne+(2*Se-1)*b),g(O[G+2*Se+0],255&Pe,Pe>>16,ue,Ne+(2*Se+0)*b)),Pe=gt,ze=yt}1&Ae||(Re=3*Pe+ze+131074>>2,g(C[U+Ae-1],255&Re,Re>>16,ve,le+(Ae-1)*b),O!=null&&(Re=3*ze+Pe+131074>>2,g(O[G+Ae-1],255&Re,Re>>16,ue,Ne+(Ae-1)*b)))}}function Te(){Fn[Rs]=vh,Fn[Ms]=yc,Fn[hc]=yh,Fn[Ds]=xc,Fn[Fs]=bc,Fn[tl]=wc,Fn[pc]=xh,Fn[nl]=yc,Fn[rl]=xc,Fn[Us]=bc,Fn[il]=wc}function je(d){return d&-16384?0>d?0:255:d>>bh}function Ve(d,g){return je((19077*d>>8)+(26149*g>>8)-14234)}function rt(d,g,b){return je((19077*d>>8)-(6419*g>>8)-(13320*b>>8)+8708)}function et(d,g){return je((19077*d>>8)+(33050*g>>8)-17685)}function ut(d,g,b,C,U){C[U+0]=Ve(d,b),C[U+1]=rt(d,g,b),C[U+2]=et(d,g)}function Et(d,g,b,C,U){C[U+0]=et(d,g),C[U+1]=rt(d,g,b),C[U+2]=Ve(d,b)}function Rt(d,g,b,C,U){var O=rt(d,g,b);g=O<<3&224|et(d,g)>>3,C[U+0]=248&Ve(d,b)|O>>5,C[U+1]=g}function Vt(d,g,b,C,U){var O=240&et(d,g)|15;C[U+0]=240&Ve(d,b)|rt(d,g,b)>>4,C[U+1]=O}function on(d,g,b,C,U){C[U+0]=255,ut(d,g,b,C,U+1)}function Yt(d,g,b,C,U){Et(d,g,b,C,U),C[U+3]=255}function Jn(d,g,b,C,U){ut(d,g,b,C,U),C[U+3]=255}function An(d,g){return 0>d?0:d>g?g:d}function hr(d,g,b){M[d]=function(C,U,O,G,W,Y,Z,ae,ge){for(var me=ae+(-2&ge)*b;ae!=me;)g(C[U+0],O[G+0],W[Y+0],Z,ae),g(C[U+1],O[G+0],W[Y+0],Z,ae+b),U+=2,++G,++Y,ae+=2*b;1&ge&&g(C[U+0],O[G+0],W[Y+0],Z,ae)}}function Cs(d,g,b){return b==0?d==0?g==0?6:5:g==0?4:0:b}function Lo(d,g,b,C,U){switch(d>>>30){case 3:Ar(g,b,C,U,0);break;case 2:Ut(g,b,C,U);break;case 1:hn(g,b,C,U)}}function Ro(d,g){var b,C,U=g.M,O=g.Nb,G=d.oc,W=d.pc+40,Y=d.oc,Z=d.pc+584,ae=d.oc,ge=d.pc+600;for(b=0;16>b;++b)G[W+32*b-1]=129;for(b=0;8>b;++b)Y[Z+32*b-1]=129,ae[ge+32*b-1]=129;for(0<U?G[W-1-32]=Y[Z-1-32]=ae[ge-1-32]=129:(i(G,W-32-1,127,21),i(Y,Z-32-1,127,9),i(ae,ge-32-1,127,9)),C=0;C<d.za;++C){var me=g.ya[g.aa+C];if(0<C){for(b=-1;16>b;++b)r(G,W+32*b-4,G,W+32*b+12,4);for(b=-1;8>b;++b)r(Y,Z+32*b-4,Y,Z+32*b+4,4),r(ae,ge+32*b-4,ae,ge+32*b+4,4)}var fe=d.Gd,_e=d.Hd+C,ve=me.ad,le=me.Hc;if(0<U&&(r(G,W-32,fe[_e].y,0,16),r(Y,Z-32,fe[_e].f,0,8),r(ae,ge-32,fe[_e].ea,0,8)),me.Za){var ue=G,Ne=W-32+16;for(0<U&&(C>=d.za-1?i(ue,Ne,fe[_e].y[15],4):r(ue,Ne,fe[_e+1].y,0,4)),b=0;4>b;b++)ue[Ne+128+b]=ue[Ne+256+b]=ue[Ne+384+b]=ue[Ne+0+b];for(b=0;16>b;++b,le<<=2)ue=G,Ne=W+Sc[b],Yn[me.Ob[b]](ue,Ne),Lo(le,ve,16*+b,ue,Ne)}else if(ue=Cs(C,U,me.Ob[0]),Hr[ue](G,W),le!=0)for(b=0;16>b;++b,le<<=2)Lo(le,ve,16*+b,G,W+Sc[b]);for(b=me.Gc,ue=Cs(C,U,me.Dd),Tr[ue](Y,Z),Tr[ue](ae,ge),le=ve,ue=Y,Ne=Z,255&(me=b>>0)&&(170&me?jo(le,256,ue,Ne):Ln(le,256,ue,Ne)),me=ae,le=ge,255&(b>>=8)&&(170&b?jo(ve,320,me,le):Ln(ve,320,me,le)),U<d.Ub-1&&(r(fe[_e].y,0,G,W+480,16),r(fe[_e].f,0,Y,Z+224,8),r(fe[_e].ea,0,ae,ge+224,8)),b=8*O*d.B,fe=d.sa,_e=d.ta+16*C+16*O*d.R,ve=d.qa,me=d.ra+8*C+b,le=d.Ha,ue=d.Ia+8*C+b,b=0;16>b;++b)r(fe,_e+b*d.R,G,W+32*b,16);for(b=0;8>b;++b)r(ve,me+b*d.B,Y,Z+32*b,8),r(le,ue+b*d.B,ae,ge+32*b,8)}}function Vi(d,g,b,C,U,O,G,W,Y){var Z=[0],ae=[0],ge=0,me=Y!=null?Y.kd:0,fe=Y??new Io;if(d==null||12>b)return 7;fe.data=d,fe.w=g,fe.ha=b,g=[g],b=[b],fe.gb=[fe.gb];e:{var _e=g,ve=b,le=fe.gb;if(e(d!=null),e(ve!=null),e(le!=null),le[0]=0,12<=ve[0]&&!n(d,_e[0],"RIFF")){if(n(d,_e[0]+8,"WEBP")){le=3;break e}var ue=Le(d,_e[0]+4);if(12>ue||4294967286<ue){le=3;break e}if(me&&ue>ve[0]-8){le=7;break e}le[0]=ue,_e[0]+=12,ve[0]-=12}le=0}if(le!=0)return le;for(ue=0<fe.gb[0],b=b[0];;){e:{var Ne=d;ve=g,le=b;var Ae=Z,Se=ae,Be=_e=[0];if((Re=ge=[ge])[0]=0,8>le[0])le=7;else{if(!n(Ne,ve[0],"VP8X")){if(Le(Ne,ve[0]+4)!=10){le=3;break e}if(18>le[0]){le=7;break e}var Pe=Le(Ne,ve[0]+8),ze=1+ke(Ne,ve[0]+12);if(2147483648<=ze*(Ne=1+ke(Ne,ve[0]+15))){le=3;break e}Be!=null&&(Be[0]=Pe),Ae!=null&&(Ae[0]=ze),Se!=null&&(Se[0]=Ne),ve[0]+=18,le[0]-=18,Re[0]=1}le=0}}if(ge=ge[0],_e=_e[0],le!=0)return le;if(ve=!!(2&_e),!ue&&ge)return 3;if(O!=null&&(O[0]=!!(16&_e)),G!=null&&(G[0]=ve),W!=null&&(W[0]=0),G=Z[0],_e=ae[0],ge&&ve&&Y==null){le=0;break}if(4>b){le=7;break}if(ue&&ge||!ue&&!ge&&!n(d,g[0],"ALPH")){b=[b],fe.na=[fe.na],fe.P=[fe.P],fe.Sa=[fe.Sa];e:{Pe=d,le=g,ue=b;var Re=fe.gb;Ae=fe.na,Se=fe.P,Be=fe.Sa,ze=22,e(Pe!=null),e(ue!=null),Ne=le[0];var gt=ue[0];for(e(Ae!=null),e(Be!=null),Ae[0]=null,Se[0]=null,Be[0]=0;;){if(le[0]=Ne,ue[0]=gt,8>gt){le=7;break e}var yt=Le(Pe,Ne+4);if(4294967286<yt){le=3;break e}var ft=8+yt+1&-2;if(ze+=ft,0<Re&&ze>Re){le=3;break e}if(!n(Pe,Ne,"VP8 ")||!n(Pe,Ne,"VP8L")){le=0;break e}if(gt[0]<ft){le=7;break e}n(Pe,Ne,"ALPH")||(Ae[0]=Pe,Se[0]=Ne+8,Be[0]=yt),Ne+=ft,gt-=ft}}if(b=b[0],fe.na=fe.na[0],fe.P=fe.P[0],fe.Sa=fe.Sa[0],le!=0)break}b=[b],fe.Ja=[fe.Ja],fe.xa=[fe.xa];e:if(Re=d,le=g,ue=b,Ae=fe.gb[0],Se=fe.Ja,Be=fe.xa,Pe=le[0],Ne=!n(Re,Pe,"VP8 "),ze=!n(Re,Pe,"VP8L"),e(Re!=null),e(ue!=null),e(Se!=null),e(Be!=null),8>ue[0])le=7;else{if(Ne||ze){if(Re=Le(Re,Pe+4),12<=Ae&&Re>Ae-12){le=3;break e}if(me&&Re>ue[0]-8){le=7;break e}Se[0]=Re,le[0]+=8,ue[0]-=8,Be[0]=ze}else Be[0]=5<=ue[0]&&Re[Pe+0]==47&&!(Re[Pe+4]>>5),Se[0]=ue[0];le=0}if(b=b[0],fe.Ja=fe.Ja[0],fe.xa=fe.xa[0],g=g[0],le!=0)break;if(4294967286<fe.Ja)return 3;if(W==null||ve||(W[0]=fe.xa?2:1),G=[G],_e=[_e],fe.xa){if(5>b){le=7;break}W=G,me=_e,ve=O,d==null||5>b?d=0:5<=b&&d[g+0]==47&&!(d[g+4]>>5)?(ue=[0],Re=[0],Ae=[0],z(Se=new L,d,g,b),$e(Se,ue,Re,Ae)?(W!=null&&(W[0]=ue[0]),me!=null&&(me[0]=Re[0]),ve!=null&&(ve[0]=Ae[0]),d=1):d=0):d=0}else{if(10>b){le=7;break}W=_e,d==null||10>b||!us(d,g+3,b-3)?d=0:(me=d[g+0]|d[g+1]<<8|d[g+2]<<16,ve=16383&(d[g+7]<<8|d[g+6]),d=16383&(d[g+9]<<8|d[g+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=fe.Ja||!ve||!d?d=0:(G&&(G[0]=ve),W&&(W[0]=d),d=1))}if(!d||(G=G[0],_e=_e[0],ge&&(Z[0]!=G||ae[0]!=_e)))return 3;Y!=null&&(Y[0]=fe,Y.offset=g-Y.w,e(4294967286>g-Y.w),e(Y.offset==Y.ha-b));break}return le==0||le==7&&ge&&Y==null?(O!=null&&(O[0]|=fe.na!=null&&0<fe.na.length),C!=null&&(C[0]=G),U!=null&&(U[0]=_e),0):le}function Mo(d,g,b){var C=g.width,U=g.height,O=0,G=0,W=C,Y=U;if(g.Da=d!=null&&0<d.Da,g.Da&&(W=d.cd,Y=d.bd,O=d.v,G=d.j,11>b||(O&=-2,G&=-2),0>O||0>G||0>=W||0>=Y||O+W>C||G+Y>U))return 0;if(g.v=O,g.j=G,g.va=O+W,g.o=G+Y,g.U=W,g.T=Y,g.da=d!=null&&0<d.da,g.da){if(!nt(W,Y,b=[d.ib],O=[d.hb]))return 0;g.ib=b[0],g.hb=O[0]}return g.ob=d!=null&&d.ob,g.Kb=d==null||!d.Sd,g.da&&(g.ob=g.ib<3*C/4&&g.hb<3*U/4,g.Kb=0),1}function Do(d){if(d==null)return 2;if(11>d.S){var g=d.f.RGBA;g.fb+=(d.height-1)*g.A,g.A=-g.A}else g=d.f.kb,d=d.height,g.O+=(d-1)*g.fa,g.fa=-g.fa,g.N+=(d-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(d-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(d-1)*g.lb,g.lb=-g.lb);return 0}function Gi(d,g,b,C){if(C==null||0>=d||0>=g)return 2;if(b!=null){if(b.Da){var U=b.cd,O=b.bd,G=-2&b.v,W=-2&b.j;if(0>G||0>W||0>=U||0>=O||G+U>d||W+O>g)return 2;d=U,g=O}if(b.da){if(!nt(d,g,U=[b.ib],O=[b.hb]))return 2;d=U[0],g=O[0]}}C.width=d,C.height=g;e:{var Y=C.width,Z=C.height;if(d=C.S,0>=Y||0>=Z||!(d>=Rs&&13>d))d=2;else{if(0>=C.Rd&&C.sd==null){G=O=U=g=0;var ae=(W=Y*_c[d])*Z;if(11>d||(O=(Z+1)/2*(g=(Y+1)/2),d==12&&(G=(U=Y)*Z)),(Z=o(ae+2*O+G))==null){d=1;break e}C.sd=Z,11>d?((Y=C.f.RGBA).eb=Z,Y.fb=0,Y.A=W,Y.size=ae):((Y=C.f.kb).y=Z,Y.O=0,Y.fa=W,Y.Fd=ae,Y.f=Z,Y.N=0+ae,Y.Ab=g,Y.Cd=O,Y.ea=Z,Y.W=0+ae+O,Y.Db=g,Y.Ed=O,d==12&&(Y.F=Z,Y.J=0+ae+2*O),Y.Tc=G,Y.lb=U)}if(g=1,U=C.S,O=C.width,G=C.height,U>=Rs&&13>U)if(11>U)d=C.f.RGBA,g&=(W=Math.abs(d.A))*(G-1)+O<=d.size,g&=W>=O*_c[U],g&=d.eb!=null;else{d=C.f.kb,W=(O+1)/2,ae=(G+1)/2,Y=Math.abs(d.fa),Z=Math.abs(d.Ab);var ge=Math.abs(d.Db),me=Math.abs(d.lb),fe=me*(G-1)+O;g&=Y*(G-1)+O<=d.Fd,g&=Z*(ae-1)+W<=d.Cd,g=(g&=ge*(ae-1)+W<=d.Ed)&Y>=O&Z>=W&ge>=W,g&=d.y!=null,g&=d.f!=null,g&=d.ea!=null,U==12&&(g&=me>=O,g&=fe<=d.Tc,g&=d.F!=null)}else g=0;d=g?0:2}}return d!=0||b!=null&&b.fd&&(d=Do(C)),d}var en=64,zi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Wi=24,$i=32,Fo=8,xn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ee("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(d){return d},M.Predictor2=function(d,g,b){return g[b+0]},M.Predictor3=function(d,g,b){return g[b+1]},M.Predictor4=function(d,g,b){return g[b-1]},M.Predictor5=function(d,g,b){return Me(Me(d,g[b+1]),g[b+0])},M.Predictor6=function(d,g,b){return Me(d,g[b-1])},M.Predictor7=function(d,g,b){return Me(d,g[b+0])},M.Predictor8=function(d,g,b){return Me(g[b-1],g[b+0])},M.Predictor9=function(d,g,b){return Me(g[b+0],g[b+1])},M.Predictor10=function(d,g,b){return Me(Me(d,g[b-1]),Me(g[b+0],g[b+1]))},M.Predictor11=function(d,g,b){var C=g[b+0];return 0>=ot(C>>24&255,d>>24&255,(g=g[b-1])>>24&255)+ot(C>>16&255,d>>16&255,g>>16&255)+ot(C>>8&255,d>>8&255,g>>8&255)+ot(255&C,255&d,255&g)?C:d},M.Predictor12=function(d,g,b){var C=g[b+0];return(He((d>>24&255)+(C>>24&255)-((g=g[b-1])>>24&255))<<24|He((d>>16&255)+(C>>16&255)-(g>>16&255))<<16|He((d>>8&255)+(C>>8&255)-(g>>8&255))<<8|He((255&d)+(255&C)-(255&g)))>>>0},M.Predictor13=function(d,g,b){var C=g[b-1];return(Qe((d=Me(d,g[b+0]))>>24&255,C>>24&255)<<24|Qe(d>>16&255,C>>16&255)<<16|Qe(d>>8&255,C>>8&255)<<8|Qe(d>>0&255,C>>0&255))>>>0};var Za=M.PredictorAdd0;M.PredictorAdd1=st,Ee("Predictor2","PredictorAdd2"),Ee("Predictor3","PredictorAdd3"),Ee("Predictor4","PredictorAdd4"),Ee("Predictor5","PredictorAdd5"),Ee("Predictor6","PredictorAdd6"),Ee("Predictor7","PredictorAdd7"),Ee("Predictor8","PredictorAdd8"),Ee("Predictor9","PredictorAdd9"),Ee("Predictor10","PredictorAdd10"),Ee("Predictor11","PredictorAdd11"),Ee("Predictor12","PredictorAdd12"),Ee("Predictor13","PredictorAdd13");var Uo=M.PredictorAdd2;lt("ColorIndexInverseTransform","MapARGB","32b",(function(d){return d>>8&255}),(function(d){return d})),lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(d){return d}),(function(d){return d>>8&255}));var Ts,Pn=M.ColorIndexInverseTransform,Ji=M.MapARGB,Is=M.VP8LColorIndexInverseTransformAlpha,ks=M.MapAlpha,jr=M.VP8LPredictorsAdd=[];jr.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var fi,bn,fn,Br,Sr,_r,Yi,Ar,Ut,jo,hn,Ln,Ki,Es,Bo,hi,pi,qr,gi,Xi,mi,Or,qo,Rn,Mn,Ct,Tt,jt,$t=o(511),Cr=o(2041),Oo=o(225),Qi=o(767),Ps=0,el=Cr,Ls=Oo,Cn=Qi,Dn=$t,Rs=0,Ms=1,hc=2,Ds=3,Fs=4,tl=5,pc=6,nl=7,rl=8,Us=9,il=10,rh=[2,3,7],ih=[3,3,11],gc=[280,256,256,256,40],oh=[0,1,1,1,0],sh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ah=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],lh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ch=8,ol=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],sl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ho=null,uh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],dh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],mc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],fh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],hh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ph=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],gh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hr=[],Yn=[],Tr=[],mh=1,vc=2,Vr=[],Fn=[];xe("UpsampleRgbLinePair",ut,3),xe("UpsampleBgrLinePair",Et,3),xe("UpsampleRgbaLinePair",Jn,4),xe("UpsampleBgraLinePair",Yt,4),xe("UpsampleArgbLinePair",on,4),xe("UpsampleRgba4444LinePair",Vt,2),xe("UpsampleRgb565LinePair",Rt,2);var vh=M.UpsampleRgbLinePair,yh=M.UpsampleBgrLinePair,yc=M.UpsampleRgbaLinePair,xc=M.UpsampleBgraLinePair,bc=M.UpsampleArgbLinePair,wc=M.UpsampleRgba4444LinePair,xh=M.UpsampleRgb565LinePair,js=16,Bs=1<<js-1,Vo=-227,al=482,bh=6,Nc=0,wh=o(256),Nh=o(256),Sh=o(256),_h=o(256),Ah=o(al-Vo),Ch=o(al-Vo);hr("YuvToRgbRow",ut,3),hr("YuvToBgrRow",Et,3),hr("YuvToRgbaRow",Jn,4),hr("YuvToBgraRow",Yt,4),hr("YuvToArgbRow",on,4),hr("YuvToRgba4444Row",Vt,2),hr("YuvToRgb565Row",Rt,2);var Sc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],qs=[0,2,8],Th=[8,7,6,4,4,2,2,2,1,1,1,1],Ih=1;this.WebPDecodeRGBA=function(d,g,b,C,U){var O=Ms,G=new Oi,W=new On;G.ba=W,W.S=O,W.width=[W.width],W.height=[W.height];var Y=W.width,Z=W.height,ae=new xr;if(ae==null||d==null)var ge=2;else e(ae!=null),ge=Vi(d,g,b,ae.width,ae.height,ae.Pd,ae.Qd,ae.format,null);if(ge!=0?Y=0:(Y!=null&&(Y[0]=ae.width[0]),Z!=null&&(Z[0]=ae.height[0]),Y=1),Y){W.width=W.width[0],W.height=W.height[0],C!=null&&(C[0]=W.width),U!=null&&(U[0]=W.height);e:{if(C=new Mi,(U=new Io).data=d,U.w=g,U.ha=b,U.kd=1,g=[0],e(U!=null),((d=Vi(U.data,U.w,U.ha,null,null,null,g,null,U))==0||d==7)&&g[0]&&(d=4),(g=d)==0){if(e(G!=null),C.data=U.data,C.w=U.w+U.offset,C.ha=U.ha-U.offset,C.put=sr,C.ac=Zt,C.bc=ar,C.ma=G,U.xa){if((d=En())==null){G=1;break e}if((function(me,fe){var _e=[0],ve=[0],le=[0];t:for(;;){if(me==null)return 0;if(fe==null)return me.a=2,0;if(me.l=fe,me.a=0,z(me.m,fe.data,fe.w,fe.ha),!$e(me.m,_e,ve,le)){me.a=3;break t}if(me.xb=vc,fe.width=_e[0],fe.height=ve[0],!ur(_e[0],ve[0],1,me,null))break t;return 1}return e(me.a!=0),0})(d,C)){if(C=(g=Gi(C.width,C.height,G.Oa,G.ba))==0){t:{C=d;n:for(;;){if(C==null){C=0;break t}if(e(C.s.yc!=null),e(C.s.Ya!=null),e(0<C.s.Wb),e((b=C.l)!=null),e((U=b.ma)!=null),C.xb!=0){if(C.ca=U.ba,C.tb=U.tb,e(C.ca!=null),!Mo(U.Oa,b,Ds)){C.a=2;break n}if(!ai(C,b.width)||b.da)break n;if((b.da||mt(C.ca.S))&&he(),11>C.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),C.ca.f.kb.F!=null&&he()),C.Pb&&0<C.s.ua&&C.s.vb.X==null&&!Ge(C.s.vb,C.s.Wa.Xa)){C.a=1;break n}C.xb=0}if(!zn(C,C.V,C.Ba,C.c,C.i,b.o,Ii))break n;U.Dc=C.Ma,C=1;break t}e(C.a!=0),C=0}C=!C}C&&(g=d.a)}else g=d.a}else{if((d=new Ma)==null){G=1;break e}if(d.Fa=U.na,d.P=U.P,d.qc=U.Sa,ds(d,C)){if((g=Gi(C.width,C.height,G.Oa,G.ba))==0){if(d.Aa=0,b=G.Oa,e((U=d)!=null),b!=null){if(0<(Y=0>(Y=b.Md)?0:100<Y?255:255*Y/100)){for(Z=ae=0;4>Z;++Z)12>(ge=U.pb[Z]).lc&&(ge.ia=Y*Th[0>ge.lc?0:ge.lc]>>3),ae|=ge.ia;ae&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=b.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}Da(d,C)||(g=d.a)}}else g=d.a}g==0&&G.Oa!=null&&G.Oa.fd&&(g=Do(G.ba))}G=g}O=G!=0?null:11>O?W.f.RGBA.eb:W.f.kb.y}else O=null;return O};var _c=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(M,j){for(var J="",E=0;E<4;E++)J+=String.fromCharCode(M[j++]);return J}function h(M,j){return(M[j+0]<<0|M[j+1]<<8|M[j+2]<<16)>>>0}function m(M,j){return(M[j+0]<<0|M[j+1]<<8|M[j+2]<<16|M[j+3]<<24)>>>0}new l;var v=[0],y=[0],S=[],A=new l,w=t,N=(function(M,j){var J={},E=0,k=!1,F=0,H=0;if(J.frames=[],!(function(V,K,Q,ee){for(var ce=0;ce<ee;ce++)if(V[K+ce]!=Q.charCodeAt(ce))return!0;return!1})(M,j,"RIFF",4)){var ie,$;for(m(M,j+=4),j+=8;j<M.length;){var q=c(M,j),z=m(M,j+=4);j+=4;var X=z+(1&z);switch(q){case"VP8 ":case"VP8L":J.frames[E]===void 0&&(J.frames[E]={}),(L=J.frames[E]).src_off=k?H:j-8,L.src_size=F+z+8,E++,k&&(k=!1,F=0,H=0);break;case"VP8X":(L=J.header={}).feature_flags=M[j];var ne=j+4;L.canvas_width=1+h(M,ne),ne+=3,L.canvas_height=1+h(M,ne),ne+=3;break;case"ALPH":k=!0,F=X+8,H=j-8;break;case"ANIM":(L=J.header).bgcolor=m(M,j),ne=j+4,L.loop_count=(ie=M)[($=ne)+0]<<0|ie[$+1]<<8,ne+=2;break;case"ANMF":var se,L;(L=J.frames[E]={}).offset_x=2*h(M,j),j+=3,L.offset_y=2*h(M,j),j+=3,L.width=1+h(M,j),j+=3,L.height=1+h(M,j),j+=3,L.duration=h(M,j),j+=3,se=M[j++],L.dispose=1&se,L.blend=se>>1&1}q!="ANMF"&&(j+=X)}return J}})(w,0);N.response=w,N.rgbaoutput=!0,N.dataurl=!1;var T=N.header?N.header:null,_=N.frames?N.frames:null;if(T){T.loop_counter=T.loop_count,v=[T.canvas_height],y=[T.canvas_width];for(var R=0;R<_.length&&_[R].blend!=0;R++);}var P=_[0],D=A.WebPDecodeRGBA(w,P.src_off,P.src_size,y,v);P.rgba=D,P.imgwidth=y[0],P.imgheight=v[0];for(var I=0;I<y[0]*v[0]*4;I++)S[I]=D[I];return this.width=y,this.height=v,this.data=S,this}(function(t){var e=function(){return typeof $l=="function"},n=function(v,y,S,A){var w=4,N=s;switch(A){case t.image_compression.FAST:w=1,N=o;break;case t.image_compression.MEDIUM:w=6,N=a;break;case t.image_compression.SLOW:w=9,N=l}v=r(v,y,S,N);var T=$l(v,{level:w});return t.__addimage__.arrayBufferToBinaryString(T)},r=function(v,y,S,A){for(var w,N,T,_=v.length/y,R=new Uint8Array(v.length+_),P=h(),D=0;D<_;D+=1){if(T=D*y,w=v.subarray(T,T+y),A)R.set(A(w,S,N),T+D);else{for(var I,M=P.length,j=[];I<M;I+=1)j[I]=P[I](w,S,N);var J=m(j.concat());R.set(j[J],T+D)}N=w}return R},i=function(v){var y=Array.apply([],v);return y.unshift(0),y},o=function(v,y){var S,A=[],w=v.length;A[0]=1;for(var N=0;N<w;N+=1)S=v[N-y]||0,A[N+1]=v[N]-S+256&255;return A},s=function(v,y,S){var A,w=[],N=v.length;w[0]=2;for(var T=0;T<N;T+=1)A=S&&S[T]||0,w[T+1]=v[T]-A+256&255;return w},a=function(v,y,S){var A,w,N=[],T=v.length;N[0]=3;for(var _=0;_<T;_+=1)A=v[_-y]||0,w=S&&S[_]||0,N[_+1]=v[_]+256-(A+w>>>1)&255;return N},l=function(v,y,S){var A,w,N,T,_=[],R=v.length;_[0]=4;for(var P=0;P<R;P+=1)A=v[P-y]||0,w=S&&S[P]||0,N=S&&S[P-y]||0,T=c(A,w,N),_[P+1]=v[P]-T+256&255;return _},c=function(v,y,S){if(v===y&&y===S)return v;var A=Math.abs(y-S),w=Math.abs(v-S),N=Math.abs(v+y-S-S);return A<=w&&A<=N?v:w<=N?y:S},h=function(){return[i,o,s,a,l]},m=function(v){var y=v.map((function(S){return S.reduce((function(A,w){return A+Math.abs(w)}),0)}));return y.indexOf(Math.min.apply(null,y))};t.processPNG=function(v,y,S,A){var w,N,T,_,R,P,D,I,M,j,J,E,k,F,H,ie=this.decode.FLATE_DECODE,$="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(T=new Ov(v)).imgData,N=T.bits,w=T.colorSpace,R=T.colors,[4,6].indexOf(T.colorType)!==-1){if(T.bits===8){M=(I=T.pixelBitlength==32?new Uint32Array(T.decodePixels().buffer):T.pixelBitlength==16?new Uint16Array(T.decodePixels().buffer):new Uint8Array(T.decodePixels().buffer)).length,J=new Uint8Array(M*T.colors),j=new Uint8Array(M);var q,z=T.pixelBitlength-T.bits;for(F=0,H=0;F<M;F++){for(k=I[F],q=0;q<z;)J[H++]=k>>>q&255,q+=T.bits;j[F]=k>>>q&255}}if(T.bits===16){M=(I=new Uint32Array(T.decodePixels().buffer)).length,J=new Uint8Array(M*(32/T.pixelBitlength)*T.colors),j=new Uint8Array(M*(32/T.pixelBitlength)),E=T.colors>1,F=0,H=0;for(var X=0;F<M;)k=I[F++],J[H++]=k>>>0&255,E&&(J[H++]=k>>>16&255,k=I[F++],J[H++]=k>>>0&255),j[X++]=k>>>16&255;N=8}A!==t.image_compression.NONE&&e()?(v=n(J,T.width*T.colors,T.colors,A),D=n(j,T.width,1,A)):(v=J,D=j,ie=void 0)}if(T.colorType===3&&(w=this.color_spaces.INDEXED,P=T.palette,T.transparency.indexed)){var ne=T.transparency.indexed,se=0;for(F=0,M=ne.length;F<M;++F)se+=ne[F];if((se/=255)===M-1&&ne.indexOf(0)!==-1)_=[ne.indexOf(0)];else if(se!==M){for(I=T.decodePixels(),j=new Uint8Array(I.length),F=0,M=I.length;F<M;F++)j[F]=ne[I[F]];D=n(j,T.width,1)}}var L=(function(V){var K;switch(V){case t.image_compression.FAST:K=11;break;case t.image_compression.MEDIUM:K=13;break;case t.image_compression.SLOW:K=14;break;default:K=12}return K})(A);return ie===this.decode.FLATE_DECODE&&($="/Predictor "+L+" "),$+="/Colors "+R+" /BitsPerComponent "+N+" /Columns "+T.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:S,data:v,index:y,filter:ie,decodeParameters:$,transparency:_,palette:P,sMask:D,predictor:L,width:T.width,height:T.height,bitsPerComponent:N,colorSpace:w}}}})(We.API),(function(t){t.processGIF89A=function(e,n,r,i){var o=new Hv(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:a},h=new Tl(100).encode(c,100);return t.processJPEG.call(this,h,n,r,i)},t.processGIF87A=t.processGIF89A})(We.API),Qn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Qn.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){At.log("bit decode error:"+n)}},Qn.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Qn.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,l=15&o,c=this.palette[a];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Qn.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},Qn.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,c=o>>15?255:0,h=r*this.width*4+4*i;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=s,this.data[h+3]=c}this.pos+=t}},Qn.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&n)/n*255|0,c=(s>>11)/e*255|0,h=i*this.width*4+4*o;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=t}},Qn.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Qn.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},Qn.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,i){var o=new Qn(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new Tl(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}})(We.API),Fd.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,i){var o=new Fd(e),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new Tl(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}})(We.API),We.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var h=r[c],m=r[c+1],v=r[c+2],y=r[c+3];o[a++]=h,o[a++]=m,o[a++]=v,s[l++]=y}var S=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:S,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},We.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},io=We.API,sa=io.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=c.fof?c.fof:1,m=e.doKerning!==!1,v=0,y=t.length,S=0,A=a[0]||l,w=[];for(n=0;n<y;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?w.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(v=m&&bt(c[r])==="object"&&!isNaN(parseInt(c[r][S],10))?c[r][S]/h:0,w.push((a[r]||A)/l+v)),S=r;return w},Ld=io.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return io.processArabic&&(t=io.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:sa.apply(this,arguments).reduce((function(o,s){return o+s}),0)},Rd=function(t,e,n,r){for(var i=[],o=0,s=t.length,a=0;o!==s&&a+e[o]<n;)a+=e[o],o++;i.push(t.slice(0,o));var l=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(t.slice(l,o)),a=0,l=o),a+=e[o],o++;return l!==o&&i.push(t.slice(l,o)),i},Md=function(t,e,n){n||(n={});var r,i,o,s,a,l,c,h=[],m=[h],v=n.textIndent||0,y=0,S=0,A=t.split(" "),w=sa.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?A[0].length+2:n.lineIndent||0){var N=Array(l).join(" "),T=[];A.map((function(R){(R=R.split(/\s*\n/)).length>1?T=T.concat(R.map((function(P,D){return(D&&P.length?`
`:"")+P}))):T.push(R[0])})),A=T,l=Ld.apply(this,[N,n])}for(o=0,s=A.length;o<s;o++){var _=0;if(r=A[o],l&&r[0]==`
`&&(r=r.substr(1),_=1),v+y+(S=(i=sa.apply(this,[r,n])).reduce((function(R,P){return R+P}),0))>e||_){if(S>e){for(a=Rd.apply(this,[r,i,e-(v+y),e]),h.push(a.shift()),h=[a.pop()];a.length;)m.push([a.shift()]);S=i.slice(r.length-(h[0]?h[0].length:0)).reduce((function(R,P){return R+P}),0)}else h=[r];m.push(h),v=S+l,y=w}else h.push(r),v+=y+S,y=w}return c=l?function(R,P){return(P?N:"")+R.join(" ")}:function(R){return R.join(" ")},m.map(c)},io.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var m=this.internal.getFont(h.fontName,h.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(Md.apply(this,[r[a],s,o]));return c},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(m){return"0x"+parseInt(m,10).toString(16)},s=t.__fontmetrics__.compress=function(m){var v,y,S,A,w=["{"];for(var N in m){if(v=m[N],isNaN(parseInt(N,10))?y="'"+N+"'":(N=parseInt(N,10),y=(y=o(N).slice(2)).slice(0,-1)+r[y.slice(-1)]),typeof v=="number")v<0?(S=o(v).slice(3),A="-"):(S=o(v).slice(2),A=""),S=A+S.slice(0,-1)+r[S.slice(-1)];else{if(bt(v)!=="object")throw new Error("Don't know what to do with value type "+bt(v)+".");S=s(v)}w.push(y+S)}return w.push("}"),w.join("")},a=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,y,S,A,w={},N=1,T=w,_=[],R="",P="",D=m.length-1,I=1;I<D;I+=1)(A=m[I])=="'"?v?(S=v.join(""),v=void 0):v=[]:v?v.push(A):A=="{"?(_.push([T,S]),T={},S=void 0):A=="}"?((y=_.pop())[0][y[1]]=T,S=void 0,T=y[0]):A=="-"?N=-1:S===void 0?n.hasOwnProperty(A)?(R+=n[A],S=parseInt(R,16)*N,N=1,R=""):R+=A:n.hasOwnProperty(A)?(P+=n[A],T[S]=parseInt(P,16)*N,N=1,S=void 0,P=""):P+=A;return w},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var v=m.font,y=h.Unicode[v.postScriptName];y&&(v.metadata.Unicode={},v.metadata.Unicode.widths=y.widths,v.metadata.Unicode.kerning=y.kerning);var S=c.Unicode[v.postScriptName];S&&(v.metadata.Unicode.encoding=S,v.encoding=S.codePages[0])}])})(We.API),(function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(es(a)),s.metadata=t.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(We),(function(t){function e(){return(Je.canvg?Promise.resolve(Je.canvg):Il(()=>import("./index.es-BaLc3Z8j.js"),__vite__mapDeps([0,1,2,3]))).catch((function(n){return Promise.reject(new Error("Could not load canvg: "+n))})).then((function(n){return n.default?n.default:n}))}We.API.addSvgAsImage=function(n,r,i,o,s,a,l,c){if(isNaN(r)||isNaN(i))throw At.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(s))throw At.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=o,h.height=s;var m=h.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,h.width,h.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return e().then((function(S){return S.fromString(m,n,v)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(S){return S.render(v)})).then((function(){y.addImage(h.toDataURL("image/jpeg",1),r,i,o,s,l,c)}))}})(),We.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},We.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],c=0,h=0,m=0;function v(S,A){var w,N=!1;for(w=0;w<S.length;w+=1)S[w]===A&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var y=a.length;for(m=0;m<y;m+=1)n[a[m]].value=n[a[m]].defaultValue,n[a[m]].explicitSet=!1}if(bt(t)==="object"){for(i in t)if(o=t[i],v(a,i)&&o!==void 0){if(n[i].type==="boolean"&&typeof o=="boolean")n[i].value=o;else if(n[i].type==="name"&&v(n[i].valueSet,o))n[i].value=o;else if(n[i].type==="integer"&&Number.isInteger(o))n[i].value=o;else if(n[i].type==="array"){for(c=0;c<o.length;c+=1)if(r=!0,o[c].length===1&&typeof o[c][0]=="number")l.push(String(o[c]-1));else if(o[c].length>1){for(h=0;h<o[c].length;h+=1)typeof o[c][h]!="number"&&(r=!1);r===!0&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var S,A=[];for(S in n)n[S].explicitSet===!0&&(n[S].type==="name"?A.push("/"+S+" /"+n[S].value):A.push("/"+S+" "+n[S].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=o.length+s.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(We.API),(function(t){var e=t.API,n=e.pdfEscape16=function(o,s){for(var a,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],h=[""],m=0,v=o.length;m<v;++m){if(a=s.metadata.characterToGlyph(o.charCodeAt(m)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(m),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(c[4-a.length],a)}return h.join("")},r=function(o){var s,a,l,c,h,m,v;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],m=0,v=(a=Object.keys(o).sort((function(y,S){return y-S}))).length;m<v;m++)s=a[m],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(c=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,h=s.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var m=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),y="",S=0;S<v.length;S++)y+=String.fromCharCode(v[S]);var A=c();h({data:y,addLength1:!0,objectId:A}),l("endobj");var w=c();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var N=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+ao(a.fontName)),l("/FontFile2 "+A+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var T=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+ao(a.fontName)),l("/FontDescriptor "+N+" 0 R"),l("/W "+t.API.PDFObject.convert(m)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+w+" 0 R"),l("/BaseFont /"+ao(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+T+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,h=s.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var m=a.metadata.rawData,v="",y=0;y<m.length;y++)v+=String.fromCharCode(m[y]);var S=c();h({data:v,addLength1:!0,objectId:S}),l("endobj");var A=c();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:A}),l("endobj");var w=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+S+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+ao(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var N=0;N<a.metadata.hmtx.widths.length;N++)a.metadata.hmtx.widths[N]=parseInt(a.metadata.hmtx.widths[N]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+ao(a.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",l=o.x,c=o.y,h=o.options||{},m=o.mutex||{},v=m.pdfEscape,y=m.activeFontKey,S=m.fonts,A=y,w="",N=0,T="",_=S[A].encoding;if(S[A].encoding!=="Identity-H")return{text:a,x:l,y:c,options:h,mutex:m};for(T=a,A=y,Array.isArray(a)&&(T=a[0]),N=0;N<T.length;N+=1)S[A].metadata.hasOwnProperty("cmap")&&(s=S[A].metadata.cmap.unicode.codeMap[T[N].charCodeAt(0)]),s||T[N].charCodeAt(0)<256&&S[A].metadata.hasOwnProperty("Unicode")?w+=T[N]:w+="";var R="";return parseInt(A.slice(1))<14||_==="WinAnsiEncoding"?R=v(w,A).split("").map((function(P){return P.charCodeAt(0).toString(16)})).join(""):_==="Identity-H"&&(R=n(w,S[A])),m.isHex=!0,{text:R,x:l,y:c,options:h,mutex:m}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],l={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?a.push([i(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):a.push(i(Object.assign({},l,{text:s[c]})).text);o.text=a}else o.text=i(Object.assign({},l,{text:s})).text}])})(We),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(We.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,o,s,a,l,c,h,m=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],S={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,_=0;this.__bidiEngine__={};var R=function(E){var k=E.charCodeAt(),F=k>>8,H=A[F];return H!==void 0?m[256*H+(255&k)]:F===252||F===253?"AL":N.test(F)?"L":F===8?"R":"N"},P=function(E){for(var k,F=0;F<E.length;F++){if((k=R(E.charAt(F)))==="L")return!1;if(k==="R")return!0}return!1},D=function(E,k,F,H){var ie,$,q,z,X=k[H];switch(X){case"L":case"R":T=!1;break;case"N":case"AN":break;case"EN":T&&(X="AN");break;case"AL":T=!0,X="R";break;case"WS":X="N";break;case"CS":H<1||H+1>=k.length||(ie=F[H-1])!=="EN"&&ie!=="AN"||($=k[H+1])!=="EN"&&$!=="AN"?X="N":T&&($="AN"),X=$===ie?$:"N";break;case"ES":X=(ie=H>0?F[H-1]:"B")==="EN"&&H+1<k.length&&k[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&F[H-1]==="EN"){X="EN";break}if(T){X="N";break}for(q=H+1,z=k.length;q<z&&k[q]==="ET";)q++;X=q<z&&k[q]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(z=k.length,q=H+1;q<z&&k[q]==="NSM";)q++;if(q<z){var ne=E[H],se=ne>=1425&&ne<=2303||ne===64286;if(ie=k[q],se&&(ie==="R"||ie==="AL")){X="R";break}}}X=H<1||(ie=k[H-1])==="B"?"N":F[H-1];break;case"B":T=!1,i=!0,X=_;break;case"S":o=!0,X="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"BN":X="N"}return X},I=function(E,k,F){var H=E.split("");return F&&M(H,F,{hiLevel:_}),H.reverse(),k&&k.reverse(),H.join("")},M=function(E,k,F){var H,ie,$,q,z,X=-1,ne=E.length,se=0,L=[],V=_?y:v,K=[];for(T=!1,i=!1,o=!1,ie=0;ie<ne;ie++)K[ie]=R(E[ie]);for($=0;$<ne;$++){if(z=se,L[$]=D(E,K,L,$),H=240&(se=V[z][S[L[$]]]),se&=15,k[$]=q=V[se][5],H>0)if(H===16){for(ie=X;ie<$;ie++)k[ie]=1;X=-1}else X=-1;if(V[se][6])X===-1&&(X=$);else if(X>-1){for(ie=X;ie<$;ie++)k[ie]=q;X=-1}K[$]==="B"&&(k[$]=0),F.hiLevel|=q}o&&(function(Q,ee,ce){for(var de=0;de<ce;de++)if(Q[de]==="S"){ee[de]=_;for(var pe=de-1;pe>=0&&Q[pe]==="WS";pe--)ee[pe]=_}})(K,k,ne)},j=function(E,k,F,H,ie){if(!(ie.hiLevel<E)){if(E===1&&_===1&&!i)return k.reverse(),void(F&&F.reverse());for(var $,q,z,X,ne=k.length,se=0;se<ne;){if(H[se]>=E){for(z=se+1;z<ne&&H[z]>=E;)z++;for(X=se,q=z-1;X<q;X++,q--)$=k[X],k[X]=k[q],k[q]=$,F&&($=F[X],F[X]=F[q],F[q]=$);se=z}se++}}},J=function(E,k,F){var H=E.split(""),ie={hiLevel:_};return F||(F=[]),M(H,F,ie),(function($,q,z){if(z.hiLevel!==0&&h)for(var X,ne=0;ne<$.length;ne++)q[ne]===1&&(X=w.indexOf($[ne]))>=0&&($[ne]=w[X+1])})(H,F,ie),j(2,H,k,F,ie),j(1,H,k,F,ie),H.join("")};return this.__bidiEngine__.doBidiReorder=function(E,k,F){if((function(ie,$){if($)for(var q=0;q<ie.length;q++)$[q]=q;a===void 0&&(a=P(ie)),c===void 0&&(c=P(ie))})(E,k),s||!l||c)if(s&&l&&a^c)_=a?1:0,E=I(E,k,F);else if(!s&&l&&c)_=a?1:0,E=J(E,k,F),E=I(E,k);else if(!s||a||l||c){if(s&&!l&&a^c)E=I(E,k),a?(_=0,E=J(E,k,F)):(_=1,E=J(E,k,F),E=I(E,k));else if(s&&a&&!l&&c)_=1,E=J(E,k,F),E=I(E,k);else if(!s&&!l&&a^c){var H=h;a?(_=1,E=J(E,k,F),_=0,h=!1,E=J(E,k,F),h=H):(_=0,E=J(E,k,F),E=I(E,k),_=1,h=!1,E=J(E,k,F),h=H,E=I(E,k))}}else _=0,E=J(E,k,F);else _=a?1:0,E=J(E,k,F);return E},this.__bidiEngine__.setOptions=function(E){E&&(s=E.isInputVisual,l=E.isOutputVisual,a=E.isInputRtl,c=E.isOutputRtl,h=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,o=(r.x,r.y,r.options||{}),s=(r.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([n.doBidiReorder(i[a])]);r.text=s}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])})(We),We.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new ri(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new ry(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Vv(this.contents),this.head=new zv(this),this.name=new Kv(this),this.cmap=new eh(this),this.toUnicode={},this.hhea=new Wv(this),this.maxp=new Xv(this),this.hmtx=new Qv(this),this.post=new Jv(this),this.os2=new $v(this),this.loca=new ny(this),this.glyf=new Zv(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,l,c;for(c=[],s=0,a=(l=this.bbox).length;s<a;s++)e=l[s],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(n=i>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return s*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var ir,ri=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,o,s,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],o.push(this.writeByte(n));return o},t})(),Vv=(function(){var t;function e(n){var r,i,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,o,s,a,l,c,h,m,v,y,S,A;for(A in y=Object.keys(n).length,l=Math.log(2),m=16*Math.floor(Math.log(y)/l),s=Math.floor(m/l),h=16*y-m,(i=new ri).writeInt(this.scalarType),i.writeShort(y),i.writeShort(m),i.writeShort(s),i.writeShort(h),o=16*y,c=i.pos+o,a=null,S=[],n)for(v=n[A],i.writeString(A),i.writeInt(t(v)),i.writeInt(c),i.writeInt(v.length),S=S.concat(v),A==="head"&&(a=c),c+=v.length;c%4;)S.push(0),c++;return i.write(S),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,o,s;for(n=th.call(n);n.length%4;)n.push(0);for(o=new ri(n),i=0,r=0,s=n.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),Gv={}.hasOwnProperty,yr=function(t,e){for(var n in e)Gv.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};ir=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var zv=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new ri).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e})(),Ud=(function(){function t(e,n){var r,i,o,s,a,l,c,h,m,v,y,S,A,w,N,T,_;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(y=e.readUInt16(),v=y/2,e.pos+=6,o=(function(){var R,P;for(P=[],l=R=0;0<=v?R<v:R>v;l=0<=v?++R:--R)P.push(e.readUInt16());return P})(),e.pos+=2,A=(function(){var R,P;for(P=[],l=R=0;0<=v?R<v:R>v;l=0<=v?++R:--R)P.push(e.readUInt16());return P})(),c=(function(){var R,P;for(P=[],l=R=0;0<=v?R<v:R>v;l=0<=v?++R:--R)P.push(e.readUInt16());return P})(),h=(function(){var R,P;for(P=[],l=R=0;0<=v?R<v:R>v;l=0<=v?++R:--R)P.push(e.readUInt16());return P})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var R,P;for(P=[],l=R=0;0<=i?R<i:R>i;l=0<=i?++R:--R)P.push(e.readUInt16());return P})(),l=N=0,_=o.length;N<_;l=++N)for(w=o[l],r=T=S=A[l];S<=w?T<=w:T>=w;r=S<=w?++T:--T)h[l]===0?s=r+c[l]:(s=a[h[l]/2+(r-S)-(v-l)]||0)!==0&&(s+=c[l]),this.codeMap[r]=65535&s}e.pos=m}return t.encode=function(e,n){var r,i,o,s,a,l,c,h,m,v,y,S,A,w,N,T,_,R,P,D,I,M,j,J,E,k,F,H,ie,$,q,z,X,ne,se,L,V,K,Q,ee,ce,de,pe,we,Ce,ke;switch(H=new ri,s=Object.keys(e).sort((function(Le,Ge){return Le-Ge})),n){case"macroman":for(A=0,w=(function(){var Le=[];for(S=0;S<256;++S)Le.push(0);return Le})(),T={0:0},o={},ie=0,X=s.length;ie<X;ie++)T[pe=e[i=s[ie]]]==null&&(T[pe]=++A),o[i]={old:e[i],new:T[e[i]]},w[i]=T[e[i]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(w),{charMap:o,subtable:H.data,maxGlyphID:A+1};case"unicode":for(k=[],m=[],_=0,T={},r={},N=c=null,$=0,ne=s.length;$<ne;$++)T[P=e[i=s[$]]]==null&&(T[P]=++_),r[i]={old:P,new:T[P]},a=T[P]-i,N!=null&&a===c||(N&&m.push(N),k.push(i),c=a),N=i;for(N&&m.push(N),m.push(65535),k.push(65535),J=2*(j=k.length),M=2*Math.pow(Math.log(j)/Math.LN2,2),v=Math.log(M/2)/Math.LN2,I=2*j-M,l=[],D=[],y=[],S=q=0,se=k.length;q<se;S=++q){if(E=k[S],h=m[S],E===65535){l.push(0),D.push(0);break}if(E-(F=r[E].new)>=32768)for(l.push(0),D.push(2*(y.length+j-S)),i=z=E;E<=h?z<=h:z>=h;i=E<=h?++z:--z)y.push(r[i].new);else l.push(F-E),D.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*j+2*y.length),H.writeUInt16(0),H.writeUInt16(J),H.writeUInt16(M),H.writeUInt16(v),H.writeUInt16(I),ce=0,L=m.length;ce<L;ce++)i=m[ce],H.writeUInt16(i);for(H.writeUInt16(0),de=0,V=k.length;de<V;de++)i=k[de],H.writeUInt16(i);for(we=0,K=l.length;we<K;we++)a=l[we],H.writeUInt16(a);for(Ce=0,Q=D.length;Ce<Q;Ce++)R=D[Ce],H.writeUInt16(R);for(ke=0,ee=y.length;ke<ee;ke++)A=y[ke],H.writeUInt16(A);return{charMap:r,subtable:H.data,maxGlyphID:_+1}}},t})(),eh=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new Ud(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,o;return r==null&&(r="macroman"),i=Ud.encode(n,r),(o=new ri).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},e})(),Wv=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e})(),$v=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i})(),this.charRange=(function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e})(),Jv=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var s;for(i=n.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)r=n.readByte(),o.push(this.names.push(n.readString(r)));return o;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],s=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;s=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e})(),Yv=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Kv=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,o,s,a,l,c,h,m,v,y;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},s=m=0,v=i.length;m<v;s=++m)o=i[s],n.pos=o.offset,h=n.readString(o.length),a=new Yv(h,o),c[y=o.nameID]==null&&(c[y]=[]),c[o.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e})(),Xv=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e})(),Qv=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,o,s,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var h,m;for(m=[],r=h=0;0<=o?h<o:h>o;r=0<=o?++h:--h)m.push(n.readInt16());return m})(),this.widths=(function(){var h,m,v,y;for(y=[],h=0,m=(v=this.metrics).length;h<m;h++)s=v[h],y.push(s.advance);return y}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=o?a<o:a>o;r=0<=o?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e})(),th=[].slice,Zv=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,o,s,a,l,c,h,m,v;return n in this.cache?this.cache[n]:(s=this.file.loca,r=this.file.contents,i=s.indexOf(n),(o=s.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new ri(r.read(o))).readShort(),h=l.readShort(),v=l.readShort(),c=l.readShort(),m=l.readShort(),this.cache[n]=a===-1?new ty(l,h,v,c,m):new ey(l,a,h,v,c,m),this.cache[n]))},e.prototype.encode=function(n,r,i){var o,s,a,l,c;for(a=[],s=[],l=0,c=r.length;l<c;l++)o=n[r[l]],s.push(a.length),o&&(a=a.concat(o.encode(i)));return s.push(a.length),{table:a,offsets:s}},e})(),ey=(function(){function t(e,n,r,i,o,s){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),ty=(function(){function t(e,n,r,i,o){var s,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new ri(th.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),ny=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return yr(e,ir),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=2)s.push(2*n.readUInt16());return s}).call(this):(function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=4)s.push(n.readUInt32());return s}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),o=0,s=0,a=0;a<i.length;++a)if(i[a]=o,s<r.length&&r[s]==a){++s,i[a]=o;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(o+=c)}for(var h=new Array(4*i.length),m=0;m<i.length;++m)h[4*m+3]=255&i[m],h[4*m+2]=(65280&i[m])>>8,h[4*m+1]=(16711680&i[m])>>16,h[4*m]=(4278190080&i[m])>>24;return h},e})(),ry=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,o;for(n in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,o,s,a,l;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in n=[],i)(r=i[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in l=this.glyphsFor(n))r=l[o],i[o]=r;return i},t.prototype.encode=function(e,n){var r,i,o,s,a,l,c,h,m,v,y,S,A,w,N;for(i in r=eh.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),y={0:0},N=r.charMap)y[(l=N[i]).old]=l.new;for(S in v=r.maxGlyphID,s)S in y||(y[S]=v++);return h=(function(T){var _,R;for(_ in R={},T)R[T[_]]=_;return R})(y),m=Object.keys(h).sort((function(T,_){return T-_})),A=(function(){var T,_,R;for(R=[],T=0,_=m.length;T<_;T++)a=m[T],R.push(h[a]);return R})(),o=this.font.glyf.encode(s,A,y),c=this.font.loca.encode(o.offsets,A),w={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},t})();We.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,o,s;if(Array.isArray(n))return"["+(function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in o=["<<"],n)s=n[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+n},e})();const iy=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Dv,AcroFormAppearance:qe,AcroFormButton:Jt,AcroFormCheckBox:rs,AcroFormChoiceField:wi,AcroFormComboBox:Si,AcroFormEditBox:ts,AcroFormListBox:Ni,AcroFormPasswordField:is,AcroFormPushButton:ns,AcroFormRadioButton:_i,AcroFormTextField:ti,GState:ss,ShadingPattern:Qr,TilingPattern:bi,default:We,jsPDF:We},Symbol.toStringTag,{value:"Module"}));var da={exports:{}};const oy=qh(iy);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var jd=da.exports,Bd;function sy(){return Bd||(Bd=1,(function(t,e){(function(r,i){t.exports=i((function(){try{return oy}catch{}})())})(typeof globalThis<"u"?globalThis:typeof jd<"u"?jd:typeof window<"u"?window:typeof self<"u"?self:Oh,function(n){return(function(){var r={172:(function(a,l){var c=this&&this.__extends||(function(){var v=function(y,S){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,w){A.__proto__=w}||function(A,w){for(var N in w)Object.prototype.hasOwnProperty.call(w,N)&&(A[N]=w[N])},v(y,S)};return function(y,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");v(y,S);function A(){this.constructor=y}y.prototype=S===null?Object.create(S):(A.prototype=S.prototype,new A)}})();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var h=(function(){function v(y,S,A){this.table=S,this.pageNumber=S.pageNumber,this.pageCount=this.pageNumber,this.settings=S.settings,this.cursor=A,this.doc=y.getDocument()}return v})();l.HookData=h;var m=(function(v){c(y,v);function y(S,A,w,N,T,_){var R=v.call(this,S,A,_)||this;return R.cell=w,R.row=N,R.column=T,R.section=N.section,R}return y})(h);l.CellHookData=m}),340:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var h=c(4),m=c(136),v=c(744),y=c(776),S=c(664),A=c(972);function w(N){N.API.autoTable=function(){for(var T=[],_=0;_<arguments.length;_++)T[_]=arguments[_];var R;T.length===1?R=T[0]:(console.error("Use of deprecated autoTable initiation"),R=T[2]||{},R.columns=T[0],R.body=T[1]);var P=(0,y.parseInput)(this,R),D=(0,A.createTable)(this,P);return(0,S.drawTable)(this,D),this},N.API.lastAutoTable=!1,N.API.previousAutoTable=!1,N.API.autoTable.previous=!1,N.API.autoTableText=function(T,_,R,P){(0,m.default)(T,_,R,P,this)},N.API.autoTableSetDefaults=function(T){return v.DocHandler.setDefaults(T,this),this},N.autoTableSetDefaults=function(T,_){v.DocHandler.setDefaults(T,_)},N.API.autoTableHtmlToJson=function(T,_){var R;if(_===void 0&&(_=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var P=new v.DocHandler(this),D=(0,h.parseHtml)(P,T,window,_,!1),I=D.head,M=D.body,j=((R=I[0])===null||R===void 0?void 0:R.map(function(J){return J.content}))||[];return{columns:j,rows:M,data:M}},N.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var T=this.lastAutoTable;return T&&T.finalY?T.finalY:0},N.API.autoTableAddPageContent=function(T){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),N.API.autoTable.globalDefaults||(N.API.autoTable.globalDefaults={}),N.API.autoTable.globalDefaults.addPageContent=T,this},N.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=w}),136:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(h,m,v,y,S){y=y||{};var A=1.15,w=S.internal.scaleFactor,N=S.internal.getFontSize()/w,T=S.getLineHeightFactor?S.getLineHeightFactor():A,_=N*T,R=/\r\n|\r|\n/g,P="",D=1;if((y.valign==="middle"||y.valign==="bottom"||y.halign==="center"||y.halign==="right")&&(P=typeof h=="string"?h.split(R):h,D=P.length||1),v+=N*(2-A),y.valign==="middle"?v-=D/2*_:y.valign==="bottom"&&(v-=D*_),y.halign==="center"||y.halign==="right"){var I=N;if(y.halign==="center"&&(I*=.5),P&&D>=1){for(var M=0;M<P.length;M++)S.text(P[M],m-S.getStringUnitWidth(P[M])*I,v),v+=_;return S}m-=S.getStringUnitWidth(h)*I}return y.halign==="justify"?S.text(h,m,v,{maxWidth:y.maxWidth||100,align:"justify"}):S.text(h,m,v),S}l.default=c}),420:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(S,A,w){w.applyStyles(A,!0);var N=Array.isArray(S)?S:[S],T=N.map(function(_){return w.getTextWidth(_)}).reduce(function(_,R){return Math.max(_,R)},0);return T}l.getStringWidth=c;function h(S,A,w,N){var T=A.settings.tableLineWidth,_=A.settings.tableLineColor;S.applyStyles({lineWidth:T,lineColor:_});var R=m(T,!1);R&&S.rect(w.x,w.y,A.getWidth(S.pageSize().width),N.y-w.y,R)}l.addTableBorder=h;function m(S,A){var w=S>0,N=A||A===0;return w&&N?"DF":w?"S":N?"F":null}l.getFillStyle=m;function v(S,A){var w,N,T,_;if(S=S||A,Array.isArray(S)){if(S.length>=4)return{top:S[0],right:S[1],bottom:S[2],left:S[3]};if(S.length===3)return{top:S[0],right:S[1],bottom:S[2],left:S[1]};if(S.length===2)return{top:S[0],right:S[1],bottom:S[0],left:S[1]};S.length===1?S=S[0]:S=A}return typeof S=="object"?(typeof S.vertical=="number"&&(S.top=S.vertical,S.bottom=S.vertical),typeof S.horizontal=="number"&&(S.right=S.horizontal,S.left=S.horizontal),{left:(w=S.left)!==null&&w!==void 0?w:A,top:(N=S.top)!==null&&N!==void 0?N:A,right:(T=S.right)!==null&&T!==void 0?T:A,bottom:(_=S.bottom)!==null&&_!==void 0?_:A}):(typeof S!="number"&&(S=A),{top:S,right:S,bottom:S,left:S})}l.parseSpacing=v;function y(S,A){var w=v(A.settings.margin,0);return S.pageSize().width-(w.left+w.right)}l.getPageAvailableWidth=y}),796:(function(a,l){var c=this&&this.__extends||(function(){var y=function(S,A){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,N){w.__proto__=N}||function(w,N){for(var T in N)Object.prototype.hasOwnProperty.call(N,T)&&(w[T]=N[T])},y(S,A)};return function(S,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");y(S,A);function w(){this.constructor=S}S.prototype=A===null?Object.create(A):(w.prototype=A.prototype,new w)}})();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var h=(function(y){c(S,y);function S(A){var w=y.call(this)||this;return w._element=A,w}return S})(Array);l.HtmlRowInput=h;function m(y){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/y,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=m;function v(y){var S={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return S[y]}l.getTheme=v}),903:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var h=c(420);function m(w,N,T,_,R){var P={},D=1.3333333333333333,I=y(N,function(X){return R.getComputedStyle(X).backgroundColor});I!=null&&(P.fillColor=I);var M=y(N,function(X){return R.getComputedStyle(X).color});M!=null&&(P.textColor=M);var j=A(_,T);j&&(P.cellPadding=j);var J="borderTopColor",E=D*T,k=_.borderTopWidth;if(_.borderBottomWidth===k&&_.borderRightWidth===k&&_.borderLeftWidth===k){var F=(parseFloat(k)||0)/E;F&&(P.lineWidth=F)}else P.lineWidth={top:(parseFloat(_.borderTopWidth)||0)/E,right:(parseFloat(_.borderRightWidth)||0)/E,bottom:(parseFloat(_.borderBottomWidth)||0)/E,left:(parseFloat(_.borderLeftWidth)||0)/E},P.lineWidth.top||(P.lineWidth.right?J="borderRightColor":P.lineWidth.bottom?J="borderBottomColor":P.lineWidth.left&&(J="borderLeftColor"));var H=y(N,function(X){return R.getComputedStyle(X)[J]});H!=null&&(P.lineColor=H);var ie=["left","right","center","justify"];ie.indexOf(_.textAlign)!==-1&&(P.halign=_.textAlign),ie=["middle","bottom","top"],ie.indexOf(_.verticalAlign)!==-1&&(P.valign=_.verticalAlign);var $=parseInt(_.fontSize||"");isNaN($)||(P.fontSize=$/D);var q=v(_);q&&(P.fontStyle=q);var z=(_.fontFamily||"").toLowerCase();return w.indexOf(z)!==-1&&(P.font=z),P}l.parseCss=m;function v(w){var N="";return(w.fontWeight==="bold"||w.fontWeight==="bolder"||parseInt(w.fontWeight)>=700)&&(N="bold"),(w.fontStyle==="italic"||w.fontStyle==="oblique")&&(N+="italic"),N}function y(w,N){var T=S(w,N);if(!T)return null;var _=T.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!_||!Array.isArray(_))return null;var R=[parseInt(_[1]),parseInt(_[2]),parseInt(_[3])],P=parseInt(_[4]);return P===0||isNaN(R[0])||isNaN(R[1])||isNaN(R[2])?null:R}function S(w,N){var T=N(w);return T==="rgba(0, 0, 0, 0)"||T==="transparent"||T==="initial"||T==="inherit"?w.parentElement==null?null:S(w.parentElement,N):T}function A(w,N){var T=[w.paddingTop,w.paddingRight,w.paddingBottom,w.paddingLeft],_=96/(72/N),R=(parseInt(w.lineHeight)-parseInt(w.fontSize))/N/2,P=T.map(function(I){return parseInt(I||"0")/_}),D=(0,h.parseSpacing)(P,0);return R>D.top&&(D.top=R),R>D.bottom&&(D.bottom=R),D}}),744:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},h=(function(){function m(v){this.jsPDFDocument=v,this.userStyles={textColor:v.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:v.internal.getFontSize(),fontStyle:v.internal.getFont().fontStyle,font:v.internal.getFont().fontName,lineWidth:v.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:v.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return m.setDefaults=function(v,y){y===void 0&&(y=null),y?y.__autoTableDocumentDefaults=v:c=v},m.unifyColor=function(v){return Array.isArray(v)?v:typeof v=="number"?[v,v,v]:typeof v=="string"?[v]:null},m.prototype.applyStyles=function(v,y){var S,A,w;y===void 0&&(y=!1),v.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(v.fontStyle);var N=this.jsPDFDocument.internal.getFont(),T=N.fontStyle,_=N.fontName;if(v.font&&(_=v.font),v.fontStyle){T=v.fontStyle;var R=this.getFontList()[_];R&&R.indexOf(T)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(R[0]),T=R[0])}if(this.jsPDFDocument.setFont(_,T),v.fontSize&&this.jsPDFDocument.setFontSize(v.fontSize),!y){var P=m.unifyColor(v.fillColor);P&&(S=this.jsPDFDocument).setFillColor.apply(S,P),P=m.unifyColor(v.textColor),P&&(A=this.jsPDFDocument).setTextColor.apply(A,P),P=m.unifyColor(v.lineColor),P&&(w=this.jsPDFDocument).setDrawColor.apply(w,P),typeof v.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(v.lineWidth)}},m.prototype.splitTextToSize=function(v,y,S){return this.jsPDFDocument.splitTextToSize(v,y,S)},m.prototype.rect=function(v,y,S,A,w){return this.jsPDFDocument.rect(v,y,S,A,w)},m.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},m.prototype.getTextWidth=function(v){return this.jsPDFDocument.getTextWidth(v)},m.prototype.getDocument=function(){return this.jsPDFDocument},m.prototype.setPage=function(v){this.jsPDFDocument.setPage(v)},m.prototype.addPage=function(){return this.jsPDFDocument.addPage()},m.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},m.prototype.getGlobalOptions=function(){return c||{}},m.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},m.prototype.pageSize=function(){var v=this.jsPDFDocument.internal.pageSize;return v.width==null&&(v={width:v.getWidth(),height:v.getHeight()}),v},m.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},m.prototype.getLineHeightFactor=function(){var v=this.jsPDFDocument;return v.getLineHeightFactor?v.getLineHeightFactor():1.15},m.prototype.getLineHeight=function(v){return v/this.scaleFactor()*this.getLineHeightFactor()},m.prototype.pageNumber=function(){var v=this.jsPDFDocument.internal.getCurrentPageInfo();return v?v.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},m})();l.DocHandler=h}),4:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var h=c(903),m=c(796);function v(A,w,N,T,_){var R,P;T===void 0&&(T=!1),_===void 0&&(_=!1);var D;typeof w=="string"?D=N.document.querySelector(w):D=w;var I=Object.keys(A.getFontList()),M=A.scaleFactor(),j=[],J=[],E=[];if(!D)return console.error("Html table could not be found with input: ",w),{head:j,body:J,foot:E};for(var k=0;k<D.rows.length;k++){var F=D.rows[k],H=(P=(R=F==null?void 0:F.parentElement)===null||R===void 0?void 0:R.tagName)===null||P===void 0?void 0:P.toLowerCase(),ie=y(I,M,N,F,T,_);ie&&(H==="thead"?j.push(ie):H==="tfoot"?E.push(ie):J.push(ie))}return{head:j,body:J,foot:E}}l.parseHtml=v;function y(A,w,N,T,_,R){for(var P=new m.HtmlRowInput(T),D=0;D<T.cells.length;D++){var I=T.cells[D],M=N.getComputedStyle(I);if(_||M.display!=="none"){var j=void 0;R&&(j=(0,h.parseCss)(A,I,w,M,N)),P.push({rowSpan:I.rowSpan,colSpan:I.colSpan,styles:j,_element:I,content:S(I)})}}var J=N.getComputedStyle(T);if(P.length>0&&(_||J.display!=="none"))return P}function S(A){var w=A.cloneNode(!0);return w.innerHTML=w.innerHTML.replace(/\n/g,"").replace(/ +/g," "),w.innerHTML=w.innerHTML.split(/<br.*?>/).map(function(N){return N.trim()}).join(`
`),w.innerText||w.textContent||""}}),776:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var h=c(4),m=c(356),v=c(420),y=c(744),S=c(792);function A(D,I){var M=new y.DocHandler(D),j=M.getDocumentOptions(),J=M.getGlobalOptions();(0,S.default)(M,J,j,I);var E=(0,m.assign)({},J,j,I),k;typeof window<"u"&&(k=window);var F=w(J,j,I),H=N(J,j,I),ie=T(M,E),$=R(M,E,k);return{id:I.tableId,content:$,hooks:H,styles:F,settings:ie}}l.parseInput=A;function w(D,I,M){for(var j={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},J=function(H){if(H==="columnStyles"){var ie=D[H],$=I[H],q=M[H];j.columnStyles=(0,m.assign)({},ie,$,q)}else{var z=[D,I,M],X=z.map(function(ne){return ne[H]||{}});j[H]=(0,m.assign)({},X[0],X[1],X[2])}},E=0,k=Object.keys(j);E<k.length;E++){var F=k[E];J(F)}return j}function N(D,I,M){for(var j=[D,I,M],J={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},E=0,k=j;E<k.length;E++){var F=k[E];F.didParseCell&&J.didParseCell.push(F.didParseCell),F.willDrawCell&&J.willDrawCell.push(F.willDrawCell),F.didDrawCell&&J.didDrawCell.push(F.didDrawCell),F.willDrawPage&&J.willDrawPage.push(F.willDrawPage),F.didDrawPage&&J.didDrawPage.push(F.didDrawPage)}return J}function T(D,I){var M,j,J,E,k,F,H,ie,$,q,z,X,ne=(0,v.parseSpacing)(I.margin,40/D.scaleFactor()),se=(M=_(D,I.startY))!==null&&M!==void 0?M:ne.top,L;I.showFoot===!0?L="everyPage":I.showFoot===!1?L="never":L=(j=I.showFoot)!==null&&j!==void 0?j:"everyPage";var V;I.showHead===!0?V="everyPage":I.showHead===!1?V="never":V=(J=I.showHead)!==null&&J!==void 0?J:"everyPage";var K=(E=I.useCss)!==null&&E!==void 0?E:!1,Q=I.theme||(K?"plain":"striped"),ee=!!I.horizontalPageBreak,ce=(k=I.horizontalPageBreakRepeat)!==null&&k!==void 0?k:null;return{includeHiddenHtml:(F=I.includeHiddenHtml)!==null&&F!==void 0?F:!1,useCss:K,theme:Q,startY:se,margin:ne,pageBreak:(H=I.pageBreak)!==null&&H!==void 0?H:"auto",rowPageBreak:(ie=I.rowPageBreak)!==null&&ie!==void 0?ie:"auto",tableWidth:($=I.tableWidth)!==null&&$!==void 0?$:"auto",showHead:V,showFoot:L,tableLineWidth:(q=I.tableLineWidth)!==null&&q!==void 0?q:0,tableLineColor:(z=I.tableLineColor)!==null&&z!==void 0?z:200,horizontalPageBreak:ee,horizontalPageBreakRepeat:ce,horizontalPageBreakBehaviour:(X=I.horizontalPageBreakBehaviour)!==null&&X!==void 0?X:"afterAllRows"}}function _(D,I){var M=D.getLastAutoTable(),j=D.scaleFactor(),J=D.pageNumber(),E=!1;if(M&&M.startPageNumber){var k=M.startPageNumber+M.pageNumber-1;E=k===J}return typeof I=="number"?I:(I==null||I===!1)&&E&&(M==null?void 0:M.finalY)!=null?M.finalY+20/j:null}function R(D,I,M){var j=I.head||[],J=I.body||[],E=I.foot||[];if(I.html){var k=I.includeHiddenHtml;if(M){var F=(0,h.parseHtml)(D,I.html,M,k,I.useCss)||{};j=F.head||j,J=F.body||j,E=F.foot||j}else console.error("Cannot parse html in non browser environment")}var H=I.columns||P(j,J,E);return{columns:H,head:j,body:J,foot:E}}function P(D,I,M){var j=D[0]||I[0]||M[0]||[],J=[];return Object.keys(j).filter(function(E){return E!=="_element"}).forEach(function(E){var k=1,F;Array.isArray(j)?F=j[parseInt(E)]:F=j[E],typeof F=="object"&&!Array.isArray(F)&&(k=(F==null?void 0:F.colSpan)||1);for(var H=0;H<k;H++){var ie=void 0;Array.isArray(j)?ie=J.length:ie=E+(H>0?"_".concat(H):"");var $={dataKey:ie};J.push($)}}),J}}),792:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(m,v,y,S){for(var A=function(_){_&&typeof _!="object"&&console.error("The options parameter should be of type object, is: "+typeof _),typeof _.extendWidth<"u"&&(_.tableWidth=_.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof _.margins<"u"&&(typeof _.margin>"u"&&(_.margin=_.margins),console.error("Use of deprecated option: margins, use margin instead.")),_.startY&&typeof _.startY!="number"&&(console.error("Invalid value for startY option",_.startY),delete _.startY),!_.didDrawPage&&(_.afterPageContent||_.beforePageContent||_.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),_.didDrawPage=function(E){m.applyStyles(m.userStyles),_.beforePageContent&&_.beforePageContent(E),m.applyStyles(m.userStyles),_.afterPageContent&&_.afterPageContent(E),m.applyStyles(m.userStyles),_.afterPageAdd&&E.pageNumber>1&&E.afterPageAdd(E),m.applyStyles(m.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(E){_[E]&&console.error('The "'.concat(E,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(E){var k=E[0],F=E[1];_[F]&&(console.error("Use of deprecated option ".concat(F,". Use ").concat(k," instead")),_[k]=_[F])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(E){var k=typeof E=="string"?E:E[0],F=typeof E=="string"?E:E[1];typeof _[k]<"u"&&(typeof _.styles[F]>"u"&&(_.styles[F]=_[k]),console.error("Use of deprecated option: "+k+", use the style "+F+" instead."))});for(var R=0,P=["styles","bodyStyles","headStyles","footStyles"];R<P.length;R++){var D=P[R];h(_[D]||{})}for(var I=_.columnStyles||{},M=0,j=Object.keys(I);M<j.length;M++){var J=j[M];h(I[J]||{})}},w=0,N=[v,y,S];w<N.length;w++){var T=N[w];A(T)}}l.default=c;function h(m){m.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),m.minCellHeight||(m.minCellHeight=m.rowHeight)):m.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),m.cellWidth||(m.cellWidth=m.columnWidth))}}),260:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var h=c(796),m=c(172),v=c(420),y=(function(){function N(T,_){this.pageNumber=1,this.pageCount=1,this.id=T.id,this.settings=T.settings,this.styles=T.styles,this.hooks=T.hooks,this.columns=_.columns,this.head=_.head,this.body=_.body,this.foot=_.foot}return N.prototype.getHeadHeight=function(T){return this.head.reduce(function(_,R){return _+R.getMaxCellHeight(T)},0)},N.prototype.getFootHeight=function(T){return this.foot.reduce(function(_,R){return _+R.getMaxCellHeight(T)},0)},N.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},N.prototype.callCellHooks=function(T,_,R,P,D,I){for(var M=0,j=_;M<j.length;M++){var J=j[M],E=new m.CellHookData(T,this,R,P,D,I),k=J(E)===!1;if(R.text=Array.isArray(R.text)?R.text:[R.text],k)return!1}return!0},N.prototype.callEndPageHooks=function(T,_){T.applyStyles(T.userStyles);for(var R=0,P=this.hooks.didDrawPage;R<P.length;R++){var D=P[R];D(new m.HookData(T,this,_))}},N.prototype.callWillDrawPageHooks=function(T,_){for(var R=0,P=this.hooks.willDrawPage;R<P.length;R++){var D=P[R];D(new m.HookData(T,this,_))}},N.prototype.getWidth=function(T){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var _=this.columns.reduce(function(P,D){return P+D.wrappedWidth},0);return _}else{var R=this.settings.margin;return T-R.left-R.right}},N})();l.Table=y;var S=(function(){function N(T,_,R,P,D){D===void 0&&(D=!1),this.height=0,this.raw=T,T instanceof h.HtmlRowInput&&(this.raw=T._element,this.element=T._element),this.index=_,this.section=R,this.cells=P,this.spansMultiplePages=D}return N.prototype.getMaxCellHeight=function(T){var _=this;return T.reduce(function(R,P){var D;return Math.max(R,((D=_.cells[P.index])===null||D===void 0?void 0:D.height)||0)},0)},N.prototype.hasRowSpan=function(T){var _=this;return T.filter(function(R){var P=_.cells[R.index];return P?P.rowSpan>1:!1}).length>0},N.prototype.canEntireRowFit=function(T,_){return this.getMaxCellHeight(_)<=T},N.prototype.getMinimumRowHeight=function(T,_){var R=this;return T.reduce(function(P,D){var I=R.cells[D.index];if(!I)return 0;var M=_.getLineHeight(I.styles.fontSize),j=I.padding("vertical"),J=j+M;return J>P?J:P},0)},N})();l.Row=S;var A=(function(){function N(T,_,R){var P,D;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=_,this.section=R,this.raw=T;var I=T;T!=null&&typeof T=="object"&&!Array.isArray(T)?(this.rowSpan=T.rowSpan||1,this.colSpan=T.colSpan||1,I=(D=(P=T.content)!==null&&P!==void 0?P:T.title)!==null&&D!==void 0?D:T,T._element&&(this.raw=T._element)):(this.rowSpan=1,this.colSpan=1);var M=I!=null?""+I:"",j=/\r\n|\r|\n/g;this.text=M.split(j)}return N.prototype.getTextPos=function(){var T;if(this.styles.valign==="top")T=this.y+this.padding("top");else if(this.styles.valign==="bottom")T=this.y+this.height-this.padding("bottom");else{var _=this.height-this.padding("vertical");T=this.y+_/2+this.padding("top")}var R;if(this.styles.halign==="right")R=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var P=this.width-this.padding("horizontal");R=this.x+P/2+this.padding("left")}else R=this.x+this.padding("left");return{x:R,y:T}},N.prototype.getContentHeight=function(T,_){_===void 0&&(_=1.15);var R=Array.isArray(this.text)?this.text.length:1,P=this.styles.fontSize/T*_,D=R*P+this.padding("vertical");return Math.max(D,this.styles.minCellHeight)},N.prototype.padding=function(T){var _=(0,v.parseSpacing)(this.styles.cellPadding,0);return T==="vertical"?_.top+_.bottom:T==="horizontal"?_.left+_.right:_[T]},N})();l.Cell=A;var w=(function(){function N(T,_,R){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=T,this.raw=_,this.index=R}return N.prototype.getMaxCustomCellWidth=function(T){for(var _=0,R=0,P=T.allRows();R<P.length;R++){var D=P[R],I=D.cells[this.index];I&&typeof I.styles.cellWidth=="number"&&(_=Math.max(_,I.styles.cellWidth))}return _},N})();l.Column=w}),356:(function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(h,m,v,y,S){if(h==null)throw new TypeError("Cannot convert undefined or null to object");for(var A=Object(h),w=1;w<arguments.length;w++){var N=arguments[w];if(N!=null)for(var T in N)Object.prototype.hasOwnProperty.call(N,T)&&(A[T]=N[T])}return A}l.assign=c}),972:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var h=c(744),m=c(260),v=c(324),y=c(796),S=c(356);function A(D,I){var M=new h.DocHandler(D),j=w(I,M.scaleFactor()),J=new m.Table(I,j);return(0,v.calculateWidths)(M,J),M.applyStyles(M.userStyles),J}l.createTable=A;function w(D,I){var M=D.content,j=R(M.columns);if(M.head.length===0){var J=T(j,"head");J&&M.head.push(J)}if(M.foot.length===0){var J=T(j,"foot");J&&M.foot.push(J)}var E=D.settings.theme,k=D.styles;return{columns:j,head:N("head",M.head,j,k,E,I),body:N("body",M.body,j,k,E,I),foot:N("foot",M.foot,j,k,E,I)}}function N(D,I,M,j,J,E){var k={},F=I.map(function(H,ie){for(var $=0,q={},z=0,X=0,ne=0,se=M;ne<se.length;ne++){var L=se[ne];if(k[L.index]==null||k[L.index].left===0)if(X===0){var V=void 0;Array.isArray(H)?V=H[L.index-z-$]:V=H[L.dataKey];var K={};typeof V=="object"&&!Array.isArray(V)&&(K=(V==null?void 0:V.styles)||{});var Q=P(D,L,ie,J,j,E,K),ee=new m.Cell(V,Q,D);q[L.dataKey]=ee,q[L.index]=ee,X=ee.colSpan-1,k[L.index]={left:ee.rowSpan-1,times:X}}else X--,z++;else k[L.index].left--,X=k[L.index].times,$++}return new m.Row(H,ie,D,q)});return F}function T(D,I){var M={};return D.forEach(function(j){if(j.raw!=null){var J=_(I,j.raw);J!=null&&(M[j.dataKey]=J)}}),Object.keys(M).length>0?M:null}function _(D,I){if(D==="head"){if(typeof I=="object")return I.header||I.title||null;if(typeof I=="string"||typeof I=="number")return I}else if(D==="foot"&&typeof I=="object")return I.footer;return null}function R(D){return D.map(function(I,M){var j,J,E;return typeof I=="object"?E=(J=(j=I.dataKey)!==null&&j!==void 0?j:I.key)!==null&&J!==void 0?J:M:E=M,new m.Column(E,I,M)})}function P(D,I,M,j,J,E,k){var F=(0,y.getTheme)(j),H;D==="head"?H=J.headStyles:D==="body"?H=J.bodyStyles:D==="foot"&&(H=J.footStyles);var ie=(0,S.assign)({},F.table,F[D],J.styles,H),$=J.columnStyles[I.dataKey]||J.columnStyles[I.index]||{},q=D==="body"?$:{},z=D==="body"&&M%2===0?(0,S.assign)({},F.alternateRow,J.alternateRowStyles):{},X=(0,y.defaultStyles)(E),ne=(0,S.assign)({},X,ie,z,q);return(0,S.assign)(ne,k)}}),664:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var h=c(420),m=c(260),v=c(744),y=c(356),S=c(136),A=c(224);function w($,q){var z=q.settings,X=z.startY,ne=z.margin,se={x:ne.left,y:X},L=q.getHeadHeight(q.columns)+q.getFootHeight(q.columns),V=X+ne.bottom+L;if(z.pageBreak==="avoid"){var K=q.body,Q=K.reduce(function(de,pe){return de+pe.height},0);V+=Q}var ee=new v.DocHandler($);(z.pageBreak==="always"||z.startY!=null&&V>ee.pageSize().height)&&(ie(ee),se.y=ne.top),q.callWillDrawPageHooks(ee,se);var ce=(0,y.assign)({},se);q.startPageNumber=ee.pageNumber(),z.horizontalPageBreak?N(ee,q,ce,se):(ee.applyStyles(ee.userStyles),(z.showHead==="firstPage"||z.showHead==="everyPage")&&q.head.forEach(function(de){return J(ee,q,de,se,q.columns)}),ee.applyStyles(ee.userStyles),q.body.forEach(function(de,pe){var we=pe===q.body.length-1;j(ee,q,de,we,ce,se,q.columns)}),ee.applyStyles(ee.userStyles),(z.showFoot==="lastPage"||z.showFoot==="everyPage")&&q.foot.forEach(function(de){return J(ee,q,de,se,q.columns)})),(0,h.addTableBorder)(ee,q,ce,se),q.callEndPageHooks(ee,se),q.finalY=se.y,$.lastAutoTable=q,$.previousAutoTable=q,$.autoTable&&($.autoTable.previous=q),ee.applyStyles(ee.userStyles)}l.drawTable=w;function N($,q,z,X){var ne=(0,A.calculateAllColumnsCanFitInPage)($,q),se=q.settings;if(se.horizontalPageBreakBehaviour==="afterAllRows")ne.forEach(function(Q,ee){$.applyStyles($.userStyles),ee>0?H($,q,z,X,Q.columns,!0):T($,q,X,Q.columns),_($,q,z,X,Q.columns),P($,q,X,Q.columns)});else for(var L=-1,V=ne[0],K=function(){var Q=L;if(V){$.applyStyles($.userStyles);var ee=V.columns;L>=0?H($,q,z,X,ee,!0):T($,q,X,ee),Q=R($,q,L+1,X,ee),P($,q,X,ee)}var ce=Q-L;ne.slice(1).forEach(function(de){$.applyStyles($.userStyles),H($,q,z,X,de.columns,!0),R($,q,L+1,X,de.columns,ce),P($,q,X,de.columns)}),L=Q};L<q.body.length-1;)K()}function T($,q,z,X){var ne=q.settings;$.applyStyles($.userStyles),(ne.showHead==="firstPage"||ne.showHead==="everyPage")&&q.head.forEach(function(se){return J($,q,se,z,X)})}function _($,q,z,X,ne){$.applyStyles($.userStyles),q.body.forEach(function(se,L){var V=L===q.body.length-1;j($,q,se,V,z,X,ne)})}function R($,q,z,X,ne,se){$.applyStyles($.userStyles),se=se??q.body.length;var L=Math.min(z+se,q.body.length),V=-1;return q.body.slice(z,L).forEach(function(K,Q){var ee=z+Q===q.body.length-1,ce=F($,q,ee,X);K.canEntireRowFit(ce,ne)&&(J($,q,K,X,ne),V=z+Q)}),V}function P($,q,z,X){var ne=q.settings;$.applyStyles($.userStyles),(ne.showFoot==="lastPage"||ne.showFoot==="everyPage")&&q.foot.forEach(function(se){return J($,q,se,z,X)})}function D($,q,z){var X=z.getLineHeight($.styles.fontSize),ne=$.padding("vertical"),se=Math.floor((q-ne)/X);return Math.max(0,se)}function I($,q,z,X){var ne={};$.spansMultiplePages=!0,$.height=0;for(var se=0,L=0,V=z.columns;L<V.length;L++){var K=V[L],Q=$.cells[K.index];if(Q){Array.isArray(Q.text)||(Q.text=[Q.text]);var ee=new m.Cell(Q.raw,Q.styles,Q.section);ee=(0,y.assign)(ee,Q),ee.text=[];var ce=D(Q,q,X);Q.text.length>ce&&(ee.text=Q.text.splice(ce,Q.text.length));var de=X.scaleFactor(),pe=X.getLineHeightFactor();Q.contentHeight=Q.getContentHeight(de,pe),Q.contentHeight>=q&&(Q.contentHeight=q,ee.styles.minCellHeight-=q),Q.contentHeight>$.height&&($.height=Q.contentHeight),ee.contentHeight=ee.getContentHeight(de,pe),ee.contentHeight>se&&(se=ee.contentHeight),ne[K.index]=ee}}var we=new m.Row($.raw,-1,$.section,ne,!0);we.height=se;for(var Ce=0,ke=z.columns;Ce<ke.length;Ce++){var K=ke[Ce],ee=we.cells[K.index];ee&&(ee.height=we.height);var Q=$.cells[K.index];Q&&(Q.height=$.height)}return we}function M($,q,z,X){var ne=$.pageSize().height,se=X.settings.margin,L=se.top+se.bottom,V=ne-L;q.section==="body"&&(V-=X.getHeadHeight(X.columns)+X.getFootHeight(X.columns));var K=q.getMinimumRowHeight(X.columns,$),Q=K<z;if(K>V)return console.error("Will not be able to print row ".concat(q.index," correctly since it's minimum height is larger than page height")),!0;if(!Q)return!1;var ee=q.hasRowSpan(X.columns),ce=q.getMaxCellHeight(X.columns)>V;return ce?(ee&&console.error("The content of row ".concat(q.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ee||X.settings.rowPageBreak==="avoid")}function j($,q,z,X,ne,se,L){var V=F($,q,X,se);if(z.canEntireRowFit(V,L))J($,q,z,se,L);else if(M($,z,V,q)){var K=I(z,V,q,$);J($,q,z,se,L),H($,q,ne,se,L),j($,q,K,X,ne,se,L)}else H($,q,ne,se,L),j($,q,z,X,ne,se,L)}function J($,q,z,X,ne){X.x=q.settings.margin.left;for(var se=0,L=ne;se<L.length;se++){var V=L[se],K=z.cells[V.index];if(!K){X.x+=V.width;continue}$.applyStyles(K.styles),K.x=X.x,K.y=X.y;var Q=q.callCellHooks($,q.hooks.willDrawCell,K,z,V,X);if(Q===!1){X.x+=V.width;continue}E($,K,X);var ee=K.getTextPos();(0,S.default)(K.text,ee.x,ee.y,{halign:K.styles.halign,valign:K.styles.valign,maxWidth:Math.ceil(K.width-K.padding("left")-K.padding("right"))},$.getDocument()),q.callCellHooks($,q.hooks.didDrawCell,K,z,V,X),X.x+=V.width}X.y+=z.height}function E($,q,z){var X=q.styles;if($.getDocument().setFillColor($.getDocument().getFillColor()),typeof X.lineWidth=="number"){var ne=(0,h.getFillStyle)(X.lineWidth,X.fillColor);ne&&$.rect(q.x,z.y,q.width,q.height,ne)}else typeof X.lineWidth=="object"&&(X.fillColor&&$.rect(q.x,z.y,q.width,q.height,"F"),k($,q,z,X.lineWidth))}function k($,q,z,X){var ne,se,L,V;X.top&&(ne=z.x,se=z.y,L=z.x+q.width,V=z.y,X.right&&(L+=.5*X.right),X.left&&(ne-=.5*X.left),K(X.top,ne,se,L,V)),X.bottom&&(ne=z.x,se=z.y+q.height,L=z.x+q.width,V=z.y+q.height,X.right&&(L+=.5*X.right),X.left&&(ne-=.5*X.left),K(X.bottom,ne,se,L,V)),X.left&&(ne=z.x,se=z.y,L=z.x,V=z.y+q.height,X.top&&(se-=.5*X.top),X.bottom&&(V+=.5*X.bottom),K(X.left,ne,se,L,V)),X.right&&(ne=z.x+q.width,se=z.y,L=z.x+q.width,V=z.y+q.height,X.top&&(se-=.5*X.top),X.bottom&&(V+=.5*X.bottom),K(X.right,ne,se,L,V));function K(Q,ee,ce,de,pe){$.getDocument().setLineWidth(Q),$.getDocument().line(ee,ce,de,pe,"S")}}function F($,q,z,X){var ne=q.settings.margin.bottom,se=q.settings.showFoot;return(se==="everyPage"||se==="lastPage"&&z)&&(ne+=q.getFootHeight(q.columns)),$.pageSize().height-X.y-ne}function H($,q,z,X,ne,se){ne===void 0&&(ne=[]),se===void 0&&(se=!1),$.applyStyles($.userStyles),q.settings.showFoot==="everyPage"&&!se&&q.foot.forEach(function(V){return J($,q,V,X,ne)}),q.callEndPageHooks($,X);var L=q.settings.margin;(0,h.addTableBorder)($,q,z,X),ie($),q.pageNumber++,q.pageCount++,X.x=L.left,X.y=L.top,z.y=L.top,q.callWillDrawPageHooks($,X),q.settings.showHead==="everyPage"&&(q.head.forEach(function(V){return J($,q,V,X,ne)}),$.applyStyles($.userStyles))}l.addPage=H;function ie($){var q=$.pageNumber();$.setPage(q+1);var z=$.pageNumber();return z===q?($.addPage(),!0):!1}}),224:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var h=c(420);function m(y,S,A){var w;A===void 0&&(A={});var N=(0,h.getPageAvailableWidth)(y,S),T=new Map,_=[],R=[],P=[];S.settings.horizontalPageBreakRepeat,Array.isArray(S.settings.horizontalPageBreakRepeat)?P=S.settings.horizontalPageBreakRepeat:(typeof S.settings.horizontalPageBreakRepeat=="string"||typeof S.settings.horizontalPageBreakRepeat=="number")&&(P=[S.settings.horizontalPageBreakRepeat]),P.forEach(function(j){var J=S.columns.find(function(E){return E.dataKey===j||E.index===j});J&&!T.has(J.index)&&(T.set(J.index,!0),_.push(J.index),R.push(S.columns[J.index]),N-=J.wrappedWidth)});for(var D=!0,I=(w=A==null?void 0:A.start)!==null&&w!==void 0?w:0;I<S.columns.length;){if(T.has(I)){I++;continue}var M=S.columns[I].wrappedWidth;if(D||N>=M)D=!1,_.push(I),R.push(S.columns[I]),N-=M;else break;I++}return{colIndexes:_,columns:R,lastIndex:I-1}}function v(y,S){for(var A=[],w=0;w<S.columns.length;w++){var N=m(y,S,{start:w});N.columns.length&&(A.push(N),w=N.lastIndex)}return A}l.calculateAllColumnsCanFitInPage=v}),324:(function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var h=c(420);function m(_,R){v(_,R);var P=[],D=0;R.columns.forEach(function(M){var j=M.getMaxCustomCellWidth(R);j?M.width=j:(M.width=M.wrappedWidth,P.push(M)),D+=M.width});var I=R.getWidth(_.pageSize().width)-D;I&&(I=y(P,I,function(M){return Math.max(M.minReadableWidth,M.minWidth)})),I&&(I=y(P,I,function(M){return M.minWidth})),I=Math.abs(I),!R.settings.horizontalPageBreak&&I>.1/_.scaleFactor()&&(I=I<1?I:Math.round(I),console.warn("Of the table content, ".concat(I," units width could not fit page"))),A(R),w(R,_),S(R)}l.calculateWidths=m;function v(_,R){var P=_.scaleFactor(),D=R.settings.horizontalPageBreak,I=(0,h.getPageAvailableWidth)(_,R);R.allRows().forEach(function(M){for(var j=0,J=R.columns;j<J.length;j++){var E=J[j],k=M.cells[E.index];if(k){var F=R.hooks.didParseCell;R.callCellHooks(_,F,k,M,E,null);var H=k.padding("horizontal");k.contentWidth=(0,h.getStringWidth)(k.text,k.styles,_)+H;var ie=(0,h.getStringWidth)(k.text.join(" ").split(/[^\S\u00A0]+/),k.styles,_);if(k.minReadableWidth=ie+k.padding("horizontal"),typeof k.styles.cellWidth=="number")k.minWidth=k.styles.cellWidth,k.wrappedWidth=k.styles.cellWidth;else if(k.styles.cellWidth==="wrap"||D===!0)k.contentWidth>I?(k.minWidth=I,k.wrappedWidth=I):(k.minWidth=k.contentWidth,k.wrappedWidth=k.contentWidth);else{var $=10/P;k.minWidth=k.styles.minCellWidth||$,k.wrappedWidth=k.contentWidth,k.minWidth>k.wrappedWidth&&(k.wrappedWidth=k.minWidth)}}}}),R.allRows().forEach(function(M){for(var j=0,J=R.columns;j<J.length;j++){var E=J[j],k=M.cells[E.index];if(k&&k.colSpan===1)E.wrappedWidth=Math.max(E.wrappedWidth,k.wrappedWidth),E.minWidth=Math.max(E.minWidth,k.minWidth),E.minReadableWidth=Math.max(E.minReadableWidth,k.minReadableWidth);else{var F=R.styles.columnStyles[E.dataKey]||R.styles.columnStyles[E.index]||{},H=F.cellWidth||F.minCellWidth;H&&typeof H=="number"&&(E.minWidth=H,E.wrappedWidth=H)}k&&(k.colSpan>1&&!E.minWidth&&(E.minWidth=k.minWidth),k.colSpan>1&&!E.wrappedWidth&&(E.wrappedWidth=k.minWidth))}})}function y(_,R,P){for(var D=R,I=_.reduce(function($,q){return $+q.wrappedWidth},0),M=0;M<_.length;M++){var j=_[M],J=j.wrappedWidth/I,E=D*J,k=j.width+E,F=P(j),H=k<F?F:k;R-=H-j.width,j.width=H}if(R=Math.round(R*1e10)/1e10,R){var ie=_.filter(function($){return R<0?$.width>P($):!0});ie.length&&(R=y(ie,R,P))}return R}l.resizeColumns=y;function S(_){for(var R={},P=1,D=_.allRows(),I=0;I<D.length;I++)for(var M=D[I],j=0,J=_.columns;j<J.length;j++){var E=J[j],k=R[E.index];if(P>1)P--,delete M.cells[E.index];else if(k)k.cell.height+=M.height,P=k.cell.colSpan,delete M.cells[E.index],k.left--,k.left<=1&&delete R[E.index];else{var F=M.cells[E.index];if(!F)continue;if(F.height=M.height,F.rowSpan>1){var H=D.length-I,ie=F.rowSpan>H?H:F.rowSpan;R[E.index]={cell:F,left:ie,row:M}}}}}function A(_){for(var R=_.allRows(),P=0;P<R.length;P++)for(var D=R[P],I=null,M=0,j=0,J=0;J<_.columns.length;J++){var E=_.columns[J];if(j-=1,j>1&&_.columns[J+1])M+=E.width,delete D.cells[E.index];else if(I){var k=I;delete D.cells[E.index],I=null,k.width=E.width+M}else{var k=D.cells[E.index];if(!k)continue;if(j=k.colSpan,M=0,k.colSpan>1){I=k,M+=E.width;continue}k.width=E.width+M}}}function w(_,R){for(var P={count:0,height:0},D=0,I=_.allRows();D<I.length;D++){for(var M=I[D],j=0,J=_.columns;j<J.length;j++){var E=J[j],k=M.cells[E.index];if(k){R.applyStyles(k.styles,!0);var F=k.width-k.padding("horizontal");if(k.styles.overflow==="linebreak")k.text=R.splitTextToSize(k.text,F+1/R.scaleFactor(),{fontSize:k.styles.fontSize});else if(k.styles.overflow==="ellipsize")k.text=N(k.text,F,k.styles,R,"...");else if(k.styles.overflow==="hidden")k.text=N(k.text,F,k.styles,R,"");else if(typeof k.styles.overflow=="function"){var H=k.styles.overflow(k.text,F);typeof H=="string"?k.text=[H]:k.text=H}k.contentHeight=k.getContentHeight(R.scaleFactor(),R.getLineHeightFactor());var ie=k.contentHeight/k.rowSpan;k.rowSpan>1&&P.count*P.height<ie*k.rowSpan?P={height:ie,count:k.rowSpan}:P&&P.count>0&&P.height>ie&&(ie=P.height),ie>M.height&&(M.height=ie)}}P.count--}}function N(_,R,P,D,I){return _.map(function(M){return T(M,R,P,D,I)})}l.ellipsize=N;function T(_,R,P,D,I){var M=1e4*D.scaleFactor();if(R=Math.ceil(R*M)/M,R>=(0,h.getStringWidth)(_,P,D))return _;for(;R<(0,h.getStringWidth)(_+I,P,D)&&!(_.length<=1);)_=_.substring(0,_.length-1);return _.trim()+I}}),964:(function(a){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=n})},i={};function o(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,o),c.exports}var s={};return(function(){var a=s;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=o(340),c=o(776),h=o(664),m=o(972),v=o(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return v.Table}});var y=o(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return y.CellHookData}});var S=o(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return S.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return S.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return S.Row}});function A(R){(0,l.default)(R)}a.applyPlugin=A;function w(R,P){var D=(0,c.parseInput)(R,P),I=(0,m.createTable)(R,D);(0,h.drawTable)(R,I)}function N(R,P){var D=(0,c.parseInput)(R,P);return(0,m.createTable)(R,D)}a.__createTable=N;function T(R,P){(0,h.drawTable)(R,P)}a.__drawTable=T;try{var _=o(964);_.jsPDF&&(_=_.jsPDF),A(_)}catch{}a.default=w})(),s})()})})(da)),da.exports}sy();const qd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],jy=({data:t,grandTotals:e,sortConfig:n,onToggleSort:r,showAllPages:i,setShowAllPages:o,onExportPDF:s,isExporting:a,onPreviewImage:l,onNavigate:c,onMonthClick:h})=>{const[m,v]=be.useState(!0),[y,S]=be.useState(!1),[A,w]=be.useState(!0),[N,T]=be.useState(!0),{rowSpans:_,displayRow:R}=be.useMemo(()=>{const D=new Array(t.length).fill(0),I=new Array(t.length).fill(!0);let M=0;for(;M<t.length;){const j=t[M].teamName;let J=1;for(;M+J<t.length&&t[M+J].teamName===j;)J++;D[M]=J,I[M]=!0;for(let E=1;E<J;E++)D[M+E]=0,I[M+E]=!1;M+=J}return{rowSpans:D,displayRow:I}},[t]),P=(D,I)=>{const M=[{key:"index",label:"#"},{key:"teamName",label:" (Team)",sortable:!0,sortKey:"teamName"},{key:"logo",label:"Logo"},{key:"pageName",label:" Page",sortable:!0,sortKey:"pageName"},{key:`total${D}`,label:` (${D})`,sortable:!0,sortKey:D.toLowerCase()},...qd.map(j=>({key:`${I}_${j}`,label:j}))];return p.jsxs("div",{className:"hidden xl:flex page-card flex-col mb-8 !p-6 border-gray-700/50 shadow-xl overflow-hidden bg-gray-900/40",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("h3",{className:`text-xl font-black flex items-center gap-2 ${D==="Revenue"?"text-blue-300":"text-green-400"}`,children:[p.jsx("span",{className:`w-2 h-6 rounded-full ${D==="Revenue"?"bg-blue-600":"bg-green-600"}`}),"",D==="Revenue"?"":""," Page (Desktop)"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[D==="Revenue"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>o(!i),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${i?"bg-purple-600 border-purple-500 text-white shadow-lg shadow-purple-900/20":"bg-gray-800 border-gray-700 text-gray-400"}`,children:i?"ALL PAGES":"ACTIVE ONLY"}),p.jsxs("button",{onClick:s,disabled:a,className:"btn !py-1 !px-4 text-[10px] font-black bg-red-600/20 border border-red-500/30 text-red-400 hover:bg-red-600 hover:text-white transition-all flex items-center gap-2",children:[a?p.jsx(Pr,{size:"sm"}):p.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"EXPORT PDF"]})]}),p.jsx("button",{onClick:()=>T(!N),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${N?"bg-indigo-600 border-indigo-500 text-white":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"MERGE"}),p.jsx("button",{onClick:()=>w(!A),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${A?"bg-orange-600 border-orange-500 text-white":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"COLOR"}),p.jsx("button",{onClick:()=>S(!y),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${y?"bg-blue-600 border-blue-500 text-white shadow-lg":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"FREEZE"}),p.jsx("button",{onClick:()=>v(!m),className:`btn !py-1 !px-3 text-[10px] font-black border transition-all ${m?"bg-gray-700 border-gray-600 text-white shadow-lg":"bg-gray-800 border-gray-700 text-gray-400"}`,children:"BORDER"})]})]}),p.jsx("div",{className:`overflow-x-auto custom-scrollbar pb-2 ${m?"border-2 border-white/20 rounded-2xl shadow-[0_0_40px_rgba(0,0,0,0.6)]":""}`,children:p.jsxs("table",{className:`report-table w-full border-separate border-spacing-0 text-sm ${m?"border-collapse":""}`,children:[p.jsx("thead",{className:"bg-[#0f172a] backdrop-blur-md",children:p.jsx("tr",{className:"border-b-2 border-white/20",children:M.map(j=>{let J="",E={};y&&(j.key==="index"?(J="sticky left-0 z-30 bg-[#0f172a]",E={width:"45px",minWidth:"45px"}):j.key==="teamName"?(J="sticky left-[45px] z-30 bg-[#0f172a] border-r border-white/20 shadow-md",E={minWidth:"130px"}):j.key==="logo"?(J="sticky z-30 bg-[#0f172a]",E={left:"175px",width:"50px",minWidth:"50px"}):j.key==="pageName"?(J="sticky z-30 bg-[#0f172a] shadow-md",E={left:"225px",minWidth:"160px"}):j.key.includes("total")&&(J="sticky z-30 bg-[#0f172a] border-r border-white/20 shadow-lg",E={left:"385px",width:"100px",minWidth:"100px"}));const k=j.key.includes("total")?D==="Revenue"?"bg-blue-900/80":"bg-green-900/80":"";return p.jsx("th",{onClick:()=>j.sortable&&r(j.sortKey),className:`px-4 py-5 whitespace-nowrap text-left font-black uppercase tracking-wider border-b-2 border-white/20 ${m?"border-x border-white/10":""} ${J} ${k} ${j.sortable?"cursor-pointer hover:bg-gray-700":""}`,style:E,children:p.jsxs("div",{className:"flex items-center gap-1",children:[j.label," ",j.sortable&&n.key===j.sortKey&&p.jsx("span",{children:n.direction==="asc"?"":""})]})},j.key)})})}),p.jsx("tbody",{className:"divide-y divide-white/10",children:t.map((j,J)=>{const E=N?R[J]:!0,k=N?_[J]:1,F=Array.from(String(j.teamName)).reduce((q,z)=>q+z.charCodeAt(0),0)%5,ie=[{bg:"bg-blue-500/5",border:"border-l-4 border-l-blue-500"},{bg:"bg-purple-500/5",border:"border-l-4 border-l-purple-500"},{bg:"bg-emerald-500/5",border:"border-l-4 border-l-emerald-500"},{bg:"bg-orange-500/5",border:"border-l-4 border-l-orange-500"},{bg:"bg-pink-500/5",border:"border-l-4 border-l-pink-500"}][F],$=A?ie.bg:"hover:bg-blue-500/5";return p.jsx("tr",{className:`${$} transition-colors group border-b border-white/10`,children:M.map(q=>{const z=`px-4 py-4 lg:py-5 whitespace-nowrap border-white/10 ${m?"border-x border-white/10":""}`;let X="",ne={};if(y&&(q.key==="index"?(X="sticky left-0 z-10 bg-[#020617]",ne={width:"45px",minWidth:"45px"}):q.key==="teamName"?(X="sticky left-[45px] z-10 bg-[#020617] border-r border-white/20 shadow-md",ne={width:"130px",minWidth:"130px"}):q.key==="logo"?(X="sticky z-10 bg-[#020617]",ne={left:"175px",width:"50px",minWidth:"50px"}):q.key==="pageName"?(X="sticky z-10 bg-[#020617] shadow-md",ne={left:"225px",minWidth:"160px"}):q.key.includes("total")&&(X="sticky z-10 bg-[#020617] border-r border-white/20 shadow-lg",ne={left:"385px",width:"100px",minWidth:"100px"})),q.key==="index")return p.jsx("td",{className:`${z} text-center font-bold text-gray-500 ${X}`,style:ne,children:J+1},q.key);if(q.key==="teamName")return E?p.jsx("td",{rowSpan:k,className:`${z} font-black text-white bg-gray-900/95 align-middle text-center ${X} ${A?ie.border:""} border-b border-white/10 cursor-pointer hover:text-blue-400`,style:ne,onClick:()=>c("team",j.teamName),children:p.jsx("div",{className:"bg-gray-800/80 py-1 px-3 rounded-xl border border-white/5 shadow-sm inline-block",children:j.teamName})},q.key):null;if(q.key==="logo")return p.jsx("td",{className:`${z} text-center ${X} border-b border-white/10`,style:ne,children:p.jsx("img",{src:at(j.logoUrl),className:"w-9 h-9 rounded-full border border-gray-700 mx-auto shadow-md cursor-pointer hover:scale-110 transition-transform",alt:"logo",onClick:()=>l(at(j.logoUrl))})},q.key);if(q.key==="pageName")return p.jsx("td",{className:`${z} font-black text-white ${X} border-b border-white/10 cursor-pointer hover:text-blue-400 hover:underline transition-colors`,style:ne,onClick:()=>c("page",j.pageName),children:j.pageName},q.key);if(q.key.includes("total"))return p.jsxs("td",{className:`${z} text-right font-black ${X} ${D==="Revenue"?"text-blue-100 bg-blue-600/10 hover:text-blue-300":"text-green-100 bg-green-600/10"} border-b border-white/10 cursor-pointer`,style:ne,onClick:()=>c("page",j.pageName),children:["$",(D==="Revenue"?j.revenue:j.profit).toLocaleString(void 0,{minimumFractionDigits:2})]},q.key);if(q.key.startsWith(I)){const se=j[q.key]||0,L=D==="Profit"?se>0?"text-green-400":se<0?"text-red-400":"text-gray-500":se>0?"text-blue-300":"text-gray-500",V=qd.indexOf(q.key.split("_")[1]);return p.jsx("td",{className:`${z} text-right font-bold font-mono ${L} border-b border-white/10 cursor-pointer hover:bg-gray-800 transition-colors`,onClick:()=>h(j.pageName,V),children:se!==0?`$${se.toLocaleString(void 0,{minimumFractionDigits:2})}`:"-"},q.key)}return p.jsx("td",{className:`${z} border-b border-white/10`,children:"-"},q.key)})},j.pageName)})}),p.jsx("tfoot",{className:"bg-[#0f172a] font-black border-t-2 border-white/20",children:p.jsx("tr",{className:"border-t-2 border-white/20",children:M.map((j,J)=>{const E=`px-4 py-5 whitespace-nowrap border-t-2 border-white/20 ${m?"border-x border-white/10":""}`;let k="",F={};return y&&(j.key==="index"?(k="sticky left-0 z-30 bg-[#0f172a]",F={width:"45px",minWidth:"45px"}):j.key==="teamName"?(k="sticky left-[45px] z-30 bg-[#0f172a] border-r border-white/20 shadow-md",F={minWidth:"130px"}):j.key==="logo"?(k="sticky z-30 bg-[#0f172a]",F={left:"175px",width:"50px",minWidth:"50px"}):j.key==="pageName"?(k="sticky z-30 bg-[#0f172a] shadow-md",F={left:"225px",minWidth:"160px"}):j.key.includes("total")&&(k="sticky z-30 bg-[#0f172a] border-r border-white/20 shadow-lg",F={left:"385px",width:"100px",minWidth:"100px"})),J===0?p.jsx("td",{className:`${E} uppercase tracking-widest text-white font-black ${k}`,style:F,colSpan:4,children:" (GRAND TOTAL)"},j.key):["teamName","logo","pageName"].includes(j.key)?null:j.key.includes("total")?p.jsxs("td",{className:`${E} text-right ${k} ${D==="Revenue"?"text-blue-300 bg-blue-600/10":"text-green-300 bg-green-600/10"}`,style:F,children:["$",(D==="Revenue"?e.revenue:e.profit).toLocaleString(void 0,{minimumFractionDigits:2})]},j.key):j.key.startsWith(I)?p.jsxs("td",{className:`${E} text-right text-gray-300 font-mono`,children:["$",e[j.key].toLocaleString(void 0,{minimumFractionDigits:2})]},j.key):p.jsx("td",{className:E},j.key)})})})]})})]})};return p.jsxs(p.Fragment,{children:[P("Revenue","rev"),P("Profit","prof")]})},ay=({data:t,dataType:e,rowSpans:n,displayRow:r,MONTHS:i,grandTotals:o,onNavigate:s,onPreviewImage:a,onMonthClick:l})=>p.jsx("div",{className:"bg-[#0f172a] border border-white/10 rounded-[2.5rem] overflow-hidden shadow-2xl animate-fade-in flex flex-col w-full relative",children:p.jsx("div",{className:"overflow-x-auto custom-scrollbar w-full relative",children:p.jsxs("table",{className:"w-max min-w-full text-sm border-separate border-spacing-0",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"h-16 bg-[#0f172a]",children:[p.jsx("th",{className:"sticky left-0 z-30 bg-[#0f172a] px-2 text-center text-gray-500 font-black border-b border-white/10 w-[50px] min-w-[50px] border-r border-white/5",children:"#"}),p.jsx("th",{className:"sticky left-[50px] z-30 bg-[#0f172a] px-4 text-left text-white font-black uppercase tracking-wider border-b border-white/10 w-[110px] min-w-[110px] border-r border-white/5",children:"Team"}),p.jsx("th",{className:"sticky left-[160px] z-30 bg-[#0f172a] px-4 text-left text-white font-black uppercase tracking-wider border-b border-white/10 w-[200px] min-w-[200px] shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] border-r border-white/5",children:"Page Name"}),p.jsxs("th",{className:`px-6 text-right font-black uppercase tracking-wider border-b border-white/10 ${e==="revenue"?"text-blue-300 bg-blue-900/10":"text-green-300 bg-green-900/10"} min-w-[140px]`,children:["Total ",e==="revenue"?"Rev":"Prof"]}),i.map(c=>p.jsx("th",{className:"px-4 text-right text-gray-400 font-bold uppercase border-b border-white/10 min-w-[90px]",children:c},c))]})}),p.jsx("tbody",{className:"divide-y divide-white/5",children:t.map((c,h)=>{const m=Array.from(String(c.teamName)).reduce((w,N)=>w+N.charCodeAt(0),0)%5,y=["bg-blue-500/[0.02]","bg-purple-500/[0.02]","bg-emerald-500/[0.02]","bg-orange-500/[0.02]","bg-pink-500/[0.02]"][m],S="bg-[#111827]",A=e==="revenue"?"rev":"prof";return p.jsxs("tr",{className:`${y} hover:bg-white/5 transition-colors h-16 group`,children:[p.jsx("td",{className:`sticky left-0 z-20 ${S} border-r border-white/5 border-b border-white/5 text-center font-bold text-gray-600`,children:h+1}),r[h]?p.jsx("td",{rowSpan:n[h],className:`sticky left-[50px] z-20 ${S} border-r border-white/5 border-b border-white/5 align-middle px-4 cursor-pointer hover:bg-gray-800`,onClick:()=>s("team",c.teamName),children:p.jsx("div",{className:"font-black text-white bg-gray-800 border border-white/10 px-2.5 py-1.5 rounded-xl inline-block shadow-sm text-[10px] tracking-wide truncate max-w-[90px]",children:c.teamName})}):null,p.jsx("td",{className:`sticky left-[160px] z-20 ${S} border-r border-white/5 border-b border-white/5 shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] px-4 cursor-pointer hover:bg-gray-800`,onClick:()=>s("page",c.pageName),children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-lg p-0.5 bg-gray-800 border border-white/10 flex-shrink-0",onClick:w=>{w.stopPropagation(),a(at(c.logoUrl))},children:p.jsx("img",{src:at(c.logoUrl),className:"w-full h-full rounded-md object-cover",alt:""})}),p.jsx("span",{className:"truncate max-w-[140px] text-xs font-bold text-gray-200 group-hover:text-blue-300 transition-colors",title:c.pageName,children:c.pageName})]})}),p.jsxs("td",{className:`px-6 text-right font-black ${e==="revenue"?"text-blue-400 bg-blue-900/5 group-hover:bg-blue-900/20":"text-emerald-400 bg-emerald-900/5 group-hover:bg-emerald-900/20"} border-r border-white/5 border-b border-white/5 text-sm cursor-pointer`,onClick:()=>s("page",c.pageName),children:["$",(e==="revenue"?c.revenue:c.profit).toLocaleString()]}),i.map((w,N)=>{const T=c[`${A}_${w}`]||0;return p.jsx("td",{className:`px-4 text-right font-mono text-xs border-b border-white/5 cursor-pointer hover:bg-gray-800 transition-colors ${T>0?"text-gray-300 font-bold":"text-gray-700"}`,onClick:()=>l(c.pageName,N),children:T!==0?T.toLocaleString():"-"},w)})]},c.pageName)})}),o&&p.jsx("tfoot",{className:"bg-[#0f172a] font-black border-t-2 border-white/20",children:p.jsxs("tr",{className:"h-16",children:[p.jsx("td",{className:"sticky left-0 bg-[#0f172a] z-30 border-r border-white/5 border-b border-white/5"}),p.jsx("td",{className:"sticky left-[50px] bg-[#0f172a] z-30 border-r border-white/5 border-b border-white/5"}),p.jsx("td",{className:"sticky left-[160px] bg-[#0f172a] z-30 px-4 text-right uppercase tracking-widest text-white shadow-[6px_0_15px_-3px_rgba(0,0,0,0.5)] border-r border-white/5 border-b border-white/5 text-xs flex items-center justify-end h-16",children:"Grand Total"}),p.jsxs("td",{className:`px-6 text-right ${e==="revenue"?"text-blue-300":"text-green-300"} border-r border-white/5 border-b border-white/5 text-base bg-[#1e293b]`,children:["$",(e==="revenue"?o.revenue:o.profit).toLocaleString()]}),i.map(c=>{const m=o[`${e==="revenue"?"rev":"prof"}_${c}`]||0;return p.jsx("td",{className:"px-4 text-right text-gray-400 font-mono text-[10px] border-b border-white/5 bg-[#0f172a]",children:m!==0?m.toLocaleString():"-"},c)})]})})]})})}),ly=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],By=({data:t,grandTotals:e,onPreviewImage:n,onNavigate:r,onMonthClick:i})=>{const[o,s]=be.useState("table"),[a,l]=be.useState("revenue"),{rowSpans:c,displayRow:h}=be.useMemo(()=>{if(o!=="table")return{rowSpans:[],displayRow:[]};const m=new Array(t.length).fill(0),v=new Array(t.length).fill(!0);let y=0;for(;y<t.length;){const S=t[y].teamName;let A=1;for(;y+A<t.length&&t[y+A].teamName===S;)A++;m[y]=A,v[y]=!0;for(let w=1;w<A;w++)m[y+w]=0,v[y+w]=!1;y+=A}return{rowSpans:m,displayRow:v}},[t,o]);return p.jsxs("div",{className:"hidden md:block xl:hidden space-y-5 pb-12 px-1",children:[p.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl p-4 rounded-3xl border border-white/10 shadow-2xl flex flex-col sm:flex-row justify-between items-center gap-4 sticky top-20 z-40",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-900/30",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight",children:"Tablet Report"}),p.jsxs("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),t.length," Active Pages"]})]})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("div",{className:"bg-black/40 p-1.5 rounded-2xl border border-white/5 flex",children:[p.jsx("button",{onClick:()=>l("revenue"),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${a==="revenue"?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:"Revenue"}),p.jsx("button",{onClick:()=>l("profit"),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all ${a==="profit"?"bg-emerald-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:"Profit"})]}),p.jsxs("div",{className:"bg-black/40 p-1.5 rounded-2xl border border-white/5 flex",children:[p.jsx("button",{onClick:()=>s("table"),className:`p-2.5 rounded-xl transition-all ${o==="table"?"bg-gray-700 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),p.jsx("button",{onClick:()=>s("grid"),className:`p-2.5 rounded-xl transition-all ${o==="grid"?"bg-gray-700 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2z"})})})]})]})]}),o==="grid"?p.jsx("div",{className:"grid grid-cols-2 gap-5 animate-fade-in",children:t.map(m=>p.jsxs("div",{className:"bg-gray-800/40 border border-white/10 rounded-[2.5rem] p-6 shadow-xl flex flex-col relative overflow-hidden group hover:border-blue-500/30 transition-all cursor-pointer",onClick:()=>r("page",m.pageName),children:[p.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-white/5 to-transparent rounded-bl-[100px] pointer-events-none transition-opacity group-hover:opacity-100 opacity-50"}),p.jsxs("div",{className:"flex items-center gap-5 mb-5 relative z-10",children:[p.jsx("div",{className:"w-14 h-14 rounded-2xl overflow-hidden border-2 border-gray-700 bg-gray-950 p-0.5 flex-shrink-0 shadow-2xl group-hover:scale-105 transition-transform",onClick:v=>{v.stopPropagation(),n(at(m.logoUrl))},children:p.jsx("img",{src:at(m.logoUrl),className:"w-full h-full object-cover rounded-xl",alt:""})}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("h4",{className:"text-base font-black text-white truncate leading-tight uppercase tracking-tight group-hover:text-blue-300 transition-colors",children:m.pageName}),p.jsx("span",{className:"text-[10px] bg-blue-900/30 text-blue-300 px-3 py-1 rounded-full border border-blue-500/20 font-black uppercase mt-1.5 inline-block tracking-widest",children:m.teamName})]})]}),p.jsxs("div",{className:"space-y-3 flex-grow relative z-10",children:[p.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-2xl border border-white/5 group-hover:bg-blue-600/10 transition-colors",children:[p.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Revenue"}),p.jsxs("span",{className:"text-base font-black text-blue-400 tracking-tight",children:["$",m.revenue.toLocaleString()]})]}),p.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-2xl border border-white/5",children:[p.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Profit"}),p.jsxs("span",{className:"text-base font-black text-emerald-400 tracking-tight",children:["$",m.profit.toLocaleString()]})]})]})]},m.pageName))}):p.jsx(ay,{data:t,dataType:a,rowSpans:c,displayRow:h,MONTHS:ly,grandTotals:e,onNavigate:r,onPreviewImage:n,onMonthClick:i})]})},aa=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],qy=({data:t,onPreviewImage:e,onNavigate:n,onMonthClick:r,sortConfig:i,onToggleSort:o})=>{const[s,a]=be.useState(()=>{const c=localStorage.getItem("mobile_view_preference");return c==="card"||c==="table"?c:"table"}),l=c=>{a(c),localStorage.setItem("mobile_view_preference",c)};return p.jsxs("div",{className:"md:hidden space-y-4 pb-12 px-1",children:[p.jsxs("div",{className:"flex justify-between items-center px-2 mb-2",children:[p.jsxs("h3",{className:"text-lg font-black text-white flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-5 bg-indigo-500 rounded-full"}),"Page Report"]}),p.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-xl border border-white/10",children:[p.jsx("button",{onClick:()=>l("card"),className:`p-2 rounded-lg transition-all ${s==="card"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Card View",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})})}),p.jsx("button",{onClick:()=>l("table"),className:`p-2 rounded-lg transition-all ${s==="table"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Table View",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),s==="card"?t.map(c=>{const h=c.orderCount>0?c.revenue/c.orderCount:0;return p.jsxs("div",{className:"bg-gray-800/40 border border-white/10 rounded-[2.5rem] p-6 shadow-xl space-y-5 animate-fade-in-up group relative overflow-hidden active:scale-[0.98] transition-all cursor-pointer",onClick:()=>n("page",c.pageName),children:[p.jsx("div",{className:"flex justify-between items-center border-b border-white/5 pb-4",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden border border-gray-700 bg-gray-950 shadow-inner p-0.5",onClick:m=>{m.stopPropagation(),e(at(c.logoUrl))},children:p.jsx("img",{src:at(c.logoUrl),className:"w-full h-full object-cover rounded-lg",alt:""})}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("h4",{className:"text-base font-black text-white truncate leading-tight uppercase tracking-tight",children:c.pageName}),p.jsx("p",{className:"text-[10px] text-indigo-400 font-black uppercase tracking-[0.2em] mt-1",onClick:m=>{m.stopPropagation(),n("team",c.teamName)},children:c.teamName})]})]})}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl border border-white/5",children:[p.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1.5",children:""}),p.jsxs("p",{className:"text-lg font-black text-blue-400 tracking-tighter",children:["$",c.revenue.toLocaleString()]})]}),p.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl border border-white/5",children:[p.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1.5",children:""}),p.jsxs("p",{className:"text-lg font-black text-emerald-400 tracking-tighter",children:["$",c.profit.toLocaleString()]})]})]}),r&&p.jsxs("div",{className:"pt-4 border-t border-white/5",children:[p.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-2 ml-1",children:"Monthly Breakdown"}),p.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 hide-scrollbar",children:[aa.map((m,v)=>{const y=c[`rev_${m}`]||0;return y===0?null:p.jsxs("button",{onClick:S=>{S.stopPropagation(),r(c.pageName,v)},className:"flex-shrink-0 bg-gray-900/60 p-2.5 rounded-xl border border-white/5 min-w-[70px] flex flex-col items-center hover:bg-gray-800 hover:border-blue-500/30 transition-all active:scale-95",children:[p.jsx("span",{className:"text-[8px] font-bold text-gray-500 uppercase mb-0.5",children:m}),p.jsxs("span",{className:"text-[10px] font-black text-blue-300",children:["$",y.toLocaleString(void 0,{maximumFractionDigits:0})]})]},m)}),aa.every(m=>(c[`rev_${m}`]||0)===0)&&p.jsx("span",{className:"text-[9px] text-gray-600 italic pl-1",children:"No monthly data"})]})]}),p.jsxs("div",{className:"flex items-center justify-between px-1 pt-2 border-t border-white/5",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),p.jsxs("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:[c.orderCount," Orders"]})]}),p.jsxs("span",{className:"text-[10px] font-black text-purple-400 uppercase tracking-widest",children:["AOV: $",h.toFixed(0)]})]}),p.jsx("div",{className:"absolute -right-8 -bottom-8 w-24 h-24 bg-indigo-600/10 rounded-full blur-[40px] pointer-events-none group-hover:bg-indigo-600/20 transition-all duration-700"})]},c.pageName)}):p.jsx("div",{className:"bg-gray-900/60 border border-white/10 rounded-3xl overflow-hidden shadow-2xl animate-fade-in",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-left border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-[#0f172a] border-b border-white/10 text-xs text-gray-400 font-bold uppercase tracking-wider",children:[p.jsx("th",{className:"p-3 sticky left-0 z-20 bg-[#0f172a] border-r border-white/10 min-w-[140px] shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)] cursor-pointer hover:bg-gray-800 transition-colors",onClick:()=>o&&o("pageName"),children:p.jsxs("div",{className:"flex items-center gap-1",children:["Page Name",(i==null?void 0:i.key)==="pageName"&&p.jsx("span",{className:"text-blue-400",children:i.direction==="asc"?"":""})]})}),p.jsx("th",{className:"p-3 text-right min-w-[100px] text-blue-300 bg-blue-900/10 cursor-pointer hover:bg-blue-900/20 transition-colors",onClick:()=>o&&o("revenue"),children:p.jsxs("div",{className:"flex items-center justify-end gap-1",children:["Total Rev",(i==null?void 0:i.key)==="revenue"&&p.jsx("span",{className:"text-white",children:i.direction==="asc"?"":""})]})}),aa.map(c=>p.jsx("th",{className:"p-3 text-right min-w-[80px]",children:c},c))]})}),p.jsx("tbody",{className:"divide-y divide-white/5 text-xs",children:t.map((c,h)=>p.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[p.jsx("td",{className:"p-3 sticky left-0 z-20 bg-gray-900 border-r border-white/10 shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)]",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-7 h-7 rounded-lg bg-gray-800 border border-white/10 overflow-hidden flex-shrink-0",onClick:m=>{m.stopPropagation(),e(at(c.logoUrl))},children:p.jsx("img",{src:at(c.logoUrl),className:"w-full h-full object-cover",alt:""})}),p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsx("div",{className:"font-black text-white truncate max-w-[120px] leading-tight",onClick:()=>n("page",c.pageName),children:c.pageName}),p.jsx("div",{className:"text-[9px] text-gray-500 font-bold uppercase truncate max-w-[120px]",onClick:()=>n("team",c.teamName),children:c.teamName})]})]})}),p.jsxs("td",{className:"p-3 text-right font-black text-blue-400 bg-blue-900/5",children:["$",c.revenue.toLocaleString()]}),aa.map((m,v)=>{const y=c[`rev_${m}`]||0;return p.jsx("td",{className:`p-3 text-right font-mono ${y>0?"text-gray-300 font-bold":"text-gray-700"}`,onClick:()=>r&&r(c.pageName,v),children:y>0?y.toLocaleString():"-"},m)})]},c.pageName))})]})})}),p.jsx("style",{children:`
                .hide-scrollbar::-webkit-scrollbar { display: none; }
                .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `})]})},cy=({product:t,isOpen:e,onClose:n,onConfirm:r,showTagEditor:i=!0})=>{const{refreshData:o}=be.useContext(po),[s,a]=be.useState(""),[l,c]=be.useState(window.innerWidth<768),[h,m]=be.useState(!1),[v,y]=be.useState(!1),[S,A]=be.useState(!1),[w,N]=be.useState(null),T=be.useRef(null);be.useEffect(()=>{const I=()=>c(window.innerWidth<768);return window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),be.useEffect(()=>{t&&e&&(a(t.Tags||""),N(t.ImageURL),y(!1))},[t,e]);const _=be.useMemo(()=>{if(!t)return!1;const I=w||t.ImageURL;return I&&!I.includes("placehold.co")&&!I.includes("text=N/A")},[t,w]),R=I=>{if(I.key==="Enter"){I.preventDefault();const M=s.trim();M&&!M.endsWith(",")&&a(M+", ")}},P=async()=>{if(t){A(!0);try{const I=s.split(",").map(M=>M.trim()).filter(M=>M!=="").join(", ");if(I!==(t.Tags||"")){if(!(await fetch(`${uo}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:t.ProductName},newData:{Tags:I}})})).ok)throw new Error("Failed to update product tags");await o(),r(t.ProductName,I)}else r(t.ProductName,I)}catch(I){console.error(I),alert(`Save failed: ${I.message}`),r(t.ProductName,s)}finally{A(!1)}}},D=async I=>{var j;const M=(j=I.target.files)==null?void 0:j[0];if(!(!M||!t)){m(!0),y(!1);try{const J=await Gh(M,.7,1024),E=await Hh(J),k=await fetch(`${uo}/api/upload-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileData:E,fileName:M.name,mimeType:J.type})}),F=await k.json();if(!k.ok||F.status!=="success")throw new Error(F.message);const H=F.url;await fetch(`${uo}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"Products",primaryKey:{ProductName:t.ProductName},newData:{ImageURL:H}})}),N(H),y(!0),setTimeout(()=>y(!1),2500),await o()}catch(J){alert(`Update Error: ${J.message}`)}finally{m(!1),T.current&&(T.current.value="")}}};return t?p.jsx(Od,{isOpen:e,onClose:n,maxWidth:l?"max-w-[95vw]":"max-w-4xl",children:p.jsxs("div",{className:`
                bg-[#09090b] border border-white/10 overflow-hidden relative flex flex-col
                ${l?"h-[85vh] rounded-[2rem]":"h-[500px] rounded-[2rem] md:flex-row"}
                shadow-2xl transition-all duration-300
            `,children:[p.jsx("div",{className:`
                    relative group flex items-center justify-center bg-black/20
                    ${l?"h-[40%] w-full border-b border-white/5":"w-[40%] h-full border-r border-white/5"}
                `,children:p.jsxs("div",{className:"relative w-full h-full flex items-center justify-center cursor-pointer p-6",onClick:()=>{var I;return!h&&((I=T.current)==null?void 0:I.click())},children:[_?p.jsxs(p.Fragment,{children:[p.jsx("img",{src:at(w||t.ImageURL),className:`
                                        w-full h-full object-contain relative z-10 transition-all duration-500 rounded-xl
                                        ${h?"opacity-30 grayscale blur-sm":"group-hover:scale-105"}
                                    `,alt:t.ProductName}),!h&&!v&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/40 backdrop-blur-[2px] z-20",children:p.jsxs("div",{className:"bg-white/10 px-3 py-1.5 rounded-full border border-white/20 backdrop-blur-md flex items-center gap-2",children:[p.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),p.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-wider",children:"Change"})]})})]}):p.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 text-gray-600 group-hover:text-blue-400 transition-colors",children:[p.jsx("div",{className:"p-4 rounded-full border-2 border-dashed border-gray-700 group-hover:border-blue-500/50 transition-all",children:p.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Upload Image"})]}),h&&p.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center",children:[p.jsx(Pr,{size:"md"}),p.jsx("span",{className:"text-[9px] font-bold text-gray-400 mt-2 uppercase tracking-wider",children:"Uploading..."})]}),v&&p.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:[p.jsx("div",{className:"w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center shadow-lg mb-2 animate-scale-in",children:p.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),p.jsx("span",{className:"text-[9px] font-bold text-emerald-400 uppercase tracking-widest",children:"Success"})]})]})}),p.jsxs("div",{className:`
                    flex flex-col p-6 md:p-10 relative
                    ${l?"h-[60%] justify-between":"w-[60%] h-full justify-center gap-8"}
                `,children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("span",{className:"px-2 py-1 bg-white/5 rounded text-[10px] font-mono text-gray-400 border border-white/5",children:["#",t.Barcode||"NO-CODE"]}),p.jsxs("span",{className:"px-2 py-1 bg-emerald-500/10 text-emerald-400 rounded text-[10px] font-bold border border-emerald-500/20",children:["$",t.Price.toFixed(2)]})]}),p.jsx("h2",{className:`font-black text-white leading-tight ${l?"text-2xl line-clamp-2":"text-4xl line-clamp-3"}`,children:t.ProductName}),i&&p.jsxs("div",{className:"space-y-2 pt-2",children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:"Operational Tags"}),p.jsxs("div",{className:"relative group",children:[p.jsx("input",{type:"text",value:s,onChange:I=>a(I.target.value),onKeyDown:R,className:"w-full bg-transparent border-b border-gray-700 py-2 text-sm font-medium text-gray-200 focus:border-blue-500 outline-none transition-colors placeholder:text-gray-700",placeholder:"Add tags..."}),p.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 text-[9px] font-bold text-gray-600 opacity-0 group-focus-within:opacity-100 transition-opacity",children:"ENTER"})]})]})]}),p.jsxs("div",{className:"flex gap-3 mt-4",children:[p.jsx("button",{onClick:n,className:"px-6 py-4 rounded-xl border border-white/10 text-gray-400 font-bold text-xs uppercase tracking-wider hover:bg-white/5 hover:text-white transition-all active:scale-95",children:"Cancel"}),p.jsxs("button",{onClick:P,disabled:S,className:"flex-1 px-6 py-4 rounded-xl bg-blue-600 text-white font-bold text-xs uppercase tracking-wider hover:bg-blue-500 transition-all active:scale-95 shadow-lg shadow-blue-900/20 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[S?p.jsx(Pr,{size:"sm"}):"Confirm Selection",!S&&p.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:p.jsx("path",{d:"M5 12h14M12 5l7 7-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),p.jsx("input",{type:"file",ref:T,className:"hidden",accept:"image/*",onChange:D}),p.jsx("style",{children:`
                    @keyframes scale-in {
                        0% { transform: scale(0); opacity: 0; }
                        60% { transform: scale(1.1); opacity: 1; }
                        100% { transform: scale(1); }
                    }
                    .animate-scale-in { animation: scale-in 0.3s ease-out forwards; }
                `})]})}):null},uy=(t,e)=>{if(!e||!t)return p.jsx("span",{children:t});const n=e.split(" ").filter(Boolean).map(i=>i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));if(n.length===0)return p.jsx("span",{children:t});const r=new RegExp(`(${n.join("|")})`,"gi");return p.jsx(p.Fragment,{children:t.split(r).map((i,o)=>r.test(i)&&i.trim()!==""?p.jsx("strong",{className:"text-yellow-300 bg-yellow-900/50 rounded-sm px-0.5",children:i},o):i)})},dy=(t,e)=>{const n=(t.ProductName||"").toLowerCase(),r=(t.Barcode||"").toLowerCase(),i=`${n} ${r}`,o=e.toLowerCase().trim();if(!o)return 1;const s=o.split(" ").filter(Boolean);if(!s.every(c=>i.includes(c)))return 0;let l=10;return s.forEach(c=>{n.includes(c)&&(l+=20),r.includes(c)&&(l+=10)}),n.startsWith(o)&&(l+=500),l},fy=({products:t,selectedProductName:e,onSelect:n,showTagEditor:r=!0})=>{const[i,o]=be.useState(!1),[s,a]=be.useState(""),[l,c]=be.useState(0),[h,m]=be.useState(null),v=be.useRef(null),y=be.useRef(null);be.useEffect(()=>{a(e)},[e]),be.useEffect(()=>{const P=D=>{v.current&&!v.current.contains(D.target)&&(o(!1),a(e))};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[e]);const S=be.useMemo(()=>{const P=s||"";return P.trim()?t.map(D=>({product:D,score:dy(D,P)})).filter(D=>D.score>0).sort((D,I)=>I.score-D.score||D.product.ProductName.localeCompare(I.product.ProductName)).map(D=>D.product):[]},[t,s]),A=be.useMemo(()=>{const P=s.trim();return P?!t.some(D=>D.ProductName.trim().toLowerCase()===P.toLowerCase()):!1},[s,t]),w=be.useMemo(()=>{const P=[...S];return A&&P.unshift({isAddNew:!0,ProductName:s.trim()}),P},[S,A,s]),N=be.useCallback((P,D)=>{var I;n(P,D),a(P),o(!1),m(null),c(0),(I=y.current)==null||I.blur()},[n]),T=P=>{P.isAddNew?N(P.ProductName):(m(P),o(!1))},_=be.useCallback(()=>{var P;n("",""),a(""),o(!0),c(0),(P=y.current)==null||P.focus()},[n]),R=P=>{var I;const D=w.length;if(D!==0)switch(P.key){case"ArrowDown":P.preventDefault(),i||o(!0),c(M=>(M+1)%D);break;case"ArrowUp":P.preventDefault(),i||o(!0),c(M=>(M-1+D)%D);break;case"Enter":if(P.preventDefault(),!i)return;l>-1&&w[l]&&T(w[l]);break;case"Escape":o(!1),a(e),(I=y.current)==null||I.blur();break}};return p.jsxs("div",{className:"relative",ref:v,children:[p.jsxs("div",{className:"relative group",children:[p.jsx("input",{ref:y,type:"text",className:"form-input !pr-16 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:"...",value:s,onChange:P=>{a(P.target.value),o(!0),c(0)},onFocus:()=>o(!0),onKeyDown:R}),p.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[s&&p.jsx("button",{type:"button",onClick:_,className:"text-gray-500 hover:text-white text-2xl",children:""}),p.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),i&&p.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden animate-fade-in-down max-h-80 overflow-y-auto custom-scrollbar",children:p.jsx("ul",{className:"p-2 space-y-1",children:w.length===0?p.jsx("li",{className:"p-4 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:""}):w.map((P,D)=>{if("isAddNew"in P&&P.isAddNew)return p.jsxs("li",{className:`p-3.5 rounded-2xl cursor-pointer flex items-center gap-4 transition-all ${l===D?"bg-blue-600 text-white":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>T(P),children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center border border-blue-500/30",children:p.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"})})}),p.jsx("div",{className:"min-w-0",children:p.jsxs("p",{className:"font-black text-sm leading-tight",children:[" ",p.jsxs("span",{className:"text-yellow-400",children:['"',P.ProductName,'"']})]})})]},"add-new");const I=P;return p.jsxs("li",{className:`p-2.5 rounded-2xl cursor-pointer flex items-center gap-3 transition-all ${l===D?"bg-blue-600 text-white shadow-lg":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>T(I),children:[p.jsx("img",{src:at(I.ImageURL),className:"w-12 h-12 rounded-xl object-cover border border-white/10",alt:""}),p.jsxs("div",{className:"min-w-0 flex-grow",children:[p.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:uy(I.ProductName,s)}),p.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:p.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-md border border-blue-500/10",children:["$",I.Price.toFixed(2)]})})]})]},I.ProductName)})})}),p.jsx(cy,{product:h,isOpen:!!h,onClose:()=>m(null),onConfirm:N,showTagEditor:r})]})},hy=({provinces:t,selectedProvince:e,onSelect:n})=>{const[r,i]=be.useState(!1),[o,s]=be.useState(""),a=be.useRef(null);be.useEffect(()=>{s(e)},[e]),be.useEffect(()=>{const c=h=>{a.current&&!a.current.contains(h.target)&&(i(!1),s(e))};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[e]);const l=be.useMemo(()=>{const c=t.filter(S=>S.toLowerCase().includes(o.toLowerCase())),h=c.filter(S=>!S.includes("")&&!S.includes("")).sort((S,A)=>S.localeCompare(A,"km")),m=[],v=c.find(S=>S.includes("")),y=c.find(S=>S.includes(""));return v&&m.push(v),y&&m.push(y),[...m,...h]},[t,o]);return p.jsxs("div",{className:"relative w-full",ref:a,children:[p.jsxs("div",{className:"relative group",children:[p.jsx("input",{type:"text",className:"form-input !pl-10 !py-3 rounded-xl border-gray-700 bg-gray-900 focus:border-blue-500/50 transition-all font-bold text-gray-200",placeholder:" /...",value:o,onChange:c=>{s(c.target.value),i(!0)},onFocus:()=>i(!0)}),p.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:p.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),r&&p.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800 border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-down max-h-60 overflow-y-auto custom-scrollbar",children:l.length>0?l.map((c,h)=>p.jsx("button",{type:"button",onClick:()=>{n(c),s(c),i(!1)},className:`w-full text-left px-4 py-3 text-sm font-bold transition-colors border-b border-white/5 last:border-0 ${e===c?"bg-blue-600 text-white":"text-gray-300 hover:bg-white/5"}`,children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{children:c}),h<2&&o===""&&p.jsx("span",{className:"text-[8px] bg-white/10 px-1.5 py-0.5 rounded uppercase tracking-widest opacity-50",children:"Priority"})]})},c)):p.jsx("div",{className:"p-4 text-center text-xs text-gray-500",children:""})})]})},py=({methods:t,selectedMethodName:e,onSelect:n})=>p.jsxs("div",{className:"w-full",children:[p.jsx("style",{children:`
                @keyframes spin-border {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }
                .card-flux {
                    position: relative;
                    background: #0f172a; /* Slate 900 */
                    border-radius: 1rem;
                    z-index: 1;
                }
                /* The spinning border effect */
                .card-flux-active::after, .card-flux-active::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    background: conic-gradient(from var(--angle), transparent 70%, #3b82f6, #8b5cf6, #ec4899, #3b82f6);
                    border-radius: inherit;
                    animation: spin-border 3s linear infinite;
                }
                .card-flux-active::before {
                    filter: blur(10px);
                    opacity: 0.7;
                }
                
                @keyframes float-y {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-5px); }
                }
                .animate-float-y {
                    animation: float-y 3s ease-in-out infinite;
                }
                
                @keyframes pulse-soft {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.6; }
                }
                .animate-pulse-soft {
                    animation: pulse-soft 2s ease-in-out infinite;
                }
            `}),p.jsx("div",{className:"grid grid-cols-2 gap-4 max-h-80 overflow-y-auto custom-scrollbar px-2 pb-2 pt-2",children:t.map(r=>{const i=e===r.MethodName;return p.jsx("button",{type:"button",onClick:()=>n(r),className:`
                                relative group rounded-2xl transition-all duration-300 min-h-[140px] flex flex-col
                                ${i?"card-flux card-flux-active scale-[1.02]":"bg-gray-900 border border-gray-800 hover:bg-gray-800"}
                            `,children:p.jsxs("div",{className:`
                                w-full h-full rounded-2xl flex flex-col items-center justify-center p-4 relative overflow-hidden
                                ${i?"bg-[#0f172a]":"bg-transparent"}
                            `,children:[i&&p.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-blue-500/10 via-purple-500/5 to-transparent pointer-events-none"}),p.jsx("div",{className:"absolute top-3 right-3 flex gap-1",children:i&&p.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[p.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),p.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-blue-500"})]})}),p.jsx("div",{className:`
                                    relative z-10 w-14 h-14 mb-3 transition-all duration-300
                                    ${i?"animate-float-y drop-shadow-[0_0_15px_rgba(59,130,246,0.5)]":"opacity-80 group-hover:opacity-100"}
                                `,children:p.jsx("img",{src:at(r.LogosURL),className:"w-full h-full object-contain",alt:r.MethodName})}),p.jsxs("div",{className:"relative z-10 text-center w-full",children:[p.jsx("p",{className:`
                                        text-xs font-black uppercase tracking-widest transition-all
                                        ${i?"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-pink-400 animate-pulse-soft":"text-gray-400 group-hover:text-gray-200"}
                                    `,children:r.MethodName}),r.RequireDriverSelection&&p.jsxs("div",{className:`
                                            mt-2 inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-[8px] font-bold uppercase tracking-wider
                                            ${i?"bg-purple-900/30 text-purple-300 border border-purple-500/30":"bg-gray-800 text-gray-500"}
                                        `,children:[p.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Driver Req"]})]})]})},r.MethodName)})}),t.length===0&&p.jsx("div",{className:"p-8 text-center border border-dashed border-gray-700 rounded-2xl bg-gray-900/50",children:p.jsx("p",{className:"text-xs text-gray-500 font-black uppercase tracking-widest animate-pulse",children:"No Signal"})})]}),gy=({drivers:t,selectedDriverName:e,onSelect:n})=>{const r=be.useRef(null),i=be.useRef(null);be.useEffect(()=>{r.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"),i.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2570/2570-preview.mp3"),r.current&&(r.current.volume=.15),i.current&&(i.current.volume=.4)},[]);const o=()=>{r.current&&(r.current.currentTime=0,r.current.play().catch(()=>{}))},s=a=>{e!==a&&(i.current&&(i.current.currentTime=0,i.current.play().catch(()=>{})),n(a))};return p.jsxs("div",{className:"w-full py-4",children:[p.jsx("style",{children:`
                /* CSS Variable for Rotation */
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }

                /* Flux Animation Keyframes */
                @keyframes spin-flux {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }

                /* Base Card Style */
                .flux-card {
                    position: relative;
                    background: #0f172a; /* Slate 900 */
                    border-radius: 1rem;
                    z-index: 1;
                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
                }

                /* Electric Flux Effect (Active State) */
                .flux-card.selected::after, .flux-card.selected::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    /* Electric Gradient Colors: Cyan -> Blue -> Purple -> Cyan */
                    background: conic-gradient(from var(--angle), transparent 60%, #22d3ee, #3b82f6, #a855f7, #22d3ee);
                    border-radius: inherit;
                    animation: spin-flux 2s linear infinite;
                }

                /* Outer Glow (Blur) */
                .flux-card.selected::before {
                    filter: blur(10px);
                    opacity: 0.7;
                }

                /* Floating Text Animation */
                @keyframes float-text {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-2px); }
                }
                .animate-float-text {
                    animation: float-text 3s ease-in-out infinite;
                }
            `}),t.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-gray-800 rounded-2xl bg-gray-900/30",children:[p.jsx("div",{className:"w-10 h-10 border-2 border-gray-700 border-t-cyan-500 rounded-full animate-spin mb-3"}),p.jsx("p",{className:"text-gray-500 font-black uppercase tracking-[0.2em] text-[10px]",children:"NO DRIVERS DETECTED"})]}):p.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5 p-2",children:t.map(a=>p.jsx(my,{driver:a,isSelected:e===a.DriverName,onSelect:()=>s(a.DriverName),onHover:o},a.DriverName))})]})},my=({driver:t,isSelected:e,onSelect:n,onHover:r})=>p.jsxs("div",{onClick:n,onMouseEnter:r,className:`
                flux-card relative h-48 cursor-pointer transition-all duration-300 group overflow-visible
                flex flex-col items-center justify-end pb-3
                ${e?"selected scale-[1.03]":"border border-white/5 hover:border-blue-500/30 grayscale opacity-70 hover:opacity-100 hover:grayscale-0"}
            `,children:[p.jsxs("div",{className:"absolute inset-0 rounded-2xl overflow-hidden bg-gray-900",children:[p.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(#3b82f6 1px, transparent 1px)",backgroundSize:"10px 10px"}}),e&&p.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/2 bg-gradient-to-t from-blue-900/40 to-transparent"})]}),p.jsx("div",{className:`
                absolute inset-x-0 transition-all duration-500 z-10 flex justify-center
                ${e?"top-3 bottom-12":"top-4 bottom-10"}
            `,children:p.jsx("div",{className:`
                    relative w-full h-full max-w-[85%] rounded-xl overflow-hidden transition-all duration-500
                    ${e?"shadow-[0_0_20px_rgba(59,130,246,0.4)] ring-1 ring-blue-400/30":"shadow-none"}
                `,children:p.jsx("img",{src:at(t.ImageURL),className:"w-full h-full object-cover object-top",alt:t.DriverName})})}),p.jsxs("div",{className:"relative z-20 w-full px-2 text-center",children:[p.jsx("div",{className:`
                    transition-all duration-300 transform
                    ${e?"translate-y-0 animate-float-text":"translate-y-1"}
                `,children:p.jsx("h3",{className:`
                        text-[11px] font-black uppercase tracking-widest leading-tight
                        ${e?"text-white drop-shadow-[0_0_5px_rgba(34,211,238,0.8)]":"text-gray-400"}
                    `,children:t.DriverName})}),p.jsxs("div",{className:`
                    mt-2 flex items-center justify-center gap-1.5 transition-all duration-300
                    ${e?"opacity-100":"opacity-0 scale-0"}
                `,children:[p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse shadow-[0_0_5px_#22d3ee]"}),p.jsx("span",{className:"text-[7px] font-bold text-cyan-300 uppercase tracking-[0.2em] border border-cyan-500/30 px-1.5 py-0.5 rounded bg-cyan-950/50",children:"ONLINE"})]})]})]}),vy=({formData:t,appData:e,onChange:n,onProvinceSelect:r,onDistrictChange:i,onSangkatChange:o,onShippingMethodSelect:s,onDriverSelect:a,onBankChange:l,selectedDistrict:c,selectedSangkat:h,bankLogo:m})=>{var _,R,P;const[v,y]=be.useState(!1),S=[...new Set(e.locations.map(D=>D.Province))],A=[...new Set(e.locations.filter(D=>D.Province===t.Location).map(D=>D.District))].sort(),w=[...new Set(e.locations.filter(D=>D.Province===t.Location&&D.District===c).map(D=>D.Sangkat))].sort(),N=(_=e.shippingMethods)==null?void 0:_.find(D=>D.MethodName===t["Internal Shipping Method"]),T=(R=e.drivers)==null?void 0:R.find(D=>D.DriverName===t["Internal Shipping Details"]);return p.jsxs("div",{className:"flex flex-col gap-4 h-full overflow-y-auto custom-scrollbar pr-2 pb-20 lg:pb-2",children:[p.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg relative overflow-hidden flex-shrink-0",children:[p.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:p.jsx("svg",{className:"w-24 h-24 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),p.jsxs("h3",{className:"text-xs font-black text-blue-400 uppercase tracking-[0.25em] mb-4 relative z-10 flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-4 bg-blue-500 rounded-full"}),""]}),p.jsxs("div",{className:"space-y-3 relative z-10",children:[p.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[p.jsx("input",{type:"text",name:"Customer Name",value:t["Customer Name"]||"",onChange:n,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl font-bold text-sm text-white placeholder-gray-600 focus:border-blue-500",placeholder:"",required:!0}),p.jsx("input",{type:"tel",name:"Customer Phone",value:t["Customer Phone"]||"",onChange:n,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl font-mono font-black text-sm text-blue-300 placeholder-gray-600 focus:border-blue-500",placeholder:"",required:!0})]}),p.jsxs("div",{className:"space-y-3 pt-2",children:[p.jsx(hy,{provinces:S,selectedProvince:t.Location||"",onSelect:r}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("select",{value:c,onChange:D=>i(D.target.value),className:"form-select bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-gray-300 h-12",disabled:!t.Location,children:[p.jsx("option",{value:"",children:"/"}),A.map(D=>p.jsx("option",{value:D,children:D},D))]}),p.jsxs("select",{value:h,onChange:D=>o(D.target.value),className:"form-select bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-gray-300 h-12",disabled:!c,children:[p.jsx("option",{value:"",children:"/"}),w.map(D=>p.jsx("option",{value:D,children:D},D))]})]}),p.jsx("input",{type:"text",name:"Address Details",value:t["Address Details"]||"",onChange:n,className:"form-input !py-3.5 bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold text-white placeholder-gray-600 focus:border-blue-500",placeholder:", ..."})]})]})]}),p.jsxs("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg relative overflow-hidden flex-shrink-0",children:[p.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:p.jsx("svg",{className:"w-24 h-24 text-orange-500",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"})})}),p.jsxs("h3",{className:"text-xs font-black text-orange-400 uppercase tracking-[0.25em] mb-4 relative z-10 flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-4 bg-orange-500 rounded-full"})," & "]}),p.jsxs("div",{className:"space-y-4 relative z-10",children:[p.jsx(py,{methods:e.shippingMethods||[],selectedMethodName:t["Internal Shipping Method"]||"",onSelect:s}),(N==null?void 0:N.RequireDriverSelection)&&p.jsxs("div",{className:"space-y-3 pt-2 border-t border-white/5 animate-fade-in",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("label",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest ml-1",children:""}),!t["Internal Shipping Details"]&&p.jsx("span",{className:"text-[9px] text-red-400 font-bold animate-pulse",children:"* Required"})]}),p.jsx("div",{onClick:()=>y(!0),className:`
                                    relative p-3 rounded-2xl border transition-all cursor-pointer group flex items-center gap-4 shadow-lg
                                    ${T?"bg-gradient-to-r from-gray-800 to-gray-900 border-blue-500/30 hover:border-blue-500/50":"bg-red-500/5 border-red-500/20 hover:bg-red-500/10 border-dashed"}
                                `,children:T?p.jsxs(p.Fragment,{children:[p.jsx("img",{src:at(T.ImageURL),alt:T.DriverName,className:"w-12 h-12 rounded-xl object-cover border border-white/10 shadow-sm"}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-white font-black text-sm truncate",children:T.DriverName}),p.jsx("p",{className:"text-[9px] text-blue-400 font-bold uppercase tracking-wider mt-0.5",children:"Driver Selected"})]}),p.jsx("div",{className:"bg-black/40 p-2.5 rounded-xl border border-white/10 group-hover:bg-blue-600 group-hover:text-white group-hover:border-blue-500 transition-colors text-gray-500 shadow-inner",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})})]}):p.jsxs("div",{className:"w-full py-2 flex items-center justify-center gap-3 text-gray-500 group-hover:text-red-400 transition-colors",children:[p.jsx("span",{className:"bg-gray-800 p-2 rounded-full border border-gray-700 group-hover:border-red-500/50 transition-colors",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),p.jsx("span",{className:"font-bold text-xs uppercase tracking-wider",children:"Tap to Select Driver"})]})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[p.jsxs("div",{className:"relative group",children:[p.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase absolute -top-2 left-2 bg-[#161f32] px-1 group-focus-within:text-orange-400 transition-colors",children:"Cost ($)"}),p.jsx("input",{type:"text",inputMode:"decimal",name:"Internal Cost",value:t["Internal Cost"],onChange:n,className:"form-input !py-2.5 !px-3 bg-gray-900/80 border-gray-700 rounded-xl font-black text-orange-400 text-sm text-center focus:border-orange-500"})]}),p.jsxs("div",{className:"relative group",children:[p.jsx("label",{className:"text-[8px] font-black text-gray-500 uppercase absolute -top-2 left-2 bg-[#161f32] px-1 group-focus-within:text-white transition-colors",children:"Status"}),p.jsxs("select",{name:"Payment Status",value:t["Payment Status"],onChange:n,className:`form-select !py-2.5 !px-2 rounded-xl font-black text-xs uppercase border-none w-full ${t["Payment Status"]==="Paid"?"bg-emerald-600 text-white shadow-lg shadow-emerald-900/50":"bg-red-900/40 text-red-400 border border-red-500/20"}`,children:[p.jsx("option",{value:"Unpaid",children:"Unpaid"}),p.jsx("option",{value:"Paid",children:"Paid"})]})]})]}),t["Payment Status"]==="Paid"&&p.jsxs("div",{className:"flex items-center gap-3 animate-fade-in bg-black/30 p-2 rounded-2xl border border-white/5",children:[p.jsxs("select",{value:t["Payment Info"],onChange:l,className:"form-select bg-transparent border-none text-xs font-bold flex-grow text-white focus:ring-0",children:[p.jsx("option",{value:"",children:"Select Bank..."}),(P=e.bankAccounts)==null?void 0:P.map(D=>p.jsx("option",{value:D.BankName,children:D.BankName},D.BankName))]}),m&&p.jsx("img",{src:m,className:"w-10 h-10 object-contain bg-white/10 p-1 rounded-xl border border-white/10",alt:""})]})]})]}),p.jsx("div",{className:"bg-gray-800/40 border border-white/5 rounded-[2rem] p-5 shadow-lg mt-auto flex-shrink-0",children:p.jsx("textarea",{name:"Note",value:t.Note||"",onChange:n,rows:3,className:"form-textarea bg-gray-900/80 border-gray-700 rounded-xl text-xs font-bold w-full resize-none text-gray-300 placeholder-gray-600 focus:border-blue-500",placeholder:"..."})}),v&&p.jsx(Od,{isOpen:!0,onClose:()=>y(!1),maxWidth:"max-w-3xl",children:p.jsxs("div",{className:"p-6 sm:p-8 bg-[#0f172a] rounded-[2.5rem] border border-white/10",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("h3",{className:"text-xl sm:text-2xl font-black text-white uppercase tracking-tighter flex items-center gap-3",children:[p.jsx("span",{className:"w-2 h-8 bg-blue-600 rounded-full"}),"Select Driver"]}),p.jsx("button",{onClick:()=>y(!1),className:"w-10 h-10 rounded-2xl bg-gray-800 text-gray-400 hover:text-white flex items-center justify-center transition-all hover:bg-gray-700 active:scale-90",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar pr-2 bg-black/20 rounded-3xl p-2 border border-white/5",children:p.jsx(gy,{drivers:e.drivers||[],selectedDriverName:t["Internal Shipping Details"]||"",onSelect:D=>{a(D),y(!1)}})})]})})]})},yy=({value:t,onChange:e,label:n="*",min:r=1,max:i=99})=>{var A;const o=be.useRef(null),[s,a]=be.useState(!1),l=()=>{const w=Math.min(i,t+1);e(w)},c=()=>{const w=Math.max(r,t-1);e(w)},h=w=>{const N=w.target.value;if(N===""){a(!0);return}const T=parseInt(N,10);isNaN(T)||(T<r||T>i?a(!0):(e(T),a(!1)))},m=()=>{if(s){const w=o.current;if(w&&w.value){let N=parseInt(w.value,10);isNaN(N)||N<r?N=r:N>i&&(N=i),e(N)}else e(r);a(!1)}},v=w=>{var N;w.key==="Enter"?(w.preventDefault(),m(),(N=o.current)==null||N.blur()):w.key==="ArrowUp"?(w.preventDefault(),l()):w.key==="ArrowDown"&&(w.preventDefault(),c())},y=()=>{a(!0)},S=s?((A=o.current)==null?void 0:A.value)||"":t;return p.jsxs("div",{className:"space-y-1.5 w-full",children:[p.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:n}),p.jsxs("div",{className:"flex items-center bg-black/40 rounded-2xl border border-gray-700 h-12 w-full overflow-hidden focus-within:border-blue-500/50 transition-all focus-within:shadow-[0_0_20px_rgba(59,130,246,0.15)] ring-1 ring-white/5",children:[p.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${t<=r?"text-gray-600 cursor-not-allowed opacity-50":"text-gray-400 hover:text-white hover:bg-white/5 active:scale-90"}
                        transition-all border-r border-gray-700/50
                    `,onClick:c,disabled:t<=r,"aria-label":"",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:p.jsx("path",{d:"M20 12H4"})})}),p.jsx("input",{ref:o,type:"number",inputMode:"numeric",value:S,onChange:h,onBlur:m,onFocus:y,onKeyDown:v,min:r,max:i,step:"1",className:"flex-1 h-full bg-transparent text-center text-white font-black text-base outline-none border-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:r.toString(),"aria-label":""}),p.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${t>=i?"text-gray-600 cursor-not-allowed opacity-50":"text-blue-400 hover:text-white hover:bg-blue-600/10 active:scale-90"}
                        transition-all border-l border-gray-700/50
                    `,onClick:l,disabled:t>=i,"aria-label":"",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:p.jsx("path",{d:"M12 4v16m8-8H4"})})})]}),p.jsxs("div",{className:"text-xs text-gray-500 px-1 flex justify-between",children:[p.jsxs("span",{children:[": ",r]}),p.jsxs("span",{children:[": ",i]})]})]})},xy=({products:t,masterProducts:e,onProductChange:n,onAddProduct:r,onRemoveProduct:i,onPreviewImage:o,onScanBarcode:s})=>p.jsxs("div",{className:"flex-1 bg-gray-800/30 border border-white/5 rounded-[2rem] p-4 lg:p-6 overflow-y-auto custom-scrollbar flex flex-col relative shadow-inner",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 z-20 bg-[#121a2b]/95 backdrop-blur-md p-3 -mx-2 -mt-2 rounded-2xl border border-white/5 shadow-lg",children:[p.jsxs("h3",{className:"text-xs font-black text-white uppercase tracking-widest pl-2 flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Items List (",t.length,")"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{type:"button",onClick:s,className:"px-4 py-2.5 bg-blue-600/10 border border-blue-500/30 text-blue-400 rounded-xl shadow-lg hover:bg-blue-600 hover:text-white transition-all active:scale-95 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"Scan"]}),p.jsxs("button",{type:"button",onClick:r,className:"px-5 py-2.5 bg-blue-600 text-white rounded-xl shadow-lg shadow-blue-600/30 text-[10px] font-black uppercase hover:bg-blue-500 transition-all active:scale-95 flex items-center gap-2",children:[p.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:p.jsx("path",{d:"M12 4v16m8-8H4"})})," Add"]})]})]}),p.jsx("div",{className:"space-y-4 pb-4",children:t.map((a,l)=>p.jsxs("div",{className:"group relative bg-[#0f1523] rounded-[1.5rem] p-4 border border-white/5 hover:border-blue-500/30 transition-all flex flex-col sm:flex-row gap-5 items-start shadow-md hover:shadow-xl",children:[p.jsx("button",{type:"button",onClick:()=>i(l),className:"absolute top-3 right-3 text-gray-600 hover:text-red-500 hover:bg-red-500/10 rounded-full w-8 h-8 flex items-center justify-center transition-all opacity-0 group-hover:opacity-100 focus:opacity-100",children:""}),p.jsx("div",{className:"w-20 h-20 bg-gray-900 rounded-2xl border border-white/10 overflow-hidden flex-shrink-0 cursor-pointer shadow-lg group-hover:scale-105 transition-transform",onClick:()=>a.image&&o(at(a.image)),children:p.jsx("img",{src:at(a.image),className:"w-full h-full object-cover",alt:""})}),p.jsxs("div",{className:"flex-1 w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-4 items-center",children:[p.jsxs("div",{className:"lg:col-span-6 space-y-3",children:[p.jsx(fy,{products:e,selectedProductName:a.name,onSelect:(c,h)=>n(l,"name",c,h)}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:a.colorInfo,onChange:c=>n(l,"colorInfo",c.target.value),className:"bg-gray-800/50 border-none rounded-lg py-1.5 px-3 text-[10px] font-bold text-white w-full focus:ring-1 focus:ring-blue-500 placeholder-gray-600",placeholder:"Color/Size..."}),p.jsx("input",{type:"text",value:a.tags||"",onChange:c=>n(l,"tags",c.target.value),className:"bg-gray-800/50 border-none rounded-lg py-1.5 px-3 text-[10px] font-bold text-blue-300 w-full focus:ring-1 focus:ring-blue-500 placeholder-gray-600",placeholder:"Tags..."})]})]}),p.jsx("div",{className:"lg:col-span-3 flex justify-center",children:p.jsx("div",{className:"w-32",children:p.jsx(yy,{value:Number(a.quantity)||1,onChange:c=>n(l,"quantity",c),label:""})})}),p.jsxs("div",{className:"lg:col-span-3 flex flex-row lg:flex-col justify-between items-center lg:items-end gap-2 h-full",children:[p.jsxs("div",{className:"relative group/price",children:[p.jsx("label",{className:"absolute -top-3 right-0 text-[8px] font-black text-gray-500 uppercase opacity-0 group-hover/price:opacity-100 transition-opacity",children:"Unit Price"}),p.jsx("input",{type:"text",inputMode:"decimal",value:a.finalPrice,onChange:c=>n(l,"finalPrice",c.target.value),className:"w-24 bg-transparent border-b border-gray-700 py-1 font-black text-right text-emerald-400 focus:border-emerald-500 outline-none text-sm transition-all"})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"text-[9px] text-gray-500 uppercase font-black tracking-wider",children:"Total"}),p.jsxs("p",{className:"text-lg font-black text-white tracking-tight",children:["$",(Number(a.total)||0).toFixed(2)]})]})]})]})]},a.id||l))})]}),by=({subtotal:t,grandTotal:e,shippingFee:n,onShippingFeeChange:r,onSave:i,onDelete:o,loading:s})=>p.jsxs("div",{className:"flex-shrink-0 bg-[#0f1523]/80 backdrop-blur-xl border border-white/5 rounded-[2.5rem] p-5 lg:p-6 flex flex-col lg:flex-row gap-6 items-center justify-between shadow-[0_-10px_40px_rgba(0,0,0,0.3)] relative z-30",children:[p.jsxs("div",{className:"flex flex-wrap gap-8 items-center justify-center lg:justify-start w-full lg:w-auto",children:[p.jsxs("div",{className:"text-center lg:text-left",children:[p.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1",children:"Subtotal"}),p.jsxs("p",{className:"text-xl font-bold text-gray-300",children:["$",t.toFixed(2)]})]}),p.jsx("div",{className:"w-px h-10 bg-white/10 hidden lg:block"}),p.jsxs("div",{className:"text-center lg:text-left relative group",children:[p.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1 group-focus-within:text-blue-400 transition-colors",children:"Shipping Fee"}),p.jsxs("div",{className:"relative inline-flex items-center",children:[p.jsx("input",{type:"text",inputMode:"decimal",name:"Shipping Fee (Customer)",value:n,onChange:r,className:"w-20 bg-transparent border-b-2 border-gray-600 text-center font-black text-xl text-white outline-none focus:border-blue-500 transition-all py-0.5"}),p.jsx("span",{className:"text-gray-500 font-black ml-1 text-sm",children:"$"})]})]}),p.jsx("div",{className:"w-px h-10 bg-white/10 hidden lg:block"}),p.jsxs("div",{className:"text-center lg:text-left",children:[p.jsx("p",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-[0.2em] mb-1",children:"Grand Total"}),p.jsxs("p",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-emerald-200 tracking-tighter drop-shadow-md",children:["$",e.toFixed(2)]})]})]}),p.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 w-full lg:w-auto items-center",children:[p.jsxs("button",{type:"button",onClick:o,disabled:s,className:"w-full lg:w-auto px-8 py-5 bg-red-500/10 hover:bg-red-600 text-red-500 hover:text-white rounded-[1.5rem] font-black uppercase text-xs tracking-[0.2em] transition-all flex items-center justify-center gap-3 border border-red-500/20 active:scale-95 group order-last lg:order-first",children:[p.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:rotate-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",strokeWidth:"2.5"})}),"Delete"]}),p.jsx("button",{onClick:i,disabled:s,className:"w-full lg:w-auto px-12 py-5 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white rounded-[1.5rem] font-black uppercase text-xs tracking-[0.2em] shadow-[0_10px_30px_rgba(37,99,235,0.4)] transform active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50 disabled:cursor-not-allowed group border border-white/10",children:s?p.jsx(Pr,{size:"sm"}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"relative z-10",children:"Save Changes"}),p.jsx("div",{className:"w-8 h-8 bg-white/10 rounded-full flex items-center justify-center group-hover:bg-white/20 transition-colors",children:p.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]})})]})]}),Ai=()=>{if(typeof window>"u"||typeof navigator>"u")return!1;const t=navigator.userAgent||navigator.vendor||window.opera;return!!(/iPad|iPhone|iPod/.test(t)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)};let Qo=null,la=null;const wy=t=>{if(!t||t.videoWidth===0)return null;const e=80,n=80;if(Qo||(Qo=document.createElement("canvas"),Qo.width=e,Qo.height=n,la=Qo.getContext("2d",{willReadFrequently:!0})),!la)return null;la.drawImage(t,0,0,e,n);const i=la.getImageData(0,0,e,n).data,o=new Float32Array(n).fill(0),s=new Float32Array(e).fill(0);let a=0;for(let A=1;A<n-1;A++)for(let w=1;w<e-1;w++){const N=(A*e+w)*4,T=(i[N]+i[N+1]+i[N+2])/3,_=(i[N-4]+i[N-3]+i[N-2])/3,R=(i[N-e*4]+i[N-e*4+1]+i[N-e*4+2])/3,P=Math.abs(T-_),D=Math.abs(T-R);let I=P+D>30?P+D:0;o[A]+=I,s[w]+=I,a+=I}if(a<15e3)return null;const l=(A,w)=>{const N=new Float32Array(w);for(let I=2;I<w-2;I++)N[I]=(A[I-2]+A[I-1]+A[I]+A[I+1]+A[I+2])/5;let T=0,_=w/2;for(let I=0;I<w;I++)N[I]>T&&(T=N[I],_=I);const R=T*.25;let P=_,D=_;for(;P>0&&N[P]>R;)P--;for(;D<w-1&&N[D]>R;)D++;return{min:Math.max(0,P-2),max:Math.min(w,D+2)}},c=l(s,e),h=l(o,n),m=(c.max-c.min)/e*100,v=(h.max-h.min)/n*100,y=(c.min+c.max)/2/e*100,S=(h.min+h.max)/2/n*100;return m>90||v>90||m<5||v<5?null:{x:y,y:S,width:m,height:v,score:Math.min(1,a/2e5)}},Xr=(t,e,n)=>t+(e-t)*n,Ny=(t,e,n,r,i)=>{const[o,s]=be.useState(null),[a,l]=be.useState(!1),c=be.useRef(0),h=be.useRef(0),m=be.useRef(0),v=be.useRef(null),y=be.useRef(0),S=be.useRef(!1),A=be.useRef(!1),w=be.useRef(null);be.useEffect(()=>{if("BarcodeDetector"in window&&!Ai())try{console.log("Initializing Native BarcodeDetector..."),w.current=new window.BarcodeDetector({formats:["qr_code","ean_13","code_128","code_39"]})}catch(_){console.warn("Native BarcodeDetector failed to init:",_)}},[]);const N=()=>{y.current=Date.now()+3e3,l(!1)},T=be.useCallback(async()=>{if(Ai())return;if(!t||t.paused||t.ended){c.current=requestAnimationFrame(T);return}let _=null;if(w.current)if(A.current)v.current;else{A.current=!0;try{const R=await w.current.detect(t);if(R.length>0){const D=R.sort((j,J)=>J.boundingBox.width*J.boundingBox.height-j.boundingBox.width*j.boundingBox.height)[0].boundingBox,I=t.videoWidth,M=t.videoHeight;I>0&&M>0&&(_={x:(D.x+D.width/2)/I*100,y:(D.y+D.height/2)/M*100,width:D.width/I*100,height:D.height/M*100})}}catch{}finally{A.current=!1}}else _=wy(t);if(_){if(m.current=0,v.current?v.current={x:Xr(v.current.x,_.x,.4),y:Xr(v.current.y,_.y,.4),width:Xr(v.current.width,_.width,.4),height:Xr(v.current.height,_.height,.4)}:v.current=_,s(R=>R?{x:Xr(R.x,v.current.x,.25),y:Xr(R.y,v.current.y,.25),width:Xr(R.width,v.current.width,.2),height:Xr(R.height,v.current.height,.2)}:v.current),Date.now()>y.current){const R=_.x>30&&_.x<70&&_.y>30&&_.y<70,P=60,D=_.width<P;if(R&&D?h.current++:h.current=Math.max(0,h.current-1),h.current>3){let I=5;try{const J=e!=null&&e.getCapabilities?e.getCapabilities():{};J.zoom&&J.zoom.max&&(I=J.zoom.max)}catch{}const M=Math.min(I,8),j=P-_.width;if(Math.abs(j)>2&&n<M&&!S.current){l(!0);let E=j*.01*n;E=Math.max(-.2,Math.min(E,.2));const k=Math.min(Math.max(n+E,1),M);Math.abs(k-n)>.02&&(S.current=!0,r(k),i(k).catch(F=>{}).finally(()=>{S.current=!1}))}}}}else m.current++,m.current>10&&(s(null),v.current=null,l(!1),h.current=0);c.current=requestAnimationFrame(T)},[t,n,r,i,e]);return be.useEffect(()=>(Ai()||(c.current=requestAnimationFrame(T)),()=>{c.current&&cancelAnimationFrame(c.current)}),[T]),{trackingBox:o,isAutoZooming:a,notifyManualZoom:N}},Sy=(t,e,n)=>{const r=be.useRef(null),[i,o]=be.useState(!0),[s,a]=be.useState(null),[l,c]=be.useState(1),[h,m]=be.useState(null),[v,y]=be.useState(!1),[S,A]=be.useState(!1),[w,N]=be.useState("environment"),T=be.useRef(null),_=be.useRef(null),R=be.useRef(new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3")),P=be.useCallback(()=>{N($=>$==="environment"?"user":"environment")},[]),D=()=>{var q,z,X;if(_.current&&_.current.readyState==="live")return _.current;if((q=r.current)!=null&&q.html5QrCode){const ne=(X=(z=r.current.html5QrCode).getRunningTrackCamera)==null?void 0:X.call(z);if(ne)return ne}const $=document.querySelector(`#${t} video`);if($&&$.srcObject){const se=$.srcObject.getVideoTracks()[0];if(se)return se}return null},I=be.useCallback(async $=>{const q=D();if(!q)return;const z=Ai();try{await q.applyConstraints($)}catch{if($.zoom&&z)try{await q.applyConstraints({advanced:[{zoom:$.zoom}]})}catch{}}},[]),M=be.useCallback(async $=>{if(!D())return;let z=$;h&&(z=Math.max(h.min,Math.min($,h.max))),c(z),await I({zoom:z})},[h,I]),{trackingBox:j,isAutoZooming:J,notifyManualZoom:E}=Ny(T.current,_.current,l,c,$=>I({zoom:$})),k=be.useCallback($=>{E(),M($)},[E,M]),F=be.useCallback(async()=>{const $=D();if(!$||Ai())return;const q=!v;try{await $.applyConstraints({advanced:[{torch:q}]}),y(q)}catch{try{await $.applyConstraints({torch:q}),y(q)}catch{}}},[v]),H=be.useCallback(async()=>{const $=D();if($){try{await I({focusMode:"continuous"})}catch{}try{const q=$.getCapabilities?$.getCapabilities():{};q.focusMode&&q.focusMode.includes("single-shot")&&await I({focusMode:"single-shot"})}catch{}}},[I]),ie=be.useCallback(async $=>{if(!r.current)throw new Error("Scanner not initialized");return await r.current.scanFile($,!0)},[]);return be.useEffect(()=>{if(!window.Html5Qrcode){a("Scanner library missing.");return}return(async()=>{o(!0),y(!1),c(1);const q=new window.Html5Qrcode(t);r.current=q;const z=Ai(),ne={fps:30,qrbox:{width:280,height:280},...z?{}:{aspectRatio:1.777777778},disableFlip:!1,experimentalFeatures:{useBarCodeDetectorIfSupported:!z},videoConstraints:z?{facingMode:"environment",width:{min:1280,ideal:1920},height:{min:720,ideal:1080}}:{facingMode:w,width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080},frameRate:{ideal:60,min:30},aspectRatio:1.777777778,focusMode:"continuous"}};let se=0;const L=V=>{const K=Date.now();K-se<1500||(se=K,R.current.currentTime=0,R.current.play().catch(()=>{}),navigator.vibrate&&navigator.vibrate(50),e(V))};try{await q.start({facingMode:w},ne,L,void 0);const V=document.querySelector(`#${t} video`);V&&(T.current=V,V.setAttribute("playsinline","true"),V.style.objectFit="cover");const K=D();if(K){_.current=K;const Q=K.getCapabilities?K.getCapabilities():{},ee=K.getSettings();if(!z&&"torch"in Q?A(!0):A(!1),z){const ce=ee.zoom?Math.min(ee.zoom,1):1;m({min:ce>=1?1:.5,max:5,step:.1}),c(ee.zoom||1)}else Q.zoom?(m({min:Q.zoom.min,max:Q.zoom.max,step:Q.zoom.step}),c(ee.zoom||Q.zoom.min)):m(null)}o(!1)}catch(V){console.error("Camera Start Error:",V),a(V.name==="NotAllowedError"?"Camera permission denied.":"Camera error."),o(!1)}})(),()=>{r.current&&r.current.isScanning&&r.current.stop().then(()=>r.current.clear()).catch(console.error)}},[w]),{isInitializing:i,error:s,zoom:l,zoomCapabilities:h,handleZoomChange:k,isTorchOn:v,isTorchSupported:S,toggleTorch:F,trackingBox:j,isAutoZooming:J,triggerFocus:H,switchCamera:P,facingMode:w,scanFromImage:ie}},_y=({isScanning:t,error:e,scanSuccessFlash:n,zoom:r,useSimulatedZoom:i,trackingBox:o,focusPoint:s})=>p.jsxs(p.Fragment,{children:[p.jsx("style",{children:`
              .hud-grid {
                background-size: 40px 40px;
                background-image: linear-gradient(to right, rgba(59, 130, 246, 0.1) 1px, transparent 1px), linear-gradient(to bottom, rgba(59, 130, 246, 0.1) 1px, transparent 1px);
              }
              .scanner-laser {
                position: absolute; left: 0; width: 100%; height: 2px; background: #3b82f6; box-shadow: 0 0 15px #3b82f6; animation: laser-scan 2s ease-in-out infinite;
              }
              @keyframes laser-scan { 0% { top: 0%; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
              
              /* Enhanced Success Animation */
              .scan-flash-overlay { animation: flash-screen 0.4s ease-out forwards; }
              @keyframes flash-screen { 
                  0% { background-color: rgba(16, 185, 129, 0); } 
                  20% { background-color: rgba(16, 185, 129, 0.4); } 
                  100% { background-color: rgba(16, 185, 129, 0); } 
              }
              
              .tracking-box {
                  position: absolute;
                  border: 2px solid #10b981;
                  background-color: rgba(16, 185, 129, 0.1);
                  box-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
                  border-radius: 8px;
                  transition: all 0.1s linear; /* Smooth movement */
                  pointer-events: none;
                  z-index: 10;
                  transform: translate(-50%, -50%); /* Center based on x, y */
              }

              /* Focus Reticle Animation */
              @keyframes focus-ping {
                  0% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; border-color: white; }
                  20% { opacity: 1; }
                  100% { transform: translate(-50%, -50%) scale(1); opacity: 0; border-color: #f59e0b; }
              }
              .focus-reticle {
                  position: absolute;
                  width: 60px;
                  height: 60px;
                  border: 2px solid white;
                  border-radius: 50%;
                  pointer-events: none;
                  animation: focus-ping 0.6s ease-out forwards;
                  z-index: 20;
                  box-shadow: 0 0 10px rgba(255,255,255,0.5);
              }
            `}),p.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[!t&&!e&&p.jsx("div",{className:"absolute inset-0 hud-grid opacity-30"}),n&&p.jsx("div",{className:"absolute inset-0 z-50 scan-flash-overlay"}),s&&p.jsx("div",{className:"focus-reticle",style:{left:s.x,top:s.y}}),o&&p.jsx("div",{className:"tracking-box",style:{left:`${o.x}%`,top:`${o.y}%`,width:`${o.width}%`,height:`${o.height}%`},children:p.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-emerald-500 text-white text-[9px] font-black px-2 py-0.5 rounded uppercase tracking-wider shadow-lg whitespace-nowrap animate-pulse",children:"AI TRACKING"})}),!t&&!e&&!o&&p.jsxs("div",{className:`
                        absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 
                        w-[260px] h-[260px] border-2 transition-all duration-300
                        ${n?"border-emerald-500 scale-110 shadow-[0_0_50px_rgba(16,185,129,0.8)]":"border-white/30"}
                        rounded-[2rem]
                    `,children:[p.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-blue-500 rounded-tl-2xl -translate-x-1 -translate-y-1"}),p.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-blue-500 rounded-tr-2xl translate-x-1 -translate-y-1"}),p.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-blue-500 rounded-bl-2xl -translate-x-1 translate-y-1"}),p.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-blue-500 rounded-br-2xl translate-x-1 translate-y-1"}),p.jsx("div",{className:"scanner-laser"})]}),p.jsxs("div",{className:"absolute top-[18%] right-4 flex flex-col gap-2 items-end",children:[p.jsxs("div",{className:"text-[9px] font-mono text-blue-400 bg-black/60 px-2 py-1 rounded border border-blue-500/20 flex items-center gap-2 backdrop-blur-md",children:[p.jsxs("span",{children:[r.toFixed(1),"x"]}),i&&p.jsx("span",{className:"bg-white/10 px-1 rounded text-[8px] text-white",children:"DIGITAL"})]}),o&&p.jsx("div",{className:"text-[9px] font-mono text-emerald-400 bg-black/60 px-2 py-1 rounded border border-emerald-500/20 flex items-center gap-2 backdrop-blur-md animate-pulse",children:p.jsx("span",{children:"SMART-ZOOM"})})]})]})]}),Ay=({history:t,isOpen:e,setIsOpen:n,onClear:r})=>{const i=be.useRef(null),o=a=>{i.current=a.touches[0].clientY},s=a=>{i.current!==null&&a.touches[0].clientY-i.current>50&&(n(!1),i.current=null)};return p.jsxs("div",{className:`
                absolute bottom-0 left-0 right-0 bg-[#0f172a] rounded-t-[2.5rem] border-t border-white/10 shadow-[0_-20px_60px_rgba(0,0,0,0.9)] z-50 transition-all duration-300 ease-out flex flex-col
                ${e?"h-[80vh]":"h-0 overflow-hidden"}
            `,onTouchStart:o,onTouchMove:s,onTouchEnd:()=>{i.current=null},children:[p.jsx("div",{className:"w-full flex justify-center py-5 cursor-pointer active:bg-white/5 transition-colors rounded-t-[2.5rem]",onClick:()=>n(!e),children:p.jsx("div",{className:"w-16 h-1.5 bg-gray-600 rounded-full"})}),p.jsxs("div",{className:"flex-grow flex flex-col overflow-hidden px-5 pb-6 animate-fade-in",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-1.5 h-6 bg-blue-500 rounded-full"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-base font-black text-white uppercase tracking-tight",children:"Scanned History"}),p.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:[t.length," items logged"]})]})]}),p.jsx("button",{onClick:r,className:"text-[10px] text-red-400 font-black uppercase tracking-widest bg-red-500/10 px-4 py-2 rounded-xl border border-red-500/20 active:scale-95 transition-all hover:bg-red-500 hover:text-white",children:"Clear All"})]}),p.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar space-y-3 pb-safe-bottom",children:t.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center h-48 opacity-40",children:[p.jsx("svg",{className:"w-12 h-12 text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),p.jsx("p",{className:"text-xs font-black uppercase text-gray-500 tracking-widest",children:"No items scanned yet"})]}):t.map((a,l)=>{var c;return p.jsxs("div",{className:"flex items-center gap-4 bg-gray-800/40 p-3 rounded-2xl border border-white/5 shadow-sm",children:[p.jsx("div",{className:"w-12 h-12 bg-black rounded-xl overflow-hidden border border-white/10 flex-shrink-0 shadow-inner",children:a.product?p.jsx("img",{src:at(a.product.ImageURL),className:"w-full h-full object-cover",alt:""}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 font-black text-xs",children:"?"})}),p.jsxs("div",{className:"flex-grow min-w-0",children:[p.jsx("h4",{className:"text-white font-bold text-sm truncate leading-tight",children:((c=a.product)==null?void 0:c.ProductName)||"Unknown Product"}),p.jsx("p",{className:"text-[10px] text-gray-500 font-mono mt-1 font-bold tracking-wider",children:a.code})]}),p.jsxs("div",{className:"text-right flex flex-col items-end",children:[p.jsxs("span",{className:"bg-blue-600/20 text-blue-400 text-xs font-black px-2 py-0.5 rounded-lg border border-blue-500/20 mb-1",children:["x",a.count]}),p.jsx("span",{className:"text-[9px] text-gray-600 font-bold",children:new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},l)})})]})]})},Cy=({onClose:t,onSwitchCamera:e,onToggleTorch:n,isTorchOn:r,isTorchSupported:i,isAutoZooming:o})=>{const s=!Ai()&&i;return p.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent pointer-events-none",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[p.jsxs("div",{className:"pointer-events-auto bg-black/40 backdrop-blur-md px-3 py-1.5 rounded-full border border-blue-500/30 flex items-center gap-2",children:[p.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),p.jsx("span",{className:"text-white font-black text-xs uppercase tracking-widest",children:"LIVE"}),o&&p.jsx("span",{className:"text-[9px] text-blue-400 font-bold ml-1 animate-pulse",children:"AUTO-ZOOM"})]}),p.jsxs("div",{className:"flex gap-3 pointer-events-auto",children:[p.jsx("button",{onClick:e,className:"w-10 h-10 bg-gray-800/60 backdrop-blur-md rounded-full text-white border border-white/10 flex items-center justify-center active:scale-90 transition-all hover:bg-gray-700/60",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s&&p.jsx("button",{onClick:n,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all backdrop-blur-md border ${r?"bg-yellow-500 text-black border-yellow-400 shadow-[0_0_15px_rgba(234,179,8,0.5)]":"bg-gray-800/60 text-gray-300 border-white/10"}`,children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),p.jsx("button",{onClick:t,className:"w-10 h-10 bg-gray-800/60 backdrop-blur-md rounded-full text-white border border-white/10 flex items-center justify-center active:scale-90 transition-all hover:bg-red-500/80 hover:border-red-500/50",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})]})},Ty=({zoom:t,zoomCapabilities:e,handleZoomChange:n,scanMode:r,setScanMode:i,onOpenHistory:o,onUpload:s})=>{const a=be.useRef(null),l=e&&e.min<1,c=e&&e.max>=2,h=e&&e.max>=5,m=v=>{v.target.files&&v.target.files[0]&&(s(v.target.files[0]),v.target.value="")};return p.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 z-40 bg-gradient-to-t from-black via-black/90 to-transparent flex flex-col gap-5 pointer-events-none",style:{paddingBottom:"max(1.5rem, env(safe-area-inset-bottom))"},children:[e&&p.jsxs("div",{className:"flex justify-center items-center gap-4 pointer-events-auto mb-1 animate-fade-in-up",children:[l&&p.jsx("button",{onClick:()=>n(.5),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-.5)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:".5"}),p.jsx("button",{onClick:()=>n(1),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-1)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"1x"}),c&&p.jsx("button",{onClick:()=>n(2),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-2)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"2"}),h&&p.jsx("button",{onClick:()=>n(5),className:`w-9 h-9 rounded-full flex items-center justify-center text-[10px] font-black transition-all border ${Math.abs(t-5)<.2?"bg-yellow-500 text-black border-yellow-400 scale-110":"bg-black/50 text-white border-white/20 hover:bg-black/70"}`,children:"5"})]}),e&&p.jsxs("div",{className:"flex items-center gap-3 px-2 pointer-events-auto",children:[p.jsxs("span",{className:"text-[9px] font-black text-gray-500 w-6 text-center",children:[e.min,"x"]}),p.jsx("input",{type:"range",min:e.min,max:e.max,step:e.step,value:t,onChange:v=>n(parseFloat(v.target.value)),className:"flex-1 h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500"}),p.jsxs("span",{className:"text-[9px] font-black text-gray-500 w-6 text-center",children:[e.max,"x"]})]}),p.jsxs("div",{className:"flex justify-between items-center gap-3 pointer-events-auto px-2",children:[p.jsx("input",{type:"file",accept:"image/*",ref:a,className:"hidden",onChange:m}),p.jsx("button",{onClick:()=>{var v;return(v=a.current)==null?void 0:v.click()},className:"w-12 h-12 rounded-2xl bg-gray-800 border border-white/10 flex items-center justify-center text-gray-400 active:scale-90 transition-all shadow-lg hover:text-white",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsxs("div",{className:"flex bg-gray-800 p-1.5 rounded-2xl border border-white/10 shadow-lg flex-grow max-w-[200px]",children:[p.jsx("button",{onClick:()=>i("single"),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all duration-300 ${r==="single"?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,children:"Single"}),p.jsx("button",{onClick:()=>i("increment"),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-wider transition-all duration-300 ${r==="increment"?"bg-emerald-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,children:"Multi"})]}),p.jsx("div",{className:"w-12"})]}),p.jsx("div",{className:"w-full flex justify-center pb-2 cursor-pointer opacity-70 hover:opacity-100 transition-opacity pointer-events-auto",onClick:o,children:p.jsxs("div",{className:"flex flex-col items-center gap-1",children:[p.jsx("div",{className:"w-10 h-1 bg-gray-600 rounded-full"}),p.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase tracking-widest",children:"Swipe for History"})]})})]})},Iy=({onClose:t,onCodeScanned:e,scanMode:n,setScanMode:r,productsInOrder:i,masterProducts:o})=>{var K;const[s,a]=be.useState([]),[l,c]=be.useState(!1),[h,m]=be.useState(null),[v,y]=be.useState(!1),[S,A]=be.useState(null),w=be.useRef(null),N=be.useRef(null),T=be.useRef(null),_=be.useRef(0),R=be.useRef(1),P=be.useRef(0);be.useEffect(()=>(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[]);const D=be.useCallback(Q=>{y(!0),setTimeout(()=>y(!1),400);const ee=o.find(ce=>ce.Barcode&&ce.Barcode.trim()===Q.trim());if(a(ce=>{const de=ce.findIndex(we=>we.code===Q),pe=Date.now();if(de>-1){const we=[...ce];return we[de]={...we[de],count:we[de].count+1,timestamp:pe},[we.splice(de,1)[0],...we]}return[{code:Q,product:ee,timestamp:pe,count:1},...ce]}),ee){const ce=i.find(de=>de.name===ee.ProductName);n==="single"&&ce?m({status:"warning",message:"",product:ee}):(e(Q),m({status:"success",message:"",product:ee}))}else m({status:"error",message:`: ${Q}`,product:void 0});setTimeout(()=>m(null),2e3)},[o,i,n,e]),{isInitializing:I,error:M,zoom:j,zoomCapabilities:J,handleZoomChange:E,isTorchOn:k,isTorchSupported:F,toggleTorch:H,trackingBox:ie,isAutoZooming:$,triggerFocus:q,switchCamera:z,scanFromImage:X}=Sy("barcode-reader-container",D),ne=Q=>{if(Q.touches.length===2){const ee=Math.hypot(Q.touches[0].pageX-Q.touches[1].pageX,Q.touches[0].pageY-Q.touches[1].pageY);w.current=ee,R.current=j}else if(Q.touches.length===1){N.current=Q.touches[0].clientY,T.current=Q.touches[0].clientX,_.current=Date.now();const ee=Date.now();ee-P.current<300&&J&&E(J.min||1),P.current=ee}},se=Q=>{if(Q.touches.length===2&&w.current!==null&&J){const ce=Math.hypot(Q.touches[0].pageX-Q.touches[1].pageX,Q.touches[0].pageY-Q.touches[1].pageY)/w.current,de=J.max-J.min,pe=(ce-1)*de*.8;E(R.current+pe)}else if(Q.touches.length===1&&N.current!==null){const ee=Q.touches[0].clientY-N.current;ee<-50&&!l?(c(!0),N.current=null):ee>50&&l&&(c(!1),N.current=null)}},L=Q=>{if(T.current!==null&&N.current!==null){const ee=Q.changedTouches[0].clientX,ce=Q.changedTouches[0].clientY,de=Math.abs(ee-T.current),pe=Math.abs(ce-N.current);Date.now()-_.current<300&&de<15&&pe<15&&(A({x:ee,y:ce}),q(),setTimeout(()=>A(null),1e3))}w.current=null,N.current=null,T.current=null},V=async Q=>{try{const ee=await X(Q);D(ee)}catch{m({status:"error",message:" Barcode ",product:void 0}),setTimeout(()=>m(null),2e3)}};return p.jsxs("div",{className:"fixed inset-0 bg-black z-[100] flex flex-col animate-fade-in touch-none overflow-hidden h-screen",style:{height:"100dvh"},onTouchStart:ne,onTouchMove:se,onTouchEnd:L,children:[p.jsx("style",{children:`
              #barcode-reader-container { width: 100%; height: 100%; background: #000; overflow: hidden; }
              #barcode-reader-container video { object-fit: cover; width: 100%; height: 100%; }
              @keyframes pop-in { 0% { transform: translate(-50%, -40%) scale(0.8); opacity: 0; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; } }
              .animate-pop-in { animation: pop-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
            `}),p.jsx(Cy,{onClose:t,onSwitchCamera:z,onToggleTorch:H,isTorchOn:k,isTorchSupported:F,isAutoZooming:$}),p.jsxs("div",{className:"relative flex-grow w-full overflow-hidden bg-black",children:[p.jsx("div",{id:"barcode-reader-container"}),p.jsx(_y,{isScanning:I,error:M,scanSuccessFlash:v,zoom:j,useSimulatedZoom:!1,trackingBox:ie,focusPoint:S}),h&&p.jsx("div",{className:"absolute top-1/2 left-1/2 w-[85%] max-w-sm z-50 animate-pop-in transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",children:p.jsxs("div",{className:`
                            bg-gray-900/95 backdrop-blur-2xl border p-4 rounded-3xl shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex items-center gap-4
                            ${h.status==="success"?"border-emerald-500 shadow-emerald-900/30":h.status==="warning"?"border-yellow-500 shadow-yellow-900/30":"border-red-500 shadow-red-900/30"}
                        `,children:[h.product?p.jsx("div",{className:"w-14 h-14 rounded-2xl bg-black border border-white/10 overflow-hidden flex-shrink-0",children:p.jsx("img",{src:at(h.product.ImageURL),className:"w-full h-full object-cover",alt:""})}):p.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gray-800 flex items-center justify-center text-red-400",children:p.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:2})})}),p.jsxs("div",{className:"min-w-0 flex-grow",children:[p.jsx("p",{className:`text-[10px] font-black uppercase tracking-widest mb-0.5 ${h.status==="success"?"text-emerald-400":h.status==="warning"?"text-yellow-400":"text-red-400"}`,children:h.status==="success"?"SUCCESS":h.status==="warning"?"ALREADY ADDED":"ERROR"}),p.jsx("h3",{className:"text-white font-bold text-sm truncate",children:((K=h.product)==null?void 0:K.ProductName)||"Unknown Product"}),h.product&&p.jsxs("p",{className:"text-white font-mono font-black text-lg mt-0.5",children:["$",h.product.Price.toFixed(2)]})]})]})}),M&&p.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 z-30 p-6 text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-red-500/20 text-red-500 rounded-full flex items-center justify-center mb-4",children:p.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:2})})}),p.jsx("p",{className:"text-red-400 font-bold text-sm",children:M})]}),I&&p.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black z-30",children:[p.jsx(Pr,{size:"lg"}),p.jsx("p",{className:"text-blue-500 font-black text-[10px] uppercase tracking-widest mt-4 animate-pulse",children:"Initializing..."})]})]}),!l&&p.jsx(Ty,{zoom:j,zoomCapabilities:J,handleZoomChange:E,scanMode:n,setScanMode:r,onOpenHistory:()=>c(!0),onUpload:V}),p.jsx(Ay,{history:s,isOpen:l,setIsOpen:c,onClear:()=>a([])})]})},Oy=({order:t,onSaveSuccess:e,onCancel:n})=>{const{appData:r,currentUser:i,previewImage:o,refreshData:s}=be.useContext(po),[a,l]=be.useState(t),[c,h]=be.useState(!1),[m,v]=be.useState(""),[y,S]=be.useState(""),[A,w]=be.useState(!1),[N,T]=be.useState("increment"),[_,R]=be.useState(""),[P,D]=be.useState("");be.useEffect(()=>{l(t)},[t]),be.useEffect(()=>{var q;if(a["Payment Status"]==="Paid"&&a["Payment Info"]){const z=(q=r.bankAccounts)==null?void 0:q.find(X=>X.BankName===a["Payment Info"]);z&&S(at(z.LogoURL))}},[a["Payment Status"],a["Payment Info"],r.bankAccounts]);const I=q=>{if(!q)return"";const z=q.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(z){const se=z[1],L=z[2].padStart(2,"0"),V=z[3].padStart(2,"0"),K=z[4].padStart(2,"0"),Q=z[5].padStart(2,"0");return`${se}-${L}-${V}T${K}:${Q}`}const X=new Date(q);if(isNaN(X.getTime()))return"";const ne=se=>se.toString().padStart(2,"0");return`${X.getFullYear()}-${ne(X.getMonth()+1)}-${ne(X.getDate())}T${ne(X.getHours())}:${ne(X.getMinutes())}`},M=q=>{if(!q.target.value)return;const z=new Date(q.target.value);isNaN(z.getTime())||l(X=>({...X,Timestamp:z.toISOString()}))},j=(q,z)=>{const X=q.reduce((V,K)=>V+(K.total||0),0),ne=X+z,se=q.reduce((V,K)=>V+(K.cost||0)*(K.quantity||0),0),L=q.reduce((V,K)=>V+(K.originalPrice-K.finalPrice)*K.quantity,0);return{Subtotal:X,"Grand Total":ne,"Total Product Cost ($)":se,"Discount ($)":L}},J=()=>{l(q=>{const z={id:Date.now()+Math.random(),name:"",quantity:1,originalPrice:0,finalPrice:0,total:0,discountPercent:0,colorInfo:"",image:"",cost:0,tags:""},X=[...q.Products,z],ne=parseFloat(String(q["Shipping Fee (Customer)"]))||0,se=j(X,ne);return{...q,Products:X,...se}})},E=q=>{if(a.Products.length<=1){alert(" (Cannot remove last item)");return}l(z=>{const X=z.Products.filter((L,V)=>V!==q),ne=Number(z["Shipping Fee (Customer)"])||0,se=j(X,ne);return{...z,Products:X,...se}})},k=q=>{const z=r.products.find(X=>X.Barcode&&X.Barcode.trim()===q.trim());z&&(l(X=>{const ne=[...X.Products],se=ne.findIndex(K=>K.name===z.ProductName);if(se>-1){if(N==="increment"){const K={...ne[se]};K.quantity=(Number(K.quantity)||0)+1,K.total=K.quantity*(Number(K.finalPrice)||0),ne[se]=K}}else{const K={id:Date.now(),name:z.ProductName,quantity:1,originalPrice:z.Price,finalPrice:z.Price,total:z.Price,discountPercent:0,colorInfo:"",image:z.ImageURL,cost:z.Cost,tags:z.Tags};ne.push(K)}const L=parseFloat(String(X["Shipping Fee (Customer)"]))||0,V=j(ne,L);return{...X,Products:ne,...V}}),N==="single"&&w(!1))},F=q=>{const{name:z,value:X}=q.target;l(ne=>{let se=X;z==="Customer Phone"?(se=X.replace(/[^0-9]/g,""),se.length>0&&!se.startsWith("0")&&(se="0"+se)):(z==="Shipping Fee (Customer)"||z==="Internal Cost")&&(X===""||X.endsWith(".")?se=X:se=Math.max(0,parseFloat(X)||0));const L={...ne,[z]:se};if(z==="Shipping Fee (Customer)"){const V=parseFloat(String(se))||0,K=j(L.Products,V);return{...L,...K}}return z==="Payment Status"&&se==="Unpaid"&&(L["Payment Info"]="",S("")),L})},H=(q,z,X,ne)=>{l(se=>{const L=[...se.Products],V={...L[q]};if(z==="name"){V.name=X;const de=r.products.find(pe=>pe.ProductName===X);de?(V.originalPrice=de.Price,V.finalPrice=de.Price,V.cost=de.Cost,V.image=de.ImageURL,V.tags=ne!==void 0?ne:de.Tags):(V.originalPrice=0,V.finalPrice=0,V.cost=0,V.image="",V.tags="")}else z==="finalPrice"||z==="quantity"?X===""||String(X).endsWith(".")?V[z]=X:V[z]=Math.max(z==="quantity"?1:0,parseFloat(X)||0):V[z]=X;const K=parseFloat(String(V.quantity))||0,Q=parseFloat(String(V.finalPrice))||0;V.total=K*Q,L[q]=V;const ee=parseFloat(String(se["Shipping Fee (Customer)"]))||0,ce=j(L,ee);return{...se,Products:L,...ce}})},ie=async()=>{if(!window.confirm(` ID: ${a["Order ID"]} ?`)||!i)return;const q=i.UserName||"Unknown User";try{const z=await fetch(`${uo}/api/admin/delete-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:a["Order ID"],team:a.Team,userName:q,telegramMessageId1:a["Telegram Message ID 1"],telegramMessageId2:a["Telegram Message ID 2"],telegramChatId:a.TelegramValue})}),X=await z.json();if(!z.ok||X.status!=="success")throw new Error(X.message||"Delete failed");await s(),e()}catch(z){v(`: ${z.message}`)}},$=async q=>{var ne;if(q.preventDefault(),h(!0),v(""),!a.Products.every(se=>se.name&&parseFloat(String(se.quantity))>0)){v(" ( )"),h(!1);return}const z=(ne=r.shippingMethods)==null?void 0:ne.find(se=>se.MethodName===a["Internal Shipping Method"]);if(z!=null&&z.RequireDriverSelection&&!a["Internal Shipping Details"]){v(" (Driver) "),h(!1);return}const X=(i==null?void 0:i.UserName)||"Unknown User";try{const se=parseFloat(String(a["Shipping Fee (Customer)"]))||0,L=j(a.Products,se),V={...a,"Shipping Fee (Customer)":se,Subtotal:L.Subtotal,"Grand Total":L["Grand Total"],"Internal Cost":parseFloat(String(a["Internal Cost"]))||0,"Discount ($)":L["Discount ($)"],"Total Product Cost ($)":L["Total Product Cost ($)"],IsVerified:!!a.IsVerified},K=a.Products.map(ce=>({...ce,quantity:parseFloat(String(ce.quantity))||0,finalPrice:parseFloat(String(ce.finalPrice))||0,total:(parseFloat(String(ce.quantity))||0)*(parseFloat(String(ce.finalPrice))||0)}));V["Products (JSON)"]=JSON.stringify(K);const Q=await fetch(`${uo}/api/admin/update-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:a["Order ID"],team:a.Team,userName:X,newData:V})}),ee=await Q.json();if(!Q.ok||ee.status!=="success")throw new Error(ee.message||"Update failed");await s(),e()}catch(se){v(`: ${se.message}`)}finally{h(!1)}};return p.jsxs("div",{className:"w-full h-full lg:h-[calc(100vh-40px)] flex flex-col animate-fade-in lg:overflow-hidden",children:[A&&p.jsx(Iy,{onClose:()=>w(!1),onCodeScanned:k,scanMode:N,setScanMode:T,productsInOrder:a.Products,masterProducts:r.products}),p.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 px-1 lg:px-4 pt-2",children:[p.jsxs("div",{children:[p.jsxs("h1",{className:"text-2xl font-black text-white uppercase tracking-tighter italic flex items-center gap-3",children:[p.jsx("span",{className:"w-1.5 h-6 bg-blue-600 rounded-full"}),"Edit Order"]}),p.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[p.jsxs("span",{className:"text-[10px] font-mono font-bold text-gray-500 bg-gray-900 px-2 py-0.5 rounded border border-gray-800",children:["#",a["Order ID"]]}),p.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:a.Team}),p.jsxs("div",{className:"flex items-center gap-1 bg-gray-900 px-2 py-0.5 rounded border border-gray-800",children:[p.jsx("label",{htmlFor:"order-date",className:"text-[10px] font-black text-gray-600 uppercase cursor-pointer",children:"Date"}),p.jsx("input",{id:"order-date",type:"datetime-local",value:I(a.Timestamp),onChange:M,className:"bg-transparent border-none text-[10px] font-bold text-blue-400 p-0 focus:ring-0 h-4",style:{colorScheme:"dark"}})]})]})]}),p.jsx("button",{onClick:n,className:"px-6 py-2.5 bg-gray-800 border border-gray-700 hover:bg-gray-700 text-gray-400 font-black rounded-xl uppercase text-[10px] tracking-widest transition-all",children:""})]}),m&&p.jsxs("div",{className:"flex-shrink-0 mb-4 mx-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 flex items-center gap-3 animate-shake",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",strokeWidth:"2"})}),p.jsx("span",{className:"font-bold text-xs",children:m})]}),p.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-6 overflow-hidden px-1 lg:px-4 pb-4",children:[p.jsx("div",{className:"w-full lg:w-[380px] xl:w-[420px] flex-shrink-0 h-full overflow-hidden",children:p.jsx(vy,{formData:a,appData:r,onChange:F,onProvinceSelect:q=>{l(z=>({...z,Location:q})),R(""),D("")},onDistrictChange:q=>{R(q),D("")},onSangkatChange:D,onShippingMethodSelect:q=>l(z=>({...z,"Internal Shipping Method":q.MethodName,"Internal Shipping Details":q.RequireDriverSelection?"":q.MethodName})),onDriverSelect:q=>l(z=>({...z,"Internal Shipping Details":q})),onBankChange:q=>{var ne;const z=q.target.value;l(se=>({...se,"Payment Info":z}));const X=(ne=r.bankAccounts)==null?void 0:ne.find(se=>se.BankName===z);S(X?at(X.LogoURL):"")},selectedDistrict:_,selectedSangkat:P,bankLogo:y})}),p.jsxs("div",{className:"flex-1 flex flex-col gap-4 overflow-hidden h-full",children:[p.jsx(xy,{products:a.Products,masterProducts:r.products,onProductChange:H,onAddProduct:J,onRemoveProduct:E,onPreviewImage:o,onScanBarcode:()=>w(!0)}),p.jsx(by,{subtotal:Number(a.Subtotal)||0,grandTotal:Number(a["Grand Total"])||0,shippingFee:a["Shipping Fee (Customer)"],onShippingFeeChange:F,onSave:$,onDelete:ie,loading:c})]})]})]})},ky=t=>be.useMemo(()=>t.reduce((e,n)=>({grandTotal:e.grandTotal+(Number(n["Grand Total"])||0),internalCost:e.internalCost+(Number(n["Internal Cost"])||0),count:e.count+1,paidCount:e.paidCount+(n["Payment Status"]==="Paid"?1:0),unpaidCount:e.unpaidCount+(n["Payment Status"]==="Unpaid"?1:0)}),{grandTotal:0,internalCost:0,count:0,paidCount:0,unpaidCount:0}),[t]),Ey=({totals:t,isVisible:e,showSelection:n})=>t.count===0?null:p.jsxs("tr",{className:"bg-blue-900/30 border-b-2 border-blue-500/20 sticky top-0 z-20 backdrop-blur-md shadow-lg",children:[n&&p.jsx("td",{className:"px-4 py-4"}),e("index")&&p.jsx("td",{className:"px-4 py-4 text-center font-black text-blue-400 text-[clamp(12px,0.9vw,14px)]",children:t.count}),e("actions")&&p.jsx("td",{className:"px-4 py-4"}),e("customerName")&&p.jsx("td",{className:"px-6 py-4",children:p.jsx("span",{className:"font-black text-white uppercase tracking-widest text-[clamp(11px,0.8vw,13px)]",children:"Grand Total ()"})}),e("productInfo")&&p.jsx("td",{className:"px-6 py-4"}),e("location")&&p.jsx("td",{className:"px-6 py-4"}),e("pageInfo")&&p.jsx("td",{className:"px-6 py-4"}),e("fulfillment")&&p.jsx("td",{className:"px-6 py-4"}),e("total")&&p.jsx("td",{className:"px-6 py-4",children:p.jsxs("span",{className:"font-black text-emerald-400 tracking-tighter shadow-emerald-500/20 drop-shadow-sm text-[clamp(16px,1.2vw,20px)]",children:["$",t.grandTotal.toLocaleString(void 0,{minimumFractionDigits:2})]})}),e("shippingService")&&p.jsx("td",{className:"px-6 py-4"}),e("shippingCost")&&p.jsx("td",{className:"px-6 py-4",children:p.jsxs("span",{className:"font-black text-orange-400 font-mono text-[clamp(13px,0.9vw,15px)]",children:["$",t.internalCost.toLocaleString(void 0,{minimumFractionDigits:2})]})}),e("status")&&p.jsx("td",{className:"px-6 py-4",children:p.jsxs("div",{className:"flex flex-col gap-1.5 items-start",children:[t.paidCount>0&&p.jsxs("span",{className:"font-black text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20 uppercase tracking-wider whitespace-nowrap text-[clamp(10px,0.7vw,12px)]",children:["Paid: ",t.paidCount]}),t.unpaidCount>0&&p.jsxs("span",{className:"font-black text-red-400 bg-red-500/10 px-2 py-0.5 rounded border border-red-500/20 uppercase tracking-wider whitespace-nowrap text-[clamp(10px,0.7vw,12px)]",children:["Unpaid: ",t.unpaidCount]})]})}),e("date")&&p.jsx("td",{className:"px-4 py-4"}),e("print")&&p.jsx("td",{className:"px-4 py-4"}),e("check")&&p.jsx("td",{className:"px-2 py-4"}),e("orderId")&&p.jsx("td",{className:"px-2 py-4"})]}),nh=({totals:t})=>t.count===0?null:p.jsxs("div",{className:"bg-blue-900/20 backdrop-blur-xl border border-blue-500/30 rounded-[2.2rem] p-5 shadow-2xl relative overflow-hidden animate-fade-in",children:[p.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("h3",{className:"text-sm font-black text-blue-300 uppercase tracking-widest flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-4 bg-blue-500 rounded-full"}),"Grand Total"]}),p.jsxs("span",{className:"text-[10px] font-bold text-gray-400 bg-black/30 px-3 py-1 rounded-full",children:[t.count," Orders"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl border border-white/5",children:[p.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase mb-1",children:"Total Revenue"}),p.jsxs("p",{className:"text-xl font-black text-emerald-400 tracking-tighter",children:["$",t.grandTotal.toLocaleString()]})]}),p.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl border border-white/5",children:[p.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase mb-1",children:"Total Cost"}),p.jsxs("p",{className:"text-lg font-black text-orange-400 tracking-tighter",children:["$",t.internalCost.toLocaleString()]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("div",{className:"flex-1 bg-emerald-500/10 p-2 rounded-xl border border-emerald-500/20 flex justify-between items-center px-3",children:[p.jsx("span",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-widest",children:"PAID"}),p.jsx("span",{className:"text-sm font-black text-white",children:t.paidCount})]}),p.jsxs("div",{className:"flex-1 bg-red-500/10 p-2 rounded-xl border border-red-500/20 flex justify-between items-center px-3",children:[p.jsx("span",{className:"text-[9px] font-black text-red-500 uppercase tracking-widest",children:"UNPAID"}),p.jsx("span",{className:"text-sm font-black text-white",children:t.unpaidCount})]})]})]}),Py=({orders:t,totals:e,visibleColumns:n,selectedIds:r,onToggleSelect:i,onToggleSelectAll:o,onEdit:s,handlePrint:a,handleCopy:l,copiedId:c,toggleOrderVerified:h,updatingIds:m})=>{const{appData:v,previewImage:y}=be.useContext(po),S=be.useRef(null),[A,w]=be.useState(0),N=88,T=5,_=F=>!n||n.has(F),R=t.length>0&&t.every(F=>r.has(F["Order ID"])),{virtualItems:P,totalHeight:D,paddingTop:I}=be.useMemo(()=>{var X;const F=t.length*N,H=((X=S.current)==null?void 0:X.clientHeight)||800;let ie=Math.floor(A/N),$=Math.min(t.length-1,Math.floor((A+H)/N));ie=Math.max(0,ie-T),$=Math.min(t.length-1,$+T);const q=[];for(let ne=ie;ne<=$;ne++)q.push({index:ne,data:t[ne]});const z=ie*N;return{virtualItems:q,totalHeight:F,paddingTop:z}},[t,A]),M=F=>{w(F.currentTarget.scrollTop)},j=F=>{if(!F||!v.phoneCarriers)return null;const ie=F.replace(/\s/g,"").substring(0,3),$=v.phoneCarriers.find(q=>q.Prefixes.split(",").map(z=>z.trim()).includes(ie));return $?at($.CarrierLogoURL):null},J=F=>{if(!F||!v.shippingMethods)return null;const H=v.shippingMethods.find(ie=>ie.MethodName===F);return H?at(H.LogosURL):null},E=F=>{let H=(F||"").replace(/[^0-9]/g,"");return H.length>0&&(H="0"+H.replace(/^0+/,"")),H},k=F=>{if(!F)return new Date;const H=F.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(H)return new Date(parseInt(H[1]),parseInt(H[2])-1,parseInt(H[3]),parseInt(H[4]),parseInt(H[5]));try{const ie=new Date(F);return isNaN(ie.getTime())?new Date:ie}catch{return new Date}};return p.jsxs("div",{className:"page-card !p-0 shadow-2xl border-white/5 bg-gray-900/60 backdrop-blur-3xl rounded-[2.5rem] flex flex-col h-[calc(100vh-220px)]",children:[p.jsx("div",{className:"flex-shrink-0 z-20 bg-gray-900 rounded-t-[2.5rem] border-b border-white/10",children:p.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed"},children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-gray-800/80",children:[o&&p.jsx("th",{className:"px-4 py-6 w-12 text-center",children:p.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-600 bg-gray-900 text-blue-500 cursor-pointer focus:ring-blue-500/20",checked:R,onChange:()=>o(t.map(F=>F["Order ID"]))})}),_("index")&&p.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-12 text-[clamp(10px,0.8vw,12px)]",children:"#"}),_("actions")&&p.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-24 text-[clamp(10px,0.8vw,12px)]",children:"Command"}),_("customerName")&&p.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-56 text-[clamp(10px,0.8vw,12px)]",children:"Merchant/Client"}),_("productInfo")&&p.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-44 text-[clamp(10px,0.8vw,12px)]",children:"Assets"}),_("location")&&p.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-52 text-[clamp(10px,0.8vw,12px)]",children:"Geography"}),_("pageInfo")&&p.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-44 text-[clamp(10px,0.8vw,12px)]",children:"Source Page"}),_("fulfillment")&&p.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Fulfillment"}),_("total")&&p.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Valuation"}),_("shippingService")&&p.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-48 text-[clamp(10px,0.8vw,12px)]",children:"Logistics"}),_("shippingCost")&&p.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-28 text-[clamp(10px,0.8vw,12px)]",children:"Exp. Cost"}),_("status")&&p.jsx("th",{className:"px-6 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-32 text-[clamp(10px,0.8vw,12px)]",children:"Status"}),_("date")&&p.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-left text-gray-500 w-24 text-[clamp(10px,0.8vw,12px)]",children:"Time"}),_("print")&&p.jsx("th",{className:"px-4 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-16 text-[clamp(10px,0.8vw,12px)]",children:"P"}),_("check")&&p.jsx("th",{className:"px-2 py-6 font-normal uppercase tracking-[0.15em] text-center text-emerald-500/80 w-14 text-[9px]",children:"VERIFIED"}),_("orderId")&&p.jsx("th",{className:"px-2 py-6 font-black uppercase tracking-[0.2em] text-center text-gray-500 w-16 text-[clamp(10px,0.8vw,12px)]",children:"Node ID"})]})}),p.jsx("tbody",{className:"bg-[#0f172a]",children:p.jsx(Ey,{totals:e,isVisible:_,showSelection:!!i})})]})}),p.jsx("div",{ref:S,className:"flex-grow overflow-y-auto custom-scrollbar",onScroll:M,children:p.jsx("div",{style:{height:`${D}px`,position:"relative"},children:p.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed",transform:`translateY(${I}px)`},children:[p.jsx("thead",{className:"invisible h-0",children:p.jsxs("tr",{children:[o&&p.jsx("th",{className:"w-12"}),_("index")&&p.jsx("th",{className:"w-12"}),_("actions")&&p.jsx("th",{className:"w-24"}),_("customerName")&&p.jsx("th",{className:"w-56"}),_("productInfo")&&p.jsx("th",{className:"w-44"}),_("location")&&p.jsx("th",{className:"w-52"}),_("pageInfo")&&p.jsx("th",{className:"w-44"}),_("fulfillment")&&p.jsx("th",{className:"w-32"}),_("total")&&p.jsx("th",{className:"w-32"}),_("shippingService")&&p.jsx("th",{className:"w-48"}),_("shippingCost")&&p.jsx("th",{className:"w-28"}),_("status")&&p.jsx("th",{className:"w-32"}),_("date")&&p.jsx("th",{className:"w-24"}),_("print")&&p.jsx("th",{className:"w-16"}),_("check")&&p.jsx("th",{className:"w-14"}),_("orderId")&&p.jsx("th",{className:"w-16"})]})}),p.jsx("tbody",{className:"divide-y divide-white/5",children:P.map(({index:F,data:H})=>{var pe;const ie=(pe=v.pages)==null?void 0:pe.find(we=>we.PageName===H.Page),$=ie?at(ie.PageLogoURL):"",q=E(H["Customer Phone"]),z=j(q),X=c===H["Order ID"],ne=J(H["Internal Shipping Method"]),se=H["Order ID"],L=H.IsVerified===!0||String(H.IsVerified).toUpperCase()==="TRUE",V=m.has(se),K=r.has(se),Q=F>t.length-3&&t.length>4,ee=Q?"bottom-full mb-3":"top-full mt-3",ce=Q?"-bottom-2 border-r border-b":"-top-2 border-t border-l",de=k(H.Timestamp);return p.jsxs("tr",{className:`${L?"bg-emerald-500/[0.03]":K?"bg-blue-500/10":"hover:bg-white/[0.02]"} transition-all group relative`,style:{height:`${N}px`},children:[i&&p.jsx("td",{className:"px-4 py-5 text-center",children:p.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-md border-gray-700 bg-gray-950 text-blue-500 cursor-pointer transition-all",checked:K,onChange:()=>i(se)})}),_("index")&&p.jsx("td",{className:"px-4 py-5 text-center font-bold text-gray-600 text-[clamp(11px,0.8vw,13px)]",children:F+1}),_("actions")&&p.jsx("td",{className:"px-4 py-5 text-center",children:p.jsx("button",{onClick:()=>s&&s(H),className:"text-blue-400/80 hover:text-white bg-blue-400/5 hover:bg-blue-600 px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border border-blue-400/10 active:scale-95 shadow-md",children:"Edit"})}),_("customerName")&&p.jsxs("td",{className:"px-6 py-5",children:[p.jsx("div",{className:"font-black text-gray-100 truncate mb-1 leading-tight tracking-tight text-[clamp(14px,1.1vw,16px)]",children:H["Customer Name"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[z&&p.jsx("img",{src:z,className:"w-4 h-4 object-contain opacity-80",alt:"carrier"}),p.jsx("div",{className:"text-blue-400/80 font-mono font-black tracking-tighter text-[clamp(12px,0.9vw,14px)]",children:q})]})]}),_("productInfo")&&p.jsx("td",{className:"px-6 py-5 relative overflow-visible",children:p.jsxs("div",{className:"group/prod flex flex-col gap-1 cursor-help",children:[H.Products.slice(0,2).map((we,Ce)=>p.jsxs("div",{className:"bg-black/40 p-1.5 rounded-lg border border-white/5 flex flex-col",children:[p.jsx("span",{className:"font-bold text-gray-300 line-clamp-1 text-[clamp(11px,0.8vw,12px)]",children:we.name}),p.jsxs("span",{className:"text-blue-400/80 font-black mt-0.5 text-[clamp(10px,0.7vw,11px)]",children:["x",we.quantity]})]},Ce)),H.Products.length>2&&p.jsxs("p",{className:"text-[8px] text-gray-600 font-black ml-1 uppercase tracking-widest",children:["+ ",H.Products.length-2," items"]}),p.jsxs("div",{className:`invisible group-hover/prod:visible opacity-0 group-hover/prod:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${ee} w-80 p-5 bg-[#1a2235] border border-white/10 rounded-[2.5rem] shadow-[0_40px_100px_rgba(0,0,0,0.8)] transition-all duration-300 pointer-events-none backdrop-blur-3xl`,children:[p.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-[0.3em] mb-4 border-b border-white/5 pb-3",children:"Operational Asset Data"}),p.jsx("div",{className:"space-y-3 max-h-[350px] overflow-y-auto custom-scrollbar pr-1",children:H.Products.map((we,Ce)=>{var Ge;const ke=(Ge=v.products)==null?void 0:Ge.find(ye=>ye.ProductName===we.name),Le=we.image||(ke==null?void 0:ke.ImageURL)||"";return p.jsxs("div",{className:"flex items-center gap-4 text-left p-2.5 bg-black/30 rounded-2xl border border-white/5",children:[p.jsx("div",{className:"w-14 h-14 flex-shrink-0 bg-gray-900 rounded-xl border border-gray-800 overflow-hidden shadow-inner",children:p.jsx("img",{src:at(Le),className:"w-full h-full object-cover",alt:we.name,onError:ye=>ye.currentTarget.src="https://placehold.co/100x100/1f2937/4b5563?text=N/A"})}),p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsx("p",{className:"font-black text-white leading-tight mb-1 line-clamp-2 text-xs",children:we.name}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2.5 py-0.5 rounded-lg border border-blue-500/10",children:["x",we.quantity]}),we.colorInfo&&p.jsxs("span",{className:"text-[9px] text-purple-400 font-bold uppercase",children:["Node: ",we.colorInfo]})]})]})]},Ce)})}),p.jsx("div",{className:`absolute ${ce} left-1/2 -translate-x-1/2 w-5 h-5 bg-[#1a2235] border-white/10 rotate-45`})]})]})}),_("location")&&p.jsx("td",{className:"px-6 py-5 relative overflow-visible",children:p.jsxs("div",{className:"group/loc cursor-help",children:[p.jsx("div",{className:"font-black text-gray-200 leading-tight truncate text-[clamp(12px,0.9vw,14px)]",children:H.Location}),p.jsx("div",{className:"font-bold text-gray-600 mt-1 line-clamp-1 text-[clamp(10px,0.7vw,12px)]",children:H["Address Details"]}),p.jsxs("div",{className:`invisible group-hover/loc:visible opacity-0 group-hover/loc:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${ee} w-72 p-5 bg-[#1a2235] border border-white/10 rounded-[2.5rem] shadow-[0_40px_100px_rgba(0,0,0,0.8)] transition-all duration-300 pointer-events-none backdrop-blur-3xl`,children:[p.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-[0.3em] mb-3 border-b border-white/5 pb-2",children:"Geographic Assignment"}),p.jsxs("div",{className:"space-y-4 text-left",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-[8px] font-black text-gray-600 uppercase tracking-widest",children:"Region Node"}),p.jsx("p",{className:"text-sm font-black text-white mt-0.5",children:H.Location})]}),p.jsxs("div",{className:"bg-black/30 p-3.5 rounded-2xl border border-white/5",children:[p.jsx("span",{className:"text-[8px] font-black text-gray-600 uppercase block mb-1.5 tracking-widest",children:"Local Matrix"}),p.jsx("p",{className:"text-[11px] text-gray-300 leading-relaxed font-bold",children:H["Address Details"]||"No precise location data"})]})]}),p.jsx("div",{className:`absolute ${ce} left-1/2 -translate-x-1/2 w-5 h-5 bg-[#1a2235] border-white/10 rotate-45`})]})]})}),_("pageInfo")&&p.jsx("td",{className:"px-6 py-5",children:p.jsxs("div",{className:"flex items-center gap-3",children:[$?p.jsx("img",{src:$,className:"w-8 h-8 rounded-full border border-white/10 shadow-sm object-cover",alt:"logo"}):p.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border border-white/5 flex items-center justify-center text-[7px] text-gray-600 font-bold uppercase",children:"Null"}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("span",{className:"font-black text-gray-300 block truncate leading-none mb-1 text-[clamp(12px,0.9vw,13px)]",children:H.Page}),p.jsx("span",{className:"text-[9px] text-gray-600 uppercase font-black tracking-widest",children:H.Team})]})]})}),_("fulfillment")&&p.jsx("td",{className:"px-6 py-5",children:p.jsx("span",{className:"font-bold text-gray-300 bg-gray-800 px-2 py-1 rounded border border-white/5 text-[clamp(11px,0.8vw,12px)]",children:H["Fulfillment Store"]})}),_("total")&&p.jsxs("td",{className:"px-6 py-5 font-black text-blue-400 tracking-tighter text-[clamp(16px,1.2vw,18px)]",children:["$",H["Grand Total"].toFixed(2)]}),_("shippingService")&&p.jsx("td",{className:"px-6 py-5",children:p.jsxs("div",{className:"flex items-center gap-2.5",children:[ne&&p.jsx("img",{src:ne,className:"w-5 h-5 rounded-lg object-contain bg-gray-950 p-0.5 border border-white/5",alt:"shipping"}),p.jsx("span",{className:"text-orange-400/80 font-black uppercase truncate tracking-tight text-[clamp(10px,0.8vw,12px)]",children:H["Internal Shipping Method"]||"-"})]})}),_("shippingCost")&&p.jsxs("td",{className:"px-6 py-5 text-gray-400 font-mono font-black tracking-tighter text-[clamp(13px,0.9vw,15px)]",children:["$",(Number(H["Internal Cost"])||0).toFixed(2)]}),_("status")&&p.jsx("td",{className:"px-6 py-5",children:p.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border ${H["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:H["Payment Status"]})}),_("date")&&p.jsx("td",{className:"px-4 py-5",children:p.jsxs("div",{className:"flex flex-col items-start",children:[p.jsx("span",{className:"font-bold text-gray-400 text-[clamp(11px,0.8vw,12px)]",children:de.toLocaleDateString("km-KH")}),p.jsx("span",{className:"font-mono text-blue-500/80 font-black text-[clamp(10px,0.7vw,11px)]",children:de.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]})}),_("print")&&p.jsx("td",{className:"px-4 py-5 text-center",children:p.jsx("button",{onClick:()=>a(H),className:"text-emerald-400/60 hover:text-white bg-emerald-400/5 hover:bg-emerald-600 p-2.5 rounded-xl transition-all border border-emerald-400/10 active:scale-90",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:p.jsx("path",{d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})}),_("check")&&p.jsx("td",{className:"px-2 py-5 text-center",children:p.jsxs("div",{className:"relative flex items-center justify-center",children:[p.jsx("input",{type:"checkbox",checked:L,onChange:()=>h(se,L),className:`h-6 w-6 rounded-lg border-gray-700 bg-gray-950 text-emerald-500 focus:ring-emerald-500/10 transition-all ${V?"opacity-20":"hover:scale-110 active:scale-150 cursor-pointer"}`}),V&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:p.jsx(Pr,{size:"sm"})})]})}),_("orderId")&&p.jsx("td",{className:"px-2 py-5 text-center",children:p.jsx("button",{onClick:()=>l(H["Order ID"]),className:`p-2 rounded-xl transition-all border ${X?"bg-green-500/20 border-green-500/40 text-green-400":"bg-gray-800 border-white/5 text-gray-500 hover:text-blue-400 active:scale-90"}`,children:p.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:X?"":"ID"})})})]},se)})})]})})})]})},Ly=({orders:t,totals:e,visibleColumns:n,selectedIds:r,onToggleSelect:i,onEdit:o,handlePrint:s,handleCopy:a,copiedId:l,toggleOrderVerified:c,updatingIds:h})=>{const{appData:m,previewImage:v}=be.useContext(po),[y,S]=be.useState(()=>{const F=localStorage.getItem("mobile_view_preference");return F==="card"||F==="table"?F:"table"}),A=F=>{S(F),localStorage.setItem("mobile_view_preference",F)},[w,N]=be.useState(20),T=be.useMemo(()=>t.slice(0,w),[t,w]),_=()=>{N(F=>F+20)},R=!n||n.has("productInfo"),P=!n||n.has("actions"),D=!n||n.has("print"),I=!n||n.has("check"),M=!n||n.has("fulfillment"),j=F=>{if(!F||!m.phoneCarriers)return null;const ie=F.replace(/\s/g,"").substring(0,3),$=m.phoneCarriers.find(q=>q.Prefixes.split(",").map(z=>z.trim()).includes(ie));return $?at($.CarrierLogoURL):null},J=F=>{if(!F||!m.shippingMethods)return null;const H=m.shippingMethods.find(ie=>ie.MethodName===F);return H?at(H.LogosURL):null},E=F=>{let H=(F||"").replace(/[^0-9]/g,"");return H.length>0&&(H="0"+H.replace(/^0+/,"")),H},k=F=>{if(!F)return"";const H=F.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(H)return new Date(parseInt(H[1]),parseInt(H[2])-1,parseInt(H[3]),parseInt(H[4]),parseInt(H[5])).toLocaleDateString("km-KH");try{const ie=new Date(F);return isNaN(ie.getTime())?F:ie.toLocaleDateString("km-KH")}catch{return F}};return p.jsxs("div",{className:"space-y-5 pb-40",children:[p.jsx(nh,{totals:e}),p.jsxs("div",{className:"flex justify-between items-center px-2",children:[p.jsxs("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:[t.length," Entries"]}),p.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-xl border border-white/10",children:[p.jsx("button",{onClick:()=>A("card"),className:`p-2 rounded-lg transition-all ${y==="card"?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Card View",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4z"})})}),p.jsx("button",{onClick:()=>A("table"),className:`p-2 rounded-lg transition-all ${y==="table"?"bg-blue-600 text-white shadow-md":"text-gray-400 hover:text-gray-200"}`,title:"Table View",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),y==="table"?p.jsx("div",{className:"bg-[#0f172a] border border-white/10 rounded-3xl overflow-hidden shadow-2xl animate-fade-in relative",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-left border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-[#0f172a] border-b border-white/10 text-[10px] text-gray-400 font-black uppercase tracking-wider",children:[p.jsx("th",{className:"p-3 sticky left-0 z-20 bg-[#0f172a] border-r border-white/10 min-w-[130px] shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)]",children:"Customer"}),M&&p.jsx("th",{className:"p-3 min-w-[100px] text-gray-400",children:"Store"}),p.jsx("th",{className:"p-3 text-right min-w-[80px]",children:"Total"}),p.jsx("th",{className:"p-3 text-center min-w-[90px]",children:"Status"}),p.jsx("th",{className:"p-3 text-center min-w-[50px]",children:"Act"}),p.jsx("th",{className:"p-3 min-w-[100px]",children:"Date"})]})}),p.jsx("tbody",{className:"divide-y divide-white/5 text-xs",children:T.map(F=>{const H=r.has(F["Order ID"]),ie=F.IsVerified===!0||String(F.IsVerified).toUpperCase()==="TRUE";return p.jsxs("tr",{className:`${H?"bg-blue-900/20":ie?"bg-emerald-900/5":"hover:bg-white/5"} transition-colors`,children:[p.jsx("td",{className:"p-3 sticky left-0 z-20 bg-gray-900 border-r border-white/10 shadow-[4px_0_10px_-2px_rgba(0,0,0,0.5)]",children:p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"font-bold text-white truncate max-w-[110px]",children:F["Customer Name"]}),p.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:F["Customer Phone"]})]})}),M&&p.jsx("td",{className:"p-3 text-gray-300 font-bold text-[10px]",children:F["Fulfillment Store"]}),p.jsxs("td",{className:"p-3 text-right font-black text-blue-400",children:["$",F["Grand Total"].toFixed(2)]}),p.jsx("td",{className:"p-3 text-center",children:p.jsx("span",{className:`px-2 py-0.5 rounded text-[8px] font-black uppercase border ${F["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:F["Payment Status"]})}),p.jsx("td",{className:"p-3 text-center",children:o&&p.jsx("button",{onClick:()=>o(F),className:"text-gray-400 hover:text-white",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})}),p.jsx("td",{className:"p-3 text-[9px] text-gray-500 font-bold",children:k(F.Timestamp)})]},F["Order ID"])})})]})})}):T.map(F=>{var V,K;const H=(V=m.pages)==null?void 0:V.find(Q=>Q.PageName===F.Page),ie=H?at(H.PageLogoURL):"",$=E(F["Customer Phone"]),q=j($),z=F.IsVerified===!0||String(F.IsVerified).toUpperCase()==="TRUE",X=h.has(F["Order ID"]),ne=r.has(F["Order ID"]),se=J(F["Internal Shipping Method"]),L=l===F["Order ID"];return p.jsxs("div",{className:`
                                relative rounded-[2.5rem] p-5 shadow-2xl transition-all duration-300 overflow-hidden group
                                ${ne?"bg-blue-900/20 border-2 border-blue-500/50 shadow-blue-900/30":z?"bg-emerald-900/10 border border-emerald-500/20 shadow-emerald-900/10":"bg-[#1e293b]/70 border border-white/5 shadow-black/40 backdrop-blur-xl"}
                            `,children:[ne&&p.jsx("div",{className:"absolute inset-0 bg-blue-500/5 pointer-events-none"}),p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[i&&p.jsx("div",{className:"relative z-10",children:p.jsx("input",{type:"checkbox",className:"h-6 w-6 rounded-xl border-gray-600 bg-gray-800 text-blue-500 focus:ring-blue-500/20 cursor-pointer transition-all",checked:ne,onChange:()=>i(F["Order ID"])})}),p.jsx("div",{children:p.jsxs("button",{onClick:()=>a(F["Order ID"]),className:`
                                                flex items-center gap-2 px-3 py-1 rounded-xl border transition-all active:scale-95
                                                ${L?"bg-emerald-500/20 border-emerald-500/50 text-emerald-400":"bg-black/30 border-white/5 text-gray-400 hover:text-white"}
                                            `,children:[p.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest font-mono",children:["#",F["Order ID"].substring(0,8)]}),L&&p.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})]})})]}),p.jsxs("div",{className:"flex flex-col items-end",children:[p.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[8px] font-black uppercase tracking-wider border ${F["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:F["Payment Status"]}),p.jsx("span",{className:"text-[9px] text-gray-600 font-bold mt-1",children:k(F.Timestamp)})]})]}),p.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[p.jsxs("div",{className:"relative w-14 h-14 rounded-2xl bg-black/40 border border-white/10 p-1 flex-shrink-0",children:[ie?p.jsx("img",{src:ie,className:"w-full h-full object-cover rounded-xl",alt:"page logo"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 text-[10px] font-black",children:"N/A"}),p.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-900 rounded-lg p-0.5 border border-gray-700",children:q&&p.jsx("img",{src:q,className:"w-4 h-4 object-contain",alt:"carrier"})})]}),p.jsxs("div",{className:"flex-grow min-w-0",children:[p.jsx("h3",{className:"text-white font-black text-sm truncate leading-tight mb-1",children:F["Customer Name"]}),p.jsx("p",{className:"text-blue-400 font-mono font-bold text-xs tracking-wide mb-1",children:$}),p.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-gray-500 font-bold truncate",children:[p.jsxs("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),p.jsx("span",{className:"truncate",children:F.Location||"N/A"})]})]})]}),R&&F.Products&&F.Products.length>0&&p.jsx("div",{className:"bg-black/20 rounded-2xl p-3 border border-white/5 mb-5 shadow-inner",children:p.jsx("div",{className:"flex overflow-x-auto gap-3 pb-2 snap-x no-scrollbar",children:F.Products.map((Q,ee)=>{var pe;const ce=(pe=m.products)==null?void 0:pe.find(we=>we.ProductName===Q.name),de=Q.image||(ce==null?void 0:ce.ImageURL)||"";return p.jsxs("div",{className:"flex-shrink-0 w-[200px] snap-center bg-gray-800/50 rounded-xl p-2 border border-white/5 flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg bg-black/50 flex-shrink-0 overflow-hidden border border-white/5",onClick:()=>v(at(de)),children:p.jsx("img",{src:at(de),className:"w-full h-full object-cover",alt:""})}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("p",{className:"text-[11px] font-bold text-gray-200 truncate",children:Q.name}),p.jsxs("div",{className:"flex justify-between items-center mt-0.5",children:[p.jsxs("span",{className:"text-[9px] text-gray-500 font-bold",children:["Qty: ",p.jsx("span",{className:"text-white",children:Q.quantity})]}),Q.colorInfo&&p.jsx("span",{className:"text-[8px] bg-purple-500/10 text-purple-400 px-1.5 rounded uppercase font-bold",children:Q.colorInfo})]})]})]},ee)})})}),p.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[p.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:[p.jsx("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Total Amount"}),p.jsxs("p",{className:"text-lg font-black text-white tracking-tight",children:["$",F["Grand Total"].toFixed(2)]})]}),p.jsx("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Shipping"}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[se&&p.jsx("img",{src:se,className:"w-3.5 h-3.5 object-contain",alt:""}),p.jsx("span",{className:"text-xs font-bold text-orange-400",children:(K=F["Internal Shipping Method"])==null?void 0:K.substring(0,10)})]})]}),F["Internal Cost"]>0&&p.jsxs("span",{className:"text-[9px] font-mono text-gray-600 font-bold bg-black/20 px-1.5 py-0.5 rounded",children:["-$",F["Internal Cost"]]})]})})]}),p.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-white/5",children:[P&&p.jsx("button",{onClick:()=>o&&o(F),className:"flex-1 py-3 bg-blue-600/10 text-blue-400 rounded-xl border border-blue-500/20 font-black text-[10px] uppercase tracking-widest hover:bg-blue-600 hover:text-white transition-all active:scale-95",children:"Edit"}),D&&p.jsx("button",{onClick:()=>s(F),className:"w-12 h-12 flex items-center justify-center bg-gray-800 text-gray-400 rounded-xl border border-white/10 hover:text-white active:scale-90 transition-all",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})}),I&&p.jsxs("div",{className:"ml-auto relative",children:[p.jsx("input",{type:"checkbox",checked:z,onChange:()=>c(F["Order ID"],z),className:`w-12 h-12 rounded-xl appearance-none border transition-all cursor-pointer ${z?"bg-emerald-500 border-emerald-400":"bg-gray-800 border-gray-600"}`}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:X?p.jsx(Pr,{size:"sm"}):z?p.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):p.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase",children:"Check"})})]})]})]},F["Order ID"])}),w<t.length&&p.jsx("div",{className:"flex justify-center pt-4",children:p.jsxs("button",{onClick:_,className:"px-8 py-3 bg-gray-800 text-white rounded-full text-xs font-black uppercase tracking-widest border border-white/10 shadow-lg active:scale-95 transition-all",children:["Load More (",t.length-w," remaining)"]})}),p.jsx("style",{children:`
                .no-scrollbar::-webkit-scrollbar { display: none; }
                .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `})]})},Ry=({orders:t,totals:e,visibleColumns:n,selectedIds:r,onToggleSelect:i,onEdit:o,handlePrint:s,handleCopy:a,copiedId:l,toggleOrderVerified:c,updatingIds:h})=>{const{appData:m,previewImage:v}=be.useContext(po),y=w=>{if(!w||!m.phoneCarriers)return null;const T=w.replace(/\s/g,"").substring(0,3),_=m.phoneCarriers.find(R=>R.Prefixes.split(",").map(P=>P.trim()).includes(T));return _?at(_.CarrierLogoURL):null},S=w=>{if(!w||!m.shippingMethods)return null;const N=m.shippingMethods.find(T=>T.MethodName===w);return N?at(N.LogosURL):null},A=w=>{let N=(w||"").replace(/[^0-9]/g,"");return N.length>0&&(N="0"+N.replace(/^0+/,"")),N};return p.jsxs("div",{className:"space-y-6 pb-20",children:[p.jsx("div",{className:"w-full",children:p.jsx(nh,{totals:e})}),p.jsx("div",{className:"grid grid-cols-2 gap-5",children:t.map(w=>{var J,E;const N=(J=m.pages)==null?void 0:J.find(k=>k.PageName===w.Page),T=N?at(N.PageLogoURL):"",_=A(w["Customer Phone"]),R=y(_),P=w.IsVerified===!0||String(w.IsVerified).toUpperCase()==="TRUE",D=h.has(w["Order ID"]),I=r.has(w["Order ID"]),M=S(w["Internal Shipping Method"]),j=l===w["Order ID"];return p.jsxs("div",{className:`
                                relative rounded-[2rem] p-5 shadow-xl transition-all duration-300 overflow-hidden group flex flex-col justify-between
                                ${I?"bg-blue-900/20 border-2 border-blue-500/50 shadow-blue-900/20":P?"bg-emerald-900/10 border border-emerald-500/20 shadow-emerald-900/10":"bg-[#1e293b]/60 border border-white/5 shadow-black/30 backdrop-blur-md hover:bg-[#1e293b]/80"}
                            `,children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[i&&p.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-lg border-gray-600 bg-gray-800 text-blue-500 cursor-pointer focus:ring-0",checked:I,onChange:()=>i(w["Order ID"])}),p.jsxs("button",{onClick:()=>a(w["Order ID"]),className:`flex items-center gap-2 px-3 py-1.5 rounded-xl border transition-all active:scale-95 ${j?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":"bg-black/30 text-gray-400 border-white/5 hover:text-white"}`,children:[p.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest font-mono",children:["#",w["Order ID"].substring(0,8)]}),j&&p.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})]})]}),p.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-wider border ${w["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:w["Payment Status"]})]}),p.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[p.jsx("div",{className:"relative w-12 h-12 rounded-xl bg-black/40 border border-white/10 p-0.5 flex-shrink-0",children:T?p.jsx("img",{src:T,className:"w-full h-full object-cover rounded-[10px]",alt:"logo"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-[9px]",children:"N/A"})}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("h3",{className:"text-white font-black text-sm truncate",children:w["Customer Name"]}),p.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[R&&p.jsx("img",{src:R,className:"h-3 w-auto object-contain opacity-70",alt:"carrier"}),p.jsx("p",{className:"text-blue-400 font-mono font-bold text-xs",children:_})]}),p.jsxs("div",{className:"text-[10px] text-gray-500 font-bold truncate mt-1 flex items-center gap-1",children:[p.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),w.Location||"N/A"]})]})]}),p.jsx("div",{className:"bg-black/20 rounded-xl p-2.5 border border-white/5 mb-4 overflow-hidden",children:p.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:w.Products&&w.Products.length>0?w.Products.map((k,F)=>{var $;const H=($=m.products)==null?void 0:$.find(q=>q.ProductName===k.name),ie=k.image||(H==null?void 0:H.ImageURL)||"";return p.jsxs("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-gray-800 border border-white/5 overflow-hidden relative cursor-pointer",onClick:()=>v(at(ie)),children:[p.jsx("img",{src:at(ie),className:"w-full h-full object-cover",alt:""}),p.jsxs("div",{className:"absolute bottom-0 right-0 bg-blue-600 text-white text-[8px] font-black px-1 rounded-tl-md",children:["x",k.quantity]})]},F)}):p.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"No products"})})}),p.jsxs("div",{className:"mt-auto",children:[p.jsxs("div",{className:"flex justify-between items-end mb-4 pt-3 border-t border-white/5",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-wider",children:"Total"}),p.jsxs("p",{className:"text-xl font-black text-white tracking-tight",children:["$",w["Grand Total"].toFixed(2)]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-wider",children:"Shipping"}),p.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[M&&p.jsx("img",{src:M,className:"w-3.5 h-3.5 object-contain",alt:""}),p.jsx("span",{className:"text-xs font-bold text-orange-400",children:(E=w["Internal Shipping Method"])==null?void 0:E.substring(0,10)})]})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[o&&p.jsx("button",{onClick:()=>o(w),className:"flex-1 py-2.5 bg-blue-600/10 text-blue-400 hover:bg-blue-600 hover:text-white rounded-xl border border-blue-500/20 font-black text-[10px] uppercase tracking-widest transition-all",children:"Edit"}),p.jsx("button",{onClick:()=>s(w),className:"w-10 h-10 flex items-center justify-center bg-gray-800 text-gray-400 hover:text-white rounded-xl border border-white/10 transition-all",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"checkbox",checked:P,onChange:()=>c(w["Order ID"],P),className:`w-10 h-10 rounded-xl appearance-none border transition-all cursor-pointer ${P?"bg-emerald-500 border-emerald-400":"bg-gray-800 border-gray-600"}`}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:D?p.jsx(Pr,{size:"sm"}):P?p.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):p.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase",children:"OK"})})]})]})]})]},w["Order ID"])})})]})},Hy=({orders:t,onEdit:e,showActions:n,visibleColumns:r,selectedIds:i=new Set,onToggleSelect:o,onToggleSelectAll:s})=>{const{refreshData:a}=be.useContext(po),[l,c]=be.useState(null),[h,m]=be.useState(new Set),[v,y]=be.useState(t);be.useEffect(()=>{y(t)},[t]);const S=ky(t),A=async(R,P)=>{const D=!P;y(I=>I.map(M=>M["Order ID"]===R?{...M,IsVerified:D}:M)),m(I=>new Set(I).add(R));try{if(!(await fetch(`${uo}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"AllOrders",primaryKey:{"Order ID":R},newData:{IsVerified:D}})})).ok)throw new Error("Failed to save");a()}catch(I){console.error("Verification toggle failed:",I),y(M=>M.map(j=>j["Order ID"]===R?{...j,IsVerified:P}:j)),alert("!")}finally{m(I=>{const M=new Set(I);return M.delete(R),M})}},w=R=>{let P=(R||"").replace(/[^0-9]/g,"");return P.length>0&&(P="0"+P.replace(/^0+/,"")),P},_={orders:v,totals:S,visibleColumns:r,selectedIds:i,onToggleSelect:o,onEdit:e,handlePrint:R=>{if(!R)return;const P=w(R["Customer Phone"]),D=new URLSearchParams({id:R["Order ID"],name:R["Customer Name"]||"",phone:P,location:R.Location||"",address:R["Address Details"]||"",total:(R["Grand Total"]||0).toString(),payment:R["Payment Status"]||"Unpaid",shipping:R["Internal Shipping Method"]||"N/A",page:R.Page||"",user:R.User||""}),M=(R.Note||"").match(/https?:\/\/(www\.)?(google\.com\/maps|maps\.app\.goo\.gl)\/[^\s]+/);M&&D.set("map",M[0]),window.open(`${Vh}?${D.toString()}`,"_blank")},handleCopy:R=>{navigator.clipboard.writeText(R),c(R),setTimeout(()=>c(null),2e3)},copiedId:l,toggleOrderVerified:A,updatingIds:h};return p.jsxs("div",{className:"w-full flex flex-col",children:[p.jsxs("div",{className:"flex-grow space-y-4",children:[p.jsx("div",{className:"hidden xl:block",children:p.jsx(Py,{..._,onToggleSelectAll:s})}),p.jsx("div",{className:"hidden md:block xl:hidden",children:p.jsx(Ry,{..._})}),p.jsx("div",{className:"md:hidden",children:p.jsx(Ly,{..._})})]}),p.jsx("div",{className:"h-64 md:h-[400px] w-full pointer-events-none opacity-0 shrink-0","aria-hidden":"true"})]})};export{Iy as B,gy as D,We as E,ov as G,Hy as O,Xs as S,bt as _,Fy as a,rv as b,Uy as c,jy as d,By as e,qy as f,fy as g,py as h,Oy as i,yy as j,hy as k};
