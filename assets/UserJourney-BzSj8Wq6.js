import{j as e,c as ae,r as a,M as Ne,S as ge,A as we,W as ye,C as Se,u as Te}from"./index-B0BjhuxE.js";import{B as Le,h as $e,D as Ie,g as Fe,j as Ee,k as Oe,l as _e,S as je,d as Re,e as Be,f as Ae,c as ze,E as Ve,i as We,O as Ce,a as Ue}from"./OrdersList-CDMwZLbW.js";import"./imageCompressor-D5vYYzIg.js";const Ye=({pages:b,selectedPageName:M,onSelect:P})=>e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"flex overflow-x-auto gap-3.5 pb-6 pt-2 px-1 snap-x no-scrollbar",children:[b.map(n=>{const r=M===n.PageName;return e.jsxs("button",{type:"button",onClick:()=>P(n),className:`
                                relative flex-shrink-0 w-[115px] h-[135px] snap-center rounded-[2rem] 
                                border-2 transition-all duration-700 outline-none group
                                ${r?"bg-blue-600/20 border-blue-500 shadow-[0_15px_30px_rgba(59,130,246,0.3)] scale-105":"bg-gray-800/30 backdrop-blur-xl border-white/5 hover:border-blue-500/30"}
                            `,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-3 gap-2",children:[e.jsxs("div",{className:"relative",children:[r&&e.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full blur-lg opacity-50 animate-pulse"}),e.jsx("div",{className:`
                                        relative w-12 h-12 rounded-full overflow-hidden border-2 transition-all duration-700
                                        ${r?"border-white scale-110 shadow-2xl rotate-[360deg]":"border-gray-700 opacity-50 group-hover:opacity-100"}
                                    `,children:e.jsx("img",{src:ae(n.PageLogoURL),className:"w-full h-full object-cover",alt:n.PageName})}),r&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center border-2 border-gray-900 shadow-lg animate-bounce-slow",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:4,children:e.jsx("path",{d:"M5 13l4 4L19 7"})})})]}),e.jsxs("div",{className:"text-center w-full px-1",children:[e.jsx("span",{className:`
                                        text-[10px] font-black uppercase tracking-tighter leading-tight block truncate transition-colors duration-500
                                        ${r?"text-white":"text-gray-500 group-hover:text-gray-300"}
                                    `,children:n.PageName}),n.TelegramValue&&r&&e.jsxs("span",{className:"text-[7px] font-bold text-blue-400/80 block mt-0.5 animate-fade-in truncate",children:["@",n.TelegramValue]})]})]}),e.jsx("div",{className:`
                                absolute bottom-3 left-1/2 -translate-x-1/2 h-1 rounded-full transition-all duration-700
                                ${r?"w-6 bg-blue-400 shadow-[0_0_8px_#60a5fa]":"w-0 bg-transparent"}
                            `})]},n.PageName)}),b.length===0&&e.jsxs("div",{className:"w-full py-10 flex flex-col items-center justify-center bg-gray-900/20 rounded-[2.5rem] border-2 border-dashed border-gray-800",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{className:"text-[9px] font-black text-gray-600 uppercase tracking-widest italic",children:"ášá€á˜á·á“áƒá¾á‰ Page"})]})]}),e.jsx("style",{children:`
                .no-scrollbar::-webkit-scrollbar {
                    display: none;
                }
                .no-scrollbar {
                    -ms-overflow-style: none;
                    scrollbar-width: none;
                }
                @keyframes bounce-slow {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-3px); }
                }
                .animate-bounce-slow {
                    animation: bounce-slow 2s infinite ease-in-out;
                }
            `})]}),qe=({pages:b,selectedPageName:M,onSelect:P,placeholder:n="á‡áŸ’ášá¾áŸášá¾áŸ Page..."})=>{const[r,_]=a.useState(!1),[L,T]=a.useState(""),R=a.useRef(null);a.useEffect(()=>{const $=b.find(Y=>Y.PageName===M);$&&T($.PageName)},[M,b]),a.useEffect(()=>{const $=Y=>{if(R.current&&!R.current.contains(Y.target)){_(!1);const Z=b.find(t=>t.PageName===M);T(Z?Z.PageName:"")}};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[M,b]);const y=a.useMemo(()=>{if(!L.trim())return b;const $=L.toLowerCase();return b.filter(Y=>Y.PageName.toLowerCase().includes($))},[b,L]),z=b.find($=>$.PageName===M);return e.jsxs("div",{className:"relative w-full",ref:R,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",className:"form-input !pl-14 !pr-10 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:n,value:L,onChange:$=>{T($.target.value),_(!0)},onFocus:()=>_(!0)}),e.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 overflow-hidden border border-white/5 flex items-center justify-center",children:z?e.jsx("img",{src:ae(z.PageLogoURL),className:"w-full h-full object-cover",alt:""}):e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 1.91-1.61 3.46-1.61s3.03.72 3.46 1.61C12.79 19.11 11.41 19.5 10 19.5s-2.79-.39-3.93-1.22zM15.6 17.03c-.78-1.13-2.56-1.86-4.6-1.86s-3.82.73-4.6 1.86c-.52-.51-.95-1.09-1.27-1.74.88-1.19 2.72-2.12 4.87-2.12s3.99.93 4.87 2.12c-.32.65-.75 1.23-1.27 1.74zM10 12.3c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})})})}),e.jsx("div",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-gray-600 group-focus-within:text-blue-500 transition-colors",children:e.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 9l-7 7-7-7",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),r&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_60px_rgba(0,0,0,0.6)] overflow-hidden animate-fade-in-down",children:e.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar p-2.5 space-y-1.5",children:y.length>0?y.map($=>e.jsxs("button",{type:"button",onClick:()=>{P($),T($.PageName),_(!1)},className:`w-full flex items-center gap-3.5 p-3 rounded-2xl transition-all ${M===$.PageName?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-300 hover:bg-white/5"}`,children:[e.jsx("img",{src:ae($.PageLogoURL),className:"w-11 h-11 rounded-full object-cover border-2 border-white/10 shadow-sm flex-shrink-0",alt:""}),e.jsxs("div",{className:"text-left min-w-0",children:[e.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:$.PageName}),e.jsx("p",{className:`text-[10px] uppercase tracking-widest font-black mt-1 ${M===$.PageName?"text-blue-100":"text-gray-500"}`,children:$.Team})]})]},$.PageName)):e.jsx("div",{className:"p-6 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"ášá€á˜á·á“áƒá¾á‰ Page á‘áŸ"})})})]})},He=({isOpen:b,onClose:M,url:P})=>{const[n,r]=a.useState(!0);return a.useEffect(()=>{b&&r(!0)},[b,P]),b?e.jsxs(Ne,{isOpen:b,onClose:M,maxWidth:"max-w-4xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-2 text-white",children:"áŸáŸ’áœáŸ‚á„ášá€á‘á¸áá¶áŸ†á„"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:'á”á“áŸ’á‘á¶á”áŸ‹á–á¸ášá€áƒá¾á‰á‘á¸áá¶áŸ†á„ááŸ’ášá¹á˜ááŸ’ášá¼áœ áŸá¼á˜á…á˜áŸ’á›á„ (Copy) á¢á¶áŸá™áŠáŸ’á‹á¶á“ á¬ Link ášá½á…á”á·á‘á•áŸ’á‘á¶áŸ†á„á“áŸáŸ‡ á á¾á™á”á·á‘á—áŸ’á‡á¶á”áŸ‹ (Paste) á…á¼á›á‘áŸ…á€áŸ’á“á»á„á”áŸ’ášá¢á”áŸ‹ "á‘á¸áá¶áŸ†á„á›á˜áŸ’á¢á·á" áœá·á‰áŸ”'}),e.jsxs("div",{className:"relative w-full h-[70vh] bg-gray-900 rounded-lg overflow-hidden border border-gray-700",children:[n&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[e.jsx(ge,{size:"lg"}),e.jsx("span",{className:"ml-3 text-gray-300",children:"á€áŸ†á–á»á„áŠáŸ†áá¾ášá€á¶ášá•áŸ‚á“á‘á¸..."})]}),e.jsx("iframe",{src:P,width:"100%",height:"100%",style:{border:0},allowFullScreen:!1,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",onLoad:()=>r(!1),className:n?"opacity-0":"opacity-100 transition-opacity duration-500"})]})]}):null},Je=({schedule:b,time:M,onChange:P})=>{const n=()=>{P({schedule:!b,time:b?"":M})};return e.jsxs("div",{className:`relative overflow-hidden p-6 rounded-[2rem] border transition-all duration-500 ${b?"bg-cyan-500/10 border-cyan-500 shadow-[0_0_25px_rgba(6,182,212,0.15)]":"bg-gray-900/40 border-gray-700"}`,children:[e.jsx("style",{children:`
                /* á”áŸ’áŠá¼ášá–ááŸŒ á“á·á„á–á„áŸ’ášá¸á€á‘áŸ†á áŸ† Default Calendar Icon ášá”áŸáŸ‹ Browser */
                .cyan-calendar-picker::-webkit-calendar-picker-indicator {
                    cursor: pointer;
                    /* á”áŸ’áŠá¼ášá–ááŸŒá‘áŸ…á‡á¶ Cyan */
                    filter: invert(56%) sepia(86%) saturate(2256%) hue-rotate(150deg) brightness(98%) contrast(101%);
                    padding: 8px;
                    width: 24px;
                    height: 24px;
                    transform: scale(1.3); /* á–á„áŸ’ášá¸á€á±áŸ’á™á’áŸ†á‡á¶á„á˜á»á“ */
                    border-radius: 12px;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                }
                .cyan-calendar-picker::-webkit-calendar-picker-indicator:hover {
                    background: rgba(6, 182, 212, 0.15);
                    transform: scale(1.45);
                    filter: invert(60%) sepia(90%) saturate(2500%) hue-rotate(160deg) brightness(110%) contrast(110%);
                }
                .cyan-calendar-picker::-webkit-calendar-picker-indicator:active {
                    transform: scale(1.2);
                }
            `}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-500 ${b?"bg-cyan-500 text-white shadow-lg shadow-cyan-500/30":"bg-gray-800 text-gray-500"}`,children:e.jsx("svg",{className:"w-7 h-7",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-black uppercase tracking-widest transition-colors ${b?"text-cyan-400":"text-gray-400"}`,children:"á€áŸ†áááŸ‹á–áŸá› Telegram"}),e.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase opacity-60",children:"Auto-Send Schedule"})]})]}),e.jsx("button",{type:"button",onClick:n,className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none ${b?"bg-cyan-500":"bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform duration-300 ease-in-out ${b?"translate-x-6":"translate-x-1"}`})})]}),b&&e.jsxs("div",{className:"animate-fade-in-down pt-6 mt-4 border-t border-cyan-500/10",children:[e.jsx("div",{className:"relative group",children:e.jsx("input",{type:"datetime-local",value:M||"",onChange:r=>P({schedule:b,time:r.target.value}),onClick:r=>{try{"showPicker"in HTMLInputElement.prototype&&r.currentTarget.showPicker()}catch{}},className:"cyan-calendar-picker form-input !py-4 !pl-5 !pr-14 bg-black/40 border-cyan-500/20 text-white font-mono font-bold rounded-2xl focus:border-cyan-500 focus:ring-4 focus:ring-cyan-500/10 transition-all text-sm w-full cursor-pointer",min:new Date().toISOString().slice(0,16)})}),e.jsx("p",{className:"text-[9px] text-cyan-400/60 font-black uppercase tracking-widest text-center mt-3",children:"áŸá¶ášá“á¹á„ááŸ’ášá¼áœá•áŸ’á‰á¾áŠáŸ„á™áŸáŸ’áœáŸá™á”áŸ’ášáœááŸ’áá·áá¶á˜á˜áŸ‰áŸ„á„á€áŸ†áááŸ‹"})]}),e.jsx("div",{className:`absolute -right-6 -bottom-6 w-24 h-24 bg-cyan-500 transition-opacity duration-700 rounded-full blur-[40px] pointer-events-none ${b?"opacity-10":"opacity-0"}`})]})},Ge=({bankAccounts:b,selectedBankName:M,onSelect:P})=>!b||b.length===0?e.jsx("div",{className:"p-4 text-center border-2 border-dashed border-gray-700 rounded-xl bg-gray-800/30",children:e.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"No Bank Accounts Configured"})}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 animate-fade-in-down",children:b.map(n=>{const r=M===n.BankName;return e.jsxs("button",{type:"button",onClick:()=>P(n.BankName),className:`
                            relative flex flex-col items-center justify-center p-4 rounded-2xl border-2 transition-all duration-200 group
                            ${r?"bg-blue-600/10 border-blue-500 shadow-[0_0_20px_rgba(37,99,235,0.2)]":"bg-gray-900/60 border-gray-700 hover:border-gray-500 hover:bg-gray-800"}
                        `,children:[e.jsx("div",{className:`
                            w-12 h-12 rounded-xl flex items-center justify-center bg-white p-1 mb-3 transition-transform duration-300
                            ${r?"scale-110 shadow-lg":"grayscale group-hover:grayscale-0"}
                        `,children:n.LogoURL?e.jsx("img",{src:ae(n.LogoURL),alt:n.BankName,className:"w-full h-full object-contain"}):e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}),e.jsx("span",{className:`
                            text-[10px] font-black uppercase tracking-wider text-center leading-tight
                            ${r?"text-white":"text-gray-400 group-hover:text-gray-200"}
                        `,children:n.BankName}),r&&e.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center shadow-md animate-scale-in",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]},n.BankName)})}),ve={id:Date.now(),name:"",quantity:1,originalPrice:0,finalPrice:0,total:0,discountPercent:0,colorInfo:"",image:"",cost:0,discountType:"percent",discountAmountInput:"",discountPercentInput:"",finalPriceInput:"",applyDiscountToTotal:!1},fe=[{number:1,title:"á¢áá·áá·á‡á“"},{number:2,title:"á•á›á·áá•á›"},{number:3,title:"áŠá¹á€á‡á‰áŸ’á‡á¼á“"},{number:4,title:"á•áŸ’á‘áŸ€á„á•áŸ’á‘á¶ááŸ‹"}],Ke=({team:b,onSaveSuccess:M,onCancel:P})=>{const{appData:n,currentUser:r,apiKey:_,previewImage:L}=a.useContext(we),[T,R]=a.useState(1),[y,z]=a.useState(!1),$=a.useRef(new Audio("https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3")),Y=a.useRef(new Audio("https://samnangh849-source.github.io/ButtonTest/Send.mp3"));a.useEffect(()=>{$.current.volume=.4,Y.current.volume=.6},[]);const Z=a.useMemo(()=>({page:"",telegramValue:"",fulfillmentStore:"",pageSelectMode:"cards",customer:{name:"",phone:"",province:"",district:"",sangkat:"",additionalLocation:"",shippingFee:""},products:[{...ve,id:Date.now()}],shipping:{method:"",details:"",cost:""},payment:{status:"Unpaid",info:""},telegram:{schedule:!1,time:""},subtotal:0,grandTotal:0,note:""}),[]),[t,C]=a.useState(Z),[oe,ie]=a.useState(!1),[J,G]=a.useState(""),[ee,re]=a.useState(null),[g,A]=a.useState(null),[N,te]=a.useState(""),[X,q]=a.useState(""),[ce,V]=a.useState(!1),[ne,W]=a.useState("charge"),[K,me]=a.useState(!1),[xe,l]=a.useState(""),[m,x]=a.useState("increment"),u=a.useMemo(()=>`createOrderDraft_${r==null?void 0:r.UserName}_${b}`,[r,b]);a.useEffect(()=>{window.innerWidth<768&&window.scrollTo({top:0,behavior:"smooth"})},[T]),a.useEffect(()=>{var o,p;try{const c=localStorage.getItem(u);if(c){const s=JSON.parse(c);if(C(i=>({...i,...s})),s.customer&&typeof s.customer.shippingFee=="number"&&W(s.customer.shippingFee===0?"free":"charge"),s.customer.phone){const i=s.customer.phone,w=(o=n.phoneCarriers)==null?void 0:o.find(j=>(j.Prefixes||"").split(",").some(f=>i.startsWith(f.trim())));te(w?ae(w.CarrierLogoURL):"")}if(s.shipping.method){const i=(p=n.shippingMethods)==null?void 0:p.find(w=>w.MethodName===s.shipping.method);A(i||null),q(i?ae(i.LogosURL):"")}}}catch{localStorage.removeItem(u)}},[u,n.phoneCarriers,n.shippingMethods]),a.useEffect(()=>{const o=setTimeout(()=>{localStorage.setItem(u,JSON.stringify(t))},500);return()=>clearTimeout(o)},[t,u]);const v=()=>z(!0),I=()=>{localStorage.removeItem(u),z(!1),P()},O=a.useMemo(()=>n.pages?n.pages.filter(o=>o.Team===b):[],[n.pages,b]);a.useEffect(()=>{if(O.length===1&&!t.page){const o=O[0];C(p=>({...p,page:o.PageName,telegramValue:o.TelegramValue,fulfillmentStore:o.DefaultStore||t.fulfillmentStore}))}},[O,t.page]);const F=a.useMemo(()=>n.locations?[...new Set(n.locations.map(o=>o.Province))]:[],[n.locations]),B=a.useMemo(()=>!n.locations||!t.customer.province?[]:[...new Set(n.locations.filter(o=>o.Province===t.customer.province).map(o=>o.District))].sort((o,p)=>String(o).localeCompare(String(p),"km")),[n.locations,t.customer.province]),U=a.useMemo(()=>!n.locations||!t.customer.province||!t.customer.district?[]:[...new Set(n.locations.filter(o=>o.Province===t.customer.province&&o.District===t.customer.district).map(o=>o.Sangkat).filter(Boolean))].sort((o,p)=>String(o).localeCompare(String(p),"km")),[n.locations,t.customer.province,t.customer.district]);a.useEffect(()=>{const o=t.products.reduce((c,s)=>c+(s.total||0),0),p=o+(Number(t.customer.shippingFee)||0);(o!==t.subtotal||p!==t.grandTotal)&&C(c=>({...c,subtotal:o,grandTotal:p}))},[t.products,t.customer.shippingFee]);const le=(o,p)=>{const c={...o},s=p.find(f=>f.ProductName===c.name);c.quantity=Math.max(1,Number(c.quantity)||1),c.originalPrice=Math.max(0,s&&Number(s.Price)||0),c.cost=Math.max(0,s&&Number(s.Cost)||0);const i=c.quantity*c.originalPrice;let w=i,j=0;switch(c.discountType){case"percent":const f=Math.max(0,Number(c.discountPercentInput)||0);j=i*(f/100),w=i-j;break;case"amount":const se=Math.max(0,Number(c.discountAmountInput)||0);j=c.quantity>1&&c.applyDiscountToTotal?se:se*c.quantity,w=i-j;break;case"custom":const ke=Math.max(0,Number(c.finalPriceInput)||0);w=c.quantity*ke,j=i-w,c.finalPrice=ke;break}return c.total=Math.max(0,w),c.finalPrice=c.quantity>0?c.total/c.quantity:0,c.discountPercent=i>0?j/i*100:0,c.discountType!=="custom"&&(c.finalPriceInput=c.finalPrice.toFixed(2)),c},pe=a.useCallback(o=>{const p=n.products.find(c=>c.Barcode&&c.Barcode.trim()===o.trim());p&&(C(c=>{const s=c.products.findIndex(w=>w.name===p.ProductName);let i;if(s>-1){const w={...c.products[s]};m==="increment"&&(w.quantity+=1);const j=le(w,n.products);i=[...c.products],i[s]=j}else{const w=c.products.findIndex(se=>!se.name),j={...ve,id:Date.now(),name:p.ProductName,quantity:1,originalPrice:p.Price,cost:p.Cost,image:p.ImageURL,tags:p.Tags},f=le(j,n.products);w>-1?(i=[...c.products],i[w]=f):i=[...c.products,f]}return{...c,products:i}}),m==="single"&&V(!1))},[n.products,m]),d=o=>{const{name:p,value:c}=o.target;if(p==="phone"){let s=c.replace(/[^0-9]/g,"");s.length>1&&s.startsWith("00")?s="0"+s.substring(2):s.length>0&&!s.startsWith("0")&&(s="0"+s);let i=null;s.length>=2&&n.phoneCarriers&&(i=n.phoneCarriers.find(w=>(w.Prefixes||"").split(",").some(j=>s.startsWith(j.trim())))),te(i?ae(i.CarrierLogoURL):""),C(w=>({...w,customer:{...w.customer,phone:s}}));return}if(p==="shippingFee"){const s=c===""?"":Math.max(0,parseFloat(c));C(i=>({...i,customer:{...i.customer,shippingFee:s}}));return}C(s=>{let i={...s.customer,[p]:c};return p==="province"?(i.district="",i.sangkat=""):p==="district"&&(i.sangkat=""),{...s,customer:i}})},h=(o,p,c,s)=>{C(i=>{const w=[...i.products];let j={...w[o]};if(["discountPercentInput","discountAmountInput","finalPriceInput"].includes(p)){let f=String(c).replace(/[^0-9.]/g,"").replace(/(\..*?)\./g,"$1");f.startsWith("0")&&f.length>1&&!f.startsWith("0.")&&(f=String(parseFloat(f))),j[p]=f}else p==="quantity"?j[p]=c===""?0:Math.max(0,parseInt(c)||0):j[p]=c;if(p==="name"){const f=n.products.find(se=>se.ProductName===c);j.name=c,f?(j.originalPrice=f.Price,j.image=f.ImageURL,j.cost=f.Cost,j.discountType="percent",j.finalPrice=f.Price,j.finalPriceInput=String(f.Price),j.tags=s!==void 0?s:f.Tags):(j.originalPrice=0,j.image="",j.cost=0,j.discountType="custom",j.finalPrice=0,j.tags="")}return p==="discountType"&&(j.discountPercentInput="",j.discountAmountInput="",j.finalPrice=j.originalPrice,j.finalPriceInput=String(j.originalPrice)),w[o]=le(j,n.products),{...i,products:w}})},S=o=>{A(o),q(ae(o.LogosURL)),C(p=>({...p,shipping:{...p.shipping,method:o.MethodName,details:o.RequireDriverSelection?"":o.MethodName}}))},E=o=>{const{name:p,value:c}=o.target;let s=c;if(p==="cost"){s.startsWith("0")&&s.length>1&&!s.startsWith("0.")&&(s=String(parseFloat(s)));const i=parseFloat(s)||0;s=String(Math.max(0,i))}C(i=>({...i,shipping:{...i.shipping,[p]:s}}))},Q=o=>{C(p=>({...p,shipping:{...p.shipping,details:o}}))},D=o=>{C(p=>({...p,payment:{...p.payment,info:o}}))},k=o=>{W(o),C(p=>({...p,customer:{...p.customer,shippingFee:o==="free"?0:""}}))},H=()=>{if(!_){alert("API Key Required for Maps.");return}const{province:o,district:p,sangkat:c,additionalLocation:s}=t.customer,i=[s,c,p,o,"Cambodia"].filter(Boolean).join(", ");l(`https://www.google.com/maps/embed/v1/search?key=${_}&q=${encodeURIComponent(i)}`),me(!0)},ue=o=>{switch(G(""),o){case 1:return!t.customer.name||!t.customer.phone||!t.customer.province||!t.page||!t.fulfillmentStore?(G("áŸá¼á˜á”áŸ†á–áŸá‰áˆáŸ’á˜áŸ„áŸ‡, á›áŸáá‘á¼ášáŸáŸá–áŸ’á‘, ááŸááŸ’á/á€áŸ’ášá»á„, Page á“á·á„áƒáŸ’á›á¶áŸ†á„á”á‰áŸ’á…áŸá‰á‘áŸ†á“á·á‰áŸ”"),!1):ne==="charge"&&(t.customer.shippingFee===""||t.customer.shippingFee<0)?(G("áŸá¼á˜á”á‰áŸ’á…á¼á›áá˜áŸ’á›áŸƒáŠá¹á€á‡á‰áŸ’á‡á¼á“á±áŸ’á™á”á¶á“ááŸ’ášá¹á˜ááŸ’ášá¼áœáŸ”"),!1):!0;case 2:return t.products.length===0||t.products.some(p=>!p.name||p.quantity<=0)?(G("áŸá¼á˜á–á·á“á·ááŸ’á™á‘á·á“áŸ’á“á“áŸá™á•á›á·áá•á›áŸ”"),!1):!0;case 3:return!t.shipping.method||g!=null&&g.RequireDriverSelection&&!t.shipping.details||t.shipping.cost===""||parseFloat(t.shipping.cost)<0?(G("áŸá¼á˜á–á·á“á·ááŸ’á™á–áŸááŸŒá˜á¶á“áŠá¹á€á‡á‰áŸ’á‡á¼á“áŸ”"),!1):!0;case 4:return t.payment.status==="Paid"&&!t.payment.info?(G("áŸá¼á˜á‡áŸ’ášá¾áŸášá¾áŸá‚áá“á¸á’á“á¶á‚á¶ášáŸ”"),!1):t.telegram.schedule&&!t.telegram.time?(G("áŸá¼á˜á‡áŸ’ášá¾áŸášá¾áŸá–áŸá›áœáŸá›á¶á•áŸ’á‰á¾áŸá¶ášáŸ”"),!1):!0;default:return!0}},be=()=>{ue(T)&&R(T+1)},De=()=>{T>1&&R(T-1)},Pe=async()=>{for(const w of fe)if(!ue(w.number)){R(w.number);return}ie(!0);let o="0"+t.customer.phone.replace(/[^0-9]/g,"").replace(/^0+/,"");const c=[t.customer.additionalLocation,t.customer.sangkat,t.customer.district].filter(Boolean).join(", ");let s=t.telegram.schedule?t.telegram.time:"";s&&(s=s.replace("T"," "));const i={currentUser:r,selectedTeam:b,page:t.page,telegramValue:t.telegramValue,customer:{...t.customer,phone:o,shippingFee:Number(t.customer.shippingFee)||0},"Customer Name":t.customer.name,"Customer Phone":o,Location:t.customer.province,"Address Details":c,"Internal Shipping Method":t.shipping.method,"Internal Shipping Details":t.shipping.details,"Internal Cost":Number(t.shipping.cost)||0,"Payment Status":t.payment.status,"Payment Info":t.payment.info,"Fulfillment Store":t.fulfillmentStore,products:t.products.map(w=>({name:w.name,quantity:Number(w.quantity)||1,originalPrice:Number(w.originalPrice)||0,finalPrice:Number(w.finalPrice)||0,total:Number(w.total)||0,colorInfo:w.colorInfo,cost:Number(w.cost)||0,tags:w.tags})),shipping:{...t.shipping,cost:Number(t.shipping.cost)||0},payment:t.payment,subtotal:Number(t.subtotal)||0,grandTotal:Number(t.grandTotal)||0,note:t.note,fulfillmentStore:t.fulfillmentStore,scheduledTime:s};try{const w=await fetch(`${ye}/api/submit-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),j=await w.json();if(!w.ok||j.status!=="success")throw new Error(j.message||"Error");Y.current.currentTime=0,Y.current.play().catch(()=>{});try{const f=`ğŸ“¢ SYSTEM_ALERT: New Order from ${b} ($${i.grandTotal})`;await fetch(`${ye}/api/chat/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:r==null?void 0:r.UserName,type:"text",content:f})})}catch(f){console.warn("Failed to send system notification",f)}await _e((r==null?void 0:r.UserName)||"Unknown","CREATE_ORDER",`Created Order ID: ${j.orderId} for ${t.customer.name}`),localStorage.removeItem(u),re({type:"success",message:`á‡áŸ„á‚á‡áŸá™! Order ID: ${j.orderId}`}),setTimeout(M,3e3)}catch(w){re({type:"error",message:`á”ášá¶á‡áŸá™: ${w.message}`}),setTimeout(()=>re(null),3e3)}finally{ie(!1)}},Me=()=>{var o,p;switch(T){case 1:return e.jsxs("fieldset",{className:"border border-gray-600 p-3 sm:p-4 rounded-lg animate-fade-in space-y-6",children:[e.jsx("legend",{className:"px-2 text-base sm:text-lg font-semibold text-blue-300",children:"á–áŸááŸŒá˜á¶á“á¢áá·áá·á‡á“ & Page"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("label",{className:"input-label font-black text-xs uppercase tracking-widest text-gray-500 mb-0 block",children:"Facebook Page*"}),e.jsxs("div",{className:"flex bg-gray-900/80 p-1 rounded-xl border border-gray-700",children:[e.jsxs("button",{type:"button",onClick:()=>C({...t,pageSelectMode:"cards"}),className:`px-3 py-1.5 text-[10px] font-black uppercase rounded-lg transition-all flex items-center gap-2 ${t.pageSelectMode==="cards"?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2z",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Card View"]}),e.jsxs("button",{type:"button",onClick:()=>C({...t,pageSelectMode:"search"}),className:`px-3 py-1.5 text-[10px] font-black uppercase rounded-lg transition-all flex items-center gap-2 ${t.pageSelectMode==="search"?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Search View"]})]})]}),e.jsx("div",{className:"animate-fade-in-down",children:t.pageSelectMode==="cards"?e.jsx(Ye,{pages:O,selectedPageName:t.page,onSelect:s=>C({...t,page:s.PageName,telegramValue:s.TelegramValue,fulfillmentStore:s.DefaultStore||t.fulfillmentStore})}):e.jsx(qe,{pages:O,selectedPageName:t.page,onSelect:s=>C({...t,page:s.PageName,telegramValue:s.TelegramValue,fulfillmentStore:s.DefaultStore||t.fulfillmentStore})})})]}),e.jsxs("div",{className:"md:col-span-2 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-1.5 h-4 bg-orange-500 rounded-full"}),e.jsx("label",{className:"input-label !mb-0 font-black text-xs uppercase tracking-widest text-orange-400",children:"áƒáŸ’á›á¶áŸ†á„á”á‰áŸ’á…áŸá‰á‘áŸ†á“á·á‰ (Store)*"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:(o=n.stores)==null?void 0:o.map(s=>{const i=t.fulfillmentStore===s.StoreName;return e.jsxs("button",{type:"button",onClick:()=>C({...t,fulfillmentStore:s.StoreName}),className:`relative overflow-hidden group p-4 rounded-2xl border-2 transition-all duration-300 flex flex-col items-center text-center gap-2 ${i?"bg-orange-500/10 border-orange-500 shadow-[0_0_20px_rgba(249,115,22,0.2)]":"bg-gray-900 border-gray-800 hover:border-gray-600"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-colors ${i?"bg-orange-500 text-white":"bg-gray-800 text-gray-500 group-hover:text-gray-300"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("span",{className:`text-[11px] font-black uppercase tracking-tight ${i?"text-white":"text-gray-400"}`,children:s.StoreName}),i&&e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]},s.StoreName)})})]}),e.jsx("input",{type:"text",name:"name",value:t.customer.name,placeholder:"áˆáŸ’á˜áŸ„áŸ‡á¢áá·áá·á‡á“*",className:"form-input !py-3 rounded-xl border-gray-700 bg-gray-900",onChange:d,required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"tel",name:"phone",value:t.customer.phone,placeholder:"á›áŸáá‘á¼ášáŸáŸá–áŸ’á‘*",className:"form-input !py-3 rounded-xl border-gray-700 bg-gray-900 pr-12",onChange:d,required:!0}),N&&e.jsx("img",{src:N,alt:"Carrier",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-auto object-contain"})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(Oe,{provinces:F,selectedProvince:t.customer.province,onSelect:s=>d({target:{name:"province",value:s}})}),e.jsxs("select",{name:"district",value:t.customer.district,className:"form-select",onChange:d,disabled:!t.customer.province,children:[e.jsx("option",{value:"",children:"-- áŸáŸ’ášá»á€/áááŸ’áŒ --"}),B.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{name:"sangkat",value:t.customer.sangkat,className:"form-select",onChange:d,disabled:!t.customer.district,children:[e.jsx("option",{value:"",children:"-- áƒá»áŸ†/áŸá„áŸ’á€á¶ááŸ‹ --"}),U.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"á‘á¸áá¶áŸ†á„á›á˜áŸ’á¢á·á (á•áŸ’á‘áŸ‡á›áŸá, á•áŸ’á›á¼áœ)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"additionalLocation",value:t.customer.additionalLocation,placeholder:"á”á‰áŸ’á…á¼á›á‘á¸áá¶áŸ†á„á›á˜áŸ’á¢á·á...",className:"form-input !py-3 rounded-xl bg-gray-900 border-gray-700",onChange:d}),e.jsx("button",{type:"button",onClick:H,className:"p-3 bg-blue-600/10 text-blue-400 rounded-xl border border-blue-500/20 hover:bg-blue-600 hover:text-white transition-all active:scale-90",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"ááŸ’á›áŸƒáŸáŸáœá¶áŠá¹á€á‡á‰áŸ’á‡á¼á“"}),e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>k("charge"),className:`flex-1 py-3 px-4 rounded-xl text-xs font-black uppercase transition-all border ${ne==="charge"?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-300"}`,children:"á‚á·áááŸ’á›áŸƒáŸáŸáœá¶"}),e.jsx("button",{type:"button",onClick:()=>k("free"),className:`flex-1 py-3 px-4 rounded-xl text-xs font-black uppercase transition-all border ${ne==="free"?"bg-emerald-600 border-emerald-500 text-white shadow-lg shadow-emerald-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-300"}`,children:"á˜á·á“á‚á·áááŸ’á›áŸƒáŸáŸáœá¶"})]}),ne==="charge"&&e.jsxs("div",{className:"space-y-3 animate-fade-in",children:[e.jsx("input",{type:"number",min:"0",name:"shippingFee",value:t.customer.shippingFee,placeholder:"áá˜áŸ’á›áŸƒáŠá¹á€á‡á‰áŸ’á‡á¼á“ (á§. 1.5)*",className:"form-input !py-3 rounded-xl border-gray-700 bg-gray-900",onChange:d,required:!0}),e.jsx("div",{className:"flex gap-2",children:[1,1.5,2].map(s=>{const i=parseFloat(t.customer.shippingFee)===s;return e.jsxs("button",{type:"button",onClick:()=>d({target:{name:"shippingFee",value:String(s)}}),className:`flex-1 py-2 border font-black rounded-xl text-xs transition-all active:scale-95 ${i?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-200"}`,children:["$",s]},s)})})]})]})]})]});case 2:return e.jsxs("fieldset",{className:"border border-gray-600 p-3 sm:p-4 rounded-lg animate-fade-in space-y-4 sm:space-y-6",children:[e.jsx("legend",{className:"px-2 text-base sm:text-lg font-semibold text-blue-300",children:"á•á›á·áá•á› & á€á¶ášá”á‰áŸ’á…á»áŸ‡áá˜áŸ’á›áŸƒ"}),e.jsx("div",{className:"space-y-4 sm:space-y-6",children:t.products.map((s,i)=>{const w=(Number(s.quantity)||0)*(Number(s.originalPrice)||0),j=w-(Number(s.total)||0);return e.jsxs("div",{className:"p-3 sm:p-5 bg-gray-800/40 rounded-2xl sm:rounded-3xl border border-gray-700 relative shadow-xl overflow-hidden group",children:[e.jsx("button",{type:"button",onClick:()=>{t.products.length>1&&C({...t,products:t.products.filter((f,se)=>se!==i)})},className:"absolute top-2 right-2 sm:top-4 sm:right-4 text-red-400 bg-red-400/10 rounded-full h-6 w-6 sm:h-8 sm:w-8 flex items-center justify-center border border-red-400/20 hover:bg-red-600 hover:text-white transition-all z-10 active:scale-90",disabled:t.products.length<=1,children:"Ã—"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 sm:gap-6 mb-4 sm:mb-6",children:[e.jsx("div",{className:"md:col-span-2 flex justify-center",children:e.jsx("div",{className:"w-20 h-20 sm:w-28 sm:h-28 bg-gray-900 rounded-xl sm:rounded-2xl overflow-hidden border-2 border-gray-700 shadow-inner group-hover:border-blue-500/50 transition-colors",children:e.jsx("img",{src:ae(s.image),className:"w-full h-full object-cover",alt:""})})}),e.jsxs("div",{className:"md:col-span-10 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"áˆáŸ’á˜áŸ„áŸ‡á•á›á·áá•á›*"}),e.jsx(Fe,{products:n.products||[],selectedProductName:s.name,onSelect:(f,se)=>h(i,"name",f,se)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsx(Ee,{value:s.quantity,onChange:f=>h(i,"quantity",f)}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"á–ááŸŒ/áŸá˜áŸ’á‚á¶á›áŸ‹"}),e.jsx("input",{type:"text",list:`colors-datalist-${s.id}`,value:s.colorInfo,onChange:f=>h(i,"colorInfo",f.target.value),className:"form-input text-sm !py-2.5 rounded-xl bg-gray-900 border-gray-700",placeholder:"á§. ááŸ€áœ, XL"}),e.jsx("datalist",{id:`colors-datalist-${s.id}`,children:(n.colors||[]).map((f,se)=>e.jsx("option",{value:f.ColorName},se))})]})]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-xl sm:rounded-[2rem] p-3 sm:p-6 border border-white/5 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"h-px flex-grow bg-gray-700/50"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] whitespace-nowrap",children:"Pricing & Discount"}),e.jsx("div",{className:"h-px flex-grow bg-gray-700/50"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"flex bg-gray-900/50 p-1 rounded-xl sm:rounded-2xl border border-gray-700 shadow-inner",children:["percent","amount","custom"].map(f=>e.jsx("button",{type:"button",onClick:()=>h(i,"discountType",f),className:`flex-1 flex flex-col items-center justify-center py-2 sm:py-2.5 rounded-lg sm:rounded-xl transition-all duration-300 active:scale-95 ${s.discountType===f?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:e.jsx("span",{className:"text-[9px] sm:text-[11px] font-black uppercase tracking-widest",children:f==="percent"?"á”á‰áŸ’á…á»áŸ‡ %":f==="amount"?"á”á‰áŸ’á…á»áŸ‡ $":"á€áŸ‚áá˜áŸ’á›áŸƒá›á€áŸ‹"})},f))}),e.jsxs("div",{className:"relative animate-fade-in",children:[s.discountType==="percent"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 ml-1",children:"á”á‰áŸ’á…á¼á›á—á¶á‚ášá™á”á‰áŸ’á…á»áŸ‡áá˜áŸ’á›áŸƒ (%)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",max:"100",placeholder:"0",value:s.discountPercentInput,onChange:f=>h(i,"discountPercentInput",f.target.value),className:"form-input !text-base sm:!text-lg !font-black !py-2 sm:!py-3 pr-10 text-right text-blue-400 bg-gray-900 border-gray-700"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-black",children:"%"})]})]}),s.discountType==="amount"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 ml-1",children:"á”á‰áŸ’á…á¼á›á‘á¹á€á”áŸ’ášá¶á€áŸ‹á”á‰áŸ’á…á»áŸ‡áá˜áŸ’á›áŸƒ ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",placeholder:"0.00",value:s.discountAmountInput,onChange:f=>h(i,"discountAmountInput",f.target.value),className:"form-input !text-base sm:!text-lg !font-black !py-2 sm:!py-3 pr-10 text-right text-red-400 bg-gray-900 border-gray-700"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-black",children:"$"})]}),s.quantity>1&&e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-black/20 rounded-lg mt-1 sm:mt-2 border border-white/5 active:scale-95 transition-transform",children:[e.jsx("input",{type:"checkbox",checked:s.applyDiscountToTotal,onChange:f=>h(i,"applyDiscountToTotal",f.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-gray-800 text-blue-500"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] text-gray-400 uppercase font-black",children:"á”á‰áŸ’á…á»áŸ‡á›á¾áá˜áŸ’á›áŸƒáŸášá»á”"})]})]}),s.discountType==="custom"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 ml-1",children:"á€áŸ†áááŸ‹áá˜áŸ’á›áŸƒá›á€áŸ‹ááŸ’á˜á¸á€áŸ’á“á»á„ áŸ¡ á¯á€áá¶ ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",inputMode:"decimal",placeholder:"0.00",value:s.finalPriceInput,onChange:f=>h(i,"finalPriceInput",f.target.value),className:"form-input !text-base sm:!text-lg !font-black !py-2 sm:!py-3 pr-10 text-right text-emerald-400 bg-gray-900 border-gray-700"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-black",children:"$"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-900/60 rounded-xl sm:rounded-[1.5rem] p-3 sm:p-5 border border-white/5 flex flex-col justify-between",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-[10px] sm:text-xs",children:[e.jsx("span",{className:"text-gray-500 font-bold uppercase",children:"Original Subtotal"}),e.jsxs("span",{className:"text-blue-400 font-black",children:["$",w.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] sm:text-xs",children:[e.jsx("span",{className:"text-gray-500 font-bold uppercase",children:"Discount Applied"}),e.jsxs("span",{className:"text-red-400 font-black",children:["-",j>0?`$${j.toFixed(2)}`:"$0.00"]})]}),e.jsx("div",{className:"h-px bg-gray-700/50 my-1"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[9px] sm:text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Net Total"}),e.jsxs("span",{className:"text-xl sm:text-2xl font-black text-white tracking-tighter",children:["$",(s.total||0).toFixed(2)]})]})]}),e.jsx("div",{className:"mt-3 sm:mt-4 pt-2 sm:pt-3 border-t border-white/5 flex justify-center",children:e.jsxs("span",{className:"text-[8px] sm:text-[9px] bg-emerald-500/10 text-emerald-400 px-2 sm:px-3 py-1 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest",children:["Avg. $",(s.finalPrice||0).toFixed(2)," / unit"]})})]})]})]})]},s.id)})}),e.jsxs("div",{className:"bg-gray-900/80 p-4 rounded-2xl border border-blue-500/20 shadow-lg flex flex-col sm:flex-row justify-between items-center gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg text-blue-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Total Quantity"}),e.jsxs("span",{className:"text-lg font-black text-white",children:[t.products.reduce((s,i)=>s+(Number(i.quantity)||0),0)," items"]})]})]}),e.jsx("div",{className:"h-px w-full sm:w-px sm:h-10 bg-gray-700"}),e.jsxs("div",{className:"flex flex-col items-center sm:items-end",children:[e.jsx("span",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest",children:"Estimated Subtotal"}),e.jsxs("span",{className:"text-3xl font-black text-white tracking-tighter drop-shadow-md",children:["$",(t.subtotal||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mt-6",children:[e.jsxs("button",{type:"button",onClick:()=>C({...t,products:[...t.products,{...ve,id:Date.now()}]}),className:"flex-1 py-4 px-6 bg-gray-800 border border-gray-700 rounded-2xl text-gray-300 font-black uppercase text-[11px] tracking-widest hover:bg-gray-700 hover:border-blue-500 transition-all flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M12 4v16m8-8H4"})}),"á”á“áŸ’ááŸ‚á˜á•á›á·áá•á›"]}),e.jsxs("button",{type:"button",onClick:()=>V(!0),className:"flex-1 py-4 px-6 bg-blue-600/10 border border-blue-500/30 rounded-2xl text-blue-400 font-black uppercase text-[11px] tracking-widest hover:bg-blue-600 hover:text-white transition-all flex items-center justify-center gap-2 shadow-lg shadow-blue-900/10 active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2M17 3h2a2 2 0 0 1 2 2v2M21 17v2a2 2 0 0 1-2 2h-2M7 21H5a2 2 0 0 1-2-2v-2M7 12h10",strokeWidth:"3"})}),"Scan Barcode"]})]})]});case 3:return e.jsxs("fieldset",{className:"border border-gray-600 p-3 sm:p-4 rounded-lg animate-fade-in space-y-4 sm:space-y-6",children:[e.jsx("legend",{className:"px-2 text-base sm:text-lg font-semibold text-blue-300",children:"áŠá¹á€á‡á‰áŸ’á‡á¼á“"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"áœá·á’á¸áŸá¶áŸáŸ’ášáŸ’ááŠá¹á€á‡á‰áŸ’á‡á¼á“*"}),e.jsx($e,{methods:n.shippingMethods||[],selectedMethodName:t.shipping.method,onSelect:S})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"ááŸ’á›áŸƒáŸáŸáœá¶á²áŸ’á™á¢áŸ’á“á€áŠá¹á€ (Cost)*"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",step:"0.01",name:"cost",placeholder:"0.00",value:t.shipping.cost,className:"form-input !py-3 rounded-xl bg-gray-900 border-gray-700 text-blue-400 font-black pr-12",onChange:E,required:!0}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"$"})]}),e.jsx("div",{className:"flex gap-2",children:[1.25,1.5,2].map(s=>{const i=parseFloat(t.shipping.cost)===s;return e.jsxs("button",{type:"button",onClick:()=>E({target:{name:"cost",value:String(s)}}),className:`flex-1 py-2 border font-black rounded-xl text-xs transition-all active:scale-95 ${i?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-200"}`,children:["$",s]},s)})})]})]}),(g==null?void 0:g.RequireDriverSelection)&&e.jsxs("div",{className:"md:col-span-2 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-1",children:[e.jsx("div",{className:"h-4 w-1 bg-blue-500 rounded-full"}),e.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"á‡áŸ’ášá¾áŸášá¾áŸá¢áŸ’á“á€áŠá¹á€ (DriverSelection)*"})]}),e.jsx(Ie,{drivers:n.drivers||[],selectedDriverName:t.shipping.details,onSelect:Q}),!t.shipping.details&&e.jsx("p",{className:"text-center text-[9px] text-gray-500 italic mt-1",children:"áŸá¼á˜á‡áŸ’ášá¾áŸášá¾áŸá¢áŸ’á“á€áŠá¹á€á˜áŸ’á“á¶á€áŸ‹"})]})]})]});case 4:const c=(p=n.drivers)==null?void 0:p.find(s=>s.DriverName===t.shipping.details);return e.jsxs("div",{className:"animate-fade-in space-y-4 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2 sm:mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," á–áŸááŸŒá˜á¶á“á¢áá·áá·á‡á“"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 bg-gray-900/60 p-3 sm:p-5 rounded-2xl sm:rounded-3xl border border-white/5 shadow-inner",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Customer Info"}),e.jsx("p",{className:"text-white font-black text-base sm:text-lg",children:t.customer.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-blue-400 font-bold font-mono text-sm",children:t.customer.phone}),N&&e.jsx("img",{src:N,className:"h-4 sm:h-5 w-auto object-contain",alt:"Carrier"})]})]}),e.jsxs("div",{className:"space-y-1 md:text-right",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Location / Store"}),e.jsx("p",{className:"text-gray-200 font-bold text-xs sm:text-sm leading-tight",children:`${t.customer.additionalLocation}, ${t.customer.sangkat}, ${t.customer.district}, ${t.customer.province}`.replace(/^,|,$/g,"").trim()}),e.jsxs("p",{className:"text-purple-400 font-black text-[9px] uppercase tracking-wider",children:["Fulfillment: ",t.fulfillmentStore]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2 sm:mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-orange-500"})," á–áŸááŸŒá˜á¶á“áŠá¹á€á‡á‰áŸ’á‡á¼á“"]}),e.jsxs("div",{className:"bg-gray-900/40 p-3 sm:p-5 rounded-2xl sm:rounded-3xl border border-white/5 shadow-inner grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Shipping Method"}),e.jsxs("div",{className:"flex items-center gap-2",children:[X&&e.jsx("img",{src:X,className:"h-4 sm:h-5 w-auto object-contain",alt:"Logo"}),e.jsx("p",{className:"text-white font-black text-xs sm:text-sm",children:t.shipping.method})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Driver / Details"}),e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsx("img",{src:ae(c.ImageURL),className:"h-6 w-6 sm:h-8 sm:w-8 rounded-full object-cover border border-gray-700 cursor-pointer active:scale-95 transition-transform",alt:"Driver",onClick:()=>L(ae(c.ImageURL))}),e.jsx("p",{className:"text-white font-bold text-xs sm:text-sm",children:t.shipping.details||"N/A"})]})]}),e.jsxs("div",{className:"space-y-1 sm:text-right",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Internal Cost ($)"}),e.jsxs("p",{className:"text-orange-400 font-black text-base sm:text-lg font-mono",children:["$",(Number(t.shipping.cost)||0).toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2 sm:mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," á”á‰áŸ’á‡á¸á‘áŸ†á“á·á‰á€á»á˜áŸ’á˜áŸ‰á„áŸ‹"]}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:t.products.map(s=>e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 bg-gray-900/40 p-2 sm:p-3 rounded-xl sm:rounded-2xl border border-white/5 group hover:border-blue-500/30 transition-all",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-800 rounded-lg sm:rounded-xl overflow-hidden border border-gray-700 flex-shrink-0 relative",children:e.jsx("img",{src:ae(s.image),className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",alt:s.name})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-0.5 sm:mb-1",children:[e.jsx("h4",{className:"text-white font-black text-xs sm:text-sm truncate leading-tight",children:s.name}),e.jsx("div",{className:"flex gap-1.5",children:e.jsxs("span",{className:"bg-blue-600/10 text-blue-400 text-[9px] sm:text-[10px] font-black px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded-lg border border-blue-500/20",children:["x",s.quantity]})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.colorInfo&&e.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded-md font-bold",children:s.colorInfo}),e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-tight",children:[e.jsxs("span",{children:["$",(s.finalPrice||0).toFixed(2)]})," / unit"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white font-black text-sm sm:text-base tracking-tight",children:["$",(s.total||0).toFixed(2)]}),e.jsx("p",{className:"text-[8px] text-gray-600 font-bold uppercase",children:"Subtotal"})]})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-gray-900/40 p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-white/5 text-center",children:[e.jsx("p",{className:"text-[8px] sm:text-[9px] text-gray-500 font-black uppercase mb-1",children:"áŸášá»á”á‘áŸ†á“á·á‰"}),e.jsxs("p",{className:"text-white font-black text-base sm:text-lg",children:["$",(t.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-gray-900/40 p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-white/5 text-center",children:[e.jsx("p",{className:"text-[8px] sm:text-[9px] text-gray-500 font-black uppercase mb-1",children:"áŸáŸáœá¶áŠá¹á€"}),e.jsxs("p",{className:"text-white font-black text-base sm:text-lg",children:["$",(Number(t.customer.shippingFee)||0).toFixed(2)]})]}),e.jsxs("div",{className:"col-span-2 bg-blue-600/10 p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-blue-500/20 text-center shadow-lg shadow-blue-900/10",children:[e.jsx("p",{className:"text-[9px] sm:text-[10px] text-blue-400 font-black uppercase mb-1 tracking-widest",children:"áŸášá»á”ášá½á˜ (Grand Total)"}),e.jsxs("p",{className:"text-white font-black text-2xl sm:text-3xl tracking-tighter",children:["$",(t.grandTotal||0).toFixed(2)]})]})]}),e.jsxs("fieldset",{className:"border border-gray-700 p-4 sm:p-6 rounded-2xl sm:rounded-3xl bg-gray-900/20",children:[e.jsx("legend",{className:"px-3 text-[10px] sm:text-xs font-black text-blue-400 uppercase tracking-[0.2em]",children:"áŸáŸ’áá¶á“á—á¶á–á‘á¼á‘á¶ááŸ‹"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex bg-gray-900/80 p-1 rounded-2xl border border-gray-700 max-w-md mx-auto sm:mx-0",children:[e.jsxs("button",{type:"button",onClick:()=>C({...t,payment:{...t.payment,status:"Unpaid",info:""}}),className:`flex-1 py-3 px-4 rounded-xl text-xs font-black uppercase transition-all flex flex-col items-center gap-1 ${t.payment.status==="Unpaid"?"bg-red-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx("span",{children:"Unpaid"}),e.jsx("span",{className:"text-[8px] opacity-70 tracking-wider",children:"COD"})]}),e.jsxs("button",{type:"button",onClick:()=>C({...t,payment:{...t.payment,status:"Paid"}}),className:`flex-1 py-3 px-4 rounded-xl text-xs font-black uppercase transition-all flex flex-col items-center gap-1 ${t.payment.status==="Paid"?"bg-emerald-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx("span",{children:"Paid"}),e.jsx("span",{className:"text-[8px] opacity-70 tracking-wider",children:"Transfer"})]})]}),t.payment.status==="Paid"&&e.jsxs("div",{className:"animate-fade-in-down space-y-3",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"á‡áŸ’ášá¾áŸášá¾áŸá‚áá“á¸á’á“á¶á‚á¶áš"}),e.jsx(Ge,{bankAccounts:n.bankAccounts||[],selectedBankName:t.payment.info,onSelect:s=>D(s)})]})]})]}),e.jsx(Je,{schedule:t.telegram.schedule,time:t.telegram.time,onChange:s=>C({...t,telegram:s})}),e.jsxs("div",{className:"space-y-2 sm:space-y-3 pt-4",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"á…áŸ†áá¶áŸ† & Link Google Map"}),e.jsx("textarea",{placeholder:"á…áŸ†áá¶áŸ†á”á“áŸ’ááŸ‚á˜...",value:t.note,rows:4,onChange:s=>C({...t,note:s.target.value}),className:"form-textarea bg-gray-900/60 !rounded-[1.5rem] sm:!rounded-[2rem] border-white/5 focus:border-blue-500/50 text-sm"})]})]});default:return null}};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto mt-2 sm:mt-10 lg:mt-14 px-1 sm:px-0",children:[e.jsx("style",{children:`
                @keyframes shimmer {
                    0% { background-position: -200% 0; }
                    100% { background-position: 200% 0; }
                }
                .btn-shimmer {
                    background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0) 100%);
                    background-size: 200% 100%;
                    animation: shimmer 3s infinite linear;
                }
                @keyframes pulse-glow {
                    0%, 100% { box-shadow: 0 0 15px rgba(37,99,235,0.3); }
                    50% { box-shadow: 0 0 30px rgba(37,99,235,0.6); }
                }
                .btn-pulse { animation: pulse-glow 2s infinite ease-in-out; }
                @keyframes spin-border {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }
                .card-flux {
                    position: relative;
                    background: #0f172a;
                    z-index: 1;
                }
                .card-flux-active::after, .card-flux-active::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    background: conic-gradient(from var(--angle), transparent 70%, #3b82f6, #8b5cf6, #ec4899, #3b82f6);
                    border-radius: inherit;
                    animation: spin-border 3s linear infinite;
                }
                .card-flux-active::before {
                    filter: blur(10px);
                    opacity: 0.7;
                }
                @keyframes float-y {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-5px); }
                }
                .animate-float-y { animation: float-y 3s ease-in-out infinite; }
                @keyframes pulse-soft {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.6; }
                }
                .animate-pulse-soft { animation: pulse-soft 2s ease-in-out infinite; }
             `}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[100] animate-fade-in p-4",children:e.jsxs("div",{className:"page-card text-center flex flex-col items-center animate-fade-in-scale",children:[ee.type==="success"?e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-green-500/20 text-green-400 rounded-full flex items-center justify-center mb-4 border border-green-500/30 shadow-[0_0_30px_rgba(34,197,94,0.2)]",children:e.jsx("svg",{className:"h-8 w-8 sm:h-10 sm:w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}):e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-red-500/20 text-red-400 rounded-full flex items-center justify-center mb-4 border border-red-500/30",children:e.jsx("svg",{className:"h-8 w-8 sm:h-10 sm:w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("p",{className:"text-base sm:text-lg font-black text-white",children:ee.message})]})}),e.jsx(He,{isOpen:K,onClose:()=>me(!1),url:xe}),ce&&e.jsx(Le,{onClose:()=>V(!1),onCodeScanned:pe,scanMode:m,setScanMode:x,productsInOrder:t.products,masterProducts:n.products||[]}),e.jsx(Ne,{isOpen:y,onClose:()=>z(!1),maxWidth:"max-w-sm",children:e.jsxs("div",{className:"p-6 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto w-14 h-14 sm:w-16 sm:h-16 bg-red-500/10 text-red-500 rounded-full flex items-center justify-center border border-red-500/20 shadow-xl shadow-red-900/10 animate-bounce-slow",children:e.jsx("svg",{className:"h-7 w-7 sm:h-8 sm:w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-lg sm:text-xl font-black text-white uppercase tracking-tighter",children:"á”áŸ„áŸ‡á”á„áŸ‹á€á¶ášá”á‰áŸ’á…á¼á›?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>z(!1),className:"px-6 py-3 bg-gray-800 border border-gray-700 text-gray-300 rounded-2xl flex-1 font-black text-xs sm:text-sm transition-all hover:bg-gray-700 active:scale-95",children:"á‘áŸ (ááŸ’ášá¡á”áŸ‹)"}),e.jsx("button",{onClick:I,className:"px-6 py-3 bg-red-600 border border-red-500 text-white rounded-2xl flex-1 font-black text-xs sm:text-sm transition-all hover:bg-red-700 active:scale-95 shadow-lg shadow-red-900/20",children:"á”á¶á‘ (á”áŸ„áŸ‡á”á„áŸ‹)"})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 sm:mb-10 gap-4",children:[e.jsxs("h1",{className:"hidden md:flex text-2xl sm:text-3xl font-black text-white uppercase tracking-tighter items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"text-blue-500",children:"á€á»á˜áŸ’á˜áŸ‰á„áŸ‹ááŸ’á˜á¸"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] bg-blue-600/20 text-blue-400 px-3 sm:px-4 py-1.5 rounded-full border border-blue-500/20 uppercase tracking-[0.15em] sm:tracking-[0.2em]",children:b})]}),e.jsx("button",{onClick:v,className:"hidden md:block px-6 py-2.5 bg-gray-800 border border-gray-700 hover:border-red-500 hover:bg-red-500/10 text-gray-400 hover:text-red-400 font-black rounded-2xl uppercase text-[10px] sm:text-[11px] tracking-widest transition-all active:scale-90",children:"á”áŸ„áŸ‡á”á„áŸ‹"})]}),e.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-3xl border border-white/5 rounded-[1.5rem] sm:rounded-[3rem] p-3 sm:p-10 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 sm:mb-12 relative px-2 sm:px-4",children:[e.jsx("div",{className:"absolute left-6 right-6 sm:left-10 sm:right-10 top-1/2 w-[calc(100%-48px)] sm:w-[calc(100%-80px)] h-0.5 bg-gray-700 -z-10"}),e.jsx("div",{className:"absolute left-6 sm:left-10 top-1/2 h-0.5 bg-blue-500 -z-10 transition-all duration-500",style:{width:`${(T-1)/(fe.length-1)*(100-48/400*100)}%`}}),fe.map(o=>e.jsxs("div",{className:`relative flex flex-col items-center z-10 transition-all duration-500 ${T>=o.number?"scale-110":"opacity-40 scale-90"}`,children:[e.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-xl sm:rounded-2xl flex items-center justify-center font-black text-[10px] sm:text-xs border-2 transition-all duration-500 ${T>=o.number?"border-blue-500 bg-blue-600 text-white shadow-[0_0_20px_rgba(37,99,235,0.4)]":"border-gray-600 bg-gray-800 text-gray-500"}`,children:T>o.number?"âœ“":o.number}),e.jsx("span",{className:`absolute -bottom-6 sm:-bottom-7 text-[8px] sm:text-[9px] font-black uppercase tracking-widest whitespace-nowrap ${T>=o.number?"text-blue-400":"text-gray-600"}`,children:o.title})]},o.number))]}),e.jsx("div",{className:"mt-8 sm:mt-16",children:Me()}),J&&e.jsx("div",{className:"mt-4 sm:mt-6 p-3 sm:p-4 bg-red-500/10 border border-red-500/20 rounded-xl sm:rounded-2xl text-red-400 text-center text-[10px] sm:text-xs font-bold animate-shake",children:J}),e.jsxs("div",{className:"mt-8 sm:mt-10 pt-6 sm:pt-8 border-t border-white/5 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex gap-3 sm:gap-4 h-12 sm:h-16",children:[T>1&&e.jsxs("button",{type:"button",onClick:De,className:"flex-1 px-4 sm:px-8 bg-gray-800 border border-gray-700 text-gray-300 rounded-2xl font-black uppercase text-[10px] sm:text-[12px] tracking-[0.15em] transition-all hover:bg-gray-700 flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M15 19l-7-7 7-7"})}),"ááŸ’ášá¡á”áŸ‹"]}),T<fe.length?e.jsxs("button",{type:"button",onClick:be,className:"relative flex-[2] bg-blue-600 hover:bg-blue-700 text-white rounded-2xl font-black uppercase text-[12px] sm:text-[14px] tracking-[0.2em] shadow-2xl active:scale-95 transition-all flex items-center justify-center gap-3 group overflow-hidden btn-pulse",children:[e.jsx("div",{className:"absolute inset-0 btn-shimmer pointer-events-none"}),e.jsx("span",{className:"relative z-10",children:"á‡áŸ†á á¶á“á”á“áŸ’á‘á¶á”áŸ‹"}),e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 relative z-10 transform group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M9 5l7 7-7 7"})})]}):e.jsxs("button",{type:"button",onClick:Pe,className:"relative flex-[2] bg-emerald-600 hover:bg-emerald-700 text-white rounded-2xl font-black uppercase text-[12px] sm:text-[14px] tracking-[0.2em] shadow-2xl active:scale-95 transition-all flex items-center justify-center gap-3 overflow-hidden",disabled:oe,children:[e.jsx("div",{className:"absolute inset-0 btn-shimmer pointer-events-none"}),oe?e.jsx(ge,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"relative z-10",children:"á”á‰áŸ’á‡á¼á“á€á˜áŸ’á˜áŸ‰á„áŸ‹á¥á¡á¼áœá“áŸáŸ‡"}),e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 relative z-10 animate-bounce-x",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M5 13l4 4L19 7"})})]})]})]}),e.jsx("button",{onClick:v,className:"md:hidden w-full py-4 bg-gray-800/40 text-gray-500 hover:text-red-400 font-black rounded-2xl uppercase text-[10px] tracking-widest transition-all active:scale-95 border border-white/5",children:"á”áŸ„áŸ‡á”á„áŸ‹á€á¶ášá”á‰áŸ’á…á¼á›"})]})]}),e.jsx("style",{children:".animate-bounce-x { animation: bounce-x 1s infinite ease-in-out; } @keyframes bounce-x { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(5px); } }"})]})},he=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Qe=({orders:b,onBack:M,team:P,onNavigate:n,initialFilters:r,onFilterChange:_})=>{const{appData:L,previewImage:T}=a.useContext(we),[R,y]=a.useState(!0),[z,$]=a.useState(!1),[Y,Z]=a.useState(!0),[t,C]=a.useState(!0),[oe,ie]=a.useState(!1),[J,G]=a.useState({key:"revenue",direction:"desc"}),[ee,re]=a.useState([]),[g,A]=a.useState(!1),N=async()=>{const l="user_sales_report_full_data",x=Se.get(l);if(x)re(x);else{A(!0);try{const v=await(await fetch(`${ye}/api/admin/all-orders`)).json();if(v.status==="success"){const O=(Array.isArray(v.data)?v.data.filter(F=>F!==null):[]).map(F=>{let B=[];try{F["Products (JSON)"]&&(B=JSON.parse(F["Products (JSON)"]))}catch{}return{...F,Products:B}});re(O),Se.set(l,O,3e5)}}catch(u){console.error("Failed to fetch report data",u)}finally{A(!1)}}};a.useEffect(()=>{N()},[]);const te=l=>{G(m=>({key:l,direction:m.key===l&&m.direction==="desc"?"asc":"desc"}))},X=l=>{const m={...r,datePreset:l};_(m),N()},q=(l,m)=>{const x={...r,[l]:m};_(x)},ce=(l,m)=>{if(n){const x={team:P};x.datePreset=r.datePreset,r.datePreset==="custom"&&(x.customStart=r.customStart,x.customEnd=r.customEnd),l==="page"&&(x.page=m),n(x)}},V=(l,m)=>{if(n){const x=new Date,u=x.getFullYear();let v=r.datePreset==="last_year"?u-1:u;if(r.datePreset==="custom"&&r.customStart){const d=new Date(r.customStart).getFullYear();isNaN(d)||(v=d)}const I=new Date(v,m,1),O=new Date(v,m+1,0,23,59,59);let F=null,B=null;switch(r.datePreset){case"today":F=new Date(x.getFullYear(),x.getMonth(),x.getDate()),B=new Date(x.getFullYear(),x.getMonth(),x.getDate(),23,59,59);break;case"yesterday":const d=new Date(x);d.setDate(d.getDate()-1),F=new Date(d.getFullYear(),d.getMonth(),d.getDate()),B=new Date(d.getFullYear(),d.getMonth(),d.getDate(),23,59,59);break;case"this_week":const h=x.getDay(),S=new Date(x);S.setDate(x.getDate()-(h===0?6:h-1));const E=new Date(S);E.setDate(S.getDate()+6),F=new Date(S.setHours(0,0,0,0)),B=new Date(E.setHours(23,59,59,999));break;case"this_month":F=new Date(u,x.getMonth(),1),B=new Date(u,x.getMonth()+1,0,23,59,59);break;case"custom":r.customStart&&(F=new Date(r.customStart+"T00:00:00")),r.customEnd&&(B=new Date(r.customEnd+"T23:59:59"));break;default:F=null,B=null}let U=I,le=O;F&&F>I&&(U=F),B&&B<O&&(le=B),U>le&&(U=I,le=O);const pe=d=>{const h=d.getFullYear(),S=String(d.getMonth()+1).padStart(2,"0"),E=String(d.getDate()).padStart(2,"0");return`${h}-${S}-${E}`};n({team:P,page:l,datePreset:"custom",customStart:pe(U),customEnd:pe(le),isMonthlyDrilldown:!0})}},ne=a.useMemo(()=>{const l=ee.length>0?ee:b,m=new Date,x=new Date(m.getFullYear(),m.getMonth(),m.getDate());let u=null,v=null;switch(r.datePreset){case"today":u=x,v=new Date(x),v.setHours(23,59,59,999);break;case"yesterday":u=new Date(x),u.setDate(x.getDate()-1),v=new Date(x),v.setMilliseconds(-1);break;case"this_week":const I=m.getDay();u=new Date(x),u.setDate(x.getDate()-(I===0?6:I-1)),v=new Date(u),v.setDate(u.getDate()+6),v.setHours(23,59,59,999);break;case"this_month":u=new Date(m.getFullYear(),m.getMonth(),1),v=new Date(m.getFullYear(),m.getMonth()+1,0,23,59,59,999);break;case"last_month":u=new Date(m.getFullYear(),m.getMonth()-1,1),v=new Date(m.getFullYear(),m.getMonth(),0,23,59,59,999);break;case"this_year":u=new Date(m.getFullYear(),0,1),v=new Date(m.getFullYear(),11,31,23,59,59,999);break;case"last_year":u=new Date(m.getFullYear()-1,0,1),v=new Date(m.getFullYear()-1,11,31,23,59,59,999);break;case"all":u=null,v=null;break;case"custom":u=new Date(r.customStart+"T00:00:00"),v=new Date(r.customEnd+"T23:59:59");break}return l.filter(I=>{if((I.Team||"").trim().toLowerCase()!==P.trim().toLowerCase())return!1;if(!u)return!0;const O=new Date(I.Timestamp);return v?O>=u&&O<=v:O>=u})},[ee,b,P,r]),W=a.useMemo(()=>{const l={};L.pages&&L.pages.filter(u=>(u.Team||"").trim()===P).forEach(u=>{l[u.PageName]={pageName:u.PageName,teamName:P,logoUrl:u.PageLogoURL||"",revenue:0,profit:0,orderCount:0},he.forEach(v=>{l[u.PageName][`rev_${v}`]=0,l[u.PageName][`prof_${v}`]=0})}),ne.forEach(x=>{var F;const u=x.Page||"Unknown";if(!l[u]){const B=(F=L.pages)==null?void 0:F.find(U=>U.PageName===u);l[u]={pageName:u,teamName:P,logoUrl:(B==null?void 0:B.PageLogoURL)||"",revenue:0,profit:0,orderCount:0},he.forEach(U=>{l[u][`rev_${U}`]=0,l[u][`prof_${U}`]=0})}const v=Number(x["Grand Total"])||0,I=(Number(x["Total Product Cost ($)"])||0)+(Number(x["Internal Cost"])||0),O=v-I;if(l[u].revenue+=v,l[u].profit+=O,l[u].orderCount+=1,x.Timestamp){const B=new Date(x.Timestamp),U=he[B.getMonth()];l[u][`rev_${U}`]+=v,l[u][`prof_${U}`]+=O}});let m=Object.values(l);return t||(m=m.filter(x=>x.revenue>0)),m.sort((x,u)=>{const v=J.direction==="asc"?1:-1,I=x[J.key],O=u[J.key];return typeof I=="string"?I.localeCompare(O)*v:(I-O)*v})},[ne,J,L.pages,t,P]),K=a.useMemo(()=>{const l={revenue:0,profit:0,pagesCount:W.length,orders:0};return he.forEach(m=>{l[`rev_${m}`]=0,l[`prof_${m}`]=0}),W.forEach(m=>{l.revenue+=m.revenue,l.profit+=m.profit,l.orders+=m.orderCount,he.forEach(x=>{l[`rev_${x}`]+=m[`rev_${x}`],l[`prof_${x}`]+=m[`prof_${x}`]})}),l},[W]),me=()=>{ie(!0),setTimeout(()=>{try{const l=new Ve({orientation:"landscape"}),m=l.internal.pageSize.width;l.setFontSize(18),l.text(`Sales Report - Team: ${P}`,m/2,15,{align:"center"}),l.setFontSize(12),l.text(`Period: ${r.datePreset.toUpperCase()}`,m/2,22,{align:"center"}),l.autoTable({startY:30,head:[["Metric","Value"]],body:[["Total Revenue",`$${K.revenue.toLocaleString()}`],["Total Orders",K.orders]],theme:"grid",headStyles:{fillColor:[41,128,185]}}),l.save(`Page_Report_${P}_${Date.now()}.pdf`)}catch(l){console.error(l),alert("Export failed")}finally{ie(!1)}},100)},xe=a.useMemo(()=>[...W].sort((l,m)=>m.revenue-l.revenue).slice(0,5).map(l=>({label:l.pageName,value:l.revenue,imageUrl:l.logoUrl})),[W]);return g&&ee.length===0?e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(ge,{size:"lg"})}):e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:M,className:"bg-gray-800 p-3 rounded-2xl border border-gray-700 hover:bg-gray-700 active:scale-95 transition-all",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-black text-white uppercase tracking-tighter italic",children:"Page Report"}),e.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:P})]})]}),e.jsxs("div",{className:"flex overflow-x-auto gap-2 p-1 bg-gray-900/50 rounded-2xl border border-white/5 max-w-full no-scrollbar",children:[["today","yesterday","this_week","this_month","last_month","this_year","last_year","all"].map(l=>e.jsx("button",{onClick:()=>X(l),className:`px-4 py-2 text-[10px] font-black uppercase rounded-xl whitespace-nowrap transition-all ${r.datePreset===l?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:bg-white/5"}`,children:l.replace("_"," ")},l)),e.jsx("button",{onClick:()=>X("custom"),className:`px-4 py-2 text-[10px] font-black uppercase rounded-xl whitespace-nowrap transition-all ${r.datePreset==="custom"?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:bg-white/5"}`,children:"Custom"})]})]}),r.datePreset==="custom"&&e.jsxs("div",{className:"flex items-center gap-4 bg-gray-800/30 p-4 rounded-2xl border border-white/5 animate-fade-in-down",children:[e.jsx("input",{type:"date",value:r.customStart,onChange:l=>q("customStart",l.target.value),className:"bg-gray-900 border border-gray-700 rounded-xl px-4 py-2 text-white text-xs font-bold"}),e.jsx("span",{className:"text-gray-500 font-bold",children:"-"}),e.jsx("input",{type:"date",value:r.customEnd,onChange:l=>q("customEnd",l.target.value),className:"bg-gray-900 border border-gray-700 rounded-xl px-4 py-2 text-white text-xs font-bold"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(je,{label:"á…áŸ†áá¼á›áŸášá»á” (Revenue)",value:`$${K.revenue.toLocaleString()}`,icon:"ğŸ’°",colorClass:"from-blue-600 to-indigo-500"}),e.jsx(je,{label:"á€á¶ášá€á˜áŸ’á˜á„áŸ‹ (Orders)",value:K.orders,icon:"ğŸ“¦",colorClass:"from-purple-600 to-pink-500"}),e.jsx(je,{label:"Page áŸá€á˜áŸ’á˜",value:K.pagesCount,icon:"ğŸ“„",colorClass:"from-orange-500 to-yellow-500"})]}),e.jsx(Re,{data:W,grandTotals:K,sortConfig:J,onToggleSort:te,showAllPages:t,setShowAllPages:C,onExportPDF:me,isExporting:oe,onPreviewImage:T,onNavigate:ce,onMonthClick:V}),e.jsx(Be,{data:W,grandTotals:K,onPreviewImage:T,onNavigate:ce,onMonthClick:V}),e.jsx(Ae,{data:W,onPreviewImage:T,onNavigate:ce,onMonthClick:V}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 pb-10",children:[e.jsx("div",{className:"lg:col-span-8",children:e.jsx("div",{className:"page-card !p-4 bg-gray-800/40 border-gray-700/50",children:e.jsx(ze,{data:xe,title:"Page áŠáŸ‚á›á˜á¶á“á…áŸ†áá¼á›ááŸ’á–áŸáŸ‹á”áŸ†á•á»á (Top 5 Pages Revenue)"})})}),e.jsxs("div",{className:"lg:col-span-4 flex flex-col justify-center page-card !p-5 bg-gray-800/30 border-gray-700/50",children:[e.jsxs("h3",{className:"text-sm font-black text-gray-400 uppercase tracking-widest flex items-center gap-2 mb-6",children:[e.jsx("span",{className:"w-1.5 h-4 bg-indigo-500 rounded-full"}),"áŸá„áŸ’ááŸá”"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between border-b border-white/5 pb-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"á…áŸ†á“á½á“ Page áŸá€á˜áŸ’á˜:"}),e.jsx("span",{className:"text-white font-black text-sm",children:K.pagesCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"á˜á’áŸ’á™á˜á—á¶á‚/Page:"}),e.jsxs("span",{className:"text-blue-400 font-black text-sm",children:["$",(K.revenue/(K.pagesCount||1)).toLocaleString(void 0,{maximumFractionDigits:0})]})]})]})]})]})]})},de={FILTER:1,VERIFY:2,PREVIEW:3},Xe=({isOpen:b,onClose:M,orders:P,appData:n})=>{var ee,re;const[r,_]=a.useState(de.FILTER),[L,T]=a.useState(new Date().toISOString().split("T")[0]),[R,y]=a.useState(""),[z,$]=a.useState("ACC Delivery Agent"),[Y,Z]=a.useState(new Set);a.useEffect(()=>{b&&(_(de.FILTER),Z(new Set),n.stores&&n.stores.length===1&&y(n.stores[0].StoreName))},[b,n.stores]);const t=g=>{if(!g)return"";const A=g.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(A){const N=new Date(parseInt(A[1]),parseInt(A[2])-1,parseInt(A[3]),parseInt(A[4]),parseInt(A[5]));if(!isNaN(N.getTime()))return N.toISOString().split("T")[0]}try{const N=new Date(g);return isNaN(N.getTime())?"":N.toISOString().split("T")[0]}catch{return""}},C=a.useMemo(()=>P.filter(g=>{if(!g.Timestamp)return!1;const A=t(g.Timestamp);if(!A)return!1;const N=A===L,te=R?g["Fulfillment Store"]===R:!1,X=(g["Internal Shipping Method"]||"").toLowerCase()===z.toLowerCase();return N&&te&&X}),[P,L,R,z]),oe=g=>{Z(A=>{const N=new Set(A);return N.has(g)?N.delete(g):N.add(g),N})},ie=()=>{Y.size===C.length?Z(new Set):Z(new Set(C.map(g=>g["Order ID"])))},J=a.useMemo(()=>{if(!L)return"";const g=new Date(L);let N=`ğŸ“¦ **á”á‰áŸ’á‡á¸áŠá¹á€á‡á‰áŸ’á‡á¼á“á”áŸ’ášá…á¶áŸ†ááŸ’á„áŸƒ** ğŸ“… ${`${String(g.getDate()).padStart(2,"0")}/${String(g.getMonth()+1).padStart(2,"0")}/${g.getFullYear()}`}
`;N+=`ğŸšš á€áŸ’ášá»á˜á áŸŠá»á“: ${z}
`,N+=`ğŸ­ áƒáŸ’á›á¶áŸ†á„: ${R}
`,N+=`--------------------------------

`;let te=0,X=0,q=0;C.forEach((V,ne)=>{const W=Y.has(V["Order ID"]),K=W?"âœ…":"â³ (áŠá¹á€á˜á·á“á‡áŸ„á‚á‡áŸá™)",me=V.Location||"",xe=V["Address Details"]||"";let l="";me==="ášá¶á‡á’á¶á“á¸á—áŸ’á“áŸ†á–áŸá‰"&&xe?l=xe:l=[me,xe].filter(Boolean).join(", ");let m=l;m.length>25&&(m=m.substring(0,25)+"...");const x=V["Customer Phone"]||"",u=V["Order ID"]||"",v=V["Grand Total"]||0,I=V["Payment Status"]==="Paid",O=I?"Paid":"COD",F=I?"ğŸŸ¢":"ğŸ”´";N+=`${ne+1}. ğŸ“ ${x} | \`${u}\`
`,N+=`   ğŸ“ ${m}
`,N+=`   (ğŸ’µ $${v.toFixed(2)}) - ${F} **${O}** ${K}

`,W?I?te+=v:X+=v:q+=v}),C.length===0&&(N+=`    (á˜á·á“á˜á¶á“á‘á·á“áŸ’á“á“áŸá™áŸá˜áŸ’ášá¶á”áŸ‹ááŸ’á„áŸƒá“áŸáŸ‡)
`);const ce=te+X;return N+=`--------------------------------
`,N+=`ğŸ“¦ **á…áŸ†á“á½á“á€á‰áŸ’á…á”áŸ‹áŸášá»á”:** ${C.length} á€á‰áŸ’á…á”áŸ‹
`,N+=`ğŸ’° **áŸášá»á”á‘á¹á€á”áŸ’ášá¶á€áŸ‹ (áŠá¹á€á‡áŸ„á‚á‡áŸá™): $${ce.toFixed(2)}**
`,ce>0&&(N+=`   â”œâ”€ ğŸŸ¢ Paid: $${te.toFixed(2)}
`,N+=`   â””â”€ ğŸ”´ **COD: $${X.toFixed(2)}** ğŸ’¸
`),q>0&&(N+=`âŒ áŸášá»á”á‘á¹á€á”áŸ’ášá¶á€áŸ‹ (áŠá¹á€á˜á·á“á‡áŸ„á‚á‡áŸá™): $${q.toFixed(2)}
`),N},[C,Y,L,R,z]),G=async()=>{try{await navigator.clipboard.writeText(J),alert("á¢ááŸ’áá”á‘ááŸ’ášá¼áœá”á¶á“á…á˜áŸ’á›á„ (Copied)!")}catch(g){console.error(g),alert("á”ášá¶á‡áŸá™á€áŸ’á“á»á„á€á¶ášá…á˜áŸ’á›á„áŸ”")}};return b?e.jsx(Ne,{isOpen:b,onClose:M,maxWidth:"max-w-3xl",children:e.jsxs("div",{className:"bg-[#0f172a] rounded-[2rem] sm:rounded-[2.5rem] overflow-hidden flex flex-col h-[85vh] sm:h-auto sm:max-h-[90vh] border border-white/10 shadow-2xl",children:[e.jsxs("div",{className:"p-4 sm:p-6 bg-gray-900/90 backdrop-blur-md border-b border-white/10 flex justify-between items-center sticky top-0 z-20",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-black text-white uppercase tracking-tighter flex items-center gap-3",children:[e.jsx("span",{className:"bg-blue-600 w-8 h-8 rounded-lg flex items-center justify-center text-sm shadow-lg shadow-blue-600/20",children:r}),r===de.FILTER&&"á€áŸ†áááŸ‹á›á€áŸ’ááááŸ’áŒ",r===de.VERIFY&&"á•áŸ’á‘áŸ€á„á•áŸ’á‘á¶ááŸ‹",r===de.PREVIEW&&"á”á„áŸ’á€á¾áá¢ááŸ’áá”á‘"]}),e.jsx("button",{onClick:M,className:"w-9 h-9 rounded-full bg-gray-800 text-gray-400 hover:text-white flex items-center justify-center transition-all",children:"Ã—"})]}),e.jsxs("div",{className:"p-4 sm:p-6 overflow-y-auto custom-scrollbar flex-grow bg-gradient-to-b from-[#0f172a] to-[#1e293b]",children:[r===de.FILTER&&e.jsxs("div",{className:"space-y-6 sm:space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-blue-400 uppercase tracking-widest block ml-1",children:"á€á¶á›á”ášá·á…áŸ’á†áŸá‘"}),e.jsx("input",{type:"date",value:L,onChange:g=>T(g.target.value),className:"form-input bg-gray-900 border-gray-700 rounded-2xl text-white font-bold w-full py-4 px-5 focus:border-blue-500 shadow-inner"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-xs font-bold text-orange-400 uppercase tracking-widest block ml-1",children:["áƒáŸ’á›á¶áŸ†á„á”á‰áŸ’á…áŸá‰á‘áŸ†á“á·á‰ (Store) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:(ee=n.stores)==null?void 0:ee.map(g=>e.jsxs("button",{onClick:()=>y(g.StoreName),className:`p-4 rounded-2xl border-2 font-bold text-sm transition-all shadow-lg flex flex-col items-center gap-2 ${R===g.StoreName?"border-orange-500 bg-orange-500/10 text-white shadow-orange-500/20":"border-gray-700 bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-2xl",children:"ğŸ­"}),g.StoreName]},g.StoreName))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-purple-400 uppercase tracking-widest block ml-1",children:"áŸáŸáœá¶áŠá¹á€ (Shipping Method)"}),e.jsx("select",{value:z,onChange:g=>$(g.target.value),className:"form-select bg-gray-900 border-gray-700 rounded-2xl text-white font-bold w-full py-4 px-5 focus:border-purple-500 shadow-inner",children:(re=n.shippingMethods)==null?void 0:re.map(g=>e.jsx("option",{value:g.MethodName,children:g.MethodName},g.MethodName))})]})]}),r===de.VERIFY&&e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 bg-black/20 p-3 rounded-2xl border border-white/5",children:[e.jsxs("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider",children:["Total: ",e.jsx("strong",{className:"text-white text-sm",children:C.length})," Orders"]}),e.jsx("button",{onClick:ie,className:"px-4 py-2 bg-blue-600/10 text-blue-400 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-blue-600 hover:text-white transition-all",children:"Toggle All"})]}),C.length===0?e.jsx("div",{className:"text-center py-20 border-2 border-dashed border-gray-700 rounded-[2rem] bg-gray-800/30",children:e.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-widest",children:"No matching orders found"})}):e.jsx("div",{className:"space-y-3",children:C.map((g,A)=>{const N=Y.has(g["Order ID"]);return e.jsxs("div",{onClick:()=>oe(g["Order ID"]),className:`flex items-center gap-4 p-4 rounded-2xl border cursor-pointer transition-all group ${N?"bg-emerald-900/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-gray-800 border-transparent hover:bg-gray-700"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center border-2 transition-all flex-shrink-0 ${N?"bg-emerald-500 border-emerald-500 text-white scale-110":"border-gray-600 bg-gray-900 text-transparent"}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-sm font-black text-white truncate",children:g["Customer Name"]}),e.jsx("span",{className:`text-[10px] font-black uppercase tracking-wider px-2 py-0.5 rounded ${g["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:g["Payment Status"]})]}),e.jsx("p",{className:"text-xs font-mono text-gray-400 font-bold mt-0.5",children:g["Customer Phone"]}),e.jsxs("p",{className:"text-[10px] text-gray-500 mt-1 truncate",children:[g.Location,", ",g["Address Details"]]})]}),e.jsx("div",{className:"text-right pl-2 border-l border-white/5",children:e.jsxs("p",{className:"text-base font-black text-blue-400",children:["$",g["Grand Total"]]})})]},g["Order ID"])})})]}),r===de.PREVIEW&&e.jsx("div",{className:"animate-fade-in h-full flex flex-col",children:e.jsx("div",{className:"bg-black/40 p-5 rounded-2xl border border-gray-700/50 font-mono text-xs sm:text-sm text-gray-300 whitespace-pre-wrap leading-relaxed shadow-inner flex-grow overflow-auto",children:J})})]}),e.jsxs("div",{className:"p-4 sm:p-6 border-t border-white/5 bg-gray-900 sticky bottom-0 z-20 flex justify-between gap-4",children:[r>1?e.jsx("button",{onClick:()=>_(r-1),className:"px-6 sm:px-8 py-3.5 sm:py-4 rounded-2xl bg-gray-800 text-gray-400 font-black uppercase tracking-widest text-xs hover:bg-gray-700 hover:text-white transition-all active:scale-95",children:"Back"}):e.jsx("div",{}),r<de.PREVIEW?e.jsxs("button",{onClick:()=>{if(r===de.FILTER&&!R){alert("áŸá¼á˜á‡áŸ’ášá¾áŸášá¾áŸáƒáŸ’á›á¶áŸ†á„ (Store) á‡á¶á˜á»á“áŸá·á“!");return}_(r+1)},className:"px-8 sm:px-10 py-3.5 sm:py-4 rounded-2xl bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-black uppercase tracking-widest text-xs hover:shadow-lg hover:shadow-blue-600/30 transition-all active:scale-95 flex items-center gap-2",children:["Next ",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M9 5l7 7-7 7"})})]}):e.jsxs("button",{onClick:G,className:"px-8 sm:px-10 py-3.5 sm:py-4 rounded-2xl bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-black uppercase tracking-widest text-xs hover:shadow-lg hover:shadow-emerald-600/30 transition-all active:scale-95 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})]})]})}):null},Ze=({team:b,onAdd:M})=>{const{currentUser:P,refreshData:n,appData:r}=a.useContext(we),[_,L]=a.useState([]),[T,R]=a.useState([]),[y,z]=a.useState(null),[$,Y]=a.useState([]),[Z,t]=a.useState(null),[C,oe]=a.useState(!0),[ie,J]=a.useState(!1),[G,ee]=a.useState(""),[re,g]=a.useState(!1),[A,N]=a.useState(!1),[te,X]=a.useState(!1),[q,ce]=a.useState("today"),[V,ne]=a.useState(new Date().toISOString().split("T")[0]),[W,K]=a.useState(new Date().toISOString().split("T")[0]),[me,xe]=a.useState({datePreset:"this_month",customStart:new Date().toISOString().split("T")[0],customEnd:new Date().toISOString().split("T")[0]}),l=a.useRef([]),m=a.useRef(!1),x=!!(P!=null&&P.IsSystemAdmin),u=a.useMemo(()=>new Set(["index","orderId","customerName","productInfo","location","pageInfo","total","shippingService","status","date","print",...x?["actions"]:[]]),[x]),v=(d,h,S)=>{const E=new Date,Q=new Date(E.getFullYear(),E.getMonth(),E.getDate());let D=null,k=new Date;switch(d){case"today":D=Q,k=new Date(Q),k.setHours(23,59,59,999);break;case"yesterday":D=new Date(Q),D.setDate(Q.getDate()-1),k=new Date(Q),k.setMilliseconds(-1);break;case"this_week":const H=E.getDay();D=new Date(Q),D.setDate(Q.getDate()-(H===0?6:H-1)),k=new Date(D),k.setDate(D.getDate()+6),k.setHours(23,59,59,999);break;case"this_month":D=new Date(E.getFullYear(),E.getMonth(),1),k=new Date(E.getFullYear(),E.getMonth()+1,0,23,59,59,999);break;case"last_month":D=new Date(E.getFullYear(),E.getMonth()-1,1),k=new Date(E.getFullYear(),E.getMonth(),0,23,59,59,999);break;case"this_year":D=new Date(E.getFullYear(),0,1),k=new Date(E.getFullYear(),11,31,23,59,59,999);break;case"last_year":D=new Date(E.getFullYear()-1,0,1),k=new Date(E.getFullYear()-1,11,31,23,59,59,999);break;case"custom":h&&(D=new Date(h+"T00:00:00")),S&&(k=new Date(S+"T23:59:59"));break}return{start:D,end:k}},I=d=>{if(!d)return new Date;const h=d.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(h)return new Date(parseInt(h[1]),parseInt(h[2])-1,parseInt(h[3]),parseInt(h[4]),parseInt(h[5]));const S=new Date(d);return isNaN(S.getTime())?new Date:S};a.useEffect(()=>{(async()=>{oe(!0);try{const S=await(await fetch(`${ye}/api/admin/all-orders`)).json();if(S.status==="success"){const E=Array.isArray(S.data)?S.data.filter(Q=>Q!==null):[];l.current=E,m.current=!0,O("today")}}catch(h){console.error(h)}finally{oe(!1)}})()},[]);const O=d=>{m.current&&(J(!0),setTimeout(()=>{const{start:h,end:S}=v(d,V,W),Q=l.current.filter(k=>{if(k["Order ID"]==="Opening_Balance"||k["Order ID"]==="Opening Balance"||!k.Timestamp)return!1;const H=I(k.Timestamp);return!(isNaN(H.getTime())||h&&H<h||S&&H>S)}).map(k=>{let H=[];try{k["Products (JSON)"]&&(H=JSON.parse(k["Products (JSON)"]))}catch{}return{...k,Products:H,IsVerified:String(k.IsVerified).toUpperCase()==="TRUE",FulfillmentStatus:k.FulfillmentStatus}});R(Q);const D=Q.filter(k=>(k.Team||"").trim()===(b||"").trim());L(D.sort((k,H)=>{const ue=I(k.Timestamp),be=I(H.Timestamp);return(isNaN(be.getTime())?0:be.getTime())-(isNaN(ue.getTime())?0:ue.getTime())})),J(!1)},10))};a.useEffect(()=>{m.current&&O(q)},[q,V,W,b]),a.useEffect(()=>{y&&m.current&&(J(!0),setTimeout(()=>{const d=l.current;let h=null,S=null;if(y.isMonthlyDrilldown)y.customStart&&(h=new Date(y.customStart+"T00:00:00")),y.customEnd&&(S=new Date(y.customEnd+"T23:59:59"));else if(y.datePreset==="custom")y.customStart&&(h=new Date(y.customStart+"T00:00:00")),y.customEnd&&(S=new Date(y.customEnd+"T23:59:59"));else if(y.datePreset){const D=v(y.datePreset);h=D.start,S=D.end}const Q=d.filter(D=>{if(D["Order ID"]==="Opening_Balance"||D["Order ID"]==="Opening Balance")return!1;if(h||S){if(!D.Timestamp)return!1;const k=I(D.Timestamp);if(isNaN(k.getTime())||h&&k<h||S&&k>S)return!1}return!(y.team&&(D.Team||"").trim()!==y.team||y.page&&D.Page!==y.page||y.shipping&&D["Internal Shipping Method"]!==y.shipping||y.driver&&D["Internal Shipping Details"]!==y.driver||y.fulfillmentStore&&D["Fulfillment Store"]!==y.fulfillmentStore)}).map(D=>{let k=[];try{D["Products (JSON)"]&&(k=JSON.parse(D["Products (JSON)"]))}catch{}return{...D,Products:k,IsVerified:String(D.IsVerified).toUpperCase()==="TRUE",FulfillmentStatus:D.FulfillmentStatus}});Y(Q.sort((D,k)=>{const H=I(D.Timestamp),ue=I(k.Timestamp);return(isNaN(ue.getTime())?0:ue.getTime())-(isNaN(H.getTime())?0:H.getTime())})),J(!1)},10))},[y]);const F=a.useMemo(()=>(y?$:_).filter(h=>{if(G.trim()){const S=G.toLowerCase();return h["Order ID"].toLowerCase().includes(S)||(h["Customer Name"]||"").toLowerCase().includes(S)||(h["Customer Phone"]||"").includes(S)}return!0}),[_,$,y,G]),B=a.useMemo(()=>F.reduce((d,h)=>d+(Number(h["Grand Total"])||0),0),[F]),U=a.useMemo(()=>{const d={};return T.forEach(h=>{const S=(h.Team||"Unassigned").trim();d[S]=(d[S]||0)+(Number(h["Grand Total"])||0)}),Object.entries(d).map(([h,S])=>({name:h,revenue:S})).sort((h,S)=>S.revenue-h.revenue).slice(0,3)},[T]),le=a.useMemo(()=>{switch(q){case"today":return"ááŸ’á„áŸƒá“áŸáŸ‡";case"yesterday":return"á˜áŸ’áŸá·á›á˜á·á‰";case"this_week":return"áŸá”áŸ’áá¶á áŸá“áŸáŸ‡";case"this_month":return"ááŸ‚á“áŸáŸ‡";case"custom":return"áá¶á˜á€áŸ†áááŸ‹";default:return""}},[q]),pe=()=>{t(null),oe(!0),n().then(()=>{window.location.reload()})};return C?e.jsxs("div",{className:"flex flex-col justify-center items-center h-96 gap-4",children:[e.jsx(ge,{size:"lg"}),e.jsx("p",{className:"text-[10px] font-black text-blue-500 uppercase tracking-[0.4em] animate-pulse",children:"Initializing Data Stream..."})]}):Z?e.jsx("div",{className:"animate-fade-in p-2",children:e.jsx(We,{order:Z,onSaveSuccess:pe,onCancel:()=>t(null)})}):y?e.jsxs("div",{className:"animate-fade-in p-2 min-h-screen flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 bg-gray-900/50 p-4 rounded-3xl border border-white/5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-black text-white uppercase tracking-tight italic",children:"á•áŸ’á‘á¶áŸ†á„ášá”á¶á™á€á¶ášááŸá”áŸ’ášáá·á”ááŸ’áá·á€á¶ášááŸ"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/20 px-2 py-0.5 rounded border border-blue-500/20",children:y.page||y.shipping||"Filtered View"}),y.isMonthlyDrilldown&&e.jsxs("span",{className:"text-[10px] font-bold text-emerald-400 bg-emerald-900/20 px-2 py-0.5 rounded border border-emerald-500/20",children:[y.customStart," - ",y.customEnd]}),e.jsxs("span",{className:"text-[10px] text-gray-500 font-bold",children:[$.length," entries"]})]})]}),e.jsx("button",{onClick:()=>z(null),className:"px-6 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-xl text-xs font-black uppercase tracking-widest border border-white/10 transition-all active:scale-95",children:"Back"})]}),ie?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(ge,{size:"md"})}):e.jsx(Ce,{orders:F,showActions:x,visibleColumns:u,onEdit:x?t:void 0})]}):re?e.jsx("div",{className:"animate-fade-in p-2",children:e.jsx(Qe,{orders:_,onBack:()=>g(!1),team:b,onNavigate:d=>z(d),initialFilters:me,onFilterChange:xe})}):A?e.jsx("div",{className:"animate-fade-in p-2 min-h-screen",children:e.jsx(Ue,{orders:_,appData:r,dateFilter:q,startDate:V,endDate:W,onNavigate:d=>{z(d),N(!1)},onBack:()=>N(!1)})}):e.jsxs("div",{className:"space-y-6 flex flex-col min-h-screen",children:[e.jsx("style",{children:`
                .hide-scrollbar::-webkit-scrollbar { display: none; }
                .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-5 bg-blue-500 rounded-full"}),e.jsx("h3",{className:"text-xs font-black text-white uppercase tracking-widest",children:"áá¶ášá¶á„á€áŸ’ášá»á˜á†áŸ’á“á¾á˜"})]}),e.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase",children:le})]}),e.jsx("div",{className:"flex overflow-x-auto gap-4 px-2 pb-4 hide-scrollbar snap-x",children:U.length===0?e.jsxs("div",{className:"text-gray-500 text-xs p-4 italic",children:["á˜á·á“á˜á¶á“á‘á·á“áŸ’á“á“áŸá™áŸá˜áŸ’ášá¶á”áŸ‹ ",le]}):U.map((d,h)=>e.jsxs("div",{className:"flex-shrink-0 w-[240px] sm:w-[300px] snap-center bg-gray-900/60 backdrop-blur-xl border border-white/5 p-5 rounded-[2rem] flex items-center gap-4 relative overflow-hidden",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-2xl border ${h===0?"bg-yellow-500/20 text-yellow-500 border-yellow-500/30":h===1?"bg-gray-400/20 text-gray-300 border-gray-400/30":"bg-orange-600/20 text-orange-500 border-orange-600/30"}`,children:h===0?"ğŸ¥‡":h===1?"ğŸ¥ˆ":"ğŸ¥‰"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"text-sm font-black text-white truncate uppercase tracking-tighter",children:d.name}),e.jsxs("p",{className:"text-lg font-black text-blue-400",children:["$",d.revenue.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),e.jsx("div",{className:`absolute -right-4 -bottom-4 w-20 h-20 rounded-full blur-3xl opacity-10 ${h===0?"bg-yellow-500":h===1?"bg-gray-400":"bg-orange-600"}`})]},d.name))})]}),e.jsxs("div",{className:"bg-gray-900/60 backdrop-blur-3xl p-4 rounded-[2rem] border border-white/5 space-y-4 shadow-2xl mx-1",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex items-center gap-1 overflow-x-auto hide-scrollbar bg-black/40 p-1 rounded-xl border border-white/5",children:["today","this_week","this_month","custom"].map(d=>e.jsx("button",{onClick:()=>ce(d),className:`flex-shrink-0 px-4 py-2 text-[10px] font-black uppercase rounded-lg transition-all ${q===d?"bg-blue-600 text-white shadow-lg shadow-blue-600/40":"text-gray-500"}`,children:d==="today"?"ááŸ’á„áŸƒá“áŸáŸ‡":d==="this_week"?"áŸá”áŸ’áá¶á áŸá“áŸáŸ‡":d==="this_month"?"ááŸ‚á“áŸáŸ‡":"á€áŸ†áááŸ‹"},d))}),e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest",children:"á”áŸ’ášáá·á”ááŸ’áá·á€á¶ášááŸ"}),e.jsxs("span",{className:"text-lg font-black text-white",children:[F.length," ",e.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"Orders"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-[9px] font-black text-blue-500 uppercase tracking-widest",children:"á‘á¹á€á”áŸ’ášá¶á€áŸ‹áŸášá»á”"}),e.jsxs("p",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-blue-200 to-blue-400",children:["$",B.toLocaleString(void 0,{minimumFractionDigits:0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>g(!0),className:"py-3 bg-indigo-600/10 border border-indigo-500/30 text-indigo-400 rounded-xl font-black uppercase text-[10px] tracking-widest hover:bg-indigo-600 hover:text-white transition-all flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Page Report"]}),e.jsxs("button",{onClick:()=>N(!0),className:"py-3 bg-orange-600/10 border border-orange-500/30 text-orange-400 rounded-xl font-black uppercase text-[10px] tracking-widest hover:bg-orange-600 hover:text-white transition-all flex items-center justify-center gap-2 active:scale-95",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h8a1 1 0 001-1z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 8h-2m2 4h-2m-2-4h.01M17 16h.01"})]}),"Shipping Cost"]}),e.jsxs("button",{onClick:()=>X(!0),className:"py-3 bg-emerald-600/10 border border-emerald-500/30 text-emerald-400 rounded-xl font-black uppercase text-[10px] tracking-widest hover:bg-emerald-600 hover:text-white transition-all flex items-center justify-center gap-2 active:scale-95 col-span-2 md:col-span-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"Delivery List"]})]})]}),q==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 animate-fade-in-down",children:[e.jsx("input",{type:"date",value:V,onChange:d=>ne(d.target.value),className:"bg-gray-800 border-none text-[10px] font-black text-white rounded-lg p-2"}),e.jsx("input",{type:"date",value:W,onChange:d=>K(d.target.value),className:"bg-gray-800 border-none text-[10px] font-black text-white rounded-lg p-2"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"áŸáŸ’áœáŸ‚á„ášá€áá¶á˜ ID, áˆáŸ’á˜áŸ„áŸ‡, á¬á‘á¼ášáŸáŸá–áŸ’á‘...",value:G,onChange:d=>ee(d.target.value),className:"w-full bg-black/40 border border-gray-800 rounded-xl py-3 pl-10 pr-4 text-xs font-bold text-white placeholder:text-gray-700 focus:border-blue-500/50 transition-all"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),e.jsx("div",{className:"px-1",children:ie?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(ge,{size:"md"})}):F.length===0?e.jsx("div",{className:"text-center py-20 bg-gray-800/10 rounded-[2rem] border-2 border-dashed border-gray-800/50",children:e.jsx("p",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest italic",children:"ášá€á˜á·á“áƒá¾á‰á‘á·á“áŸ’á“á“áŸá™"})}):e.jsx("div",{className:"animate-fade-in-up",children:e.jsx(Ce,{orders:F,showActions:x,visibleColumns:u,onEdit:x?t:void 0})})}),e.jsx("div",{className:"md:hidden fixed bottom-6 left-6 right-6 z-40",children:e.jsxs("div",{className:"bg-gray-900/95 backdrop-blur-3xl p-4 rounded-3xl shadow-2xl border border-white/10 flex justify-between items-center ring-1 ring-white/5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[8px] font-black text-blue-500 uppercase tracking-[0.2em] mb-0.5",children:"Session Revenue"}),e.jsxs("span",{className:"text-white font-black text-xl tracking-tighter",children:["$",B.toLocaleString()]})]}),e.jsx("button",{onClick:M,className:"bg-blue-600 hover:bg-blue-500 text-white p-4 rounded-2xl shadow-lg shadow-blue-600/40 active:scale-90 transition-all",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 4v16m8-8H4",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}),e.jsx("div",{className:"h-32 md:hidden"}),e.jsx(Xe,{isOpen:te,onClose:()=>X(!1),orders:T,appData:r,team:b})]})},at=({onBackToRoleSelect:b})=>{const{currentUser:M,setChatVisibility:P,setMobilePageTitle:n}=a.useContext(we),[r,_]=a.useState("list"),[L,T]=Te("team",""),R=a.useMemo(()=>((M==null?void 0:M.Team)||"").split(",").map(y=>y.trim()).filter(Boolean),[M]);return a.useEffect(()=>{P(r!=="create")},[r,P]),a.useEffect(()=>{R.length===1&&!L&&T(R[0])},[R,L,T]),a.useEffect(()=>(n(L?"MY ORDERS":null),()=>n(null)),[L,n]),R.length===0?e.jsxs("div",{className:"page-card text-center p-12 mt-20 max-w-lg mx-auto bg-gray-900/60 backdrop-blur-xl border border-white/5 rounded-[3rem]",children:[e.jsxs("h2",{className:"text-xl font-black text-white mb-4",children:["áŸá½áŸáŸ’áá¸, ",M==null?void 0:M.FullName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"á‚áá“á¸ášá”áŸáŸ‹á¢áŸ’á“á€á˜á·á“á‘á¶á“áŸ‹á˜á¶á“á€áŸ’ášá»á˜á€á¶ášá„á¶ášá“áŸ…á¡á¾á™á‘áŸáŸ”"}),e.jsx("button",{onClick:b,className:"btn btn-secondary mt-8 w-full rounded-2xl font-black",children:"ááŸ’ášá¡á”áŸ‹á€áŸ’ášáŸ„á™"})]}):L?r==="create"?e.jsx(Ke,{team:L,onSaveSuccess:()=>_("list"),onCancel:()=>_("list")}):e.jsxs("div",{className:"w-full max-w-full mx-auto p-2 sm:p-4 animate-fade-in min-h-screen relative overflow-x-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4 px-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl sm:text-4xl font-black text-white italic tracking-tighter leading-none",children:"MY ORDERS"}),e.jsx("div",{className:"h-6 w-px bg-white/10"}),e.jsx("span",{className:"text-blue-500 font-black text-xs uppercase tracking-widest",children:L})]}),e.jsx("div",{className:"md:hidden flex items-center gap-2",children:e.jsxs("span",{className:"text-[10px] bg-blue-900/30 text-blue-400 px-3 py-1 rounded-full border border-blue-500/20 font-black uppercase tracking-widest",children:["Team: ",L]})}),e.jsx("div",{className:"flex gap-2",children:R.length>1&&e.jsxs("button",{onClick:()=>T(""),className:"text-[9px] font-black uppercase text-gray-500 hover:text-blue-400 transition-colors flex items-center gap-1.5 bg-gray-800/50 px-3 py-1.5 rounded-lg border border-white/5 active:scale-95",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",strokeWidth:3})}),"Switch Team"]})})]}),e.jsxs("button",{onClick:()=>_("create"),className:"hidden md:flex px-10 py-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-black uppercase tracking-widest text-xs rounded-2xl shadow-xl shadow-blue-900/20 transition-all active:scale-95 items-center gap-3 border border-blue-400/20",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M12 4v16m8-8H4"})}),"Create Order"]})]}),e.jsx("div",{className:"relative",children:e.jsx(Ze,{team:L,onAdd:()=>_("create")})})]}):e.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 mt-6 animate-fade-in flex flex-col items-center",children:[e.jsxs("div",{className:"text-center space-y-3 mb-10",children:[e.jsx("p",{className:"text-blue-500 font-black uppercase tracking-[0.4em] text-[10px]",children:"Access Identification"}),e.jsx("h2",{className:"text-4xl sm:text-5xl font-black text-white tracking-tighter italic",children:"á‡áŸ’ášá¾áŸášá¾áŸá€áŸ’ášá»á˜á€á¶ášá„á¶áš"}),e.jsx("div",{className:"w-16 h-1.5 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full mx-auto shadow-[0_0_15px_rgba(59,130,246,0.5)]"})]}),e.jsx("div",{className:"w-full space-y-4 max-w-md",children:R.map((y,z)=>e.jsxs("button",{onClick:()=>T(y),className:"group relative w-full overflow-hidden bg-gray-900/60 backdrop-blur-3xl border border-white/5 rounded-[2.5rem] p-6 hover:border-blue-500/40 transition-all duration-500 active:scale-[0.97] shadow-xl flex items-center gap-6",children:[e.jsxs("div",{className:"absolute top-4 left-6",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-ping opacity-75"}),e.jsx("div",{className:"absolute top-0 w-1.5 h-1.5 bg-emerald-500 rounded-full"})]}),e.jsx("div",{className:"relative z-10 w-16 h-16 sm:w-20 sm:h-20 bg-gray-800 rounded-3xl flex items-center justify-center border border-white/5 shadow-inner group-hover:bg-blue-600/10 group-hover:border-blue-500/20 transition-all duration-500 group-hover:rotate-6",children:e.jsx("span",{className:"text-3xl sm:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-br from-blue-400 to-blue-600",children:y.charAt(0)})}),e.jsxs("div",{className:"relative z-10 flex-grow text-left",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white uppercase tracking-tight mb-1",children:y}),e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-widest opacity-60",children:["Team Operational Node ",z+1]})]}),e.jsx("div",{className:"relative z-10 p-3 bg-white/5 rounded-2xl group-hover:bg-blue-600 group-hover:text-white transition-all text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M9 5l7 7-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/0 via-blue-600/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-blue-500 opacity-0 group-hover:opacity-5 blur-[40px] transition-opacity"})]},y))}),e.jsxs("button",{onClick:b,className:"mt-12 flex items-center gap-2 text-[10px] font-black text-gray-600 uppercase tracking-widest hover:text-blue-500 transition-all active:scale-95",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M15 19l-7-7 7-7",strokeLinecap:"round",strokeLinejoin:"round"})}),"ááŸ’ášá¡á”áŸ‹á‘áŸ…áá½á“á¶á‘á¸"]})]})};export{at as default};
