import{r as o,j as e,c as P,M as J,A as X,S as G,L as Y,W as Z}from"./index-BQbSj4F8.js";const ee=(a,c)=>{if(!c||!a)return e.jsx("span",{children:a});const b=c.split(" ").filter(Boolean).map(n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));if(b.length===0)return e.jsx("span",{children:a});const u=new RegExp(`(${b.join("|")})`,"gi");return e.jsx(e.Fragment,{children:a.split(u).map((n,i)=>u.test(n)&&n.trim()!==""?e.jsx("strong",{className:"text-yellow-300 bg-yellow-900/50 rounded-sm px-0.5",children:n},i):n)})},te=(a,c)=>{const b=(a.ProductName||"").toLowerCase(),u=(a.Barcode||"").toLowerCase(),n=`${b} ${u}`,i=c.toLowerCase().trim();if(!i)return 1;const h=i.split(" ").filter(Boolean);if(!h.every(l=>n.includes(l)))return 0;let g=10;return h.forEach(l=>{b.includes(l)&&(g+=20),u.includes(l)&&(g+=10)}),b.startsWith(i)&&(g+=500),g},re=({products:a,selectedProductName:c,onSelect:b})=>{const[u,n]=o.useState(!1),[i,h]=o.useState(""),[x,g]=o.useState(0),[l,f]=o.useState(null),[d,N]=o.useState(window.innerWidth<768),L=o.useRef(null),m=o.useRef(null),I=o.useRef(null);o.useEffect(()=>{const r=()=>N(window.innerWidth<768);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),o.useEffect(()=>{h(c)},[c]),o.useEffect(()=>{if(l){const r=setTimeout(()=>{I.current&&I.current.scrollIntoView({behavior:"smooth",block:"center"})},100);return()=>clearTimeout(r)}},[l]),o.useEffect(()=>{const r=t=>{L.current&&!L.current.contains(t.target)&&(n(!1),h(c))};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[c]);const s=o.useMemo(()=>{const r=i||"";return r.trim()?a.map(t=>({product:t,score:te(t,r)})).filter(t=>t.score>0).sort((t,p)=>p.score-t.score||t.product.ProductName.localeCompare(p.product.ProductName)).map(t=>t.product):[]},[a,i]),v=o.useMemo(()=>{const r=i.trim();return r?!a.some(t=>t.ProductName.trim().toLowerCase()===r.toLowerCase()):!1},[i,a]),C=o.useMemo(()=>{const r=[...s];return v&&r.unshift({isAddNew:!0,ProductName:i.trim()}),r},[s,v,i]),R=o.useCallback(r=>{var t;b(r),h(r),n(!1),f(null),g(0),(t=m.current)==null||t.blur()},[b]),O=r=>{r.isAddNew?R(r.ProductName):(f(r),n(!1))},T=o.useCallback(()=>{var r;b(""),h(""),n(!0),g(0),(r=m.current)==null||r.focus()},[b]),A=r=>{var p;const t=C.length;if(t!==0)switch(r.key){case"ArrowDown":r.preventDefault(),u||n(!0),g(w=>(w+1)%t);break;case"ArrowUp":r.preventDefault(),u||n(!0),g(w=>(w-1+t)%t);break;case"Enter":if(r.preventDefault(),!u)return;x>-1&&C[x]&&O(C[x]);break;case"Escape":n(!1),h(c),(p=m.current)==null||p.blur();break}};return e.jsxs("div",{className:"relative",ref:L,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{ref:m,type:"text",className:"form-input !pr-16 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:"ស្វែងរកផលិតផល...",value:i,onChange:r=>{h(r.target.value),n(!0),g(0)},onFocus:()=>n(!0),onKeyDown:A}),e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[i&&e.jsx("button",{type:"button",onClick:T,className:"text-gray-500 hover:text-white text-2xl",children:"×"}),e.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),u&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden animate-fade-in-down max-h-80 overflow-y-auto custom-scrollbar",children:e.jsx("ul",{className:"p-2 space-y-1",children:C.length===0?e.jsx("li",{className:"p-4 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"រកមិនឃើញផលិតផលទេ"}):C.map((r,t)=>{if("isAddNew"in r&&r.isAddNew)return e.jsxs("li",{className:`p-3.5 rounded-2xl cursor-pointer flex items-center gap-4 transition-all ${x===t?"bg-blue-600 text-white":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>O(r),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center border border-blue-500/30",children:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"})})}),e.jsx("div",{className:"min-w-0",children:e.jsxs("p",{className:"font-black text-sm leading-tight",children:["បន្ថែមថ្មី៖ ",e.jsxs("span",{className:"text-yellow-400",children:['"',r.ProductName,'"']})]})})]},"add-new");const p=r;return e.jsxs("li",{className:`p-2.5 rounded-2xl cursor-pointer flex items-center gap-3 transition-all ${x===t?"bg-blue-600 text-white shadow-lg":"hover:bg-white/5 text-gray-300"}`,onMouseDown:()=>O(p),children:[e.jsx("img",{src:P(p.ImageURL),className:"w-12 h-12 rounded-xl object-cover border border-white/10",alt:""}),e.jsxs("div",{className:"min-w-0 flex-grow",children:[e.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:ee(p.ProductName,i)}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:e.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-md border border-blue-500/10",children:["$",p.Price.toFixed(2)]})})]})]},p.ProductName)})})}),l&&e.jsx(J,{isOpen:!0,onClose:()=>f(null),maxWidth:d?"max-w-[95vw]":"max-w-2xl",children:e.jsxs("div",{ref:I,className:"bg-[#0f172a] rounded-[2rem] sm:rounded-[3rem] overflow-hidden shadow-[0_30px_100px_rgba(0,0,0,0.8)] border border-white/5 relative",children:[e.jsxs("div",{className:"relative h-48 sm:h-72 w-full",children:[e.jsx("div",{className:"absolute inset-0 z-0",children:e.jsx("img",{src:P(l.ImageURL),className:"w-full h-full object-cover blur-3xl opacity-30",alt:""})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 p-6",children:e.jsx("img",{src:P(l.ImageURL),className:"h-full w-auto object-contain rounded-2xl sm:rounded-3xl shadow-[0_20px_50px_rgba(0,0,0,0.5)] border border-white/10 transform transition-transform hover:scale-105 duration-500",alt:l.ProductName})}),e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsxs("div",{className:"bg-emerald-500 text-white font-black px-4 py-2 rounded-2xl shadow-xl border-2 border-white/20 text-lg",children:["$",l.Price.toFixed(2)]})})]}),e.jsxs("div",{className:"p-6 sm:p-10 text-center space-y-6 sm:space-y-8 bg-gradient-to-b from-transparent to-black/40",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-500 text-[10px] sm:text-xs font-black uppercase tracking-[0.4em] mb-3",children:"បញ្ជាក់ការជ្រើសរើស"}),e.jsx("h3",{className:"text-2xl sm:text-4xl font-black text-white leading-tight break-words",children:l.ProductName}),l.Barcode&&e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 bg-white/5 px-4 py-1.5 rounded-full border border-white/5",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("span",{className:"text-gray-400 font-mono text-xs tracking-widest",children:l.Barcode})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 w-full",children:[e.jsx("button",{onClick:()=>f(null),className:"order-2 sm:order-1 flex-1 py-4 sm:py-5 bg-gray-800/50 hover:bg-gray-800 text-gray-400 font-black rounded-2xl uppercase text-[11px] tracking-widest transition-all active:scale-95 border border-white/5",children:"បោះបង់"}),e.jsxs("button",{onClick:()=>R(l.ProductName),className:"order-1 sm:order-2 flex-[2] py-4 sm:py-5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-black rounded-2xl uppercase text-xs tracking-[0.2em] shadow-[0_10px_30px_rgba(37,99,235,0.4)] hover:from-blue-500 hover:to-indigo-500 transition-all active:scale-95 flex items-center justify-center gap-3",children:["ជ្រើសរើសយក",e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M5 13l4 4L19 7",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),e.jsx("div",{className:"absolute -bottom-20 -left-20 w-64 h-64 bg-blue-600/10 rounded-full blur-[80px] pointer-events-none"}),e.jsx("div",{className:"absolute -top-20 -right-20 w-64 h-64 bg-indigo-600/10 rounded-full blur-[80px] pointer-events-none"})]})})]})},ae=({methods:a,selectedMethodName:c,onSelect:b,placeholder:u="ជ្រើសរើសសេវាដឹកជញ្ជូន..."})=>{const[n,i]=o.useState(!1),[h,x]=o.useState(""),g=o.useRef(null);o.useEffect(()=>{const d=a.find(N=>N.MethodName===c);d&&x(d.MethodName)},[c,a]),o.useEffect(()=>{const d=N=>{if(g.current&&!g.current.contains(N.target)){i(!1);const L=a.find(m=>m.MethodName===c);x(L?L.MethodName:"")}};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[c,a]);const l=o.useMemo(()=>{if(!h.trim())return a;const d=h.toLowerCase();return a.filter(N=>N.MethodName.toLowerCase().includes(d))},[a,h]),f=a.find(d=>d.MethodName===c);return e.jsxs("div",{className:"relative w-full",ref:g,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",className:"form-input !pl-14 !pr-10 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:u,value:h,onChange:d=>{x(d.target.value),i(!0)},onFocus:()=>i(!0)}),e.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-8 h-8 rounded-xl bg-gray-800 overflow-hidden border border-white/5 flex items-center justify-center p-1 shadow-inner",children:f?e.jsx("img",{src:P(f.LogosURL),className:"w-full h-full object-contain",alt:""}):e.jsxs("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h8a1 1 0 001-1z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 16l4-4 4 4"})]})})}),e.jsx("div",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-gray-600 group-focus-within:text-blue-500 transition-colors",children:e.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 9l-7 7-7-7",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),n&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_60px_rgba(0,0,0,0.6)] overflow-hidden animate-fade-in-down",children:e.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar p-2.5 space-y-1.5",children:l.length>0?l.map(d=>e.jsxs("button",{type:"button",onClick:()=>{b(d),x(d.MethodName),i(!1)},className:`w-full flex items-center gap-3.5 p-3 rounded-2xl transition-all ${c===d.MethodName?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-300 hover:bg-white/5"}`,children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gray-900 border-2 border-white/10 p-1.5 shadow-sm flex-shrink-0 flex items-center justify-center",children:e.jsx("img",{src:P(d.LogosURL),className:"w-full h-full object-contain",alt:""})}),e.jsxs("div",{className:"text-left min-w-0 flex-grow",children:[e.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:d.MethodName}),e.jsx("div",{className:"flex items-center gap-1.5 mt-1",children:e.jsx("span",{className:`text-[8px] px-1.5 py-0.5 rounded-md font-black uppercase tracking-tighter ${c===d.MethodName?"bg-white/20 text-white":"bg-blue-500/10 text-blue-400"}`,children:d.RequireDriverSelection?"Driver Selection Req":"Standard Service"})})]})]},d.MethodName)):e.jsx("div",{className:"p-6 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"រកមិនឃើញសេវាដឹកជញ្ជូនទេ"})})})]})},ne=({provinces:a,selectedProvince:c,onSelect:b})=>{const[u,n]=o.useState(!1),[i,h]=o.useState(""),x=o.useRef(null);o.useEffect(()=>{h(c)},[c]),o.useEffect(()=>{const l=f=>{x.current&&!x.current.contains(f.target)&&(n(!1),h(c))};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[c]);const g=o.useMemo(()=>{const l=a.filter(m=>m.toLowerCase().includes(i.toLowerCase())),f=l.filter(m=>!m.includes("ភ្នំពេញ")&&!m.includes("កណ្ដាល")).sort((m,I)=>m.localeCompare(I,"km")),d=[],N=l.find(m=>m.includes("ភ្នំពេញ")),L=l.find(m=>m.includes("កណ្ដាល"));return N&&d.push(N),L&&d.push(L),[...d,...f]},[a,i]);return e.jsxs("div",{className:"relative w-full",ref:x,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",className:"form-input !pl-10 !py-3 rounded-xl border-gray-700 bg-gray-900 focus:border-blue-500/50 transition-all font-bold text-gray-200",placeholder:"ស្វែងរក ខេត្ត/រាជធានី...",value:i,onChange:l=>{h(l.target.value),n(!0)},onFocus:()=>n(!0)}),e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),u&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800 border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-down max-h-60 overflow-y-auto custom-scrollbar",children:g.length>0?g.map((l,f)=>e.jsx("button",{type:"button",onClick:()=>{b(l),h(l),n(!1)},className:`w-full text-left px-4 py-3 text-sm font-bold transition-colors border-b border-white/5 last:border-0 ${c===l?"bg-blue-600 text-white":"text-gray-300 hover:bg-white/5"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:l}),f<2&&i===""&&e.jsx("span",{className:"text-[8px] bg-white/10 px-1.5 py-0.5 rounded uppercase tracking-widest opacity-50",children:"Priority"})]})},l)):e.jsx("div",{className:"p-4 text-center text-xs text-gray-500",children:"រកមិនឃើញខេត្តនេះទេ"})})]})},le=({value:a,onChange:c,label:b="ចំនួន*",min:u=1,max:n=99})=>{var I;const i=o.useRef(null),[h,x]=o.useState(!1),g=()=>{const s=Math.min(n,a+1);c(s)},l=()=>{const s=Math.max(u,a-1);c(s)},f=s=>{const v=s.target.value;if(v===""){x(!0);return}const C=parseInt(v,10);isNaN(C)||(C<u||C>n?x(!0):(c(C),x(!1)))},d=()=>{if(h){const s=i.current;if(s&&s.value){let v=parseInt(s.value,10);isNaN(v)||v<u?v=u:v>n&&(v=n),c(v)}else c(u);x(!1)}},N=s=>{var v;s.key==="Enter"?(s.preventDefault(),d(),(v=i.current)==null||v.blur()):s.key==="ArrowUp"?(s.preventDefault(),g()):s.key==="ArrowDown"&&(s.preventDefault(),l())},L=()=>{x(!0)},m=h?((I=i.current)==null?void 0:I.value)||"":a;return e.jsxs("div",{className:"space-y-1.5 w-full",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:b}),e.jsxs("div",{className:"flex items-center bg-black/40 rounded-2xl border border-gray-700 h-12 w-full overflow-hidden focus-within:border-blue-500/50 transition-all focus-within:shadow-[0_0_20px_rgba(59,130,246,0.15)] ring-1 ring-white/5",children:[e.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${a<=u?"text-gray-600 cursor-not-allowed opacity-50":"text-gray-400 hover:text-white hover:bg-white/5 active:scale-90"}
                        transition-all border-r border-gray-700/50
                    `,onClick:l,disabled:a<=u,"aria-label":"ថយចំនួន",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M20 12H4"})})}),e.jsx("input",{ref:i,type:"number",inputMode:"numeric",value:m,onChange:f,onBlur:d,onFocus:L,onKeyDown:N,min:u,max:n,step:"1",className:"flex-1 h-full bg-transparent text-center text-white font-black text-base outline-none border-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:u.toString(),"aria-label":"ចំនួន"}),e.jsx("button",{type:"button",className:`
                        w-12 h-full flex items-center justify-center 
                        ${a>=n?"text-gray-600 cursor-not-allowed opacity-50":"text-blue-400 hover:text-white hover:bg-blue-600/10 active:scale-90"}
                        transition-all border-l border-gray-700/50
                    `,onClick:g,disabled:a>=n,"aria-label":"បន្ថែមចំនួន",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M12 4v16m8-8H4"})})})]}),e.jsxs("div",{className:"text-xs text-gray-500 px-1 flex justify-between",children:[e.jsxs("span",{children:["អប្បបរមា: ",u]}),e.jsxs("span",{children:["អតិបរមា: ",n]})]})]})},ie=({orders:a,onEdit:c,showActions:b,visibleColumns:u,selectedIds:n=new Set,onToggleSelect:i,onToggleSelectAll:h})=>{const{appData:x,refreshData:g,previewImage:l}=o.useContext(X),[f,d]=o.useState(null),[N,L]=o.useState(new Set),[m,I]=o.useState(a);o.useEffect(()=>{I(a)},[a]);const s=t=>t==="actions"&&!b?!1:!u||u.has(t),v=a.length>0&&a.every(t=>n.has(t["Order ID"])),C=async(t,p)=>{const w=!p;I(y=>y.map(j=>j["Order ID"]===t?{...j,IsVerified:w}:j)),L(y=>new Set(y).add(t));try{if(!(await fetch(`${Z}/api/admin/update-sheet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetName:"AllOrders",primaryKey:{"Order ID":t},newData:{IsVerified:w}})})).ok)throw new Error("Failed to save");g()}catch(y){console.error("Verification toggle failed:",y),I(j=>j.map(S=>S["Order ID"]===t?{...S,IsVerified:p}:S)),alert("រក្សាទុកស្ថានភាពមិនបានសម្រេច!")}finally{L(y=>{const j=new Set(y);return j.delete(t),j})}},R=t=>{let p=(t||"").replace(/[^0-9]/g,"");return p.length>0&&(p="0"+p.replace(/^0+/,"")),p},O=t=>{navigator.clipboard.writeText(t),d(t),setTimeout(()=>d(null),2e3)},T=t=>{if(!t)return;const p=R(t["Customer Phone"]),w=new URLSearchParams({id:t["Order ID"],name:t["Customer Name"]||"",phone:p,location:t.Location||"",address:t["Address Details"]||"",total:(t["Grand Total"]||0).toString(),payment:t["Payment Status"]||"Unpaid",shipping:t["Internal Shipping Method"]||"N/A",page:t.Page||"",user:t.User||""}),j=(t.Note||"").match(/https?:\/\/(www\.)?(google\.com\/maps|maps\.app\.goo\.gl)\/[^\s]+/);j&&w.set("map",j[0]),window.open(`${Y}?${w.toString()}`,"_blank")},A=t=>{if(!t||!x.phoneCarriers)return null;const w=t.replace(/\s/g,"").substring(0,3),y=x.phoneCarriers.find(j=>j.Prefixes.split(",").map(S=>S.trim()).includes(w));return y?P(y.CarrierLogoURL):null},r=t=>{if(!t||!x.shippingMethods)return null;const p=x.shippingMethods.find(w=>w.MethodName===t);return p?P(p.LogosURL):null};return e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsxs("div",{className:"flex-grow space-y-4",children:[e.jsx("div",{className:"hidden md:block page-card !p-0 shadow-2xl border-gray-700/50 min-h-[1500px] overflow-visible",children:e.jsxs("table",{className:"admin-table w-full border-collapse",style:{tableLayout:"fixed"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800/80 border-b border-gray-700",children:[h&&e.jsx("th",{className:"px-4 py-4 w-12 text-center",children:e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-600 bg-gray-900 text-blue-500 cursor-pointer",checked:v,onChange:()=>h(a.map(t=>t["Order ID"]))})}),s("index")&&e.jsx("th",{className:"px-4 py-4 text-xs font-black uppercase tracking-wider text-center text-gray-400 w-12",children:"#"}),s("orderId")&&e.jsx("th",{className:"px-2 py-4 text-xs font-black uppercase tracking-wider text-center text-gray-400 w-16",children:"ID"}),s("customerName")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-44",children:"ឈ្មោះអតិថិជន"}),s("productInfo")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-36",children:"ព័ត៌មាន Product"}),s("location")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-48",children:"ទីតាំង"}),s("pageInfo")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-40",children:"Page"}),s("total")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-28",children:"សរុបទឹកប្រាក់"}),s("shippingService")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-44",children:"សេវាដឹក"}),s("shippingCost")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-24",children:"តម្លៃដឹកដើម"}),s("status")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-28",children:"ស្ថានភាព"}),s("date")&&e.jsx("th",{className:"px-5 py-4 text-xs font-black uppercase tracking-wider text-left text-gray-400 w-32",children:"កាលបរិច្ឆេទ"}),s("print")&&e.jsx("th",{className:"px-4 py-4 text-xs font-black uppercase tracking-wider text-center text-gray-400 w-16",children:"ព្រីន"}),s("actions")&&e.jsx("th",{className:"px-4 py-4 text-xs font-black uppercase tracking-wider text-center text-gray-400 w-24",children:"សកម្មភាព"}),s("check")&&e.jsx("th",{className:"px-4 py-4 text-xs font-black uppercase tracking-wider text-center text-emerald-500 w-28",children:"VERIFIED"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700/50",children:m.map((t,p)=>{var V;const w=(V=x.pages)==null?void 0:V.find(k=>k.PageName===t.Page),y=w?P(w.PageLogoURL):"",j=R(t["Customer Phone"]),S=A(j),E=f===t["Order ID"],U=r(t["Internal Shipping Method"]),M=t["Order ID"],$=t.IsVerified===!0||String(t.IsVerified).toUpperCase()==="TRUE",W=N.has(M),z=n.has(M),D=p>m.length-3&&m.length>4,H=D?"bottom-full mb-3":"top-full mt-3",_=D?"-bottom-2 border-r border-b":"-top-2 border-t border-l";return e.jsxs("tr",{className:`${$?"bg-emerald-500/5":z?"bg-blue-500/10":"hover:bg-gray-700/20"} transition-all group relative`,children:[i&&e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-600 bg-gray-900 text-blue-500 cursor-pointer",checked:z,onChange:()=>i(M)})}),s("index")&&e.jsx("td",{className:"px-4 py-4 text-center text-xs font-bold text-gray-500",children:p+1}),s("orderId")&&e.jsx("td",{className:"px-2 py-4 text-center",children:e.jsx("button",{onClick:()=>O(t["Order ID"]),className:`p-2 rounded-lg transition-all border ${E?"bg-green-500/20 border-green-500/40 text-green-400":"bg-gray-800 border-gray-700 text-gray-400 hover:text-blue-400"}`,children:e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:E?"✓":"ID"})})}),s("customerName")&&e.jsxs("td",{className:"px-5 py-4",children:[e.jsx("div",{className:"font-bold text-gray-100 truncate mb-1",children:t["Customer Name"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[S&&e.jsx("img",{src:S,className:"w-4 h-4 object-contain",alt:"carrier"}),e.jsx("div",{className:"text-[11px] text-gray-400 font-mono tracking-tighter",children:j})]})]}),s("productInfo")&&e.jsx("td",{className:"px-5 py-4 relative overflow-visible",children:e.jsxs("div",{className:"group/prod flex flex-col gap-1 cursor-help",children:[t.Products.slice(0,2).map((k,B)=>e.jsxs("div",{className:"text-[11px] bg-gray-900/50 p-1.5 rounded border border-white/5 flex flex-col",children:[e.jsx("span",{className:"font-black text-gray-200 line-clamp-1",children:k.name}),e.jsx("div",{className:"flex justify-between items-center mt-0.5",children:e.jsxs("span",{className:"text-blue-400 font-bold",children:["Qty: ",k.quantity]})})]},B)),t.Products.length>2&&e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold ml-1",children:["+ ",t.Products.length-2," items more..."]}),e.jsxs("div",{className:`invisible group-hover/prod:visible opacity-0 group-hover/prod:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${H} w-80 p-5 bg-gray-800 border border-gray-600 rounded-[2rem] shadow-[0_25px_60px_rgba(0,0,0,0.7)] transition-all duration-300 pointer-events-none`,children:[e.jsx("p",{className:"text-[10px] font-black text-blue-400 uppercase tracking-[0.2em] mb-4 border-b border-white/5 pb-3",children:"ព័ត៌មានទំនិញពេញលេញ"}),e.jsx("div",{className:"space-y-3 max-h-[350px] overflow-y-auto custom-scrollbar pr-1",children:t.Products.map((k,B)=>{var K;const F=(K=x.products)==null?void 0:K.find(q=>q.ProductName===k.name),Q=k.image||(F==null?void 0:F.ImageURL)||"";return e.jsxs("div",{className:"flex items-center gap-4 text-left p-2 bg-black/20 rounded-2xl border border-white/5",children:[e.jsx("div",{className:"w-14 h-14 flex-shrink-0 bg-gray-900 rounded-xl border border-gray-700 overflow-hidden shadow-inner",children:e.jsx("img",{src:P(Q),className:"w-full h-full object-cover",alt:k.name,onError:q=>q.currentTarget.src="https://placehold.co/100x100/1f2937/4b5563?text=N/A"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[12px] font-black text-white leading-tight mb-1 line-clamp-2",children:k.name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/10",children:["x",k.quantity]}),k.colorInfo&&e.jsxs("span",{className:"text-[9px] text-purple-400 font-bold",children:["ពណ៌៖ ",k.colorInfo]})]})]})]},B)})}),e.jsx("div",{className:`absolute ${_} left-1/2 -translate-x-1/2 w-5 h-5 bg-gray-800 border-gray-600 rotate-45`})]})]})}),s("location")&&e.jsx("td",{className:"px-5 py-4 relative overflow-visible",children:e.jsxs("div",{className:"group/loc cursor-help",children:[e.jsx("div",{className:"text-[13px] font-black text-gray-100 leading-tight",children:t.Location}),e.jsx("div",{className:"text-[11px] font-bold text-gray-500 mt-1 line-clamp-1",children:t["Address Details"]}),e.jsxs("div",{className:`invisible group-hover/loc:visible opacity-0 group-hover/loc:opacity-100 absolute z-[200] left-1/2 -translate-x-1/2 ${H} w-72 p-5 bg-gray-800 border border-gray-600 rounded-[2rem] shadow-[0_25px_60px_rgba(0,0,0,0.7)] transition-all duration-300 pointer-events-none`,children:[e.jsx("p",{className:"text-[10px] font-black text-blue-400 uppercase tracking-[0.2em] mb-3 border-b border-white/5 pb-2",children:"ទីតាំង និងអាសយដ្ឋាន"}),e.jsxs("div",{className:"space-y-3 text-left",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase",children:"Province / City"}),e.jsx("p",{className:"text-sm font-black text-white",children:t.Location})]}),e.jsxs("div",{className:"bg-black/20 p-3 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase block mb-1",children:"Details"}),e.jsx("p",{className:"text-[12px] text-gray-300 leading-relaxed font-medium",children:t["Address Details"]||"មិនមានអាសយដ្ឋានលម្អិត"})]})]}),e.jsx("div",{className:`absolute ${_} left-1/2 -translate-x-1/2 w-5 h-5 bg-gray-800 border-gray-600 rotate-45`})]})]})}),s("pageInfo")&&e.jsx("td",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[y?e.jsx("img",{src:y,className:"w-7 h-7 rounded-full border border-gray-700 shadow-sm object-cover",alt:"logo"}):e.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-[7px] text-gray-600 font-bold",children:"Log"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-[13px] font-bold text-gray-200 block truncate",children:t.Page}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest",children:t.Team})]})]})}),s("total")&&e.jsxs("td",{className:"px-5 py-4 font-black text-blue-400 text-base tracking-tight",children:["$",t["Grand Total"].toFixed(2)]}),s("shippingService")&&e.jsx("td",{className:"px-5 py-4 text-[11px] text-yellow-500/80 font-bold uppercase",children:e.jsxs("div",{className:"flex items-center gap-2",children:[U&&e.jsx("img",{src:U,className:"w-5 h-5 rounded-full object-contain",alt:"shipping"}),e.jsx("span",{className:"truncate",children:t["Internal Shipping Method"]||"-"})]})}),s("shippingCost")&&e.jsxs("td",{className:"px-5 py-4 text-[11px] text-orange-400 font-mono font-bold",children:["$",(Number(t["Internal Cost"])||0).toFixed(2)]}),s("status")&&e.jsx("td",{className:"px-5 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider shadow-sm border ${t["Payment Status"]==="Paid"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:t["Payment Status"]})}),s("date")&&e.jsx("td",{className:"px-5 py-4 text-[10px] text-gray-500 font-bold",children:new Date(t.Timestamp).toLocaleDateString("km-KH")}),s("print")&&e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("button",{onClick:()=>T(t),className:"text-emerald-400 hover:text-white bg-emerald-400/5 hover:bg-emerald-600 p-2 rounded-lg transition-all border border-emerald-400/20 shadow-sm active:scale-90",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})}),s("actions")&&e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("button",{onClick:()=>c&&c(t),className:"text-blue-400 hover:text-white bg-blue-400/5 hover:bg-blue-600 px-4 py-1.5 rounded-lg text-xs font-black transition-all border border-blue-400/20 shadow-sm active:scale-95",children:"Edit"})}),s("check")&&e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("input",{type:"checkbox",checked:$,onChange:()=>C(M,$),className:`h-6 w-6 rounded border-gray-600 bg-gray-800 text-emerald-500 focus:ring-emerald-500/20 cursor-pointer transition-all active:scale-150 ${W?"opacity-30":"hover:scale-110"}`}),W&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx(G,{size:"sm"})})]})})]},M)})})]})}),e.jsx("div",{className:"md:hidden space-y-4 min-h-[1200px] pb-64",children:m.map((t,p)=>{var z;const w=(z=x.pages)==null?void 0:z.find(D=>D.PageName===t.Page),y=w?P(w.PageLogoURL):"",j=R(t["Customer Phone"]),S=A(j),E=t.IsVerified===!0||String(t.IsVerified).toUpperCase()==="TRUE",U=N.has(t["Order ID"]),M=n.has(t["Order ID"]),$=r(t["Internal Shipping Method"]),W=f===t["Order ID"];return e.jsxs("div",{className:`bg-gray-800/40 border ${M?"border-blue-500 shadow-blue-500/10":E?"border-emerald-500/50":"border-gray-700"} rounded-[2rem] p-5 shadow-lg space-y-4 animate-fade-in relative`,children:[i&&e.jsx("div",{className:"absolute top-5 left-5 z-10",children:e.jsx("input",{type:"checkbox",className:"h-6 w-6 rounded-lg border-gray-600 bg-gray-900 text-blue-500 focus:ring-blue-500/20 cursor-pointer",checked:M,onChange:()=>i(t["Order ID"])})}),e.jsxs("div",{className:`flex justify-between items-start ${i?"pl-10":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 border border-gray-700 flex items-center justify-center overflow-hidden shadow-inner",children:y?e.jsx("img",{src:y,className:"w-full h-full object-cover",alt:"logo"}):e.jsx("span",{className:"text-[10px] font-black text-gray-500",children:"Log"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[15px] font-black text-white leading-none",children:t["Customer Name"]}),e.jsxs("p",{className:"text-[10px] text-gray-500 uppercase font-black mt-1.5",children:[t.Page," (",t.Team,")"]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("button",{onClick:()=>O(t["Order ID"]),className:`px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest border transition-all ${W?"bg-green-600 text-white border-green-500":"bg-gray-900 text-gray-400 border-gray-700"}`,children:f===t["Order ID"]?"Copied":t["Order ID"].substring(0,8)}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-black uppercase border ${t["Payment Status"]==="Paid"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:t["Payment Status"]})]})]}),s("productInfo")&&t.Products&&t.Products.length>0&&e.jsxs("div",{className:"bg-black/20 rounded-[1.5rem] p-3 border border-white/5 space-y-2",children:[e.jsxs("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1 ml-1 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"ទំនិញដែលបានកម្មង់"]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:t.Products.map((D,H)=>{var k;const _=(k=x.products)==null?void 0:k.find(B=>B.ProductName===D.name),V=D.image||(_==null?void 0:_.ImageURL)||"";return e.jsxs("div",{className:"flex items-center gap-3 bg-gray-900/40 p-2 rounded-xl border border-white/5",children:[e.jsx("div",{className:"w-10 h-10 flex-shrink-0 bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",onClick:()=>l(P(V)),children:e.jsx("img",{src:P(V),className:"w-full h-full object-cover",alt:""})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsx("p",{className:"text-[12px] font-bold text-gray-200 truncate leading-tight",children:D.name}),e.jsxs("span",{className:"text-[10px] font-black text-blue-400 bg-blue-500/10 px-1.5 rounded-lg flex-shrink-0",children:["x",D.quantity]})]}),D.colorInfo&&e.jsxs("p",{className:"text-[9px] text-gray-500 italic mt-1 truncate",children:["ពណ៌៖ ",D.colorInfo]})]})]},H)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-[12px]",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-gray-500 font-black uppercase text-[9px] tracking-widest",children:"លេខទូរស័ព្ទ"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[S&&e.jsx("img",{src:S,className:"w-4 h-4 object-contain",alt:""}),e.jsx("span",{className:"text-white font-mono font-bold tracking-tight",children:j})]})]}),e.jsxs("div",{className:"space-y-1 text-right",children:[e.jsx("p",{className:"text-gray-500 font-black uppercase text-[9px] tracking-widest",children:"សរុបទឹកប្រាក់"}),e.jsxs("p",{className:"text-blue-400 font-black text-base",children:["$",t["Grand Total"].toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-gray-500 font-black uppercase text-[9px] tracking-widest",children:"ទីតាំង"}),e.jsx("p",{className:"text-white font-bold truncate max-w-[140px]",children:t.Location})]}),e.jsxs("div",{className:"space-y-1 text-right",children:[e.jsx("p",{className:"text-gray-500 font-black uppercase text-[9px] tracking-widest",children:"ដឹកជញ្ជូន"}),e.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[$&&e.jsx("img",{src:$,className:"w-3.5 h-3.5 object-contain",alt:""}),e.jsx("span",{className:"text-white truncate max-w-[100px] font-bold",children:t["Internal Shipping Method"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s("actions")&&e.jsx("button",{onClick:()=>c&&c(t),className:"p-3 bg-blue-600/10 text-blue-400 rounded-2xl border border-blue-500/20 active:scale-90 transition-all",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s("print")&&e.jsx("button",{onClick:()=>T(t),className:"p-3 bg-emerald-600/10 text-emerald-400 rounded-2xl border border-emerald-500/20 active:scale-90 transition-all",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-[10px] text-gray-500 font-bold italic",children:new Date(t.Timestamp).toLocaleDateString("km-KH")}),s("check")&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:()=>C(t["Order ID"],E),className:`h-9 w-9 rounded-xl border-gray-600 bg-gray-900 text-emerald-500 focus:ring-emerald-500/20 transition-all ${U?"opacity-20":"active:scale-125"}`}),U&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(G,{size:"sm"})})]})]})]})]},t["Order ID"])})})]}),e.jsx("div",{className:"h-64 md:h-[400px] w-full pointer-events-none opacity-0 shrink-0","aria-hidden":"true"})]})};export{ie as O,re as S,ne as a,le as b,ae as c};
