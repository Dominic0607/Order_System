const a=async()=>"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.warn("This browser does not support desktop notification"),!1),s=async(o,e)=>{if(!("Notification"in window)||Notification.permission!=="granted")return;const t="https://cdn-icons-png.flaticon.com/512/1827/1827404.png",r="osystem-alert-"+Date.now(),n={body:e,icon:t,badge:t,vibrate:[200,100,200],tag:r,renotify:!0,requireInteraction:!0,data:{url:window.location.href},silent:!1};if("serviceWorker"in navigator)try{const i=await navigator.serviceWorker.getRegistration();if(i&&i.active){await i.showNotification(o,n),console.log("Notification sent via Service Worker");return}}catch(i){console.warn("Service Worker notification failed, trying fallback...",i)}try{const i=new Notification(o,n);i.onclick=function(){window.focus(),i.close()},console.log("Notification sent via Web API")}catch(i){console.error("Notification failed completely:",i)}};export{a as r,s};
