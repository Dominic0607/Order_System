import{j as e,c as ge,r,M as Je,S as Me,A as ze,W as Te,C as Xe,u as lt}from"./index-BdDOTL70.js";import{B as nt,h as ot,D as it,g as ct,j as dt,k as xt,l as mt,S as He,d as ut,e as pt,f as ht,c as gt,E as bt,i as ft,O as Ze,a as wt}from"./OrdersList-9UZYL0Za.js";import yt from"./html2canvas.esm-QH1iLAAe.js";import{g as Re,s as et,a as We}from"./dateUtils-cpsDkxhO.js";import"./imageCompressor-D5vYYzIg.js";const jt=({pages:f,selectedPageName:S,onSelect:C})=>e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"flex overflow-x-auto gap-3.5 pb-6 pt-2 px-1 snap-x no-scrollbar",children:[f.map(i=>{const o=S===i.PageName;return e.jsxs("button",{type:"button",onClick:()=>C(i),className:`
                                relative flex-shrink-0 w-[115px] h-[135px] snap-center rounded-[2rem] 
                                border-2 transition-all duration-700 outline-none group
                                ${o?"bg-blue-600/20 border-blue-500 shadow-[0_15px_30px_rgba(59,130,246,0.3)] scale-105":"bg-gray-800/30 backdrop-blur-xl border-white/5 hover:border-blue-500/30"}
                            `,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-3 gap-2",children:[e.jsxs("div",{className:"relative",children:[o&&e.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full blur-lg opacity-50 animate-pulse"}),e.jsx("div",{className:`
                                        relative w-12 h-12 rounded-full overflow-hidden border-2 transition-all duration-700
                                        ${o?"border-white scale-110 shadow-2xl rotate-[360deg]":"border-gray-700 opacity-50 group-hover:opacity-100"}
                                    `,children:e.jsx("img",{src:ge(i.PageLogoURL),className:"w-full h-full object-cover",alt:i.PageName})}),o&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center border-2 border-gray-900 shadow-lg animate-bounce-slow",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:4,children:e.jsx("path",{d:"M5 13l4 4L19 7"})})})]}),e.jsxs("div",{className:"text-center w-full px-1",children:[e.jsx("span",{className:`
                                        text-[10px] font-black uppercase tracking-tighter leading-tight block truncate transition-colors duration-500
                                        ${o?"text-white":"text-gray-500 group-hover:text-gray-300"}
                                    `,children:i.PageName}),i.TelegramValue&&o&&e.jsxs("span",{className:"text-[7px] font-bold text-blue-400/80 block mt-0.5 animate-fade-in truncate",children:["@",i.TelegramValue]})]})]}),e.jsx("div",{className:`
                                absolute bottom-3 left-1/2 -translate-x-1/2 h-1 rounded-full transition-all duration-700
                                ${o?"w-6 bg-blue-400 shadow-[0_0_8px_#60a5fa]":"w-0 bg-transparent"}
                            `})]},i.PageName)}),f.length===0&&e.jsxs("div",{className:"w-full py-10 flex flex-col items-center justify-center bg-gray-900/20 rounded-[2.5rem] border-2 border-dashed border-gray-800",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{className:"text-[9px] font-black text-gray-600 uppercase tracking-widest italic",children:"ášá€á˜á·á“áƒá¾á‰ Page"})]})]}),e.jsx("style",{children:`
                .no-scrollbar::-webkit-scrollbar {
                    display: none;
                }
                .no-scrollbar {
                    -ms-overflow-style: none;
                    scrollbar-width: none;
                }
                @keyframes bounce-slow {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-3px); }
                }
                .animate-bounce-slow {
                    animation: bounce-slow 2s infinite ease-in-out;
                }
            `})]}),vt=({pages:f,selectedPageName:S,onSelect:C,placeholder:i="á‡áŸ’ášá¾áŸášá¾áŸ Page..."})=>{const[o,_]=r.useState(!1),[U,v]=r.useState(""),Y=r.useRef(null);r.useEffect(()=>{const $=f.find(xe=>xe.PageName===S);$&&v($.PageName)},[S,f]),r.useEffect(()=>{const $=xe=>{if(Y.current&&!Y.current.contains(xe.target)){_(!1);const se=f.find(s=>s.PageName===S);v(se?se.PageName:"")}};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[S,f]);const h=r.useMemo(()=>{if(!U.trim())return f;const $=U.toLowerCase();return f.filter(xe=>xe.PageName.toLowerCase().includes($))},[f,U]),ne=f.find($=>$.PageName===S);return e.jsxs("div",{className:"relative w-full",ref:Y,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",className:"form-input !pl-14 !pr-10 !py-3.5 bg-gray-900/50 border-gray-700 group-hover:border-blue-500/50 transition-all rounded-[1.25rem] font-bold text-gray-200",placeholder:i,value:U,onChange:$=>{v($.target.value),_(!0)},onFocus:()=>_(!0)}),e.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 overflow-hidden border border-white/5 flex items-center justify-center",children:ne?e.jsx("img",{src:ge(ne.PageLogoURL),className:"w-full h-full object-cover",alt:""}):e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 1.91-1.61 3.46-1.61s3.03.72 3.46 1.61C12.79 19.11 11.41 19.5 10 19.5s-2.79-.39-3.93-1.22zM15.6 17.03c-.78-1.13-2.56-1.86-4.6-1.86s-3.82.73-4.6 1.86c-.52-.51-.95-1.09-1.27-1.74.88-1.19 2.72-2.12 4.87-2.12s3.99.93 4.87 2.12c-.32.65-.75 1.23-1.27 1.74zM10 12.3c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})})})}),e.jsx("div",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-gray-600 group-focus-within:text-blue-500 transition-colors",children:e.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 9l-7 7-7-7",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),o&&e.jsx("div",{className:"absolute z-[100] w-full mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-[0_20px_60px_rgba(0,0,0,0.6)] overflow-hidden animate-fade-in-down",children:e.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar p-2.5 space-y-1.5",children:h.length>0?h.map($=>e.jsxs("button",{type:"button",onClick:()=>{C($),v($.PageName),_(!1)},className:`w-full flex items-center gap-3.5 p-3 rounded-2xl transition-all ${S===$.PageName?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-300 hover:bg-white/5"}`,children:[e.jsx("img",{src:ge($.PageLogoURL),className:"w-11 h-11 rounded-full object-cover border-2 border-white/10 shadow-sm flex-shrink-0",alt:""}),e.jsxs("div",{className:"text-left min-w-0",children:[e.jsx("p",{className:"font-black text-[15px] truncate leading-tight",children:$.PageName}),e.jsx("p",{className:`text-[10px] uppercase tracking-widest font-black mt-1 ${S===$.PageName?"text-blue-100":"text-gray-500"}`,children:$.Team})]})]},$.PageName)):e.jsx("div",{className:"p-6 text-center text-xs text-gray-500 font-black uppercase tracking-widest",children:"ášá€á˜á·á“áƒá¾á‰ Page á‘áŸ"})})})]})},Nt=({isOpen:f,onClose:S,url:C})=>{const[i,o]=r.useState(!0);return r.useEffect(()=>{f&&o(!0)},[f,C]),f?e.jsxs(Je,{isOpen:f,onClose:S,maxWidth:"max-w-4xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-2 text-white",children:"áŸáŸ’áœáŸ‚á„ášá€á‘á¸áá¶áŸ†á„"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:'á”á“áŸ’á‘á¶á”áŸ‹á–á¸ášá€áƒá¾á‰á‘á¸áá¶áŸ†á„ááŸ’ášá¹á˜ááŸ’ášá¼áœ áŸá¼á˜á…á˜áŸ’á›á„ (Copy) á¢á¶áŸá™áŠáŸ’á‹á¶á“ á¬ Link ášá½á…á”á·á‘á•áŸ’á‘á¶áŸ†á„á“áŸáŸ‡ á á¾á™á”á·á‘á—áŸ’á‡á¶á”áŸ‹ (Paste) á…á¼á›á‘áŸ…á€áŸ’á“á»á„á”áŸ’ášá¢á”áŸ‹ "á‘á¸áá¶áŸ†á„á›á˜áŸ’á¢á·á" áœá·á‰áŸ”'}),e.jsxs("div",{className:"relative w-full h-[70vh] bg-gray-900 rounded-lg overflow-hidden border border-gray-700",children:[i&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[e.jsx(Me,{size:"lg"}),e.jsx("span",{className:"ml-3 text-gray-300",children:"á€áŸ†á–á»á„áŠáŸ†áá¾ášá€á¶ášá•áŸ‚á“á‘á¸..."})]}),e.jsx("iframe",{src:C,width:"100%",height:"100%",style:{border:0},allowFullScreen:!1,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",onLoad:()=>o(!1),className:i?"opacity-0":"opacity-100 transition-opacity duration-500"})]})]}):null},kt=({schedule:f,time:S,onChange:C})=>{const i=()=>{C({schedule:!f,time:f?"":S})};return e.jsxs("div",{className:`relative overflow-hidden p-6 rounded-[2rem] border transition-all duration-500 ${f?"bg-cyan-500/10 border-cyan-500 shadow-[0_0_25px_rgba(6,182,212,0.15)]":"bg-gray-900/40 border-gray-700"}`,children:[e.jsx("style",{children:`
                /* á”áŸ’áŠá¼ášá–ááŸŒ á“á·á„á–á„áŸ’ášá¸á€á‘áŸ†á áŸ† Default Calendar Icon ášá”áŸáŸ‹ Browser */
                .cyan-calendar-picker::-webkit-calendar-picker-indicator {
                    cursor: pointer;
                    /* á”áŸ’áŠá¼ášá–ááŸŒá‘áŸ…á‡á¶ Cyan */
                    filter: invert(56%) sepia(86%) saturate(2256%) hue-rotate(150deg) brightness(98%) contrast(101%);
                    padding: 8px;
                    width: 24px;
                    height: 24px;
                    transform: scale(1.3); /* á–á„áŸ’ášá¸á€á±áŸ’á™á’áŸ†á‡á¶á„á˜á»á“ */
                    border-radius: 12px;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                }
                .cyan-calendar-picker::-webkit-calendar-picker-indicator:hover {
                    background: rgba(6, 182, 212, 0.15);
                    transform: scale(1.45);
                    filter: invert(60%) sepia(90%) saturate(2500%) hue-rotate(160deg) brightness(110%) contrast(110%);
                }
                .cyan-calendar-picker::-webkit-calendar-picker-indicator:active {
                    transform: scale(1.2);
                }
            `}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-500 ${f?"bg-cyan-500 text-white shadow-lg shadow-cyan-500/30":"bg-gray-800 text-gray-500"}`,children:e.jsx("svg",{className:"w-7 h-7",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-black uppercase tracking-widest transition-colors ${f?"text-cyan-400":"text-gray-400"}`,children:"á€áŸ†áááŸ‹á–áŸá› Telegram"}),e.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase opacity-60",children:"Auto-Send Schedule"})]})]}),e.jsx("button",{type:"button",onClick:i,className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none ${f?"bg-cyan-500":"bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform duration-300 ease-in-out ${f?"translate-x-6":"translate-x-1"}`})})]}),f&&e.jsxs("div",{className:"animate-fade-in-down pt-6 mt-4 border-t border-cyan-500/10",children:[e.jsx("div",{className:"relative group",children:e.jsx("input",{type:"datetime-local",value:S||"",onChange:o=>C({schedule:f,time:o.target.value}),onClick:o=>{try{"showPicker"in HTMLInputElement.prototype&&o.currentTarget.showPicker()}catch{}},className:"cyan-calendar-picker form-input !py-4 !pl-5 !pr-14 bg-black/40 border-cyan-500/20 text-white font-mono font-bold rounded-2xl focus:border-cyan-500 focus:ring-4 focus:ring-cyan-500/10 transition-all text-sm w-full cursor-pointer",min:new Date().toISOString().slice(0,16)})}),e.jsx("p",{className:"text-[9px] text-cyan-400/60 font-black uppercase tracking-widest text-center mt-3",children:"áŸá¶ášá“á¹á„ááŸ’ášá¼áœá•áŸ’á‰á¾áŠáŸ„á™áŸáŸ’áœáŸá™á”áŸ’ášáœááŸ’áá·áá¶á˜á˜áŸ‰áŸ„á„á€áŸ†áááŸ‹"})]}),e.jsx("div",{className:`absolute -right-6 -bottom-6 w-24 h-24 bg-cyan-500 transition-opacity duration-700 rounded-full blur-[40px] pointer-events-none ${f?"opacity-10":"opacity-0"}`})]})},tt=({bankAccounts:f,selectedBankName:S,onSelect:C})=>!f||f.length===0?e.jsx("div",{className:"p-4 text-center border-2 border-dashed border-gray-700 rounded-xl bg-gray-800/30",children:e.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"No Bank Accounts Configured"})}):e.jsx("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 animate-fade-in-down",children:f.map(i=>{const o=S===i.BankName;return e.jsxs("button",{type:"button",onClick:()=>C(i.BankName),className:`
                            relative flex flex-col items-center justify-center p-3 sm:p-4 rounded-xl sm:rounded-2xl border-2 transition-all duration-200 group
                            ${o?"bg-blue-600/10 border-blue-500 shadow-[0_0_20px_rgba(37,99,235,0.2)]":"bg-gray-900/60 border-gray-700 hover:border-gray-500 hover:bg-gray-800"}
                        `,children:[e.jsx("div",{className:`
                            w-10 h-10 sm:w-12 sm:h-12 rounded-lg sm:rounded-xl flex items-center justify-center bg-white p-1 mb-2 sm:mb-3 transition-transform duration-300
                            ${o?"scale-110 shadow-lg":"grayscale group-hover:grayscale-0"}
                        `,children:i.LogoURL?e.jsx("img",{src:ge(i.LogoURL),alt:i.BankName,className:"w-full h-full object-contain"}):e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}),e.jsx("span",{className:`
                            text-[10px] font-black uppercase tracking-wider text-center leading-tight
                            ${o?"text-white":"text-gray-400 group-hover:text-gray-200"}
                        `,children:i.BankName}),o&&e.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center shadow-md animate-scale-in",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]},i.BankName)})}),Ge={id:Date.now(),name:"",quantity:1,originalPrice:0,finalPrice:0,total:0,discountPercent:0,colorInfo:"",image:"",cost:0,discountType:"percent",discountAmountInput:"",discountPercentInput:"",finalPriceInput:"",applyDiscountToTotal:!1},Ve=[{number:1,title:"á¢áá·áá·á‡á“"},{number:2,title:"á•á›á·áá•á›"},{number:3,title:"áŠá¹á€á‡á‰áŸ’á‡á¼á“"},{number:4,title:"á•áŸ’á‘áŸ€á„á•áŸ’á‘á¶ááŸ‹"}],St=({team:f,onSaveSuccess:S,onCancel:C})=>{const{appData:i,currentUser:o,apiKey:_,previewImage:U}=r.useContext(ze),[v,Y]=r.useState(1),[h,ne]=r.useState(!1),$=r.useRef(new Audio("https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3")),xe=r.useRef(new Audio("https://samnangh849-source.github.io/ButtonTest/Send.mp3"));r.useEffect(()=>{$.current.volume=.4,xe.current.volume=.6},[]);const se=r.useMemo(()=>({page:"",telegramValue:"",fulfillmentStore:"",pageSelectMode:"cards",customer:{name:"",phone:"",province:"",district:"",sangkat:"",additionalLocation:"",shippingFee:""},products:[{...Ge,id:Date.now()}],shipping:{method:"",details:"",cost:""},payment:{status:"Unpaid",info:""},telegram:{schedule:!1,time:""},subtotal:0,grandTotal:0,note:""}),[]),[s,M]=r.useState(se),[be,fe]=r.useState(!1),[ae,re]=r.useState(""),[ce,q]=r.useState(null),[Q,oe]=r.useState(null),[ie,ve]=r.useState(""),[we,Ne]=r.useState(""),[ye,X]=r.useState(!1),[me,B]=r.useState("charge"),[Z,J]=r.useState(!1),[he,x]=r.useState(""),[g,b]=r.useState("increment"),u=r.useMemo(()=>`createOrderDraft_${o==null?void 0:o.UserName}_${f}`,[o,f]);r.useEffect(()=>{window.innerWidth<768&&window.scrollTo({top:0,behavior:"smooth"})},[v]),r.useEffect(()=>{var d,p;try{const m=localStorage.getItem(u);if(m){const t=JSON.parse(m);if(M(a=>({...a,...t})),t.customer&&typeof t.customer.shippingFee=="number"&&B(t.customer.shippingFee===0?"free":"charge"),t.customer.phone){const a=t.customer.phone,l=(d=i.phoneCarriers)==null?void 0:d.find(n=>(n.Prefixes||"").split(",").some(c=>a.startsWith(c.trim())));ve(l?ge(l.CarrierLogoURL):"")}if(t.shipping.method){const a=(p=i.shippingMethods)==null?void 0:p.find(l=>l.MethodName===t.shipping.method);oe(a||null),Ne(a?ge(a.LogosURL):"")}}}catch{localStorage.removeItem(u)}},[u,i.phoneCarriers,i.shippingMethods]),r.useEffect(()=>{const d=setTimeout(()=>{localStorage.setItem(u,JSON.stringify(s))},500);return()=>clearTimeout(d)},[s,u]);const w=()=>ne(!0),W=()=>{localStorage.removeItem(u),ne(!1),C()},E=r.useMemo(()=>i.pages?i.pages.filter(d=>d.Team===f):[],[i.pages,f]);r.useEffect(()=>{if(E.length===1&&!s.page){const d=E[0];M(p=>({...p,page:d.PageName,telegramValue:d.TelegramValue,fulfillmentStore:d.DefaultStore||s.fulfillmentStore}))}},[E,s.page]);const A=r.useMemo(()=>i.locations?[...new Set(i.locations.map(d=>d.Province))]:[],[i.locations]),z=r.useMemo(()=>!i.locations||!s.customer.province?[]:[...new Set(i.locations.filter(d=>d.Province===s.customer.province).map(d=>d.District))].sort((d,p)=>String(d).localeCompare(String(p),"km")),[i.locations,s.customer.province]),G=r.useMemo(()=>!i.locations||!s.customer.province||!s.customer.district?[]:[...new Set(i.locations.filter(d=>d.Province===s.customer.province&&d.District===s.customer.district).map(d=>d.Sangkat).filter(Boolean))].sort((d,p)=>String(d).localeCompare(String(p),"km")),[i.locations,s.customer.province,s.customer.district]);r.useEffect(()=>{const d=s.products.reduce((m,t)=>m+(t.total||0),0),p=d+(Number(s.customer.shippingFee)||0);(d!==s.subtotal||p!==s.grandTotal)&&M(m=>({...m,subtotal:d,grandTotal:p}))},[s.products,s.customer.shippingFee]);const T=(d,p)=>{const m={...d},t=p.find(c=>c.ProductName===m.name);m.quantity=Math.max(1,Number(m.quantity)||1),m.originalPrice=Math.max(0,t&&Number(t.Price)||0),m.cost=Math.max(0,t&&Number(t.Cost)||0);const a=m.quantity*m.originalPrice;let l=a,n=0;switch(m.discountType){case"percent":const c=Math.max(0,Number(m.discountPercentInput)||0);n=a*(c/100),l=a-n;break;case"amount":const D=Math.max(0,Number(m.discountAmountInput)||0);n=m.quantity>1&&m.applyDiscountToTotal?D:D*m.quantity,l=a-n;break;case"custom":const K=Math.max(0,Number(m.finalPriceInput)||0);l=m.quantity*K,n=a-l,m.finalPrice=K;break}return m.total=Math.max(0,l),m.finalPrice=m.quantity>0?m.total/m.quantity:0,m.discountPercent=a>0?n/a*100:0,m.discountType!=="custom"&&(m.finalPriceInput=m.finalPrice.toFixed(2)),m},ue=r.useCallback(d=>{const p=i.products.find(m=>m.Barcode&&m.Barcode.trim()===d.trim());p&&(M(m=>{const t=m.products.findIndex(l=>l.name===p.ProductName);let a;if(t>-1){const l={...m.products[t]};g==="increment"&&(l.quantity+=1);const n=T(l,i.products);a=[...m.products],a[t]=n}else{const l=m.products.findIndex(D=>!D.name),n={...Ge,id:Date.now(),name:p.ProductName,quantity:1,originalPrice:p.Price,cost:p.Cost,image:p.ImageURL,tags:p.Tags},c=T(n,i.products);l>-1?(a=[...m.products],a[l]=c):a=[...m.products,c]}return{...m,products:a}}),g==="single"&&X(!1))},[i.products,g]),O=d=>{const{name:p,value:m}=d.target;if(p==="phone"){let t=m.replace(/[^0-9]/g,"");t.length>1&&t.startsWith("00")?t="0"+t.substring(2):t.length>0&&!t.startsWith("0")&&(t="0"+t);let a=null;t.length>=2&&i.phoneCarriers&&(a=i.phoneCarriers.find(l=>(l.Prefixes||"").split(",").some(n=>t.startsWith(n.trim())))),ve(a?ge(a.CarrierLogoURL):""),M(l=>({...l,customer:{...l.customer,phone:t}}));return}if(p==="shippingFee"){const t=m===""?"":Math.max(0,parseFloat(m));M(a=>({...a,customer:{...a.customer,shippingFee:t}}));return}M(t=>{let a={...t.customer,[p]:m};return p==="province"?(a.district="",a.sangkat=""):p==="district"&&(a.sangkat=""),{...t,customer:a}})},H=(d,p,m,t)=>{M(a=>{const l=[...a.products];let n={...l[d]};if(["discountPercentInput","discountAmountInput","finalPriceInput"].includes(p)){let c=String(m).replace(/[^0-9.]/g,"").replace(/(\..*?)\./g,"$1");c.startsWith("0")&&c.length>1&&!c.startsWith("0.")&&(c=String(parseFloat(c))),n[p]=c}else p==="quantity"?n[p]=m===""?0:Math.max(0,parseInt(m)||0):n[p]=m;if(p==="name"){const c=i.products.find(D=>D.ProductName===m);n.name=m,c?(n.originalPrice=c.Price,n.image=c.ImageURL,n.cost=c.Cost,n.discountType="percent",n.finalPrice=c.Price,n.finalPriceInput=String(c.Price),n.tags=t!==void 0?t:c.Tags):(n.originalPrice=0,n.image="",n.cost=0,n.discountType="custom",n.finalPrice=0,n.tags="")}return p==="discountType"&&(n.discountPercentInput="",n.discountAmountInput="",n.finalPrice=n.originalPrice,n.finalPriceInput=String(n.originalPrice)),l[d]=T(n,i.products),{...a,products:l}})},pe=d=>{oe(d),Ne(ge(d.LogosURL)),M(p=>({...p,shipping:{...p.shipping,method:d.MethodName,details:d.RequireDriverSelection?"":d.MethodName}}))},F=d=>{const{name:p,value:m}=d.target;let t=m;if(p==="cost"){t.startsWith("0")&&t.length>1&&!t.startsWith("0.")&&(t=String(parseFloat(t)));const a=parseFloat(t)||0;t=String(Math.max(0,a))}M(a=>({...a,shipping:{...a.shipping,[p]:t}}))},N=d=>{M(p=>({...p,shipping:{...p.shipping,details:d}}))},k=d=>{M(p=>({...p,payment:{...p.payment,info:d}}))},R=d=>{B(d),M(p=>({...p,customer:{...p.customer,shippingFee:d==="free"?0:""}}))},L=()=>{if(!_){alert("API Key Required for Maps.");return}const{province:d,district:p,sangkat:m,additionalLocation:t}=s.customer,a=[t,m,p,d,"Cambodia"].filter(Boolean).join(", ");x(`https://www.google.com/maps/embed/v1/search?key=${_}&q=${encodeURIComponent(a)}`),J(!0)},ee=d=>{switch(re(""),d){case 1:return!s.customer.name||!s.customer.phone||!s.customer.province||!s.page||!s.fulfillmentStore?(re("áŸá¼á˜á”áŸ†á–áŸá‰áˆáŸ’á˜áŸ„áŸ‡, á›áŸáá‘á¼ášáŸáŸá–áŸ’á‘, ááŸááŸ’á/á€áŸ’ášá»á„, Page á“á·á„áƒáŸ’á›á¶áŸ†á„á”á‰áŸ’á…áŸá‰á‘áŸ†á“á·á‰áŸ”"),!1):me==="charge"&&(s.customer.shippingFee===""||s.customer.shippingFee<0)?(re("áŸá¼á˜á”á‰áŸ’á…á¼á›áá˜áŸ’á›áŸƒáŠá¹á€á‡á‰áŸ’á‡á¼á“á±áŸ’á™á”á¶á“ááŸ’ášá¹á˜ááŸ’ášá¼áœáŸ”"),!1):!0;case 2:return s.products.length===0||s.products.some(p=>!p.name||p.quantity<=0)?(re("áŸá¼á˜á–á·á“á·ááŸ’á™á‘á·á“áŸ’á“á“áŸá™á•á›á·áá•á›áŸ”"),!1):!0;case 3:return!s.shipping.method||Q!=null&&Q.RequireDriverSelection&&!s.shipping.details||s.shipping.cost===""||parseFloat(s.shipping.cost)<0?(re("áŸá¼á˜á–á·á“á·ááŸ’á™á–áŸááŸŒá˜á¶á“áŠá¹á€á‡á‰áŸ’á‡á¼á“áŸ”"),!1):!0;case 4:return s.payment.status==="Paid"&&!s.payment.info?(re("áŸá¼á˜á‡áŸ’ášá¾áŸášá¾áŸá‚áá“á¸á’á“á¶á‚á¶ášáŸ”"),!1):s.telegram.schedule&&!s.telegram.time?(re("áŸá¼á˜á‡áŸ’ášá¾áŸášá¾áŸá–áŸá›áœáŸá›á¶á•áŸ’á‰á¾áŸá¶ášáŸ”"),!1):!0;default:return!0}},j=()=>{ee(v)&&Y(v+1)},y=()=>{v>1&&Y(v-1)},te=async()=>{for(const l of Ve)if(!ee(l.number)){Y(l.number);return}fe(!0);let d="0"+s.customer.phone.replace(/[^0-9]/g,"").replace(/^0+/,"");const m=[s.customer.additionalLocation,s.customer.sangkat,s.customer.district].filter(Boolean).join(", ");let t=s.telegram.schedule?s.telegram.time:"";t&&(t=t.replace("T"," "));const a={currentUser:o,selectedTeam:f,page:s.page,telegramValue:s.telegramValue,customer:{...s.customer,phone:d,shippingFee:Number(s.customer.shippingFee)||0},"Customer Name":s.customer.name,"Customer Phone":d,Location:s.customer.province,"Address Details":m,"Internal Shipping Method":s.shipping.method,"Internal Shipping Details":s.shipping.details,"Internal Cost":Number(s.shipping.cost)||0,"Payment Status":s.payment.status,"Payment Info":s.payment.info,"Fulfillment Store":s.fulfillmentStore,products:s.products.map(l=>({name:l.name,quantity:Number(l.quantity)||1,originalPrice:Number(l.originalPrice)||0,finalPrice:Number(l.finalPrice)||0,total:Number(l.total)||0,colorInfo:l.colorInfo,cost:Number(l.cost)||0,tags:l.tags})),shipping:{...s.shipping,cost:Number(s.shipping.cost)||0},payment:s.payment,subtotal:Number(s.subtotal)||0,grandTotal:Number(s.grandTotal)||0,note:s.note,fulfillmentStore:s.fulfillmentStore,scheduledTime:t};try{const l=await fetch(`${Te}/api/submit-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await l.json();if(!l.ok||n.status!=="success")throw new Error(n.message||"Error");xe.current.currentTime=0,xe.current.play().catch(()=>{});try{const c=s.products.map(K=>K.name).join(", "),D=`ğŸ“¢ NEW ORDER: ${f} | ${s.page} | ğŸ‘¤ ${o==null?void 0:o.FullName} | ğŸ’° $${a.grandTotal} | ğŸ“ ${s.customer.province} | ğŸ“¦ ${c}`;await fetch(`${Te}/api/chat/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:o==null?void 0:o.UserName,type:"text",content:D})})}catch(c){console.warn("Failed to send system notification",c)}await mt((o==null?void 0:o.UserName)||"Unknown","CREATE_ORDER",`Created Order ID: ${n.orderId} for ${s.customer.name}`),localStorage.removeItem(u),q({type:"success",message:`á‡áŸ„á‚á‡áŸá™! Order ID: ${n.orderId}`}),setTimeout(S,3e3)}catch(l){q({type:"error",message:`á”ášá¶á‡áŸá™: ${l.message}`}),setTimeout(()=>q(null),3e3)}finally{fe(!1)}},Pe=()=>{var d,p;switch(v){case 1:return e.jsxs("fieldset",{className:"border border-gray-600 p-3 sm:p-4 rounded-lg animate-fade-in space-y-6",children:[e.jsx("legend",{className:"px-2 text-base sm:text-lg font-semibold text-blue-300",children:"á–áŸááŸŒá˜á¶á“á¢áá·áá·á‡á“ & Page"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("label",{className:"input-label font-black text-xs uppercase tracking-widest text-gray-500 mb-0 block",children:"Facebook Page*"}),e.jsxs("div",{className:"flex bg-gray-900/80 p-1 rounded-xl border border-gray-700",children:[e.jsxs("button",{type:"button",onClick:()=>M({...s,pageSelectMode:"cards"}),className:`px-3 py-1.5 text-[10px] font-black uppercase rounded-lg transition-all flex items-center gap-2 ${s.pageSelectMode==="cards"?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2z",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Card View"]}),e.jsxs("button",{type:"button",onClick:()=>M({...s,pageSelectMode:"search"}),className:`px-3 py-1.5 text-[10px] font-black uppercase rounded-lg transition-all flex items-center gap-2 ${s.pageSelectMode==="search"?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Search View"]})]})]}),e.jsx("div",{className:"animate-fade-in-down",children:s.pageSelectMode==="cards"?e.jsx(jt,{pages:E,selectedPageName:s.page,onSelect:t=>M({...s,page:t.PageName,telegramValue:t.TelegramValue,fulfillmentStore:t.DefaultStore||s.fulfillmentStore})}):e.jsx(vt,{pages:E,selectedPageName:s.page,onSelect:t=>M({...s,page:t.PageName,telegramValue:t.TelegramValue,fulfillmentStore:t.DefaultStore||s.fulfillmentStore})})})]}),e.jsxs("div",{className:"md:col-span-2 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-1.5 h-4 bg-orange-500 rounded-full"}),e.jsx("label",{className:"input-label !mb-0 font-black text-xs uppercase tracking-widest text-orange-400",children:"áƒáŸ’á›á¶áŸ†á„á”á‰áŸ’á…áŸá‰á‘áŸ†á“á·á‰ (Store)*"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:(d=i.stores)==null?void 0:d.map(t=>{const a=s.fulfillmentStore===t.StoreName;return e.jsxs("button",{type:"button",onClick:()=>M({...s,fulfillmentStore:t.StoreName}),className:`relative overflow-hidden group p-4 rounded-2xl border-2 transition-all duration-300 flex flex-col items-center text-center gap-2 ${a?"bg-orange-500/10 border-orange-500 shadow-[0_0_20px_rgba(249,115,22,0.2)]":"bg-gray-900 border-gray-800 hover:border-gray-600"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-colors ${a?"bg-orange-500 text-white":"bg-gray-800 text-gray-500 group-hover:text-gray-300"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("span",{className:`text-[11px] font-black uppercase tracking-tight ${a?"text-white":"text-gray-400"}`,children:t.StoreName}),a&&e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]},t.StoreName)})})]}),e.jsx("input",{type:"text",name:"name",value:s.customer.name,placeholder:"áˆáŸ’á˜áŸ„áŸ‡á¢áá·áá·á‡á“*",className:"form-input !py-3 rounded-xl border-gray-700 bg-gray-900",onChange:O,required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"tel",name:"phone",value:s.customer.phone,placeholder:"á›áŸáá‘á¼ášáŸáŸá–áŸ’á‘*",className:"form-input !py-3 rounded-xl border-gray-700 bg-gray-900 pr-12",onChange:O,required:!0}),ie&&e.jsx("img",{src:ie,alt:"Carrier",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-auto object-contain"})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(xt,{provinces:A,selectedProvince:s.customer.province,onSelect:t=>O({target:{name:"province",value:t}})}),e.jsxs("select",{name:"district",value:s.customer.district,className:"form-select",onChange:O,disabled:!s.customer.province,children:[e.jsx("option",{value:"",children:"-- áŸáŸ’ášá»á€/áááŸ’áŒ --"}),z.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{name:"sangkat",value:s.customer.sangkat,className:"form-select",onChange:O,disabled:!s.customer.district,children:[e.jsx("option",{value:"",children:"-- áƒá»áŸ†/áŸá„áŸ’á€á¶ááŸ‹ --"}),G.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"á‘á¸áá¶áŸ†á„á›á˜áŸ’á¢á·á (á•áŸ’á‘áŸ‡á›áŸá, á•áŸ’á›á¼áœ)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"additionalLocation",value:s.customer.additionalLocation,placeholder:"á”á‰áŸ’á…á¼á›á‘á¸áá¶áŸ†á„á›á˜áŸ’á¢á·á...",className:"form-input !py-3 rounded-xl bg-gray-900 border-gray-700",onChange:O}),e.jsx("button",{type:"button",onClick:L,className:"p-3 bg-blue-600/10 text-blue-400 rounded-xl border border-blue-500/20 hover:bg-blue-600 hover:text-white transition-all active:scale-90",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"ááŸ’á›áŸƒáŸáŸáœá¶áŠá¹á€á‡á‰áŸ’á‡á¼á“"}),e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>R("charge"),className:`flex-1 py-3 px-4 rounded-xl text-xs font-black uppercase transition-all border ${me==="charge"?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-300"}`,children:"á‚á·áááŸ’á›áŸƒáŸáŸáœá¶"}),e.jsx("button",{type:"button",onClick:()=>R("free"),className:`flex-1 py-3 px-4 rounded-xl text-xs font-black uppercase transition-all border ${me==="free"?"bg-emerald-600 border-emerald-500 text-white shadow-lg shadow-emerald-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-300"}`,children:"á˜á·á“á‚á·áááŸ’á›áŸƒáŸáŸáœá¶"})]}),me==="charge"&&e.jsxs("div",{className:"space-y-3 animate-fade-in",children:[e.jsx("input",{type:"number",min:"0",name:"shippingFee",value:s.customer.shippingFee,placeholder:"áá˜áŸ’á›áŸƒáŠá¹á€á‡á‰áŸ’á‡á¼á“ (á§. 1.5)*",className:"form-input !py-3 rounded-xl border-gray-700 bg-gray-900",onChange:O,required:!0}),e.jsx("div",{className:"flex gap-2",children:[1,1.5,2].map(t=>{const a=parseFloat(s.customer.shippingFee)===t;return e.jsxs("button",{type:"button",onClick:()=>O({target:{name:"shippingFee",value:String(t)}}),className:`flex-1 py-2 border font-black rounded-xl text-xs transition-all active:scale-95 ${a?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-200"}`,children:["$",t]},t)})})]})]})]})]});case 2:return e.jsxs("fieldset",{className:"border border-gray-600 p-3 sm:p-4 rounded-lg animate-fade-in space-y-4 sm:space-y-6",children:[e.jsx("legend",{className:"px-2 text-base sm:text-lg font-semibold text-blue-300",children:"á•á›á·áá•á› & á€á¶ášá”á‰áŸ’á…á»áŸ‡áá˜áŸ’á›áŸƒ"}),e.jsx("div",{className:"space-y-4 sm:space-y-6",children:s.products.map((t,a)=>{const l=(Number(t.quantity)||0)*(Number(t.originalPrice)||0),n=l-(Number(t.total)||0);return e.jsxs("div",{className:"p-3 sm:p-5 bg-gray-800/40 rounded-2xl sm:rounded-3xl border border-gray-700 relative shadow-xl overflow-hidden group",children:[e.jsx("button",{type:"button",onClick:()=>{s.products.length>1&&M({...s,products:s.products.filter((c,D)=>D!==a)})},className:"absolute top-2 right-2 sm:top-4 sm:right-4 text-red-400 bg-red-400/10 rounded-full h-6 w-6 sm:h-8 sm:w-8 flex items-center justify-center border border-red-400/20 hover:bg-red-600 hover:text-white transition-all z-10 active:scale-90",disabled:s.products.length<=1,children:"Ã—"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 sm:gap-6 mb-4 sm:mb-6",children:[e.jsx("div",{className:"md:col-span-2 flex justify-center",children:e.jsx("div",{className:"w-20 h-20 sm:w-28 sm:h-28 bg-gray-900 rounded-xl sm:rounded-2xl overflow-hidden border-2 border-gray-700 shadow-inner group-hover:border-blue-500/50 transition-colors",children:e.jsx("img",{src:ge(t.image),className:"w-full h-full object-cover",alt:""})})}),e.jsxs("div",{className:"md:col-span-10 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"áˆáŸ’á˜áŸ„áŸ‡á•á›á·áá•á›*"}),e.jsx(ct,{products:i.products||[],selectedProductName:t.name,onSelect:(c,D)=>H(a,"name",c,D)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsx(dt,{value:t.quantity,onChange:c=>H(a,"quantity",c)}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"á–ááŸŒ/áŸá˜áŸ’á‚á¶á›áŸ‹"}),e.jsx("input",{type:"text",list:`colors-datalist-${t.id}`,value:t.colorInfo,onChange:c=>H(a,"colorInfo",c.target.value),className:"form-input text-sm !py-2.5 rounded-xl bg-gray-900 border-gray-700",placeholder:"á§. ááŸ€áœ, XL"}),e.jsx("datalist",{id:`colors-datalist-${t.id}`,children:(i.colors||[]).map((c,D)=>e.jsx("option",{value:c.ColorName},D))})]})]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-xl sm:rounded-[2rem] p-3 sm:p-6 border border-white/5 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"h-px flex-grow bg-gray-700/50"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] whitespace-nowrap",children:"Pricing & Discount"}),e.jsx("div",{className:"h-px flex-grow bg-gray-700/50"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"flex bg-gray-900/50 p-1 rounded-xl sm:rounded-2xl border border-gray-700 shadow-inner",children:["percent","amount","custom"].map(c=>e.jsx("button",{type:"button",onClick:()=>H(a,"discountType",c),className:`flex-1 flex flex-col items-center justify-center py-2 sm:py-2.5 rounded-lg sm:rounded-xl transition-all duration-300 active:scale-95 ${t.discountType===c?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:e.jsx("span",{className:"text-[9px] sm:text-[11px] font-black uppercase tracking-widest",children:c==="percent"?"á”á‰áŸ’á…á»áŸ‡ %":c==="amount"?"á”á‰áŸ’á…á»áŸ‡ $":"á€áŸ‚áá˜áŸ’á›áŸƒá›á€áŸ‹"})},c))}),e.jsxs("div",{className:"relative animate-fade-in",children:[t.discountType==="percent"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 ml-1",children:"á”á‰áŸ’á…á¼á›á—á¶á‚ášá™á”á‰áŸ’á…á»áŸ‡áá˜áŸ’á›áŸƒ (%)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",max:"100",placeholder:"0",value:t.discountPercentInput,onChange:c=>H(a,"discountPercentInput",c.target.value),className:"form-input !text-base sm:!text-lg !font-black !py-2 sm:!py-3 pr-10 text-right text-blue-400 bg-gray-900 border-gray-700"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-black",children:"%"})]})]}),t.discountType==="amount"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 ml-1",children:"á”á‰áŸ’á…á¼á›á‘á¹á€á”áŸ’ášá¶á€áŸ‹á”á‰áŸ’á…á»áŸ‡áá˜áŸ’á›áŸƒ ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",placeholder:"0.00",value:t.discountAmountInput,onChange:c=>H(a,"discountAmountInput",c.target.value),className:"form-input !text-base sm:!text-lg !font-black !py-2 sm:!py-3 pr-10 text-right text-red-400 bg-gray-900 border-gray-700"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-black",children:"$"})]}),t.quantity>1&&e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-black/20 rounded-lg mt-1 sm:mt-2 border border-white/5 active:scale-95 transition-transform",children:[e.jsx("input",{type:"checkbox",checked:t.applyDiscountToTotal,onChange:c=>H(a,"applyDiscountToTotal",c.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-gray-800 text-blue-500"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] text-gray-400 uppercase font-black",children:"á”á‰áŸ’á…á»áŸ‡á›á¾áá˜áŸ’á›áŸƒáŸášá»á”"})]})]}),t.discountType==="custom"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 ml-1",children:"á€áŸ†áááŸ‹áá˜áŸ’á›áŸƒá›á€áŸ‹ááŸ’á˜á¸á€áŸ’á“á»á„ áŸ¡ á¯á€áá¶ ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",inputMode:"decimal",placeholder:"0.00",value:t.finalPriceInput,onChange:c=>H(a,"finalPriceInput",c.target.value),className:"form-input !text-base sm:!text-lg !font-black !py-2 sm:!py-3 pr-10 text-right text-emerald-400 bg-gray-900 border-gray-700"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-black",children:"$"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-900/60 rounded-xl sm:rounded-[1.5rem] p-3 sm:p-5 border border-white/5 flex flex-col justify-between",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-[10px] sm:text-xs",children:[e.jsx("span",{className:"text-gray-500 font-bold uppercase",children:"Original Subtotal"}),e.jsxs("span",{className:"text-blue-400 font-black",children:["$",l.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] sm:text-xs",children:[e.jsx("span",{className:"text-gray-500 font-bold uppercase",children:"Discount Applied"}),e.jsxs("span",{className:"text-red-400 font-black",children:["-",n>0?`$${n.toFixed(2)}`:"$0.00"]})]}),e.jsx("div",{className:"h-px bg-gray-700/50 my-1"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[9px] sm:text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Net Total"}),e.jsxs("span",{className:"text-xl sm:text-2xl font-black text-white tracking-tighter",children:["$",(t.total||0).toFixed(2)]})]})]}),e.jsx("div",{className:"mt-3 sm:mt-4 pt-2 sm:pt-3 border-t border-white/5 flex justify-center",children:e.jsxs("span",{className:"text-[8px] sm:text-[9px] bg-emerald-500/10 text-emerald-400 px-2 sm:px-3 py-1 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest",children:["Avg. $",(t.finalPrice||0).toFixed(2)," / unit"]})})]})]})]})]},t.id)})}),e.jsxs("div",{className:"bg-gray-900/80 p-4 rounded-2xl border border-blue-500/20 shadow-lg flex flex-col sm:flex-row justify-between items-center gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg text-blue-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Total Quantity"}),e.jsxs("span",{className:"text-lg font-black text-white",children:[s.products.reduce((t,a)=>t+(Number(a.quantity)||0),0)," items"]})]})]}),e.jsx("div",{className:"h-px w-full sm:w-px sm:h-10 bg-gray-700"}),e.jsxs("div",{className:"flex flex-col items-center sm:items-end",children:[e.jsx("span",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest",children:"Estimated Subtotal"}),e.jsxs("span",{className:"text-3xl font-black text-white tracking-tighter drop-shadow-md",children:["$",(s.subtotal||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mt-6",children:[e.jsxs("button",{type:"button",onClick:()=>M({...s,products:[...s.products,{...Ge,id:Date.now()}]}),className:"flex-1 py-4 px-6 bg-gray-800 border border-gray-700 rounded-2xl text-gray-300 font-black uppercase text-[11px] tracking-widest hover:bg-gray-700 hover:border-blue-500 transition-all flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M12 4v16m8-8H4"})}),"á”á“áŸ’ááŸ‚á˜á•á›á·áá•á›"]}),e.jsxs("button",{type:"button",onClick:()=>X(!0),className:"flex-1 py-4 px-6 bg-blue-600/10 border border-blue-500/30 rounded-2xl text-blue-400 font-black uppercase text-[11px] tracking-widest hover:bg-blue-600 hover:text-white transition-all flex items-center justify-center gap-2 shadow-lg shadow-blue-900/10 active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2M17 3h2a2 2 0 0 1 2 2v2M21 17v2a2 2 0 0 1-2 2h-2M7 21H5a2 2 0 0 1-2-2v-2M7 12h10",strokeWidth:"3"})}),"Scan Barcode"]})]})]});case 3:return e.jsxs("fieldset",{className:"border border-gray-600 p-3 sm:p-4 rounded-lg animate-fade-in space-y-4 sm:space-y-6",children:[e.jsx("legend",{className:"px-2 text-base sm:text-lg font-semibold text-blue-300",children:"áŠá¹á€á‡á‰áŸ’á‡á¼á“"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"áœá·á’á¸áŸá¶áŸáŸ’ášáŸ’ááŠá¹á€á‡á‰áŸ’á‡á¼á“*"}),e.jsx(ot,{methods:i.shippingMethods||[],selectedMethodName:s.shipping.method,onSelect:pe})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"input-label font-black text-[10px] uppercase text-gray-500 tracking-widest mb-2 block",children:"ááŸ’á›áŸƒáŸáŸáœá¶á²áŸ’á™á¢áŸ’á“á€áŠá¹á€ (Cost)*"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",step:"0.01",name:"cost",placeholder:"0.00",value:s.shipping.cost,className:"form-input !py-3 rounded-xl bg-gray-900 border-gray-700 text-blue-400 font-black pr-12",onChange:F,required:!0}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"$"})]}),e.jsx("div",{className:"flex gap-2",children:[1.25,1.5,2].map(t=>{const a=parseFloat(s.shipping.cost)===t;return e.jsxs("button",{type:"button",onClick:()=>F({target:{name:"cost",value:String(t)}}),className:`flex-1 py-2 border font-black rounded-xl text-xs transition-all active:scale-95 ${a?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-600/20":"bg-gray-800 border-gray-700 text-gray-400 hover:text-gray-200"}`,children:["$",t]},t)})})]})]}),(Q==null?void 0:Q.RequireDriverSelection)&&e.jsxs("div",{className:"md:col-span-2 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-1",children:[e.jsx("div",{className:"h-4 w-1 bg-blue-500 rounded-full"}),e.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"á‡áŸ’ášá¾áŸášá¾áŸá¢áŸ’á“á€áŠá¹á€ (DriverSelection)*"})]}),e.jsx(it,{drivers:i.drivers||[],selectedDriverName:s.shipping.details,onSelect:N}),!s.shipping.details&&e.jsx("p",{className:"text-center text-[9px] text-gray-500 italic mt-1",children:"áŸá¼á˜á‡áŸ’ášá¾áŸášá¾áŸá¢áŸ’á“á€áŠá¹á€á˜áŸ’á“á¶á€áŸ‹"})]})]})]});case 4:const m=(p=i.drivers)==null?void 0:p.find(t=>t.DriverName===s.shipping.details);return e.jsxs("div",{className:"animate-fade-in space-y-4 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2 sm:mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," á–áŸááŸŒá˜á¶á“á¢áá·áá·á‡á“"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 bg-gray-900/60 p-3 sm:p-5 rounded-2xl sm:rounded-3xl border border-white/5 shadow-inner",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Customer Info"}),e.jsx("p",{className:"text-white font-black text-base sm:text-lg",children:s.customer.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-blue-400 font-bold font-mono text-sm",children:s.customer.phone}),ie&&e.jsx("img",{src:ie,className:"h-4 sm:h-5 w-auto object-contain",alt:"Carrier"})]})]}),e.jsxs("div",{className:"space-y-1 md:text-right",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Location / Store"}),e.jsx("p",{className:"text-gray-200 font-bold text-xs sm:text-sm leading-tight",children:`${s.customer.additionalLocation}, ${s.customer.sangkat}, ${s.customer.district}, ${s.customer.province}`.replace(/^,|,$/g,"").trim()}),e.jsxs("p",{className:"text-purple-400 font-black text-[9px] uppercase tracking-wider",children:["Fulfillment: ",s.fulfillmentStore]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2 sm:mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-orange-500"})," á–áŸááŸŒá˜á¶á“áŠá¹á€á‡á‰áŸ’á‡á¼á“"]}),e.jsxs("div",{className:"bg-gray-900/40 p-3 sm:p-5 rounded-2xl sm:rounded-3xl border border-white/5 shadow-inner grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Shipping Method"}),e.jsxs("div",{className:"flex items-center gap-2",children:[we&&e.jsx("img",{src:we,className:"h-4 sm:h-5 w-auto object-contain",alt:"Logo"}),e.jsx("p",{className:"text-white font-black text-xs sm:text-sm",children:s.shipping.method})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Driver / Details"}),e.jsxs("div",{className:"flex items-center gap-2",children:[m&&e.jsx("img",{src:ge(m.ImageURL),className:"h-6 w-6 sm:h-8 sm:w-8 rounded-full object-cover border border-gray-700 cursor-pointer active:scale-95 transition-transform",alt:"Driver",onClick:()=>U(ge(m.ImageURL))}),e.jsx("p",{className:"text-white font-bold text-xs sm:text-sm",children:s.shipping.details||"N/A"})]})]}),e.jsxs("div",{className:"space-y-1 sm:text-right",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-bold uppercase",children:"Internal Cost ($)"}),e.jsxs("p",{className:"text-orange-400 font-black text-base sm:text-lg font-mono",children:["$",(Number(s.shipping.cost)||0).toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2 sm:mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," á”á‰áŸ’á‡á¸á‘áŸ†á“á·á‰á€á»á˜áŸ’á˜áŸ‰á„áŸ‹"]}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:s.products.map(t=>e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 bg-gray-900/40 p-2 sm:p-3 rounded-xl sm:rounded-2xl border border-white/5 group hover:border-blue-500/30 transition-all",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-800 rounded-lg sm:rounded-xl overflow-hidden border border-gray-700 flex-shrink-0 relative",children:e.jsx("img",{src:ge(t.image),className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",alt:t.name})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-0.5 sm:mb-1",children:[e.jsx("h4",{className:"text-white font-black text-xs sm:text-sm truncate leading-tight",children:t.name}),e.jsx("div",{className:"flex gap-1.5",children:e.jsxs("span",{className:"bg-blue-600/10 text-blue-400 text-[9px] sm:text-[10px] font-black px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded-lg border border-blue-500/20",children:["x",t.quantity]})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t.colorInfo&&e.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded-md font-bold",children:t.colorInfo}),e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-tight",children:[e.jsxs("span",{children:["$",(t.finalPrice||0).toFixed(2)]})," / unit"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white font-black text-sm sm:text-base tracking-tight",children:["$",(t.total||0).toFixed(2)]}),e.jsx("p",{className:"text-[8px] text-gray-600 font-bold uppercase",children:"Subtotal"})]})]},t.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-gray-900/40 p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-white/5 text-center",children:[e.jsx("p",{className:"text-[8px] sm:text-[9px] text-gray-500 font-black uppercase mb-1",children:"áŸášá»á”á‘áŸ†á“á·á‰"}),e.jsxs("p",{className:"text-white font-black text-base sm:text-lg",children:["$",(s.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-gray-900/40 p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-white/5 text-center",children:[e.jsx("p",{className:"text-[8px] sm:text-[9px] text-gray-500 font-black uppercase mb-1",children:"áŸáŸáœá¶áŠá¹á€"}),e.jsxs("p",{className:"text-white font-black text-base sm:text-lg",children:["$",(Number(s.customer.shippingFee)||0).toFixed(2)]})]}),e.jsxs("div",{className:"col-span-2 bg-blue-600/10 p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-blue-500/20 text-center shadow-lg shadow-blue-900/10",children:[e.jsx("p",{className:"text-[9px] sm:text-[10px] text-blue-400 font-black uppercase mb-1 tracking-widest",children:"áŸášá»á”ášá½á˜ (Grand Total)"}),e.jsxs("p",{className:"text-white font-black text-2xl sm:text-3xl tracking-tighter",children:["$",(s.grandTotal||0).toFixed(2)]})]})]}),e.jsxs("fieldset",{className:"border border-gray-700 p-4 sm:p-6 rounded-2xl sm:rounded-3xl bg-gray-900/20",children:[e.jsx("legend",{className:"px-3 text-[10px] sm:text-xs font-black text-blue-400 uppercase tracking-[0.2em]",children:"áŸáŸ’áá¶á“á—á¶á–á‘á¼á‘á¶ááŸ‹"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex bg-gray-900/80 p-1 rounded-2xl border border-gray-700 max-w-md mx-auto sm:mx-0",children:[e.jsxs("button",{type:"button",onClick:()=>M({...s,payment:{...s.payment,status:"Unpaid",info:""}}),className:`flex-1 py-3 px-4 rounded-xl text-xs font-black uppercase transition-all flex flex-col items-center gap-1 ${s.payment.status==="Unpaid"?"bg-red-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx("span",{children:"Unpaid"}),e.jsx("span",{className:"text-[8px] opacity-70 tracking-wider",children:"COD"})]}),e.jsxs("button",{type:"button",onClick:()=>M({...s,payment:{...s.payment,status:"Paid"}}),className:`flex-1 py-3 px-4 rounded-xl text-xs font-black uppercase transition-all flex flex-col items-center gap-1 ${s.payment.status==="Paid"?"bg-emerald-600 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx("span",{children:"Paid"}),e.jsx("span",{className:"text-[8px] opacity-70 tracking-wider",children:"Transfer"})]})]}),s.payment.status==="Paid"&&e.jsxs("div",{className:"animate-fade-in-down space-y-3",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"á‡áŸ’ášá¾áŸášá¾áŸá‚áá“á¸á’á“á¶á‚á¶áš"}),e.jsx(tt,{bankAccounts:i.bankAccounts||[],selectedBankName:s.payment.info,onSelect:t=>k(t)})]})]})]}),e.jsx(kt,{schedule:s.telegram.schedule,time:s.telegram.time,onChange:t=>M({...s,telegram:t})}),e.jsxs("div",{className:"space-y-2 sm:space-y-3 pt-4",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"á…áŸ†áá¶áŸ† & Link Google Map"}),e.jsx("textarea",{placeholder:"á…áŸ†áá¶áŸ†á”á“áŸ’ááŸ‚á˜...",value:s.note,rows:4,onChange:t=>M({...s,note:t.target.value}),className:"form-textarea bg-gray-900/60 !rounded-[1.5rem] sm:!rounded-[2rem] border-white/5 focus:border-blue-500/50 text-sm"})]})]});default:return null}};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto mt-2 sm:mt-10 lg:mt-14 px-1 sm:px-0",children:[e.jsx("style",{children:`
                @keyframes shimmer {
                    0% { background-position: -200% 0; }
                    100% { background-position: 200% 0; }
                }
                .btn-shimmer {
                    background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0) 100%);
                    background-size: 200% 100%;
                    animation: shimmer 3s infinite linear;
                }
                @keyframes pulse-glow {
                    0%, 100% { box-shadow: 0 0 15px rgba(37,99,235,0.3); }
                    50% { box-shadow: 0 0 30px rgba(37,99,235,0.6); }
                }
                .btn-pulse { animation: pulse-glow 2s infinite ease-in-out; }
                @keyframes spin-border {
                    from { --angle: 0deg; }
                    to { --angle: 360deg; }
                }
                @property --angle {
                    syntax: '<angle>';
                    initial-value: 0deg;
                    inherits: false;
                }
                .card-flux {
                    position: relative;
                    background: #0f172a;
                    z-index: 1;
                }
                .card-flux-active::after, .card-flux-active::before {
                    content: '';
                    position: absolute;
                    inset: -2px;
                    z-index: -1;
                    background: conic-gradient(from var(--angle), transparent 70%, #3b82f6, #8b5cf6, #ec4899, #3b82f6);
                    border-radius: inherit;
                    animation: spin-border 3s linear infinite;
                }
                .card-flux-active::before {
                    filter: blur(10px);
                    opacity: 0.7;
                }
                @keyframes float-y {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-5px); }
                }
                .animate-float-y { animation: float-y 3s ease-in-out infinite; }
                @keyframes pulse-soft {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.6; }
                }
                .animate-pulse-soft { animation: pulse-soft 2s ease-in-out infinite; }
             `}),ce&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[100] animate-fade-in p-4",children:e.jsxs("div",{className:"page-card text-center flex flex-col items-center animate-fade-in-scale",children:[ce.type==="success"?e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-green-500/20 text-green-400 rounded-full flex items-center justify-center mb-4 border border-green-500/30 shadow-[0_0_30px_rgba(34,197,94,0.2)]",children:e.jsx("svg",{className:"h-8 w-8 sm:h-10 sm:w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}):e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-red-500/20 text-red-400 rounded-full flex items-center justify-center mb-4 border border-red-500/30",children:e.jsx("svg",{className:"h-8 w-8 sm:h-10 sm:w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("p",{className:"text-base sm:text-lg font-black text-white",children:ce.message})]})}),e.jsx(Nt,{isOpen:Z,onClose:()=>J(!1),url:he}),ye&&e.jsx(nt,{onClose:()=>X(!1),onCodeScanned:ue,scanMode:g,setScanMode:b,productsInOrder:s.products,masterProducts:i.products||[]}),e.jsx(Je,{isOpen:h,onClose:()=>ne(!1),maxWidth:"max-w-sm",children:e.jsxs("div",{className:"p-6 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto w-14 h-14 sm:w-16 sm:h-16 bg-red-500/10 text-red-500 rounded-full flex items-center justify-center border border-red-500/20 shadow-xl shadow-red-900/10 animate-bounce-slow",children:e.jsx("svg",{className:"h-7 w-7 sm:h-8 sm:w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-lg sm:text-xl font-black text-white uppercase tracking-tighter",children:"á”áŸ„áŸ‡á”á„áŸ‹á€á¶ášá”á‰áŸ’á…á¼á›?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>ne(!1),className:"px-6 py-3 bg-gray-800 border border-gray-700 text-gray-300 rounded-2xl flex-1 font-black text-xs sm:text-sm transition-all hover:bg-gray-700 active:scale-95",children:"á‘áŸ (ááŸ’ášá¡á”áŸ‹)"}),e.jsx("button",{onClick:W,className:"px-6 py-3 bg-red-600 border border-red-500 text-white rounded-2xl flex-1 font-black text-xs sm:text-sm transition-all hover:bg-red-700 active:scale-95 shadow-lg shadow-red-900/20",children:"á”á¶á‘ (á”áŸ„áŸ‡á”á„áŸ‹)"})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 sm:mb-10 gap-4",children:[e.jsxs("h1",{className:"hidden md:flex text-2xl sm:text-3xl font-black text-white uppercase tracking-tighter items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"text-blue-500",children:"á€á»á˜áŸ’á˜áŸ‰á„áŸ‹ááŸ’á˜á¸"}),e.jsx("span",{className:"text-[9px] sm:text-[10px] bg-blue-600/20 text-blue-400 px-3 sm:px-4 py-1.5 rounded-full border border-blue-500/20 uppercase tracking-[0.15em] sm:tracking-[0.2em]",children:f})]}),e.jsx("button",{onClick:w,className:"hidden md:block px-6 py-2.5 bg-gray-800 border border-gray-700 hover:border-red-500 hover:bg-red-500/10 text-gray-400 hover:text-red-400 font-black rounded-2xl uppercase text-[10px] sm:text-[11px] tracking-widest transition-all active:scale-90",children:"á”áŸ„áŸ‡á”á„áŸ‹"})]}),e.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-3xl border border-white/5 rounded-[1.5rem] sm:rounded-[3rem] p-3 sm:p-10 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 sm:mb-12 relative px-2 sm:px-4",children:[e.jsx("div",{className:"absolute left-6 right-6 sm:left-10 sm:right-10 top-1/2 w-[calc(100%-48px)] sm:w-[calc(100%-80px)] h-0.5 bg-gray-700 -z-10"}),e.jsx("div",{className:"absolute left-6 sm:left-10 top-1/2 h-0.5 bg-blue-500 -z-10 transition-all duration-500",style:{width:`${(v-1)/(Ve.length-1)*(100-48/400*100)}%`}}),Ve.map(d=>e.jsxs("div",{className:`relative flex flex-col items-center z-10 transition-all duration-500 ${v>=d.number?"scale-110":"opacity-40 scale-90"}`,children:[e.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-xl sm:rounded-2xl flex items-center justify-center font-black text-[10px] sm:text-xs border-2 transition-all duration-500 ${v>=d.number?"border-blue-500 bg-blue-600 text-white shadow-[0_0_20px_rgba(37,99,235,0.4)]":"border-gray-600 bg-gray-800 text-gray-500"}`,children:v>d.number?"âœ“":d.number}),e.jsx("span",{className:`absolute -bottom-6 sm:-bottom-7 text-[8px] sm:text-[9px] font-black uppercase tracking-widest whitespace-nowrap ${v>=d.number?"text-blue-400":"text-gray-600"}`,children:d.title})]},d.number))]}),e.jsx("div",{className:"mt-8 sm:mt-16",children:Pe()}),ae&&e.jsx("div",{className:"mt-4 sm:mt-6 p-3 sm:p-4 bg-red-500/10 border border-red-500/20 rounded-xl sm:rounded-2xl text-red-400 text-center text-[10px] sm:text-xs font-bold animate-shake",children:ae}),e.jsxs("div",{className:"mt-8 sm:mt-10 pt-6 sm:pt-8 border-t border-white/5 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex gap-3 sm:gap-4 h-12 sm:h-16",children:[v>1&&e.jsxs("button",{type:"button",onClick:y,className:"flex-1 px-4 sm:px-8 bg-gray-800 border border-gray-700 text-gray-300 rounded-2xl font-black uppercase text-[10px] sm:text-[12px] tracking-[0.15em] transition-all hover:bg-gray-700 flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M15 19l-7-7 7-7"})}),"ááŸ’ášá¡á”áŸ‹"]}),v<Ve.length?e.jsxs("button",{type:"button",onClick:j,className:"relative flex-[2] bg-blue-600 hover:bg-blue-700 text-white rounded-2xl font-black uppercase text-[12px] sm:text-[14px] tracking-[0.2em] shadow-2xl active:scale-95 transition-all flex items-center justify-center gap-3 group overflow-hidden btn-pulse",children:[e.jsx("div",{className:"absolute inset-0 btn-shimmer pointer-events-none"}),e.jsx("span",{className:"relative z-10",children:"á‡áŸ†á á¶á“á”á“áŸ’á‘á¶á”áŸ‹"}),e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 relative z-10 transform group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M9 5l7 7-7 7"})})]}):e.jsxs("button",{type:"button",onClick:te,className:"relative flex-[2] bg-emerald-600 hover:bg-emerald-700 text-white rounded-2xl font-black uppercase text-[12px] sm:text-[14px] tracking-[0.2em] shadow-2xl active:scale-95 transition-all flex items-center justify-center gap-3 overflow-hidden",disabled:be,children:[e.jsx("div",{className:"absolute inset-0 btn-shimmer pointer-events-none"}),be?e.jsx(Me,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"relative z-10",children:"á”á‰áŸ’á‡á¼á“á€á˜áŸ’á˜áŸ‰á„áŸ‹á¥á¡á¼áœá“áŸáŸ‡"}),e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 relative z-10 animate-bounce-x",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M5 13l4 4L19 7"})})]})]})]}),e.jsx("button",{onClick:w,className:"md:hidden w-full py-4 bg-gray-800/40 text-gray-500 hover:text-red-400 font-black rounded-2xl uppercase text-[10px] tracking-widest transition-all active:scale-95 border border-white/5",children:"á”áŸ„áŸ‡á”á„áŸ‹á€á¶ášá”á‰áŸ’á…á¼á›"})]})]}),e.jsx("style",{children:".animate-bounce-x { animation: bounce-x 1s infinite ease-in-out; } @keyframes bounce-x { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(5px); } }"})]})},Ae=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ct=({orders:f,onBack:S,team:C,onNavigate:i,initialFilters:o,onFilterChange:_})=>{const{appData:U,previewImage:v}=r.useContext(ze),[Y,h]=r.useState(!0),[ne,$]=r.useState(!1),[xe,se]=r.useState(!0),[s,M]=r.useState(!0),[be,fe]=r.useState(!1),[ae,re]=r.useState({key:"revenue",direction:"desc"}),[ce,q]=r.useState([]),[Q,oe]=r.useState(!1),ie=async()=>{const x="user_sales_report_full_data",b=Xe.get(x);if(b)q(b);else{oe(!0);try{const w=await(await fetch(`${Te}/api/admin/all-orders?days=30`)).json();if(w.status==="success"){const E=(Array.isArray(w.data)?w.data:[]).filter(A=>A!==null).map(A=>{let z=[];try{A["Products (JSON)"]&&(z=JSON.parse(A["Products (JSON)"]))}catch{}return{...A,Products:z}});q(E),Xe.set(x,E,3e5)}}catch(u){console.error("Failed to fetch report data",u)}finally{oe(!1)}}};r.useEffect(()=>{ie()},[]);const ve=x=>{re(g=>({key:x,direction:g.key===x&&g.direction==="desc"?"asc":"desc"}))},we=x=>{const g={...o,datePreset:x};_(g),ie()},Ne=(x,g)=>{const b={...o,[x]:g};_(b)},ye=(x,g)=>{if(i){const b={team:C};b.datePreset=o.datePreset,o.datePreset==="custom"&&(b.customStart=o.customStart,b.customEnd=o.customEnd),x==="page"&&(b.page=g),i(b)}},X=(x,g)=>{if(i){const b=new Date,u=b.getFullYear();let w=o.datePreset==="last_year"?u-1:u;if(o.datePreset==="custom"&&o.customStart){const O=new Date(o.customStart).getFullYear();isNaN(O)||(w=O)}const W=new Date(w,g,1),E=new Date(w,g+1,0,23,59,59);let A=null,z=null;switch(o.datePreset){case"today":A=new Date(b.getFullYear(),b.getMonth(),b.getDate()),z=new Date(b.getFullYear(),b.getMonth(),b.getDate(),23,59,59);break;case"yesterday":const O=new Date(b);O.setDate(O.getDate()-1),A=new Date(O.getFullYear(),O.getMonth(),O.getDate()),z=new Date(O.getFullYear(),O.getMonth(),O.getDate(),23,59,59);break;case"this_week":const H=b.getDay(),pe=new Date(b);pe.setDate(b.getDate()-(H===0?6:H-1));const F=new Date(pe);F.setDate(pe.getDate()+6),A=new Date(pe.setHours(0,0,0,0)),z=new Date(F.setHours(23,59,59,999));break;case"this_month":A=new Date(u,b.getMonth(),1),z=new Date(u,b.getMonth()+1,0,23,59,59);break;case"custom":o.customStart&&(A=new Date(o.customStart+"T00:00:00")),o.customEnd&&(z=new Date(o.customEnd+"T23:59:59"));break;default:A=null,z=null}let G=W,T=E;A&&A>W&&(G=A),z&&z<E&&(T=z),G>T&&(G=W,T=E);const ue=O=>{const H=O.getFullYear(),pe=String(O.getMonth()+1).padStart(2,"0"),F=String(O.getDate()).padStart(2,"0");return`${H}-${pe}-${F}`};i({team:C,page:x,datePreset:"custom",customStart:ue(G),customEnd:ue(T),isMonthlyDrilldown:!0})}},me=r.useMemo(()=>{const x=ce.length>0?ce:f,g=new Date,b=new Date(g.getFullYear(),g.getMonth(),g.getDate());let u=null,w=null;switch(o.datePreset){case"today":u=b,w=new Date(b),w.setHours(23,59,59,999);break;case"yesterday":u=new Date(b),u.setDate(b.getDate()-1),w=new Date(b),w.setMilliseconds(-1);break;case"this_week":const W=g.getDay();u=new Date(b),u.setDate(b.getDate()-(W===0?6:W-1)),w=new Date(u),w.setDate(u.getDate()+6),w.setHours(23,59,59,999);break;case"this_month":u=new Date(g.getFullYear(),g.getMonth(),1),w=new Date(g.getFullYear(),g.getMonth()+1,0,23,59,59,999);break;case"last_month":u=new Date(g.getFullYear(),g.getMonth()-1,1),w=new Date(g.getFullYear(),g.getMonth(),0,23,59,59,999);break;case"this_year":u=new Date(g.getFullYear(),0,1),w=new Date(g.getFullYear(),11,31,23,59,59,999);break;case"last_year":u=new Date(g.getFullYear()-1,0,1),w=new Date(g.getFullYear()-1,11,31,23,59,59,999);break;case"all":u=null,w=null;break;case"custom":u=new Date(o.customStart+"T00:00:00"),w=new Date(o.customEnd+"T23:59:59");break}return x.filter(W=>{if((W.Team||"").trim().toLowerCase()!==C.trim().toLowerCase())return!1;if(!u)return!0;const E=new Date(W.Timestamp);return w?E>=u&&E<=w:E>=u})},[ce,f,C,o]),B=r.useMemo(()=>{const x={};U.pages&&U.pages.filter(u=>(u.Team||"").trim()===C).forEach(u=>{x[u.PageName]={pageName:u.PageName,teamName:C,logoUrl:u.PageLogoURL||"",revenue:0,profit:0,orderCount:0},Ae.forEach(w=>{x[u.PageName][`rev_${w}`]=0,x[u.PageName][`prof_${w}`]=0})}),me.forEach(b=>{var A;const u=b.Page||"Unknown";if(!x[u]){const z=(A=U.pages)==null?void 0:A.find(G=>G.PageName===u);x[u]={pageName:u,teamName:C,logoUrl:(z==null?void 0:z.PageLogoURL)||"",revenue:0,profit:0,orderCount:0},Ae.forEach(G=>{x[u][`rev_${G}`]=0,x[u][`prof_${G}`]=0})}const w=Number(b["Grand Total"])||0,W=(Number(b["Total Product Cost ($)"])||0)+(Number(b["Internal Cost"])||0),E=w-W;if(x[u].revenue+=w,x[u].profit+=E,x[u].orderCount+=1,b.Timestamp){const z=new Date(b.Timestamp),G=Ae[z.getMonth()];x[u][`rev_${G}`]+=w,x[u][`prof_${G}`]+=E}});let g=Object.values(x);return s||(g=g.filter(b=>b.revenue>0)),g.sort((b,u)=>{const w=ae.direction==="asc"?1:-1,W=b[ae.key],E=u[ae.key];return typeof W=="string"?W.localeCompare(E)*w:(W-E)*w})},[me,ae,U.pages,s,C]),Z=r.useMemo(()=>{const x={revenue:0,profit:0,pagesCount:B.length,orders:0};return Ae.forEach(g=>{x[`rev_${g}`]=0,x[`prof_${g}`]=0}),B.forEach(g=>{x.revenue+=g.revenue,x.profit+=g.profit,x.orders+=g.orderCount,Ae.forEach(b=>{x[`rev_${b}`]+=g[`rev_${b}`],x[`prof_${b}`]+=g[`prof_${b}`]})}),x},[B]),J=()=>{fe(!0),setTimeout(()=>{try{const x=new bt({orientation:"landscape"}),g=x.internal.pageSize.width;x.setFontSize(18),x.text(`Sales Report - Team: ${C}`,g/2,15,{align:"center"}),x.setFontSize(12),x.text(`Period: ${o.datePreset.toUpperCase()}`,g/2,22,{align:"center"}),x.autoTable({startY:30,head:[["Metric","Value"]],body:[["Total Revenue",`$${Z.revenue.toLocaleString()}`],["Total Orders",Z.orders]],theme:"grid",headStyles:{fillColor:[41,128,185]}}),x.save(`Page_Report_${C}_${Date.now()}.pdf`)}catch(x){console.error(x),alert("Export failed")}finally{fe(!1)}},100)},he=r.useMemo(()=>[...B].sort((x,g)=>g.revenue-x.revenue).slice(0,5).map(x=>({label:x.pageName,value:x.revenue,imageUrl:x.logoUrl})),[B]);return Q&&ce.length===0?e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(Me,{size:"lg"})}):e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:S,className:"bg-gray-800 p-3 rounded-2xl border border-gray-700 hover:bg-gray-700 active:scale-95 transition-all",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-black text-white uppercase tracking-tighter italic",children:"Page Report"}),e.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:C})]})]}),e.jsxs("div",{className:"flex overflow-x-auto gap-2 p-1 bg-gray-900/50 rounded-2xl border border-white/5 max-w-full no-scrollbar",children:[["today","yesterday","this_week","this_month","last_month","this_year","last_year","all"].map(x=>e.jsx("button",{onClick:()=>we(x),className:`px-4 py-2 text-[10px] font-black uppercase rounded-xl whitespace-nowrap transition-all ${o.datePreset===x?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:bg-white/5"}`,children:x.replace("_"," ")},x)),e.jsx("button",{onClick:()=>we("custom"),className:`px-4 py-2 text-[10px] font-black uppercase rounded-xl whitespace-nowrap transition-all ${o.datePreset==="custom"?"bg-blue-600 text-white shadow-lg":"text-gray-500 hover:bg-white/5"}`,children:"Custom"})]})]}),o.datePreset==="custom"&&e.jsxs("div",{className:"flex items-center gap-4 bg-gray-800/30 p-4 rounded-2xl border border-white/5 animate-fade-in-down",children:[e.jsx("input",{type:"date",value:o.customStart,onChange:x=>Ne("customStart",x.target.value),className:"bg-gray-900 border border-gray-700 rounded-xl px-4 py-2 text-white text-xs font-bold"}),e.jsx("span",{className:"text-gray-500 font-bold",children:"-"}),e.jsx("input",{type:"date",value:o.customEnd,onChange:x=>Ne("customEnd",x.target.value),className:"bg-gray-900 border border-gray-700 rounded-xl px-4 py-2 text-white text-xs font-bold"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(He,{label:"á…áŸ†áá¼á›áŸášá»á” (Revenue)",value:`$${Z.revenue.toLocaleString()}`,icon:"ğŸ’°",colorClass:"from-blue-600 to-indigo-500"}),e.jsx(He,{label:"á€á¶ášá€á˜áŸ’á˜á„áŸ‹ (Orders)",value:Z.orders,icon:"ğŸ“¦",colorClass:"from-purple-600 to-pink-500"}),e.jsx(He,{label:"Page áŸá€á˜áŸ’á˜",value:Z.pagesCount,icon:"ğŸ“„",colorClass:"from-orange-500 to-yellow-500"})]}),e.jsx(ut,{data:B,grandTotals:Z,sortConfig:ae,onToggleSort:ve,showAllPages:s,setShowAllPages:M,onExportPDF:J,isExporting:be,onPreviewImage:v,onNavigate:ye,onMonthClick:X}),e.jsx(pt,{data:B,grandTotals:Z,onPreviewImage:v,onNavigate:ye,onMonthClick:X}),e.jsx(ht,{data:B,onPreviewImage:v,onNavigate:ye,onMonthClick:X}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 pb-10",children:[e.jsx("div",{className:"lg:col-span-8",children:e.jsx("div",{className:"page-card !p-4 bg-gray-800/40 border-gray-700/50",children:e.jsx(gt,{data:he,title:"Page áŠáŸ‚á›á˜á¶á“á…áŸ†áá¼á›ááŸ’á–áŸáŸ‹á”áŸ†á•á»á (Top 5 Pages Revenue)"})})}),e.jsxs("div",{className:"lg:col-span-4 flex flex-col justify-center page-card !p-5 bg-gray-800/30 border-gray-700/50",children:[e.jsxs("h3",{className:"text-sm font-black text-gray-400 uppercase tracking-widest flex items-center gap-2 mb-6",children:[e.jsx("span",{className:"w-1.5 h-4 bg-indigo-500 rounded-full"}),"áŸá„áŸ’ááŸá”"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between border-b border-white/5 pb-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"á…áŸ†á“á½á“ Page áŸá€á˜áŸ’á˜:"}),e.jsx("span",{className:"text-white font-black text-sm",children:Z.pagesCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"á˜á’áŸ’á™á˜á—á¶á‚/Page:"}),e.jsxs("span",{className:"text-blue-400 font-black text-sm",children:["$",(Z.revenue/(Z.pagesCount||1)).toLocaleString(void 0,{maximumFractionDigits:0})]})]})]})]})]})]})},le={FILTER:1,PROMPT:1.5,VERIFY:2,SUMMARY:3},Ye="delivery_list_session",Dt=({isOpen:f,onClose:S,orders:C,appData:i})=>{var p,m;const{currentUser:o,showNotification:_,refreshData:U}=r.useContext(ze),[v,Y]=r.useState(le.FILTER),[h,ne]=r.useState(window.innerWidth<1024);r.useEffect(()=>{const t=()=>ne(window.innerWidth<1024);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const[$,xe]=r.useState(new Date().toISOString().split("T")[0]),[se,s]=r.useState(""),[M,be]=r.useState("ACC Delivery Agent"),[fe,ae]=r.useState(""),[re,ce]=r.useState(!1),[q,Q]=r.useState(new Set),[oe,ie]=r.useState(new Set),[ve,we]=r.useState(""),[Ne,ye]=r.useState([]),[X,me]=r.useState(!1),[B,Z]=r.useState([]),[J,he]=r.useState(new Set),[x,g]=r.useState({}),[b,u]=r.useState(!1),[w,W]=r.useState(""),[E,A]=r.useState(""),[z,G]=r.useState(!1),[T,ue]=r.useState(null),[O,H]=r.useState("idle"),pe=t=>{if(!t)return"";const a=t.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{2})/);if(a){const l=new Date(parseInt(a[1]),parseInt(a[2])-1,parseInt(a[3]),parseInt(a[4]),parseInt(a[5]));if(!isNaN(l.getTime()))return l.toISOString().split("T")[0]}try{const l=new Date(t);return isNaN(l.getTime())?"":l.toISOString().split("T")[0]}catch{return""}},F=r.useMemo(()=>{const a=[...C.filter(n=>n.Timestamp?pe(n.Timestamp)===$&&(se?n["Fulfillment Store"]===se:!1)&&(n["Internal Shipping Method"]||"").toLowerCase()===M.toLowerCase():!1),...Ne],l=new Set;return a.filter(n=>l.has(n["Order ID"])?!1:(l.add(n["Order ID"]),!0))},[C,$,se,M,Ne]),N=r.useMemo(()=>{if(!ve.trim())return[];const t=ve.toLowerCase();return C.filter(a=>(a["Order ID"].toLowerCase().includes(t)||(a["Customer Phone"]||"").includes(t))&&!F.some(l=>l["Order ID"]===a["Order ID"])).slice(0,10)},[C,ve,F]);r.useEffect(()=>{Q(new Set(F.map(t=>t["Order ID"])))},[F]),r.useEffect(()=>{var t;if(f){const a=localStorage.getItem(Ye);if(a)try{const l=JSON.parse(a);((t=l.pendingOrders)==null?void 0:t.length)>0?(Z(l.pendingOrders),he(new Set(l.verifiedIds)),g(l.shippingAdjustments),Y(le.PROMPT)):k()}catch{k()}else k()}},[f]);const k=()=>{var t,a;Y(le.FILTER),ae(""),ce(!1),Z([]),he(new Set),g({}),ie(new Set),ye([]),we(""),me(!1),u(!1),A(""),W(""),((t=i.stores)==null?void 0:t.length)>0&&s(i.stores[0].StoreName),((a=i.shippingMethods)==null?void 0:a.length)>0&&(i.shippingMethods.some(n=>n.MethodName==="ACC Delivery Agent")||be(i.shippingMethods[0].MethodName))},R=()=>{localStorage.removeItem(Ye),k()},L=()=>{if(F.length===0){alert("No orders selected!");return}const t=new Date($);let l=`ğŸ“¦ **á”á‰áŸ’á‡á¸áŠá¹á€á‡á‰áŸ’á‡á¼á“á”áŸ’ášá…á¶áŸ†ááŸ’á„áŸƒ** ğŸ“… ${`${String(t.getDate()).padStart(2,"0")}/${String(t.getMonth()+1).padStart(2,"0")}/${t.getFullYear()}`}
ğŸšš á€áŸ’ášá»á˜á áŸŠá»á“: ${M}
ğŸ­ áƒáŸ’á›á¶áŸ†á„: ${se}
--------------------------------

`,n=0,c=0,D=0,K=0,ke=0;F.forEach((V,P)=>{const Ce=q.has(V["Order ID"]),Be=oe.has(V["Order ID"]),Se=V["Grand Total"]||0,I=V["Payment Status"]==="Paid";let de=Ce?" âœ…":Be?" ( Return )":" â³ (áŠá¹á€á˜á·á“á‡áŸ„á‚á‡áŸá™)";Ce?(n+=Se,ke++,I?c+=Se:D+=Se):K+=Se;const Ie=V.Location||"",De=V["Address Details"]||"";let Le=Ie==="ášá¶á‡á’á¶á“á¸á—áŸ’á“áŸ†á–áŸá‰"&&De?De:[Ie,De].filter(Boolean).join(", ");Le.length>40&&(Le=Le.substring(0,40)+"..."),l+=`${P+1}. ğŸ“ ${V["Customer Phone"]} | ID: \`${V["Order ID"].slice(-5)}\`
   ğŸ“ ${Le}
   (ğŸ’µ $${Se.toFixed(2)}) - ${I?"ğŸŸ¢":"ğŸ”´"} **${I?"Paid":"COD"}**${de}

`}),l+=`--------------------------------
ğŸ“¦ **á…áŸ†á“á½á“á€á‰áŸ’á…á”áŸ‹áŸášá»á”:** ${ke} á€á‰áŸ’á…á”áŸ‹
ğŸ’° **áŸášá»á”á‘á¹á€á”áŸ’ášá¶á€áŸ‹ (áŠá¹á€á‡áŸ„á‚á‡áŸá™):** $${n.toFixed(2)}
   â”œâ”€ ğŸŸ¢ Paid: $${c.toFixed(2)}
   â””â”€ ğŸ”´ COD: $${D.toFixed(2)} ğŸ’¸
âŒ **áŸášá»á”á‘á¹á€á”áŸ’ášá¶á€áŸ‹ (áŠá¹á€á˜á·á“á‡áŸ„á‚á‡áŸá™):** $${K.toFixed(2)}

`;const Oe=F.filter(V=>q.has(V["Order ID"])).map(V=>V["Order ID"]),Ee=F.filter(V=>oe.has(V["Order ID"])).map(V=>V["Order ID"]),_e=F.filter(V=>!q.has(V["Order ID"])&&!oe.has(V["Order ID"])).map(V=>V["Order ID"]);if(Oe.length>0||Ee.length>0||_e.length>0){const V=`${window.location.origin}${window.location.pathname}?v=cd&i=${Oe.join(",")}&r=${Ee.join(",")}&f=${_e.join(",")}&s=${encodeURIComponent(se)}&e=${Date.now()+72e5}`;l+=`--------------------------------
ğŸ”— **á”á‰áŸ’á‡á¶á€áŸ‹ááŸ’á›áŸƒáŠá¹á€ (Confirm Delivery):**
ğŸ‘‰ [á…á»á…á‘á¸á“áŸáŸ‡áŠá¾á˜áŸ’á”á¸á”á‰áŸ’á‡á¶á€áŸ‹ááŸ’á›áŸƒáŠá¹á€ (Confirm)](${V})`}ae(l),ce(!0)},ee=async()=>{const t=F.filter(c=>q.has(c["Order ID"])).map(c=>c["Order ID"]),a=F.filter(c=>oe.has(c["Order ID"])).map(c=>c["Order ID"]),l=F.filter(c=>!q.has(c["Order ID"])&&!oe.has(c["Order ID"])).map(c=>c["Order ID"]);if(t.length===0&&a.length===0&&l.length===0){alert("No orders selected!");return}const n=`${window.location.origin}${window.location.pathname}?v=cd&i=${t.join(",")}&r=${a.join(",")}&f=${l.join(",")}&s=${encodeURIComponent(se)}&e=${Date.now()+7200*1e3}`;try{await navigator.clipboard.writeText(n),_("Link Copied!","success")}catch{alert("Failed to copy link")}},j=async()=>{try{await navigator.clipboard.writeText(fe),_("Report Copied!","success");const t=F.filter(n=>q.has(n["Order ID"])),a={};t.forEach(n=>{a[n["Order ID"]]=n["Internal Cost"]||0});const l=t.map(n=>n["Order ID"]);Z(t),he(new Set(l)),g(a),localStorage.setItem(Ye,JSON.stringify({pendingOrders:t,verifiedIds:l,shippingAdjustments:a,timestamp:Date.now()})),Y(le.PROMPT)}catch{alert("Copy failed.")}},y=t=>{he(a=>{const l=new Set(a);return l.has(t)?l.delete(t):l.add(t),l})},te=(t,a)=>{const l=parseFloat(a);g(n=>({...n,[t]:isNaN(l)?0:l}))},Pe=async()=>{if(!E){alert("Password required.");return}G(!0);try{const t=await fetch(`${Te}/api/users`,{cache:"no-store"});if(!t.ok)throw new Error("Network synchronization error");if(!(await t.json()).data.find(P=>P.UserName===(o==null?void 0:o.UserName)&&P.Password===E))throw new Error("á›áŸááŸá˜áŸ’á„á¶ááŸ‹á˜á·á“ááŸ’ášá¹á˜ááŸ’ášá¼áœ (Incorrect Password)");const c=B.map(P=>P["Order ID"]);let D=0;const K=[],ke=5,Oe=[...B],Ee=Oe.length;let _e=0;console.log(`Starting delivery list finalization for ${Ee} orders...`);const V=async P=>{const Ce=J.has(P["Order ID"]),Be=P["Payment Status"]!=="Paid",Se=x[P["Order ID"]]!==void 0?x[P["Order ID"]]:P["Internal Cost"]||0,I={...P,"Internal Cost":Se};if(Ce&&(Be&&(I["Payment Status"]="Paid",I["Payment Info"]=w,I["Delivery Paid"]=P["Grand Total"],I["Delivery Unpaid"]=0),P.Timestamp)){const $e=new Date,Fe=`${$e.getFullYear()}-${String($e.getMonth()+1).padStart(2,"0")}-${String($e.getDate()).padStart(2,"0")}`,je=P.Timestamp.match(/^(\d{4})-(\d{1,2})-(\d{1,2})/);if(je&&`${je[1]}-${je[2].padStart(2,"0")}-${je[3].padStart(2,"0")}`!==Fe){const st=je[3].padStart(2,"0"),at=je[2].padStart(2,"0"),rt=je[1].slice(-2),Ke=`(á€á¶á›á”ášá·á…áŸáŸ’á†á‘á‘á˜áŸ’á›á¶á€áŸ‹á€á¶ášá€á˜áŸ’á˜á„áŸ‹ : ${st}/${at}/${rt})`;let qe=P.Note||"";qe.includes("á€á¶á›á”ášá·á…áŸáŸ’á†á‘á‘á˜áŸ’á›á¶á€áŸ‹á€á¶ášá€á˜áŸ’á˜á„áŸ‹")||(I.Note=qe?`${qe}
${Ke}`:Ke);let Qe="12:00:00";const Ue=P.Timestamp.match(/\s(\d{1,2}:\d{2}(?::\d{2})?)/);Ue&&(Qe=Ue[1].length===5?`${Ue[1]}:00`:Ue[1]),I.Timestamp=`${Fe} ${Qe}`}}const de={orderId:P["Order ID"],team:P.Team,userName:o==null?void 0:o.UserName,newData:{...I,"Products (JSON)":JSON.stringify(P.Products)}};let Ie=!1,De=0;const Le=3;for(;!Ie&&De<Le;){De++;try{if((await fetch(`${Te}/api/admin/update-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)})).ok)Ie=!0;else{const Fe=Math.min(5e3,Math.pow(2,De)*500);await new Promise(je=>setTimeout(je,Fe))}}catch{const Fe=Math.min(5e3,Math.pow(2,De)*500);await new Promise(je=>setTimeout(je,Fe))}}Ie||(D++,K.push(P["Order ID"])),_e++,console.log(`Progress: ${_e}/${Ee} (${P["Order ID"]}: ${Ie?"OK":"FAIL"})`),await new Promise($e=>setTimeout($e,300))};for(let P=0;P<Oe.length;P+=ke){const Ce=Oe.slice(P,P+ke);await Promise.all(Ce.map(V))}if(D>0)alert(`á€á¶áš Update á”á¶á“á”á‰áŸ’á…á”áŸ‹ á”áŸ‰á»á“áŸ’ááŸ‚á˜á¶á“á”á‰áŸ’á á¶á›á¾ ${D} á€á‰áŸ’á…á”áŸ‹: (${K.join(", ")})

áŸá¼á˜á–áŸ’á™á¶á™á¶á˜á˜áŸ’áá„á‘áŸ€ááŸá˜áŸ’ášá¶á”áŸ‹á€á‰áŸ’á…á”áŸ‹áŠáŸ‚á›á“áŸ…áŸá›áŸ‹áŸ”`);else{localStorage.removeItem(Ye);const P=B.filter(I=>J.has(I["Order ID"])),Ce={count:P.length,totalUSD:P.reduce((I,de)=>I+(de["Grand Total"]||0),0),paidUSD:P.filter(I=>I["Payment Status"]==="Paid"||J.has(I["Order ID"])).reduce((I,de)=>I+(de["Grand Total"]||0),0),codUSD:P.filter(I=>I["Payment Status"]!=="Paid"&&!J.has(I["Order ID"])).reduce((I,de)=>I+(de["Grand Total"]||0),0),shipCost:P.reduce((I,de)=>I+(x[de["Order ID"]]||0),0),date:$,store:se,user:o==null?void 0:o.FullName},Be=P.filter(I=>I["Payment Status"]==="Paid").reduce((I,de)=>I+(de["Grand Total"]||0),0),Se=P.filter(I=>I["Payment Status"]!=="Paid").reduce((I,de)=>I+(de["Grand Total"]||0),0);ue({...Ce,alreadyPaid:Be,newlyPaid:Se}),_("Delivery verified and database updated!","success"),Y(le.SUMMARY),u(!1)}await U()}catch(t){alert(t.message||"Failed to update database.")}finally{G(!1)}},d=async()=>{const t=document.getElementById("summary-card");if(t)try{H("idle"),await document.fonts.ready,await new Promise(l=>setTimeout(l,800));const a=await yt(t,{backgroundColor:"#020617",scale:4,logging:!1,useCORS:!0,onclone:l=>{const n=l.getElementById("summary-card");n&&(n.style.fontFamily="'Kantumruy Pro', sans-serif",n.querySelectorAll("*").forEach(D=>{const K=D;K.style.letterSpacing="normal",K.style.textTransform="none",K.style.fontFamily="'Kantumruy Pro', sans-serif"}))}});a.toBlob(async l=>{if(l)try{await navigator.clipboard.write([new ClipboardItem({"image/png":l})]),H("success"),setTimeout(()=>H("idle"),4e3),_("Image Copied to Clipboard!","success")}catch(n){console.error("Clipboard write failed, falling back to download:",n);const c=a.toDataURL("image/png"),D=document.createElement("a");D.download=`summary_${Date.now()}.png`,D.href=c,D.click(),H("error"),setTimeout(()=>H("idle"),4e3)}},"image/png")}catch(a){console.error("Canvas capture failed:",a),H("error")}};return f?(B.some(t=>J.has(t["Order ID"])&&t["Payment Status"]!=="Paid"),e.jsxs(Je,{isOpen:f,onClose:S,fullScreen:!0,children:[e.jsx("style",{children:`
                @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
                .no-scrollbar::-webkit-scrollbar { display: none; }
                input::-webkit-outer-spin-button,
                input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
                input[type=number] { -moz-appearance: textfield; }
            `}),e.jsxs("div",{className:"bg-[#020617] flex flex-col h-screen w-screen relative overflow-hidden text-white font-['Kantumruy_Pro']",children:[e.jsxs("div",{className:"p-4 sm:p-6 bg-slate-900/90 backdrop-blur-xl border-b border-white/10 flex justify-between items-center z-30 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center shadow-lg ${v===le.FILTER?"bg-blue-600":"bg-emerald-600"}`,children:e.jsx("span",{className:"text-sm font-black italic",children:v===le.PROMPT?"!":Math.floor(v)})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-black uppercase tracking-tighter leading-none",children:v===le.FILTER?"á”á„áŸ’á€á¾áá”á‰áŸ’á‡á¸áŠá¹á€á‡á‰áŸ’á‡á¼á“":"á•áŸ’á‘áŸ€á„á•áŸ’á‘á¶ááŸ‹á€á¶ášáŠá¹á€"}),e.jsx("p",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mt-1",children:"ACC Logistics Portal"})]})]}),e.jsx("button",{onClick:S,className:"w-10 h-10 rounded-xl bg-white/5 text-gray-400 hover:text-white flex items-center justify-center transition-all border border-white/5 active:scale-90 shadow-xl",children:"Ã—"})]}),e.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar bg-gradient-to-br from-[#020617] via-[#0f172a] to-[#020617] relative",children:e.jsxs("div",{className:"p-3 sm:p-10 relative z-10 h-full flex flex-col",children:[v===le.FILTER&&e.jsx("div",{className:`animate-fade-in mx-auto h-full flex flex-col w-full ${h?"space-y-3":"max-w-[1600px] space-y-6"}`,children:re?e.jsxs("div",{className:"flex-grow flex flex-col animate-fade-in-up max-w-4xl mx-auto w-full space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-slate-900/80 p-4 rounded-[2rem] border border-white/10 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("label",{className:"text-[10px] font-black text-gray-300 uppercase tracking-widest",children:"Preview Mode"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:ee,className:"text-[9px] font-black text-blue-400 uppercase bg-blue-400/10 px-3 py-1.5 rounded-xl border border-blue-400/20",children:"Copy Link Only"}),e.jsx("button",{onClick:()=>ce(!1),className:"text-[9px] font-black text-red-400 uppercase bg-red-400/10 px-3 py-1.5 rounded-xl border border-red-400/20",children:"Reset"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:L,className:"w-full sm:w-auto px-10 py-3 bg-white/5 text-emerald-400 rounded-2xl border border-emerald-500/20 text-[10px] font-black uppercase shadow-xl",children:"Refresh Text"})}),e.jsx("textarea",{value:fe,onChange:t=>ae(t.target.value),className:"w-full flex-grow bg-black/60 border border-white/10 rounded-[2.5rem] p-6 font-mono text-sm text-gray-200 focus:ring-0 resize-none shadow-2xl min-h-[400px] custom-scrollbar leading-relaxed"})]}):e.jsxs("div",{className:`${h?"flex flex-col h-full":"grid grid-cols-12 gap-8 h-full"}`,children:[e.jsxs("div",{className:`${h?"w-full bg-slate-900/60 p-3 rounded-2xl border border-white/10":"col-span-3 bg-slate-900/60 p-6 rounded-[2.5rem] border border-white/10 shadow-2xl h-fit"}`,children:[e.jsxs("div",{className:`${h?"flex items-center gap-2 overflow-x-auto no-scrollbar":"space-y-4"}`,children:[e.jsx("input",{type:"date",value:$,onChange:t=>xe(t.target.value),className:`${h?"min-w-[120px] py-2 px-3":"w-full py-3 px-4"} bg-black/40 border-white/10 rounded-xl text-white font-bold text-xs`}),e.jsx("select",{value:M,onChange:t=>be(t.target.value),className:`${h?"min-w-[140px] py-2 px-3":"w-full py-3 px-4"} bg-black/40 border-white/10 rounded-xl text-white font-bold text-xs`,children:(p=i.shippingMethods)==null?void 0:p.map(t=>e.jsx("option",{value:t.MethodName,children:t.MethodName},t.MethodName))}),e.jsx("select",{value:se,onChange:t=>s(t.target.value),className:`${h?"min-w-[120px] py-2 px-3":"w-full py-3 px-4"} bg-black/40 border-white/10 rounded-xl text-white font-bold text-xs`,children:(m=i.stores)==null?void 0:m.map(t=>e.jsx("option",{value:t.StoreName,children:t.StoreName},t.StoreName))}),e.jsxs("button",{onClick:()=>me(!0),className:`${h?"px-4 py-2 flex-shrink-0":"w-full py-3"} bg-purple-600/10 text-purple-400 rounded-xl border border-dashed border-purple-500/30 text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2`,children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M12 4v16m8-8H4"})})," Add Past"]})]}),!h&&e.jsx("button",{onClick:L,disabled:q.size===0,className:"w-full mt-6 py-4 bg-blue-600 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl border border-white/10",children:"á”á„áŸ’á€á¾áá”á‰áŸ’á‡á¸ (Generate)"})]}),e.jsxs("div",{className:`${h?"w-full flex-grow mt-3":"col-span-9 h-full"} flex flex-col min-h-0 bg-slate-900/40 rounded-[2.5rem] border border-white/10 overflow-hidden`,children:[e.jsxs("div",{className:"p-4 bg-gray-900/60 border-b border-white/10 flex justify-between items-center px-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest",children:"SELECTED"}),e.jsxs("span",{className:"text-2xl font-black text-white",children:[q.size," / ",F.length]})]}),e.jsx("button",{onClick:()=>{q.size===F.length?Q(new Set):(Q(new Set(F.map(t=>t["Order ID"]))),ie(new Set))},className:"px-4 py-2 bg-blue-600/10 text-[10px] font-black text-blue-400 uppercase rounded-xl border border-blue-500/20",children:q.size===F.length?"Unselect All":"Select All"})]}),e.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-grow p-3 sm:p-6",children:e.jsx("div",{className:`${h?"flex flex-col gap-3":"grid grid-cols-2 gap-4"}`,children:F.length===0?e.jsxs("div",{className:"col-span-full py-20 text-center opacity-20 flex flex-col items-center gap-4",children:[e.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-xs font-black uppercase tracking-widest",children:"No Orders Found"})]}):F.map((t,a)=>{const l=q.has(t["Order ID"]),n=oe.has(t["Order ID"]),c=()=>{const D=new Set(q),K=new Set(oe);D.has(t["Order ID"])?D.delete(t["Order ID"]):(D.add(t["Order ID"]),K.delete(t["Order ID"])),Q(D),ie(K)};return e.jsxs("div",{className:`flex flex-col gap-3 p-4 rounded-[2rem] border transition-all ${l?"bg-emerald-600/10 border-emerald-500/30":n?"bg-red-600/10 border-red-500/30":"bg-slate-900/60 border-white/5"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",onClick:c,children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-grow cursor-pointer",children:[e.jsx("div",{className:"w-8 h-8 rounded-xl bg-black/40 flex items-center justify-center text-[10px] font-black text-gray-500 flex-shrink-0",children:a+1}),e.jsxs("div",{className:"min-w-0 flex-grow space-y-1",children:[e.jsx("p",{className:"text-sm font-black text-white uppercase truncate",children:t["Customer Name"]}),e.jsx("span",{className:"text-lg font-black text-blue-400 font-mono leading-none block",children:t["Customer Phone"]}),e.jsxs("p",{className:"text-xs text-gray-300 font-bold flex items-center gap-1 leading-none mt-1",children:["ğŸ“ ",t.Location]}),t["Address Details"]&&e.jsx("p",{className:"text-[13px] text-gray-400 font-medium ml-4 border-l border-gray-700 pl-2 leading-tight italic",children:t["Address Details"]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("p",{className:"text-sm font-black text-white tracking-tighter mb-1",children:["$",Number(t["Grand Total"]).toFixed(2)]}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[7px] font-black uppercase border ${t["Payment Status"]==="Paid"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:t["Payment Status"]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2 border-t border-white/5",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-black/20 px-3 py-1.5 rounded-xl border border-white/5 hover:bg-emerald-600/10 transition-all",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:D=>{D.stopPropagation(),c()},className:"w-4 h-4 rounded border-gray-600 bg-gray-800 text-emerald-500 focus:ring-0"}),e.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest ${l?"text-emerald-400":"text-gray-500"}`,children:"Success"})]}),e.jsxs("button",{onClick:D=>{D.stopPropagation();const K=new Set(q),ke=new Set(oe);ke.has(t["Order ID"])?ke.delete(t["Order ID"]):(ke.add(t["Order ID"]),K.delete(t["Order ID"])),Q(K),ie(ke)},className:`px-3 py-1.5 rounded-xl border font-black text-[10px] uppercase tracking-widest flex items-center gap-1.5 ${n?"bg-red-600 border-red-500 text-white shadow-lg":"bg-black/20 border-white/10 text-gray-500 hover:text-red-400"}`,children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:4,children:e.jsx("path",{d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})," Return"]})]})]},t["Order ID"])})})})]}),h&&e.jsx("div",{className:"p-4 bg-slate-900 border-t border-white/10 flex justify-center",children:e.jsx("button",{onClick:L,disabled:q.size===0,className:"w-full py-4 bg-blue-600 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-2xl active:scale-95 transition-all",children:"á”á„áŸ’á€á¾áá”á‰áŸ’á‡á¸ (Generate Preview)"})})]})}),v===le.PROMPT&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center space-y-10 animate-fade-in text-center max-w-lg mx-auto w-full",children:[e.jsx("div",{className:"w-24 h-24 bg-blue-600/10 rounded-3xl flex items-center justify-center border-2 border-blue-500/20 shadow-2xl animate-bounce-slow",children:e.jsx("svg",{className:"w-12 h-12 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:"á˜á¶á“á‘á·á“áŸ’á“á“áŸá™á…á¶áŸáŸ‹"}),e.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:["á”áŸ’ášá–áŸá“áŸ’á’á”á¶á“ášá€áŸ’áŸá¶á‘á»á€á‘á·á“áŸ’á“á“áŸá™á–á¸á›á¾á€á˜á»á“. ",e.jsx("br",{})," áá¾á¢áŸ’á“á€á…á„áŸ‹á”á“áŸ’ááœá¶ á¬á…á¶á”áŸ‹á•áŸ’áá¾á˜ááŸ’á˜á¸?"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full",children:[e.jsx("button",{onClick:R,className:"py-4 rounded-2xl bg-gray-800 text-gray-400 font-black uppercase text-[10px] tracking-widest border border-white/5",children:"Discard"}),e.jsx("button",{onClick:()=>Y(le.VERIFY),className:"py-4 rounded-2xl bg-blue-600 text-white font-black uppercase text-[10px] tracking-widest shadow-2xl",children:"Resume"})]})]}),v===le.VERIFY&&e.jsxs("div",{className:`space-y-6 animate-fade-in w-full ${h?"":"max-w-6xl mx-auto"}`,children:[e.jsxs("div",{className:"bg-amber-900/20 border-2 border-amber-500/20 p-6 rounded-[2.5rem] flex items-start gap-6 shadow-2xl backdrop-blur-xl",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-amber-500/20 flex items-center justify-center flex-shrink-0 border border-amber-500/20 shadow-inner",children:e.jsx("svg",{className:"w-8 h-8 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-amber-400 font-black uppercase text-xs tracking-[0.3em]",children:"á€á¶ášááŸ‚á“á¶áŸ† (INSTRUCTIONS)"}),e.jsxs("div",{className:"text-gray-300 text-sm leading-relaxed space-y-1 font-medium",children:[e.jsx("p",{className:"font-bold text-white mb-2",children:"áŸá¼á˜á–á·á“á·ááŸ’á™á˜á¾á›á”á‰áŸ’á‡á¸áá¶á„á€áŸ’ášáŸ„á˜á¢áŸ„á™á”á¶á“á…áŸ’á”á¶áŸáŸ‹á›á¶áŸáŸ‹áŸ”"}),e.jsx("p",{children:"- áŠá€áŸá‰áŸ’á‰á¶ âœ”ï¸ á…áŸá‰ á”áŸ’ášáŸá·á“á”á¾á€á¶ášáŠá¹á€ **á”ášá¶á‡áŸá™**(Failed) á¬ Return áŸ”"}),e.jsx("p",{children:"- á€áŸ‚á”áŸ’ášáŸ‚ **Shipping Cost** á”áŸ’ášáŸá·á“á”á¾á˜á¶á“á€á¶ášá•áŸ’á›á¶áŸáŸ‹á”áŸ’áá¼ášáŸ”"}),e.jsx("p",{children:"- á”áŸ’ášá–áŸá“áŸ’á’á“á¹á„á’áŸ’áœá¾á”á…áŸ’á…á»á”áŸ’á”á“áŸ’á“á—á¶á–á‘á·á“áŸ’á“á“áŸá™á”á„áŸ‹á”áŸ’ášá¶á€áŸ‹ (Paid) áŸá˜áŸ’ášá¶á”áŸ‹ááŸ‚á€á¶ášáŠá¹á€á‡áŸ„á‚á‡áŸá™á”áŸ‰á»ááŸ’ááŸ„áŸ‡áŸ”"})]})]})]}),e.jsxs("div",{className:"space-y-3 pb-20 px-2",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx("button",{onClick:()=>{J.size===B.length?he(new Set):he(new Set(B.map(t=>t["Order ID"])))},className:"px-4 py-2 bg-emerald-600/10 text-[10px] font-black text-emerald-400 uppercase rounded-xl border border-emerald-500/20",children:J.size===B.length?"Unselect All":"Select All"})}),B.map((t,a)=>{const l=J.has(t["Order ID"]),n=t["Payment Status"]==="Paid";return e.jsx("div",{className:`transition-all rounded-[2.5rem] border-2 overflow-hidden shadow-xl ${l?"bg-slate-900/60 border-white/10":"bg-red-900/5 border-red-500/10 opacity-40 grayscale"}`,children:e.jsxs("div",{className:"p-4 sm:p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4 min-w-0 flex-grow",children:[e.jsx("div",{className:"w-8 h-8 rounded-xl bg-black/40 flex items-center justify-center text-[10px] font-black text-gray-600 flex-shrink-0",children:a+1}),e.jsxs("div",{className:"min-w-0 space-y-1 flex-grow",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("p",{className:"text-sm font-black text-white uppercase truncate",children:t["Customer Name"]}),e.jsx("span",{className:"text-[11px] font-black text-blue-400 font-mono bg-blue-400/10 px-2 py-0.5 rounded-lg border border-blue-400/20",children:t["Customer Phone"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-gray-200 font-bold flex items-center gap-1.5 leading-none",children:["ğŸ“ ",t.Location]}),t["Address Details"]&&e.jsx("p",{className:"text-[13px] text-gray-400 font-medium ml-6 border-l-2 border-gray-800 pl-3 leading-relaxed opacity-90",children:t["Address Details"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-6 bg-black/40 p-3 sm:bg-transparent sm:p-0 rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("p",{className:"text-xl font-black text-white tracking-tighter leading-none",children:["$",Number(t["Grand Total"]).toFixed(2)]}),e.jsxs("div",{className:`inline-flex flex-col items-center px-2 py-0.5 rounded-lg border ${n?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[e.jsx("span",{className:"text-[8px] font-black uppercase leading-none",children:t["Payment Status"]}),e.jsx("span",{className:"text-[7px] font-bold opacity-70 mt-0.5 whitespace-nowrap",children:n?"á”á„áŸ‹ášá½á…":"á”áŸ’ášá˜á¼á› COD"})]})]}),e.jsxs("div",{className:"w-28",children:[e.jsx("p",{className:"text-[9px] font-black text-blue-500 uppercase ml-1 mb-1",children:"Ship Cost"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-xs",children:"$"}),e.jsx("input",{type:"number",step:"0.01",value:x[t["Order ID"]]??0,onChange:c=>te(t["Order ID"],c.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl py-1.5 pl-6 pr-3 text-right text-sm font-black text-blue-400 focus:border-blue-500 transition-all",disabled:!l})]})]}),e.jsx("button",{onClick:()=>y(t["Order ID"]),className:`w-12 h-12 rounded-[1.5rem] flex items-center justify-center border-2 transition-all flex-shrink-0 ${l?"bg-emerald-600 border-emerald-500 text-white shadow-lg":"bg-gray-900 border-white/10 text-gray-700"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:4,children:e.jsx("path",{d:"M5 13l4 4L19 7"})})})]})]})},t["Order ID"])})]})]}),v===le.SUMMARY&&T&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center space-y-8 animate-fade-in text-center max-w-lg mx-auto w-full",children:[e.jsxs("div",{id:"summary-card",className:"w-full bg-slate-900/60 border-2 border-emerald-500/30 rounded-[2.5rem] p-6 sm:p-8 space-y-6 shadow-2xl relative overflow-hidden flex flex-col items-center",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-600/10 blur-[60px] -mr-16 -mt-16"}),e.jsx("div",{className:"w-20 h-20 bg-emerald-500/10 rounded-full flex items-center justify-center border-2 border-emerald-500/20 shadow-xl mb-2 relative z-10",children:e.jsx("svg",{className:"w-10 h-10 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"space-y-2 relative z-10",children:[e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:"á”áŸ’ášáá·á”ááŸ’áá·á€á¶ášááŸá‡áŸ„á‚á‡áŸá™"}),e.jsxs("p",{className:"text-gray-400 text-[10px] font-bold uppercase tracking-widest",children:[T.date," | ",T.store]})]}),e.jsxs("div",{className:"w-full grid grid-cols-2 gap-4 relative z-10",children:[e.jsxs("div",{className:"bg-black/40 p-4 rounded-[2rem] border border-white/5 shadow-inner",children:[e.jsx("p",{className:"text-[10px] text-gray-500 font-bold mb-1",children:"á…áŸ†á“á½á“á€á‰áŸ’á…á”áŸ‹ (COUNT)"}),e.jsx("p",{className:"text-3xl font-black text-white",children:T.count})]}),e.jsxs("div",{className:"bg-blue-600/10 p-4 rounded-[2rem] border border-blue-500/20 shadow-inner",children:[e.jsx("p",{className:"text-[10px] text-blue-400 font-bold mb-1",children:"ááŸ’á›áŸƒáŠá¹á€áŸášá»á” (SHIPPING)"}),e.jsxs("p",{className:"text-3xl font-black text-white",children:["$",T.shipCost.toFixed(2)]})]})]}),e.jsxs("div",{className:"w-full bg-black/20 p-5 rounded-[2rem] border border-white/5 space-y-3 text-left relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-3",children:[e.jsx("span",{className:"text-[13px] font-bold text-gray-200",children:"áŸášá»á”á‘á¹á€á”áŸ’ášá¶á€áŸ‹ (TOTAL)"}),e.jsxs("span",{className:"text-2xl font-black text-white tracking-tighter",children:["$",T.totalUSD.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-gray-300",children:[e.jsx("span",{children:"â”œâ”€ ğŸŸ¢ á”á„áŸ‹ášá½á…áŸáŸ’ášá¶á”áŸ‹ (Paid)"}),e.jsxs("span",{className:"text-emerald-400",children:["$",T.alreadyPaid.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-gray-300",children:[e.jsx("span",{children:"â””â”€ ğŸ’µ á”áŸ’ášá˜á¼á›ááŸ’á˜á¸ (COD)"}),e.jsxs("span",{className:"text-blue-400",children:["$",T.newlyPaid.toFixed(2)]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/5 w-full relative z-10",children:[e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold italic",children:["ğŸ™ áŸá¼á˜á¢ášá‚á»ááŠá›áŸ‹ ",T.user,"!"]}),e.jsx("p",{className:"text-[8px] text-gray-600 font-bold uppercase tracking-widest mt-1",children:"Generated by ACC Order System"})]})]}),e.jsxs("div",{className:"flex flex-col w-full gap-3 mt-4",children:[e.jsx("button",{onClick:async()=>{const t=`âœ… **á”áŸ’ášáá·á”ááŸ’áá·á€á¶ášááŸá‡áŸ„á‚á‡áŸá™**
ğŸ‘¤ á¢áŸ’á“á€ášáŸ€á”á…áŸ†: ${T.user}
ğŸ“… á€á¶á›á”ášá·á…áŸ’á†áŸá‘: ${T.date}
ğŸ­ áƒáŸ’á›á¶áŸ†á„: ${T.store}
--------------------------------
ğŸ“¦ á…áŸ†á“á½á“á€á‰áŸ’á…á”áŸ‹: ${T.count} á€á‰áŸ’á…á”áŸ‹
ğŸ’° áŸášá»á”á‘á¹á€á”áŸ’ášá¶á€áŸ‹: $${T.totalUSD.toFixed(2)}
   â”œâ”€ ğŸŸ¢ á”á„áŸ‹ášá½á…áŸáŸ’ášá¶á”áŸ‹: $${T.alreadyPaid.toFixed(2)}
   â””â”€ ğŸ’µ á”áŸ’ášá˜á¼á›ááŸ’á˜á¸ (COD): $${T.newlyPaid.toFixed(2)}
ğŸšš ááŸ’á›áŸƒáŠá¹á€áŸášá»á”: $${T.shipCost.toFixed(2)}
--------------------------------
ğŸ™ áŸá¼á˜á¢ášá‚á»ááŠá›áŸ‹ ${T.user} áŸá˜áŸ’ášá¶á”áŸ‹á€á¶ášá”á‰áŸ’á…á”áŸ‹á€á·á…áŸ’á…á€á¶ášá“áŸáŸ‡!`;try{await navigator.clipboard.writeText(t)}catch{}await d()},className:`w-full py-4 rounded-2xl font-black uppercase text-xs tracking-[0.1em] shadow-xl active:scale-95 transition-all flex items-center justify-center gap-3 border ${O==="success"?"bg-emerald-600 text-white border-emerald-500":"bg-white text-black border-white/10"}`,children:O==="success"?e.jsx(e.Fragment,{children:"âœ… á”á¶á“á…á˜áŸ’á›á„ (Copied!)"}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})," á…á˜áŸ’á›á„áŸáŸá…á€áŸ’áá¸áŸá„áŸ’ááŸá” (Copy Text & Image)"]})}),e.jsx("button",{onClick:S,className:"w-full py-4 bg-gray-800 text-gray-400 rounded-2xl font-black uppercase text-xs tracking-widest hover:text-white transition-all active:scale-95",children:"á”á·á‘ (Close)"})]})]}),X&&e.jsx("div",{className:"absolute inset-0 z-50 bg-black/80 backdrop-blur-md flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-[#0f172a] border-2 border-white/10 rounded-[3rem] w-full max-w-xl p-8 shadow-2xl flex flex-col max-h-[80%] animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"áŸáŸ’áœáŸ‚á„ášá€á”áŸ’ášáá·á”ááŸ’áá·á€á¶ášááŸá…á¶áŸáŸ‹"}),e.jsx("button",{onClick:()=>{me(!1),we("")},className:"text-gray-500 hover:text-white transition-all flex items-center justify-center w-8 h-8",children:"Ã—"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("input",{type:"text",autoFocus:!0,placeholder:"áŸáŸ’áœáŸ‚á„ášá€áá¶á˜ ID á¬ á›áŸáá‘á¼ášáŸáŸá–áŸ’á‘...",value:ve,onChange:t=>we(t.target.value),className:"w-full bg-black/40 border-2 border-white/10 rounded-2xl py-4 pl-12 pr-4 text-sm font-bold text-white focus:border-purple-500 transition-all shadow-inner"}),e.jsx("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeWidth:"3"})})]}),e.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar space-y-2",children:N.map(t=>e.jsxs("button",{onClick:()=>{ye(a=>[...a,t]),Q(a=>new Set(a).add(t["Order ID"])),me(!1),we(""),_("Order added!","success")},className:"w-full flex items-center justify-between p-4 bg-slate-900/60 hover:bg-blue-600/10 rounded-2xl border border-white/5 text-left transition-all",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-black text-white truncate",children:t["Customer Name"]}),e.jsxs("p",{className:"text-[10px] text-gray-500 font-mono",children:[t["Order ID"]," | ",t["Customer Phone"]]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-black text-blue-400",children:["$",t["Grand Total"]]}),e.jsx("p",{className:"text-[10px] text-gray-600 font-bold uppercase",children:t.Timestamp.split(" ")[0]})]})]},t["Order ID"]))})]})})]})}),e.jsxs("div",{className:"p-6 border-t border-white/10 bg-slate-950/90 backdrop-blur-xl sticky bottom-0 z-30 flex justify-between gap-4 px-10",children:[v===le.VERIFY&&e.jsx("button",{onClick:()=>Y(le.PROMPT),className:"px-8 py-4 rounded-2xl bg-white/5 text-gray-400 font-black uppercase text-[10px] tracking-widest border border-white/5 active:scale-95",children:"Back"}),v===le.FILTER&&re&&e.jsxs("div",{className:"flex gap-4 w-full justify-end",children:[e.jsx("button",{onClick:()=>ce(!1),className:"px-8 py-4 rounded-2xl bg-white/5 text-gray-400 font-black uppercase text-[10px] tracking-widest border border-white/5",children:"Edit List"}),e.jsx("button",{onClick:j,className:"px-10 py-4 rounded-2xl bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-black uppercase text-[10px] tracking-[0.2em] shadow-2xl active:scale-95",children:"Copy & Continue"})]}),v===le.VERIFY&&e.jsx("button",{onClick:()=>{B.some(t=>J.has(t["Order ID"])&&t["Payment Status"]!=="Paid"),u(!0)},className:"w-full sm:w-auto ml-auto px-12 py-4 rounded-2xl bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-black uppercase text-[10px] tracking-[0.2em] shadow-2xl active:scale-95",children:"Finalize Delivery"})]}),b&&e.jsx("div",{className:"absolute inset-0 z-[100] bg-black/95 backdrop-blur-xl flex items-center justify-center p-4 animate-fade-in",children:e.jsx("div",{className:"bg-[#0f172a] border-2 border-white/10 rounded-[2rem] sm:rounded-[3.5rem] w-full max-w-lg p-5 sm:p-10 shadow-[0_0_100px_rgba(0,0,0,1)] transform scale-100 animate-scale-in relative overflow-hidden max-h-[95vh] overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"relative z-10 space-y-5 sm:space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2 sm:space-y-3",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-blue-600/10 rounded-2xl flex items-center justify-center mx-auto border-2 border-blue-500/20 shadow-xl",children:e.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-2xl font-black text-white uppercase tracking-tighter italic",children:"áá˜áŸ’ášá¼áœá±áŸ’á™á˜á¶á“á€á¶ášá¢á“á»á‰áŸ’á‰á¶á"}),e.jsx("p",{className:"text-gray-500 text-[9px] sm:text-xs font-bold uppercase tracking-[0.2em] mt-0.5",children:"Authorization Required"})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[B.some(t=>J.has(t["Order ID"])&&t["Payment Status"]!=="Paid")&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-blue-400 uppercase tracking-widest ml-3",children:"á‡áŸ’ášá¾áŸášá¾áŸá’á“á¶á‚á¶áš (Bank)"}),e.jsx(tt,{bankAccounts:i.bankAccounts||[],selectedBankName:w,onSelect:W})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-red-400 uppercase tracking-widest ml-3",children:"á›áŸááŸá˜áŸ’á„á¶ááŸ‹áŸá»áœááŸ’áá·á—á¶á– (Password)"}),e.jsx("input",{type:"password",value:E,onChange:t=>A(t.target.value),className:"form-input bg-black/60 border-2 border-white/10 rounded-xl sm:rounded-2xl text-white font-black w-full py-3.5 sm:py-4 px-6 focus:border-red-500 text-center tracking-[0.5em] text-base sm:text-lg shadow-inner transition-all",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),e.jsxs("div",{className:"flex gap-3 sm:gap-4 pt-2 sm:pt-4",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-3.5 sm:py-4 bg-gray-800/50 text-gray-500 hover:text-white font-black uppercase text-[9px] sm:text-[10px] tracking-widest rounded-xl sm:rounded-2xl border border-white/5 transition-all active:scale-95",children:"á”áŸ„áŸ‡á”á„áŸ‹"}),e.jsx("button",{onClick:Pe,disabled:z,className:"flex-1 py-3.5 sm:py-4 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-black uppercase text-[9px] sm:text-[10px] tracking-widest rounded-xl sm:rounded-2xl shadow-xl active:scale-95 flex justify-center items-center gap-2 border border-white/10 disabled:opacity-50",children:z?e.jsx(Me,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"á™á›áŸ‹á–áŸ’ášá˜"}),e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{d:"M5 13l4 4L19 7"})})]})})]})]})]})})})]})]})):null},Pt=({team:f,onAdd:S})=>{const{currentUser:C,refreshData:i,appData:o}=r.useContext(ze),[_,U]=r.useState([]),[v,Y]=r.useState([]),[h,ne]=r.useState(null),[$,xe]=r.useState([]),[se,s]=r.useState(null),[M,be]=r.useState(!0),[fe,ae]=r.useState(!1),[re,ce]=r.useState(""),[q,Q]=r.useState(!1),[oe,ie]=r.useState(!1),[ve,we]=r.useState(!1),[Ne,ye]=r.useState(!1),[X,me]=r.useState("today"),[B,Z]=r.useState(new Date().toISOString().split("T")[0]),[J,he]=r.useState(new Date().toISOString().split("T")[0]),[x,g]=r.useState({datePreset:"this_month",customStart:new Date().toISOString().split("T")[0],customEnd:new Date().toISOString().split("T")[0]}),b=r.useRef([]),u=r.useRef([]),w=r.useRef(!1),W=r.useRef(!1),E=!!(C!=null&&C.IsSystemAdmin),A=r.useMemo(()=>new Set(["index","orderId","customerName","productInfo","location","pageInfo","total","shippingService","status","date","print","actions"]),[E]),z=(N,k,R)=>{const L=new Date,ee=new Date(L.getFullYear(),L.getMonth(),L.getDate());let j=null,y=new Date;switch(N){case"today":j=ee,y=new Date(ee),y.setHours(23,59,59,999);break;case"yesterday":j=new Date(ee),j.setDate(ee.getDate()-1),y=new Date(ee),y.setMilliseconds(-1);break;case"this_week":const te=L.getDay();j=new Date(ee),j.setDate(ee.getDate()-(te===0?6:te-1)),y=new Date(j),y.setDate(j.getDate()+6),y.setHours(23,59,59,999);break;case"this_month":j=new Date(L.getFullYear(),L.getMonth(),1),y=new Date(L.getFullYear(),L.getMonth()+1,0,23,59,59,999);break;case"last_month":j=new Date(L.getFullYear(),L.getMonth()-1,1),y=new Date(L.getFullYear(),L.getMonth(),0,23,59,59,999);break;case"this_year":j=new Date(L.getFullYear(),0,1),y=new Date(L.getFullYear(),11,31,23,59,59,999);break;case"last_year":j=new Date(L.getFullYear()-1,0,1),y=new Date(L.getFullYear()-1,11,31,23,59,59,999);break;case"all":j=null,y=null;break;case"custom":k&&(j=Re(k+"T00:00:00")),R&&(y=Re(R+"T23:59:59"));break}return{start:j,end:y}},G=async(N=!1)=>{if(!(N&&W.current)){be(!0);try{const k=N?`${Te}/api/admin/all-orders`:`${Te}/api/admin/all-orders?days=30`,L=await(await fetch(k)).json();if(L.status==="success"){const j=(Array.isArray(L.data)?L.data.filter(y=>y!==null):[]).map(y=>{let te=[];try{y["Products (JSON)"]&&(te=JSON.parse(y["Products (JSON)"]))}catch{}return{...y,Products:te,IsVerified:String(y.IsVerified).toUpperCase()==="TRUE",FulfillmentStatus:y.FulfillmentStatus}});u.current=j,b.current=[],w.current=!0,N&&(W.current=!0),T(X)}}catch(k){console.error(k)}finally{be(!1)}}};r.useEffect(()=>{G()},[]);const T=N=>{if(!w.current)return;if(["this_year","last_year","last_month","all"].includes(N)&&!W.current){G(!0);return}ae(!0),setTimeout(()=>{const{start:R,end:L}=z(N,B,J),ee=u.current.filter(y=>{if(y["Order ID"]==="Opening_Balance"||y["Order ID"]==="Opening Balance"||!y.Timestamp)return!1;const te=et(y.Timestamp);return!(!te||R&&te<R||L&&te>L)});Y(ee);const j=ee.filter(y=>(y.Team||"").trim()===(f||"").trim());U(j.sort((y,te)=>{const Pe=We(y.Timestamp);return We(te.Timestamp)-Pe})),ae(!1)},10)};r.useEffect(()=>{w.current&&T(X)},[X,B,J,f]),r.useEffect(()=>{h&&w.current&&(ae(!0),setTimeout(()=>{const N=b.current;let k=null,R=null;if(h.isMonthlyDrilldown)h.customStart&&(k=Re(h.customStart+"T00:00:00")),h.customEnd&&(R=Re(h.customEnd+"T23:59:59"));else if(h.datePreset==="custom")h.customStart&&(k=Re(h.customStart+"T00:00:00")),h.customEnd&&(R=Re(h.customEnd+"T23:59:59"));else if(h.datePreset){const j=z(h.datePreset);k=j.start,R=j.end}const ee=N.filter(j=>{if(j["Order ID"]==="Opening_Balance"||j["Order ID"]==="Opening Balance")return!1;if(k||R){if(!j.Timestamp)return!1;const y=et(j.Timestamp);if(!y||k&&y<k||R&&y>R)return!1}return!(h.team&&(j.Team||"").trim()!==h.team||h.page&&j.Page!==h.page||h.shipping&&j["Internal Shipping Method"]!==h.shipping||h.driver&&j["Internal Shipping Details"]!==h.driver||h.fulfillmentStore&&j["Fulfillment Store"]!==h.fulfillmentStore)}).map(j=>{let y=[];try{j["Products (JSON)"]&&(y=JSON.parse(j["Products (JSON)"]))}catch{}return{...j,Products:y,IsVerified:String(j.IsVerified).toUpperCase()==="TRUE",FulfillmentStatus:j.FulfillmentStatus}});xe(ee.sort((j,y)=>{const te=We(j.Timestamp);return We(y.Timestamp)-te})),ae(!1)},10))},[h]);const ue=r.useMemo(()=>(h?$:_).filter(k=>{if(re.trim()){const R=re.toLowerCase();return k["Order ID"].toLowerCase().includes(R)||(k["Customer Name"]||"").toLowerCase().includes(R)||(k["Customer Phone"]||"").includes(R)}return!0}),[_,$,h,re]),O=r.useMemo(()=>ue.reduce((N,k)=>N+(Number(k["Grand Total"])||0),0),[ue]),H=r.useMemo(()=>{const N={};return v.forEach(k=>{const R=(k.Team||"Unassigned").trim();N[R]=(N[R]||0)+(Number(k["Grand Total"])||0)}),Object.entries(N).map(([k,R])=>({name:k,revenue:R})).sort((k,R)=>R.revenue-k.revenue).slice(0,3)},[v]),pe=r.useMemo(()=>{switch(X){case"today":return"ááŸ’á„áŸƒá“áŸáŸ‡";case"yesterday":return"á˜áŸ’áŸá·á›á˜á·á‰";case"this_week":return"áŸá”áŸ’áá¶á áŸá“áŸáŸ‡";case"this_month":return"ááŸ‚á“áŸáŸ‡";case"custom":return"áá¶á˜á€áŸ†áááŸ‹";default:return""}},[X]),F=()=>{s(null),be(!0),i().then(()=>{window.location.reload()})};return M?e.jsxs("div",{className:"flex flex-col justify-center items-center h-96 gap-4",children:[e.jsx(Me,{size:"lg"}),e.jsx("p",{className:"text-[10px] font-black text-blue-500 uppercase tracking-[0.4em] animate-pulse",children:"Initializing Data Stream..."})]}):se?e.jsx("div",{className:"animate-fade-in p-2",children:e.jsx(ft,{order:se,onSaveSuccess:F,onCancel:()=>s(null)})}):h?e.jsxs("div",{className:"animate-fade-in p-2 min-h-screen flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 bg-gray-900/50 p-4 rounded-3xl border border-white/5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-black text-white uppercase tracking-tight italic",children:"á•áŸ’á‘á¶áŸ†á„ášá”á¶á™á€á¶ášááŸá”áŸ’ášáá·á”ááŸ’áá·á€á¶ášááŸ"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/20 px-2 py-0.5 rounded border border-blue-500/20",children:h.page||h.shipping||"Filtered View"}),h.isMonthlyDrilldown&&e.jsxs("span",{className:"text-[10px] font-bold text-emerald-400 bg-emerald-900/20 px-2 py-0.5 rounded border border-emerald-500/20",children:[h.customStart," - ",h.customEnd]}),e.jsxs("span",{className:"text-[10px] text-gray-500 font-bold",children:[$.length," entries"]})]})]}),e.jsx("button",{onClick:()=>ne(null),className:"px-6 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-xl text-xs font-black uppercase tracking-widest border border-white/10 transition-all active:scale-95",children:"Back"})]}),fe?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(Me,{size:"md"})}):e.jsx(Ze,{orders:ue,showActions:!0,visibleColumns:A,onEdit:s})]}):q?e.jsx("div",{className:"animate-fade-in p-2",children:e.jsx(Ct,{orders:_,onBack:()=>Q(!1),team:f,onNavigate:N=>ne(N),initialFilters:x,onFilterChange:g})}):oe?e.jsx("div",{className:"animate-fade-in p-2 min-h-screen",children:e.jsx(wt,{orders:_,appData:o,dateFilter:X,startDate:B,endDate:J,onNavigate:N=>{ne(N),ie(!1)},onBack:()=>ie(!1)})}):e.jsxs("div",{className:"space-y-6 flex flex-col min-h-screen",children:[e.jsx("style",{children:`
                .hide-scrollbar::-webkit-scrollbar { display: none; }
                .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-5 bg-blue-500 rounded-full"}),e.jsx("h3",{className:"text-xs font-black text-white uppercase tracking-widest",children:"áá¶ášá¶á„á€áŸ’ášá»á˜á†áŸ’á“á¾á˜"})]}),e.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase",children:pe})]}),e.jsx("div",{className:"flex overflow-x-auto gap-4 px-2 pb-4 hide-scrollbar snap-x",children:H.length===0?e.jsxs("div",{className:"text-gray-500 text-xs p-4 italic",children:["á˜á·á“á˜á¶á“á‘á·á“áŸ’á“á“áŸá™áŸá˜áŸ’ášá¶á”áŸ‹ ",pe]}):H.map((N,k)=>e.jsxs("div",{className:"flex-shrink-0 w-[240px] sm:w-[300px] snap-center bg-gray-900 border border-white/5 p-5 rounded-3xl flex items-center gap-4 relative overflow-hidden shadow-lg",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-2xl border ${k===0?"bg-yellow-500/20 text-yellow-500 border-yellow-500/30":k===1?"bg-gray-400/20 text-gray-300 border-gray-400/30":"bg-orange-600/20 text-orange-500 border-orange-600/30"}`,children:k===0?"ğŸ¥‡":k===1?"ğŸ¥ˆ":"ğŸ¥‰"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"text-sm font-black text-white truncate uppercase tracking-tighter",children:N.name}),e.jsxs("p",{className:"text-lg font-black text-blue-400",children:["$",N.revenue.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),e.jsx("div",{className:`absolute -right-4 -bottom-4 w-20 h-20 rounded-full blur-3xl opacity-10 ${k===0?"bg-yellow-500":k===1?"bg-gray-400":"bg-orange-600"}`})]},N.name))})]}),e.jsxs("div",{className:"bg-[#111827] p-4 rounded-[2rem] border border-white/5 space-y-4 shadow-xl mx-1",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex items-center gap-1 overflow-x-auto hide-scrollbar bg-black/40 p-1 rounded-xl border border-white/5",children:["today","this_week","this_month","custom"].map(N=>e.jsx("button",{onClick:()=>me(N),className:`flex-shrink-0 px-4 py-2 text-[10px] font-black uppercase rounded-lg transition-all ${X===N?"bg-blue-600 text-white shadow-lg shadow-blue-600/40":"text-gray-500"}`,children:N==="today"?"ááŸ’á„áŸƒá“áŸáŸ‡":N==="this_week"?"áŸá”áŸ’áá¶á áŸá“áŸáŸ‡":N==="this_month"?"ááŸ‚á“áŸáŸ‡":"á€áŸ†áááŸ‹"},N))}),e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest",children:"á”áŸ’ášáá·á”ááŸ’áá·á€á¶ášááŸ"}),e.jsxs("span",{className:"text-lg font-black text-white",children:[ue.length," ",e.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"Orders"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-[9px] font-black text-blue-500 uppercase tracking-widest",children:"á‘á¹á€á”áŸ’ášá¶á€áŸ‹áŸášá»á”"}),e.jsxs("p",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-blue-200 to-blue-400",children:["$",O.toLocaleString(void 0,{minimumFractionDigits:0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("button",{onClick:()=>Q(!0),className:"py-3 bg-indigo-600/10 border border-indigo-500/30 text-indigo-400 rounded-xl font-black uppercase text-[10px] tracking-widest hover:bg-indigo-600 hover:text-white transition-all flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Page Report"]}),e.jsxs("button",{onClick:()=>ie(!0),className:"py-3 bg-orange-600/10 border border-orange-500/30 text-orange-400 rounded-xl font-black uppercase text-[10px] tracking-widest hover:bg-orange-600 hover:text-white transition-all flex items-center justify-center gap-2 active:scale-95",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h8a1 1 0 001-1z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 8h-2m2 4h-2m-2-4h.01M17 16h.01"})]}),"Shipping Cost"]}),e.jsxs("button",{onClick:()=>ye(!0),className:"py-3 bg-emerald-600/10 border border-emerald-500/30 text-emerald-400 rounded-xl font-black uppercase text-[10px] tracking-widest hover:bg-emerald-600 hover:text-white transition-all flex items-center justify-center gap-2 active:scale-95",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"Delivery List"]})]})]}),X==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 animate-fade-in-down",children:[e.jsx("input",{type:"date",value:B,onChange:N=>Z(N.target.value),className:"bg-gray-800 border-none text-[10px] font-black text-white rounded-lg p-2"}),e.jsx("input",{type:"date",value:J,onChange:N=>he(N.target.value),className:"bg-gray-800 border-none text-[10px] font-black text-white rounded-lg p-2"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"áŸáŸ’áœáŸ‚á„ášá€áá¶á˜ ID, áˆáŸ’á˜áŸ„áŸ‡, á¬á‘á¼ášáŸáŸá–áŸ’á‘...",value:re,onChange:N=>ce(N.target.value),className:"w-full bg-black/40 border border-gray-800 rounded-xl py-3 pl-10 pr-4 text-xs font-bold text-white placeholder:text-gray-700 focus:border-blue-500/50 transition-all"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),e.jsx("div",{className:"px-1",children:fe?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(Me,{size:"md"})}):ue.length===0?e.jsx("div",{className:"text-center py-20 bg-gray-800/10 rounded-[2rem] border-2 border-dashed border-gray-800/50",children:e.jsx("p",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest italic",children:"ášá€á˜á·á“áƒá¾á‰á‘á·á“áŸ’á“á“áŸá™"})}):e.jsx("div",{className:"animate-fade-in-up",children:e.jsx(Ze,{orders:ue,showActions:!0,visibleColumns:A,onEdit:s})})}),e.jsx("div",{className:"md:hidden fixed bottom-6 left-6 right-6 z-40",children:e.jsxs("div",{className:"bg-gray-900/95 backdrop-blur-3xl p-4 rounded-3xl shadow-2xl border border-white/10 flex justify-between items-center ring-1 ring-white/5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[8px] font-black text-blue-500 uppercase tracking-[0.2em] mb-0.5",children:"Session Revenue"}),e.jsxs("span",{className:"text-white font-black text-xl tracking-tighter",children:["$",O.toLocaleString()]})]}),e.jsx("button",{onClick:S,className:"bg-blue-600 hover:bg-blue-500 text-white p-4 rounded-2xl shadow-lg shadow-blue-600/40 active:scale-90 transition-all",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 4v16m8-8H4",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}),e.jsx("div",{className:"h-32 md:hidden"}),e.jsx(Dt,{isOpen:Ne,onClose:()=>ye(!1),orders:u.current,appData:o,team:f})]})},Ft=({onBackToRoleSelect:f})=>{const{currentUser:S,setChatVisibility:C,setMobilePageTitle:i}=r.useContext(ze),[o,_]=r.useState("list"),[U,v]=lt("team",""),Y=r.useMemo(()=>((S==null?void 0:S.Team)||"").split(",").map(h=>h.trim()).filter(Boolean),[S]);return r.useEffect(()=>{C(o!=="create")},[o,C]),r.useEffect(()=>{Y.length===1&&!U&&v(Y[0])},[Y,U,v]),r.useEffect(()=>(i(U?"MY ORDERS":null),()=>i(null)),[U,i]),Y.length===0?e.jsxs("div",{className:"page-card text-center p-12 mt-20 max-w-lg mx-auto bg-gray-900/60 backdrop-blur-xl border border-white/5 rounded-[3rem]",children:[e.jsxs("h2",{className:"text-xl font-black text-white mb-4",children:["áŸá½áŸáŸ’áá¸, ",S==null?void 0:S.FullName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"á‚áá“á¸ášá”áŸáŸ‹á¢áŸ’á“á€á˜á·á“á‘á¶á“áŸ‹á˜á¶á“á€áŸ’ášá»á˜á€á¶ášá„á¶ášá“áŸ…á¡á¾á™á‘áŸáŸ”"}),e.jsx("button",{onClick:f,className:"btn btn-secondary mt-8 w-full rounded-2xl font-black",children:"ááŸ’ášá¡á”áŸ‹á€áŸ’ášáŸ„á™"})]}):U?o==="create"?e.jsx(St,{team:U,onSaveSuccess:()=>_("list"),onCancel:()=>_("list")}):e.jsxs("div",{className:"w-full max-w-full mx-auto p-2 sm:p-4 animate-fade-in min-h-screen relative overflow-x-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4 px-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl sm:text-4xl font-black text-white italic tracking-tighter leading-none",children:"MY ORDERS"}),e.jsx("div",{className:"h-6 w-px bg-white/10"}),e.jsx("span",{className:"text-blue-500 font-black text-xs uppercase tracking-widest",children:U})]}),e.jsx("div",{className:"md:hidden flex items-center gap-2",children:e.jsxs("span",{className:"text-[10px] bg-blue-900/30 text-blue-400 px-3 py-1 rounded-full border border-blue-500/20 font-black uppercase tracking-widest",children:["Team: ",U]})}),e.jsx("div",{className:"flex gap-2",children:Y.length>1&&e.jsxs("button",{onClick:()=>v(""),className:"text-[9px] font-black uppercase text-gray-500 hover:text-blue-400 transition-colors flex items-center gap-1.5 bg-gray-800/50 px-3 py-1.5 rounded-lg border border-white/5 active:scale-95",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",strokeWidth:3})}),"Switch Team"]})})]}),e.jsxs("button",{onClick:()=>_("create"),className:"hidden md:flex px-10 py-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-black uppercase tracking-widest text-xs rounded-2xl shadow-xl shadow-blue-900/20 transition-all active:scale-95 items-center gap-3 border border-blue-400/20",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M12 4v16m8-8H4"})}),"Create Order"]})]}),e.jsx("div",{className:"relative",children:e.jsx(Pt,{team:U,onAdd:()=>_("create")})})]}):e.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 mt-6 animate-fade-in flex flex-col items-center",children:[e.jsxs("div",{className:"text-center space-y-3 mb-10",children:[e.jsx("p",{className:"text-blue-500 font-black uppercase tracking-[0.4em] text-[10px]",children:"Access Identification"}),e.jsx("h2",{className:"text-4xl sm:text-5xl font-black text-white tracking-tighter italic",children:"á‡áŸ’ášá¾áŸášá¾áŸá€áŸ’ášá»á˜á€á¶ášá„á¶áš"}),e.jsx("div",{className:"w-16 h-1.5 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full mx-auto shadow-[0_0_15px_rgba(59,130,246,0.5)]"})]}),e.jsx("div",{className:"w-full space-y-4 max-w-md",children:Y.map((h,ne)=>e.jsxs("button",{onClick:()=>v(h),className:"group relative w-full overflow-hidden bg-gray-900/60 backdrop-blur-3xl border border-white/5 rounded-[2.5rem] p-6 hover:border-blue-500/40 transition-all duration-500 active:scale-[0.97] shadow-xl flex items-center gap-6",children:[e.jsxs("div",{className:"absolute top-4 left-6",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-ping opacity-75"}),e.jsx("div",{className:"absolute top-0 w-1.5 h-1.5 bg-emerald-500 rounded-full"})]}),e.jsx("div",{className:"relative z-10 w-16 h-16 sm:w-20 sm:h-20 bg-gray-800 rounded-3xl flex items-center justify-center border border-white/5 shadow-inner group-hover:bg-blue-600/10 group-hover:border-blue-500/20 transition-all duration-500 group-hover:rotate-6",children:e.jsx("span",{className:"text-3xl sm:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-br from-blue-400 to-blue-600",children:h.charAt(0)})}),e.jsxs("div",{className:"relative z-10 flex-grow text-left",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white uppercase tracking-tight mb-1",children:h}),e.jsxs("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-widest opacity-60",children:["Team Operational Node ",ne+1]})]}),e.jsx("div",{className:"relative z-10 p-3 bg-white/5 rounded-2xl group-hover:bg-blue-600 group-hover:text-white transition-all text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M9 5l7 7-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/0 via-blue-600/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-blue-500 opacity-0 group-hover:opacity-5 blur-[40px] transition-opacity"})]},h))}),(S==null?void 0:S.IsSystemAdmin)&&e.jsxs("button",{onClick:f,className:"mt-12 flex items-center gap-2 text-[10px] font-black text-gray-600 uppercase tracking-widest hover:text-blue-500 transition-all active:scale-95",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:e.jsx("path",{d:"M15 19l-7-7 7-7",strokeLinecap:"round",strokeLinejoin:"round"})}),"ááŸ’ášá¡á”áŸ‹á‘áŸ…áá½á“á¶á‘á¸"]})]})};export{Ft as default};
