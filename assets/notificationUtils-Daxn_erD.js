const s=async()=>{if(!("Notification"in window))return console.warn("Browser នេះមិនគាំទ្រប្រព័ន្ធ Notification ទេ។"),!1;if(Notification.permission==="granted")return!0;if(Notification.permission!=="denied")try{if(await Notification.requestPermission()==="granted")return console.log("ទទួលបានការអនុញ្ញាត (Permission Granted) ជោគជ័យ!"),!0}catch(o){return console.error("Permission request failed",o),!1}return!1},c=async(o,r)=>{if(!("Notification"in window))return;if(Notification.permission==="default"&&await s(),Notification.permission!=="granted"){console.warn("Notification permission not granted. Cannot send notification.");return}const n="https://cdn-icons-png.flaticon.com/512/1827/1827404.png",a="osystem-alert-"+Date.now(),t={body:r,icon:n,badge:n,vibrate:[200,100,200],tag:a,renotify:!0,requireInteraction:!0,data:{url:window.location.href},silent:!1};let e=!1;if("serviceWorker"in navigator)try{const i=await navigator.serviceWorker.getRegistration();i&&i.active?(await i.showNotification(o,t),console.log("Notification sent via Service Worker"),e=!0):console.warn("Service Worker not active or not found. Falling back...")}catch(i){console.warn("Service Worker notification failed, falling back to legacy API...",i)}if(!e)try{const i=new Notification(o,t);i.onclick=function(){window.focus(),i.close()},console.log("Notification sent via Legacy Web API")}catch(i){console.error("All notification methods failed:",i)}};export{s as r,c as s};
